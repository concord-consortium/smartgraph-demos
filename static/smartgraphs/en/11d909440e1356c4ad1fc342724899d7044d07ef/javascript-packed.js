/*!
 * jQuery JavaScript Library v1.6.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Jun 30 14:16:56 2011 -0400
 */
(function(bc,N){var au=bc.document,bu=bc.navigator,bl=bc.location;var b=(function(){var bF=function(b0,b1){return new bF.fn.init(b0,b1,bD)},bV=bc.jQuery,bH=bc.$,bD,bZ=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bN=/\S/,bJ=/^\s+/,bE=/\s+$/,bI=/\d/,bA=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bO=/^[\],:{}\s]*$/,bX=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bQ=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bK=/(?:^|:|,)(?:\s*\[)+/g,by=/(webkit)[ \/]([\w.]+)/,bS=/(opera)(?:.*version)?[ \/]([\w.]+)/,bR=/(msie) ([\w.]+)/,bT=/(mozilla)(?:.*? rv:([\w.]+))?/,bB=/-([a-z])/ig,bU=function(b0,b1){return b1.toUpperCase()},bY=bu.userAgent,bW,bC,e,bM=Object.prototype.toString,bG=Object.prototype.hasOwnProperty,bz=Array.prototype.push,bL=Array.prototype.slice,bP=String.prototype.trim,bv=Array.prototype.indexOf,bx={};bF.fn=bF.prototype={constructor:bF,init:function(b0,b4,b3){var b2,b5,b1,b6;if(!b0){return this}if(b0.nodeType){this.context=this[0]=b0;this.length=1;return this}if(b0==="body"&&!b4&&au.body){this.context=au;this[0]=au.body;this.selector=b0;this.length=1;return this}if(typeof b0==="string"){if(b0.charAt(0)==="<"&&b0.charAt(b0.length-1)===">"&&b0.length>=3){b2=[null,b0,null]}else{b2=bZ.exec(b0)}if(b2&&(b2[1]||!b4)){if(b2[1]){b4=b4 instanceof bF?b4[0]:b4;b6=(b4?b4.ownerDocument||b4:au);b1=bA.exec(b0);if(b1){if(bF.isPlainObject(b4)){b0=[au.createElement(b1[1])];bF.fn.attr.call(b0,b4,true)}else{b0=[b6.createElement(b1[1])]}}else{b1=bF.buildFragment([b2[1]],[b6]);b0=(b1.cacheable?bF.clone(b1.fragment):b1.fragment).childNodes}return bF.merge(this,b0)}else{b5=au.getElementById(b2[2]);if(b5&&b5.parentNode){if(b5.id!==b2[2]){return b3.find(b0)}this.length=1;this[0]=b5}this.context=au;this.selector=b0;return this}}else{if(!b4||b4.jquery){return(b4||b3).find(b0)}else{return this.constructor(b4).find(b0)}}}else{if(bF.isFunction(b0)){return b3.ready(b0)}}if(b0.selector!==N){this.selector=b0.selector;this.context=b0.context}return bF.makeArray(b0,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return bL.call(this,0)},get:function(b0){return b0==null?this.toArray():(b0<0?this[this.length+b0]:this[b0])},pushStack:function(b1,b3,b0){var b2=this.constructor();if(bF.isArray(b1)){bz.apply(b2,b1)}else{bF.merge(b2,b1)}b2.prevObject=this;b2.context=this.context;if(b3==="find"){b2.selector=this.selector+(this.selector?" ":"")+b0}else{if(b3){b2.selector=this.selector+"."+b3+"("+b0+")"}}return b2},each:function(b1,b0){return bF.each(this,b1,b0)},ready:function(b0){bF.bindReady();bC.done(b0);return this},eq:function(b0){return b0===-1?this.slice(b0):this.slice(b0,+b0+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bL.apply(this,arguments),"slice",bL.call(arguments).join(","))},map:function(b0){return this.pushStack(bF.map(this,function(b2,b1){return b0.call(b2,b1,b2)}))},end:function(){return this.prevObject||this.constructor(null)},push:bz,sort:[].sort,splice:[].splice};bF.fn.init.prototype=bF.fn;bF.extend=bF.fn.extend=function(){var b9,b2,b0,b1,b6,b7,b5=arguments[0]||{},b4=1,b3=arguments.length,b8=false;if(typeof b5==="boolean"){b8=b5;b5=arguments[1]||{};b4=2}if(typeof b5!=="object"&&!bF.isFunction(b5)){b5={}}if(b3===b4){b5=this;--b4}for(;b4<b3;b4++){if((b9=arguments[b4])!=null){for(b2 in b9){b0=b5[b2];b1=b9[b2];if(b5===b1){continue}if(b8&&b1&&(bF.isPlainObject(b1)||(b6=bF.isArray(b1)))){if(b6){b6=false;b7=b0&&bF.isArray(b0)?b0:[]}else{b7=b0&&bF.isPlainObject(b0)?b0:{}}b5[b2]=bF.extend(b8,b7,b1)}else{if(b1!==N){b5[b2]=b1}}}}}return b5};bF.extend({noConflict:function(b0){if(bc.$===bF){bc.$=bH}if(b0&&bc.jQuery===bF){bc.jQuery=bV}return bF},isReady:false,readyWait:1,holdReady:function(b0){if(b0){bF.readyWait++}else{bF.ready(true)}},ready:function(b0){if((b0===true&&!--bF.readyWait)||(b0!==true&&!bF.isReady)){if(!au.body){return setTimeout(bF.ready,1)}bF.isReady=true;if(b0!==true&&--bF.readyWait>0){return}bC.resolveWith(au,[bF]);if(bF.fn.trigger){bF(au).trigger("ready").unbind("ready")}}},bindReady:function(){if(bC){return}bC=bF._Deferred();if(au.readyState==="complete"){return setTimeout(bF.ready,1)}if(au.addEventListener){au.addEventListener("DOMContentLoaded",e,false);bc.addEventListener("load",bF.ready,false)}else{if(au.attachEvent){au.attachEvent("onreadystatechange",e);bc.attachEvent("onload",bF.ready);var b0=false;try{b0=bc.frameElement==null}catch(b1){}if(au.documentElement.doScroll&&b0){bw()}}}},isFunction:function(b0){return bF.type(b0)==="function"},isArray:Array.isArray||function(b0){return bF.type(b0)==="array"},isWindow:function(b0){return b0&&typeof b0==="object"&&"setInterval" in b0},isNaN:function(b0){return b0==null||!bI.test(b0)||isNaN(b0)},type:function(b0){return b0==null?String(b0):bx[bM.call(b0)]||"object"},isPlainObject:function(b1){if(!b1||bF.type(b1)!=="object"||b1.nodeType||bF.isWindow(b1)){return false}if(b1.constructor&&!bG.call(b1,"constructor")&&!bG.call(b1.constructor.prototype,"isPrototypeOf")){return false}var b0;for(b0 in b1){}return b0===N||bG.call(b1,b0)},isEmptyObject:function(b1){for(var b0 in b1){return false}return true},error:function(b0){throw b0},parseJSON:function(b0){if(typeof b0!=="string"||!b0){return null}b0=bF.trim(b0);if(bc.JSON&&bc.JSON.parse){return bc.JSON.parse(b0)}if(bO.test(b0.replace(bX,"@").replace(bQ,"]").replace(bK,""))){return(new Function("return "+b0))()}bF.error("Invalid JSON: "+b0)},parseXML:function(b2,b0,b1){if(bc.DOMParser){b1=new DOMParser();b0=b1.parseFromString(b2,"text/xml")}else{b0=new ActiveXObject("Microsoft.XMLDOM");b0.async="false";b0.loadXML(b2)}b1=b0.documentElement;if(!b1||!b1.nodeName||b1.nodeName==="parsererror"){bF.error("Invalid XML: "+b2)}return b0},noop:function(){},globalEval:function(b0){if(b0&&bN.test(b0)){(bc.execScript||function(b1){bc["eval"].call(bc,b1)})(b0)}},camelCase:function(b0){return b0.replace(bB,bU)},nodeName:function(b1,b0){return b1.nodeName&&b1.nodeName.toUpperCase()===b0.toUpperCase()},each:function(b3,b6,b2){var b1,b4=0,b5=b3.length,b0=b5===N||bF.isFunction(b3);if(b2){if(b0){for(b1 in b3){if(b6.apply(b3[b1],b2)===false){break}}}else{for(;b4<b5;){if(b6.apply(b3[b4++],b2)===false){break}}}}else{if(b0){for(b1 in b3){if(b6.call(b3[b1],b1,b3[b1])===false){break}}}else{for(;b4<b5;){if(b6.call(b3[b4],b4,b3[b4++])===false){break}}}}return b3},trim:bP?function(b0){return b0==null?"":bP.call(b0)}:function(b0){return b0==null?"":b0.toString().replace(bJ,"").replace(bE,"")},makeArray:function(b3,b1){var b0=b1||[];if(b3!=null){var b2=bF.type(b3);if(b3.length==null||b2==="string"||b2==="function"||b2==="regexp"||bF.isWindow(b3)){bz.call(b0,b3)}else{bF.merge(b0,b3)}}return b0},inArray:function(b2,b3){if(bv){return bv.call(b3,b2)}for(var b0=0,b1=b3.length;b0<b1;b0++){if(b3[b0]===b2){return b0}}return -1},merge:function(b4,b2){var b3=b4.length,b1=0;if(typeof b2.length==="number"){for(var b0=b2.length;b1<b0;b1++){b4[b3++]=b2[b1]}}else{while(b2[b1]!==N){b4[b3++]=b2[b1++]}}b4.length=b3;return b4},grep:function(b1,b6,b0){var b2=[],b5;b0=!!b0;for(var b3=0,b4=b1.length;b3<b4;b3++){b5=!!b6(b1[b3],b3);if(b0!==b5){b2.push(b1[b3])}}return b2},map:function(b0,b7,b8){var b5,b6,b4=[],b2=0,b1=b0.length,b3=b0 instanceof bF||b1!==N&&typeof b1==="number"&&((b1>0&&b0[0]&&b0[b1-1])||b1===0||bF.isArray(b0));if(b3){for(;b2<b1;b2++){b5=b7(b0[b2],b2,b8);if(b5!=null){b4[b4.length]=b5}}}else{for(b6 in b0){b5=b7(b0[b6],b6,b8);if(b5!=null){b4[b4.length]=b5}}}return b4.concat.apply([],b4)},guid:1,proxy:function(b4,b3){if(typeof b3==="string"){var b2=b4[b3];b3=b4;b4=b2}if(!bF.isFunction(b4)){return N}var b0=bL.call(arguments,2),b1=function(){return b4.apply(b3,b0.concat(bL.call(arguments)))};b1.guid=b4.guid=b4.guid||b1.guid||bF.guid++;return b1},access:function(b0,b8,b6,b2,b5,b7){var b1=b0.length;if(typeof b8==="object"){for(var b3 in b8){bF.access(b0,b3,b8[b3],b2,b5,b6)}return b0}if(b6!==N){b2=!b7&&b2&&bF.isFunction(b6);for(var b4=0;b4<b1;b4++){b5(b0[b4],b8,b2?b6.call(b0[b4],b4,b5(b0[b4],b8)):b6,b7)}return b0}return b1?b5(b0[0],b8):N},now:function(){return(new Date()).getTime()},uaMatch:function(b1){b1=b1.toLowerCase();var b0=by.exec(b1)||bS.exec(b1)||bR.exec(b1)||b1.indexOf("compatible")<0&&bT.exec(b1)||[];return{browser:b0[1]||"",version:b0[2]||"0"}},sub:function(){function b0(b3,b4){return new b0.fn.init(b3,b4)}bF.extend(true,b0,this);b0.superclass=this;b0.fn=b0.prototype=this();b0.fn.constructor=b0;b0.sub=this.sub;b0.fn.init=function b2(b3,b4){if(b4&&b4 instanceof bF&&!(b4 instanceof b0)){b4=b0(b4)}return bF.fn.init.call(this,b3,b4,b1)};b0.fn.init.prototype=b0.fn;var b1=b0(au);return b0},browser:{}});bF.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b1,b0){bx["[object "+b0+"]"]=b0.toLowerCase()});bW=bF.uaMatch(bY);if(bW.browser){bF.browser[bW.browser]=true;bF.browser.version=bW.version}if(bF.browser.webkit){bF.browser.safari=true}if(bN.test("\xA0")){bJ=/^[\s\xA0]+/;bE=/[\s\xA0]+$/}bD=bF(au);if(au.addEventListener){e=function(){au.removeEventListener("DOMContentLoaded",e,false);bF.ready()}}else{if(au.attachEvent){e=function(){if(au.readyState==="complete"){au.detachEvent("onreadystatechange",e);bF.ready()}}}}function bw(){if(bF.isReady){return}try{au.documentElement.doScroll("left")}catch(b0){setTimeout(bw,1);return}bF.ready()}return bF})();var a="done fail isResolved isRejected promise then always pipe".split(" "),aI=[].slice;b.extend({_Deferred:function(){var bx=[],by,bv,bw,e={done:function(){if(!bw){var bA=arguments,bB,bE,bD,bC,bz;if(by){bz=by;by=0}for(bB=0,bE=bA.length;bB<bE;bB++){bD=bA[bB];bC=b.type(bD);if(bC==="array"){e.done.apply(e,bD)}else{if(bC==="function"){bx.push(bD)}}}if(bz){e.resolveWith(bz[0],bz[1])}}return this},resolveWith:function(bA,bz){if(!bw&&!by&&!bv){bz=bz||[];bv=1;try{while(bx[0]){bx.shift().apply(bA,bz)}}finally{by=[bA,bz];bv=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return !!(bv||by)},cancel:function(){bw=1;bx=[];return this}};return e},Deferred:function(bv){var e=b._Deferred(),bx=b._Deferred(),bw;b.extend(e,{then:function(bz,by){e.done(bz).fail(by);return this},always:function(){return e.done.apply(e,arguments).fail.apply(this,arguments)},fail:bx.done,rejectWith:bx.resolveWith,reject:bx.resolve,isRejected:bx.isResolved,pipe:function(bz,by){return b.Deferred(function(bA){b.each({done:[bz,"resolve"],fail:[by,"reject"]},function(bC,bF){var bB=bF[0],bE=bF[1],bD;if(b.isFunction(bB)){e[bC](function(){bD=bB.apply(this,arguments);if(bD&&b.isFunction(bD.promise)){bD.promise().then(bA.resolve,bA.reject)}else{bA[bE](bD)}})}else{e[bC](bA[bE])}})}).promise()},promise:function(bz){if(bz==null){if(bw){return bw}bw=bz={}}var by=a.length;while(by--){bz[a[by]]=e[a[by]]}return bz}});e.done(bx.cancel).fail(e.cancel);delete e.cancel;if(bv){bv.call(e,e)}return e},when:function(bA){var bv=arguments,bw=0,bz=bv.length,by=bz,e=bz<=1&&bA&&b.isFunction(bA.promise)?bA:b.Deferred();function bx(bB){return function(bC){bv[bB]=arguments.length>1?aI.call(arguments,0):bC;if(!(--by)){e.resolveWith(e,aI.call(bv,0))}}}if(bz>1){for(;bw<bz;bw++){if(bv[bw]&&b.isFunction(bv[bw].promise)){bv[bw].promise().then(bx(bw),e.reject)}else{--by}}if(!by){e.resolveWith(e,bv)}}else{if(e!==bA){e.resolveWith(e,bz?[bA]:[])}}return e.promise()}});b.support=(function(){var bF=au.createElement("div"),bM=au.documentElement,by,bN,bG,bw,bE,bz,bC,bv,bD,bH,bB,bL,bJ,bx,bA,bI,bO;bF.setAttribute("className","t");bF.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";by=bF.getElementsByTagName("*");bN=bF.getElementsByTagName("a")[0];if(!by||!by.length||!bN){return{}}bG=au.createElement("select");bw=bG.appendChild(au.createElement("option"));bE=bF.getElementsByTagName("input")[0];bC={leadingWhitespace:(bF.firstChild.nodeType===3),tbody:!bF.getElementsByTagName("tbody").length,htmlSerialize:!!bF.getElementsByTagName("link").length,style:/top/.test(bN.getAttribute("style")),hrefNormalized:(bN.getAttribute("href")==="/a"),opacity:/^0.55$/.test(bN.style.opacity),cssFloat:!!bN.style.cssFloat,checkOn:(bE.value==="on"),optSelected:bw.selected,getSetAttribute:bF.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bE.checked=true;bC.noCloneChecked=bE.cloneNode(true).checked;bG.disabled=true;bC.optDisabled=!bw.disabled;try{delete bF.test}catch(bK){bC.deleteExpando=false}if(!bF.addEventListener&&bF.attachEvent&&bF.fireEvent){bF.attachEvent("onclick",function(){bC.noCloneEvent=false});bF.cloneNode(true).fireEvent("onclick")}bE=au.createElement("input");bE.value="t";bE.setAttribute("type","radio");bC.radioValue=bE.value==="t";bE.setAttribute("checked","checked");bF.appendChild(bE);bv=au.createDocumentFragment();bv.appendChild(bF.firstChild);bC.checkClone=bv.cloneNode(true).cloneNode(true).lastChild.checked;bF.innerHTML="";bF.style.width=bF.style.paddingLeft="1px";bD=au.getElementsByTagName("body")[0];bB=au.createElement(bD?"div":"body");bL={visibility:"hidden",width:0,height:0,border:0,margin:0};if(bD){b.extend(bL,{position:"absolute",left:-1000,top:-1000})}for(bI in bL){bB.style[bI]=bL[bI]}bB.appendChild(bF);bH=bD||bM;bH.insertBefore(bB,bH.firstChild);bC.appendChecked=bE.checked;bC.boxModel=bF.offsetWidth===2;if("zoom" in bF.style){bF.style.display="inline";bF.style.zoom=1;bC.inlineBlockNeedsLayout=(bF.offsetWidth===2);bF.style.display="";bF.innerHTML="<div style='width:4px;'></div>";bC.shrinkWrapBlocks=(bF.offsetWidth!==2)}bF.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bJ=bF.getElementsByTagName("td");bO=(bJ[0].offsetHeight===0);bJ[0].style.display="";bJ[1].style.display="none";bC.reliableHiddenOffsets=bO&&(bJ[0].offsetHeight===0);bF.innerHTML="";if(au.defaultView&&au.defaultView.getComputedStyle){bz=au.createElement("div");bz.style.width="0";bz.style.marginRight="0";bF.appendChild(bz);bC.reliableMarginRight=(parseInt((au.defaultView.getComputedStyle(bz,null)||{marginRight:0}).marginRight,10)||0)===0}bB.innerHTML="";bH.removeChild(bB);if(bF.attachEvent){for(bI in {submit:1,change:1,focusin:1}){bA="on"+bI;bO=(bA in bF);if(!bO){bF.setAttribute(bA,"return;");bO=(typeof bF[bA]==="function")}bC[bI+"Bubbles"]=bO}}bB=bv=bG=bw=bD=bz=bF=bE=null;return bC})();b.boxModel=b.support.boxModel;var aP=/^(?:\{.*\}|\[.*\])$/,az=/([a-z])([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!W(e)},data:function(bx,bv,bz,by){if(!b.acceptData(bx)){return}var bC=b.expando,bB=typeof bv==="string",bA,bD=bx.nodeType,e=bD?b.cache:bx,bw=bD?bx[b.expando]:bx[b.expando]&&b.expando;if((!bw||(by&&bw&&!e[bw][bC]))&&bB&&bz===N){return}if(!bw){if(bD){bx[b.expando]=bw=++b.uuid}else{bw=b.expando}}if(!e[bw]){e[bw]={};if(!bD){e[bw].toJSON=b.noop}}if(typeof bv==="object"||typeof bv==="function"){if(by){e[bw][bC]=b.extend(e[bw][bC],bv)}else{e[bw]=b.extend(e[bw],bv)}}bA=e[bw];if(by){if(!bA[bC]){bA[bC]={}}bA=bA[bC]}if(bz!==N){bA[b.camelCase(bv)]=bz}if(bv==="events"&&!bA[bv]){return bA[bC]&&bA[bC].events}return bB?bA[b.camelCase(bv)]||bA[bv]:bA},removeData:function(by,bw,bz){if(!b.acceptData(by)){return}var bB=b.expando,bC=by.nodeType,bv=bC?b.cache:by,bx=bC?by[b.expando]:b.expando;if(!bv[bx]){return}if(bw){var bA=bz?bv[bx][bB]:bv[bx];if(bA){delete bA[bw];if(!W(bA)){return}}}if(bz){delete bv[bx][bB];if(!W(bv[bx])){return}}var e=bv[bx][bB];if(b.support.deleteExpando||bv!=bc){delete bv[bx]}else{bv[bx]=null}if(e){bv[bx]={};if(!bC){bv[bx].toJSON=b.noop}bv[bx][bB]=e}else{if(bC){if(b.support.deleteExpando){delete by[b.expando]}else{if(by.removeAttribute){by.removeAttribute(b.expando)}else{by[b.expando]=null}}}}},_data:function(bv,e,bw){return b.data(bv,e,bw,true)},acceptData:function(bv){if(bv.nodeName){var e=b.noData[bv.nodeName.toLowerCase()];if(e){return !(e===true||bv.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(by,bA){var bz=null;if(typeof by==="undefined"){if(this.length){bz=b.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,bw;for(var bx=0,bv=e.length;bx<bv;bx++){bw=e[bx].name;if(bw.indexOf("data-")===0){bw=b.camelCase(bw.substring(5));a5(this[0],bw,bz[bw])}}}}return bz}else{if(typeof by==="object"){return this.each(function(){b.data(this,by)})}}var bB=by.split(".");bB[1]=bB[1]?"."+bB[1]:"";if(bA===N){bz=this.triggerHandler("getData"+bB[1]+"!",[bB[0]]);if(bz===N&&this.length){bz=b.data(this[0],by);bz=a5(this[0],by,bz)}return bz===N&&bB[1]?this.data(bB[0]):bz}else{return this.each(function(){var bD=b(this),bC=[bB[0],bA];bD.triggerHandler("setData"+bB[1]+"!",bC);b.data(this,by,bA);bD.triggerHandler("changeData"+bB[1]+"!",bC)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a5(bx,bw,by){if(by===N&&bx.nodeType===1){var bv="data-"+bw.replace(az,"$1-$2").toLowerCase();by=bx.getAttribute(bv);if(typeof by==="string"){try{by=by==="true"?true:by==="false"?false:by==="null"?null:!b.isNaN(by)?parseFloat(by):aP.test(by)?b.parseJSON(by):by}catch(bz){}b.data(bx,bw,by)}else{by=N}}return by}function W(bv){for(var e in bv){if(e!=="toJSON"){return false}}return true}function bh(by,bx,bA){var bw=bx+"defer",bv=bx+"queue",e=bx+"mark",bz=b.data(by,bw,N,true);if(bz&&(bA==="queue"||!b.data(by,bv,N,true))&&(bA==="mark"||!b.data(by,e,N,true))){setTimeout(function(){if(!b.data(by,bv,N,true)&&!b.data(by,e,N,true)){b.removeData(by,bw,true);bz.resolve()}},0)}}b.extend({_mark:function(bv,e){if(bv){e=(e||"fx")+"mark";b.data(bv,e,(b.data(bv,e,N,true)||0)+1,true)}},_unmark:function(by,bx,bv){if(by!==true){bv=bx;bx=by;by=false}if(bx){bv=bv||"fx";var e=bv+"mark",bw=by?0:((b.data(bx,e,N,true)||1)-1);if(bw){b.data(bx,e,bw,true)}else{b.removeData(bx,e,true);bh(bx,bv,"mark")}}},queue:function(bv,e,bx){if(bv){e=(e||"fx")+"queue";var bw=b.data(bv,e,N,true);if(bx){if(!bw||b.isArray(bx)){bw=b.data(bv,e,b.makeArray(bx),true)}else{bw.push(bx)}}return bw||[]}},dequeue:function(bx,bw){bw=bw||"fx";var e=b.queue(bx,bw),bv=e.shift(),by;if(bv==="inprogress"){bv=e.shift()}if(bv){if(bw==="fx"){e.unshift("inprogress")}bv.call(bx,function(){b.dequeue(bx,bw)})}if(!e.length){b.removeData(bx,bw+"queue",true);bh(bx,bw,"queue")}}});b.fn.extend({queue:function(e,bv){if(typeof e!=="string"){bv=e;e="fx"}if(bv===N){return b.queue(this[0],e)}return this.each(function(){var bw=b.queue(this,e,bv);if(e==="fx"&&bw[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(bv,e){bv=b.fx?b.fx.speeds[bv]||bv:bv;e=e||"fx";return this.queue(e,function(){var bw=this;setTimeout(function(){b.dequeue(bw,e)},bv)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bD,bw){if(typeof bD!=="string"){bw=bD;bD=N}bD=bD||"fx";var e=b.Deferred(),bv=this,by=bv.length,bB=1,bz=bD+"defer",bA=bD+"queue",bC=bD+"mark",bx;function bE(){if(!(--bB)){e.resolveWith(bv,[bv])}}while(by--){if((bx=b.data(bv[by],bz,N,true)||(b.data(bv[by],bA,N,true)||b.data(bv[by],bC,N,true))&&b.data(bv[by],bz,b._Deferred(),true))){bB++;bx.done(bE)}}bE();return e.promise()}});var aN=/[\n\t\r]/g,af=/\s+/,aR=/\r/g,h=/^(?:button|input)$/i,G=/^(?:button|input|object|select|textarea)$/i,n=/^a(?:rea)?$/i,an=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,a8=/\:|^on/,a3,aX;b.fn.extend({attr:function(e,bv){return b.access(this,e,bv,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,bv){return b.access(this,e,bv,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=N;delete this[e]}catch(bv){}})},addClass:function(by){var bA,bw,bv,bx,bz,bB,e;if(b.isFunction(by)){return this.each(function(bC){b(this).addClass(by.call(this,bC,this.className))})}if(by&&typeof by==="string"){bA=by.split(af);for(bw=0,bv=this.length;bw<bv;bw++){bx=this[bw];if(bx.nodeType===1){if(!bx.className&&bA.length===1){bx.className=by}else{bz=" "+bx.className+" ";for(bB=0,e=bA.length;bB<e;bB++){if(!~bz.indexOf(" "+bA[bB]+" ")){bz+=bA[bB]+" "}}bx.className=b.trim(bz)}}}}return this},removeClass:function(bz){var bA,bw,bv,by,bx,bB,e;if(b.isFunction(bz)){return this.each(function(bC){b(this).removeClass(bz.call(this,bC,this.className))})}if((bz&&typeof bz==="string")||bz===N){bA=(bz||"").split(af);for(bw=0,bv=this.length;bw<bv;bw++){by=this[bw];if(by.nodeType===1&&by.className){if(bz){bx=(" "+by.className+" ").replace(aN," ");for(bB=0,e=bA.length;bB<e;bB++){bx=bx.replace(" "+bA[bB]+" "," ")}by.className=b.trim(bx)}else{by.className=""}}}}return this},toggleClass:function(bx,bv){var bw=typeof bx,e=typeof bv==="boolean";if(b.isFunction(bx)){return this.each(function(by){b(this).toggleClass(bx.call(this,by,this.className,bv),bv)})}return this.each(function(){if(bw==="string"){var bA,bz=0,by=b(this),bB=bv,bC=bx.split(af);while((bA=bC[bz++])){bB=e?bB:!by.hasClass(bA);by[bB?"addClass":"removeClass"](bA)}}else{if(bw==="undefined"||bw==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bx===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bx=" "+e+" ";for(var bw=0,bv=this.length;bw<bv;bw++){if((" "+this[bw].className+" ").replace(aN," ").indexOf(bx)>-1){return true}}return false},val:function(bx){var e,bv,bw=this[0];if(!arguments.length){if(bw){e=b.valHooks[bw.nodeName.toLowerCase()]||b.valHooks[bw.type];if(e&&"get" in e&&(bv=e.get(bw,"value"))!==N){return bv}bv=bw.value;return typeof bv==="string"?bv.replace(aR,""):bv==null?"":bv}return N}var by=b.isFunction(bx);return this.each(function(bA){var bz=b(this),bB;if(this.nodeType!==1){return}if(by){bB=bx.call(this,bA,bz.val())}else{bB=bx}if(bB==null){bB=""}else{if(typeof bB==="number"){bB+=""}else{if(b.isArray(bB)){bB=b.map(bB,function(bC){return bC==null?"":bC+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set" in e)||e.set(this,bB,"value")===N){this.value=bB}})}});b.extend({valHooks:{option:{get:function(e){var bv=e.attributes.value;return !bv||bv.specified?e.value:e.text}},select:{get:function(e){var bA,by=e.selectedIndex,bB=[],bC=e.options,bx=e.type==="select-one";if(by<0){return null}for(var bv=bx?by:0,bz=bx?by+1:bC.length;bv<bz;bv++){var bw=bC[bv];if(bw.selected&&(b.support.optDisabled?!bw.disabled:bw.getAttribute("disabled")===null)&&(!bw.parentNode.disabled||!b.nodeName(bw.parentNode,"optgroup"))){bA=b(bw).val();if(bx){return bA}bB.push(bA)}}if(bx&&!bB.length&&bC.length){return b(bC[by]).val()}return bB},set:function(bv,bw){var e=b.makeArray(bw);b(bv).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){bv.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(bA,bx,bB,bz){var bv=bA.nodeType;if(!bA||bv===3||bv===8||bv===2){return N}if(bz&&bx in b.attrFn){return b(bA)[bx](bB)}if(!("getAttribute" in bA)){return b.prop(bA,bx,bB)}var bw,e,by=bv!==1||!b.isXMLDoc(bA);if(by){bx=b.attrFix[bx]||bx;e=b.attrHooks[bx];if(!e){if(an.test(bx)){e=aX}else{if(a3&&bx!=="className"&&(b.nodeName(bA,"form")||a8.test(bx))){e=a3}}}}if(bB!==N){if(bB===null){b.removeAttr(bA,bx);return N}else{if(e&&"set" in e&&by&&(bw=e.set(bA,bB,bx))!==N){return bw}else{bA.setAttribute(bx,""+bB);return bB}}}else{if(e&&"get" in e&&by&&(bw=e.get(bA,bx))!==null){return bw}else{bw=bA.getAttribute(bx);return bw===null?N:bw}}},removeAttr:function(bv,e){var bw;if(bv.nodeType===1){e=b.attrFix[e]||e;if(b.support.getSetAttribute){bv.removeAttribute(e)}else{b.attr(bv,e,"");bv.removeAttributeNode(bv.getAttributeNode(e))}if(an.test(e)&&(bw=b.propFix[e]||e) in bv){bv[bw]=false}}},attrHooks:{type:{set:function(e,bv){if(h.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&bv==="radio"&&b.nodeName(e,"input")){var bw=e.value;e.setAttribute("type",bv);if(bw){e.value=bw}return bv}}}},tabIndex:{get:function(bv){var e=bv.getAttributeNode("tabIndex");return e&&e.specified?parseInt(e.value,10):G.test(bv.nodeName)||n.test(bv.nodeName)&&bv.href?0:N}},value:{get:function(bv,e){if(a3&&b.nodeName(bv,"button")){return a3.get(bv,e)}return e in bv?bv.value:null},set:function(bv,bw,e){if(a3&&b.nodeName(bv,"button")){return a3.set(bv,bw,e)}bv.value=bw}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bz,bx,bA){var bv=bz.nodeType;if(!bz||bv===3||bv===8||bv===2){return N}var bw,e,by=bv!==1||!b.isXMLDoc(bz);if(by){bx=b.propFix[bx]||bx;e=b.propHooks[bx]}if(bA!==N){if(e&&"set" in e&&(bw=e.set(bz,bA,bx))!==N){return bw}else{return(bz[bx]=bA)}}else{if(e&&"get" in e&&(bw=e.get(bz,bx))!==N){return bw}else{return bz[bx]}}},propHooks:{}});aX={get:function(bv,e){return b.prop(bv,e)?e.toLowerCase():N},set:function(bv,bx,e){var bw;if(bx===false){b.removeAttr(bv,e)}else{bw=b.propFix[e]||e;if(bw in bv){bv[bw]=true}bv.setAttribute(e,e.toLowerCase())}return e}};if(!b.support.getSetAttribute){b.attrFix=b.propFix;a3=b.attrHooks.name=b.attrHooks.title=b.valHooks.button={get:function(bw,bv){var e;e=bw.getAttributeNode(bv);return e&&e.nodeValue!==""?e.nodeValue:N},set:function(bw,bx,bv){var e=bw.getAttributeNode(bv);if(e){e.nodeValue=bx;return bx}}};b.each(["width","height"],function(bv,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bw,bx){if(bx===""){bw.setAttribute(e,"auto");return bx}}})})}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bv,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bx){var bw=bx.getAttribute(e,2);return bw===null?N:bw}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||N},set:function(e,bv){return(e.style.cssText=""+bv)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bv){var e=bv.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}}})}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,bv){if(b.isArray(bv)){return(e.checked=b.inArray(b(e).val(),bv)>=0)}}})});var aZ=/\.(.*)$/,be=/^(?:textarea|input|select)$/i,Q=/\./g,bi=/ /g,aF=/[^\w\s.|`]/g,J=function(e){return e.replace(aF,"\\$&")};b.event={add:function(bx,bB,bG,bz){if(bx.nodeType===3||bx.nodeType===8){return}if(bG===false){bG=bk}else{if(!bG){return}}var bv,bF;if(bG.handler){bv=bG;bG=bv.handler}if(!bG.guid){bG.guid=b.guid++}var bC=b._data(bx);if(!bC){return}var bH=bC.events,bA=bC.handle;if(!bH){bC.events=bH={}}if(!bA){bC.handle=bA=function(bI){return typeof b!=="undefined"&&(!bI||b.event.triggered!==bI.type)?b.event.handle.apply(bA.elem,arguments):N}}bA.elem=bx;bB=bB.split(" ");var bE,by=0,e;while((bE=bB[by++])){bF=bv?b.extend({},bv):{handler:bG,data:bz};if(bE.indexOf(".")>-1){e=bE.split(".");bE=e.shift();bF.namespace=e.slice(0).sort().join(".")}else{e=[];bF.namespace=""}bF.type=bE;if(!bF.guid){bF.guid=bG.guid}var bw=bH[bE],bD=b.event.special[bE]||{};if(!bw){bw=bH[bE]=[];if(!bD.setup||bD.setup.call(bx,bz,e,bA)===false){if(bx.addEventListener){bx.addEventListener(bE,bA,false)}else{if(bx.attachEvent){bx.attachEvent("on"+bE,bA)}}}}if(bD.add){bD.add.call(bx,bF);if(!bF.handler.guid){bF.handler.guid=bG.guid}}bw.push(bF);b.event.global[bE]=true}bx=null},global:{},remove:function(bJ,bE,bw,bA){if(bJ.nodeType===3||bJ.nodeType===8){return}if(bw===false){bw=bk}var bM,bz,bB,bG,bH=0,bx,bC,bF,by,bD,e,bL,bI=b.hasData(bJ)&&b._data(bJ),bv=bI&&bI.events;if(!bI||!bv){return}if(bE&&bE.type){bw=bE.handler;bE=bE.type}if(!bE||typeof bE==="string"&&bE.charAt(0)==="."){bE=bE||"";for(bz in bv){b.event.remove(bJ,bz+bE)}return}bE=bE.split(" ");while((bz=bE[bH++])){bL=bz;e=null;bx=bz.indexOf(".")<0;bC=[];if(!bx){bC=bz.split(".");bz=bC.shift();bF=new RegExp("(^|\\.)"+b.map(bC.slice(0).sort(),J).join("\\.(?:.*\\.)?")+"(\\.|$)")}bD=bv[bz];if(!bD){continue}if(!bw){for(bG=0;bG<bD.length;bG++){e=bD[bG];if(bx||bF.test(e.namespace)){b.event.remove(bJ,bL,e.handler,bG);bD.splice(bG--,1)}}continue}by=b.event.special[bz]||{};for(bG=bA||0;bG<bD.length;bG++){e=bD[bG];if(bw.guid===e.guid){if(bx||bF.test(e.namespace)){if(bA==null){bD.splice(bG--,1)}if(by.remove){by.remove.call(bJ,e)}}if(bA!=null){break}}}if(bD.length===0||bA!=null&&bD.length===1){if(!by.teardown||by.teardown.call(bJ,bC)===false){b.removeEvent(bJ,bz,bI.handle)}bM=null;delete bv[bz]}}if(b.isEmptyObject(bv)){var bK=bI.handle;if(bK){bK.elem=null}delete bI.events;delete bI.handle;if(b.isEmptyObject(bI)){b.removeData(bJ,N,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(e,bB,bz,bG){var bE=e.type||e,bw=[],bv;if(bE.indexOf("!")>=0){bE=bE.slice(0,-1);bv=true}if(bE.indexOf(".")>=0){bw=bE.split(".");bE=bw.shift();bw.sort()}if((!bz||b.event.customEvent[bE])&&!b.event.global[bE]){return}e=typeof e==="object"?e[b.expando]?e:new b.Event(bE,e):new b.Event(bE);e.type=bE;e.exclusive=bv;e.namespace=bw.join(".");e.namespace_re=new RegExp("(^|\\.)"+bw.join("\\.(?:.*\\.)?")+"(\\.|$)");if(bG||!bz){e.preventDefault();e.stopPropagation()}if(!bz){b.each(b.cache,function(){var bI=b.expando,bH=this[bI];if(bH&&bH.events&&bH.events[bE]){b.event.trigger(e,bB,bH.handle.elem)}});return}if(bz.nodeType===3||bz.nodeType===8){return}e.result=N;e.target=bz;bB=bB!=null?b.makeArray(bB):[];bB.unshift(e);var bF=bz,bx=bE.indexOf(":")<0?"on"+bE:"";do{var bC=b._data(bF,"handle");e.currentTarget=bF;if(bC){bC.apply(bF,bB)}if(bx&&b.acceptData(bF)&&bF[bx]&&bF[bx].apply(bF,bB)===false){e.result=false;e.preventDefault()}bF=bF.parentNode||bF.ownerDocument||bF===e.target.ownerDocument&&bc}while(bF&&!e.isPropagationStopped());if(!e.isDefaultPrevented()){var by,bD=b.event.special[bE]||{};if((!bD._default||bD._default.call(bz.ownerDocument,e)===false)&&!(bE==="click"&&b.nodeName(bz,"a"))&&b.acceptData(bz)){try{if(bx&&bz[bE]){by=bz[bx];if(by){bz[bx]=null}b.event.triggered=bE;bz[bE]()}}catch(bA){}if(by){bz[bx]=by}b.event.triggered=N}}return e.result},handle:function(bB){bB=b.event.fix(bB||bc.event);var bv=((b._data(this,"events")||{})[bB.type]||[]).slice(0),bA=!bB.exclusive&&!bB.namespace,by=Array.prototype.slice.call(arguments,0);by[0]=bB;bB.currentTarget=this;for(var bx=0,e=bv.length;bx<e;bx++){var bz=bv[bx];if(bA||bB.namespace_re.test(bz.namespace)){bB.handler=bz.handler;bB.data=bz.data;bB.handleObj=bz;var bw=bz.handler.apply(this,by);if(bw!==N){bB.result=bw;if(bw===false){bB.preventDefault();bB.stopPropagation()}}if(bB.isImmediatePropagationStopped()){break}}}return bB.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(by){if(by[b.expando]){return by}var bv=by;by=b.Event(bv);for(var bw=this.props.length,bA;bw;){bA=this.props[--bw];by[bA]=bv[bA]}if(!by.target){by.target=by.srcElement||au}if(by.target.nodeType===3){by.target=by.target.parentNode}if(!by.relatedTarget&&by.fromElement){by.relatedTarget=by.fromElement===by.target?by.toElement:by.fromElement}if(by.pageX==null&&by.clientX!=null){var bx=by.target.ownerDocument||au,bz=bx.documentElement,e=bx.body;by.pageX=by.clientX+(bz&&bz.scrollLeft||e&&e.scrollLeft||0)-(bz&&bz.clientLeft||e&&e.clientLeft||0);by.pageY=by.clientY+(bz&&bz.scrollTop||e&&e.scrollTop||0)-(bz&&bz.clientTop||e&&e.clientTop||0)}if(by.which==null&&(by.charCode!=null||by.keyCode!=null)){by.which=by.charCode!=null?by.charCode:by.keyCode}if(!by.metaKey&&by.ctrlKey){by.metaKey=by.ctrlKey}if(!by.which&&by.button!==N){by.which=(by.button&1?1:(by.button&2?3:(by.button&4?2:0)))}return by},guid:100000000,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(e){b.event.add(this,s(e.origType,e.selector),b.extend({},e,{handler:al,guid:e.handler.guid}))},remove:function(e){b.event.remove(this,s(e.origType,e.selector),e)}},beforeunload:{setup:function(bw,bv,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(bv,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}}};b.removeEvent=au.removeEventListener?function(bv,e,bw){if(bv.removeEventListener){bv.removeEventListener(e,bw,false)}}:function(bv,e,bw){if(bv.detachEvent){bv.detachEvent("on"+e,bw)}};b.Event=function(bv,e){if(!this.preventDefault){return new b.Event(bv,e)}if(bv&&bv.type){this.originalEvent=bv;this.type=bv.type;this.isDefaultPrevented=(bv.defaultPrevented||bv.returnValue===false||bv.getPreventDefault&&bv.getPreventDefault())?k:bk}else{this.type=bv}if(e){b.extend(this,e)}this.timeStamp=b.now();this[b.expando]=true};function bk(){return false}function k(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=k;var bv=this.originalEvent;if(!bv){return}if(bv.preventDefault){bv.preventDefault()}else{bv.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=k;var bv=this.originalEvent;if(!bv){return}if(bv.stopPropagation){bv.stopPropagation()}bv.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k;this.stopPropagation()},isDefaultPrevented:bk,isPropagationStopped:bk,isImmediatePropagationStopped:bk};var ae=function(bw){var bx=bw.relatedTarget,e=false,bv=bw.type;bw.type=bw.data;if(bx!==this){if(bx){e=b.contains(this,bx)}if(!e){b.event.handle.apply(this,arguments);bw.type=bv}}},aU=function(e){e.type=e.data;b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bv,e){b.event.special[bv]={setup:function(bw){b.event.add(this,e,bw&&bw.selector?aU:ae,bv)},teardown:function(bw){b.event.remove(this,e,bw&&bw.selector?aU:ae)}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(bv,e){if(!b.nodeName(this,"form")){b.event.add(this,"click.specialSubmit",function(by){var bx=by.target,bw=bx.type;if((bw==="submit"||bw==="image")&&b(bx).closest("form").length){aW("submit",this,arguments)}});b.event.add(this,"keypress.specialSubmit",function(by){var bx=by.target,bw=bx.type;if((bw==="text"||bw==="password")&&b(bx).closest("form").length&&by.keyCode===13){aW("submit",this,arguments)}})}else{return false}},teardown:function(e){b.event.remove(this,".specialSubmit")}}}if(!b.support.changeBubbles){var bn,m=function(bv){var e=bv.type,bw=bv.value;if(e==="radio"||e==="checkbox"){bw=bv.checked}else{if(e==="select-multiple"){bw=bv.selectedIndex>-1?b.map(bv.options,function(bx){return bx.selected}).join("-"):""}else{if(b.nodeName(bv,"select")){bw=bv.selectedIndex}}}return bw},ac=function ac(bx){var bv=bx.target,bw,by;if(!be.test(bv.nodeName)||bv.readOnly){return}bw=b._data(bv,"_change_data");by=m(bv);if(bx.type!=="focusout"||bv.type!=="radio"){b._data(bv,"_change_data",by)}if(bw===N||by===bw){return}if(bw!=null||by){bx.type="change";bx.liveFired=N;b.event.trigger(bx,arguments[1],bv)}};b.event.special.change={filters:{focusout:ac,beforedeactivate:ac,click:function(bx){var bw=bx.target,bv=b.nodeName(bw,"input")?bw.type:"";if(bv==="radio"||bv==="checkbox"||b.nodeName(bw,"select")){ac.call(this,bx)}},keydown:function(bx){var bw=bx.target,bv=b.nodeName(bw,"input")?bw.type:"";if((bx.keyCode===13&&!b.nodeName(bw,"textarea"))||(bx.keyCode===32&&(bv==="checkbox"||bv==="radio"))||bv==="select-multiple"){ac.call(this,bx)}},beforeactivate:function(bw){var bv=bw.target;b._data(bv,"_change_data",m(bv))}},setup:function(bw,bv){if(this.type==="file"){return false}for(var e in bn){b.event.add(this,e+".specialChange",bn[e])}return be.test(this.nodeName)},teardown:function(e){b.event.remove(this,".specialChange");return be.test(this.nodeName)}};bn=b.event.special.change.filters;bn.focus=bn.beforeactivate}function aW(bv,bx,e){var bw=b.extend({},e[0]);bw.type=bv;bw.originalEvent={};bw.liveFired=N;b.event.handle.call(bx,bw);if(bw.isDefaultPrevented()){e[0].preventDefault()}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bx,e){var bv=0;b.event.special[e]={setup:function(){if(bv++===0){au.addEventListener(bx,bw,true)}},teardown:function(){if(--bv===0){au.removeEventListener(bx,bw,true)}}};function bw(by){var bz=b.event.fix(by);bz.type=e;bz.originalEvent={};b.event.trigger(bz,null,bz.target);if(bz.isDefaultPrevented()){by.preventDefault()}}})}b.each(["bind","one"],function(bv,e){b.fn[e]=function(bB,bC,bA){var bz;if(typeof bB==="object"){for(var by in bB){this[e](by,bC,bB[by],bA)}return this}if(arguments.length===2||bC===false){bA=bC;bC=N}if(e==="one"){bz=function(bD){b(this).unbind(bD,bz);return bA.apply(this,arguments)};bz.guid=bA.guid||b.guid++}else{bz=bA}if(bB==="unload"&&e!=="one"){this.one(bB,bC,bA)}else{for(var bx=0,bw=this.length;bx<bw;bx++){b.event.add(this[bx],bB,bz,bC)}}return this}});b.fn.extend({unbind:function(by,bx){if(typeof by==="object"&&!by.preventDefault){for(var bw in by){this.unbind(bw,by[bw])}}else{for(var bv=0,e=this.length;bv<e;bv++){b.event.remove(this[bv],by,bx)}}return this},delegate:function(e,bv,bx,bw){return this.live(bv,bx,bw,e)},undelegate:function(e,bv,bw){if(arguments.length===0){return this.unbind("live")}else{return this.die(bv,null,bw,e)}},trigger:function(e,bv){return this.each(function(){b.event.trigger(e,bv,this)})},triggerHandler:function(e,bv){if(this[0]){return b.event.trigger(e,bv,this[0],true)}},toggle:function(bx){var bv=arguments,e=bx.guid||b.guid++,bw=0,by=function(bz){var bA=(b.data(this,"lastToggle"+bx.guid)||0)%bw;b.data(this,"lastToggle"+bx.guid,bA+1);bz.preventDefault();return bv[bA].apply(this,arguments)||false};by.guid=e;while(bw<bv.length){bv[bw++].guid=e}return this.click(by)},hover:function(e,bv){return this.mouseenter(e).mouseleave(bv||e)}});var aS={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(bv,e){b.fn[e]=function(bF,bC,bH,by){var bG,bD=0,bE,bx,bJ,bA=by||this.selector,bw=by?this:b(this.context);if(typeof bF==="object"&&!bF.preventDefault){for(var bI in bF){bw[e](bI,bC,bF[bI],bA)}return this}if(e==="die"&&!bF&&by&&by.charAt(0)==="."){bw.unbind(by);return this}if(bC===false||b.isFunction(bC)){bH=bC||bk;bC=N}bF=(bF||"").split(" ");while((bG=bF[bD++])!=null){bE=aZ.exec(bG);bx="";if(bE){bx=bE[0];bG=bG.replace(aZ,"")}if(bG==="hover"){bF.push("mouseenter"+bx,"mouseleave"+bx);continue}bJ=bG;if(aS[bG]){bF.push(aS[bG]+bx);bG=bG+bx}else{bG=(aS[bG]||bG)+bx}if(e==="live"){for(var bB=0,bz=bw.length;bB<bz;bB++){b.event.add(bw[bB],"live."+s(bG,bA),{data:bC,selector:bA,handler:bH,origType:bG,origHandler:bH,preType:bJ})}}else{bw.unbind("live."+s(bG,bA),bH)}}return this}});function al(bF){var bC,bx,bL,bz,e,bH,bE,bG,bD,bK,bB,bA,bJ,bI=[],by=[],bv=b._data(this,"events");if(bF.liveFired===this||!bv||!bv.live||bF.target.disabled||bF.button&&bF.type==="click"){return}if(bF.namespace){bA=new RegExp("(^|\\.)"+bF.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}bF.liveFired=this;var bw=bv.live.slice(0);for(bE=0;bE<bw.length;bE++){e=bw[bE];if(e.origType.replace(aZ,"")===bF.type){by.push(e.selector)}else{bw.splice(bE--,1)}}bz=b(bF.target).closest(by,bF.currentTarget);for(bG=0,bD=bz.length;bG<bD;bG++){bB=bz[bG];for(bE=0;bE<bw.length;bE++){e=bw[bE];if(bB.selector===e.selector&&(!bA||bA.test(e.namespace))&&!bB.elem.disabled){bH=bB.elem;bL=null;if(e.preType==="mouseenter"||e.preType==="mouseleave"){bF.type=e.preType;bL=b(bF.relatedTarget).closest(e.selector)[0];if(bL&&b.contains(bH,bL)){bL=bH}}if(!bL||bL!==bH){bI.push({elem:bH,handleObj:e,level:bB.level})}}}}for(bG=0,bD=bI.length;bG<bD;bG++){bz=bI[bG];if(bx&&bz.level>bx){break}bF.currentTarget=bz.elem;bF.data=bz.handleObj.data;bF.handleObj=bz.handleObj;bJ=bz.handleObj.origHandler.apply(bz.elem,arguments);if(bJ===false||bF.isPropagationStopped()){bx=bz.level;if(bJ===false){bC=false}if(bF.isImmediatePropagationStopped()){break}}}return bC}function s(bv,e){return(bv&&bv!=="*"?bv+".":"")+e.replace(Q,"`").replace(bi,"&")}b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(bv,e){b.fn[e]=function(bx,bw){if(bw==null){bw=bx;bx=null}return arguments.length>0?this.bind(e,bx,bw):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bF=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bG=0,bJ=Object.prototype.toString,bA=false,bz=true,bH=/\\/g,bN=/\W/;[0,0].sort(function(){bz=false;return 0});var bx=function(bS,e,bV,bW){bV=bV||[];e=e||au;var bY=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bS||typeof bS!=="string"){return bV}var bP,b0,b3,bO,bZ,b2,b1,bU,bR=true,bQ=bx.isXML(e),bT=[],bX=bS;do{bF.exec("");bP=bF.exec(bX);if(bP){bX=bP[3];bT.push(bP[1]);if(bP[2]){bO=bP[3];break}}}while(bP);if(bT.length>1&&bB.exec(bS)){if(bT.length===2&&bC.relative[bT[0]]){b0=bK(bT[0]+bT[1],e)}else{b0=bC.relative[bT[0]]?[e]:bx(bT.shift(),e);while(bT.length){bS=bT.shift();if(bC.relative[bS]){bS+=bT.shift()}b0=bK(bS,b0)}}}else{if(!bW&&bT.length>1&&e.nodeType===9&&!bQ&&bC.match.ID.test(bT[0])&&!bC.match.ID.test(bT[bT.length-1])){bZ=bx.find(bT.shift(),e,bQ);e=bZ.expr?bx.filter(bZ.expr,bZ.set)[0]:bZ.set[0]}if(e){bZ=bW?{expr:bT.pop(),set:bD(bW)}:bx.find(bT.pop(),bT.length===1&&(bT[0]==="~"||bT[0]==="+")&&e.parentNode?e.parentNode:e,bQ);b0=bZ.expr?bx.filter(bZ.expr,bZ.set):bZ.set;if(bT.length>0){b3=bD(b0)}else{bR=false}while(bT.length){b2=bT.pop();b1=b2;if(!bC.relative[b2]){b2=""}else{b1=bT.pop()}if(b1==null){b1=e}bC.relative[b2](b3,b1,bQ)}}else{b3=bT=[]}}if(!b3){b3=b0}if(!b3){bx.error(b2||bS)}if(bJ.call(b3)==="[object Array]"){if(!bR){bV.push.apply(bV,b3)}else{if(e&&e.nodeType===1){for(bU=0;b3[bU]!=null;bU++){if(b3[bU]&&(b3[bU]===true||b3[bU].nodeType===1&&bx.contains(e,b3[bU]))){bV.push(b0[bU])}}}else{for(bU=0;b3[bU]!=null;bU++){if(b3[bU]&&b3[bU].nodeType===1){bV.push(b0[bU])}}}}}else{bD(b3,bV)}if(bO){bx(bO,bY,bV,bW);bx.uniqueSort(bV)}return bV};bx.uniqueSort=function(bO){if(bI){bA=bz;bO.sort(bI);if(bA){for(var e=1;e<bO.length;e++){if(bO[e]===bO[e-1]){bO.splice(e--,1)}}}}return bO};bx.matches=function(e,bO){return bx(e,null,null,bO)};bx.matchesSelector=function(e,bO){return bx(bO,null,null,[e]).length>0};bx.find=function(bU,e,bV){var bT;if(!bU){return[]}for(var bQ=0,bP=bC.order.length;bQ<bP;bQ++){var bR,bS=bC.order[bQ];if((bR=bC.leftMatch[bS].exec(bU))){var bO=bR[1];bR.splice(1,1);if(bO.substr(bO.length-1)!=="\\"){bR[1]=(bR[1]||"").replace(bH,"");bT=bC.find[bS](bR,e,bV);if(bT!=null){bU=bU.replace(bC.match[bS],"");break}}}}if(!bT){bT=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bT,expr:bU}};bx.filter=function(bY,bX,b1,bR){var bT,e,bP=bY,b3=[],bV=bX,bU=bX&&bX[0]&&bx.isXML(bX[0]);while(bY&&bX.length){for(var bW in bC.filter){if((bT=bC.leftMatch[bW].exec(bY))!=null&&bT[2]){var b2,b0,bO=bC.filter[bW],bQ=bT[1];e=false;bT.splice(1,1);if(bQ.substr(bQ.length-1)==="\\"){continue}if(bV===b3){b3=[]}if(bC.preFilter[bW]){bT=bC.preFilter[bW](bT,bV,b1,b3,bR,bU);if(!bT){e=b2=true}else{if(bT===true){continue}}}if(bT){for(var bS=0;(b0=bV[bS])!=null;bS++){if(b0){b2=bO(b0,bT,bS,bV);var bZ=bR^!!b2;if(b1&&b2!=null){if(bZ){e=true}else{bV[bS]=false}}else{if(bZ){b3.push(b0);e=true}}}}}if(b2!==N){if(!b1){bV=b3}bY=bY.replace(bC.match[bW],"");if(!e){return[]}break}}}if(bY===bP){if(e==null){bx.error(bY)}else{break}}bP=bY}return bV};bx.error=function(e){throw"Syntax error, unrecognized expression: "+e};var bC=bx.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bT,bO){var bQ=typeof bO==="string",bS=bQ&&!bN.test(bO),bU=bQ&&!bS;if(bS){bO=bO.toLowerCase()}for(var bP=0,e=bT.length,bR;bP<e;bP++){if((bR=bT[bP])){while((bR=bR.previousSibling)&&bR.nodeType!==1){}bT[bP]=bU||bR&&bR.nodeName.toLowerCase()===bO?bR||false:bR===bO}}if(bU){bx.filter(bO,bT,true)}},">":function(bT,bO){var bS,bR=typeof bO==="string",bP=0,e=bT.length;if(bR&&!bN.test(bO)){bO=bO.toLowerCase();for(;bP<e;bP++){bS=bT[bP];if(bS){var bQ=bS.parentNode;bT[bP]=bQ.nodeName.toLowerCase()===bO?bQ:false}}}else{for(;bP<e;bP++){bS=bT[bP];if(bS){bT[bP]=bR?bS.parentNode:bS.parentNode===bO}}if(bR){bx.filter(bO,bT,true)}}},"":function(bQ,bO,bS){var bR,bP=bG++,e=bL;if(typeof bO==="string"&&!bN.test(bO)){bO=bO.toLowerCase();bR=bO;e=bv}e("parentNode",bO,bP,bQ,bR,bS)},"~":function(bQ,bO,bS){var bR,bP=bG++,e=bL;if(typeof bO==="string"&&!bN.test(bO)){bO=bO.toLowerCase();bR=bO;e=bv}e("previousSibling",bO,bP,bQ,bR,bS)}},find:{ID:function(bO,bP,bQ){if(typeof bP.getElementById!=="undefined"&&!bQ){var e=bP.getElementById(bO[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bP,bS){if(typeof bS.getElementsByName!=="undefined"){var bO=[],bR=bS.getElementsByName(bP[1]);for(var bQ=0,e=bR.length;bQ<e;bQ++){if(bR[bQ].getAttribute("name")===bP[1]){bO.push(bR[bQ])}}return bO.length===0?null:bO}},TAG:function(e,bO){if(typeof bO.getElementsByTagName!=="undefined"){return bO.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bQ,bO,bP,e,bT,bU){bQ=" "+bQ[1].replace(bH,"")+" ";if(bU){return bQ}for(var bR=0,bS;(bS=bO[bR])!=null;bR++){if(bS){if(bT^(bS.className&&(" "+bS.className+" ").replace(/[\t\n\r]/g," ").indexOf(bQ)>=0)){if(!bP){e.push(bS)}}else{if(bP){bO[bR]=false}}}}return false},ID:function(e){return e[1].replace(bH,"")},TAG:function(bO,e){return bO[1].replace(bH,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bx.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bO=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bO[1]+(bO[2]||1))-0;e[3]=bO[3]-0}else{if(e[2]){bx.error(e[0])}}e[0]=bG++;return e},ATTR:function(bR,bO,bP,e,bS,bT){var bQ=bR[1]=bR[1].replace(bH,"");if(!bT&&bC.attrMap[bQ]){bR[1]=bC.attrMap[bQ]}bR[4]=(bR[4]||bR[5]||"").replace(bH,"");if(bR[2]==="~="){bR[4]=" "+bR[4]+" "}return bR},PSEUDO:function(bR,bO,bP,e,bS){if(bR[1]==="not"){if((bF.exec(bR[3])||"").length>1||/^\w/.test(bR[3])){bR[3]=bx(bR[3],null,null,bO)}else{var bQ=bx.filter(bR[3],bO,bP,true^bS);if(!bP){e.push.apply(e,bQ)}return false}}else{if(bC.match.POS.test(bR[0])||bC.match.CHILD.test(bR[0])){return true}}return bR},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bP,bO,e){return !!bx(e[3],bP).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bP){var e=bP.getAttribute("type"),bO=bP.type;return bP.nodeName.toLowerCase()==="input"&&"text"===bO&&(e===bO||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bO){var e=bO.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bO.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bO){var e=bO.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bO.type},button:function(bO){var e=bO.nodeName.toLowerCase();return e==="input"&&"button"===bO.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bO,e){return e===0},last:function(bP,bO,e,bQ){return bO===bQ.length-1},even:function(bO,e){return e%2===0},odd:function(bO,e){return e%2===1},lt:function(bP,bO,e){return bO<e[3]-0},gt:function(bP,bO,e){return bO>e[3]-0},nth:function(bP,bO,e){return e[3]-0===bO},eq:function(bP,bO,e){return e[3]-0===bO}},filter:{PSEUDO:function(bP,bU,bT,bV){var e=bU[1],bO=bC.filters[e];if(bO){return bO(bP,bT,bU,bV)}else{if(e==="contains"){return(bP.textContent||bP.innerText||bx.getText([bP])||"").indexOf(bU[3])>=0}else{if(e==="not"){var bQ=bU[3];for(var bS=0,bR=bQ.length;bS<bR;bS++){if(bQ[bS]===bP){return false}}return true}else{bx.error(e)}}}},CHILD:function(e,bQ){var bT=bQ[1],bO=e;switch(bT){case"only":case"first":while((bO=bO.previousSibling)){if(bO.nodeType===1){return false}}if(bT==="first"){return true}bO=e;case"last":while((bO=bO.nextSibling)){if(bO.nodeType===1){return false}}return true;case"nth":var bP=bQ[2],bW=bQ[3];if(bP===1&&bW===0){return true}var bS=bQ[0],bV=e.parentNode;if(bV&&(bV.sizcache!==bS||!e.nodeIndex)){var bR=0;for(bO=bV.firstChild;bO;bO=bO.nextSibling){if(bO.nodeType===1){bO.nodeIndex=++bR}}bV.sizcache=bS}var bU=e.nodeIndex-bW;if(bP===0){return bU===0}else{return(bU%bP===0&&bU/bP>=0)}}},ID:function(bO,e){return bO.nodeType===1&&bO.getAttribute("id")===e},TAG:function(bO,e){return(e==="*"&&bO.nodeType===1)||bO.nodeName.toLowerCase()===e},CLASS:function(bO,e){return(" "+(bO.className||bO.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bS,bQ){var bP=bQ[1],e=bC.attrHandle[bP]?bC.attrHandle[bP](bS):bS[bP]!=null?bS[bP]:bS.getAttribute(bP),bT=e+"",bR=bQ[2],bO=bQ[4];return e==null?bR==="!=":bR==="="?bT===bO:bR==="*="?bT.indexOf(bO)>=0:bR==="~="?(" "+bT+" ").indexOf(bO)>=0:!bO?bT&&e!==false:bR==="!="?bT!==bO:bR==="^="?bT.indexOf(bO)===0:bR==="$="?bT.substr(bT.length-bO.length)===bO:bR==="|="?bT===bO||bT.substr(0,bO.length+1)===bO+"-":false},POS:function(bR,bO,bP,bS){var e=bO[2],bQ=bC.setFilters[e];if(bQ){return bQ(bR,bP,bO,bS)}}}};var bB=bC.match.POS,bw=function(bO,e){return"\\"+(e-0+1)};for(var by in bC.match){bC.match[by]=new RegExp(bC.match[by].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bC.leftMatch[by]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bC.match[by].source.replace(/\\(\d+)/g,bw))}var bD=function(bO,e){bO=Array.prototype.slice.call(bO,0);if(e){e.push.apply(e,bO);return e}return bO};try{Array.prototype.slice.call(au.documentElement.childNodes,0)[0].nodeType}catch(bM){bD=function(bR,bQ){var bP=0,bO=bQ||[];if(bJ.call(bR)==="[object Array]"){Array.prototype.push.apply(bO,bR)}else{if(typeof bR.length==="number"){for(var e=bR.length;bP<e;bP++){bO.push(bR[bP])}}else{for(;bR[bP];bP++){bO.push(bR[bP])}}}return bO}}var bI,bE;if(au.documentElement.compareDocumentPosition){bI=function(bO,e){if(bO===e){bA=true;return 0}if(!bO.compareDocumentPosition||!e.compareDocumentPosition){return bO.compareDocumentPosition?-1:1}return bO.compareDocumentPosition(e)&4?-1:1}}else{bI=function(bV,bU){if(bV===bU){bA=true;return 0}else{if(bV.sourceIndex&&bU.sourceIndex){return bV.sourceIndex-bU.sourceIndex}}var bS,bO,bP=[],e=[],bR=bV.parentNode,bT=bU.parentNode,bW=bR;if(bR===bT){return bE(bV,bU)}else{if(!bR){return -1}else{if(!bT){return 1}}}while(bW){bP.unshift(bW);bW=bW.parentNode}bW=bT;while(bW){e.unshift(bW);bW=bW.parentNode}bS=bP.length;bO=e.length;for(var bQ=0;bQ<bS&&bQ<bO;bQ++){if(bP[bQ]!==e[bQ]){return bE(bP[bQ],e[bQ])}}return bQ===bS?bE(bV,e[bQ],-1):bE(bP[bQ],bU,1)};bE=function(bO,e,bP){if(bO===e){return bP}var bQ=bO.nextSibling;while(bQ){if(bQ===e){return -1}bQ=bQ.nextSibling}return 1}}bx.getText=function(e){var bO="",bQ;for(var bP=0;e[bP];bP++){bQ=e[bP];if(bQ.nodeType===3||bQ.nodeType===4){bO+=bQ.nodeValue}else{if(bQ.nodeType!==8){bO+=bx.getText(bQ.childNodes)}}}return bO};(function(){var bO=au.createElement("div"),bP="script"+(new Date()).getTime(),e=au.documentElement;bO.innerHTML="<a name='"+bP+"'/>";e.insertBefore(bO,e.firstChild);if(au.getElementById(bP)){bC.find.ID=function(bR,bS,bT){if(typeof bS.getElementById!=="undefined"&&!bT){var bQ=bS.getElementById(bR[1]);return bQ?bQ.id===bR[1]||typeof bQ.getAttributeNode!=="undefined"&&bQ.getAttributeNode("id").nodeValue===bR[1]?[bQ]:N:[]}};bC.filter.ID=function(bS,bQ){var bR=typeof bS.getAttributeNode!=="undefined"&&bS.getAttributeNode("id");return bS.nodeType===1&&bR&&bR.nodeValue===bQ}}e.removeChild(bO);e=bO=null})();(function(){var e=au.createElement("div");e.appendChild(au.createComment(""));if(e.getElementsByTagName("*").length>0){bC.find.TAG=function(bO,bS){var bR=bS.getElementsByTagName(bO[1]);if(bO[1]==="*"){var bQ=[];for(var bP=0;bR[bP];bP++){if(bR[bP].nodeType===1){bQ.push(bR[bP])}}bR=bQ}return bR}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bC.attrHandle.href=function(bO){return bO.getAttribute("href",2)}}e=null})();if(au.querySelectorAll){(function(){var e=bx,bQ=au.createElement("div"),bP="__sizzle__";bQ.innerHTML="<p class='TEST'></p>";if(bQ.querySelectorAll&&bQ.querySelectorAll(".TEST").length===0){return}bx=function(b1,bS,bW,b0){bS=bS||au;if(!b0&&!bx.isXML(bS)){var bZ=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b1);if(bZ&&(bS.nodeType===1||bS.nodeType===9)){if(bZ[1]){return bD(bS.getElementsByTagName(b1),bW)}else{if(bZ[2]&&bC.find.CLASS&&bS.getElementsByClassName){return bD(bS.getElementsByClassName(bZ[2]),bW)}}}if(bS.nodeType===9){if(b1==="body"&&bS.body){return bD([bS.body],bW)}else{if(bZ&&bZ[3]){var bV=bS.getElementById(bZ[3]);if(bV&&bV.parentNode){if(bV.id===bZ[3]){return bD([bV],bW)}}else{return bD([],bW)}}}try{return bD(bS.querySelectorAll(b1),bW)}catch(bX){}}else{if(bS.nodeType===1&&bS.nodeName.toLowerCase()!=="object"){var bT=bS,bU=bS.getAttribute("id"),bR=bU||bP,b3=bS.parentNode,b2=/^\s*[+~]/.test(b1);if(!bU){bS.setAttribute("id",bR)}else{bR=bR.replace(/'/g,"\\$&")}if(b2&&b3){bS=bS.parentNode}try{if(!b2||b3){return bD(bS.querySelectorAll("[id='"+bR+"'] "+b1),bW)}}catch(bY){}finally{if(!bU){bT.removeAttribute("id")}}}}}return e(b1,bS,bW,b0)};for(var bO in e){bx[bO]=e[bO]}bQ=null})()}(function(){var e=au.documentElement,bP=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bP){var bR=!bP.call(au.createElement("div"),"div"),bO=false;try{bP.call(au.documentElement,"[test!='']:sizzle")}catch(bQ){bO=true}bx.matchesSelector=function(bT,bV){bV=bV.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bx.isXML(bT)){try{if(bO||!bC.match.PSEUDO.test(bV)&&!/!=/.test(bV)){var bS=bP.call(bT,bV);if(bS||!bR||bT.document&&bT.document.nodeType!==11){return bS}}}catch(bU){}}return bx(bV,null,null,[bT]).length>0}}})();(function(){var e=au.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}bC.order.splice(1,0,"CLASS");bC.find.CLASS=function(bO,bP,bQ){if(typeof bP.getElementsByClassName!=="undefined"&&!bQ){return bP.getElementsByClassName(bO[1])}};e=null})();function bv(bO,bT,bS,bW,bU,bV){for(var bQ=0,bP=bW.length;bQ<bP;bQ++){var e=bW[bQ];if(e){var bR=false;e=e[bO];while(e){if(e.sizcache===bS){bR=bW[e.sizset];break}if(e.nodeType===1&&!bV){e.sizcache=bS;e.sizset=bQ}if(e.nodeName.toLowerCase()===bT){bR=e;break}e=e[bO]}bW[bQ]=bR}}}function bL(bO,bT,bS,bW,bU,bV){for(var bQ=0,bP=bW.length;bQ<bP;bQ++){var e=bW[bQ];if(e){var bR=false;e=e[bO];while(e){if(e.sizcache===bS){bR=bW[e.sizset];break}if(e.nodeType===1){if(!bV){e.sizcache=bS;e.sizset=bQ}if(typeof bT!=="string"){if(e===bT){bR=true;break}}else{if(bx.filter(bT,[e]).length>0){bR=e;break}}}e=e[bO]}bW[bQ]=bR}}}if(au.documentElement.contains){bx.contains=function(bO,e){return bO!==e&&(bO.contains?bO.contains(e):true)}}else{if(au.documentElement.compareDocumentPosition){bx.contains=function(bO,e){return !!(bO.compareDocumentPosition(e)&16)}}else{bx.contains=function(){return false}}}bx.isXML=function(e){var bO=(e?e.ownerDocument||e:0).documentElement;return bO?bO.nodeName!=="HTML":false};var bK=function(e,bU){var bS,bQ=[],bR="",bP=bU.nodeType?[bU]:bU;while((bS=bC.match.PSEUDO.exec(e))){bR+=bS[0];e=e.replace(bC.match.PSEUDO,"")}e=bC.relative[e]?e+"*":e;for(var bT=0,bO=bP.length;bT<bO;bT++){bx(e,bP[bT],bQ)}return bx.filter(bR,bQ)};b.find=bx;b.expr=bx.selectors;b.expr[":"]=b.expr.filters;b.unique=bx.uniqueSort;b.text=bx.getText;b.isXMLDoc=bx.isXML;b.contains=bx.contains})();var ab=/Until$/,ap=/^(?:parents|prevUntil|prevAll)/,ba=/,/,bq=/^.[^:#\[\.,]*$/,S=Array.prototype.slice,K=b.expr.match.POS,ax={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bw=this,by,bv;if(typeof e!=="string"){return b(e).filter(function(){for(by=0,bv=bw.length;by<bv;by++){if(b.contains(bw[by],this)){return true}}})}var bx=this.pushStack("","find",e),bA,bB,bz;for(by=0,bv=this.length;by<bv;by++){bA=bx.length;b.find(e,this[by],bx);if(by>0){for(bB=bA;bB<bx.length;bB++){for(bz=0;bz<bA;bz++){if(bx[bz]===bx[bB]){bx.splice(bB--,1);break}}}}}return bx},has:function(bv){var e=b(bv);return this.filter(function(){for(var bx=0,bw=e.length;bx<bw;bx++){if(b.contains(this,e[bx])){return true}}})},not:function(e){return this.pushStack(aE(this,e,false),"not",e)},filter:function(e){return this.pushStack(aE(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bE,bv){var bB=[],by,bw,bD=this[0];if(b.isArray(bE)){var bA,bx,bz={},e=1;if(bD&&bE.length){for(by=0,bw=bE.length;by<bw;by++){bx=bE[by];if(!bz[bx]){bz[bx]=K.test(bx)?b(bx,bv||this.context):bx}}while(bD&&bD.ownerDocument&&bD!==bv){for(bx in bz){bA=bz[bx];if(bA.jquery?bA.index(bD)>-1:b(bD).is(bA)){bB.push({selector:bx,elem:bD,level:e})}}bD=bD.parentNode;e++}}return bB}var bC=K.test(bE)||typeof bE!=="string"?b(bE,bv||this.context):0;for(by=0,bw=this.length;by<bw;by++){bD=this[by];while(bD){if(bC?bC.index(bD)>-1:b.find.matchesSelector(bD,bE)){bB.push(bD);break}else{bD=bD.parentNode;if(!bD||!bD.ownerDocument||bD===bv||bD.nodeType===11){break}}}}bB=bB.length>1?b.unique(bB):bB;return this.pushStack(bB,"closest",bE)},index:function(e){if(!e||typeof e==="string"){return b.inArray(this[0],e?b(e):this.parent().children())}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,bv){var bx=typeof e==="string"?b(e,bv):b.makeArray(e&&e.nodeType?[e]:e),bw=b.merge(this.get(),bx);return this.pushStack(F(bx[0])||F(bw[0])?bw:b.unique(bw))},andSelf:function(){return this.add(this.prevObject)}});function F(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(bv){var e=bv.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(bv,e,bw){return b.dir(bv,"parentNode",bw)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(bv,e,bw){return b.dir(bv,"nextSibling",bw)},prevUntil:function(bv,e,bw){return b.dir(bv,"previousSibling",bw)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,bv){b.fn[e]=function(bz,bw){var by=b.map(this,bv,bz),bx=S.call(arguments);if(!ab.test(e)){bw=bz}if(bw&&typeof bw==="string"){by=b.filter(bw,by)}by=this.length>1&&!ax[e]?b.unique(by):by;if((this.length>1||ba.test(bw))&&ap.test(e)){by=by.reverse()}return this.pushStack(by,e,bx.join(","))}});b.extend({filter:function(bw,e,bv){if(bv){bw=":not("+bw+")"}return e.length===1?b.find.matchesSelector(e[0],bw)?[e[0]]:[]:b.find.matches(bw,e)},dir:function(bw,bv,by){var e=[],bx=bw[bv];while(bx&&bx.nodeType!==9&&(by===N||bx.nodeType!==1||!b(bx).is(by))){if(bx.nodeType===1){e.push(bx)}bx=bx[bv]}return e},nth:function(by,e,bw,bx){e=e||1;var bv=0;for(;by;by=by[bw]){if(by.nodeType===1&&++bv===e){break}}return by},sibling:function(bw,bv){var e=[];for(;bw;bw=bw.nextSibling){if(bw.nodeType===1&&bw!==bv){e.push(bw)}}return e}});function aE(bx,bw,e){bw=bw||0;if(b.isFunction(bw)){return b.grep(bx,function(bz,by){var bA=!!bw.call(bz,by,bz);return bA===e})}else{if(bw.nodeType){return b.grep(bx,function(bz,by){return(bz===bw)===e})}else{if(typeof bw==="string"){var bv=b.grep(bx,function(by){return by.nodeType===1});if(bq.test(bw)){return b.filter(bw,bv,!e)}else{bw=b.filter(bw,bv)}}}}return b.grep(bx,function(bz,by){return(b.inArray(bz,bw)>=0)===e})}var ag=/ jQuery\d+="(?:\d+|null)"/g,aq=/^\s+/,V=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,f=/<([\w:]+)/,z=/<tbody/i,Y=/<|&#?\w+;/,R=/<(?:script|object|embed|option|style)/i,p=/checked\s*(?:[^=]|=\s*.checked.)/i,bm=/\/(java|ecma)script/i,aM=/^\s*<!(?:\[CDATA\[|\-\-)/,aw={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};aw.optgroup=aw.option;aw.tbody=aw.tfoot=aw.colgroup=aw.caption=aw.thead;aw.th=aw.td;if(!b.support.htmlSerialize){aw._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(bw){var bv=b(this);bv.text(e.call(this,bw,bv.text()))})}if(typeof e!=="object"&&e!==N){return this.empty().append((this[0]&&this[0].ownerDocument||au).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bw){b(this).wrapAll(e.call(this,bw))})}if(this[0]){var bv=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bv.insertBefore(this[0])}bv.map(function(){var bw=this;while(bw.firstChild&&bw.firstChild.nodeType===1){bw=bw.firstChild}return bw}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(bv){b(this).wrapInner(e.call(this,bv))})}return this.each(function(){var bv=b(this),bw=bv.contents();if(bw.length){bw.wrapAll(e)}else{bv.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bv){this.parentNode.insertBefore(bv,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bv){this.parentNode.insertBefore(bv,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bx){for(var bv=0,bw;(bw=this[bv])!=null;bv++){if(!e||b.filter(e,[bw]).length){if(!bx&&bw.nodeType===1){b.cleanData(bw.getElementsByTagName("*"));b.cleanData([bw])}if(bw.parentNode){bw.parentNode.removeChild(bw)}}}return this},empty:function(){for(var e=0,bv;(bv=this[e])!=null;e++){if(bv.nodeType===1){b.cleanData(bv.getElementsByTagName("*"))}while(bv.firstChild){bv.removeChild(bv.firstChild)}}return this},clone:function(bv,e){bv=bv==null?false:bv;e=e==null?bv:e;return this.map(function(){return b.clone(this,bv,e)})},html:function(bx){if(bx===N){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ag,""):null}else{if(typeof bx==="string"&&!R.test(bx)&&(b.support.leadingWhitespace||!aq.test(bx))&&!aw[(f.exec(bx)||["",""])[1].toLowerCase()]){bx=bx.replace(V,"<$1></$2>");try{for(var bw=0,bv=this.length;bw<bv;bw++){if(this[bw].nodeType===1){b.cleanData(this[bw].getElementsByTagName("*"));this[bw].innerHTML=bx}}}catch(by){this.empty().append(bx)}}else{if(b.isFunction(bx)){this.each(function(bz){var e=b(this);e.html(bx.call(this,bz,e.html()))})}else{this.empty().append(bx)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bx){var bw=b(this),bv=bw.html();bw.replaceWith(e.call(this,bx,bv))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bw=this.nextSibling,bv=this.parentNode;b(this).remove();if(bw){b(bw).before(e)}else{b(bv).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bB,bF,bE){var bx,by,bA,bD,bC=bB[0],bv=[];if(!b.support.checkClone&&arguments.length===3&&typeof bC==="string"&&p.test(bC)){return this.each(function(){b(this).domManip(bB,bF,bE,true)})}if(b.isFunction(bC)){return this.each(function(bH){var bG=b(this);bB[0]=bC.call(this,bH,bF?bG.html():N);bG.domManip(bB,bF,bE)})}if(this[0]){bD=bC&&bC.parentNode;if(b.support.parentNode&&bD&&bD.nodeType===11&&bD.childNodes.length===this.length){bx={fragment:bD}}else{bx=b.buildFragment(bB,this,bv)}bA=bx.fragment;if(bA.childNodes.length===1){by=bA=bA.firstChild}else{by=bA.firstChild}if(by){bF=bF&&b.nodeName(by,"tr");for(var bw=0,e=this.length,bz=e-1;bw<e;bw++){bE.call(bF?bb(this[bw],by):this[bw],bx.cacheable||(e>1&&bw<bz)?b.clone(bA,true,true):bA)}}if(bv.length){b.each(bv,bp)}}return this}});function bb(e,bv){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function w(e,bB){if(bB.nodeType!==1||!b.hasData(e)){return}var bA=b.expando,bx=b.data(e),by=b.data(bB,bx);if((bx=bx[bA])){var bC=bx.events;by=by[bA]=b.extend({},bx);if(bC){delete by.handle;by.events={};for(var bz in bC){for(var bw=0,bv=bC[bz].length;bw<bv;bw++){b.event.add(bB,bz+(bC[bz][bw].namespace?".":"")+bC[bz][bw].namespace,bC[bz][bw],bC[bz][bw].data)}}}}}function ah(bv,e){var bw;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bv)}bw=e.nodeName.toLowerCase();if(bw==="object"){e.outerHTML=bv.outerHTML}else{if(bw==="input"&&(bv.type==="checkbox"||bv.type==="radio")){if(bv.checked){e.defaultChecked=e.checked=bv.checked}if(e.value!==bv.value){e.value=bv.value}}else{if(bw==="option"){e.selected=bv.defaultSelected}else{if(bw==="input"||bw==="textarea"){e.defaultValue=bv.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(bz,bx,bv){var by,e,bw,bA;if(bx&&bx[0]){bA=bx[0].ownerDocument||bx[0]}if(!bA.createDocumentFragment){bA=au}if(bz.length===1&&typeof bz[0]==="string"&&bz[0].length<512&&bA===au&&bz[0].charAt(0)==="<"&&!R.test(bz[0])&&(b.support.checkClone||!p.test(bz[0]))){e=true;bw=b.fragments[bz[0]];if(bw&&bw!==1){by=bw}}if(!by){by=bA.createDocumentFragment();b.clean(bz,bA,by,bv)}if(e){b.fragments[bz[0]]=bw?by:1}return{fragment:by,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bv){b.fn[e]=function(bw){var bz=[],bC=b(bw),bB=this.length===1&&this[0].parentNode;if(bB&&bB.nodeType===11&&bB.childNodes.length===1&&bC.length===1){bC[bv](this[0]);return this}else{for(var bA=0,bx=bC.length;bA<bx;bA++){var by=(bA>0?this.clone(true):this).get();b(bC[bA])[bv](by);bz=bz.concat(by)}return this.pushStack(bz,e,bC.selector)}}});function bf(e){if("getElementsByTagName" in e){return e.getElementsByTagName("*")}else{if("querySelectorAll" in e){return e.querySelectorAll("*")}else{return[]}}}function ay(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function H(e){if(b.nodeName(e,"input")){ay(e)}else{if("getElementsByTagName" in e){b.grep(e.getElementsByTagName("input"),ay)}}}b.extend({clone:function(by,bA,bw){var bz=by.cloneNode(true),e,bv,bx;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(by.nodeType===1||by.nodeType===11)&&!b.isXMLDoc(by)){ah(by,bz);e=bf(by);bv=bf(bz);for(bx=0;e[bx];++bx){ah(e[bx],bv[bx])}}if(bA){w(by,bz);if(bw){e=bf(by);bv=bf(bz);for(bx=0;e[bx];++bx){w(e[bx],bv[bx])}}}e=bv=null;return bz},clean:function(bw,by,bH,bA){var bF;by=by||au;if(typeof by.createElement==="undefined"){by=by.ownerDocument||by[0]&&by[0].ownerDocument||au}var bI=[],bB;for(var bE=0,bz;(bz=bw[bE])!=null;bE++){if(typeof bz==="number"){bz+=""}if(!bz){continue}if(typeof bz==="string"){if(!Y.test(bz)){bz=by.createTextNode(bz)}else{bz=bz.replace(V,"<$1></$2>");var bK=(f.exec(bz)||["",""])[1].toLowerCase(),bx=aw[bK]||aw._default,bD=bx[0],bv=by.createElement("div");bv.innerHTML=bx[1]+bz+bx[2];while(bD--){bv=bv.lastChild}if(!b.support.tbody){var e=z.test(bz),bC=bK==="table"&&!e?bv.firstChild&&bv.firstChild.childNodes:bx[1]==="<table>"&&!e?bv.childNodes:[];for(bB=bC.length-1;bB>=0;--bB){if(b.nodeName(bC[bB],"tbody")&&!bC[bB].childNodes.length){bC[bB].parentNode.removeChild(bC[bB])}}}if(!b.support.leadingWhitespace&&aq.test(bz)){bv.insertBefore(by.createTextNode(aq.exec(bz)[0]),bv.firstChild)}bz=bv.childNodes}}var bG;if(!b.support.appendChecked){if(bz[0]&&typeof(bG=bz.length)==="number"){for(bB=0;bB<bG;bB++){H(bz[bB])}}else{H(bz)}}if(bz.nodeType){bI.push(bz)}else{bI=b.merge(bI,bz)}}if(bH){bF=function(bL){return !bL.type||bm.test(bL.type)};for(bE=0;bI[bE];bE++){if(bA&&b.nodeName(bI[bE],"script")&&(!bI[bE].type||bI[bE].type.toLowerCase()==="text/javascript")){bA.push(bI[bE].parentNode?bI[bE].parentNode.removeChild(bI[bE]):bI[bE])}else{if(bI[bE].nodeType===1){var bJ=b.grep(bI[bE].getElementsByTagName("script"),bF);bI.splice.apply(bI,[bE+1,0].concat(bJ))}bH.appendChild(bI[bE])}}}return bI},cleanData:function(bv){var by,bw,e=b.cache,bD=b.expando,bB=b.event.special,bA=b.support.deleteExpando;for(var bz=0,bx;(bx=bv[bz])!=null;bz++){if(bx.nodeName&&b.noData[bx.nodeName.toLowerCase()]){continue}bw=bx[b.expando];if(bw){by=e[bw]&&e[bw][bD];if(by&&by.events){for(var bC in by.events){if(bB[bC]){b.event.remove(bx,bC)}else{b.removeEvent(bx,bC,by.handle)}}if(by.handle){by.handle.elem=null}}if(bA){delete bx[b.expando]}else{if(bx.removeAttribute){bx.removeAttribute(b.expando)}}delete e[bw]}}}});function bp(e,bv){if(bv.src){b.ajax({url:bv.src,async:false,dataType:"script"})}else{b.globalEval((bv.text||bv.textContent||bv.innerHTML||"").replace(aM,"/*$0*/"))}if(bv.parentNode){bv.parentNode.removeChild(bv)}}var ak=/alpha\([^)]*\)/i,at=/opacity=([^)]*)/,C=/([A-Z]|^ms)/g,bd=/^-?\d+(?:px)?$/i,bo=/^-?\d/,L=/^[+\-]=/,aj=/[^+\-\.\de]+/g,a7={position:"absolute",visibility:"hidden",display:"block"},am=["Left","Right"],a1=["Top","Bottom"],Z,aH,aV;b.fn.css=function(e,bv){if(arguments.length===2&&bv===N){return this}return b.access(this,e,bv,true,function(bx,bw,by){return by!==N?b.style(bx,bw,by):b.css(bx,bw)})};b.extend({cssHooks:{opacity:{get:function(bw,bv){if(bv){var e=Z(bw,"opacity","opacity");return e===""?"1":e}else{return bw.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bx,bw,bD,by){if(!bx||bx.nodeType===3||bx.nodeType===8||!bx.style){return}var bB,bC,bz=b.camelCase(bw),bv=bx.style,bE=b.cssHooks[bz];bw=b.cssProps[bz]||bz;if(bD!==N){bC=typeof bD;if(bC==="number"&&isNaN(bD)||bD==null){return}if(bC==="string"&&L.test(bD)){bD=+bD.replace(aj,"")+parseFloat(b.css(bx,bw));bC="number"}if(bC==="number"&&!b.cssNumber[bz]){bD+="px"}if(!bE||!("set" in bE)||(bD=bE.set(bx,bD))!==N){try{bv[bw]=bD}catch(bA){}}}else{if(bE&&"get" in bE&&(bB=bE.get(bx,false,by))!==N){return bB}return bv[bw]}},css:function(by,bx,bv){var bw,e;bx=b.camelCase(bx);e=b.cssHooks[bx];bx=b.cssProps[bx]||bx;if(bx==="cssFloat"){bx="float"}if(e&&"get" in e&&(bw=e.get(by,true,bv))!==N){return bw}else{if(Z){return Z(by,bx)}}},swap:function(bx,bw,by){var e={};for(var bv in bw){e[bv]=bx.style[bv];bx.style[bv]=bw[bv]}by.call(bx);for(bv in bw){bx.style[bv]=e[bv]}}});b.curCSS=b.css;b.each(["height","width"],function(bv,e){b.cssHooks[e]={get:function(by,bx,bw){var bz;if(bx){if(by.offsetWidth!==0){return q(by,e,bw)}else{b.swap(by,a7,function(){bz=q(by,e,bw)})}return bz}},set:function(bw,bx){if(bd.test(bx)){bx=parseFloat(bx);if(bx>=0){return bx+"px"}}else{return bx}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(bv,e){return at.test((e&&bv.currentStyle?bv.currentStyle.filter:bv.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(by,bz){var bx=by.style,bv=by.currentStyle;bx.zoom=1;var e=b.isNaN(bz)?"":"alpha(opacity="+bz*100+")",bw=bv&&bv.filter||bx.filter||"";bx.filter=ak.test(bw)?bw.replace(ak,e):bw+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bw,bv){var e;b.swap(bw,{display:"inline-block"},function(){if(bv){e=Z(bw,"margin-right","marginRight")}else{e=bw.style.marginRight}});return e}}}});if(au.defaultView&&au.defaultView.getComputedStyle){aH=function(by,bw){var bv,bx,e;bw=bw.replace(C,"-$1").toLowerCase();if(!(bx=by.ownerDocument.defaultView)){return N}if((e=bx.getComputedStyle(by,null))){bv=e.getPropertyValue(bw);if(bv===""&&!b.contains(by.ownerDocument.documentElement,by)){bv=b.style(by,bw)}}return bv}}if(au.documentElement.currentStyle){aV=function(by,bw){var bz,bv=by.currentStyle&&by.currentStyle[bw],e=by.runtimeStyle&&by.runtimeStyle[bw],bx=by.style;if(!bd.test(bv)&&bo.test(bv)){bz=bx.left;if(e){by.runtimeStyle.left=by.currentStyle.left}bx.left=bw==="fontSize"?"1em":(bv||0);bv=bx.pixelLeft+"px";bx.left=bz;if(e){by.runtimeStyle.left=e}}return bv===""?"auto":bv}}Z=aH||aV;function q(bw,bv,e){var by=bv==="width"?bw.offsetWidth:bw.offsetHeight,bx=bv==="width"?am:a1;if(by>0){if(e!=="border"){b.each(bx,function(){if(!e){by-=parseFloat(b.css(bw,"padding"+this))||0}if(e==="margin"){by+=parseFloat(b.css(bw,e+this))||0}else{by-=parseFloat(b.css(bw,"border"+this+"Width"))||0}})}return by+"px"}by=Z(bw,bv,bv);if(by<0||by==null){by=bw.style[bv]||0}by=parseFloat(by)||0;if(e){b.each(bx,function(){by+=parseFloat(b.css(bw,"padding"+this))||0;if(e!=="padding"){by+=parseFloat(b.css(bw,"border"+this+"Width"))||0}if(e==="margin"){by+=parseFloat(b.css(bw,e+this))||0}})}return by+"px"}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bw){var bv=bw.offsetWidth,e=bw.offsetHeight;return(bv===0&&e===0)||(!b.support.reliableHiddenOffsets&&(bw.style.display||b.css(bw,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}var l=/%20/g,ao=/\[\]$/,bt=/\r?\n/g,br=/#.*$/,aC=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aY=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aL=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,aO=/^(?:GET|HEAD)$/,c=/^\/\//,O=/\?/,a6=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,t=/^(?:select|textarea)/i,j=/\s+/,bs=/([?&])_=[^&]*/,M=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,D=b.fn.load,aa={},u={},aD,v;try{aD=bl.href}catch(av){aD=au.createElement("a");aD.href="";aD=aD.href}v=M.exec(aD.toLowerCase())||[];function g(e){return function(by,bA){if(typeof by!=="string"){bA=by;by="*"}if(b.isFunction(bA)){var bx=by.toLowerCase().split(j),bw=0,bz=bx.length,bv,bB,bC;for(;bw<bz;bw++){bv=bx[bw];bC=/^\+/.test(bv);if(bC){bv=bv.substr(1)||"*"}bB=e[bv]=e[bv]||[];bB[bC?"unshift":"push"](bA)}}}}function aT(bv,bE,bz,bD,bB,bx){bB=bB||bE.dataTypes[0];bx=bx||{};bx[bB]=true;var bA=bv[bB],bw=0,e=bA?bA.length:0,by=(bv===aa),bC;for(;bw<e&&(by||!bC);bw++){bC=bA[bw](bE,bz,bD);if(typeof bC==="string"){if(!by||bx[bC]){bC=N}else{bE.dataTypes.unshift(bC);bC=aT(bv,bE,bz,bD,bC,bx)}}}if((by||!bC)&&!bx["*"]){bC=aT(bv,bE,bz,bD,"*",bx)}return bC}b.fn.extend({load:function(bw,bz,bA){if(typeof bw!=="string"&&D){return D.apply(this,arguments)}else{if(!this.length){return this}}var by=bw.indexOf(" ");if(by>=0){var e=bw.slice(by,bw.length);bw=bw.slice(0,by)}var bx="GET";if(bz){if(b.isFunction(bz)){bA=bz;bz=N}else{if(typeof bz==="object"){bz=b.param(bz,b.ajaxSettings.traditional);bx="POST"}}}var bv=this;b.ajax({url:bw,type:bx,dataType:"html",data:bz,complete:function(bC,bB,bD){bD=bC.responseText;if(bC.isResolved()){bC.done(function(bE){bD=bE});bv.html(e?b("<div>").append(bD.replace(a6,"")).find(e):bD)}if(bA){bv.each(bA,[bD,bB,bC])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||t.test(this.nodeName)||aY.test(this.type))}).map(function(e,bv){var bw=b(this).val();return bw==null?null:b.isArray(bw)?b.map(bw,function(by,bx){return{name:bv.name,value:by.replace(bt,"\r\n")}}):{name:bv.name,value:bw.replace(bt,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bv){b.fn[bv]=function(bw){return this.bind(bv,bw)}});b.each(["get","post"],function(e,bv){b[bv]=function(bw,by,bz,bx){if(b.isFunction(by)){bx=bx||bz;bz=by;by=N}return b.ajax({type:bv,url:bw,data:by,success:bz,dataType:bx})}});b.extend({getScript:function(e,bv){return b.get(e,N,bv,"script")},getJSON:function(e,bv,bw){return b.get(e,bv,bw,"json")},ajaxSetup:function(bw,e){if(!e){e=bw;bw=b.extend(true,b.ajaxSettings,e)}else{b.extend(true,bw,b.ajaxSettings,e)}for(var bv in {context:1,url:1}){if(bv in e){bw[bv]=e[bv]}else{if(bv in b.ajaxSettings){bw[bv]=b.ajaxSettings[bv]}}}return bw},ajaxSettings:{url:aD,isLocal:aL.test(v[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bc.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML}},ajaxPrefilter:g(aa),ajaxTransport:g(u),ajax:function(bz,bx){if(typeof bz==="object"){bx=bz;bz=N}bx=bx||{};var bD=b.ajaxSetup({},bx),bS=bD.context||bD,bG=bS!==bD&&(bS.nodeType||bS instanceof b)?b(bS):b.event,bR=b.Deferred(),bN=b._Deferred(),bB=bD.statusCode||{},bC,bH={},bO={},bQ,by,bL,bE,bI,bA=0,bw,bK,bJ={readyState:0,setRequestHeader:function(bT,bU){if(!bA){var e=bT.toLowerCase();bT=bO[e]=bO[e]||bT;bH[bT]=bU}return this},getAllResponseHeaders:function(){return bA===2?bQ:null},getResponseHeader:function(bT){var e;if(bA===2){if(!by){by={};while((e=aC.exec(bQ))){by[e[1].toLowerCase()]=e[2]}}e=by[bT.toLowerCase()]}return e===N?null:e},overrideMimeType:function(e){if(!bA){bD.mimeType=e}return this},abort:function(e){e=e||"abort";if(bL){bL.abort(e)}bF(0,e);return this}};function bF(bY,bW,bZ,bV){if(bA===2){return}bA=2;if(bE){clearTimeout(bE)}bL=N;bQ=bV||"";bJ.readyState=bY?4:0;var bT,b3,b2,bX=bZ?bj(bD,bJ,bZ):N,bU,b1;if(bY>=200&&bY<300||bY===304){if(bD.ifModified){if((bU=bJ.getResponseHeader("Last-Modified"))){b.lastModified[bC]=bU}if((b1=bJ.getResponseHeader("Etag"))){b.etag[bC]=b1}}if(bY===304){bW="notmodified";bT=true}else{try{b3=I(bD,bX);bW="success";bT=true}catch(b0){bW="parsererror";b2=b0}}}else{b2=bW;if(!bW||bY){bW="error";if(bY<0){bY=0}}}bJ.status=bY;bJ.statusText=bW;if(bT){bR.resolveWith(bS,[b3,bW,bJ])}else{bR.rejectWith(bS,[bJ,bW,b2])}bJ.statusCode(bB);bB=N;if(bw){bG.trigger("ajax"+(bT?"Success":"Error"),[bJ,bD,bT?b3:b2])}bN.resolveWith(bS,[bJ,bW]);if(bw){bG.trigger("ajaxComplete",[bJ,bD]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bR.promise(bJ);bJ.success=bJ.done;bJ.error=bJ.fail;bJ.complete=bN.done;bJ.statusCode=function(bT){if(bT){var e;if(bA<2){for(e in bT){bB[e]=[bB[e],bT[e]]}}else{e=bT[bJ.status];bJ.then(e,e)}}return this};bD.url=((bz||bD.url)+"").replace(br,"").replace(c,v[1]+"//");bD.dataTypes=b.trim(bD.dataType||"*").toLowerCase().split(j);if(bD.crossDomain==null){bI=M.exec(bD.url.toLowerCase());bD.crossDomain=!!(bI&&(bI[1]!=v[1]||bI[2]!=v[2]||(bI[3]||(bI[1]==="http:"?80:443))!=(v[3]||(v[1]==="http:"?80:443))))}if(bD.data&&bD.processData&&typeof bD.data!=="string"){bD.data=b.param(bD.data,bD.traditional)}aT(aa,bD,bx,bJ);if(bA===2){return false}bw=bD.global;bD.type=bD.type.toUpperCase();bD.hasContent=!aO.test(bD.type);if(bw&&b.active++===0){b.event.trigger("ajaxStart")}if(!bD.hasContent){if(bD.data){bD.url+=(O.test(bD.url)?"&":"?")+bD.data}bC=bD.url;if(bD.cache===false){var bv=b.now(),bP=bD.url.replace(bs,"$1_="+bv);bD.url=bP+((bP===bD.url)?(O.test(bD.url)?"&":"?")+"_="+bv:"")}}if(bD.data&&bD.hasContent&&bD.contentType!==false||bx.contentType){bJ.setRequestHeader("Content-Type",bD.contentType)}if(bD.ifModified){bC=bC||bD.url;if(b.lastModified[bC]){bJ.setRequestHeader("If-Modified-Since",b.lastModified[bC])}if(b.etag[bC]){bJ.setRequestHeader("If-None-Match",b.etag[bC])}}bJ.setRequestHeader("Accept",bD.dataTypes[0]&&bD.accepts[bD.dataTypes[0]]?bD.accepts[bD.dataTypes[0]]+(bD.dataTypes[0]!=="*"?", */*; q=0.01":""):bD.accepts["*"]);for(bK in bD.headers){bJ.setRequestHeader(bK,bD.headers[bK])}if(bD.beforeSend&&(bD.beforeSend.call(bS,bJ,bD)===false||bA===2)){bJ.abort();return false}for(bK in {success:1,error:1,complete:1}){bJ[bK](bD[bK])}bL=aT(u,bD,bx,bJ);if(!bL){bF(-1,"No Transport")}else{bJ.readyState=1;if(bw){bG.trigger("ajaxSend",[bJ,bD])}if(bD.async&&bD.timeout>0){bE=setTimeout(function(){bJ.abort("timeout")},bD.timeout)}try{bA=1;bL.send(bH,bF)}catch(bM){if(status<2){bF(-1,bM)}else{b.error(bM)}}}return bJ},param:function(e,bw){var bv=[],by=function(bz,bA){bA=b.isFunction(bA)?bA():bA;bv[bv.length]=encodeURIComponent(bz)+"="+encodeURIComponent(bA)};if(bw===N){bw=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){by(this.name,this.value)})}else{for(var bx in e){y(bx,e[bx],bw,by)}}return bv.join("&").replace(l,"+")}});function y(bw,by,bv,bx){if(b.isArray(by)){b.each(by,function(bA,bz){if(bv||ao.test(bw)){bx(bw,bz)}else{y(bw+"["+(typeof bz==="object"||b.isArray(bz)?bA:"")+"]",bz,bv,bx)}})}else{if(!bv&&by!=null&&typeof by==="object"){for(var e in by){y(bw+"["+e+"]",by[e],bv,bx)}}else{bx(bw,by)}}}b.extend({active:0,lastModified:{},etag:{}});function bj(bD,bC,bz){var bv=bD.contents,bB=bD.dataTypes,bw=bD.responseFields,by,bA,bx,e;for(bA in bw){if(bA in bz){bC[bw[bA]]=bz[bA]}}while(bB[0]==="*"){bB.shift();if(by===N){by=bD.mimeType||bC.getResponseHeader("content-type")}}if(by){for(bA in bv){if(bv[bA]&&bv[bA].test(by)){bB.unshift(bA);break}}}if(bB[0] in bz){bx=bB[0]}else{for(bA in bz){if(!bB[0]||bD.converters[bA+" "+bB[0]]){bx=bA;break}if(!e){e=bA}}bx=bx||e}if(bx){if(bx!==bB[0]){bB.unshift(bx)}return bz[bx]}}function I(bH,bz){if(bH.dataFilter){bz=bH.dataFilter(bz,bH.dataType)}var bD=bH.dataTypes,bG={},bA,bE,bw=bD.length,bB,bC=bD[0],bx,by,bF,bv,e;for(bA=1;bA<bw;bA++){if(bA===1){for(bE in bH.converters){if(typeof bE==="string"){bG[bE.toLowerCase()]=bH.converters[bE]}}}bx=bC;bC=bD[bA];if(bC==="*"){bC=bx}else{if(bx!=="*"&&bx!==bC){by=bx+" "+bC;bF=bG[by]||bG["* "+bC];if(!bF){e=N;for(bv in bG){bB=bv.split(" ");if(bB[0]===bx||bB[0]==="*"){e=bG[bB[1]+" "+bC];if(e){bv=bG[bv];if(bv===true){bF=e}else{if(e===true){bF=bv}}break}}}}if(!(bF||e)){b.error("No conversion from "+by.replace(" "," to "))}if(bF!==true){bz=bF?bF(bz):e(bv(bz))}}}}return bz}var aB=b.now(),x=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aB++)}});b.ajaxPrefilter("json jsonp",function(bD,bA,bC){var bx=bD.contentType==="application/x-www-form-urlencoded"&&(typeof bD.data==="string");if(bD.dataTypes[0]==="jsonp"||bD.jsonp!==false&&(x.test(bD.url)||bx&&x.test(bD.data))){var bB,bw=bD.jsonpCallback=b.isFunction(bD.jsonpCallback)?bD.jsonpCallback():bD.jsonpCallback,bz=bc[bw],e=bD.url,by=bD.data,bv="$1"+bw+"$2";if(bD.jsonp!==false){e=e.replace(x,bv);if(bD.url===e){if(bx){by=by.replace(x,bv)}if(bD.data===by){e+=(/\?/.test(e)?"&":"?")+bD.jsonp+"="+bw}}}bD.url=e;bD.data=by;bc[bw]=function(bE){bB=[bE]};bC.always(function(){bc[bw]=bz;if(bB&&b.isFunction(bz)){bc[bw](bB[0])}});bD.converters["script json"]=function(){if(!bB){b.error(bw+" was not called")}return bB[0]};bD.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===N){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bw){if(bw.crossDomain){var e,bv=au.head||au.getElementsByTagName("head")[0]||au.documentElement;return{send:function(bx,by){e=au.createElement("script");e.async="async";if(bw.scriptCharset){e.charset=bw.scriptCharset}e.src=bw.url;e.onload=e.onreadystatechange=function(bA,bz){if(bz||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bv&&e.parentNode){bv.removeChild(e)}e=N;if(!bz){by(200,"success")}}};bv.insertBefore(e,bv.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var E=bc.ActiveXObject?function(){for(var e in P){P[e](0,1)}}:false,B=0,P;function aK(){try{return new bc.XMLHttpRequest()}catch(bv){}}function ai(){try{return new bc.ActiveXObject("Microsoft.XMLHTTP")}catch(bv){}}b.ajaxSettings.xhr=bc.ActiveXObject?function(){return !this.isLocal&&aK()||ai()}:aK;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var bv;return{send:function(bB,bw){var bA=e.xhr(),bz,by;if(e.username){bA.open(e.type,e.url,e.async,e.username,e.password)}else{bA.open(e.type,e.url,e.async)}if(e.xhrFields){for(by in e.xhrFields){bA[by]=e.xhrFields[by]}}if(e.mimeType&&bA.overrideMimeType){bA.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bB["X-Requested-With"]){bB["X-Requested-With"]="XMLHttpRequest"}try{for(by in bB){bA.setRequestHeader(by,bB[by])}}catch(bx){}bA.send((e.hasContent&&e.data)||null);bv=function(bK,bE){var bF,bD,bC,bI,bH;try{if(bv&&(bE||bA.readyState===4)){bv=N;if(bz){bA.onreadystatechange=b.noop;if(E){delete P[bz]}}if(bE){if(bA.readyState!==4){bA.abort()}}else{bF=bA.status;bC=bA.getAllResponseHeaders();bI={};bH=bA.responseXML;if(bH&&bH.documentElement){bI.xml=bH}bI.text=bA.responseText;try{bD=bA.statusText}catch(bJ){bD=""}if(!bF&&e.isLocal&&!e.crossDomain){bF=bI.text?200:404}else{if(bF===1223){bF=204}}}}}catch(bG){if(!bE){bw(-1,bG)}}if(bI){bw(bF,bD,bI,bC)}};if(!e.async||bA.readyState===4){bv()}else{bz=++B;if(E){if(!P){P={};b(bc).unload(E)}P[bz]=bv}bA.onreadystatechange=bv}},abort:function(){if(bv){bv(0,1)}}}}})}var T={},a9,o,aA=/^(?:toggle|show|hide)$/,aQ=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,a2,aG=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a4,U=bc.webkitRequestAnimationFrame||bc.mozRequestAnimationFrame||bc.oRequestAnimationFrame;b.fn.extend({show:function(bx,bA,bz){var bw,by;if(bx||bx===0){return this.animate(a0("show",3),bx,bA,bz)}else{for(var bv=0,e=this.length;bv<e;bv++){bw=this[bv];if(bw.style){by=bw.style.display;if(!b._data(bw,"olddisplay")&&by==="none"){by=bw.style.display=""}if(by===""&&b.css(bw,"display")==="none"){b._data(bw,"olddisplay",A(bw.nodeName))}}}for(bv=0;bv<e;bv++){bw=this[bv];if(bw.style){by=bw.style.display;if(by===""||by==="none"){bw.style.display=b._data(bw,"olddisplay")||""}}}return this}},hide:function(bw,bz,by){if(bw||bw===0){return this.animate(a0("hide",3),bw,bz,by)}else{for(var bv=0,e=this.length;bv<e;bv++){if(this[bv].style){var bx=b.css(this[bv],"display");if(bx!=="none"&&!b._data(this[bv],"olddisplay")){b._data(this[bv],"olddisplay",bx)}}}for(bv=0;bv<e;bv++){if(this[bv].style){this[bv].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bw,bv,bx){var e=typeof bw==="boolean";if(b.isFunction(bw)&&b.isFunction(bv)){this._toggle.apply(this,arguments)}else{if(bw==null||e){this.each(function(){var by=e?bw:b(this).is(":hidden");b(this)[by?"show":"hide"]()})}else{this.animate(a0("toggle",3),bw,bv,bx)}}return this},fadeTo:function(e,bx,bw,bv){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bx},e,bw,bv)},animate:function(by,bv,bx,bw){var e=b.speed(bv,bx,bw);if(b.isEmptyObject(by)){return this.each(e.complete,[false])}by=b.extend({},by);return this[e.queue===false?"each":"queue"](function(){if(e.queue===false){b._mark(this)}var bC=b.extend({},e),bJ=this.nodeType===1,bG=bJ&&b(this).is(":hidden"),bz,bD,bB,bI,bH,bF,bA,bE,bK;bC.animatedProperties={};for(bB in by){bz=b.camelCase(bB);if(bB!==bz){by[bz]=by[bB];delete by[bB]}bD=by[bz];if(b.isArray(bD)){bC.animatedProperties[bz]=bD[1];bD=by[bz]=bD[0]}else{bC.animatedProperties[bz]=bC.specialEasing&&bC.specialEasing[bz]||bC.easing||"swing"}if(bD==="hide"&&bG||bD==="show"&&!bG){return bC.complete.call(this)}if(bJ&&(bz==="height"||bz==="width")){bC.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{bI=A(this.nodeName);if(bI==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(bC.overflow!=null){this.style.overflow="hidden"}for(bB in by){bH=new b.fx(this,bC,bB);bD=by[bB];if(aA.test(bD)){bH[bD==="toggle"?bG?"show":"hide":bD]()}else{bF=aQ.exec(bD);bA=bH.cur();if(bF){bE=parseFloat(bF[2]);bK=bF[3]||(b.cssNumber[bB]?"":"px");if(bK!=="px"){b.style(this,bB,(bE||1)+bK);bA=((bE||1)/bH.cur())*bA;b.style(this,bB,bA+bK)}if(bF[1]){bE=((bF[1]==="-="?-1:1)*bE)+bA}bH.custom(bA,bE,bK)}else{bH.custom(bA,bD,"")}}}return true})},stop:function(bv,e){if(bv){this.queue([])}this.each(function(){var bx=b.timers,bw=bx.length;if(!e){b._unmark(true,this)}while(bw--){if(bx[bw].elem===this){if(e){bx[bw](true)}bx.splice(bw,1)}}});if(!e){this.dequeue()}return this}});function bg(){setTimeout(ar,0);return(a4=b.now())}function ar(){a4=N}function a0(bv,e){var bw={};b.each(aG.concat.apply([],aG.slice(0,e)),function(){bw[this]=bv});return bw}b.each({slideDown:a0("show",1),slideUp:a0("hide",1),slideToggle:a0("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bv){b.fn[e]=function(bw,by,bx){return this.animate(bv,bw,by,bx)}});b.extend({speed:function(bw,bx,bv){var e=bw&&typeof bw==="object"?b.extend({},bw):{complete:bv||!bv&&bx||b.isFunction(bw)&&bw,duration:bw,easing:bv&&bx||bx&&!b.isFunction(bx)&&bx};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;e.old=e.complete;e.complete=function(by){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue!==false){b.dequeue(this)}else{if(by!==false){b._unmark(this)}}};return e},easing:{linear:function(bw,bx,e,bv){return e+bv*bw},swing:function(bw,bx,e,bv){return((-Math.cos(bw*Math.PI)/2)+0.5)*bv+e}},timers:[],fx:function(bv,e,bw){this.options=e;this.elem=bv;this.prop=bw;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,bv=b.css(this.elem,this.prop);return isNaN(e=parseFloat(bv))?!bv||bv==="auto"?0:bv:e},custom:function(bA,bz,bx){var e=this,bw=b.fx,by;this.startTime=a4||bg();this.start=bA;this.end=bz;this.unit=bx||this.unit||(b.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function bv(bB){return e.step(bB)}bv.elem=this.elem;if(bv()&&b.timers.push(bv)&&!a2){if(U){a2=true;by=function(){if(a2){U(by);bw.tick()}};U(by)}else{a2=setInterval(bw.tick,bw.interval)}}},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(by){var bx=a4||bg(),e=true,bz=this.elem,bv=this.options,bw,bB;if(by||bx>=bv.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bv.animatedProperties[this.prop]=true;for(bw in bv.animatedProperties){if(bv.animatedProperties[bw]!==true){e=false}}if(e){if(bv.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bC,bD){bz.style["overflow"+bD]=bv.overflow[bC]})}if(bv.hide){b(bz).hide()}if(bv.hide||bv.show){for(var bA in bv.animatedProperties){b.style(bz,bA,bv.orig[bA])}}bv.complete.call(bz)}return false}else{if(bv.duration==Infinity){this.now=bx}else{bB=bx-this.startTime;this.state=bB/bv.duration;this.pos=b.easing[bv.animatedProperties[this.prop]](this.state,bB,0,1,bv.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){for(var bv=b.timers,e=0;e<bv.length;++e){if(!bv[e]()){bv.splice(e--,1)}}if(!bv.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(a2);a2=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit}else{e.elem[e.prop]=e.now}}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(bv){return e===bv.elem}).length}}function A(bx){if(!T[bx]){var e=au.body,bv=b("<"+bx+">").appendTo(e),bw=bv.css("display");bv.remove();if(bw==="none"||bw===""){if(!a9){a9=au.createElement("iframe");a9.frameBorder=a9.width=a9.height=0}e.appendChild(a9);if(!o||!a9.createElement){o=(a9.contentWindow||a9.contentDocument).document;o.write((au.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");o.close()}bv=o.createElement(bx);o.body.appendChild(bv);bw=b.css(bv,"display");e.removeChild(a9)}T[bx]=bw}return T[bx]}var X=/^t(?:able|d|h)$/i,ad=/^(?:body|html)$/i;if("getBoundingClientRect" in au.documentElement){b.fn.offset=function(bI){var by=this[0],bB;if(bI){return this.each(function(e){b.offset.setOffset(this,bI,e)})}if(!by||!by.ownerDocument){return null}if(by===by.ownerDocument.body){return b.offset.bodyOffset(by)}try{bB=by.getBoundingClientRect()}catch(bF){}var bH=by.ownerDocument,bw=bH.documentElement;if(!bB||!b.contains(bw,by)){return bB?{top:bB.top,left:bB.left}:{top:0,left:0}}var bC=bH.body,bD=aJ(bH),bA=bw.clientTop||bC.clientTop||0,bE=bw.clientLeft||bC.clientLeft||0,bv=bD.pageYOffset||b.support.boxModel&&bw.scrollTop||bC.scrollTop,bz=bD.pageXOffset||b.support.boxModel&&bw.scrollLeft||bC.scrollLeft,bG=bB.top+bv-bA,bx=bB.left+bz-bE;return{top:bG,left:bx}}}else{b.fn.offset=function(bF){var bz=this[0];if(bF){return this.each(function(bG){b.offset.setOffset(this,bF,bG)})}if(!bz||!bz.ownerDocument){return null}if(bz===bz.ownerDocument.body){return b.offset.bodyOffset(bz)}b.offset.initialize();var bC,bw=bz.offsetParent,bv=bz,bE=bz.ownerDocument,bx=bE.documentElement,bA=bE.body,bB=bE.defaultView,e=bB?bB.getComputedStyle(bz,null):bz.currentStyle,bD=bz.offsetTop,by=bz.offsetLeft;while((bz=bz.parentNode)&&bz!==bA&&bz!==bx){if(b.offset.supportsFixedPosition&&e.position==="fixed"){break}bC=bB?bB.getComputedStyle(bz,null):bz.currentStyle;bD-=bz.scrollTop;by-=bz.scrollLeft;if(bz===bw){bD+=bz.offsetTop;by+=bz.offsetLeft;if(b.offset.doesNotAddBorder&&!(b.offset.doesAddBorderForTableAndCells&&X.test(bz.nodeName))){bD+=parseFloat(bC.borderTopWidth)||0;by+=parseFloat(bC.borderLeftWidth)||0}bv=bw;bw=bz.offsetParent}if(b.offset.subtractsBorderForOverflowNotVisible&&bC.overflow!=="visible"){bD+=parseFloat(bC.borderTopWidth)||0;by+=parseFloat(bC.borderLeftWidth)||0}e=bC}if(e.position==="relative"||e.position==="static"){bD+=bA.offsetTop;by+=bA.offsetLeft}if(b.offset.supportsFixedPosition&&e.position==="fixed"){bD+=Math.max(bx.scrollTop,bA.scrollTop);by+=Math.max(bx.scrollLeft,bA.scrollLeft)}return{top:bD,left:by}}}b.offset={initialize:function(){var e=au.body,bv=au.createElement("div"),by,bA,bz,bB,bw=parseFloat(b.css(e,"marginTop"))||0,bx="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(bv.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});bv.innerHTML=bx;e.insertBefore(bv,e.firstChild);by=bv.firstChild;bA=by.firstChild;bB=by.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(bA.offsetTop!==5);this.doesAddBorderForTableAndCells=(bB.offsetTop===5);bA.style.position="fixed";bA.style.top="20px";this.supportsFixedPosition=(bA.offsetTop===20||bA.offsetTop===15);bA.style.position=bA.style.top="";by.style.overflow="hidden";by.style.position="relative";this.subtractsBorderForOverflowNotVisible=(bA.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==bw);e.removeChild(bv);b.offset.initialize=b.noop},bodyOffset:function(e){var bw=e.offsetTop,bv=e.offsetLeft;b.offset.initialize();if(b.offset.doesNotIncludeMarginInBodyOffset){bw+=parseFloat(b.css(e,"marginTop"))||0;bv+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bw,left:bv}},setOffset:function(bx,bG,bA){var bB=b.css(bx,"position");if(bB==="static"){bx.style.position="relative"}var bz=b(bx),bv=bz.offset(),e=b.css(bx,"top"),bE=b.css(bx,"left"),bF=(bB==="absolute"||bB==="fixed")&&b.inArray("auto",[e,bE])>-1,bD={},bC={},bw,by;if(bF){bC=bz.position();bw=bC.top;by=bC.left}else{bw=parseFloat(e)||0;by=parseFloat(bE)||0}if(b.isFunction(bG)){bG=bG.call(bx,bA,bv)}if(bG.top!=null){bD.top=(bG.top-bv.top)+bw}if(bG.left!=null){bD.left=(bG.left-bv.left)+by}if("using" in bG){bG.using.call(bx,bD)}else{bz.css(bD)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bw=this[0],bv=this.offsetParent(),bx=this.offset(),e=ad.test(bv[0].nodeName)?{top:0,left:0}:bv.offset();bx.top-=parseFloat(b.css(bw,"marginTop"))||0;bx.left-=parseFloat(b.css(bw,"marginLeft"))||0;e.top+=parseFloat(b.css(bv[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(bv[0],"borderLeftWidth"))||0;return{top:bx.top-e.top,left:bx.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||au.body;while(e&&(!ad.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(bv,e){var bw="scroll"+e;b.fn[bw]=function(bz){var bx,by;if(bz===N){bx=this[0];if(!bx){return null}by=aJ(bx);return by?("pageXOffset" in by)?by[bv?"pageYOffset":"pageXOffset"]:b.support.boxModel&&by.document.documentElement[bw]||by.document.body[bw]:bx[bw]}return this.each(function(){by=aJ(this);if(by){by.scrollTo(!bv?bz:b(by).scrollLeft(),bv?bz:b(by).scrollTop())}else{this[bw]=bz}})}});function aJ(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(bv,e){var bw=e.toLowerCase();b.fn["inner"+e]=function(){var bx=this[0];return bx&&bx.style?parseFloat(b.css(bx,bw,"padding")):null};b.fn["outer"+e]=function(by){var bx=this[0];return bx&&bx.style?parseFloat(b.css(bx,bw,by?"margin":"border")):null};b.fn[bw]=function(by){var bz=this[0];if(!bz){return by==null?null:this}if(b.isFunction(by)){return this.each(function(bD){var bC=b(this);bC[bw](by.call(this,bD,bC[bw]()))})}if(b.isWindow(bz)){var bA=bz.document.documentElement["client"+e];return bz.document.compatMode==="CSS1Compat"&&bA||bz.document.body["client"+e]||bA}else{if(bz.nodeType===9){return Math.max(bz.documentElement["client"+e],bz.body["scroll"+e],bz.documentElement["scroll"+e],bz.body["offset"+e],bz.documentElement["offset"+e])}else{if(by===N){var bB=b.css(bz,bw),bx=parseFloat(bB);return b.isNaN(bx)?bB:bx}else{return this.css(bw,typeof by==="string"?by:by+"px")}}}}});bc.jQuery=bc.$=b})(window);jQuery.Buffer=function(){var b=function(c){if(c){this.assign(c)}this._bufferedCommandList=[];this._bufferedCommands={}};b._buffers=[];b._pool=[];b.bufferForElement=function(c){if(c._jquery_buffer){return c._jquery_buffer}return this.bufferFromPool().assign(c)};b.bufferFromPool=function(){var c=null;if(this._pool.length===0){c=new b()}else{c=this._pool.pop()}b._buffers.push(c);if(!this.flushingScheduled){this.scheduleFlushing()}return c};b.returnToPool=function(c){c.unassign();this._pool.push(c)};b.scheduleFlushing=function(){this.flushingScheduled=true};b.flush=function(){var f=this._buffers,e,c=f.length;for(e=0;e<c;e++){f[e].flush();this.returnToPool(f[e])}this._buffers=[];this.flushingScheduled=false};b.prototype.assign=function(c){if(this._el){this.unassign()}this._el=c;this._el._jquery_buffer=this;return this};b.prototype.unassign=function(){if(!this._el){return}this._el._jquery_buffer=undefined;this._el=undefined;return this};b.prototype.flush=function(){var g=this._bufferedCommandList,f=g.length,e,h;for(e=0;e<f;e++){h=g[e];this[h](this._bufferedCommands[h]);delete this._bufferedCommands[h]}this._bufferedCommandList.length=0;this.unassign()};b.prototype.$=function(c,e){if(!e){e=this._el}if(c===""||c===undefined){c=e;e=undefined}return jQuery(c,e)};b.prototype.bufferedCommand=function(c){if(!this._bufferedCommands[c]){this._bufferedCommands[c]={};this._bufferedCommandList.push(c)}return this._bufferedCommands[c]};b.prototype.hasBufferedCommand=function(c){return !!this._bufferedCommands[c]};b.prototype.html=function(e){var c=this.bufferedCommand("flushContent");if(e===undefined){return c.text||c.html||this.$().html()}c.text=undefined;c.html=e};b.prototype.text=function(e){var c=this.bufferedCommand("flushContent");if(e===undefined){return c.text||c.html||this.$().text()}c.text=e;c.html=undefined};b.prototype.flushContent=function(c){if(c.text!==undefined){this.$().text(c.text)}else{if(c.html!==undefined){this.$().html(c.html)}}};b.prototype.attr=function(g,h){if(typeof g==="object"){for(var e in g){this.attr(e,g[e])}return}if(g==="class"){if(h===undefined){return this.setClass().join(" ")}else{if(typeof h==="string"||jQuery.isArray(h)){var c=this.bufferedCommand("flushClassNames");c.classNames=this._hashFromClassNames(h);return}else{return this.setClass(h)}}}else{if(g==="html"){return this.html(h)}else{if(g==="text"){return this.text(h)}else{if(g==="style"){return this.resetStyles(h)}}}}var f=this.bufferedCommand("flushAttributes");if(!f.attr){f.attr={}}f.attr[g]=h};b.prototype.flushAttributes=function(g){var c=g.attr,h=this.$(),e;for(var f in c){if(!c.hasOwnProperty(f)){continue}e=c[f];if(e!==null){h.attr(f,e)}else{h.removeAttr(f)}}};b.prototype._STYLE_REGEX=/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g;b.prototype._camelizeStyleName=function(c){var e=c.match(/^-(webkit|moz|o)-/),f=c.camelize();if(e){return f.substr(0,1).toUpperCase()+f.substr(1)}else{return f}};b.prototype._dasherizeStyleName=function(c){var e=SC.String.dasherize(c);if(e.match(/^(webkit|moz|ms|o)-/)){e="-"+e}return e};b.prototype._loadStyles=function(c){if(!c){c=this.$().attr("style")}if(c&&(c=c.toString()).length>0){if(SC.browser.isIE){c=c.toLowerCase()}var g={};var f=this._STYLE_REGEX,e;f.lastIndex=0;while(e=f.exec(c)){g[this._camelizeStyleName(e[1])]=e[2]}return g}else{return{}}};b.prototype.resetStyles=function(e){var c=this.bufferedCommand("flushStyles");c._styles=this._loadStyles(e||" ")};b.prototype.styles=function(){var c=this.bufferedCommand("flushStyles");if(!c._styles){c._styles=this._loadStyles()}return c._styles};b.prototype.css=function(f,g){if(typeof f==="object"){for(var c in f){this.css(c,f[c])}return}var e=this.bufferedCommand("flushStyles");if(!e._styles){e._styles=this._loadStyles()}e._styles[f]=g};b.prototype.flushStyles=function(f){var h=f._styles;var k="";var e,j,g=[],c=0;for(e in h){if(!h.hasOwnProperty(e)){continue}j=h[e];if(j===null){continue}if(typeof j==="number"&&e!=="zIndex"&&e!=="fontWeight"&&e!=="opacity"){j+="px"}g[c++]=this._dasherizeStyleName(e)+": "+j}this.$().attr("style",g.join("; "))};b.prototype._hashFromClassNames=function(g){if(typeof g==="string"){g=g.split(" ")}var e,c=g.length,f={};for(e=0;e<c;e++){f[g[e]]=true}return f};b.prototype.setClass=function(h,c){var g=this.bufferedCommand("flushClassNames"),f;if(h===undefined){if(!g.classNames){g.classNames=this._hashFromClassNames(this._el.className)}var j=g.classNames,e=[];for(f in j){if(f&&j[f]){e.push(f)}}return e}if(typeof h==="object"){if(!g.classNames){g.classNames=this._hashFromClassNames(this._el.className)}for(f in h){g.classNames[f]=h[f]}return}if(!g.classNames){g.classNames=this._hashFromClassNames(this._el.className)}g.classNames[h]=c||false};b.prototype.hasClass=function(e){var c=this.bufferedCommand("flushClassNames");if(!c.classNames){c.classNames=this._hashFromClassNames(this._el.className)}return !!c.classNames[e]};b.prototype.addClass=function(g){if(!g){return}var f=this.bufferedCommand("flushClassNames");if(!f.classNames){f.classNames=this._hashFromClassNames(this._el.className)}if(typeof g==="string"){g=g.split(" ")}var e,c=g.length;for(e=0;e<c;e++){f.classNames[jQuery.trim(g[e])]=true}};b.prototype.removeClass=function(e){var c=this.bufferedCommand("flushClassNames");if(e===undefined){c.classNames={}}else{if(!c.classNames){c.classNames=this._hashFromClassNames(this._el.className)}c.classNames[e]=false}};b.prototype.resetClassNames=function(e){var c=this.bufferedCommand("flushClassNames");c.classNames={}};b.prototype.flushClassNames=function(f){var g=[];var h=f.classNames,e;for(e in h){if(h[e]){g.push(e)}}this.$().attr("class",g.join(" "))};function a(e){for(var c in e){if(typeof e[c]==="function"){e[c].displayName=c}}}a(b);a(b.prototype);return b}();(function(){jQuery.buffer=jQuery.bufferedJQuery=jQuery.sub();jQuery.bufferedJQuery.fn.extend({html:function(e){if(e===undefined){if(this.length<1){return undefined}return jQuery.Buffer.bufferForElement(this[0]).html()}var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.html(e)}return this},text:function(e){if(e===undefined){if(this.length<1){return undefined}return jQuery.Buffer.bufferForElement(this[0]).text()}var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.text(e)}return this},attr:function(e,f){var b;if(typeof f==="undefined"&&typeof e==="string"){if(this.length<1){return false}b=jQuery.Buffer.bufferForElement(this[0]);return b.attr(e)}var a=this.length,c;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.attr(e,f)}return this},hasClass:function(a){if(this.length<1){return false}return jQuery.Buffer.bufferForElement(this[0]).hasClass(a)},setClass:function(f,c){var a=this.length,e,b;for(e=0;e<a;e++){b=jQuery.Buffer.bufferForElement(this[e]);b.setClass(f,c)}return this},addClass:function(e){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.addClass(e)}return this},removeClass:function(e){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.removeClass(e)}return this},resetClassNames:function(){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.resetClassNames()}return this},css:function(e,f){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.css(e,f)}return this},styles:function(){if(this.length<1){return null}return jQuery.Buffer.bufferForElement(this[0]).styles()},resetStyles:function(){if(this.length<1){return null}jQuery.Buffer.bufferForElement(this[0]).resetStyles();return this}})})();jQuery.Buffer._flush=function(){jQuery.Buffer.flush()};jQuery.Buffer.scheduleFlushing=function(){SC.RunLoop.currentRunLoop.invokeOnce(jQuery.Buffer._flush);this.flushingScheduled=true};if(!window.require){window.require=function require(){}}if(!window.sc_require){window.sc_require=require}if(!window.sc_resource){window.sc_resource=function sc_resource(){}}sc_require("license");window.YES=true;window.NO=false;if(typeof console==="undefined"){window.console={};console.log=console.info=console.warn=console.error=function(){}}window.SC=window.SC||{};window.SproutCore=window.SproutCore||SC;SC=window.SC;SC.VERSION="1.9.2";SC._baseMixin=function(c){var g=Array.prototype.slice.call(arguments,1),a,f=g[0]||{},h=1,e=g.length,k,b,j;if(e===1){f=this||{};h=0}for(;h<e;h++){if(!(k=g[h])){continue}for(j in k){if(!k.hasOwnProperty(j)){continue}b=k[j];if(f===b){continue}if(b!==undefined&&(c||(f[j]===undefined))){f[j]=b}}if(k.hasOwnProperty("toString")){f.toString=k.toString}}return f};SC.mixin=function(){var a=Array.prototype.slice.call(arguments);a.unshift(true);return SC._baseMixin.apply(this,a)};SC.supplement=function(){var a=Array.prototype.slice.call(arguments);a.unshift(false);return SC._baseMixin.apply(this,a)};SC.extend=SC.mixin;SC.mixin({T_ERROR:"error",T_OBJECT:"object",T_NULL:"null",T_CLASS:"class",T_HASH:"hash",T_FUNCTION:"function",T_UNDEFINED:"undefined",T_NUMBER:"number",T_BOOL:"boolean",T_ARRAY:"array",T_STRING:"string",T_DATE:"date",T_REGEXP:"regexp",typeOf:function(a){if(a===undefined){return SC.T_UNDEFINED}if(a===null){return SC.T_NULL}var b=jQuery.type(a);if(b==="function"){return a.isClass?SC.T_CLASS:SC.T_FUNCTION}else{if(b==="object"){if(SC.Error&&(a instanceof SC.Error)){return SC.T_ERROR}else{if(a instanceof SC.Object){return SC.T_OBJECT}else{return SC.T_HASH}}}}return b},none:function(a){return a==null},empty:function(a){return a===null||a===undefined||a===""},isArray:function(a){if(!a||a.setInterval){return false}if(Array.isArray&&Array.isArray(a)){return true}if(a.objectAt){return true}if(a.length!==undefined&&jQuery.type(a)==="object"){return true}return false},makeArray:function(a){return SC.isArray(a)?a:SC.A(a)},A:function(c){if(c===null||c===undefined){return[]}if(c.slice instanceof Function){if(typeof(c)==="string"){return[c]}else{return c.slice()}}if(c.toArray){return c.toArray()}if(!SC.isArray(c)){return[c]}var b=[],a=c.length;while(--a>=0){b[a]=c[a]}return b},guidKey:"SproutCore"+(SC.VERSION+Math.random()).replace(/\D/g,""),_guidPrefixes:{number:"nu",string:"st"},_guidCaches:{number:{},string:{}},_numberGuids:[],_stringGuids:{},_keyCache:{},guidFor:function(f){var b,c,e=typeof f;if(f===undefined){return"(undefined)"}if(f===null){return"(null)"}if(e===SC.T_NUMBER||e===SC.T_STRING){b=this._guidCaches[e];c=b[f];if(!c){c="st"+(jQuery.uuid++);b[f]=c}return c}else{if(e===SC.T_BOOL){return(f)?"(true)":"(false)"}}var a=this.guidKey;if(f[a]){return f[a]}if(f===Object){return"(Object)"}if(f===Array){return"(Array)"}return SC.generateGuid(f,"sc")},keyFor:function(e,c){var b,a=this._keyCache[e];if(!a){a=this._keyCache[e]={}}b=a[c];if(!b){b=a[c]=e+"_"+c}return b},generateGuid:function(c,b){var a=(b+(jQuery.uuid++));if(c){c[this.guidKey]=a}return a},hashFor:function(){var a=arguments.length,c="",g,e,b;for(b=0;b<a;++b){g=arguments[b];c+=(g&&(e=g.hash)&&(typeof e===SC.T_FUNCTION))?e.call(g):this.guidFor(g)}return c===""?null:c},isEqual:function(e,c){return this.hashFor(e)===this.hashFor(c)},compare:function(t,q){if(t===q){return 0}var k=SC.typeOf(t);var h=SC.typeOf(q);var b=SC.ORDER_DEFINITION_MAPPING;if(!b){var e=SC.ORDER_DEFINITION;b=SC.ORDER_DEFINITION_MAPPING={};var s,o;for(s=0,o=e.length;s<o;++s){b[e[s]]=s}delete SC.ORDER_DEFINITION}var u=b[k];var c=b[h];if(u<c){return -1}if(u>c){return 1}switch(k){case SC.T_BOOL:case SC.T_NUMBER:if(t<q){return -1}if(t>q){return 1}return 0;case SC.T_STRING:var m=t.localeCompare(q);if(m<0){return -1}if(m>0){return 1}return 0;case SC.T_ARRAY:var p=t.length;var n=q.length;var f=Math.min(p,n);var a=0;var j=0;var g=arguments.callee;while(a===0&&j<f){a=g(t[j],q[j]);j++}if(a!==0){return a}if(p<n){return -1}if(p>n){return 1}return 0;case SC.T_OBJECT:if(t.constructor.isComparable===YES){return t.constructor.compare(t,q)}return 0;default:return 0}},K:function(){return this},EMPTY_ARRAY:[],EMPTY_HASH:{},EMPTY_RANGE:{start:0,length:0},beget:function(c){if(c===null||c===undefined){return null}var a=SC.K;a.prototype=c;var b=new a();a.prototype=null;if(typeof c.didBeget==="function"){b=c.didBeget(b)}return b},copy:function(e,b){var c=e,a;if(e){if(e.isCopyable){return e.copy(b)}if(e.clone){return e.clone()}}switch(jQuery.type(e)){case"array":c=e.slice();if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}break;case"object":c={};for(var f in e){c[f]=b?SC.copy(e[f],true):e[f]}}return c},merge:function(){var c={},b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(c,arguments[a])}return c},keys:function(c){var a=[];for(var b in c){a.push(b)}return a},inspect:function(e){var a,b=[];for(var c in e){a=e[c];if(a==="toString"){continue}if(SC.typeOf(a)===SC.T_FUNCTION){a="function() { ... }"}b.push(c+": "+a)}return"{"+b.join(" , ")+"}"},tupleForPropertyPath:function(f,a){if(typeof f==="object"&&(f instanceof Array)){return f}var c;var b=f.indexOf("*");if(b<0){b=f.lastIndexOf(".")}c=(b>=0)?f.slice(b+1):f;var e=this.objectForPropertyPath(f,a,b);return(e&&c)?[e,c]:null},objectForPropertyPath:function(g,c,e){var h,b,f,a;if(!c){c=window}if(SC.typeOf(g)===SC.T_STRING){if(e===undefined){e=g.length}h=0;while((c)&&(h<e)){b=g.indexOf(".",h);if((b<0)||(b>e)){b=e}f=g.slice(h,b);c=c.get?c.get(f):c[f];h=b+1}if(h<e){c=undefined}}else{h=0;a=g.length;f=null;while((h<a)&&c){f=g[h++];if(f){c=(c.get)?c.get(f):c[f]}}if(h<a){c=undefined}}return c},requiredObjectForPropertyPath:function(c,a,b){var e=SC.objectForPropertyPath(c,a,b);if(!e){throw c+" could not be found"}return e}});SC.clone=SC.copy;SC.$A=SC.A;SC.didLoad=SC.K;SC.ORDER_DEFINITION=[SC.T_ERROR,SC.T_UNDEFINED,SC.T_NULL,SC.T_BOOL,SC.T_NUMBER,SC.T_STRING,SC.T_ARRAY,SC.T_HASH,SC.T_OBJECT,SC.T_FUNCTION,SC.T_CLASS];SC.Function={property:function(b,c){b.dependentKeys=SC.$A(c);var a=SC.guidFor(b);b.cacheKey="__cache__"+a;b.lastSetValueKey="__lastValue__"+a;b.isProperty=true;return b},cacheable:function(a,b){a.isProperty=true;if(!a.dependentKeys){a.dependentKeys=[]}a.isCacheable=(b===undefined)?true:b;return a},idempotent:function(a,b){a.isProperty=true;if(!a.dependentKeys){this.dependentKeys=[]}a.isVolatile=(b===undefined)?true:b;return a},enhance:function(a){a.isEnhancement=true;return a},observes:function(c,a){var g=a.length,b=null,f=null;while(--g>=0){var e=a[g];if((e.indexOf(".")<0)&&(e.indexOf("*")<0)){if(!b){b=c.localPropertyPaths=[]}b.push(e)}else{if(!f){f=c.propertyPaths=[]}f.push(e)}}return c}};sc_require("system/function");SC.mixin(Function.prototype,{property:function(){return SC.Function.property(this,arguments)},cacheable:function(a){return SC.Function.cacheable(this,a)},idempotent:function(a){return SC.Function.idempotent(this,a)},enhance:function(){return SC.Function.enhance(this)},observes:function(a){return SC.Function.observes(this,arguments)}});SC.ObserverSet={add:function(l,a,c){var b=SC.guidFor(l),g=SC.guidFor(a),k=this._members,e=this.members,h=k[b],j,f;if(!h){h=k[b]={}}j=h[g];if(j===undefined){h[g]=e.length;f=[l,a,c];e.push(f)}else{}},remove:function(h,j){var f=SC.guidFor(h),b=SC.guidFor(j);var e=this._members[f],a=this.members;if(!e){return false}var c=e[b];if(c===undefined){return false}if(c!==a.length-1){var g=(a[c]=a[a.length-1]);this._members[SC.guidFor(g[0])][SC.guidFor(g[1])]=c}a.pop();delete this._members[f][b];return true},invokeMethods:function(){var b=this.members,e;for(var c=0,a=b.length;c<a;c++){e=b[c];e[1].call(e[0])}},clone:function(){var c=SC.ObserverSet.create(),e=this.members;c._members=SC.clone(this._members);var f=c.members;for(var b=0,a=e.length;b<a;b++){f[b]=SC.clone(e[b]);f[b].length=3}return c},create:function(){return new SC.ObserverSet.constructor()},getMembers:function(){return this.members.slice(0)},constructor:function(){this._members={};this.members=[]}};SC.ObserverSet.constructor.prototype=SC.ObserverSet;SC.ObserverSet.slice=SC.ObserverSet.clone;SC.ObserverSet.copy=SC.ObserverSet.clone;SC._ChainObserver=function(b,a){this.property=b;this.root=a||this};SC._ChainObserver.createChain=function(g,n,h,a,b){var e=n.split("."),k=new SC._ChainObserver(e[0]),j=k;for(var f=1,c=e.length;f<c;f++){j=j.next=new SC._ChainObserver(e[f],k)}var m=k.tails=[j];k.objectDidChange(g);m.forEach(function(l){l.target=h;l.method=a;l.context=b});k.tails=null;return k};SC._ChainObserver.prototype={isChainObserver:true,object:null,property:null,next:null,root:null,target:null,method:null,tail:function(){if(this._tail){return this._tail}var a=this;while(a.next){a=a.next}this._tail=a;return a},objectDidChange:function(a){if(a===this.object){return}if(this.object){if(this.property==="@each"&&this.object._removeContentObserver){this.object._removeContentObserver(this)}else{if(this.object.removeObserver){this.object.removeObserver(this.property,this,this.propertyDidChange)}}}this.object=a;if(this.property==="@each"&&this.next){if(this.object&&this.object._addContentObserver){this.object._addContentObserver(this)}}else{if(this.object&&this.object.addObserver){this.object.addObserver(this.property,this,this.propertyDidChange)}this.propertyDidChange()}},propertyDidChange:function(){var b=this.object;var f=this.property;var e=(b&&b.get)?b.get(f):null;if(this.next){this.next.objectDidChange(e)}var g=this.target,h=this.method,c=this.context;if(g&&h){var a=b?b.propertyRevision:null;if(c){h.call(g,b,f,e,c,a)}else{h.call(g,b,f,e,a)}}},destroyChain:function(){var a=this.object;if(a){if(this.property==="@each"&&this.next&&a._removeContentObserver){a._removeContentObserver(this)}if(a.removeObserver){a.removeObserver(this.property,this,this.propertyDidChange)}}if(this.next){this.next.destroyChain()}this.next=this.target=this.method=this.object=this.context=null;return null}};sc_require("ext/function");sc_require("private/observer_set");sc_require("private/chain_observer");SC.LOG_OBSERVERS=NO;SC.OBSERVES_HANDLER_ADD=0;SC.OBSERVES_HANDLER_REMOVE=1;SC.Observable={isObservable:YES,automaticallyNotifiesObserversFor:function(a){return YES},get:function(c){var b=this[c],a;if(b===undefined){return this.unknownProperty(c)}else{if(b&&b.isProperty){if(b.isCacheable){a=this._kvo_cache;if(!a){a=this._kvo_cache={}}return(a[b.cacheKey]!==undefined)?a[b.cacheKey]:(a[b.cacheKey]=b.call(this,c))}else{return b.call(this,c)}}else{return b}}},set:function(k,h){var b=this[k],l=this.automaticallyNotifiesObserversFor(k),g=h,e,a,j,f;if(h===undefined&&SC.typeOf(k)===SC.T_HASH){var c=k;for(k in c){if(!c.hasOwnProperty(k)){continue}this.set(k,c[k])}return this}if(!l&&this._kvo_cacheable&&(a=this._kvo_cache)){e=this._kvo_cachedep;if(!e||(e=e[k])===undefined){e=this._kvo_computeCachedDependentsFor(k)}if(e){j=e.length;while(--j>=0){f=e[j];a[f.cacheKey]=a[f.lastSetValueKey]=undefined}}}if(b&&b.isProperty){a=this._kvo_cache;if(b.isVolatile||!a||(a[b.lastSetValueKey]!==h)){if(!a){a=this._kvo_cache={}}a[b.lastSetValueKey]=h;if(l){this.propertyWillChange(k)}g=b.call(this,k,h);if(b.isCacheable){a[b.cacheKey]=g}if(l){this.propertyDidChange(k,g,YES)}}}else{if(b===undefined){if(l){this.propertyWillChange(k)}this.unknownProperty(k,h);if(l){this.propertyDidChange(k,g)}}else{if(this[k]!==h){if(l){this.propertyWillChange(k)}g=this[k]=h;if(l){this.propertyDidChange(k,g)}}}}return this},unknownProperty:function(a,b){if(!(b===undefined)){this[a]=b}return b},beginPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;return this},endPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;var b=this._kvo_changeLevel,a=this._kvo_changes;if((b<=0)&&a&&(a.length>0)&&!SC.Observers.isObservingSuspended){this._notifyPropertyObservers()}return this},propertyWillChange:function(a){return this},propertyDidChange:function(p,n,c){this._kvo_revision=(this._kvo_revision||0)+1;var b=this._kvo_changeLevel||0,j,o,k,e,g=SC.LOG_OBSERVERS&&(this.LOG_OBSERVING!==NO);var l=this._kvo_property_chains;if(l){var h=l[p];if(h){this.beginPropertyChanges();h=SC.clone(h);h.forEach(function(q){q.notifyPropertyDidChange()});this.endPropertyChanges()}}var a=this._kvo_cache;if(a){if(!c){e=this[p];if(e&&e.isProperty){a[e.cacheKey]=a[e.lastSetValueKey]=undefined}}if(this._kvo_cacheable){j=this._kvo_cachedep;if(!j||(j=j[p])===undefined){j=this._kvo_computeCachedDependentsFor(p)}if(j){o=j.length;while(--o>=0){k=j[o];a[k.cacheKey]=a[k.lastSetValueKey]=undefined}}}}var f=SC.Observers.isObservingSuspended;if((b>0)||f){var m=this._kvo_changes;if(!m){m=this._kvo_changes=SC.CoreSet.create()}m.add(p);if(f){if(g){SC.Logger.log("%@%@: will not notify observers because observing is suspended".fmt(SC.KVO_SPACES,this))}SC.Observers.objectHasPendingChanges(this)}}else{this._notifyPropertyObservers(p)}return this},registerDependentKey:function(j,c){var f=this._kvo_dependents,k=this._kvo_chain_dependents,b=this[j],l,h,a,g,e;if(typeof c==="object"&&(c instanceof Array)){l=c;a=0}else{l=arguments;a=1}h=l.length;if(!f){this._kvo_dependents=f={}}while(--h>=a){g=l[h];if(g.indexOf(".")>=0){SC._PropertyChain.createChain(g,this,j).activate()}else{e=f[g];if(!e){e=f[g]=[]}e.push(j)}}},registerDependentKeyWithChain:function(c,a){var e=this._chainsFor(c),b;e.add(a)},removeDependentKeyWithChain:function(c,a){var e=this._chainsFor(c),b;e.remove(a);if(e.get("length")===0){delete this._kvo_property_chains[c]}},_chainsFor:function(a){this._kvo_property_chains=this._kvo_property_chains||{};var b=this._kvo_property_chains[a]||SC.CoreSet.create();this._kvo_property_chains[a]=b;return b},_kvo_addCachedDependents:function(b,g,j,c){var a=g.length,f,e,h;while(--a>=0){e=g[a];c.add(e);f=this[e];if(f&&(f instanceof Function)&&f.isProperty){if(f.isCacheable){b.push(f)}if((h=j[e])&&h.length>0){this._kvo_addCachedDependents(b,h,j,c)}}}},_kvo_computeCachedDependentsFor:function(c){var e=this._kvo_cachedep,g=this._kvo_dependents,f=g?g[c]:null,a,b;if(!e){e=this._kvo_cachedep={}}if(!f||f.length===0){return e[c]=null}a=e[c]=[];b=SC._TMP_SEEN_SET=(SC._TMP_SEEN_SET||SC.CoreSet.create());b.add(c);this._kvo_addCachedDependents(a,f,g,b);b.clear();if(a.length===0){a=e[c]=null}return a},_kvo_for:function(c,b){var a=this[c];if(!this._kvo_cloned){this._kvo_cloned={}}if(!a){a=this[c]=(b===undefined)?[]:b.create();this._kvo_cloned[c]=YES}else{if(!this._kvo_cloned[c]){a=this[c]=a.copy();this._kvo_cloned[c]=YES}}return a},addObserver:function(c,g,j,b){var e,a,f,h;if(j===undefined){j=g;g=this}if(!g){g=this}if(typeof j==="string"){j=g[j]}if(!j){throw"You must pass a method to addObserver()"}c=c.toString();if(c.indexOf(".")>=0){a=SC._ChainObserver.createChain(this,c,g,j,b);a.masterTarget=g;a.masterMethod=j;this._kvo_for(SC.keyFor("_kvo_chains",c)).push(a)}else{if((this[c]===undefined)&&(c.indexOf("@")===0)){this.get(c)}if(g===this){g=null}e=SC.keyFor("_kvo_observers",c);this._kvo_for(e,SC.ObserverSet).add(g,j,b);this._kvo_for("_kvo_observed_keys",SC.CoreSet).add(c)}if(this.didAddObserver){this.didAddObserver(c,g,j)}return this},removeObserver:function(c,g,j){var e,f,b,h,a;if(j===undefined){j=g;g=this}if(!g){g=this}if(typeof j==="string"){j=g[j]}if(!j){throw"You must pass a method to removeObserver()"}c=c.toString();if(c.indexOf(".")>=0){e=SC.keyFor("_kvo_chains",c);if(f=this[e]){f=this._kvo_for(e);a=f.length;while(--a>=0){b=f[a];if(b&&(b.masterTarget===g)&&(b.masterMethod===j)){f[a]=b.destroyChain()}}}}else{if(g===this){g=null}e=SC.keyFor("_kvo_observers",c);if(h=this[e]){h=this._kvo_for(e);h.remove(g,j);if(h.getMembers().length===0){this._kvo_for("_kvo_observed_keys",SC.CoreSet).remove(c)}}}if(this.didRemoveObserver){this.didRemoveObserver(c,g,j)}return this},hasObserverFor:function(b){SC.Observers.flush(this);var e=this[SC.keyFor("_kvo_observers",b)],c=this[SC.keyFor("_kvo_local",b)],a;if(c&&c.length>0){return YES}if(e&&e.getMembers().length>0){return YES}return NO},initObservable:function(){if(this._observableInited){return}this._observableInited=YES;var g,o,m,l,j,f,n,h,c,p,b,k,e,a;if(o=this._observers){h=o.length;for(g=0;g<h;g++){m=o[g];j=this[m];f=j.propertyPaths;n=(f)?f.length:0;for(c=0;c<n;c++){p=f[c];this.addObservesHandler(j,p)}}}this.bindings=[];if(o=this._bindings){for(g=0,a=o.length;g<a;g++){m=o[g];l=this[m];e=m.slice(0,-7);this[m]=this.bind(e,l)}}if(o=this._properties){for(g=0,a=o.length;g<a;g++){m=o[g];if(l=this[m]){if(l.isCacheable){this._kvo_cacheable=YES}if(l.dependentKeys&&(l.dependentKeys.length>0)){this.registerDependentKey(m,l.dependentKeys)}}}}delete this._observers;delete this._bindings;delete this._properties},addObservesHandler:function(a,b){this._configureObservesHandler(SC.OBSERVES_HANDLER_ADD,a,b);return this},removeObservesHandler:function(a,b){this._configureObservesHandler(SC.OBSERVES_HANDLER_REMOVE,a,b);return this},_configureObservesHandler:function(e,b,f){var c,a;switch(e){case SC.OBSERVES_HANDLER_ADD:e="addObserver";break;case SC.OBSERVES_HANDLER_REMOVE:e="removeObserver";break;default:throw"invalid action provided: "+e}c=f.indexOf(".");if(c<0){this[e](f,this,b)}else{if(f.indexOf("*")===0){this[e](f.slice(1),this,b)}else{a=null;if(c===0){a=this;f=f.slice(1)}else{if(c===4&&f.slice(0,5)==="this."){a=this;f=f.slice(5)}else{if(c<0&&f.length===4&&f==="this"){a=this;f=""}else{if(c>0&&f[0]===f.charAt(0).toLowerCase()){a=this}}}}SC.Observers[e](f,this,b,a)}}},observersForKey:function(a){SC.Observers.flush(this);var b=this[SC.keyFor("_kvo_observers",a)];return b?b.getMembers():[]},_notifyPropertyObservers:function(w){if(!this._observableInited){this.initObservable()}SC.Observers.flush(this);var h=SC.LOG_OBSERVERS&&!(this.LOG_OBSERVING===NO),q,u,o,e,p,n,t,s,l,a,g,v,c,k,f,b,j,m;if(h){j=SC.KVO_SPACES=(SC.KVO_SPACES||"")+"  ";SC.Logger.log('%@%@: notifying observers after change to key "%@"'.fmt(j,this,w))}e=this["_kvo_observers_*"];this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;while(((u=this._kvo_changes)&&(u.length>0))||w){t=++this.propertyRevision;if(!u){u=SC.CoreSet.create()}this._kvo_changes=null;if(w==="*"){u.add("*");u.addEach(this._kvo_for("_kvo_observed_keys",SC.CoreSet))}else{if(w){u.add(w)}}if(o=this._kvo_dependents){for(p=0;p<u.length;p++){w=u[p];n=o[w];if(n&&(k=n.length)){if(h){SC.Logger.log("%@...including dependent keys for %@: %@".fmt(j,w,n))}m=this._kvo_cache;if(!m){m=this._kvo_cache={}}while(--k>=0){u.add(w=n[k]);if(f=this[w]){this[f.cacheKey]=undefined;m[f.cacheKey]=m[f.lastSetValueKey]=undefined}}}}}while(u.length>0){w=u.pop();q=this[SC.keyFor("_kvo_observers",w)];if(q){s=SC.clone(q.getMembers());l=s.length;for(g=0;g<l;g++){a=s[g];if(a[3]===t){continue}if(!a[1]){SC.Logger.log(a)}v=a[0]||this;c=a[1];b=a[2];a[3]=t;if(h){SC.Logger.log('%@...firing observer on %@ for key "%@"'.fmt(j,v,w))}if(b!==undefined){c.call(v,this,w,null,b,t)}else{c.call(v,this,w,null,t)}}}s=this[SC.keyFor("_kvo_local",w)];if(s){l=s.length;for(g=0;g<l;g++){a=s[g];c=this[a];if(c){if(h){SC.Logger.log('%@...firing local observer %@.%@ for key "%@"'.fmt(j,this,a,w))}c.call(this,this,w,null,t)}}}if(e&&w!=="*"){s=SC.clone(e.getMembers());l=s.length;for(g=0;g<l;g++){a=s[g];v=a[0]||this;c=a[1];b=a[2];if(h){SC.Logger.log('%@...firing * observer on %@ for key "%@"'.fmt(j,v,w))}if(b!==undefined){c.call(v,this,w,null,b,t)}else{c.call(v,this,w,null,t)}}}if(this.propertyObserver){if(h){SC.Logger.log('%@...firing %@.propertyObserver for key "%@"'.fmt(j,this,w))}this.propertyObserver(this,w,null,t)}}if(u){u.destroy()}w=null}this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;if(h){SC.KVO_SPACES=j.slice(0,-2)}return YES},bind:function(a,c,f){var e,b;if(f!==undefined){c=[c,f]}b=typeof c;if(b==="string"||(b==="object"&&(c instanceof Array))){e=this[a+"BindingDefault"]||SC.Binding;e=e.beget().from(c)}else{e=c.beget()}e=e.to(a,this).connect();this.bindings.push(e);return e},didChangeFor:function(a){var b,g,f,l,e,c,j,k,h;a=SC.hashFor(a);b=this._kvo_didChange_valueCache;if(!b){b=this._kvo_didChange_valueCache={}}g=this._kvo_didChange_revisionCache;if(!g){g=this._kvo_didChange_revisionCache={}}f=b[a]||{};l=g[a]||{};e=false;c=this._kvo_revision||0;j=arguments.length;while(--j>=1){k=arguments[j];if(l[k]!=c){h=this.get(k);if(f[k]!==h){e=true;f[k]=h}}l[k]=c}b[a]=f;g[a]=l;return e},setIfChanged:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){var c=a;for(a in c){if(!c.hasOwnProperty(a)){continue}this.setIfChanged(a,c[a])}return this}return(this.get(a)!==b)?this.set(a,b):this},getPath:function(b){var a=SC.tupleForPropertyPath(b,this);if(a===null||a[0]===null){return undefined}return SC.get(a[0],a[1])},setPath:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}a[0].set(a[1],b)}else{this.set(c,b)}return this},setPathIfChanged:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}if(a[0].get(a[1])!==b){a[0].set(a[1],b)}}else{this.setIfChanged(c,b)}return this},getEach:function(){var e=SC.A(arguments),c=[],a,b;for(a=0,b=e.length;a<b;a++){c[c.length]=this.getPath(e[a])}return c},incrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)+a);return this.get(b)},decrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)-a);return this.get(b)},toggleProperty:function(a,b,c){if(b===undefined){b=true}if(c===undefined){c=false}b=(this.get(a)==b)?c:b;this.set(a,b);return this.get(a)},notifyPropertyChange:function(a,b){this.propertyWillChange(a);this.propertyDidChange(a,b);return this},allPropertiesDidChange:function(){this._kvo_cache=null;this._notifyPropertyObservers("*");return this},addProbe:function(a){this.addObserver(a,SC.logChange)},removeProbe:function(a){this.removeObserver(a,SC.logChange)},logProperty:function(){var b=SC.$A(arguments),e,c,a;for(a=0,c=b.length;a<c;a++){e=b[a];SC.Logger.log("%@:%@: ".fmt(SC.guidFor(this),e),this.get(e))}},propertyRevision:1};SC.logChange=function logChange(c,a,b){SC.Logger.log("CHANGE: %@[%@] => %@".fmt(c,a,c.get(a)))};SC.mixin(SC,{get:function(a,b){if(!a){return undefined}if(b===undefined){return this[a]}if(a.get){return a.get(b)}return a[b]},getPath:function(a,b){if(b===undefined){b=a;a=window}return SC.objectForPropertyPath(b,a)}});SC.mixin(Array.prototype,SC.Observable);SC.Enumerator=function(a){this.enumerable=a;this.reset();return this};SC.Enumerator.prototype={nextObject:function(){var c=this._index;var a=this._length;if(c>=a){return undefined}var b=this.enumerable.nextObject(c,this._previousObject,this._context);this._previousObject=b;this._index=c+1;if(c>=a){this._context=SC.Enumerator._pushContext(this._context)}return b},reset:function(){var b=this.enumerable;if(!b){throw SC.$error("Enumerator has been destroyed")}this._length=b.get?b.get("length"):b.length;var a=this._length;this._index=0;this._previousObject=null;this._context=(a>0)?SC.Enumerator._popContext():null},destroy:function(){this.enumerable=this._length=this._index=this._previousObject=this._context=null}};SC.Enumerator.create=function(a){return new SC.Enumerator(a)};SC.Enumerator._popContext=function(){var a=this._contextCache?this._contextCache.pop():null;return a||{}};SC.Enumerator._pushContext=function(b){this._contextCache=this._contextCache||[];var a=this._contextCache;a.push(b);return null};sc_require("core");sc_require("ext/function");sc_require("system/enumerator");SC.Enumerable={isEnumerable:YES,nextObject:function(a,c,b){return this.objectAt?this.objectAt(a):this[a]},firstObject:function(){if(this.get("length")===0){return undefined}if(this.objectAt){return this.objectAt(0)}var b=SC.Enumerator._popContext(),a;a=this.nextObject(0,null,b);b=SC.Enumerator._pushContext(b);return a}.property().cacheable(),lastObject:function(){var a=this.get("length");if(a===0){return undefined}if(this.objectAt){return this.objectAt(a-1)}}.property().cacheable(),enumerator:function(){return SC.Enumerator.create(this)},forEach:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var f=null;var c=SC.Enumerator._popContext();for(var a=0;a<b;a++){var e=this.nextObject(a,f,c);h.call(g,e,a,this);f=e}f=null;c=SC.Enumerator._pushContext(c);return this},getEach:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null},this)},setEach:function(a,b){this.forEach(function(c){if(c){if(c.set){c.set(a,b)}else{c[a]=b}}},this);return this},map:function(j,h){if(typeof j!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(h===undefined){h=null}var c=[];var g=null;var e=SC.Enumerator._popContext();for(var a=0;a<b;a++){var f=this.nextObject(a,g,e);c[a]=j.call(h,f,a,this);g=f}g=null;e=SC.Enumerator._pushContext(e);return c},mapProperty:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null})},filter:function(j,h){if(typeof j!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(h===undefined){h=null}var c=[];var g=null;var e=SC.Enumerator._popContext();for(var a=0;a<b;a++){var f=this.nextObject(a,g,e);if(j.call(h,f,a,this)){c.push(f)}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},sortProperty:function(b){var c=(typeof b===SC.T_STRING)?arguments:b,a=c.length,e;if(this instanceof Array){e=this}else{e=[];this.forEach(function(f){e.push(f)})}if(!e){return[]}return e.sort(function(h,g){var f,k,m,l,j=0;for(f=0;j===0&&f<a;f++){k=c[f];m=h?(h.get?h.get(k):h[k]):null;l=g?(g.get?g.get(k):g[k]):null;j=SC.compare(m,l)}return j})},filterProperty:function(l,g){var e=this.get?this.get("length"):this.length;var f=[];var k=null;var b=SC.Enumerator._popContext();for(var h=0;h<e;h++){var c=this.nextObject(h,k,b);var j=c?(c.get?c.get(l):c[l]):null;var a=(g===undefined)?!!j:SC.isEqual(j,g);if(a){f.push(c)}k=c}k=null;b=SC.Enumerator._pushContext(b);return f},find:function(j,e){var c=this.get?this.get("length"):this.length;if(e===undefined){e=null}var h=null,b,k=NO,f=null;var a=SC.Enumerator._popContext();for(var g=0;g<c&&!k;g++){b=this.nextObject(g,h,a);if(k=j.call(e,b,g,this)){f=b}h=b}b=h=null;a=SC.Enumerator._pushContext(a);return f},findProperty:function(k,g){var c=this.get?this.get("length"):this.length;var l=NO,e=null,j=null,b,h;var a=SC.Enumerator._popContext();for(var f=0;f<c&&!l;f++){b=this.nextObject(f,j,a);h=b?(b.get?b.get(k):b[k]):null;l=(g===undefined)?!!h:SC.isEqual(h,g);if(l){e=b}j=b}j=b=null;a=SC.Enumerator._pushContext(a);return e},every:function(j,h){if(typeof j!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(h===undefined){h=null}var c=YES;var g=null;var e=SC.Enumerator._popContext();for(var a=0;c&&(a<b);a++){var f=this.nextObject(a,g,e);if(!j.call(h,f,a,this)){c=NO}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},everyProperty:function(k,f){var c=this.get?this.get("length"):this.length;var e=YES;var j=null;var a=SC.Enumerator._popContext();for(var g=0;e&&(g<c);g++){var b=this.nextObject(g,j,a);var h=b?(b.get?b.get(k):b[k]):null;e=(f===undefined)?!!h:SC.isEqual(h,f);j=b}j=null;a=SC.Enumerator._pushContext(a);return e},some:function(j,h){if(typeof j!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(h===undefined){h=null}var c=NO;var g=null;var e=SC.Enumerator._popContext();for(var a=0;(!c)&&(a<b);a++){var f=this.nextObject(a,g,e);if(j.call(h,f,a,this)){c=YES}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},someProperty:function(k,f){var c=this.get?this.get("length"):this.length;var e=NO;var j=null;var a=SC.Enumerator._popContext();for(var g=0;!e&&(g<c);g++){var b=this.nextObject(g,j,a);var h=b?(b.get?b.get(k):b[k]):null;e=(f===undefined)?!!h:SC.isEqual(h,f);j=b}j=null;a=SC.Enumerator._pushContext(a);return e},reduce:function(h,j,k){if(typeof h!=="function"){throw new TypeError()}var c=this.get?this.get("length"):this.length;if(c===0&&j===undefined){throw new TypeError()}var e=j;var g=null;var a=SC.Enumerator._popContext();for(var f=0;f<c;f++){var b=this.nextObject(f,g,a);if(b!==null){if(e===undefined){e=b}else{e=h.call(null,e,b,f,this,k)}}g=b}g=null;a=SC.Enumerator._pushContext(a);if(e===undefined){throw new TypeError()}return e},invoke:function(j){var f=this.get?this.get("length"):this.length;if(f<=0){return[]}var k;var h=[];var c=arguments.length;if(c>1){for(k=1;k<c;k++){h.push(arguments[k])}}var g=[];var l=null;var b=SC.Enumerator._popContext();for(k=0;k<f;k++){var e=this.nextObject(k,l,b);var a=e?e[j]:null;if(a){g[k]=a.apply(e,h)}l=e}l=null;b=SC.Enumerator._pushContext(b);return g},invokeWhile:function(e,k){var g=this.get?this.get("length"):this.length;if(g<=0){return null}var l;var j=[];var c=arguments.length;if(c>2){for(l=2;l<c;l++){j.push(arguments[l])}}var h=e;var m=null;var b=SC.Enumerator._popContext();for(l=0;(h===e)&&(l<g);l++){var f=this.nextObject(l,m,b);var a=f?f[k]:null;if(a){h=a.apply(f,j)}m=f}m=null;b=SC.Enumerator._pushContext(b);return h},toArray:function(){var a=[];this.forEach(function(b){a.push(b)},this);return a},groupBy:function(k){var c=this.get?this.get("length"):this.length,e=[],j=null,a=SC.Enumerator._popContext(),f=[],l=[],g,b,h;for(g=0;g<c;g++){b=this.nextObject(g,j,a);h=b?(b.get?b.get(k):b[k]):null;if(SC.none(f[h])){f[h]=[];l.push(h)}f[h].push(b);j=b}j=null;a=SC.Enumerator._pushContext(a);for(g=0,c=l.length;g<c;g++){e.push(f[l[g]])}return e}};SC._buildReducerFor=function(a,b){return function(e,f){var g=this[a];if(SC.typeOf(g)!==SC.T_FUNCTION){return this.unknownProperty?this.unknownProperty(e,f):null}else{var c=SC.Enumerable.reduce.call(this,g,null,b);return c}}.property("[]")};SC.Reducers={"[]":function(a,b){return this}.property(),enumerableContentDidChange:function(c,a,b){if(!SC.none(c)){if(c===0){this.notifyPropertyChange("firstObject")}if(!SC.none(a)&&c+a===this.get("length")-1){this.notifyPropertyChange("lastObject")}}this.notifyPropertyChange("[]")},reducedProperty:function(k,h,g){if(!k||typeof k!==SC.T_STRING||k.charAt(0)!=="@"){return undefined}var e=k.match(/^@([^(]*)(\(([^)]*)\))?$/);if(!e||e.length<2){return undefined}var j=e[1];var l=e[3];j="reduce"+j.slice(0,1).toUpperCase()+j.slice(1);var a=this[j];if(SC.typeOf(a)!==SC.T_FUNCTION){return undefined}if(g===NO){return SC.Enumerable.reduce.call(this,a,null,l)}var c=SC._buildReducerFor(j,l);var b=this.constructor.prototype;if(b){b[k]=c;var f=b._properties||[];f.push(k);b._properties=f;this.registerDependentKey(k,"[]")}return SC.Enumerable.reduce.call(this,a,null,l)},reduceMax:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]}if(a===null){return f}return(f>a)?f:a},reduceMaxObject:function(b,g,c,h,f){var a=b,j=g;if(f){if(g){j=g.get?g.get(f):g[f]}if(b){a=b.get?b.get(f):b[f]}}if(a===null){return g}return(j>a)?g:b},reduceMin:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]}if(a===null){return f}return(f<a)?f:a},reduceMinObject:function(b,g,c,h,f){var a=b,j=g;if(f){if(g){j=g.get?g.get(f):g[f]}if(b){a=b.get?b.get(f):b[f]}}if(a===null){return g}return(j<a)?g:b},reduceAverage:function(b,h,f,j,g){if(g&&h){h=h.get?h.get(g):h[g]}var c=(b||0)+h;var a=j.get?j.get("length"):j.length;if(f>=a-1){c=c/a}return c},reduceSum:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]}return(a===null)?f:a+f}};SC.mixin(SC.Enumerable,SC.Reducers);SC.mixin(Array.prototype,SC.Reducers);Array.prototype.isEnumerable=YES;(function(){var a={nextObject:SC.Enumerable.nextObject,enumerator:SC.Enumerable.enumerator,firstObject:SC.Enumerable.firstObject,lastObject:SC.Enumerable.lastObject,sortProperty:SC.Enumerable.sortProperty,mapProperty:function(h){var f=this.length;var g=[];for(var e=0;e<f;e++){var j=this[e];g[e]=j?(j.get?j.get(h):j[h]):null}return g},filterProperty:function(j,l){var g=this.length;var h=[];for(var f=0;f<g;f++){var k=this[f];var m=k?(k.get?k.get(j):k[j]):null;var e=(l===undefined)?!!m:SC.isEqual(m,l);if(e){h.push(k)}}return h},groupBy:function(j){var f=this.length,h=[],l=[],g=[],e,k,m;for(e=0;e<f;e++){k=this[e];m=k?(k.get?k.get(j):k[j]):null;if(SC.none(l[m])){l[m]=[];g.push(m)}l[m].push(k)}for(e=0,f=g.length;e<f;e++){h.push(l[g[e]])}return h},find:function(l,k){if(typeof l!=="function"){throw new TypeError()}var f=this.length;if(k===undefined){k=null}var h,g=null,j=NO;for(var e=0;e<f&&!j;e++){h=this[e];if(j=l.call(k,h,e,this)){g=h}}h=null;return g},findProperty:function(h,l){var f=this.length;var j,m,k=NO,g=null;for(var e=0;e<f&&!k;e++){m=(j=this[e])?(j.get?j.get(h):j[h]):null;k=(l===undefined)?!!m:SC.isEqual(m,l);if(k){g=j}}j=null;return g},everyProperty:function(h,k){var f=this.length;var g=YES;for(var e=0;g&&(e<f);e++){var j=this[e];var l=j?(j.get?j.get(h):j[h]):null;g=(k===undefined)?!!l:SC.isEqual(l,k)}return g},someProperty:function(h,k){var f=this.length;var g=NO;for(var e=0;!g&&(e<f);e++){var j=this[e];var l=j?(j.get?j.get(h):j[h]):null;g=(k===undefined)?!!l:SC.isEqual(l,k)}return g},invoke:function(g){var f=this.length;if(f<=0){return[]}var e;var j=[];var l=arguments.length;if(l>1){for(e=1;e<l;e++){j.push(arguments[e])}}var h=[];for(e=0;e<f;e++){var k=this[e];var m=k?k[g]:null;if(m){h[e]=m.apply(k,j)}}return h},invokeWhile:function(g,m){var j=this.length;if(j<=0){return null}var n;var l=[];var f=arguments.length;if(f>2){for(n=2;n<f;n++){l.push(arguments[n])}}var k=g;for(n=0;(k===g)&&(n<j);n++){var h=this[n];var e=h?h[m]:null;if(e){k=e.apply(h,l)}}return k},toArray:function(){var f=this.length;if(f<=0){return[]}var g=[];for(var e=0;e<f;e++){var h=this[e];g.push(h)}return g},getEach:function(h){var g=[];var f=this.length;for(var e=0;e<f;e++){var j=this[e];g[e]=j?(j.get?j.get(h):j[h]):null}return g},setEach:function(g,h){var f=this.length;for(var e=0;e<f;e++){var j=this[e];if(j){if(j.set){j.set(g,h)}else{j[g]=h}}}return this}};var c={forEach:function(j,h){if(typeof j!=="function"){throw new TypeError()}if(h===undefined){h=null}for(var f=0,e=this.length;f<e;f++){var g=this[f];j.call(h,g,f,this)}return this},map:function(k,j){if(typeof k!=="function"){throw new TypeError()}if(j===undefined){j=null}var f=[];for(var g=0,e=this.length;g<e;g++){var h=this[g];f[g]=k.call(j,h,g,this)}return f},filter:function(k,j){if(typeof k!=="function"){throw new TypeError()}if(j===undefined){j=null}var f=[];for(var g=0,e=this.length;g<e;g++){var h=this[g];if(k.call(j,h,g,this)){f.push(h)}}return f},every:function(k,j){if(typeof k!=="function"){throw new TypeError()}var f=this.length;if(j===undefined){j=null}var g=YES;for(var e=0;g&&(e<f);e++){var h=this[e];if(!k.call(j,h,e,this)){g=NO}}return g},some:function(k,j){if(typeof k!=="function"){throw new TypeError()}var f=this.length;if(j===undefined){j=null}var g=NO;for(var e=0;(!g)&&(e<f);e++){var h=this[e];if(k.call(j,h,e,this)){g=YES}}return g},reduce:function(l,g,k){if(typeof l!=="function"){throw new TypeError()}var f=this.length;if(f===0&&g===undefined){throw new TypeError()}var h=g;for(var e=0;e<f;e++){var j=this[e];if(j!==null){if(h===undefined){h=j}else{h=l.call(null,h,j,e,this,k)}}}if(h===undefined){throw new TypeError()}return h}};for(var b in c){if(!c.hasOwnProperty(b)){continue}if(!Array.prototype[b]||((typeof Prototype==="object")&&Prototype.Version.match(/^1\.6/))){Array.prototype[b]=c[b]}}SC.mixin(Array.prototype,a)})();SC.RangeObserver={isRangeObserver:YES,toString:function(){var a=this.indexes?this.indexes.toString():"SC.IndexSet<..>";return a.replace("IndexSet","RangeObserver(%@)".fmt(SC.guidFor(this)))},create:function(e,g,f,h,c,a){var b=SC.beget(this);b.source=e;b.indexes=g?g.frozenCopy():null;b.target=f;b.method=(typeof h==="string")?f[h]:h;b.context=c;b.isDeep=a||false;b.beginObserving();return b},extend:function(e){var c=SC.beget(this),b=arguments;for(var f=0,a=b.length;f<a;f++){SC.mixin(c,b[f])}return c},destroy:function(a){this.endObserving();return this},update:function(a,b){if(this.indexes&&this.indexes.isEqual(b)){return this}this.indexes=b?b.frozenCopy():null;this.endObserving().beginObserving();return this},beginObserving:function(){if(!this.isDeep){return this}var c=this.observing=this.observing||SC.CoreSet.create();var a=this._beginObservingForEach,b=this.source;if(!a){a=this._beginObservingForEach=function(e){var f=b.objectAt(e);if(f&&f.addObserver){c.push(f);f._kvo_needsRangeObserver=true}}}this.indexes.forEach(a);this.isObserving=false;SC.Observers.addPendingRangeObserver(this);return this},setupPending:function(b){var f=this.observing;if(this.isObserving||!f||(f.get("length")===0)){return true}if(f.contains(b)){this.isObserving=true;var c=this._setupPendingForEach;if(!c){var e=this.source,g=this.objectPropertyDidChange,a=this;c=this._setupPendingForEach=function(h){var l=e.objectAt(h),j=SC.guidFor(l),k;if(l&&l.addObserver){f.push(l);l.addObserver("*",a,g);k=a[j];if(k==null){a[j]=h}else{if(k.isIndexSet){k.add(h)}else{a[j]=SC.IndexSet.create(k).add(h)}}}}}this.indexes.forEach(c);return true}else{return false}},endObserving:function(){if(!this.isDeep){return this}var f=this.observing;if(this.isObserving){var b=this.objectPropertyDidChange,c=this.source,a,g,e;if(f){g=f.length;for(a=0;a<g;a++){e=f[a];e.removeObserver("*",this,b);this[SC.guidFor(e)]=null}f.length=0}this.isObserving=false}if(f){f.clear()}return this},rangeDidChange:function(b){var a=this.indexes;if(!b||!a||a.intersects(b)){this.endObserving();this.method.call(this.target,this.source,null,"[]",b,this.context);this.beginObserving()}return this},objectPropertyDidChange:function(e,g,h,a){var f=this.context,j=this.method,c=SC.guidFor(e),b=this[c];if(b&&!b.isIndexSet){b=this[c]=SC.IndexSet.create(b).freeze()}j.call(this.target,this.source,e,g,b,f||a,a)}};sc_require("ext/function");sc_require("mixins/observable");sc_require("mixins/enumerable");sc_require("system/range_observer");SC.OUT_OF_RANGE_EXCEPTION="Index out of range";SC.CoreArray={isSCArray:YES,replace:function(a,c,b){throw"replace() must be implemented to support SC.Array"},indexOf:function(e,c){var b,a=this.get("length");if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this.objectAt(b,YES)===e){return b}}return -1},lastIndexOf:function(e,c){var b,a=this.get("length");if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this.objectAt(b)===e){return b}}return -1},objectAt:function(a){if(a<0){return undefined}if(a>=this.get("length")){return undefined}return this.get(a)},"[]":function(a,b){if(b!==undefined){this.replace(0,this.get("length"),b)}return this}.property(),insertAt:function(a,b){if(a>this.get("length")){throw SC.OUT_OF_RANGE_EXCEPTION}this.replace(a,0,[b]);return this},removeAt:function(e,a){var c=0,b=[];if(typeof e===SC.T_NUMBER){if((e<0)||(e>=this.get("length"))){throw SC.OUT_OF_RANGE_EXCEPTION}if(a===undefined){this.replace(e,1,b);return this}else{e=SC.IndexSet.create(e,a)}}this.beginPropertyChanges();e.forEachRange(function(g,f){g-=c;c+=f;this.replace(g,f,b)},this);this.endPropertyChanges();return this},removeObject:function(b){var c=this.get("length")||0;while(--c>=0){var a=this.objectAt(c);if(a==b){this.removeAt(c)}}return this},removeObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.removeObject(b)},this);this.endPropertyChanges();return this},slice:function(b,e){var a=[];var c=this.get("length");if(SC.none(b)){b=0}if(SC.none(e)||(e>c)){e=c}while(b<e){a[a.length]=this.objectAt(b++)}return a},pushObject:function(a){this.insertAt(this.get("length"),a);return a},pushObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.pushObject(b)},this);this.endPropertyChanges();return this},popObject:function(){var a=this.get("length");if(a===0){return null}var b=this.objectAt(a-1);this.removeAt(a-1);return b},shiftObject:function(){if(this.get("length")===0){return null}var a=this.objectAt(0);this.removeAt(0);return a},unshiftObject:function(a){this.insertAt(0,a);return a},unshiftObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.unshiftObject(b)},this);this.endPropertyChanges();return this},isEqual:function(a){if(!a){return false}if(a==this){return true}var b=a.get("length");if(b!=this.get("length")){return false}while(--b>=0){if(!SC.isEqual(a.objectAt(b),this.objectAt(b))){return false}}return true},compact:function(){return this.without(null)},without:function(b){if(this.indexOf(b)<0){return this}var a=[];this.forEach(function(c){if(c!==b){a[a.length]=c}});return a},uniq:function(){var a=[];this.forEach(function(b){if(a.indexOf(b)<0){a[a.length]=b}});return a},flatten:function(){var a=[];this.forEach(function(b){if(b&&b.isEnumerable){a=a.pushObjects(b.flatten())}else{a.pushObject(b)}});return a},max:function(){return Math.max.apply(Math,this)},min:function(){return Math.min.apply(Math,this)},rangeObserverClass:SC.RangeObserver,contains:function(a){return this.indexOf(a)>=0},addRangeObserver:function(e,g,j,f){var a=this._array_rangeObservers;if(!a){a=this._array_rangeObservers=SC.CoreSet.create()}if(this._array_oldLength===undefined){this._array_oldLength=this.get("length")}var h=this.rangeObserverClass;var b=NO;var c=h.create(this,e,g,j,f,b);a.add(c);if(!this._array_isNotifyingRangeObservers){this._array_isNotifyingRangeObservers=YES;this.addObserver("[]",this,this._array_notifyRangeObservers)}return c},updateRangeObserver:function(b,a){return b.update(this,a)},removeRangeObserver:function(c){var b=c.destroy(this);var a=this._array_rangeObservers;if(a){a.remove(c)}return b},addArrayObservers:function(a){this._modifyObserverSet("add",a)},removeArrayObservers:function(a){this._modifyObserverSet("remove",a)},_modifyObserverSet:function(j,c){var f,b;var h=c.target||this;var a=c.willChange||"arrayWillChange";var g=c.didChange||"arrayDidChange";var e=c.context;if(typeof a==="string"){a=h[a]}if(typeof g==="string"){g=h[g]}f=this._kvo_for("_kvo_array_will_change",SC.ObserverSet);b=this._kvo_for("_kvo_array_did_change",SC.ObserverSet);f[j](h,a,e);b[j](h,g,e)},arrayContentWillChange:function(b,k,a){this._teardownContentObservers(b,k);var g,e,j,l;var h,c;var f=this._kvo_array_will_change;if(f){e=f.members;j=e.length;for(l=0;l<j;l++){g=e[l];h=g[0];c=g[1];c.call(h,b,k,a,this)}}},arrayContentDidChange:function(b,p,a){var e=this._array_rangeObservers,j,c,n;this.beginPropertyChanges();this.notifyPropertyChange("length");if(e&&e.length>0){n=this._array_rangeChanges;if(!n){n=this._array_rangeChanges=SC.IndexSet.create()}if(p===a){c=p}else{c=this.get("length")-b;if(p>a){c+=(p-a)}}n.add(b,c)}this._setupContentObservers(b,a);var h,g,m,o;var k,f;var l=this._kvo_array_did_change;if(l){if(b===undefined){b=0;p=this.get("length");a=0}g=l.members;m=g.length;for(o=0;o<m;o++){h=g[o];k=h[0];f=h[1];f.call(k,b,p,a,this)}}this.notifyPropertyChange("[]");this.endPropertyChanges();return this},_setupContentObservers:function(g,f){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var e;var b;if(c.get("length")>0){e=this.slice(g,g+f);var a=this;c.forEach(function(h){b=SC.keyFor("_kvo_content_observers",h);a._kvo_for(b).forEach(function(j){e.forEach(function(k){a._resumeChainObservingForItemWithChainObserver(k,j)})})})}},_teardownContentObservers:function(f,a){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var e;var b;if(c.get("length")>0){e=this.slice(f,f+a);c.forEach(function(g){b=SC.keyFor("_kvo_content_observers",g);e.forEach(function(h){h._kvo_for(b).forEach(function(j){j.destroyChain()})})})}},teardownEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(h){var e,c=b.get("length"),k=SC.guidFor(h),g,j,f="_kvo_enumerable_property_clones";h.notifyPropertyDidChange();for(e=0;e<c;e++){j=b.objectAt(e);g=j[f][k];g.deactivate();delete j[f][k]}},this)}return this},setupEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(f){var e,c=b.get("length");f.notifyPropertyDidChange();c=b.get("length");for(e=0;e<c;e++){this._clonePropertyChainToItem(f,b.objectAt(e))}},this)}return this},registerDependentKeyWithChain:function(f,c){var b="_kvo_enumerable_property_chains",g,e,h,a;g=this._kvo_for(b,SC.CoreSet);g.add(c);this.forEach(function(j){this._clonePropertyChainToItem(c,j)},this)},_clonePropertyChainToItem:function(c,e){var f=SC.clone(c),b="_kvo_enumerable_property_clones",a;f.object=e;a=e[b]=e[b]||{};a[SC.guidFor(c)]=f;f.activate(e)},removeDependentKeyWithChain:function(g,e){var b="_kvo_enumerable_property_chains",c="_kvo_enumerable_property_clones",h,f,j,a;this.forEach(function(k){k.removeDependentKeyWithChain(g,e);a=k[c];j=a[SC.guidFor(e)];j.deactivate(k)},this)},_resumeChainObservingForItemWithChainObserver:function(e,a){var b=SC.clone(a.next);var c=b.property;b.object=e;e.addObserver(c,b,b.propertyDidChange);if(a.root.tails){a.root.tails.pushObject(b.tail())}b.propertyDidChange();e._kvo_for(SC.keyFor("_kvo_content_observers",c)).push(b)},_addContentObserver:function(a){var b=a.next.property;this._kvo_for("_kvo_content_observed_keys",SC.CoreSet).push(b);var c=SC.keyFor("_kvo_content_observers",b);this._kvo_for(c).push(a);this._setupContentObservers(0,a.object.get("length"))},_removeContentObserver:function(a){var f,c;var e=this._kvo_content_observed_keys;var b=a.next.property;if(e.contains(b)){c=SC.keyFor("_kvo_content_observers",b);f=this._kvo_for(c);f.removeObject(a);this._teardownContentObservers(0,a.object.get("length"));if(f.length===0){this._kvo_for("_kvo_content_observed_keys").remove(b)}}},_array_notifyRangeObservers:function(){var c=this._array_rangeObservers,e=this._array_rangeChanges,b=c?c.length:0,a,f;if(b>0&&e&&e.length>0){for(a=0;a<b;a++){c[a].rangeDidChange(e)}e.clear()}}};SC.Array=SC.mixin({},SC.Enumerable,SC.CoreArray);sc_require("mixins/array");SC.supplement(Array.prototype,SC.CoreArray);SC.mixin(Array.prototype,{replace:function(b,f,e){if(this.isFrozen){throw SC.FROZEN_ERROR}var c;var a=e?(e.get?e.get("length"):e.length):0;this.arrayContentWillChange(b,f,a);if(a===0){this.splice(b,f)}else{c=[b,f].concat(e);this.splice.apply(this,c)}this.beginPropertyChanges();this.arrayContentDidChange(b,f,a);this.enumerableContentDidChange(b,f,a-f);this.endPropertyChanges();return this},unknownProperty:function(b,c){var a=this.reducedProperty(b,c);if((c!==undefined)&&a===undefined){a=this[b]=c}return a}});if(Array.prototype.indexOf===SC.CoreArray.indexOf){Array.prototype.indexOf=function(e,c){var b,a=this.length;if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this[b]===e){return b}}return -1}}if(Array.prototype.lastIndexOf===SC.CoreArray.lastIndexOf){Array.prototype.lastIndexOf=function(e,c){var b,a=this.length;if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this[b]===e){return b}}return -1}}if(!Date.now){Date.now=function(){return new Date().getTime()}}SC.String={_scs_valueForKey:function(f,h,c){var a,g,e,b=f.indexOf(":");if(b>-1){a=f.substr(b+1);f=f.substr(0,b)}g=h[f];e=h[f+"Formatter"];if(e){g=e(g,a)}else{if(a){throw"String.fmt was given a formatting string, but key `"+f+"` has no formatter! String: "+c}}return g},fmt:function(b,a){var c=0,e=undefined,f;if(a){e=a[0]}return b.replace(/%\{(.*?)\}/g,function(g,h){f=YES;if(!e){throw"Cannot use named parameters with `fmt` without a data hash. String: '"+b+"'"}return SC.String._scs_valueForKey(h,e,b)}).replace(/%@([0-9]+)?/g,function(h,g){if(f){throw"Invalid attempt to use both named parameters and indexed parameters. String: '"+b+"'"}g=g?parseInt(g,10)-1:c++;if(a[g]!==undefined){return a[g]}else{return""}})},w:function(g){var e=[],f=g.split(" "),b=f.length,c,a=0;for(a=0;a<b;++a){c=f[a];if(c.length!==0){e.push(c)}}return e}};sc_require("system/string");SC.mixin(String.prototype,{fmt:function(){return SC.String.fmt(this,arguments)},w:function(){return SC.String.w(this)}});SC.Comparable={isComparable:YES,compare:function(e,c){throw"%@.compare() is not implemented".fmt(this.toString())}};SC.Copyable={isCopyable:YES,copy:function(a){var b=SC._object_className(this.constructor);throw"%@.copy() is not implemented".fmt(b)},frozenCopy:function(){var a=this.get?this.get("isFrozen"):this.isFrozen;if(a===YES){return this}else{if(a===undefined){throw"%@ does not support freezing".fmt(this)}else{return this.copy().freeze()}}}};SC.mixin(Array.prototype,SC.Copyable);Array.prototype.copy=function(b){var c=this.slice(),a;if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}return c};SC.FROZEN_ERROR=new Error("Cannot modify a frozen object");SC.Freezable={isFreezable:YES,isFrozen:NO,freeze:function(){if(this.set){this.set("isFrozen",YES)}else{this.isFrozen=YES}return this}};SC.mixin(Array.prototype,SC.Freezable);sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.Set=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,{create:function(c){var e,b,f=SC.Set._pool,g=this.isObservable,a;if(!g&&c===undefined&&f.length>0){return f.pop()}else{e=SC.beget(this);if(g){e.initObservable()}if(c&&c.isEnumerable&&c.get("length")>0){e.isObservable=NO;if(c.isSCArray){a=c.get("length");for(b=0;b<a;b++){e.add(c.objectAt(b))}}else{if(c.isSet){a=c.length;for(b=0;b<a;b++){e.add(c[b])}}else{c.forEach(function(h){e.add(h)},this)}}e.isObservable=g}}return e},isSet:YES,length:0,firstObject:function(){return(this.length>0)?this[0]:undefined}.property(),clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}this.length=0;return this},contains:function(b){if(b===null){return NO}var a=this[SC.hashFor(b)];return(!SC.none(a)&&(a<this.length)&&(this[a]===b))},isEqual:function(a){if(!a||!a.isSet||(a.get("length")!==this.get("length"))){return NO}var b=this.get("length");while(--b>=0){if(!a.contains(this[b])){return NO}}return YES},addSetObserver:function(a){if(!this.setObservers){this.setObservers=SC.CoreSet.create()}this.setObservers.add(a)},removeSetObserver:function(a){if(!this.setObservers){return}this.setObservers.remove(a)},add:function(f){if(this.isFrozen){throw SC.FROZEN_ERROR}if(SC.none(f)){return this}var c,e=((c=f.hash)&&(typeof c==="function"))?c.call(f):SC.guidFor(f),b=this[e],a=this.length;if((b>=a)||(this[b]!==f)){this[a]=f;this[e]=a;this.length=a+1;if(this.setObservers){this.didAddItem(f)}}if(this.isObservable){this.enumerableContentDidChange()}return this},addEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.add(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.add(c[a])}}else{c.forEach(function(e){this.add(e)},this)}}if(b){this.endPropertyChanges()}return this},remove:function(g){if(this.isFrozen){throw SC.FROZEN_ERROR}if(g===null||g===undefined){return this}var c,e=(g&&(c=g.hash)&&(typeof c===SC.T_FUNCTION))?c.call(g):SC.guidFor(g),b=this[e],a=this.length,f;if((b===null||b===undefined)||(b>=a)||(this[b]!==g)){return this}delete this[e];if(b<(a-1)){f=this[b]=this[a-1];e=(f&&(c=f.hash)&&(typeof c===SC.T_FUNCTION))?c.call(f):SC.guidFor(f);this[e]=b}this.length=a-1;if(this.isObservable){this.enumerableContentDidChange()}if(this.setObservers){this.didRemoveItem(g)}return this},pop:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=(this.length>0)?this[this.length-1]:null;this.remove(a);return a},removeEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.remove(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.remove(c[a])}}else{c.forEach(function(e){this.remove(e)},this)}}if(b){this.endPropertyChanges()}return this},copy:function(){return this.constructor.create(this)},destroy:function(){this.isFrozen=NO;if(!this.isObservable){SC.Set._pool.push(this.clear())}return this},forEach:function(c,e){var b=this.length;if(!e){e=this}for(var a=0;a<b;a++){c.call(e,this[a],a,this)}return this},toString:function(){var b=this.length,a,c=[];for(a=0;a<b;a++){c[a]=this[a]}return"SC.Set<%@>".fmt(c.join(","))},didAddItem:function(c){var e=this.setObservers;if(!e){return}var b=e.length,a;for(a=0;a<b;a++){e[a].didAddItem(this,c)}},didRemoveItem:function(c){var e=this.setObservers;if(!e){return}var b=e.length,a;for(a=0;a<b;a++){e[a].didRemoveItem(this,c)}},_pool:[],isObservable:YES});SC.Set.constructor=SC.Set;SC.Set.clone=SC.Set.copy;SC.Set.push=SC.Set.unshift=SC.Set.add;SC.Set.shift=SC.Set.pop;SC.Set.addObject=SC.Set.add;SC.Set.removeObject=SC.Set.remove;SC.Set._pool=[];SC.CoreSet=SC.beget(SC.Set);SC.CoreSet.isObservable=NO;SC.CoreSet.constructor=SC.CoreSet;sc_require("mixins/observable");sc_require("system/set");SC.Observers={queue:[],addObserver:function(c,e,f,b){var a;if(typeof c==="string"){a=SC.tupleForPropertyPath(c,b)}else{a=c}if(a&&a[0].addObserver){a[0].addObserver(a[1],e,f)}else{this.queue.push([c,e,f,b])}},removeObserver:function(g,h,j,e){var c,b,a,f;a=SC.tupleForPropertyPath(g,e);if(a){a[0].removeObserver(a[1],h,j)}c=this.queue.length;b=this.queue,newQueue=undefined;while(--c>=0){f=b[c];if(f[0]!==g||f[1]!==h||f[2]!==j||f[3]!==e){if(!newQueue){newQueue=[]}newQueue.push(f)}}this.queue=newQueue||this.queue},addPendingRangeObserver:function(a){var b=this.rangeObservers;if(!b){b=this.rangeObservers=SC.CoreSet.create()}b.add(a);return this},_TMP_OUT:[],flush:function(b){var h=this.queue,e,a=h.length;if(h&&a>0){var l=(this.queue=[]);for(e=0;e<a;e++){var m=h[e];if(!m){continue}var j=SC.tupleForPropertyPath(m[0],m[3]);if(j&&j[0].addObserver){j[0].addObserver(j[1],m[1],m[2])}else{l.push(m)}}}if(b._kvo_needsRangeObserver){var k=this.rangeObservers,g=k?k.get("length"):0,c=this._TMP_OUT,f;for(e=0;e<g;e++){f=k[e];if(f.setupPending(b)){c.push(f)}}if(c.length>0){k.removeEach(c)}c.length=0;b._kvo_needsRangeObserver=false}},isObservingSuspended:0,_pending:SC.CoreSet.create(),objectHasPendingChanges:function(a){this._pending.add(a)},suspendPropertyObserving:function(){this.isObservingSuspended++},resumePropertyObserving:function(){var c;if(--this.isObservingSuspended<=0){c=this._pending;this._pending=SC.CoreSet.create();var b,a=c.length;for(b=0;b<a;b++){c[b]._notifyPropertyObservers()}c.clear();c=null}}};sc_require("core");sc_require("mixins/observable");sc_require("private/observer_queue");sc_require("mixins/array");sc_require("system/set");SC.BENCHMARK_OBJECTS=NO;SC._detect_base=function _detect_base(c,b,a){return function e(){var g=b[a],f;if(!g){throw new Error("No '"+a+"' method was found on the superclass")}if(c.isEnhancement){f=Array.prototype.slice.call(arguments,1)}else{f=arguments}return g.apply(this,f)}};SC._object_extend=function _object_extend(h,g,p){if(!g){throw"SC.Object.extend expects a non-null value.  Did you forget to 'sc_require' something?  Or were you passing a Protocol to extend() as if it were a mixin?"}h._kvo_cloned=null;var A,o,w,f,j=h.concatenatedProperties,m=SC.K,c,b;o=(j)?j.length:0;var a=(o>0)?{}:null;while(--o>=0){A=j[o];c=h[A];b=g[A];if(c){if(!(c instanceof Array)){c=SC.$A(c)}a[A]=(b)?c.concat(b):b}else{if(!(b instanceof Array)){b=SC.$A(b)}a[A]=b}}var z=h._bindings,n=NO,x=h._observers,y=NO,k=h._properties,e=NO,t,l,q,s;var v=h.outlets,u=NO;if(g.outlets){v=(v||SC.EMPTY_ARRAY).concat(g.outlets);u=YES}for(A in g){if(A==="_kvo_cloned"){continue}if(!g.hasOwnProperty(A)){continue}s=(a.hasOwnProperty(A)?a[A]:null)||g[A];if(A.length>7&&A.slice(-7)==="Binding"){if(!n){z=(z||SC.EMPTY_ARRAY).slice();n=YES}if(z===null){z=(h._bindings||SC.EMPTY_ARRAY).slice()}z[z.length]=A}else{if(s&&(s instanceof Function)){if(!s.superclass&&(s!==(f=h[A]))){s.superclass=f||m;s.base=p?SC._detect_base(s,p,A):f||m}if(s.propertyPaths){if(!y){x=(x||SC.EMPTY_ARRAY).slice();y=YES}x[x.length]=A}if(t=s.localPropertyPaths){l=t.length;while(--l>=0){q=h._kvo_for(SC.keyFor("_kvo_local",t[l]),SC.CoreSet);q.add(A);h._kvo_for("_kvo_observed_keys",SC.CoreSet).add(t[l])}}if(s.dependentKeys){if(!e){k=(k||SC.EMPTY_ARRAY).slice();e=YES}k[k.length]=A}if(s.autoconfiguredOutlet){if(!u){v=(v||SC.EMPTY_ARRAY).slice();u=YES}v[v.length]=A}if(s.isEnhancement){s=SC._enhance(h[A]||m,s)}}}h[A]=s}if(g.hasOwnProperty("toString")){A="toString";s=(a.hasOwnProperty(A)?a[A]:null)||g[A];if(!s.superclass&&(s!==(f=h[A]))){s.superclass=s.base=f||m}h[A]=s}h._bindings=z||[];h._observers=x||[];h._properties=k||[];h.outlets=v||[];return h};SC._enhance=function(b,a){return function(){var e=Array.prototype.slice.call(arguments,0),c=this;e.unshift(function(){return b.apply(c,arguments)});return a.apply(this,e)}};SC.Object=function(a){this.__sc_super__=SC.Object.prototype;return this._object_init(a)};SC.mixin(SC.Object,{mixin:function(b){var a=arguments.length,c;for(c=0;c<a;c++){SC.mixin(this,arguments[c])}return this},superclass:null,extend:function(f){var e=SC.BENCHMARK_OBJECTS;if(e){SC.Benchmark.start("SC.Object.extend")}var h,c=function(j){this.__sc_super__=c.prototype;return this._object_init(j)};for(h in this){if(!this.hasOwnProperty(h)){continue}c[h]=this[h]}if(this.hasOwnProperty("toString")){c.toString=this.toString}c.superclass=this;c.__sc_super__=this.prototype;SC.generateGuid(c,"sc");c.subclasses=SC.Set.create();this.subclasses.add(c);var g=(c.prototype=SC.beget(this.prototype)),b,a=arguments.length;for(b=0;b<a;b++){SC._object_extend(g,arguments[b],c.__sc_super__)}g.constructor=c;if(e){SC.Benchmark.end("SC.Object.extend")}return c},reopen:function(b){var a;a=SC._object_extend(this.prototype,b,this.__sc_super__);if(this.subclasses){this.subclasses.forEach(function(e,c){var f,g;for(f in b){if(!b.hasOwnProperty(f)){continue}g=b[f];if(e.prototype.hasOwnProperty(f)){delete b[f]}if(g&&(g instanceof Function)&&(g.isEnhancement)){delete b[f]}}e.reopen(b)},this)}return a},create:function(){var b=this,a=new b(arguments);if(SC.ObjectDesigner){SC.ObjectDesigner.didCreateObject(a,SC.$A(arguments))}return a},isClass:YES,subclasses:SC.Set.create(),toString:function(){return SC._object_className(this)},subclassOf:function(b){if(this===b){return NO}var a=this;while(a=a.superclass){if(a===b){return YES}}return NO},hasSubclass:function(a){return(a&&a.subclassOf)?a.subclassOf(this):NO},kindOf:function(a){return(this===a)||this.subclassOf(a)},design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ObjectDesigner){SC.ObjectDesigner.didLoadDesign(a,this,SC.A(arguments))}return a}});SC.Object.prototype={_kvo_enabled:YES,_object_init:function(c){var b,a=(c)?c.length:0;for(b=0;b<a;b++){SC._object_extend(this,c[b],this.__sc_super__)}SC.generateGuid(this,"sc");this.init();var e=this.initMixin;a=(e)?e.length:0;for(b=0;b<a;b++){e[b].call(this)}return this},mixin:function(){var b,a=arguments.length,c;for(b=0;b<a;b++){SC._object_extend(this,arguments[b])}this._observableInited=NO;this.initObservable();for(b=0;b<a;b++){c=arguments[b].initMixin;if(c){c.call(this)}}return this},init:function(){this.initObservable();return this},isDestroyed:NO,destroy:function(){if(this.get("isDestroyed")){return this}this.set("isDestroyed",YES);var b,c=this.destroyMixin,a=(c)?c.length:0;for(b=0;b<a;b++){c[b].call(this)}this.bindings.invoke("disconnect");this.bindings=null;return this},isObject:true,respondsTo:function(a){return !!(this[a] instanceof Function)},tryToPerform:function(b,c,a){return this.respondsTo(b)&&(this[b](c,a)!==NO)},superclass:function(b){var a=arguments.callee.caller;if(!a){throw"superclass cannot determine the caller method"}return a.superclass?a.superclass.apply(this,arguments):null},instanceOf:function(a){return this.constructor===a},kindOf:function(a){return this.constructor.kindOf(a)},toString:function(){if(!this._object_toString){var a=SC._object_className(this.constructor),b=a+":"+SC.guidFor(this);if(a){this._object_toString=b}else{return b}}return this._object_toString},awake:function(){var e=this.outlets,b,a,c;for(b=0,a=e.length;b<a;++b){c=e[b];this.get(c)}this.bindings.invoke("sync")},invokeOnce:function(a){SC.RunLoop.currentRunLoop.invokeOnce(this,a);return this},invokeLast:function(a){SC.RunLoop.currentRunLoop.invokeLast(this,a);return this},invokeNext:function(a){SC.RunLoop.currentRunLoop.invokeNext(this,a);return this},concatenatedProperties:["concatenatedProperties","initMixin","destroyMixin"]};SC.Object.prototype.constructor=SC.Object;SC.mixin(SC.Object.prototype,SC.Observable);function findClassNames(){if(SC._object_foundObjectClassNames){return}SC._object_foundObjectClassNames=true;var b=[],c=false;var a=function(f,g,l){var n,k,j;l--;if(b.indexOf(g)>=0){return}b.push(g);for(var h in g){if(h=="__scope__"){continue}if(h=="superclass"){continue}if(h=="__SC__"){h="SC"}if(!h.match(/^[A-Z0-9]/)){continue}if(h=="SC"){if(c){continue}c=true}n=(f)?[f,h].join("."):h;k=g[h];try{j=SC.typeOf(k)}catch(m){break}switch(j){case SC.T_CLASS:if(!k._object_className){k._object_className=n}if(l>=0){a(n,k,l)}break;case SC.T_OBJECT:if(l>=0){a(n,k,l)}break;case SC.T_HASH:if(((f)||(n==="SC"))&&(l>=0)){a(n,k,l)}break;default:break}}};window.__SC__=SC;a(null,window,2)}SC.instanceOf=function(a,b){return !!(a&&a.constructor===b)};SC.kindOf=function(a,b){if(a&&!a.isClass){a=a.constructor}return !!(a&&a.kindOf&&a.kindOf(b))};SC._object_className=function(b){if(SC.isReady===NO){return""}if(!b._object_className){findClassNames()}if(b._object_className){return b._object_className}var a=b;while(a&&!a._object_className){a=a.superclass}return(a&&a._object_className)?a._object_className:"Anonymous"};sc_require("system/object");SC._PropertyChain=SC.Object.extend({object:null,property:null,target:null,toInvalidate:null,nextProperty:null,activate:function(b){var a=this.get("object"),c=this.get("property"),e;if(!b){b=this.get("target")}if(a&&a!==b){this.deactivate()}this.set("object",b);if(b&&c!=="@each"){b.registerDependentKeyWithChain(c,this)}if(this.next){e=b?b.get(c):undefined;this.next.activate(e)}return this},deactivate:function(){var a=this.get("object"),b=this.get("property");if(a){a.removeDependentKeyWithChain(b,this)}if(this.next){this.next.deactivate()}return this},notifyPropertyDidChange:function(){var e=this.get("target"),c=this.get("toInvalidate"),b,a;e.propertyDidChange(c);if(this.next){b=this.get("object");a=b.get(this.get("property"));this.next.activate(a)}}});SC._PropertyChain.createChain=function(j,h,f){var g=j.split(".");var a=g.length,e=1;var b=SC._PropertyChain.create({property:g[0],target:h,toInvalidate:f,nextProperty:g[1]});b.set("length",a);var c=b;while(--a>=1){c=c.next=SC._PropertyChain.create({property:g[e],target:h,toInvalidate:f,nextProperty:g[++e]});c.set("length",a)}return b};sc_require("ext/function");sc_require("system/object");SC.LOG_BINDINGS=NO;SC.BENCHMARK_BINDING_NOTIFICATIONS=NO;SC.BENCHMARK_BINDING_SETUP=NO;SC.MULTIPLE_PLACEHOLDER="@@MULT@@";SC.NULL_PLACEHOLDER="@@NULL@@";SC.EMPTY_PLACEHOLDER="@@EMPTY@@";SC.Binding={beget:function(b){var a=SC.beget(this);a.parentBinding=this;if(b!==undefined){a=a.from(b)}return a},builder:function(){var b=this,a=function(c){return b.beget().from(c)};a.beget=function(){return b.beget()};return a},from:function(b,a){if(!b){return this}var c=(this===SC.Binding)?this.beget():this;c._fromPropertyPath=b;c._fromRoot=a;c._fromTuple=null;return c},to:function(b,a){var c=(this===SC.Binding)?this.beget():this;c._toPropertyPath=b;c._toRoot=a;c._toTuple=null;return c},connect:function(){if(this.isConnected){return this}this.isConnected=YES;this._connectionPending=YES;this._syncOnConnect=YES;SC.Binding._connectQueue.add(this);if(!SC.RunLoop.isRunLoopInProgress()){this._scheduleSync()}return this},_connect:function(){if(!this._connectionPending){return}this._connectionPending=NO;var c,a,b=SC.BENCHMARK_BINDING_SETUP;if(b){SC.Benchmark.start("SC.Binding.connect()")}c=this._fromPropertyPath;a=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);if(!a){a=this._toRoot}}else{if(c.indexOf("*")===0){c=[this._fromRoot||this._toRoot,c.slice(1)];a=null}}}this._fromObserverData=[c,this,this.fromPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){c=this._toPropertyPath;a=this._toRoot;this._toObserverData=[c,this,this.toPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._toObserverData)}if(b){SC.Benchmark.end("SC.Binding.connect()")}if(this._syncOnConnect){this._syncOnConnect=NO;if(b){SC.Benchmark.start("SC.Binding.connect().sync")}this.sync();if(b){SC.Benchmark.end("SC.Binding.connect().sync")}}},disconnect:function(){if(!this.isConnected){return this}if(this._connectionPending){this._connectionPending=NO}else{SC.Observers.removeObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){SC.Observers.removeObserver.apply(SC.Observers,this._toObserverData)}}this.isConnected=NO;return this},fromPropertyDidChange:function(c,b){var a=c?c.get(b):null;if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this);this._scheduleSync()}},toPropertyDidChange:function(c,b){if(this._oneWay){return}var a=c.get(b);if(a!==this._transformedBindingValue){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this);this._scheduleSync()}},_scheduleSync:function(){if(SC.RunLoop.isRunLoopInProgress()||SC.Binding._syncScheduled){return}SC.Binding._syncScheduled=YES;setTimeout(function(){SC.run();SC.Binding._syncScheduled=NO},1)},_setBindingValue:function(b,a){this._bindingSource=b;this._bindingKey=a},_computeBindingValue:function(){var h=this._bindingSource,f=this._bindingKey,c,b;this._bindingValue=c=(h?h.getPath(f):null);var g=this._transforms;if(g){var a=g.length,e;for(b=0;b<a;b++){e=g[b];c=e(c,this)}}if(this._noError&&SC.typeOf(c)===SC.T_ERROR){c=null}this._transformedBindingValue=c},_connectQueue:SC.CoreSet.create(),_alternateConnectQueue:SC.CoreSet.create(),_changeQueue:SC.CoreSet.create(),_alternateChangeQueue:SC.CoreSet.create(),_changePending:NO,flushPendingChanges:function(){if(this._isFlushing){return NO}this._isFlushing=YES;SC.Observers.suspendPropertyObserving();var b=NO,c=SC.LOG_BINDINGS,a,e;while((a=this._connectQueue).length>0){this._connectQueue=this._alternateConnectQueue;this._alternateConnectQueue=a;while(e=a.pop()){e._connect()}}while((a=this._changeQueue).length>0){if(c){SC.Logger.log("Begin: Trigger changed bindings")}b=YES;this._changeQueue=this._alternateChangeQueue;this._alternateChangeQueue=a;while(e=a.pop()){e.applyBindingValue()}if(c){SC.Logger.log("End: Trigger changed bindings")}}this._isFlushing=NO;SC.Observers.resumePropertyObserving();return b},applyBindingValue:function(){this._changePending=NO;this._computeBindingTargets();this._computeBindingValue();var a=this._bindingValue,b=this._transformedBindingValue,c=SC.BENCHMARK_BINDING_NOTIFICATIONS,e=SC.LOG_BINDINGS;if(!this._oneWay&&this._fromTarget){if(e){SC.Logger.log("%@: %@ -> %@".fmt(this,a,b))}if(c){SC.Benchmark.start(this.toString()+"->")}this._fromTarget.setPathIfChanged(this._fromPropertyKey,a);if(c){SC.Benchmark.end(this.toString()+"->")}}if(this._toTarget){if(e){SC.Logger.log("%@: %@ <- %@".fmt(this,a,b))}if(c){SC.Benchmark.start(this.toString()+"<-")}this._toTarget.setPathIfChanged(this._toPropertyKey,b);if(c){SC.Benchmark.start(this.toString()+"<-")}}},sync:function(){if(!this.isConnected){return this}if(this._connectionPending){this._syncOnConnect=YES}else{this._computeBindingTargets();var c=this._fromTarget,b=this._fromPropertyKey;if(!c||!b){return this}if(!c.isObservable){SC.Logger.warn("Cannot bind '%@' to property '%@' on non-observable '%@'".fmt(this._toPropertyPath,b,c));return this}var a=c.getPath(b);if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this)}}return this},_syncOnConnect:NO,_computeBindingTargets:function(){if(!this._fromTarget){var c,b,a;c=this._fromPropertyPath;b=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);if(!b){b=this._toRoot}}else{if(c.indexOf("*")===0){c=[b||this._toRoot,c.slice(1)];b=null}}}a=SC.tupleForPropertyPath(c,b);if(a){this._fromTarget=a[0];this._fromPropertyKey=a[1]}}if(!this._toTarget){c=this._toPropertyPath;b=this._toRoot;a=SC.tupleForPropertyPath(c,b);if(a){this._toTarget=a[0];this._toPropertyKey=a[1]}}},oneWay:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._oneWay=(a===undefined)?YES:a;return b},transform:function(b){var c=(this===SC.Binding)?this.beget():this;var a=c._transforms;if(a&&(a===c.parentBinding._transform)){a=c._transforms=a.slice()}if(!a){a=c._transforms=[]}a.push(b);return c},resetTransforms:function(){var a=(this===SC.Binding)?this.beget():this;a._transforms=null;return a},noError:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._noError=(a===undefined)?YES:a;return b},single:function(b,a){if(a===undefined){a=SC.MULTIPLE_PLACEHOLDER}return this.from(b).transform(function(f,e){if(f&&f.isEnumerable){var c=f.get("length");f=(c>1)?a:(c<=0)?null:f.firstObject()}return f})},notEmpty:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(e,c){if(SC.none(e)||(e==="")||(SC.isArray(e)&&(e.get?e.get("length"):e.length)===0)){e=a}return e})},notNull:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(e,c){if(SC.none(e)){e=a}return e})},multiple:function(a){return this.from(a).transform(function(b){if(!SC.isArray(b)){b=(b==null)?[]:[b]}return b})},bool:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return(c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b})},and:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,and:function(){return(this.get("valueA")&&this.get("valueB"))}.property("valueA","valueB").cacheable()});return this.from("and",c).oneWay()},or:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,or:function(){return(this.get("valueA")||this.get("valueB"))}.property("valueA","valueB").cacheable()});return this.from("or",c).oneWay()},not:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return !((c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b)})},isNull:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);return(c===SC.T_ERROR)?b:SC.none(b)})},toString:function(){var c=this._fromRoot?"<%@>:%@".fmt(this._fromRoot,this._fromPropertyPath):this._fromPropertyPath;var b=this._toRoot?"<%@>:%@".fmt(this._toRoot,this._toPropertyPath):this._toPropertyPath;var a=this._oneWay?"[oneWay]":"";return"SC.Binding%@(%@ -> %@)%@".fmt(SC.guidFor(this),c,b,a)}};SC.binding=function(b,a){return SC.Binding.from(b,a)};sc_require("ext/function");SC.Error=SC.Object.extend({code:-1,message:"",errorValue:null,errorObject:function(){return this}.property().cacheable(),label:null,toString:function(){return"SC.Error:%@:%@ (%@)".fmt(SC.guidFor(this),this.get("message"),this.get("code"))},isError:YES});SC.Error.desc=function(e,a,f,c){var b={message:e};if(a!==undefined){b.label=a}if(c!==undefined){b.code=c}if(f!==undefined){b.errorValue=f}return this.create(b)};SC.$error=function(b,a,e,f){return SC.Error.desc(b,a,e,f)};SC.ok=function(a){return(a!==false)&&!(a&&a.isError)};SC.$ok=SC.ok;SC.val=function(a){if(a&&a.isError){return a.get?a.get("errorValue"):null}else{return a}};SC.$val=SC.val;SC.Error.HAS_MULTIPLE_VALUES=-100;sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.IndexSet=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,SC.Copyable,{_sc_sliceContent:function(f){if(f.length<1000){return f.slice()}var e=0,a=[],b=f[0];while(b!==0){a[e]=b;e=(b<0)?(0-b):b;b=f[e]}a[e]=0;this._hint(0,e,a);return a},create:function(c,b){var a=SC.beget(this);a.initObservable();a.registerDependentKey("min","[]");if(c&&c.isIndexSet){a._content=this._sc_sliceContent(c._content);a.max=c.max;a.length=c.length;a.source=c.source}else{a._content=[0];if(c!==undefined){a.add(c,b)}}return a},isIndexSet:YES,HINT_SIZE:256,length:0,max:0,min:function(){var a=this._content,b=a[0];return(b===0)?-1:(b>0)?0:Math.abs(b)}.property("[]").cacheable(),firstObject:function(){return(this.get("length")>0)?this.get("min"):undefined}.property(),rangeStartForIndex:function(c){var g=this._content,a=this.get("max"),b,f,e;if(c>=a){return a}if(Math.abs(g[c])>c){return c}e=c-(c%SC.IndexSet.HINT_SIZE);b=g[e];if(b<0||b>c){b=e}f=g[b];if(f===undefined){f=this.rangeStartForIndex(b)}else{f=Math.abs(f)}while(f<c){b=f;f=Math.abs(g[b])}return b},isEqual:function(c){if(c===this){return YES}if(!c||!c.isIndexSet||(c.max!==this.max)||(c.length!==this.length)){return NO}var f=this._content,b=c._content,e=0,a=f[e];do{if(b[e]!==a){return NO}e=Math.abs(a);a=f[e]}while(e!==0);return YES},indexBefore:function(b){if(b===0){return -1}b--;var c=this._content,a=this.get("max"),e=this.rangeStartForIndex(b);if(!c){return null}while((e===a)||(c[e]<0)){if(e===0){return -1}b=e-1;e=this.rangeStartForIndex(b)}return b},indexAfter:function(b){var e=this._content,a=this.get("max"),f,c;if(!e||(b>=a)){return -1}b++;f=this.rangeStartForIndex(b);c=e[f];while(c<0){if(c===0){return -1}b=f=Math.abs(c);c=e[f]}return b},contains:function(h,c){var b,g,a,f,e;if(c===undefined){if(h===null||h===undefined){return NO}if(typeof h===SC.T_NUMBER){c=1}else{if(h&&h.isIndexSet){if(h===this){return YES}b=h._content;g=0;a=b[g];while(a!==0){if((a>0)&&!this.contains(g,a-g)){return NO}g=Math.abs(a);a=b[g]}return YES}else{c=h.length;h=h.start}}}f=this.rangeStartForIndex(h);e=this._content[f];return(e>0)&&(f<=h)&&(e>=(h+c))},intersects:function(g,c){var b,f,a,e;if(c===undefined){if(typeof g===SC.T_NUMBER){c=1}else{if(g&&g.isIndexSet){if(g===this){return YES}b=g._content;f=0;a=b[f];while(a!==0){if((a>0)&&this.intersects(f,a-f)){return YES}f=Math.abs(a);a=b[f]}return NO}else{c=g.length;g=g.start}}}f=this.rangeStartForIndex(g);b=this._content;a=b[f];e=g+c;while(f<e){if(a===0){return NO}if((a>0)&&(a>g)){return YES}f=Math.abs(a);a=b[f]}return NO},without:function(b,a){if(b===this){return SC.IndexSet.create()}return this.clone().remove(b,a)},replace:function(c,a){if(a===undefined){if(typeof c===SC.T_NUMBER){a=1}else{if(c&&c.isIndexSet){this._content=this._sc_sliceContent(c._content);this.beginPropertyChanges().set("max",c.max).set("length",c.length).set("source",c.source).enumerableContentDidChange();this.endPropertyChanges();return this}else{a=c.length;c=c.start}}}var b=this.length;this._content.length=1;this._content[0]=0;this.length=this.max=0;return this.add(c,a)},add:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}var f,k,e;if(a&&a.isIndexSet){f=a._content;if(!f){return this}k=0;e=f[0];while(e!==0){if(e>0){this.add(k,e-k)}k=e<0?0-e:e;e=f[k]}return this}else{if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{b=a.length;a=a.start}}}else{if(b===null){b=1}}}if(b<=0){return this}var g=this.get("max"),c=g,j,h;f=this._content;if(a===g){if(a>0){k=this.rangeStartForIndex(a-1);e=f[k];if(e>0){delete f[g];f[k]=g=a+b;a=k}else{f[g]=g=a+b}}else{f[a]=g=b}f[g]=0;this.set("max",g);this.set("length",this.length+b);b=g-a}else{if(a>g){f[g]=0-a;f[a]=a+b;f[a+b]=0;this.set("max",a+b);this.set("length",this.length+b);b=a+b-g;a=g}else{k=this.rangeStartForIndex(a);e=f[k];g=a+b;j=0;if((a>0)&&(k===a)&&(e<=0)){k=this.rangeStartForIndex(a-1);e=f[k]}if(e<0){f[k]=0-a;if(Math.abs(e)>g){f[a]=0-g;f[g]=e}else{f[a]=e}}else{a=k;if(e>g){g=e}}k=a;while(k<g){h=f[k];if(h===0){f[g]=0;e=g;j+=g-k}else{e=Math.abs(h);if(e>g){f[g]=h;e=g}if(h<0){j+=e-k}}delete f[k];k=e}if((k=f[g])>0){delete f[g];g=k}f[a]=g;if(g>c){this.set("max",g)}this.set("length",this.get("length")+j);b=g-a}}this._hint(a,b);if(j!==0){this.enumerableContentDidChange()}return this},remove:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{if(a.isIndexSet){a.forEachRange(this.remove,this);return this}else{b=a.length;a=a.start}}}}if(b<=0){return this}var g=this.get("max"),c=g,f=this._content,l,e,k,h,j;if(a>=g){return this}l=this.rangeStartForIndex(a);e=f[l];j=a+b;k=0;if((a>0)&&(l===a)&&(e>0)){l=this.rangeStartForIndex(a-1);e=f[l]}if(e>0){f[l]=a;if(e>j){f[a]=j;f[j]=e}else{f[a]=e}}else{a=l;e=Math.abs(e);if(e>j){j=e}}l=a;while(l<j){h=f[l];if(h===0){f[j]=0;e=j}else{e=Math.abs(h);if(e>j){f[j]=h;e=j}if(h>0){k+=e-l}}delete f[l];l=e}if((l=f[j])<0){delete f[j];j=Math.abs(l)}if(f[j]===0){delete f[j];f[a]=0;this.set("max",a)}else{f[a]=0-j}this.set("length",this.get("length")-k);b=j-a;this._hint(a,b);if(k!==0){this.enumerableContentDidChange()}return this},_hint:function(h,e,c){if(c===undefined){c=this._content}var b=SC.IndexSet.HINT_SIZE,a=Math.abs(c[h]),g=h-(h%b)+b,f=h+e;while(g<f){while((a!==0)&&(a<=g)){h=a;a=Math.abs(c[h])}if(a===0){delete c[g]}else{if(g!==h){c[g]=h}}g+=b}},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=this.length;this._content.length=1;this._content[0]=0;this.set("length",0).set("max",0);if(a>0){this.enumerableContentDidChange()}},addEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.add(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.add(c)},this)}}this.endPropertyChanges();return this},removeEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.remove(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.remove(c)},this)}}this.endPropertyChanges();return this},clone:function(){return SC.IndexSet.create(this)},inspect:function(){var f=this._content,b=f.length,a=0,c=[],e;for(a=0;a<b;a++){e=f[a];if(e!==undefined){c.push("%@:%@".fmt(a,e))}}return"SC.IndexSet<%@>".fmt(c.join(" , "))},forEachRange:function(g,e){var b=this._content,f=0,a=b[f],c=this.source;if(e===undefined){e=null}while(a!==0){if(a>0){g.call(e,f,a-f,this,c)}f=Math.abs(a);a=b[f]}return this},forEachIn:function(b,c,l,g){var h=this._content,k=0,j=0,e=b+c,a=this.source,f=h[k];if(g===undefined){g=null}while(f!==0){if(k<b){k=b}while((k<f)&&(k<e)){l.call(g,k++,j++,this,a)}if(k>=e){k=f=0}else{k=Math.abs(f);f=h[k]}}return this},lengthIn:function(h,e){var a=0;if(e===undefined){if(h===null||h===undefined){return 0}else{if(typeof h===SC.T_NUMBER){e=1}else{if(h.isIndexSet){h.forEachRange(function(k,j){a+=this.lengthIn(k,j)},this);return a}else{e=h.length;h=h.start}}}}if(this.get("length")===0){return 0}var c=this._content,g=0,b=c[g],f=h+e;while(g<f&&b!==0){if(b>0){a+=(b>f)?f-g:b-g}g=Math.abs(b);b=c[g]}return a},source:null,indexOf:function(e,c){var g=this.source;if(!g){throw"%@.indexOf() requires source".fmt(this)}var b=g.get("length"),f=this._content,h=f[0]<0?Math.abs(f[0]):0,a;while(h>=0&&h<b){a=g.indexOf(e,h);if(a<0){return -1}if(this.contains(a)){return a}h=a+1}return -1},lastIndexOf:function(e,c){var f=this.source;if(!f){throw"%@.lastIndexOf() requires source".fmt(this)}var b=f.get("length"),g=this.max-1,a;if(g>=b){g=b-1}while(g>=0){a=f.lastIndexOf(e,g);if(a<0){return -1}if(this.contains(a)){return a}g=a+1}return -1},forEachObject:function(h,f){var e=this.source;if(!e){throw"%@.forEachObject() requires source".fmt(this)}var c=this._content,g=0,a=0,b=c[g];if(f===undefined){f=null}while(b!==0){while(g<b){h.call(f,e.objectAt(g),g,e,this);g++}g=Math.abs(b);b=c[g]}return this},addObject:function(c,e){var f=this.source;if(!f){throw"%@.addObject() requires source".fmt(this)}var b=f.get("length"),g=0,a;while(g>=0&&g<b){a=f.indexOf(c,g);if(a>=0){this.add(a);if(e){return this}g=a++}else{return this}}return this},addObjects:function(b,a){b.forEach(function(c){this.addObject(c,a)},this);return this},removeObject:function(c,e){var f=this.source;if(!f){throw"%@.removeObject() requires source".fmt(this)}var b=f.get("length"),g=0,a;while(g>=0&&g<b){a=f.indexOf(c,g);if(a>=0){this.remove(a);if(e){return this}g=a+1}else{return this}}return this},removeObjects:function(b,a){b.forEach(function(c){this.removeObject(c,a)},this);return this},LOG_OBSERVING:NO,forEach:function(h,f){var c=this._content,g=0,a=0,e=this.source,b=c[g];if(f===undefined){f=null}while(b!==0){while(g<b){h.call(f,g++,a++,this,e)}g=Math.abs(b);b=c[g]}return this},nextObject:function(g,b,c){var f=this._content,e=c.next,a=this.get("max");if(b===null){b=e=0}else{if(b>=a){delete c.next;return null}else{b++}}if(b===e){do{b=Math.abs(e);e=f[b]}while(e<0);c.next=e}return b},toString:function(){var a=[];this.forEachRange(function(c,b){a.push(b===1?c:"%@..%@".fmt(c,c+b-1))},this);return"SC.IndexSet<%@>".fmt(a.join(","))},max:0});SC.IndexSet.slice=SC.IndexSet.copy=SC.IndexSet.clone;SC.IndexSet.EMPTY=SC.IndexSet.create().freeze();SC.json={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}};if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());sc_require("ext/function");SC.LOGGER_LOG_DELIMITER=", ";SC.LOGGER_LOG_ERROR="ERROR: ";SC.LOGGER_LOG_INFO="INFO:  ";SC.LOGGER_LOG_WARN="WARN:  ";SC.LOGGER_LOG_DEBUG="DEBUG: ";SC.LOGGER_LOG_GROUP_HEADER="** %@";SC.LOGGER_LOG_GROUP_INDENTATION="    ";SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX="%@:  ";SC.LOGGER_LEVEL_DEBUG="debug";SC.LOGGER_LEVEL_INFO="info";SC.LOGGER_LEVEL_WARN="warn";SC.LOGGER_LEVEL_ERROR="error";SC.LOGGER_LEVEL_NONE="none";SC.Logger=SC.Object.create({messagePrefix:null,outputMessagePrefix:null,recordedMessagePrefix:null,logOutputLevel:null,logRecordingLevel:SC.LOGGER_LEVEL_NONE,recordedLogMessages:null,recordedLogMessagesMaximumLength:500,recordedLogMessagesPruningMinimumLength:100,debugEnabled:NO,exists:function(){return !SC.none(this.get("reporter"))}.property("reporter").cacheable(),fallBackOnAlert:NO,reporter:console,debug:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_DEBUG,YES,a,arguments)},debugWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_DEBUG,NO,null,arguments)},debugGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_DEBUG,a,arguments)},debugGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_DEBUG)},info:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_INFO,YES,a,arguments)},infoWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_INFO,NO,null,arguments)},infoGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_INFO,a,arguments)},infoGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_INFO)},warn:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_WARN,YES,a,arguments)},warnWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_WARN,NO,null,arguments)},warnGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_WARN,a,arguments)},warnGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_WARN)},error:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_ERROR,YES,a,arguments)},errorWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_ERROR,NO,null,arguments)},errorGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_ERROR,a,arguments)},errorGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_ERROR)},outputRecordedLogMessages:function(o){if(!this.get("exists")){return}var t=this.get("reporter"),l=this.get("recordedLogMessages"),a=0,e=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,s,p,b,c,h,k,f,g,v,n,m,q,u;if(l){for(s=0,p=l.length;s<p;++s){b=l[s];c=b.type;if(o){h=e.fmt(b.timestamp.toUTCString())}k=b.message;if(k){f=b.originalArguments;this._outputMessage(c,h,a,k,f)}else{n=b.indentation;v=b.title;m=n-a;if(t.group){if(Math.abs(m)>1){for(q=0,u=(m-1);q<u;++q){if(m>0){t.group()}else{t.groupEnd()}}}if(m>0){g=h?h:"";g+=v;t.group(g)}else{t.groupEnd()}}else{if(m>0){this._outputGroup(c,h,n-1,v)}}a=n}}}},stringifyRecordedLogMessages:function(){var k="",g=this.get("recordedLogMessages"),n=0,j=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,e=this._LOG_FALLBACK_PREFIX_MAPPING,c=SC.LOGGER_LOG_GROUP_HEADER,f,a,p,m,t,s,h,q,o,l,b;if(g){for(f=0,a=g.length;f<a;++f){p=g[f];m=p.type;h=j.fmt(p.timestamp.toUTCString());h+=e[m]||"";t=p.message;if(t){s=p.originalArguments;q=h+this._indentation(n);q+=s?this._argumentsToString(s):t}else{l=p.indentation;o=p.title;b=l-n;if(b>0){q=h+this._indentation(n)+c.fmt(o)}n=l}k+=q+"\n"}}return k},log:function(){var a=this.get("reporter"),c=arguments[0],e=this.get("messagePrefix"),f=this.get("outputMessagePrefix"),b=NO;if(c&&SC.typeOf(c)===SC.T_STRING){if(e||f){if(e){c=e+c}if(f){c=f+c}arguments[0]=c}}if(this.get("exists")){if(typeof a.log==="function"){a.log.apply(a,arguments);b=YES}else{if(a.log){a.log(this._argumentsToArray(arguments));b=YES}}}if(!b&&this.get("fallBackOnAlert")){if(this.get("exists")&&(typeof a.alert==="function")){a.alert(arguments);b=YES}else{alert(arguments);b=YES}}return b},group:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.group==="function")){a.group(b)}},groupEnd:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.groupEnd==="function")){a.groupEnd()}},dir:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dir==="function")){a.dir.apply(a,arguments)}else{this.log.apply(this,arguments)}},dirxml:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dirxml==="function")){a.dirxml.apply(a,arguments)}else{this.log.apply(this,arguments)}},profile:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profile==="function")){a.profile(b);return YES}return NO},profileEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profileEnd==="function")){a.profileEnd(b);return YES}return NO},time:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.time==="function")){a.time(b);return YES}return NO},timeEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.timeEnd==="function")){a.timeEnd(b);return YES}return NO},trace:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.trace==="function")){a.trace();return YES}return NO},init:function(){arguments.callee.base.apply(this,arguments);if(!this.get("logOutputLevel")){if(SC.buildMode==="debug"){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}else{this.set("logOutputLevel",SC.LOGGER_LEVEL_INFO)}}this.debugEnabledDidChange()},debugEnabledDidChange:function(){if(this.get("debugEnabled")){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}}.observes("debugEnabled"),_handleMessage:function(m,o,q,p){var a=this._shouldOutputType(m),e=this._shouldRecordType(m),f,g,k,l,b,n,j,c,h;if(!(a||e)){return}f=(p&&p.length>1);if(o&&(SC.none(q)||(typeof q!=="string"))){o=NO}if(o){if(f){l=[];for(g=1,k=p.length;g<k;++g){l.push(p[g])}q=q.fmt.apply(q,l)}}j=this.get("messagePrefix");if(j){q=j+q}if(a){c=this.get("outputMessagePrefix");l=o?null:p;this._outputMessage(m,null,this._outputIndentationLevel,(c?c+q:q),l)}if(e){h=this.get("recordedMessagePrefix");n={type:m,message:q?(h?h+q:q):YES,timestamp:new Date()};if(!o&&f){n.originalArguments=p}this._addRecordedMessageEntry(n)}},_handleGroup:function(m,o,s){var a=this._shouldOutputType(m),f=this._shouldRecordType(m),g,h,k,l,q,e,c,j,b,n,p;if(!(a||f)){return}g=(s&&s.length>1);if(o&&g){l=[];for(h=1,k=s.length;h<k;++h){l.push(s[h])}o=o.fmt.apply(o,l)}if(a){this._outputGroup(m,null,this._outputIndentationLevel,o);this._outputIndentationLevel++}if(f){n=++this._recordingIndentationLevel;p={type:m,indentation:n,beginGroup:YES,title:o,timestamp:new Date()};this._addRecordedMessageEntry(p)}},_handleGroupEnd:function(e){var h=this._shouldOutputType(e),c=this._shouldRecordType(e),a,g,b,f;if(!(h||c)){return}if(h){this._outputIndentationLevel--;if(this.get("exists")){a=this.get("reporter");g=a.groupEnd;if(g){g.call(a)}}}if(c){b=--this._recordingIndentationLevel;f={type:e,indentation:b,timestamp:new Date()};this._addRecordedMessageEntry(f)}},_shouldOutputType:function(a){var c=this._LOG_LEVEL_MAPPING,e=c[a]||0,b=c[this.get("logOutputLevel")]||0;return(e<=b)},_shouldRecordType:function(a){var c=this._LOG_LEVEL_MAPPING,e=c[a]||0,b=c[this.get("logRecordingLevel")]||0;return(e<=b)},_outputMessage:function(j,h,k,n,m){if(!this.get("exists")){return}var e=this.get("reporter"),b,a,c,f,g,l;a=!e.group;c=e[j];if(c){if(!m){b=h?h:"";if(a){b+=this._indentation(k)}b+=n;e[j](b)}else{g=this._argumentsToArray(m);f="";if(h){f=h}if(a){f+=this._indentation(k)}if(f){g.splice(0,0,f)}if(c.apply){c.apply(e,g)}else{e[j](g)}}}else{if(e.log){f="";if(h){f=h}f+=this._LOG_FALLBACK_PREFIX_MAPPING[j]||"";if(a){f+=this._indentation(k)}if(!m){e.log(f+n)}else{g=this._argumentsToArray(m);if(f){g.splice(0,0,f)}e.log(g)}}}},_outputGroup:function(e,g,c,h){if(!this.get("exists")){return}var b=this.get("reporter"),f=b.group,a;if(f){a=g?g:"";a+=h;f.call(b,a)}else{if(b.log){a="";if(g){a=g}a+=this._LOG_FALLBACK_PREFIX_MAPPING[e]||"";a+=this._indentation(c);a+=SC.LOGGER_LOG_GROUP_HEADER.fmt(h);b.log(a)}}},_addRecordedMessageEntry:function(c){var b=this.get("recordedLogMessages"),a;if(!b){b=[];this.set("recordedLogMessages",b)}b.push(c);a=b.length;if(a>this.get("recordedLogMessagesMaximumLength")){b.splice(0,(a-this.get("recordedLogMessagesPruningMinimumLength")))}b.enumerableContentDidChange()},_argumentsToArray:function(c){var b=[],e,a;if(c){for(e=0,a=c.length;e<a;++e){b[e]=c[e]}}return b},_argumentsToString:function(){var c="",b=SC.LOGGER_LOG_DELIMITER,e,a;for(e=0,a=(arguments.length-1);e<a;++e){c+=arguments[e]+b}c+=arguments[a];return c},_indentation:function(e){if(!e||e<0){e=0}var b="",a=SC.LOGGER_LOG_GROUP_INDENTATION,c;for(c=0;c<e;++c){b+=a}return b},_outputIndentationLevel:0,_recordingIndentationLevel:0,_LOG_LEVEL_MAPPING:{debug:4,info:3,warn:2,error:1,none:0},_LOG_FALLBACK_PREFIX_MAPPING:{debug:SC.LOGGER_LOG_DEBUG,info:SC.LOGGER_LOG_INFO,warn:SC.LOGGER_LOG_WARN,error:SC.LOGGER_LOG_ERROR}});SC.debug=SC.Logger.debug;SC.info=SC.Logger.info;SC.warn=SC.Logger.warn;SC.error=SC.Logger.error;sc_require("ext/function");sc_require("private/observer_set");SC.RunLoop=SC.Object.extend({beginRunLoop:function(){this._start=new Date().getTime();if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.beginRunLoop at %@".fmt(this._start))}this._runLoopInProgress=YES;this._flushinvokeNextQueue();return this},isRunLoopInProgress:function(){return this._runLoopInProgress}.property(),endRunLoop:function(){if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ flushing application queues")}this.flushAllPending();this._start=null;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ End")}SC.RunLoop.lastRunLoopEnd=Date.now();this._runLoopInProgress=NO;return this},flushAllPending:function(){var a;do{a=this.flushApplicationQueues();if(!a){a=this._flushinvokeLastQueue()}}while(a)},invokeOnce:function(b,c){if(c===undefined){c=b;b=this}var a;if(typeof c==="string"){c=b[c]}if(!this._invokeQueue){this._invokeQueue=SC.ObserverSet.create()}if(c){this._invokeQueue.add(b,c,undefined,a)}return this},invokeLast:function(b,c){if(c===undefined){c=b;b=this}var a;if(typeof c==="string"){c=b[c]}if(!this._invokeLastQueue){this._invokeLastQueue=SC.ObserverSet.create()}this._invokeLastQueue.add(b,c,undefined,a);return this},invokeNext:function(a,b){if(b===undefined){b=a;a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeNextQueue){this._invokeNextQueue=SC.ObserverSet.create()}this._invokeNextQueue.add(a,b);return this},flushApplicationQueues:function(){var b=NO,a=this._invokeQueue;if(a&&a.getMembers().length){this._invokeQueue=null;b=YES;a.invokeMethods()}return SC.Binding.flushPendingChanges()||b},_flushinvokeLastQueue:function(){var a=this._invokeLastQueue,b=NO;if(a&&a.getMembers().length){this._invokeLastQueue=null;b=YES;if(b){a.invokeMethods()}}return b},_flushinvokeNextQueue:function(){var a=this._invokeNextQueue,b=NO;if(a&&a.getMembers().length){this._invokeNextQueue=null;b=YES;if(b){a.invokeMethods()}}return b}});SC.RunLoop.currentRunLoop=null;SC.RunLoop.runLoopClass=SC.RunLoop;SC.RunLoop.begin=function(){var a=this.currentRunLoop;if(!a){a=this.currentRunLoop=this.runLoopClass.create()}a.beginRunLoop();return this};SC.RunLoop.end=function(){var a=this.currentRunLoop;if(!a){throw"SC.RunLoop.end() called outside of a runloop!"}a.endRunLoop();return this};SC.RunLoop.kill=function(){this.currentRunLoop=this.runLoopClass.create();return this};SC.RunLoop.isRunLoopInProgress=function(){if(this.currentRunLoop){return this.currentRunLoop.get("isRunLoopInProgress")}return NO};SC.run=function(h,g,b){var a=SC.RunLoop.isRunLoopInProgress();if(SC.ExceptionHandler&&SC.ExceptionHandler.enabled){try{if(b||!a){SC.RunLoop.begin()}if(h){h.call(g)}if(b||!a){SC.RunLoop.end()}}catch(f){var c=SC.ExceptionHandler.handleException(f);if(!c&&!SC.browser.isIE){throw f}}}else{if(b||!a){SC.RunLoop.begin()}if(h){h.call(g)}if(b||!a){SC.RunLoop.end()}}};SC.RunLoop.wrapFunction=function(b){var a=function(){var c=SC.RunLoop.isRunLoopInProgress();if(!c){SC.RunLoop.begin()}var e=arguments.callee.wrapped.apply(this,arguments);if(!c){SC.RunLoop.end()}return e};a.wrapped=b;return a};SC.DROP_ON=1;SC.DROP_BEFORE=2;SC.DROP_AFTER=4;SC.DROP_ANY=7;SC.ALIGN_LEFT="left";SC.ALIGN_RIGHT="right";SC.ALIGN_CENTER="center";SC.ALIGN_TOP="top";SC.ALIGN_MIDDLE="middle";SC.ALIGN_BOTTOM="bottom";SC.ALIGN_TOP_LEFT="top-left";SC.ALIGN_TOP_RIGHT="top-right";SC.ALIGN_BOTTOM_LEFT="bottom-left";SC.ALIGN_BOTTOM_RIGHT="bottom-right";SC.mixin({data:$.data,removeData:$.removeData,STRINGS:{},stringsFor:function(b,a){SC.mixin(SC.STRINGS,a);return this}});SC.Controller=SC.Object.extend({isEditable:YES,destroyContentOnReplace:NO,contentObjectDidChanged:function(){var b,a;if(!this.get("destroyContentOnReplace")){return}b=this._oldContent;a=this.get("content");if(b&&a!==b&&b.destroy){b.destroy()}this._oldContent=a}.observes("content")});SC.SelectionSupport={hasSelectionSupport:YES,allowsSelection:YES,allowsMultipleSelection:YES,allowsEmptySelection:YES,firstSelectableObject:function(){return this.get("firstObject")}.property(),selection:function(e,g){var c=this._scsel_selection,h=c?c.get("length"):0,f,b=this.get("arrangedObjects"),a;if((g===undefined)||!this.get("allowsSelection")){g=c}a=(g&&g.isEnumerable)?g.get("length"):0;if((a>1)&&!this.get("allowsMultipleSelection")){if(h>1){g=SC.SelectionSet.create().addObject(c.get("firstObject")).freeze();a=1}else{g=c;a=h}}if((a===0)&&!this.get("allowsEmptySelection")&&b&&b.get("length")!==0){if(h===0){g=this.get("firstSelectableObject");if(g){g=SC.SelectionSet.create().addObject(g).freeze()}else{g=SC.SelectionSet.EMPTY}a=g.get("length")}else{g=c;a=h}}if(a===0){g=SC.SelectionSet.EMPTY}if(g!==c){g=g.frozenCopy()}this._scsel_selection=g;return g}.property("arrangedObjects","allowsEmptySelection","allowsMultipleSelection","allowsSelection").cacheable(),hasSelection:function(){var a=this.get("selection");return !!a&&(a.get("length")>0)}.property("selection").cacheable(),selectObjects:function(b,c){if(!b||b.get("length")===0){if(!c){this.set("selection",SC.SelectionSet.EMPTY)}return this}var a=this.get("selection");if(c&&a){a=a.copy()}else{a=SC.SelectionSet.create()}a.addObjects(b).freeze();this.set("selection",a);return this},selectObject:function(a,b){if(a===null){if(!b){this.set("selection",null)}return this}else{return this.selectObjects([a],b)}},deselectObjects:function(b){if(!b||b.get("length")===0){return this}var a=this.get("selection");if(!a||a.get("length")===0){return this}a=a.copy().removeObjects(b).freeze();this.set("selection",a.freeze());return this},deselectObject:function(a){if(!a){return this}else{return this.deselectObjects([a])}},updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");var b=this.get("selection");var e=this.get("allowsEmptySelection");var c;if(!b){return this}c=b.indexSetForSource(a);if((c&&(c.get("length")!==b.get("length")))||(!c&&(b.get("length")>0))){b=b.copy().constrain(a).freeze();this.set("selection",b)}if((b.get("length")===0)&&a&&(a.get("length")>0)&&!e){this.selectObject(this.get("firstSelectableObject"),NO)}return this}};sc_require("controllers/controller");sc_require("mixins/selection_support");SC.ArrayController=SC.Controller.extend(SC.Array,SC.SelectionSupport,{content:null,isEditable:YES,orderBy:null,allowsSingleContent:YES,destroyOnRemoval:NO,arrangedObjects:function(){return this}.property().cacheable(),canRemoveContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&this.get("hasContent");if(a){return !b.isEnumerable||(SC.typeOf(b.removeObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable","hasContent"),canReorderContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&!this.get("orderBy");return a&&!!b.isSCArray}.property("content","isEditable","orderBy"),canAddContent:function(){var b=this.get("content"),a;a=b&&this.get("isEditable")&&b.isEnumerable;if(a){return(SC.typeOf(b.addObject)===SC.T_FUNCTION)||(SC.typeOf(b.pushObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable"),hasContent:function(){var a=this.get("content");return !!a&&(!!a.isEnumerable||!!this.get("allowsSingleContent"))}.property("content","allowSingleContent"),status:function(){var b=this.get("content"),a=b?b.get("status"):null;return a?a:SC.Record.READY}.property().cacheable(),addObject:function(a){if(!this.get("canAddContent")){throw"%@ cannot add content".fmt(this)}var b=this.get("content");if(b.isSCArray){b.pushObject(a)}else{if(b.addObject){b.addObject(a)}else{throw"%@.content does not support addObject".fmt(this)}}return this},removeObject:function(a){if(!this.get("canRemoveContent")){throw"%@ cannot remove content".fmt(this)}var b=this.get("content");if(b.isEnumerable){b.removeObject(a)}else{this.set("content",null)}if(this.get("destroyOnRemoval")&&a.destroy){a.destroy()}return this},length:function(){var a=this._scac_observableContent();return a?a.get("length"):0}.property().cacheable(),objectAt:function(a){var b=this._scac_observableContent();return b?b.objectAt(a):undefined},replace:function(h,g,e){if(!e||e.get("length")===0){if(!this.get("canRemoveContent")){throw"%@ cannot remove objects from the current content".fmt(this)}}else{if(!this.get("canReorderContent")){throw"%@ cannot add or reorder the current content".fmt(this)}}var c=this.get("content");var b=[],a,f;if(this.get("destroyOnRemoval")){for(a=0;a<g;a++){b.push(c.objectAt(a+h))}}if(c){c.replace(h,g,e)}for(a=0,f=b.length;a<f;a++){b[a].destroy()}b=null;return this},indexOf:function(b,a){var c=this._scac_observableContent();return c?c.indexOf(b,a):-1},init:function(){arguments.callee.base.apply(this,arguments);this._scac_contentDidChange()},_scac_cached:NO,_scac_observableContent:function(){var c=this._scac_cached;if(c){return c}var g=this.get("content"),f,b,a;if(SC.none(g)){return(this._scac_cached=[])}if(!g.isEnumerable){c=this.get("allowsSingleContent")?[g]:[];return(this._scac_cached=c)}var h=this.get("orderBy");if(!h){if(g.isSCArray){return(this._scac_cached=g)}else{throw"%@.orderBy is required for unordered content".fmt(this)}}var e=SC.typeOf(h);if(e===SC.T_STRING){h=[h]}else{if(e===SC.T_FUNCTION){f=h}else{if(e!==SC.T_ARRAY){throw"%@.orderBy must be Array, String, or Function".fmt(this)}}}f=f||function(q,p){var m,s,o,j,t;for(var n=0,k=h.get("length");n<k&&!m;n++){s=h.objectAt(n);if(s.search(/(ASC|DESC)/)===0){o=s.match(/^(ASC )?(DESC )?(.*)$/);s=o[3]}else{o=s.match(/^(\S*)\s*(DESC)?(?:ASC)?$/);s=o[1]}a=o[2]?-1:1;if(q){j=q.isObservable?q.get(s):q[s]}if(p){t=p.isObservable?p.get(s):p[s]}m=SC.compare(j,t)*a}return m};return(this._scac_cached=g.toArray().sort(f))},propertyWillChange:function(a){if(a==="content"){this.arrayContentWillChange(0,this.get("length"),0)}else{return arguments.callee.base.apply(this,arguments)}},_scac_arrayContentWillChange:function(e,c,a){this.arrayContentWillChange(e,c,a);if(this._kvo_enumerable_property_chains){var b=this.slice(e,e+c);this.teardownEnumerablePropertyChains(b)}},_scac_arrayContentDidChange:function(e,c,a){this._scac_cached=NO;this.arrayContentDidChange(e,c,a);if(this._kvo_enumerable_property_chains){var b=this.slice(e,e+a);this.setupEnumerablePropertyChains(b)}this.updateSelectionAfterContentChange()},_scac_contentDidChange:function(){this._scac_cached=NO;var j=this.get("content"),e=!!this.get("orderBy"),k=this._scac_content,a=this._scac_length||0,h=this._scac_arrayContentDidChange,c=this._scac_arrayContentWillChange,b=this._scac_contentStatusDidChange,g=this._scac_enumerableDidChange,f;if(j===k){return this}if(k){if(k.isSCArray){k.removeArrayObservers({target:this,didChange:h,willChange:c})}else{if(k.isEnumerable){k.removeObserver("[]",this,g)}}k.removeObserver("status",this,b);this.teardownEnumerablePropertyChains(k)}this._scac_cached=NO;this._scac_content=j;if(j){if(j.isSCArray){j.addArrayObservers({target:this,didChange:h,willChange:c});f=j.get("length")}else{if(j.isEnumerable){j.addObserver("[]",this,g);f=j.get("length")}else{f=1}}j.addObserver("status",this,b);this.setupEnumerablePropertyChains(j)}else{f=SC.none(j)?0:1}this._scac_length=f;this._scac_contentStatusDidChange();this.arrayContentDidChange(0,0,f);this.updateSelectionAfterContentChange()}.observes("content"),_scac_enumerableDidChange:function(){var a=this.get("content"),c=a?a.get("length"):0,b=this._scac_length;this._scac_length=c;this.beginPropertyChanges();this._scac_cached=NO;this.arrayContentDidChange(0,b,c);this.enumerableContentDidChange(0,b-1);this.endPropertyChanges();this.updateSelectionAfterContentChange()}.observes("orderBy"),_scac_contentStatusDidChange:function(){this.notifyPropertyChange("status")}});sc_require("controllers/controller");SC.ObjectController=SC.Controller.extend({content:null,allowsMultipleContent:NO,hasContent:function(){return !SC.none(this.get("observableContent"))}.property("observableContent"),isEditable:YES,observableContent:function(){var b=this.get("content"),a,c;if(b&&b.isEnumerable){a=b.get("length");c=this.get("allowsMultipleContent");if(a===1){b=b.firstObject()}else{if(a===0||!c){b=null}}if(b&&!c&&b.isEnumerable){b=null}}return b}.property("content","allowsMultipleContent").cacheable(),destroy:function(){var a=this.get("observableContent");if(a&&SC.typeOf(a.destroy)===SC.T_FUNCTION){a.destroy()}this.set("content",null);return this},contentPropertyDidChange:function(b,a){if(a==="*"){this.allPropertiesDidChange()}else{this.notifyPropertyChange(a)}},unknownProperty:function(b,e){if(b==="content"){if(e!==undefined){this.content=e}return this.content}var c=this.get("observableContent"),g,f,a;if(c===null||c===undefined){return undefined}if(e===undefined){if(c.isEnumerable){e=c.getEach(b);g=e.get("length");if(g>0){a=YES;f=e.objectAt(0);while((--g>0)&&a){if(f!==e.objectAt(g)){a=NO}}if(a){e=f}}else{e=undefined}}else{e=(c.isObservable)?c.get(b):c[b]}}else{if(!this.get("isEditable")){throw"%@.%@ is not editable".fmt(this,b)}if(c.isEnumerable){c.setEach(b,e)}else{if(c.isObservable){c.set(b,e)}else{c[b]=e}}}return e},init:function(){arguments.callee.base.apply(this,arguments);if(this.get("content")){this._scoc_contentDidChange()}if(this.get("observableContent")){this._scoc_observableContentDidChange()}},_scoc_contentDidChange:function(){var b=this._scoc_content,c=this.get("content");if(b!==c){this._scoc_content=c;var a=this._scoc_enumerableContentDidChange;if(b&&b.isEnumerable){b.removeObserver("[]",this,a)}if(c&&c.isEnumerable){c.addObserver("[]",this,a)}}}.observes("content"),_scoc_observableContentDidChange:function(){var b=this._scoc_observableContent,e=this.get("observableContent"),a=this.contentPropertyDidChange,c=this._scoc_enumerableContentDidChange;if(b===e){return this}this._scoc_observableContent=e;if(b){if(b.isEnumerable){b.removeObserver("[]",this,c)}else{if(b.isObservable){b.removeObserver("*",this,a)}}}if(e){if(e.isEnumerable){e.addObserver("[]",this,c)}else{if(e.isObservable){e.addObserver("*",this,a)}}}if((b&&b.isEnumerable)||(e&&e.isEnumerable)){this._scoc_enumerableContentDidChange()}else{this.contentPropertyDidChange(e,"*")}}.observes("observableContent"),_scoc_enumerableContentDidChange:function(){var b=this.get("observableContent"),c=this._scoc_observableContentItems,a=this.contentPropertyDidChange;if(c){c.forEach(function(e){if(e.isObservable){e.removeObserver("*",this,a)}},this);c.clear()}if(b&&b.isEnumerable){if(!c){c=SC.Set.create()}b.forEach(function(e){if(c.contains(e)){return}c.add(e);if(e.isObservable){e.addObserver("*",this,a)}},this)}else{c=null}this._scoc_observableContentItems=c;this.contentPropertyDidChange(b,"*");return this}});SC.mixin(Function.prototype,{invokeLater:function(g,a){if(a===undefined){a=1}var e=this;if(arguments.length>2){var b=SC.$A(arguments).slice(2,arguments.length);b.unshift(g);var c=e;e=function(){return c.apply(this,b.slice(1))}}return SC.Timer.schedule({target:g,action:e,interval:a})}});SC.mixin(SC.Object.prototype,{invokeLater:function(e,a){var c,b;if(SC.typeOf(e)===SC.T_STRING){e=this[e]}if(a===undefined){a=1}if(arguments.length>2){b=SC.$A(arguments).slice(2);c=function(){return e.apply(this,b)}}else{c=e}return SC.Timer.schedule({target:this,action:c,interval:a})},invokeOnceLater:function(k,c){var e,h,b,g=this._sc_invokeOnceLaterTimers,j,a;if(SC.typeOf(k)===SC.T_STRING){k=this[k]}if(c===undefined){c=1}if(!g){g=this._sc_invokeOnceLaterTimers={}}b=SC.guidFor(k);j=g[b];if(j){j.invalidate()}if(arguments.length>2){e=SC.$A(arguments).slice(2)}else{e=arguments}h=function(){delete g[b];return k.apply(this,e)};a=SC.Timer.schedule({target:this,action:h,interval:c});g[b]=a;return a},invokeWith:function(b,c,e){if(e===undefined){e=c;c=this}if(!c){c=this}if(SC.typeOf(e)===SC.T_STRING){e=c[e]}var a=this.getPath(b);e.call(c,a,this);return this}});SC.RunLoop=SC.RunLoop.extend({startTime:function(){if(!this._start){this._start=Date.now()}return this._start}.property(),endRunLoop:function(){this.fireExpiredTimers();var a=arguments.callee.base.apply(this,arguments);this.scheduleNextTimeout();return a},scheduleTimer:function(b,a){this._timerQueue=b.removeFromTimerQueue(this._timerQueue);this._timerQueue=b.scheduleInTimerQueue(this._timerQueue,a);return this},cancelTimer:function(a){this._timerQueue=a.removeFromTimerQueue(this._timerQueue);return this},TIMER_ARRAY:[],fireExpiredTimers:function(){if(!this._timerQueue||this._firing){return NO}var e=this.get("startTime"),f=this.TIMER_ARRAY,c,b,a;this._firing=YES;this._timerQueue=this._timerQueue.collectExpiredTimers(f,e);b=f.length;for(c=0;c<b;c++){f[c].fire()}a=f.length>0;f.length=0;this._firing=NO;return a},scheduleNextTimeout:function(){var e=this._timerQueue;var b=NO;if(!e){if(this._timeout){clearTimeout(this._timeout)}}else{var c=e._timerQueueRunTime;if(this._timeoutAt!==c){if(this._timeout){clearTimeout(this._timeout)}var a=Math.max(0,c-Date.now());this._timeout=setTimeout(this._timeoutDidFire,a);this._timeoutAt=c}b=YES}return b},_timeoutDidFire:function(){var a=SC.RunLoop.currentRunLoop;a._timeout=a._timeoutAt=null;SC.run()}});SC.RunLoop.currentRunLoop=SC.RunLoop.create();SC.RunLoop.runLoopClass=SC.RunLoop;SC.Locale=SC.Object.extend({init:function(){if(!this.language){SC.Locale._assignLocales()}if(!this.hasStrings){var c=this._deprecatedLanguageCodes||[];c.push(this.language);var b=c.length;var a=null;while(!a&&--b>=0){a=String[c[b]]}if(a){this.hasStrings=YES;this.strings=a}}},hasStrings:NO,strings:{},metrics:{},toString:function(){if(!this.language){SC.Locale._assignLocales()}return"SC.Locale["+this.language+"]"+SC.guidFor(this)},locWithDefault:function(b,c){var a=this.strings[b];if(SC.typeOf(a)===SC.T_STRING){return a}else{if(SC.typeOf(c)===SC.T_STRING){return c}}return b},locMetric:function(b){var a=this.metrics[b];if(SC.typeOf(a)===SC.T_NUMBER){return a}else{if(a===undefined){SC.warn('No localized metric found for key "'+b+'"');return undefined}else{SC.warn('Unexpected metric type for key "'+b+'"');return undefined}}},locLayout:function(c,b){var f,h,g,n,m,a=SC.Locale.layoutKeys,l=this.metrics,k=SC.typeOf,e=SC.T_NUMBER,j={};if(b){SC.mixin(j,b)}for(f=0,h=a.length;f<h;++f){g=a[f];n=c+"."+g;m=l[n];if(k(m)===e){if(b&&b[g]){throw"locLayout():  There is a localized value for the key '"+n+"' but a value for '"+g+"' was also specified in the non-localized hash"}j[g]=m}}return j}});SC.Locale.mixin({useAutodetectedLanguage:NO,preferredLanguage:null,layoutKeys:["left","top","right","bottom","width","height","minWidth","minHeight","centerX","centerY"],createCurrentLocale:function(){var c=(String.useAutodetectedLanguage!==undefined)?String.useAutodetectedLanguage:this.useAutodetectedLanguage;var b=(String.preferredLanguage!==undefined)?String.preferredLanguage:this.preferredLanguage;var e=((c)?SC.browser.language:null)||b||SC.browser.language||"en";e=SC.Locale.normalizeLanguage(e);var a=this.localeClassFor(e);if(e!=this.currentLanguage){this.currentLanguage=e;this.currentLocale=a.create()}return this.currentLocale},localeClassFor:function(c){c=SC.Locale.normalizeLanguage(c);var b,a=this.locales[c];if(!a&&((b=c.split("-")[0])!==c)&&(a=this.locales[b])){a=this.locales[c]=a.extend()}if(!a){a=this.locales[c]=this.locales.en.extend()}return a},define:function(b,c){var a;if(c===undefined&&(SC.typeOf(b)!==SC.T_STRING)){a=this;c=b}else{a=SC.Locale.localeClassFor(b)}SC.mixin(a.prototype,c);return a},options:function(){return this.prototype},addStrings:function(b){var a=this.prototype.strings;if(a){if(!this.prototype.hasOwnProperty("strings")){a=this.prototype.strings=SC.clone(a)}}else{a=this.prototype.strings={}}if(b){this.prototype.strings=SC.mixin(a,b)}this.prototype.hasStrings=YES;return this},addMetrics:function(b){var a=this.prototype.metrics;if(a){if(!this.prototype.hasOwnProperty(a)){a=this.prototype.metrics=SC.clone(a)}}else{a=this.prototype.metrics={}}if(b){this.prototype.metrics=SC.mixin(a,b)}return this},_map:{english:"en",french:"fr",german:"de",japanese:"ja",jp:"ja",spanish:"es"},normalizeLanguage:function(a){if(!a){return"en"}return SC.Locale._map[a.toLowerCase()]||a},_assignLocales:function(){for(var a in this.locales){this.locales[a].prototype.language=a}},toString:function(){if(!this.prototype.language){SC.Locale._assignLocales()}return"SC.Locale["+this.prototype.language+"]"},extend:function(){var a=SC.Object.extend.apply(this,arguments);a.addStrings=SC.Locale.addStrings;a.define=SC.Locale.define;a.options=SC.Locale.options;a.toString=SC.Locale.toString;return a}});SC.Locale.locales={en:SC.Locale.extend({_deprecatedLanguageCodes:["English"]}),fr:SC.Locale.extend({_deprecatedLanguageCodes:["French"]}),de:SC.Locale.extend({_deprecatedLanguageCodes:["German"]}),ja:SC.Locale.extend({_deprecatedLanguageCodes:["Japanese","jp"]}),es:SC.Locale.extend({_deprecatedLanguageCodes:["Spanish"]})};SC.stringsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addStrings(b);return this};SC.metricsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addMetrics(b);return this};sc_require("system/locale");SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_DECAMELIZE_REGEXP=(/([a-z])([A-Z])/g);SC.STRING_DASHERIZE_REGEXP=(/[ _]/g);SC.STRING_DASHERIZE_CACHE={};SC.STRING_TRIM_LEFT_REGEXP=(/^\s+/g);SC.STRING_TRIM_RIGHT_REGEXP=(/\s+$/g);SC.mixin(SC.String,{capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(e){var b=e.replace(SC.STRING_TITLEIZE_REGEXP,function(g,h,f){return f?f.toUpperCase():""});var c=b.charAt(0),a=c.toLowerCase();return c!==a?a+b.slice(1):b},decamelize:function(a){return a.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()},dasherize:function(c){var a=SC.STRING_DASHERIZE_CACHE,b=a[c];if(b){return b}else{b=SC.String.decamelize(c).replace(SC.STRING_DASHERIZE_REGEXP,"-");a[c]=b}return b},loc:function(f){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(f);if(SC.typeOf(b)!==SC.T_STRING){b=f}var a=SC.$A(arguments);a.shift();if(a.length>0&&a[0]&&a[0].isSCArray){a=a[0]}try{return SC.String.fmt(b,a)}catch(c){SC.error("Error processing string with key: "+f);SC.error("Localized String: "+b);SC.error("Error: "+c)}},locMetric:function(b){var a=SC.Locale,c=a.currentLocale;if(!c){a.createCurrentLocale();c=a.currentLocale}return c.locMetric(b)},locLayout:function(b,c){var a=SC.Locale,e=a.currentLocale;if(!e){a.createCurrentLocale();e=a.currentLocale}return e.locLayout(b,c)},locWithDefault:function(e,c){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(e,c);if(SC.typeOf(b)!==SC.T_STRING){b=e}var a=SC.$A(arguments);a.shift();a.shift();return SC.String.fmt(b,a)},trim:jQuery.trim,trimLeft:function(a){return a.replace(SC.STRING_TRIM_LEFT_REGEXP,"")},trimRight:function(a){return a.replace(SC.STRING_TRIM_RIGHT_REGEXP,"")},mult:function(e,c){if(SC.typeOf(c)!==SC.T_NUMBER||c<1){return null}var a="";for(var b=0;b<c;b+=1){a+=e}return a}});if(String.prototype.trim){SC.supplement(String.prototype,{trim:function(){return SC.String.trim(this,arguments)},trimLeft:function(){return SC.String.trimLeft(this,arguments)},trimRight:function(){return SC.String.trimRight(this,arguments)}})}SC.mixin(String.prototype,{loc:function(){return SC.String.loc(this.toString(),SC.$A(arguments))},locMetric:function(){return SC.String.locMetric(this.toString())},locLayout:function(a){return SC.String.locLayout(this.toString(),a)}});sc_require("system/string");SC.supplement(String.prototype,{capitalize:function(){return SC.String.capitalize(this,arguments)},camelize:function(){return SC.String.camelize(this,arguments)},decamelize:function(){return SC.String.decamelize(this,arguments)},dasherize:function(){return SC.String.dasherize(this,arguments)},loc:function(){var a=SC.$A(arguments);a.unshift(this);return SC.String.loc.apply(SC.String,a)},locWithDefault:function(b){var a=SC.$A(arguments);a.unshift(this);return SC.String.locWithDefault.apply(SC.String,a)},mult:function(a){return SC.String.mult(this,a)}});SC.ActionSupport={target:null,action:null,actionContext:null,fireAction:function(b){var c=this.get("target")||null,a=this.getPath("pane.rootResponder");if(b===undefined){b=this.get("action")}if(b&&a){return a.sendAction(b,c,this,this.get("pane"),this.get("actionContext"),this)}return false}};SC.DelegateSupport={delegateFor:function(c){var b=1,a=arguments.length,e;while(b<a){e=arguments[b];if(e&&e[c]!==undefined){return e}b++}return(this[c]!==undefined)?this:null},invokeDelegateMethod:function(c,a,b){b=SC.A(arguments);b=b.slice(2,b.length);if(!c||!c[a]){c=this}var e=c[a];return e?e.apply(c,b):null},getDelegateProperty:function(e,f){var b=1,a=arguments.length,c;while(b<a){c=arguments[b++];if(c&&c[e]!=undefined){return c.get?c.get(e):c[e]}}return(this[e]!=undefined)?this.get(e):undefined}};SC.Responder=SC.Object.extend({isResponder:YES,pane:null,responderContext:null,nextResponder:null,isFirstResponder:NO,hasFirstResponder:NO,acceptsFirstResponder:YES,becomingFirstResponder:NO,becomeFirstResponder:function(){var a=this.get("pane")||this.get("responderContext")||this.pane();if(a&&this.get("acceptsFirstResponder")){if(a.get("firstResponder")!==this){a.makeFirstResponder(this)}}return this},resignFirstResponder:function(a){var b=this.get("pane")||this.get("responderContext");if(b&&(b.get("firstResponder")===this)){b.makeFirstResponder(null,a)}return YES},willLoseFirstResponder:function(a){},didBecomeFirstResponder:function(a){}});sc_require("system/responder");SC.ResponderContext={isResponderContext:YES,trace:NO,defaultResponder:null,nextResponder:function(){return this.get("defaultResponder")}.property("defaultResponder").cacheable(),firstResponder:null,nextResponderFor:function(a){var b=a.get("nextResponder");if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b,this)}else{if(!b&&(a!==this)){b=this}}return b},responderNameFor:function(a){if(!a){return"(No Responder)"}else{if(a._scrc_name){return a._scrc_name}}var b=this.NAMESPACE;this._findResponderNamesFor(this,3,b?[this.NAMESPACE]:[]);return a._scrc_name||a.toString()},_findResponderNamesFor:function(a,f,e){var b,c;for(b in a){if(b==="nextResponder"){continue}c=a[b];if(c&&c.isResponder){if(c._scrc_name){continue}e.push(b);c._scrc_name=e.join(".");if(f>0){this._findResponderNamesFor(c,f-1,e)}e.pop()}}},makeFirstResponder:function(b,a){var g=this.get("firstResponder"),e=this.get("nextResponder"),f=this.get("trace"),c;if(this._locked){if(f){SC.Logger.log("%@: AFTER ACTION: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}this._pendingResponder=b;return}if(f){SC.Logger.log("%@: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}if(b){b.set("becomingFirstResponder",YES)}this._locked=YES;this._pendingResponder=null;c=b?b:null;while(c){if(c.get("hasFirstResponder")){break}c=(c===e)?null:this.nextResponderFor(c)}if(!c){c=e}this._notifyWillLoseFirstResponder(g,g,c,a);if(g){g.set("isFirstResponder",NO)}this.beginPropertyChanges();this.set("firstResponder",b);if(b){b.set("isFirstResponder",YES)}this._notifyDidBecomeFirstResponder(b,b,c);this.endPropertyChanges();this._locked=NO;if(this._pendingResponder){this.makeFirstResponder(this._pendingResponder);this._pendingResponder=null}if(b){b.set("becomingFirstResponder",NO)}return this},_notifyWillLoseFirstResponder:function(c,f,b,a){if(!f||f===b){return}f.willLoseFirstResponder(c,a);f.set("hasFirstResponder",NO);var e=this.nextResponderFor(f);if(e){this._notifyWillLoseFirstResponder(c,e,b)}},_notifyDidBecomeFirstResponder:function(b,e,a){if(!e||e===a){return}var c=this.nextResponderFor(e);if(c){this._notifyDidBecomeFirstResponder(b,c,a)}e.set("hasFirstResponder",YES);e.didBecomeFirstResponder(b)},resetFirstResponder:function(){var a=this.get("firstResponder");if(!a){return}a.willLoseFirstResponder();a.didBecomeFirstResponder()},sendAction:function(h,e,c){var a=this.get("firstResponder"),f=this.get("nextResponder"),g=this.get("trace"),j=NO,b;this._locked=YES;if(g){SC.Logger.log("%@: begin action '%@' (%@, %@)".fmt(this,h,e,c))}if(!j&&!a&&this.tryToPerform){j=this.tryToPerform(h,e,c)}while(!j&&a){if(a.tryToPerform){j=a.tryToPerform(h,e,c)}if(!j){a=(a===f)?null:this.nextResponderFor(a)}}if(g){if(!j){SC.Logger.log("%@:  action '%@' NOT HANDLED".fmt(this,h))}else{SC.Logger.log("%@: action '%@' handled by %@".fmt(this,h,this.responderNameFor(a)))}}this._locked=NO;if(b=this._pendingResponder){this._pendingResponder=null;this.makeFirstResponder(b)}return a}};SC.bodyOverflowArbitrator=SC.Object.create({requestHidden:function(b,a){this._makeRequest(b,-1-9*!!a)},requestVisible:function(b,a){this._makeRequest(b,1+9*!!a)},withdrawRequest:function(b){if(!b){return}var a=SC.guidFor(b);if(this._requests[a]){delete this._requests[a]}this.setOverflow()},setOverflow:function(){var a=this._decideOverflow();if(a!==undefined){document.body.style.overflow=a?"auto":"hidden"}},_makeRequest:function(c,b){if(!c){return}var a=SC.guidFor(c);this._requests[a]=b;this.setOverflow()},_requests:{},_decideOverflow:function(){var a,f,c,g,b=this._requests,h;for(var e in b){if((h=b[e])<0){a=YES}if(h<-1){c=YES}if(h>0){f=YES}if(h>1){g=YES}}if(g){return YES}if(f&&c){return NO}if(f){return YES}if(a){return NO}return undefined}});SC.mixin(SC.browser,{compare:function(c,a){var g,h,f;if(typeof c==="number"||typeof a==="number"){SC.warn("SC.browser.compare(): Versions compared against Numbers may not provide accurate results.  Use a String of decimal separated Numbers instead.");c=String(c);a=String(a)}g=function(j){return Number(j.match(/^[0-9]+/))};h=SC.A(c.split(".")).map(g);f=SC.A(a.split(".")).map(g);for(var e=0;e<f.length;e++){var b=h[e]-f[e];if(isNaN(b)){return 0}if(b!==0){return b}}return 0},compareVersion:function(){SC.warn("SC.browser.compareVersion() has been deprecated.  Please use SC.browser.compare() instead.  Example: SC.browser.compareVersion(16,0,912) < 0 becomes SC.browser.compare(SC.browser.engineVersion, '16.0.912').");if(this._versionSplit===undefined){var e=function(f){return Number(f.match(/^[0-9]+/))};this._versionSplit=SC.A(this.version.split(".")).map(e)}var c=SC.A(arguments).map(Number);for(var b=0;b<c.length;b++){var a=this._versionSplit[b]-c[b];if(isNaN(a)){return 0}if(a!==0){return a}}return 0}});SC.Builder=function(a){return SC.Builder.create(a)};SC.Builder.create=function create(c){var b=SC.mixin(SC.beget(this.fn),c||{});if(c.hasOwnProperty("toString")){b.toString=c.toString}var a=function(){var e=SC.beget(b);e.defaultClass=this;e.constructor=a;return e.init.apply(e,arguments)};a.fn=a.prototype=b;a.extend=SC.Builder.create;a.mixin=SC.Builder.mixin;return a};SC.Builder.mixin=function(){var b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(this,arguments[a])}return this};SC.Builder.fn={init:function(a){if(a!==undefined){if(SC.typeOf(a)===SC.T_ARRAY){var b=a.length;while(--b>=0){this[b]=a.objectAt?a.objectAt(b):a[b]}this.length=a.length}else{this[0]=a;this.length=1}}return this},size:function(){return this.length},pushStack:function(){var a=this.constructor.apply(this,arguments);a.prevObject=this;return a},end:function(){return this.prevObject||this.constructor()},toString:function(){return"%@$(%@)".fmt(this.defaultClass.toString(),SC.A(this).invoke("toString").join(","))},mixin:SC.Builder.mixin};(function(){var a=SC.Enumerable,c=SC.Builder.fn,b,e;for(b in a){if(!a.hasOwnProperty(b)){continue}e=Array.prototype[b]||a[b];c[b]=e}})();sc_require("system/builder");SC.$=SC.CoreQuery=jQuery;SC.mixin(SC.$.fn,{isCoreQuery:YES,toString:function(){var c=[],b=this.length,a=0;for(a=0;a<b;a++){c[a]="%@: %@".fmt(a,this[a]?this[a].toString():"(null)")}return"<$:%@>(%@)".fmt(SC.guidFor(this),c.join(" , "))},isVisible:function(){return Array.prototype.every.call(this,function(a){return SC.$.isVisible(a)})},view:function(){return this.map(function(){var b=null,a=SC.viewKey,e=this,c;while(!b&&e&&(e!==document)){if(e.nodeType===1&&(c=e.getAttribute("id"))){b=SC.View.views[c]}e=e.parentNode}e=null;return b})},within:function(a){if(this.filter(a).length){return true}return !!this.has(a).length}});(function(){var c={},g={find:function(j,h){return(h!==undefined)?SC.Enumerable.find.call(this,j,h):c.find.call(this,j)},filter:function(j,h){return(h!==undefined)?this.pushStack(SC.Enumerable.filter.call(this,j,h)):c.filter.call(this,j)},filterProperty:function(h,j){return this.pushStack(SC.Enumerable.filterProperty.call(this,h,j))},indexOf:SC.$.index,map:function(j,h){return(h!==undefined)?SC.Enumerable.map.call(this,j,h):c.map.call(this,j)}};var e=SC.$.fn,a=SC.Enumerable,f;for(var b in a){if(a.hasOwnProperty(b)){f=a[b];if(b in g){c[b]=e[b];f=g[b]}e[b]=f}}})();SC.mixin(SC.$,{isVisible:function(a){var b=SC.$;return("hidden"!=a.type)&&(b.css(a,"display")!="none")&&(b.css(a,"visibility")!="hidden")}});sc_require("system/core_query");SC.Event=function(e){var c,b;if(e){this.originalEvent=e;var h=SC.Event._props,g;b=h.length;c=b;while(--c>=0){g=h[c];this[g]=e[g]}}this.timeStamp=this.timeStamp||Date.now();if(!this.target){this.target=this.srcElement||document}if(this.target.nodeType===3){this.target=this.target.parentNode}if(!this.relatedTarget&&this.fromElement){this.relatedTarget=(this.fromElement===this.target)?this.toElement:this.fromElement}if(SC.none(this.pageX)&&!SC.none(this.clientX)){var j=document.documentElement,a=document.body;this.pageX=this.clientX+(j&&j.scrollLeft||a&&a.scrollLeft||0)-(j.clientLeft||0);this.pageY=this.clientY+(j&&j.scrollTop||a&&a.scrollTop||0)-(j.clientTop||0)}if(!this.which&&((this.charCode||e.charCode===0)?this.charCode:this.keyCode)){this.which=this.charCode||this.keyCode}if(!this.metaKey&&this.ctrlKey){this.metaKey=this.ctrlKey}if(!this.which&&this.button){this.which=((this.button&1)?1:((this.button&2)?3:((this.button&4)?2:0)))}if(this.type==="mousewheel"||this.type==="DOMMouseScroll"||this.type==="MozMousePixelScroll"){var f=SC.Event.MOUSE_WHEEL_MULTIPLIER;if(SC.browser.isWebkit&&e.wheelDelta!==undefined){this.wheelDelta=0-(e.wheelDeltaY||e.wheelDeltaX);this.wheelDeltaY=0-(e.wheelDeltaY||0);this.wheelDeltaX=0-(e.wheelDeltaX||0)}else{if(!SC.none(e.detail)&&SC.browser.isMozilla){if(e.axis&&(e.axis===e.HORIZONTAL_AXIS)){this.wheelDeltaX=e.detail;this.wheelDeltaY=this.wheelDelta=0}else{this.wheelDeltaY=this.wheelDelta=e.detail;this.wheelDeltaX=0}}else{this.wheelDelta=this.wheelDeltaY=SC.browser.isIE||SC.browser.isOpera?0-e.wheelDelta:e.wheelDelta;this.wheelDeltaX=0}}this.wheelDelta*=f;this.wheelDeltaX*=f;this.wheelDeltaY*=f}return this};SC.mixin(SC.Event,{MOUSE_WHEEL_MULTIPLIER:function(){var b=1,a=SC.browser.engineVersion;if(SC.browser.name===SC.BROWSER.safari){b=0.4;if(SC.browser.compare(a,"533.17")>0&&SC.browser.compare(a,"534")<0){b=0.004}else{if(SC.browser.compare(a,"533")<0){b=40}}}else{if(SC.browser.name===SC.BROWSER.ie){b=0.3}else{if(SC.browser.name===SC.BROWSER.chrome){b=0.4}}}return b}(),MOUSE_WHEEL_DELTA_LIMIT:1000,_MOUSE_WHEEL_LIMIT_INVALIDATED:NO,create:function(a){return new SC.Event(a)},add:function(g,f,h,j,e,a){if(g&&g.isCoreQuery){if(g.length>0){g.forEach(function(k){this.add(k,f,h,j,e)},this);return this}else{g=g[0]}}if(!g){return this}if(!a){a=NO}if(g.nodeType===3||g.nodeType===8){return SC.Event}if(SC.browser.name===SC.BROWSER.ie&&g.setInterval){g=window}if(SC.typeOf(h)===SC.T_FUNCTION){e=j;j=h;h=null}else{if(h&&SC.typeOf(j)===SC.T_STRING){j=h[j]}}var c=SC.data(g,"sc_events")||SC.data(g,"sc_events",{}),b=c[f];if(!b){b=c[f]={};this._addEventListener(g,f,a)}b[SC.hashFor(h,j)]=[h,j,e];SC.Event._global[f]=YES;g=c=b=null;return this},remove:function(g,f,h,j){if(g&&g.isCoreQuery){if(g.length>0){g.forEach(function(k){this.remove(k,f,h,j)},this);return this}else{g=g[0]}}if(!g){return this}if(g.nodeType===3||g.nodeType===8){return SC.Event}var a,e,c=SC.data(g,"sc_events");if(!c){return this}if(f===undefined){for(f in c){this.remove(g,f)}}else{if(a=c[f]){var b=NO;if(h||j){if(SC.typeOf(h)===SC.T_FUNCTION){j=h;h=null}else{if(SC.typeOf(j)===SC.T_STRING){j=h[j]}}delete a[SC.hashFor(h,j)];e=null;for(e in a){break}if(e===null){b=YES}}else{b=YES}if(b){delete c[f];this._removeEventListener(g,f)}e=null;for(e in c){break}if(!e){SC.removeData(g,"sc_events");delete this._elements[SC.guidFor(g)]}}}g=c=a=null;return this},NO_BUBBLE:["blur","focus","change"],simulateEvent:function(e,c,b){var a=SC.Event.create({type:c,target:e,preventDefault:function(){this.cancelled=YES},stopPropagation:function(){this.bubbles=NO},allowDefault:function(){this.hasCustomEventHandling=YES},timeStamp:Date.now(),bubbles:(this.NO_BUBBLE.indexOf(c)<0),cancelled:NO,normalized:YES});if(b){SC.mixin(a,b)}return a},trigger:function(c,b,k,l){if(c&&c.isCoreQuery){if(c.length>0){c.forEach(function(o){this.trigger(o,b,k,l)},this);return this}else{c=c[0]}}if(!c){return this}if(c.nodeType===3||c.nodeType===8){return undefined}k=SC.A(k);var j,m=SC.typeOf(c[b]||null)===SC.T_FUNCTION,a,h,f,n;a=k[0];if(!a||!a.preventDefault){a=this.simulateEvent(c,b);k.unshift(a)}a.type=b;h=c;do{j=SC.Event.handle.apply(h,k);h=(h===document)?null:(h.parentNode||document)}while(!j&&a.bubbles&&h);h=null;f=c["on"+b];n=SC.$.nodeName(c,"a")&&b==="click";if((!m||n)&&f&&f.apply(c,k)===NO){j=NO}if(m&&l!==NO&&j!==NO&&!n){this.triggered=YES;try{c[b]()}catch(g){}}this.triggered=NO;return j},handle:function(b){if((typeof SC==="undefined")||SC.Event.triggered){return YES}var c,h,f,k,e,j,l,m,a,g;j=SC.A(arguments);j[0]=b=SC.Event.normalizeEvent(b||window.event);e=(SC.data(this,"sc_events")||{})[b.type];if(!e){return NO}for(l in e){m=e[l];a=m[1];b.handler=a;b.data=b.context=m[2];g=m[0]||this;h=a.apply(g,j);if(c!==NO){c=h}if(h===NO){b.preventDefault();b.stopPropagation()}}return c},unload:function(){var a,b=this._elements;for(a in b){this.remove(b[a])}for(a in b){delete b[a]}delete this._elements},special:{ready:{setup:function(){SC._bindReady();return},teardown:function(){return}},mouseenter:{setup:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.add(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},teardown:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.remove(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseenter";return SC.Event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.add(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},teardown:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.remove(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseleave";return SC.Event.handle.apply(this,arguments)}}},KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,_withinElement:function(e,c){var b=e.relatedTarget;while(b&&b!==c){try{b=b.parentNode}catch(a){b=c}}return b===c},_addEventListener:function(f,e,a){var g,c=this.special[e];if(!a){a=NO}if(!c||c.setup.call(f)===NO){var b=SC.guidFor(f);this._elements[b]=f;g=SC.data(f,"listener")||SC.data(f,"listener",function(){return SC.Event.handle.apply(SC.Event._elements[b],arguments)});if(f.addEventListener){f.addEventListener(e,g,a)}else{if(f.attachEvent){f.attachEvent("on"+e,g)}}}f=c=g=null},_removeEventListener:function(c,b){var e,a=SC.Event.special[b];if(!a||(a.teardown.call(c)===NO)){e=SC.data(c,"listener");if(e){if(c.removeEventListener){c.removeEventListener(b,e,NO)}else{if(c.detachEvent){c.detachEvent("on"+b,e)}}}}c=a=e=null},_elements:{},normalizeEvent:function(a){if(a===window.event){return SC.Event.create(a)}else{return a.normalized?a:SC.Event.create(a)}},_global:{},_props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view which touches targetTouches changedTouches animationName elapsedTime dataTransfer".split(" ")});SC.Event.prototype={hasCustomEventHandling:NO,touchesForView:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},touchesForResponder:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},averagedTouchesForView:function(a){if(this.touchContext){return this.touchContext.averagedTouchesForView(a)}return null},allowDefault:function(){this.hasCustomEventHandling=YES;return this},preventDefault:function(){var a=this.originalEvent;if(a){if(a.preventDefault){a.preventDefault()}a.returnValue=NO}this.hasCustomEventHandling=YES;return this},stopPropagation:function(){var a=this.originalEvent;if(a){if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=YES}this.hasCustomEventHandling=YES;return this},stop:function(){return this.preventDefault().stopPropagation()},normalized:YES,getCharString:function(){if(SC.browser.name===SC.BROWSER.ie&&SC.browser.compare(SC.browser.version,"9.0")<0){if(this.keyCode==8||this.keyCode==9||(this.keyCode>=37&&this.keyCode<=40)){return String.fromCharCode(0)}else{return(this.keyCode>0)?String.fromCharCode(this.keyCode):null}}else{return(this.charCode>0)?String.fromCharCode(this.charCode):null}},commandCodes:function(){var f=this.keyCode,b=null,c=null,a="",e;if(f&&f!==this.charCode){b=SC.FUNCTION_KEYS[f];if(!b&&(this.altKey||this.ctrlKey||this.metaKey)){b=SC.PRINTABLE_KEYS[f]}if(b){if(this.altKey){a+="alt_"}if(this.ctrlKey||this.metaKey){a+="ctrl_"}if(this.shiftKey){a+="shift_"}}}if(!b){f=this.which;c=b=String.fromCharCode(f);e=b.toLowerCase();if(this.metaKey){a="meta_";b=e}else{b=null}}if(b){b=a+b}return[b,c]}};SC.Event.observe=SC.Event.add;SC.Event.stopObserving=SC.Event.remove;SC.Event.fire=SC.Event.trigger;if(SC.browser.name===SC.BROWSER.ie){SC.Event.add(window,"unload",SC.Event.prototype,SC.Event.unload)}SC.MODIFIER_KEYS={16:"shift",17:"ctrl",18:"alt"};SC.FUNCTION_KEYS={8:"backspace",9:"tab",13:"return",19:"pause",27:"escape",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock"};SC.PRINTABLE_KEYS={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'};SC.SYSTEM_CURSOR="default";SC.AUTO_CURSOR=SC.DEFAULT_CURSOR="auto";SC.CROSSHAIR_CURSOR="crosshair";SC.HAND_CURSOR=SC.POINTER_CURSOR="pointer";SC.MOVE_CURSOR="move";SC.E_RESIZE_CURSOR="e-resize";SC.NE_RESIZE_CURSOR="ne-resize";SC.NW_RESIZE_CURSOR="nw-resize";SC.N_RESIZE_CURSOR="n-resize";SC.SE_RESIZE_CURSOR="se-resize";SC.SW_RESIZE_CURSOR="sw-resize";SC.S_RESIZE_CURSOR="s-resize";SC.W_RESIZE_CURSOR="w-resize";SC.IBEAM_CURSOR=SC.TEXT_CURSOR="text";SC.WAIT_CURSOR="wait";SC.HELP_CURSOR="help";SC.Cursor=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("cursorStyle")||SC.DEFAULT_CURSOR,c=this.constructor.sharedStyleSheet(),b=SC.guidFor(this);if(c.insertRule){c.insertRule("."+b+" {cursor: "+a+";}",c.cssRules?c.cssRules.length:0)}else{if(c.addRule){c.addRule("."+b,"cursor: "+a)}}this.cursorStyle=a;this.className=b;return this},className:null,cursorStyle:SC.DEFAULT_CURSOR,cursorStyleDidChange:function(){var e,g,c,f,h,b,a;e=this.get("cursorStyle")||SC.DEFAULT_CURSOR;g=this._rule;if(g){g.style.cursor=e;return}c="."+this.get("className");f=this.constructor.sharedStyleSheet();h=(f.cssRules?f.cssRules:f.rules)||[];for(b=0,a=h.length;b<a;++b){g=h[b];if(g.selectorText===c){this._rule=g;g.style.cursor=e;break}}}.observes("cursorStyle")});SC.Cursor.sharedStyleSheet=function(){var b,a=this._styleSheet;if(!a){a=document.createElement("style");a.type="text/css";b=document.getElementsByTagName("head")[0];if(!b){b=document.documentElement}b.appendChild(a);a=document.styleSheets[document.styleSheets.length-1];this._styleSheet=a}return a};SC.Theme={isTheme:YES,classNames:SC.CoreSet.create(),_extend_class_names:function(b){if(b){if(SC.typeOf(b)===SC.T_HASH&&!b.isSet){for(var a in b){if(b[a]){this.classNames.add(a)}else{this.classNames.remove(a)}}}else{if(typeof b==="string"){this.classNames.addEach(b.split(" "))}else{this.classNames.addEach(b)}}}},_extend_self:function(b){if(b.classNames){this._extend_class_names(b.classNames)}var a,c,e;for(a in b){if(a==="classNames"){continue}if(!b.hasOwnProperty(a)){continue}c=b[a];if(c instanceof Function&&!c.base&&(c!==(e=this[a]))){c.base=e}this[a]=c}},create:function(){var c=SC.beget(this);c.baseTheme=this;if(this.themes===SC.Theme.themes){c.themes={}}else{c.themes=SC.beget(this.themes)}c._privateThemes={};c._specializedThemes={};c.classNames=SC.clone(this.classNames);var f=arguments,b=f.length,a,e;for(a=0;a<b;a++){c._extend_self(f[a])}if(c.name){c.classNames.add(c.name)}return c},subtheme:function(a){var b=this.create({name:a});this.addTheme(b);return b},invisibleSubtheme:function(a){var b=this.create({name:a});this._privateThemes[a]=b;return b},themes:{},find:function(a){if(this===SC.Theme){return this.themes[a]}var b;b=this._privateThemes[a];if(b){return b}b=this._specializedThemes[a];if(b){return b}b=this.themes[a];if(b&&!this._specializedThemes[a]){return(this._specializedThemes[a]=b.create({classNames:this.classNames}))}b=SC.Theme.themes[a];if(b){return b}return null},addTheme:function(a){this.themes[a.name]=a}};SC.BaseTheme=SC.Theme.create({name:""});SC.Theme.themes["sc-base"]=SC.BaseTheme;SC.defaultTheme="sc-base";sc_require("mixins/delegate_support");SC.CoreView=SC.Responder.extend(SC.DelegateSupport);sc_require("system/browser");sc_require("system/event");sc_require("system/cursor");sc_require("system/responder");sc_require("system/theme");sc_require("system/string");sc_require("views/view/base");SC.CONTEXT_MENU_ENABLED=YES;SC.TABBING_ONLY_INSIDE_DOCUMENT=NO;SC.FROM_THEME="__FROM_THEME__";SC.EMPTY_CHILD_VIEWS_ARRAY=[];SC.EMPTY_CHILD_VIEWS_ARRAY.needsClone=YES;SC.CoreView.reopen({concatenatedProperties:["outlets","displayProperties","classNames","renderMixin","didCreateLayerMixin","willDestroyLayerMixin","classNameBindings","attributeBindings"],ariaRole:null,ariaHidden:null,pane:function(){var a=this;while(a&&!a.isPane){a=a.get("parentView")}return a}.property("parentView").cacheable(),page:null,parentView:null,isVisible:YES,isVisibleBindingDefault:SC.Binding.bool(),isVisibleInWindow:YES,childViews:SC.EMPTY_CHILD_VIEWS_ARRAY,layer:function(a,c){if(c!==undefined){this._view_layer=c}else{c=this._view_layer;if(!c){var b=this.get("parentView");if(b){b=b.get("layer")}this._view_layer=c=this.findLayerInParentLayer(b)}}return c}.property("isVisibleInWindow").cacheable(),$:function(b){var a=this.get("layer");if(!a){return SC.$()}else{if(b===undefined){return SC.$(a)}else{return SC.$(b,a)}}},containerLayer:function(){return this.get("layer")}.property("layer").cacheable(),layerId:function(a,b){if(b){this._layerId=b}if(this._layerId){return this._layerId}return SC.guidFor(this)}.property().cacheable(),findLayerInParentLayer:function(a){var b="#"+this.get("layerId");return jQuery(b,a)[0]||jQuery(b)[0]},isDescendantOf:function(a){var b=this.get("parentView");if(this===a){return YES}else{if(b){return b.isDescendantOf(a)}else{return NO}}},displayDidChange:function(){this.set("layerNeedsUpdate",YES);return this},_sc_isVisibleDidChange:function(){this.displayDidChange()}.observes("isVisible"),layerNeedsUpdate:NO,_view_layerNeedsUpdateDidChange:function(){if(this.get("layerNeedsUpdate")){this.invokeOnce(this.updateLayerIfNeeded)}}.observes("layerNeedsUpdate"),updateLayerIfNeeded:function(b){var c=this.get("layerNeedsUpdate"),a=c&&(b||this.get("isVisibleInWindow"));if(a){if(this.get("layer")){this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);this.updateLayer();this.endPropertyChanges()}}return this},updateLayer:function(g){var c,b,a,e;var f=g||this.renderContext(this.get("layer"));this._renderLayerSettings(f,NO);e=!this.update;if(e){this.render(f,NO)}else{this.update(f.$())}if(c=this.renderMixin){a=c.length;for(b=0;b<a;++b){c[b].call(this,f,NO)}}f.update();if(f._innerHTMLReplaced){var h=this.get("pane");if(h&&h.get("isPaneAttached")){this._notifyDidAppendToDocument()}}if(this.useStaticLayout){this.viewDidResize()}if(this.didUpdateLayer){this.didUpdateLayer()}if(this.designer&&this.designer.viewDidUpdateLayer){this.designer.viewDidUpdateLayer()}return this},parentViewDidResize:function(){if(!this.get("hasLayout")){this.notifyPropertyChange("frame")}this.viewDidResize()},viewDidResize:function(){},renderContext:function(a){return SC.RenderContext(a)},createLayer:function(){if(this.get("layer")){return this}var a=this.renderContext(this.get("tagName"));this.renderToContext(a);this.set("layer",a.element());this._notifyDidCreateLayer();return this},_notifyDidCreateLayer:function(){this.notifyPropertyChange("layer");if(this.get("useStaticLayout")){this.viewDidResize()}if(this.didCreateLayer){this.didCreateLayer()}var c=this.didCreateLayerMixin,b,a,e=this.get("childViews"),f;if(c){b=c.length;for(a=0;a<b;++a){c[a].call(this)}}b=e.length;for(a=0;a<b;++a){f=e[a];if(!f){continue}f.notifyPropertyChange("layer");if(this.get("useStaticLayout")){if(!f.get("isFixedLayout")){f.viewDidResize()}}f._notifyDidCreateLayer()}},destroyLayer:function(){var a=this.get("layer");if(a){this._notifyWillDestroyLayer();if(a.parentNode){a.parentNode.removeChild(a)}a=null}return this},replaceLayer:function(){this.destroyLayer();this.set("layerLocationNeedsUpdate",YES);this.invokeOnce(this.updateLayerLocationIfNeeded)},parentViewDidChange:function(){this.parentViewDidResize();this.updateLayerLocation()},layerLocationNeedsUpdate:NO,updateLayerLocationIfNeeded:function(a){if(this.get("layerLocationNeedsUpdate")){this.updateLayerLocation()}return this},updateLayerLocation:function(){var f=this.get("layer"),e=this.get("parentView"),b=e?e.get("containerLayer"):null;if(f&&f.parentNode&&f.parentNode!==b){f.parentNode.removeChild(f)}if(!e){if(f&&f.parentNode){f.parentNode.removeChild(f)}}else{if(!b){if(f){if(f.parentNode){f.parentNode.removeChild(f)}this.destroyLayer()}}else{if(!f){this.createLayer();f=this.get("layer");if(!f){return}}var g=e.get("childViews"),c=g.objectAt(g.indexOf(this)+1),a=(c)?c.get("layer"):null;if(c&&(!a||a.parentNode!==b)){c.updateLayerLocationIfNeeded();a=c.get("layer")||null}if((f.parentNode!==b)||(f.nextSibling!==a)){b.insertBefore(f,a)}}}b=e=f=a=null;this.set("layerLocationNeedsUpdate",NO);return this},_notifyWillDestroyLayer:function(){if(this.willDestroyLayer){this.willDestroyLayer()}var c=this.willDestroyLayerMixin,b,a,e=this.get("childViews");if(c){b=c.length;for(a=0;a<b;++a){c[a].call(this)}}b=e.length;for(a=0;a<b;++a){e[a]._notifyWillDestroyLayer()}this.set("layer",null)},renderToContext:function(f,g){var e,c,b,a;this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);if(SC.none(g)){g=YES}this._renderLayerSettings(f,g);e=!this.update;if(e){this.render(f,g)}else{if(g){this.render(f)}else{this.update(f.$())}}if(g&&!this._didRenderChildViews){this.renderChildViews(f,g)}this._didRenderChildViews=NO;if(c=this.renderMixin){a=c.length;for(b=0;b<a;++b){c[b].call(this,f,g)}}this.endPropertyChanges()},_renderLayerSettings:function(a,b){a.resetClassNames();a.resetStyles();this.applyAttributesToContext(a)},applyAttributesToContext:function(a){if(!this.get("layer")){this._applyClassNameBindings();this._applyAttributeBindings(a)}a.addClass(this.get("classNames"));if(this.get("isTextSelectable")){a.addClass("allow-select")}if(!this.get("isVisible")){a.addClass("sc-hidden")}if(this.get("isFirstResponder")){a.addClass("focus")}a.id(this.get("layerId"));a.attr("role",this.get("ariaRole"));var b=this.get("ariaHidden");if(b!==null){if(b===NO){a.removeAttr("aria-hidden")}else{a.attr("aria-hidden",b)}}},_applyClassNameBindings:function(){var a=this.get("classNameBindings"),b=this.get("classNames"),c;if(!a){return}a.forEach(function(g){var f;var e=function(){var j=this._classStringForProperty(g);var h=this.$();if(f){h.removeClass(f);b.removeObject(f)}if(j){h.addClass(j);b.push(j);f=j}else{f=null}};this.addObserver(g.split(":")[0],this,e);c=this._classStringForProperty(g);if(c){b.push(c);f=c}},this)},_applyAttributeBindings:function(a){var f=this.get("attributeBindings"),c,e,b;if(!f){return}f.forEach(function(h){var g=function(){e=this.$();var j=e.attr(h);c=this.get(h);b=typeof c;if((b==="string"||b==="number")&&c!==j){e.attr(h,c)}else{if(c&&b==="boolean"){e.attr(h,h)}else{if(c===NO){e.removeAttr(h)}}}};this.addObserver(h,this,g);c=this.get(h);b=typeof c;if(b==="string"||b==="number"){a.attr(h,c)}else{if(c&&b==="boolean"){a.attr(h,h)}}},this)},_classStringForProperty:function(c){var a=c.split(":"),b=a[1];c=a[0];var e=SC.getPath(this,c);if(e===YES){if(b){return b}return SC.String.dasherize(c.split(".").get("lastObject"))}else{if(e!==NO&&e!==undefined&&e!==null){return e}else{return null}}},prepareContext:function(a,b){if(b!==false){b=YES}if(b){this.renderToContext(a)}else{this.updateLayer(a)}},renderChildViews:function(f,g){var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;++a){c=e[a];if(!c){continue}f=f.begin(c.get("tagName"));c.renderToContext(f,g);f=f.end()}this._didRenderChildViews=YES;return f},render:function(){},_notifyDidAppendToDocument:function(){if(!this.get("hasLayout")){this.notifyPropertyChange("frame")}if(this.didAppendToDocument){this.didAppendToDocument()}var c=0,e,a,b=this.get("childViews");for(c=0,a=b.length;c<a;c++){e=b[c];if(e._notifyDidAppendToDocument){e._notifyDidAppendToDocument()}}},childViewsObserver:function(){var c=this.get("childViews"),b,a,e;for(b=0,a=c.length;b<a;b++){e=c[b];if(e._notifyDidAppendToDocument){e._notifyDidAppendToDocument()}}}.observes("childViews"),attributeBindings:null,tagName:"div",classNames:[],classNameBindings:null,toolTip:null,displayToolTip:function(){var a=this.get("toolTip");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("toolTip","localize").cacheable(),isTextSelectable:NO,displayProperties:["ariaHidden"],nextResponder:function(){return this.get("parentView")}.property("parentView").cacheable(),acceptsFirstResponder:NO,init:function(){var f=this.get("parentView"),h,b,e,g;arguments.callee.base.apply(this,arguments);SC.View.views[this.get("layerId")]=this;this.classNames=this.get("classNames").slice();this.childViews=this.get("childViews").slice();this.createChildViews();g=this.get("displayProperties");for(var c=0,a=g.length;c<a;c++){this.addObserver(g[c],this,this.displayDidChange)}},awake:function(){arguments.callee.base.apply(this,arguments);var c=this.get("childViews"),b=c.length,a;for(a=0;a<b;++a){if(!c[a]){continue}c[a].awake()}},frame:function(){return this.computeFrameWithParentFrame(null)}.property("useStaticLayout").cacheable(),computeFrameWithParentFrame:function(){var a,b=this.get("parentView"),c;if(a=this.get("layer")){c=SC.offset(a);if(b){c=b.convertFrameFromView(c,null)}c.width=a.offsetWidth;c.height=a.offsetHeight;return c}if(this.get("hasLayout")){return null}else{return{x:0,y:0,width:0,height:0}}},clippingFrame:function(){var e=this.get("frame"),a=e,b,c;if(!e){return null}b=this.get("parentView");if(b){c=b.get("clippingFrame");if(!c){return{x:0,y:0,width:e.width,height:e.height}}a=SC.intersectRects(c,e)}a.x-=e.x;a.y-=e.y;return a}.property("parentView","frame").cacheable(),_sc_view_clippingFrameDidChange:function(){var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;++a){c=e[a];c.notifyPropertyChange("clippingFrame");c._sc_view_clippingFrameDidChange()}},removeChild:function(b){b.set("parentView",null);var c=this.get("childViews"),a=c.indexOf(b);if(a>=0){c.removeAt(a)}return this},removeAllChildren:function(){var b=this.get("childViews"),a;while(a=b.objectAt(b.get("length")-1)){this.removeChild(a)}return this},removeFromParent:function(){var a=this.get("parentView");if(a){a.removeChild(this)}return this},destroy:function(){if(this.get("isDestroyed")){return this}this._destroy();return arguments.callee.base.apply(this,arguments)},_destroy:function(){this.destroyLayer();var c=this.get("childViews"),b=c.length,a;if(b){c=c.slice();for(a=0;a<b;++a){c[a].destroy()}}delete SC.View.views[this.get("layerId")];delete this._CQ;delete this.page;if(this.get("parentView")){this.removeFromParent()}this.set("owner",null);return this},createChildViews:function(){var g=this.get("childViews"),b=g.length,a,f,e,c;this.beginPropertyChanges();for(a=0;a<b;++a){if(f=(c=g[a])){if(typeof f===SC.T_STRING){c=this[f]}else{f=null}if(!c){SC.Logger.error("No view with name "+f+" has been found in "+this.toString());continue}c=this.createChildView(c);if(f){this[f]=c}}g[a]=c}this.endPropertyChanges();return this},createChildView:function(a,b){if(!a.isClass){b=a}else{if(!b){b={}}else{b=SC.clone(b)}}b.owner=b.parentView=this;if(a.isClass&&a.prototype.hasVisibility){b.isVisibleInWindow=this.get("isVisibleInWindow")}if(!b.page){b.page=this.page}if(a.isClass){a=a.create(b)}return a},isView:YES,selectStart:function(a){return this.get("isTextSelectable")},contextMenu:function(a){if(this.get("isContextMenuEnabled")){a.allowDefault();return YES}}});SC.CoreView.mixin({isViewClass:YES,design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ViewDesigner){SC.ViewDesigner.didLoadDesign(a,this,SC.A(arguments))}return a},extend:function(){var a=arguments[arguments.length-1];if(a&&!SC.none(a.theme)){a.themeName=a.theme;delete a.theme}return SC.Object.extend.apply(this,arguments)},layout:function(a){this.prototype.layout=a;return this},classNames:function(a){a=(this.prototype.classNames||[]).concat(a);this.prototype.classNames=a;return this},tagName:function(a){this.prototype.tagName=a;return this},childView:function(a){var b=this.prototype.childViews||[];if(b===this.superclass.prototype.childViews){b=b.slice()}b.push(a);this.prototype.childViews=b;return this},bind:function(b,e){var c=this.prototype,a=this.superclass.prototype;var f=c._bindings;if(!f||f===a._bindings){f=c._bindings=(f||[]).slice()}b=b+"Binding";c[b]=e;f.push(b);return this},prop:function(a,b){this.prototype[a]=b;return this},localization:function(b,a){if(a){b.rootElement=SC.$(a)[0]}return b},viewFor:function(e,c){var b=SC.$A(arguments);if(SC.none(e)){b.shift()}else{b[0]={rootElement:SC.$(e)[0]}}var a=this.create.apply(this,arguments);b=b[0]=null;return a},create:function(){var b=arguments[arguments.length-1];if(b&&b.theme){b.themeName=b.theme;delete b.theme}var c=this,a=new c(arguments);if(SC.ViewDesigner){SC.ViewDesigner.didCreateView(a,SC.$A(arguments))}return a},loc:function(f){var b=f.childViews;delete f.childViews;this.applyLocalizedAttributes(f);if(SC.ViewDesigner){SC.ViewDesigner.didLoadLocalization(this,SC.$A(arguments))}var e=this.prototype.childViews,a=e.length,c;while(--a>=0){c=e[a];f=b[a];if(f&&c&&typeof c===SC.T_STRING){SC.String.loc(c,f)}}return this},applyLocalizedAttributes:function(a){SC.mixin(this.prototype,a)},views:{}});SC.outlet=function(b,a){return function(c){return(this[c]=SC.objectForPropertyPath(b,(a!==undefined)?a:this))}.property()};SC.CoreView.unload=function(){var a=SC.View.views;if(a){for(var b in a){if(!a.hasOwnProperty(b)){continue}delete a[b]}}};SC.View=SC.CoreView.extend({classNames:["sc-view"],displayProperties:["isFirstResponder"]});if(SC.browser.isIE){SC.Event.add(window,"unload",SC.View,SC.View.unload)}sc_require("views/view");sc_require("views/view/layout_style");SC.ANIMATABLE_PROPERTIES={top:YES,left:YES,bottom:YES,right:YES,width:YES,height:YES,centerX:YES,centerY:YES,opacity:YES,scale:YES,rotate:YES,rotateX:YES,rotateY:YES,rotateZ:YES};SC.View.reopen({didCreateLayerMixin:function(){if(SC.platform.supportsCSSTransitions){this.resetAnimation()}},animate:function(q,m,e,p){var g,s;if(typeof q===SC.T_STRING){g={};g[q]=m;s=e}else{g=q;s=m;p=e}var c=SC.typeOf(s);if(c===SC.T_NUMBER){s={duration:s}}else{if(c!==SC.T_HASH){throw"Must provide options hash or duration!"}}if(p){s.callback=p}else{if(s.callback){p=s.callback}}if(s.duration===0){var k=this.adjust(g);if(p){this.layoutStyleCalculator.invokeOnceLater("runAnimationCallback",1,p,null,NO)}return k}var a=s.timing;if(a){if(typeof a!==SC.T_STRING){s.timing="cubic-bezier("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}}else{s.timing="linear"}var h=SC.clone(this.get("layout")),j=NO,l,o,b,f,n;if(!h.animate){h.animate={}}for(n in g){if(!g.hasOwnProperty(n)||!SC.ANIMATABLE_PROPERTIES[n]){continue}l=g[n];o=h[n];f=h.animate[n];if(SC.none(l)){throw"Can only animate to an actual value!"}if(o!==l||(f&&f.duration!==s.duration)){j=YES;h.animate[n]=s;h[n]=l}}if(j){this.set("layout",h)}else{if(p){this.layoutStyleCalculator.invokeOnceLater("runAnimationCallback",1,p,null,NO)}}return this},resetAnimation:function(){var c=this.get("layout"),f=c.animate,e=NO,b;if(!f){return}var a;for(b in f){e=YES;delete f[b]}if(e){this.set("layout",c);this.notifyPropertyChange("layout")}return this},transitionDidEnd:function(a){this.get("layoutStyleCalculator").transitionDidEnd(a)}});sc_require("ext/string");sc_require("views/view");sc_require("views/view/animation");SC.CSS_TRANSFORM_MAP={rotate:function(a){return null},rotateX:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateX("+a+")"},rotateY:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateY("+a+")"},rotateZ:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateZ("+a+")"},scale:function(a){if(SC.typeOf(a)===SC.T_ARRAY){a=a.join(", ")}return"scale("+a+")"}};SC.View.reopen({layoutStyleCalculator:null,layoutStyle:function(){var a={layout:this.get("layout"),turbo:this.get("hasAcceleratedLayer"),staticLayout:this.get("useStaticLayout")};var b=this.get("layoutStyleCalculator");b.set(a);return b.calculate()}.property().cacheable()});SC.View.LayoutStyleCalculator=SC.Object.extend({_layoutDidUpdate:function(){var h=this.get("layout");if(!h){return}this.dims=SC._VIEW_DEFAULT_DIMS;this.loc=this.dims.length;var p=(this.right=h.right);this.hasRight=(p!=null);var c=(this.left=h.left);this.hasLeft=(c!=null);var l=(this.top=h.top);this.hasTop=(l!=null);var a=(this.bottom=h.bottom);this.hasBottom=(a!=null);var b=(this.width=h.width);this.hasWidth=(b!=null);var q=(this.height=h.height);this.hasHeight=(q!=null);this.minWidth=((h.minWidth===undefined)?null:h.minWidth);var o=(this.maxWidth=(h.maxWidth===undefined)?null:h.maxWidth);this.hasMaxWidth=(o!=null);this.minHeight=(h.minHeight===undefined)?null:h.minHeight;var n=(this.maxHeight=(h.maxHeight===undefined)?null:h.maxHeight);this.hasMaxHeight=(n!=null);var g=(this.centerX=h.centerX);this.hasCenterX=(g!=null);var f=(this.centerY=h.centerY);this.hasCenterY=(f!=null);var e=(this.borderTop=((h.borderTop!==undefined)?h.borderTop:h.border)||0);var m=(this.borderRight=((h.borderRight!==undefined)?h.borderRight:h.border)||0);var k=(this.borderBottom=((h.borderBottom!==undefined)?h.borderBottom:h.border)||0);var j=(this.borderLeft=((h.borderLeft!==undefined)?h.borderLeft:h.border)||0);this.zIndex=(h.zIndex!=null)?h.zIndex.toString():null;this.opacity=(h.opacity!=null)?h.opacity.toString():null;this.backgroundPosition=(h.backgroundPosition!=null)?h.backgroundPosition:null;this.ret={marginTop:null,marginLeft:null}}.observes("layout"),_invalidAutoValue:function(b){var a=SC.Error.desc("%@.layout() you cannot use %@:auto if staticLayout is disabled".fmt(this.get("view"),b),"%@".fmt(this.get("view")),-1);SC.Logger.error(a.toString());throw a},_handleMistakes:function(){var c=this.get("layout");if(!this.staticLayout){if(this.width===SC.LAYOUT_AUTO){this._invalidAutoValue("width")}if(this.height===SC.LAYOUT_AUTO){this._invalidAutoValue("height")}}if(SC.platform.supportsCSSTransforms){var e=c.animate,a,b;if(e){for(b in e){if(SC.CSS_TRANSFORM_MAP[b]){if(this._pendingAnimations&&this._pendingAnimations["-"+SC.platform.cssPrefix+"-transform"]){throw"Animations of transforms must be executed simultaneously!"}if(a&&e[b].duration!==a){SC.Logger.warn("Can't animate transforms with different durations! Using first duration specified.");e[b].duration=a}a=e[b].duration}}}}},_calculatePosition:function(p){var h=null,a=this.get("turbo"),u=this.ret;var e,m,l,c,k,o,b,g,f,n,t,j,q,s;if(p==="x"){e="left";m="right";l="width";c="maxWidth";k="marginLeft";n="borderLeft";j="borderRight";o=this.hasLeft;b=this.hasRight;g=this.hasWidth;f=this.hasMaxWidth}else{e="top";m="bottom";l="height";c="maxHeight";k="marginTop";n="borderTop";j="borderBottom";o=this.hasTop;b=this.hasBottom;g=this.hasHeight;f=this.hasMaxHeight}u[e]=this._cssNumber(this[e]);u[m]=this._cssNumber(this[m]);t=this._cssNumber(this[n]);q=this._cssNumber(this[j]);u[n+"Width"]=t||null;u[j+"Width"]=q||null;s=this[l];if(s>=1){s-=(t+q)}u[l]=this._cssNumber(s);if(o){if(a){h=u[e];u[e]=0}if(b&&g){u[m]=null}}else{if(!b||(b&&!g&&!f)){u[e]=0}}if(!g&&!b){u[m]=0}return h},_calculateCenter:function(p){var k=this.ret,t,a,c,q,g,h,n,o,f;if(p==="x"){t="width";a="centerX";c="left";q="right";g="marginLeft";h="borderLeft";o="borderRight"}else{t="height";a="centerY";c="top";q="bottom";g="marginTop";h="borderTop";o="borderBottom"}k[c]="50%";n=this._cssNumber(this[h]);f=this._cssNumber(this[o]);k[h+"Width"]=n||null;k[o+"Width"]=f||null;var m=this[t],l=this[a],b=this[c];var j=SC.isPercentage(m),e=SC.isPercentage(l,YES);if(m>1){m-=(n+f)}if((j&&e)||(!j&&!e)){var s=l-m/2;k[g]=(j)?Math.floor(s*100)+"%":Math.floor(s)}else{SC.Logger.warn("You have to set "+t+" and "+a+" using both percentages or pixels");k[g]="50%"}k[t]=this._cssNumber(m)||0;k[q]=null},_calculateTransforms:function(f,j){if(SC.platform.supportsCSSTransforms){var h=this.get("layout");var b=SC.platform.domCSSPrefix+"Transform";var e=[];if(this.turbo){e.push("translateX("+(f||0)+"px)","translateY("+(j||0)+"px)");if(SC.platform.supportsCSS3DTransforms){e.push("translateZ(0px)")}}var g=SC.CSS_TRANSFORM_MAP;for(var a in g){var c=h[a];if(c!=null){e.push(g[a](c))}}this.ret[b]=e.length>0?e.join(" "):null}},_calculateAnimations:function(f,c){var e=this.layout,j=e.animate,h;if(!j){return}if(this.getPath("view.isAnimatable")){return}var g=[],b;this._animatedTransforms=[];if(!this._pendingAnimations){this._pendingAnimations={}}var k="-"+SC.platform.cssPrefix+"-transform";if(SC.platform.supportsCSSTransitions){for(h in j){b=j[h];var l=SC.CSS_TRANSFORM_MAP[h];var a=(h==="top"&&c!=null)||(h==="left"&&f!=null);if(SC.platform.supportsCSSTransforms&&(a||l)){this._animatedTransforms.push(h);h=k}b.css=h+" "+b.duration+"s "+b.timing;if(!this._pendingAnimations[h]){this._pendingAnimations[h]=b;g.push(b.css)}}this.ret[SC.platform.domCSSPrefix+"Transition"]=g.join(", ")}else{for(h in j){this._pendingAnimations[h]=j[h]}}delete e.animate},_cssNumber:function(a){if(a==null){return null}else{if(a===SC.LAYOUT_AUTO){return SC.LAYOUT_AUTO}else{if(SC.isPercentage(a)){return(a*100)+"%"}else{return Math.floor(a)}}}},calculate:function(){var e=this.get("layout"),b=null,n=this.get("staticLayout"),c=null,f=null,a=this.get("turbo"),h=this.ret,l=this.dims,g=this.loc,j=this.get("view"),m,k;this._handleMistakes(e);if(n&&e===SC.View.prototype.layout){return{}}if(this.hasLeft||this.hasRight||!this.hasCenterX){f=this._calculatePosition("x")}else{this._calculateCenter("x")}if(this.hasTop||this.hasBottom||!this.hasCenterY){c=this._calculatePosition("y")}else{this._calculateCenter("y")}h.minWidth=this.minWidth;h.maxWidth=this.maxWidth;h.minHeight=this.minHeight;h.maxHeight=this.maxHeight;h.zIndex=this.zIndex;h.opacity=this.opacity;h.backgroundPosition=this.backgroundPosition;this._calculateTransforms(f,c);this._calculateAnimations(f,c);for(m in h){k=h[m];if(typeof k===SC.T_NUMBER){h[m]=(k+"px")}}return h},willRenderAnimations:function(){if(SC.platform.supportsCSSTransitions){var j=this.get("view"),g=j.get("layer"),a=g?g.style:null,b=j.get("layoutStyle"),n=this._activeAnimations,c,f=this._pendingAnimations,e,p=this._animatedTransforms,h=p?p.length:0,m,q=[],o,l,k;if(f){if(!n){n={}}for(m in f){if(!f.hasOwnProperty(m)){continue}e=f[m];c=n[m];k=NO;if(b[m]!==(a?a[m]:null)){k=YES}if(c&&(c.duration!==e.duration||c.timing!==e.timing)){k=YES}if(k&&c){if(o=c.callback){if(h>0){this.runAnimationCallback(o,null,YES);this._animatedTransforms=null}else{this.runAnimationCallback(o,null,YES)}}this.removeAnimationFromLayout(m,YES)}n[m]=e;q.push(m)}if(!this._groupedAnimations){this._groupedAnimations={}}this._groupedAnimations[m]=q;this._activeAnimations=n;this._pendingAnimations=null}}},didRenderAnimations:function(){if(!SC.platform.supportsCSSTransitions){var a,b;for(a in this._pendingAnimations){b=this._pendingAnimations[a].callback;if(b){this.invokeOnceLater("runAnimationCallback",1,b,null,NO)}this.removeAnimationFromLayout(a,NO,YES)}this._activeAnimations=this._pendingAnimations=null}},runAnimationCallback:function(e,b,c){var a=this.get("view");if(e){if(SC.typeOf(e)!==SC.T_HASH){e={action:e}}e.source=a;if(!e.target){e.target=this}}SC.View.runCallback(e,{event:b,view:a,isCancelled:c})},transitionDidEnd:function(c){var f=c.originalEvent.propertyName,e,j,b;j=this._activeAnimations?this._activeAnimations[f]:null;if(j){if(j.callback){this.invokeOnceLater("runAnimationCallback",1,j.callback,c,NO)}this.removeAnimationFromLayout(f,YES);var h;e=this._groupedAnimations&&this._groupedAnimations[f];if(e){for(var g=0,a=e.length;g<a;g++){h=e[g];delete this._activeAnimations[h]}delete this._groupedAnimations[f]}}},removeAnimationFromLayout:function(c,j,b){if(j){var f=this.getPath("view.layer"),h=[],e;for(e in this._activeAnimations){if(e!==c){h.push(this._activeAnimations[e].css)}}if(f){f.style[SC.platform.domCSSPrefix+"Transition"]=h.join(", ")}}var g=this.getPath("view.layout"),a;if(c==="-"+SC.platform.cssPrefix+"-transform"&&this._animatedTransforms&&this._animatedTransforms.length>0){for(a=0;a<this._animatedTransforms.length;a++){delete g["animate"+SC.String.capitalize(this._animatedTransforms[a])]}this._animatedTransforms=null}delete g["animate"+SC.String.capitalize(c)]}});SC.CoreView.runCallback=function(h){var b=SC.$A(arguments).slice(1),a=SC.typeOf(h.action);if(a==SC.T_FUNCTION){h.action.apply(h.target,b)}else{if(a===SC.T_STRING){if(h.action.indexOf(".")>=0){var g=h.action.split(".");var e=g.pop();var f=SC.objectForPropertyPath(g,window);var c=f.get?f.get(e):f[e];if(c&&SC.typeOf(c)==SC.T_FUNCTION){c.apply(f,b)}else{throw"SC.runCallback could not find a function at %@".fmt(h.action)}}}}};SC.View.runCallback=SC.CoreView.runCallback;sc_require("views/view");sc_require("views/view/layout_style");SC.LAYOUT_HORIZONTAL="sc-layout-horizontal";SC.LAYOUT_VERTICAL="sc-layout-vertical";SC._VIEW_DEFAULT_DIMS=["marginTop","marginLeft"];SC.FULL_WIDTH={left:0,right:0};SC.FULL_HEIGHT={top:0,bottom:0};SC.ANCHOR_CENTER={centerX:0,centerY:0};SC.LAYOUT_AUTO="auto";SC.View.reopen({hasLayout:YES,concatenatedProperties:["layoutProperties"],backgroundColor:null,displayProperties:["backgroundColor"],useStaticLayout:NO,init:function(a){a();this.layoutStyleCalculator=SC.View.LayoutStyleCalculator.create({view:this});this._previousLayout=this.get("layout")}.enhance(),propertyDidChange:function(b,e,c){var a=false;if(typeof this.layout==="function"&&this._kvo_dependents){var f=this._kvo_dependents[b];if(f&&f.indexOf("layout")!=-1){a=true}}if(b==="layout"||a){this.layoutDidChange()}arguments.callee.base.apply(this,arguments)},adjust:function(a,e){var b=this.get("layout"),c=NO,g,f;if(a===undefined){return this}if(SC.typeOf(a)===SC.T_STRING){g=b[a];if(e===undefined||g==e){return this}b=SC.clone(b);if(e===null){delete b[a]}else{b[a]=e}c=YES}else{f=a;for(a in f){if(!f.hasOwnProperty(a)){continue}e=f[a];g=b[a];if(e===undefined||g==e){continue}if(!c){b=SC.clone(b)}if(e===null){delete b[a]}else{b[a]=e}c=YES}}if(c){this.set("layout",b)}return this},layout:{top:0,left:0,bottom:0,right:0},isFixedLayout:function(){return this.get("isFixedPosition")&&this.get("isFixedSize")}.property("isFixedPosition","isFixedSize").cacheable(),isFixedPosition:function(){var b=this.get("layout"),a;a=(((b.left!==undefined)&&(b.top!==undefined))&&((b.left!==SC.LAYOUT_AUTO)&&(b.top!==SC.LAYOUT_AUTO)));if(a){a=(!SC.isPercentage(b.top)&&!SC.isPercentage(b.left))}return a}.property("layout").cacheable(),isFixedSize:function(){var b=this.get("layout"),a;a=(((b.width!==undefined)&&(b.height!==undefined))&&((b.width!==SC.LAYOUT_AUTO)&&(b.height!==SC.LAYOUT_AUTO)));if(a){a=(!SC.isPercentage(b.width)&&!SC.isPercentage(b.height))}return a}.property("layout").cacheable(),convertFrameToView:function(k,e){var c=0,b=0,h=0,g=0,a=this,j;while(a){j=a.get("frame");c+=j.x;b+=j.y;a=a.get("layoutView")}if(e){a=e;while(a){j=a.get("frame");h+=j.x;g+=j.y;a=a.get("layoutView")}}c=k.x+c-h;b=k.y+b-g;return{x:c,y:b,width:k.width,height:k.height}},convertFrameFromView:function(k,e){var c=0,b=0,h=0,g=0,a=this,j;while(a&&(j=a.get("frame"))){c+=j.x;b+=j.y;a=a.get("parentView")}if(e){a=e;while(a){j=a.get("frame");h+=j.x;g+=j.y;a=a.get("parentView")}}c=k.x-c+h;b=k.y-b+g;return{x:c,y:b,width:k.width,height:k.height}},scrollToVisible:function(){var a=this.get("parentView");while(a&&!a.get("isScrollable")){a=a.get("parentView")}if(a){a.scrollToVisible();return a.scrollToVisible(this)}else{return NO}},_adjustForBorder:function(f,c){var g=((c.borderTop!==undefined)?c.borderTop:c.border)||0,e=((c.borderLeft!==undefined)?c.borderLeft:c.border)||0,b=((c.borderBottom!==undefined)?c.borderBottom:c.border)||0,a=((c.borderRight!==undefined)?c.borderRight:c.border)||0;f.x+=e;f.y+=g;f.width-=(e+a);f.height-=(g+b);return f},computeFrameWithParentFrame:function(o,h){var q,s=this.get("layout");if(this.get("useStaticLayout")){q=o();return q?this._adjustForBorder(q,s):null}else{q={}}var p,v,n=SC.LAYOUT_AUTO,m=this.get("parentView"),j,c,a=s.right,b=s.left,u=s.top,g=s.bottom,t=s.width,e=s.height,l=s.centerX,k=s.centerY;if(t===n){p=SC.Error.desc(("%@.layout() cannot use width:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(p.toString());throw p}if(e===n){p=SC.Error.desc(("%@.layout() cannot use height:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(p.toString());throw p}if(!h){h=this.computeParentDimensions(s)}j=h.height;c=h.width;if(!SC.none(b)){if(SC.isPercentage(b)){q.x=c*b}else{q.x=b}if(t!==undefined){if(t===n){q.width=n}else{if(SC.isPercentage(t)){q.width=c*t}else{q.width=t}}}else{q.width=c-q.x;if(a&&SC.isPercentage(a)){q.width=q.width-(a*c)}else{q.width=q.width-(a||0)}}}else{if(!SC.none(a)){if(SC.none(t)){if(SC.isPercentage(a)){q.width=c-(c*a)}else{q.width=c-a}q.x=0}else{if(t===n){q.width=n}else{if(SC.isPercentage(t)){q.width=c*t}else{q.width=(t||0)}}if(SC.isPercentage(t)){q.x=c-(a*c)-q.width}else{q.x=c-a-q.width}}}else{if(!SC.none(l)){if(t===n){q.width=n}else{if(SC.isPercentage(t)){q.width=t*c}else{q.width=(t||0)}}if(SC.isPercentage(l)){q.x=(c-q.width)/2+(l*c)}else{q.x=(c-q.width)/2+l}}else{q.x=0;if(SC.none(t)){q.width=c}else{if(t===n){q.width=n}if(SC.isPercentage(t)){q.width=t*c}else{q.width=(t||0)}}}}}if(!SC.none(u)){if(SC.isPercentage(u)){q.y=u*j}else{q.y=u}if(e!==undefined){if(e===n){q.height=n}else{if(SC.isPercentage(e)){q.height=e*j}else{q.height=e}}}else{if(g&&SC.isPercentage(g)){q.height=j-q.y-(g*j)}else{q.height=j-q.y-(g||0)}}}else{if(!SC.none(g)){if(SC.none(e)){if(SC.isPercentage(g)){q.height=j-(g*j)}else{q.height=j-g}q.y=0}else{if(e===n){q.height=n}if(e&&SC.isPercentage(e)){q.height=e*j}else{q.height=(e||0)}if(SC.isPercentage(g)){q.y=j-(g*j)-q.height}else{q.y=j-g-q.height}}}else{if(!SC.none(k)){if(e===n){q.height=n}if(e&&SC.isPercentage(e)){q.height=e*j}else{q.height=(e||0)}if(SC.isPercentage(k)){q.y=(j-q.height)/2+(k*j)}else{q.y=(j-q.height)/2+k}}else{q.y=0;if(SC.none(e)){q.height=j}else{if(e===n){q.height=n}if(SC.isPercentage(e)){q.height=e*j}else{q.height=e||0}}}}}q.x=Math.floor(q.x);q.y=Math.floor(q.y);if(q.height!==n){q.height=Math.floor(q.height)}if(q.width!==n){q.width=Math.floor(q.width)}if(q.height===n||q.width===n){v=this.get("layer");if(q.height===n){q.height=v?v.clientHeight:0}if(q.width===n){q.width=v?v.clientWidth:0}}q=this._adjustForBorder(q,s);if(m&&m.isScrollContainer){m=m.get("parentView");q.x-=m.get("horizontalScrollOffset");q.y-=m.get("verticalScrollOffset")}if(!SC.none(s.maxHeight)&&(q.height>s.maxHeight)){q.height=s.maxHeight}if(!SC.none(s.minHeight)&&(q.height<s.minHeight)){q.height=s.minHeight}if(!SC.none(s.maxWidth)&&(q.width>s.maxWidth)){q.width=s.maxWidth}if(!SC.none(s.minWidth)&&(q.width<s.minWidth)){q.width=s.minWidth}if(q.height<0){q.height=0}if(q.width<0){q.width=0}return q}.enhance(),computeParentDimensions:function(g){var b,c=this.get("parentView"),a=(c)?c.get("frame"):null;if(a){b={width:a.width,height:a.height}}else{var e=g||{};b={width:(e.left||0)+(e.width||0)+(e.right||0),height:(e.top||0)+(e.height||0)+(e.bottom||0)}}return b},borderFrame:function(){var e=this.get("layout"),g=this.get("frame"),a=e.border,f=((e.topBorder!==undefined)?e.topBorder:e.border)||0,c=((e.rightBorder!==undefined)?e.rightBorder:e.border)||0,h=((e.bottomBorder!==undefined)?e.bottomBorder:e.border)||0,b=((e.leftBorder!==undefined)?e.leftBorder:e.border)||0;return{x:g.x-b,y:g.y-f,width:g.width+b+c,height:g.height+f+h}}.property("frame").cacheable(),parentViewDidResize:function(){var b,a;a=this.useStaticLayout||!this.get("isFixedSize");b=!this.get("isFixedPosition");if(a){this.viewDidResize()}else{if(b){this._viewFrameDidChange()}}},viewDidResize:function(){this._viewFrameDidChange();var e=this.childViews,b,a,c;for(a=0;a<(b=e.length);++a){c=e[a];c.tryToPerform("parentViewDidResize")}},_viewFrameDidChange:function(){this.notifyPropertyChange("frame");this._sc_view_clippingFrameDidChange()},beginLiveResize:function(){if(this.willBeginLiveResize){this.willBeginLiveResize()}var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;++a){c=e[a];if(c.beginLiveResize){c.beginLiveResize()}}return this},endLiveResize:function(){var e=this.get("childViews"),b=e.length,a,c;for(a=b-1;a>=0;--a){c=e[a];if(c.endLiveResize){c.endLiveResize()}}if(this.didEndLiveResize){this.didEndLiveResize()}return this},layoutView:function(){return this.get("parentView")}.property("parentView").cacheable(),layoutDidChange:function(){var h=this._previousLayout,g=this.get("layout"),k=YES,e,c,a,b;if(!SC.none(g.rotate)){if(SC.none(g.rotateX)){g.rotateX=g.rotate;SC.Logger.warn("Please set rotateX instead of rotate")}}if(!SC.none(g.rotateX)){g.rotate=g.rotateX}else{delete g.rotate}var j=g.animations;if(j){if(!SC.none(j.rotate)){if(SC.none(j.rotateX)){j.rotateX=j.rotate;SC.Logger.warn("Please animate rotateX instead of rotate")}}if(!SC.none(j.rotateX)){j.rotate=j.rotateX}else{delete j.rotate}}if(h&&h!==g){e=h.width;if(e!==undefined){a=g.width;if(e===a){c=h.height;if(h!==undefined){b=g.height;if(c===b){k=NO}}}}}this.beginPropertyChanges();this.notifyPropertyChange("hasAcceleratedLayer");this.notifyPropertyChange("layoutStyle");if(k){this.viewDidResize()}else{this._viewFrameDidChange()}this.endPropertyChanges();var f=this.get("layoutView");if(f){f.set("childViewsNeedLayout",YES);f.layoutDidChangeFor(this);if(f.get("childViewsNeedLayout")){f.invokeOnce(f.layoutChildViewsIfNeeded)}}this._previousLayout=g;return this},childViewsNeedLayout:NO,layoutDidChangeFor:function(b){var a=this._needLayoutViews;if(!a){a=this._needLayoutViews=SC.CoreSet.create()}a.add(b)},layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")}if(a&&this.get("childViewsNeedLayout")){this.set("childViewsNeedLayout",NO);this.layoutChildViews()}return this},layoutChildViews:function(){var c=this._needLayoutViews,a=c?c.length:0,b;for(b=0;b<a;++b){c[b].updateLayout()}c.clear()},updateLayout:function(){var b=this.get("layer"),a;if(b){a=this.renderContext(b);this.renderLayout(a,NO);a.update();if(this.useStaticLayout){this.viewDidResize()}}b=null;return this},renderLayout:function(a,b){this.get("layoutStyleCalculator").willRenderAnimations();a.addStyle(this.get("layoutStyle"));this.get("layoutStyleCalculator").didRenderAnimations()},_renderLayerSettings:function(b,a,c){b(a,c);this.renderLayout(a,c)}.enhance(),applyAttributesToContext:function(b,a){b(a);if(this.get("useStaticLayout")){a.addClass("sc-static-layout")}if(this.get("backgroundColor")){a.css("backgroundColor",this.get("backgroundColor"))}}.enhance()});SC.View.mixin({convertLayoutToAnchoredLayout:function(g,o){var j={top:0,left:0,width:o.width,height:o.height},e=o.width,m=o.height,n=g.right,a=g.left,l=g.top,h=g.bottom,k=g.width,f=g.height,c=g.centerX,b=g.centerY;if(!SC.none(a)){if(SC.isPercentage(a)){j.left=a*e}else{j.left=a}if(k!==undefined){if(k===SC.LAYOUT_AUTO){j.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(k)){j.width=k*e}else{j.width=k}}}else{if(n&&SC.isPercentage(n)){j.width=e-j.left-(n*e)}else{j.width=e-j.left-(n||0)}}}else{if(!SC.none(n)){if(SC.none(k)){j.left=0;if(n&&SC.isPercentage(n)){j.width=e-(n*e)}else{j.width=e-(n||0)}}else{if(k===SC.LAYOUT_AUTO){j.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(k)){j.width=k*e}else{j.width=k}if(SC.isPercentage(n)){j.left=e-(j.width+n)}else{j.left=e-(j.width+n)}}}}else{if(!SC.none(c)){if(k&&SC.isPercentage(k)){j.width=(k*e)}else{j.width=(k||0)}j.left=((e-j.width)/2);if(SC.isPercentage(c)){j.left=j.left+c*e}else{j.left=j.left+c}}else{if(!SC.none(k)){j.left=0;if(k===SC.LAYOUT_AUTO){j.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(k)){j.width=k*e}else{j.width=k}}}else{j.left=0;j.width=0}}}}if(g.minWidth!==undefined){j.minWidth=g.minWidth}if(g.maxWidth!==undefined){j.maxWidth=g.maxWidth}if(!SC.none(l)){if(SC.isPercentage(l)){j.top=l*m}else{j.top=l}if(f!==undefined){if(f===SC.LAYOUT_AUTO){j.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){j.height=f*m}else{j.height=f}}}else{j.height=m-j.top;if(h&&SC.isPercentage(h)){j.height=j.height-(h*m)}else{j.height=j.height-(h||0)}}}else{if(!SC.none(h)){if(SC.none(f)){j.top=0;if(h&&SC.isPercentage(h)){j.height=m-(h*m)}else{j.height=m-(h||0)}}else{if(f===SC.LAYOUT_AUTO){j.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){j.height=f*m}else{j.height=f}j.top=m-j.height;if(SC.isPercentage(h)){j.top=j.top-(h*m)}else{j.top=j.top-h}}}}else{if(!SC.none(b)){if(f&&SC.isPercentage(f)){j.height=(f*m)}else{j.height=(f||0)}j.top=((m-j.height)/2);if(SC.isPercentage(b)){j.top=j.top+b*m}else{j.top=j.top+b}}else{if(!SC.none(f)){j.top=0;if(f===SC.LAYOUT_AUTO){j.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){j.height=f*m}else{j.height=f}}}else{j.top=0;j.height=0}}}}if(j.top){j.top=Math.floor(j.top)}if(j.bottom){j.bottom=Math.floor(j.bottom)}if(j.left){j.left=Math.floor(j.left)}if(j.right){j.right=Math.floor(j.right)}if(j.width!==SC.LAYOUT_AUTO){j.width=Math.floor(j.width)}if(j.height!==SC.LAYOUT_AUTO){j.height=Math.floor(j.height)}if(g.minHeight!==undefined){j.minHeight=g.minHeight}if(g.maxHeight!==undefined){j.maxHeight=g.maxHeight}return j},convertLayoutToCustomLayout:function(b,a,c){}});sc_require("views/view");sc_require("views/view/layout");sc_require("views/view/layout_style");SC.View.reopen({wantsAcceleratedLayer:NO,hasAcceleratedLayer:function(){if(this.get("wantsAcceleratedLayer")&&SC.platform.supportsAcceleratedLayers){var c=this.get("layout"),e=c.animate,b=SC.LAYOUT_AUTO,a;if(e&&(e.top||e.left)){for(a in e){if(SC.CSS_TRANSFORM_MAP[a]&&((e.top&&e.top.duration!==e[a].duration)||(e.left&&e.left.duration!==e[a].duration))){return NO}}}return this.get("isFixedLayout")}return NO}.property("wantsAcceleratedLayer").cacheable()});sc_require("views/view");SC.View.reopen({cursor:function(a,c){var b;if(c){this._setCursor=c}if(this._setCursor!==undefined){return this._setCursor}b=this.get("parentView");if(this.get("shouldInheritCursor")&&b){return b.get("cursor")}return null}.property("parentView","shouldInheritCursor").cacheable(),applyAttributesToContext:function(b,a){var c=this.get("cursor");if(c){a.addClass(c.get("className"))}b(a)}.enhance(),shouldInheritCursor:YES});sc_require("views/view");SC.View.reopen({isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay().bool(),isEnabledInPane:function(){var a=this.get("isEnabled"),b;if(a&&(b=this.get("parentView"))){a=b.get("isEnabledInPane")}return a}.property("parentView","isEnabled"),_sc_view_isEnabledDidChange:function(){if(!this.get("isEnabled")&&this.get("isFirstResponder")){this.resignFirstResponder()}}.observes("isEnabled"),applyAttributesToContext:function(b,a){var c=this.get("isEnabled");b(a);a.setClass("disabled",!c);a.attr("aria-disabled",!c?"true":null)}.enhance()});sc_require("views/view");SC.View.reopen({isKeyResponder:NO,willLoseKeyResponderTo:function(a){},willBecomeKeyResponderFrom:function(a){},didLoseKeyResponderTo:function(a){},didBecomeKeyResponderFrom:function(a){},interpretKeyEvents:function(b){var a=b.commandCodes(),e=a[0],f=a[1],h;if(!e&&!f){return null}if(e){var j=SC.MODIFIED_KEY_BINDINGS[e]||SC.BASE_KEY_BINDINGS[e.match(/[^_]+$/)[0]];if(j){var g=this,c=this.get("pane"),k=null;while(g&&!(k=g.tryToPerform(j,b))){g=(g===c)?null:g.get("nextResponder")}return k}}if(f&&this.respondsTo("insertText")){h=this.insertText(f,b);return h?(h===YES?this:h):null}return null},insertText:function(a){return NO},performKeyEquivalent:function(g,e){var f=NO,h=this.get("childViews"),b=h.length,a=-1,c;while(!f&&(++a<b)){c=h[a];f=c.tryToPerform("performKeyEquivalent",g,e)}return f},firstKeyView:null,_getFirstKeyView:function(){var a=this.get("firstKeyView");if(a){return a}var b=this.get("childViews");if(b){return b[0]}},lastKeyView:null,_getLastKeyView:function(){var e=this.get("lastKeyView");if(e){return e}var a,b=this.get("firstKeyView");if(b){while(a=b._getNextKeyView()){b=a}return b}else{var c=this.get("childViews");if(c){return c[c.length-1]}}},nextKeyView:undefined,_getNextKeyView:function(){var b=this.get("parentView"),a=this.get("nextKeyView");if(b&&b.get("lastKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)+1]}},nextValidKeyView:function(){var b=this,a;while(a!==this){a=null;if(b.get("isVisibleInWindow")){a=b._getFirstKeyView()}if(!a){a=b._getNextKeyView()}if(!a){while(b=b.get("parentView")){if(a=b._getNextKeyView()){break}}}if(!a){if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=this.get("pane")}}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("nextKeyView"),previousKeyView:undefined,_getPreviousKeyView:function(){var b=this.get("parentView"),a=this.get("previousKeyView");if(b&&b.get("firstKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)-1]}},previousValidKeyView:function(){var b=this,a;while(a!==this){if(b.get("parentView")){a=b._getPreviousKeyView()}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=b}}if(a){do{b=a;a=a._getLastKeyView()}while(a&&a.get("isVisibleInWindow"));if(!a){a=b}}else{a=b.get("parentView")}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("previousKeyView")});sc_require("views/view");SC.View.reopen({_lastLayerId:null,layerIdDidChange:function(){var a=this.get("layer"),b=this.get("layerId"),c=this._lastLayerId;if(b!==c){if(c&&SC.View.views[c]===this){delete SC.View.views[c]}this._lastLayerId=b;SC.View.views[b]=this;if(a){a.id=b}}}.observes("layerId"),parentViewDidChange:function(){this.recomputeIsVisibleInWindow();this.resetBuildState();this.set("layerLocationNeedsUpdate",YES);this.invokeOnce(this.updateLayerLocationIfNeeded);this._invalidatePaneCacheForSelfAndAllChildViews();return this},_invalidatePaneCacheForSelfAndAllChildViews:function(){var e,c=this.get("childViews"),b=c.length,a;this.notifyPropertyChange("pane");for(a=0;a<b;++a){e=c[a];if(e._invalidatePaneCacheForSelfAndAllChildViews){e._invalidatePaneCacheForSelfAndAllChildViews()}}},insertBefore:function(b,e){b.beginPropertyChanges();if(b.get("parentView")){b.removeFromParent()}if(this.willAddChild){this.willAddChild(b,e)}if(b.willAddToParent){b.willAddToParent(this,e)}b.set("parentView",this);var a,c=this.get("childViews");if(c.needsClone){this.set(c=[])}a=(e)?c.indexOf(e):c.length;if(a<0){a=c.length}c.insertAt(a,b);if(b.parentViewDidChange){b.parentViewDidChange()}if(b.layoutDidChange){b.layoutDidChange()}b.endPropertyChanges();this.invokeLast(function(){var f=b.get("pane");if(f&&f.get("isPaneAttached")){b._notifyDidAppendToDocument()}});if(this.didAddChild){this.didAddChild(b,e)}if(b.didAddToParent){b.didAddToParent(this,e)}return this},removeChild:function(b,a){if(!a){return this}if(a.parentView!==this){throw"%@.removeChild(%@) must belong to parent".fmt(this,a)}if(a.willRemoveFromParent){a.willRemoveFromParent()}if(this.willRemoveChild){this.willRemoveChild(a)}b(a);if(a.parentViewDidChange){a.parentViewDidChange()}if(this.didRemoveChild){this.didRemoveChild(a)}if(a.didRemoveFromParent){a.didRemoveFromParent(this)}return this}.enhance(),replaceChild:function(a,b){a.beginPropertyChanges();b.beginPropertyChanges();this.beginPropertyChanges();this.insertBefore(a,b).removeChild(b);this.endPropertyChanges();b.endPropertyChanges();a.endPropertyChanges();return this},replaceAllChildren:function(c){var b=c.get("length"),a;this.beginPropertyChanges();this.destroyLayer().removeAllChildren();for(a=0;a<b;a++){this.appendChild(c.objectAt(a))}this.replaceLayer();this.endPropertyChanges();return this},appendChild:function(a){return this.insertBefore(a,null)},buildInChild:function(a){a.willBuildInToView(this);this.appendChild(a);a.buildInToView(this)},buildOutChild:function(a){a.buildOutFromView(this)},buildInDidFinishFor:function(a){},buildOutDidFinishFor:function(a){this.removeChild(a)},isBuildingIn:NO,isBuildingOut:NO,buildIn:function(){this.buildInDidFinish()},buildOut:function(){this.buildOutDidFinish()},resetBuild:function(){},buildOutDidCancel:function(){},buildInDidCancel:function(){},buildInDidFinish:function(){this.isBuildingIn=NO;this._buildingInTo.buildInDidFinishFor(this);this._buildingInTo=null},buildOutDidFinish:function(){this.isBuildingOut=NO;this._buildingOutFrom.buildOutDidFinishFor(this);this._buildingOutFrom=null},resetBuildState:function(){if(this.isBuildingIn){this.buildInDidCancel();this.isBuildingIn=NO}if(this.isBuildingOut){this.buildOutDidCancel();this.isBuildingOut=NO}this.buildingInTo=null;this.buildingOutFrom=null;this.resetBuild()},willBuildInToView:function(a){if(this.isBuildingOut){this.buildOutDidCancel()}},buildInToView:function(a){if(this.isBuildingIn){return}this._buildingInTo=a;this.isBuildingOut=NO;this.isBuildingIn=YES;this.buildIn()},buildOutFromView:function(a){if(this.isBuildingOut){return}if(this.isBuildingIn){this.buildInDidCancel()}this.isBuildingOut=YES;this.isBuildingIn=NO;this._buildingOutFrom=a;this.buildOut()}});sc_require("views/view");SC.View.reopen({init:function(a){a();this._lastTheme=this.get("theme")}.enhance(),themeName:null,baseThemeName:null,theme:function(){var b=this.get("baseTheme"),a=this.get("themeName");if(a){var c;if(b){c=b.find(a);if(c){return c}}c=SC.Theme.find(a);if(c){return c}return b.invisibleSubtheme(a)}return b}.property("baseTheme","themeName").cacheable(),_sc_view_themeDidChange:function(){if(this._lastTheme===this.get("theme")){return}this._lastTheme=this.get("theme");var c=this.childViews,b=c.length,a;for(a=0;a<b;a++){c[a].notifyPropertyChange("baseTheme")}if(this.get("layer")){this.replaceLayer()}}.observes("theme"),baseTheme:function(){var b;var a=this.get("baseThemeName");if(a){return SC.Theme.find(a)}else{b=this.get("parentView");var c=b&&b.get("theme");return c||SC.Theme.find(SC.defaultTheme)}}.property("baseThemeName","parentView").cacheable(),renderDelegate:function(c,e){if(e){this._setRenderDelegate=e}if(this._setRenderDelegate){return this._setRenderDelegate}var a=this.get("renderDelegateName"),b;if(a){b=this.get("theme")[a];if(!b){throw'%@: Unable to locate render delegate "%@" in theme.'.fmt(this,a)}return b}return null}.property("renderDelegateName","theme"),renderDelegateName:null,renderDelegateProxy:function(){return SC.View._RenderDelegateProxy.createForView(this)}.property("renderDelegate").cacheable(),render:function(b,c){var a=this.get("renderDelegate");if(a){if(c){a.render(this.get("renderDelegateProxy"),b)}else{a.update(this.get("renderDelegateProxy"),b.$())}}},applyAttributesToContext:function(g,f){var h=this.get("theme");var c=h.classNames,b,a=c.length;for(b=0;b<a;b++){f.addClass(c[b])}g(f);var e=this.get("renderDelegate");if(e&&e.className){f.addClass(e.className)}}.enhance(),invokeRenderDelegateMethod:function(c,b){var a=this.get("renderDelegate");if(!a){return undefined}if(SC.typeOf(a[c])!==SC.T_FUNCTION){return undefined}b=SC.$A(arguments);b.shift();b.unshift(this.get("renderDelegateProxy"));return a[c].apply(a,b)}});SC.View._RenderDelegateProxy={isViewRenderDelegateProxy:YES,createForView:function(c){var e=SC.beget(this);var g=c.get("displayProperties"),f={};for(var b=0,a=g.length;b<a;b++){f[g[b]]=YES}f.theme=YES;e._displayPropertiesLookup=f;e.renderState={};e._view=c;return e},get:function(b){if(this[b]!==undefined){return this[b]}var a="display"+b.capitalize();if(this._displayPropertiesLookup[a]){return this._view.get(a)}else{if(this._displayPropertiesLookup[b]){return this._view.get(b)}}return undefined},didChangeFor:function(e){var b=arguments.length,a;for(a=1;a<b;a++){var f=arguments[a],c="display"+f.capitalize();if(this._displayPropertiesLookup[c]){if(this._view.didChangeFor(e,c)){return YES}}else{if(this._displayPropertiesLookup[f]){if(this._view.didChangeFor(e,f)){return YES}}}}return NO}};SC.propertyFromRenderDelegate=function(a,b){return function(g,h){if(h!==undefined){this["_set_rd_"+g]=h}var e=this["_set_rd_"+g];if(e!==undefined){return e}var c=this.get("renderDelegate");if(c&&c.get){var f=this.get("renderDelegateProxy");e=c.getPropertyFor(f,a)}if(e!==undefined){return e}return b}.property("renderDelegate").cacheable()};sc_require("views/view");SC.View.reopen({acceptsMultitouch:NO,hasTouch:NO,touchBoundary:{left:25,right:25,top:25,bottom:25},_touchBoundaryFrame:function(){var b=this.get("touchBoundary"),a;a=this.get("parentView").convertFrameToView(this.get("frame"),null);a.x-=b.left;a.y-=b.top;a.width+=b.left+b.right;a.height+=b.top+b.bottom;return a}.property("touchBoundary","clippingFrame").cacheable(),touchIsInBoundary:function(a){return SC.pointInRect({x:a.pageX,y:a.pageY},this.get("_touchBoundaryFrame"))}});sc_require("views/view");SC.View.reopen({hasVisibility:YES,isVisibleInWindow:NO,isContextMenuEnabled:function(){return SC.CONTEXT_MENU_ENABLED}.property(),recomputeIsVisibleInWindow:function(e){var g=this.get("isVisibleInWindow"),j=this.get("isVisible"),f;if(j){if(e===undefined){f=this.get("parentView");e=f?f.get("isVisibleInWindow"):NO}j=j&&e}if(g!==j){this.set("isVisibleInWindow",j);var h=this.get("childViews"),b=h.length,a,c;for(a=0;a<b;a++){c=h[a];if(c.recomputeIsVisibleInWindow){c.recomputeIsVisibleInWindow(j)}}if(j){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)}}else{if(this.get("isFirstResponder")){this.resignFirstResponder()}}}this.updateLayerIfNeeded(YES);return this},_sc_isVisibleDidChange:function(){this.displayDidChange();this.recomputeIsVisibleInWindow()}.observes("isVisible")});sc_require("views/view");sc_require("views/view/acceleration");sc_require("views/view/cursor");sc_require("views/view/enabled");sc_require("views/view/keyboard");sc_require("views/view/layout");sc_require("views/view/manipulation");sc_require("views/view/theming");sc_require("views/view/touch");sc_require("views/view/visibility");sc_require("mixins/responder_context");SC.MIXED_STATE="__MIXED__";SC.Pane=SC.View.extend(SC.ResponderContext,{isPane:YES,page:null,rootResponder:null,sendEvent:function(c,a,e){var b;if(!e){e=this.get("firstResponder")}while(e){if(c==="touchStart"){if(a.touchResponder===e){e=null;break}if(!e.get("hasTouch")||e.get("acceptsMultitouch")){if(e.tryToPerform("touchStart",a)){break}}}else{if(c==="touchEnd"&&!e.get("acceptsMultitouch")){if(!e.get("hasTouch")){if(e.tryToPerform("touchEnd",a)){break}}}else{if(e.tryToPerform(c,a)){break}}}e=(e===this)?null:e.get("nextResponder")}if(!e&&(e=this.get("defaultResponder"))){if(typeof e===SC.T_STRING){e=SC.objectForPropertyPath(e)}if(!e){e=null}else{e=e.tryToPerform(c,a)?e:null}}else{if(!e&&!(e=this.get("defaultResponder"))){e=this.tryToPerform(c,a)?this:null}}return a.mouseHandler||e},nextResponder:function(){return null}.property().cacheable(),firstResponder:null,acceptsKeyPane:YES,isKeyPane:NO,becomeKeyPane:function(){if(this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(this)}return this},resignKeyPane:function(){if(!this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(null)}return this},makeFirstResponder:function(c,b,a){if(!b){b=this}var f=this.get("firstResponder"),e=this.get("isKeyPane");if(f===b){return this}if(SC.platform.touch&&b&&b.kindOf(SC.TextFieldView)&&!b.get("focused")){return this}if(e){if(f){f.tryToPerform("willLoseKeyResponderTo",b)}if(b){b.tryToPerform("willBecomeKeyResponderFrom",f)}}if(f){f.beginPropertyChanges();f.set("isKeyResponder",NO)}if(b){b.beginPropertyChanges();b.set("isKeyResponder",e)}c(b,a);if(f){f.endPropertyChanges()}if(b){b.endPropertyChanges()}if(e){if(b){b.tryToPerform("didBecomeKeyResponderFrom",f)}if(f){f.tryToPerform("didLoseKeyResponderTo",b)}}return this}.enhance(),willLoseKeyPaneTo:function(a){this._forwardKeyChange(this.get("isKeyPane"),"willLoseKeyResponderTo",a,NO);return this},willBecomeKeyPaneFrom:function(a){this._forwardKeyChange(!this.get("isKeyPane"),"willBecomeKeyResponderFrom",a,YES);return this},didBecomeKeyResponderFrom:function(a){},didLoseKeyPaneTo:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",NO);this._forwardKeyChange(a,"didLoseKeyResponderTo",b);return this},didBecomeKeyPaneFrom:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",YES);this._forwardKeyChange(!a,"didBecomeKeyResponderFrom",b,YES);return this},isMainPane:NO,focusFrom:function(a){},blurTo:function(a){},blurMainTo:function(a){this.set("isMainPane",NO)},focusMainFrom:function(a){this.set("isMainPane",YES)},append:function(){return this.appendTo(document.body)},remove:function(){if(!this.get("isVisibleInWindow")){return this}if(!this.get("isPaneAttached")){return this}var b=this.get("layer");if(b&&b.parentNode){b.parentNode.removeChild(b)}b=null;this._removeIntercept();this.resignKeyPane();var a=this.rootResponder;if(this.get("isMainPane")){a.makeMainPane(null)}a.panes.remove(this);this.rootResponder=null;this.set("isPaneAttached",NO);this.parentViewDidChange();return this},insert:function(b){var a=this.get("layer");if(!a){a=this.createLayer().get("layer")}b(a);if(!this.get("isPaneAttached")){this.paneDidAttach()}return this},appendTo:function(a){return this.insert(function(b){jQuery(a).append(b)})},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);a.panes.add(this);this.set("isPaneAttached",YES);this.recomputeDependentProperties();this._notifyDidAppendToDocument();this._addIntercept();return this},recomputeDependentProperties:function(){},isPaneAttached:NO,wantsTouchIntercept:NO,hasTouchIntercept:function(){return this.get("wantsTouchIntercept")&&SC.platform.touch}.property("wantsTouchIntercept").cacheable(),zIndex:0,touchZ:99,_addIntercept:function(){if(this.get("hasTouchIntercept")){var b=document.createElement("div");var a=b.style;a.position="absolute";a.left="0px";a.top="0px";a.right="0px";a.bottom="0px";a.webkitTransform="translateZ(0px)";a.zIndex=this.get("zIndex")+this.get("touchZ");b.className="touch-intercept";b.id="touch-intercept-"+SC.guidFor(this);this._touchIntercept=b;document.body.appendChild(b)}},_removeIntercept:function(){if(this._touchIntercept){document.body.removeChild(this._touchIntercept);this._touchIntercept=null}},hideTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="none"}},showTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="block"}},recomputeIsVisibleInWindow:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}var e=this.get("isVisibleInWindow"),g=this.get("isVisible")&&this.get("isPaneAttached");if(e!==g){this.set("isVisibleInWindow",g);var f=this.get("childViews"),b=f.length,a,c;for(a=0;a<b;a++){c=f[a];if(c.recomputeIsVisibleInWindow){c.recomputeIsVisibleInWindow(g)}}if(g){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)}}else{if(this.get("isKeyPane")){this.resignKeyPane()}}}this.updateLayerIfNeeded(YES);return this},updateLayerLocation:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}return this},init:function(){if(this.hasTouchIntercept===YES){SC.Logger.warn("Do not set hasTouchIntercept directly. Use wantsTouchIntercept instead.");this.hasTouchIntercept=SC.platform.touch}var a=!!this.get("layer");arguments.callee.base.apply(this,arguments);if(a){this.paneDidAttach()}},classNames:["sc-pane"]});sc_require("panes/pane");SC.Pane.reopen({performKeyEquivalent:function(c,a){var b=arguments.callee.base.apply(this,arguments);if(!b){var e=this.get("defaultResponder");if(e){if(e.performKeyEquivalent){b=e.performKeyEquivalent(c,a)}if(!b&&e.tryToPerform){b=e.tryToPerform(c,a)}}}return b},keyDown:function(a){var b;if(a.keyCode===9&&!this.get("firstResponder")){if(a.shiftKey){b=this.get("previousValidKeyView")}else{b=this.get("nextValidKeyView")}if(b){this.makeFirstResponder(b);return YES}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){a.allowDefault()}}}return NO},_forwardKeyChange:function(e,b,h,g){var c,a,f;if(e&&(a=this.get("firstResponder"))){f=(h)?h.get("firstResponder"):null;c=this.get("firstResponder");if(c&&c[b]){c[b](f)}if((g!==undefined)&&a){a.set("isKeyResponder",g)}}}});sc_require("panes/pane");SC.Pane.reopen({currentWindowSize:null,computeParentDimensions:function(c){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}var e={x:0,y:0,width:1000,height:1000},b=this.get("layout");if(document&&document.body){e.width=document.body.clientWidth;e.height=document.body.clientHeight;if(SC.browser.name===SC.BROWSER.ie&&SC.browser.compareVersion(SC.browser.version,"7")===0){var a=SC.platform.get("scrollbarSize");if(document.body.scrollWidth>e.width){e.width-=a}if(document.body.scrollHeight>e.height){e.height-=a}}}if(b.minHeight||b.minWidth){if(b.minHeight){e.height=Math.max(e.height,b.minHeight)}if(b.minWidth){e.width=Math.max(e.width,b.minWidth)}}return e},frame:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}return this.computeFrameWithParentFrame(null)}.property(),windowSizeDidChange:function(b,a){this.set("currentWindowSize",a);this.setBodyOverflowIfNeeded();this.parentViewDidResize();return this},setBodyOverflowIfNeeded:function(f){var e=this.get("layout"),b=this.get("currentWindowSize");if(!e||!b||!b.width||!b.height){return}var a=e.minWidth,c=e.minHeight;if(f===true||a||c){if((c&&b.height<c)||(a&&b.width<a)){SC.bodyOverflowArbitrator.requestVisible(this)}else{SC.bodyOverflowArbitrator.requestHidden(this)}}},paneLayoutDidChange:function(){this.invokeOnce(this.updateLayout);this.setBodyOverflowIfNeeded()}.observes("layout"),recomputeDependentProperties:function(a){this.set("currentWindowSize",this.rootResponder.computeWindowSize());a()}.enhance()});sc_require("panes/pane");SC.Pane.reopen({prependTo:function(a){return this.insert(function(b){jQuery(a).prepend(b)})},removeFromParent:function(){throw SC.Error.desc("SC.Pane cannot be removed from its parent, since it's the root. Did you mean remove()?")}});sc_require("panes/pane");SC.Pane.reopen({recomputeDependentProperties:function(a){this.recomputeIsVisibleInWindow();a()}.enhance()});SC.Application=SC.Responder.extend(SC.ResponderContext,{});SC.Color=SC.Object.extend(SC.Copyable,{original:null,a:1,r:0,g:0,b:0,hue:function(c,e){var f=SC.Color.clampToDeviceGamut,a=SC.Color.rgbToHsl(f(this.get("r")),f(this.get("g")),f(this.get("b"))),b;if(e!==undefined){a[0]=(e%360+360)%360;b=SC.Color.hslToRgb(a[0],a[1],a[2]);this.beginPropertyChanges();this.set("r",b[0]);this.set("g",b[1]);this.set("b",b[2]);this.endPropertyChanges()}return a[0]}.property("r","g","b").cacheable(),saturation:function(c,e){var f=SC.Color.clampToDeviceGamut,a=SC.Color.rgbToHsl(f(this.get("r")),f(this.get("g")),f(this.get("b"))),b;if(e!==undefined){a[1]=SC.Color.clamp(e,0,1);b=SC.Color.hslToRgb(a[0],a[1],a[2]);this.beginPropertyChanges();this.set("r",b[0]);this.set("g",b[1]);this.set("b",b[2]);this.endPropertyChanges()}return a[1]}.property("r","g","b").cacheable(),luminosity:function(c,e){var f=SC.Color.clampToDeviceGamut,a=SC.Color.rgbToHsl(f(this.get("r")),f(this.get("g")),f(this.get("b"))),b;if(e!==undefined){a[2]=SC.Color.clamp(e,0,1);b=SC.Color.hslToRgb(a[0],a[1],a[2]);this.beginPropertyChanges();this.set("r",b[0]);this.set("g",b[1]);this.set("b",b[2]);this.endPropertyChanges()}return a[2]}.property("r","g","b").cacheable(),isEqualTo:function(a){return this.get("r")===a.get("r")&&this.get("g")===a.get("g")&&this.get("b")===a.get("b")&&this.get("a")===a.get("a")},toArgb:function(){var a=SC.Color.clampToDeviceGamut;return"#"+[a(255*this.get("a")),a(this.get("r")),a(this.get("g")),a(this.get("b"))].map(function(b){b=b.toString(16);return b.length===1?"0"+b:b}).join("")},toHex:function(){var a=SC.Color.clampToDeviceGamut;return"#"+[a(this.get("r")),a(this.get("g")),a(this.get("b"))].map(function(b){b=b.toString(16);return b.length===1?"0"+b:b}).join("")},toRgb:function(){var a=SC.Color.clampToDeviceGamut;return"rgb("+a(this.get("r"))+","+a(this.get("g"))+","+a(this.get("b"))+")"},toRgba:function(){var a=SC.Color.clampToDeviceGamut;return"rgba("+a(this.get("r"))+","+a(this.get("g"))+","+a(this.get("b"))+","+this.get("a")+")"},toHsl:function(){var a=Math.round;return"hsl("+a(this.get("hue"))+","+a(this.get("saturation")*100)+"%,"+a(this.get("luminosity")*100)+"%)"},toHsla:function(){var a=Math.round;return"hsla("+a(this.get("hue"))+","+a(this.get("saturation")*100)+"%,"+a(this.get("luminosity")*100)+"%,"+this.get("a")+")"},cssText:function(){var a=SC.Color.supportsRgba||SC.Color.supportsArgb;return(this.a===1||!a)?this.toHex():SC.Color.supportsRgba?this.toRgba():this.toArgb()}.property("r","g","b","a").cacheable(),copy:function(){return SC.Color.create({original:this.get("original"),r:this.get("r"),g:this.get("g"),b:this.get("b"),a:this.get("a")})},sub:function(a){return SC.Color.create({r:this.get("r")-a.get("r"),g:this.get("g")-a.get("g"),b:this.get("b")-a.get("b"),a:this.get("a")-a.get("a")})},add:function(a){return SC.Color.create({r:this.get("r")+a.get("r"),g:this.get("g")+a.get("g"),b:this.get("b")+a.get("b"),a:this.get("a")+a.get("a")})},mult:function(b){var a=Math.round;return SC.Color.create({r:a(this.get("r")*b),g:a(this.get("g")*b),b:a(this.get("b")*b),a:this.get("a")*b})}});SC.Color.mixin({supportsRgba:(function(){var c=document.getElementsByTagName("script")[0].style,b=c.cssText,a;c.cssText="background-color:rgba(5,2,1,.5)";a=c.backgroundColor.indexOf("rgba")!==-1;c.cssText=b;return a}()),supportsArgb:(function(){var c=document.getElementsByTagName("script")[0].style,b=c.cssText,a;c.cssText='filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#55000000", endColorstr="#55000000");';a=c.backgroundColor.indexOf("#55000000")!==-1;c.cssText=b;return a}()),clamp:function(c,b,a){return Math.max(Math.min(c,a),b)},clampInt:function(c,b,a){return Math.round(SC.Color.clamp(c,b,a))},clampToDeviceGamut:function(a){return SC.Color.clampInt(a,0,255)},hsvToRgb:function(k,y,w){k/=360;var a,m,u,j=Math.floor(k*6),n=k*6-j,e=w*(1-y),c=w*(1-(y*n)),x=w*(1-(y*(1-n))),o=[[w,x,e],[c,w,e],[e,w,x],[e,c,w],[x,e,w],[w,e,c]],l=SC.Color.clampToDeviceGamut;j=j%6;a=l(o[j][0]*255);m=l(o[j][1]*255);u=l(o[j][2]*255);return[a,m,u]},rgbToHsv:function(a,f,k){a/=255;f/=255;k/=255;var l=Math.max(a,f,k),c=Math.min(a,f,k),j=l-c,e,n=l===0?0:j/l,m=l;if(l===c){e=0}else{switch(l){case a:e=(f-k)/j+(f<k?6:0);break;case f:e=(k-a)/j+2;break;case k:e=(a-f)/j+4;break}e/=6}e*=360;return[e,n,m]},hslToRgb:function(g,f,b){g/=360;var e,c,a=SC.Color.hueToRgb,j=SC.Color.clampToDeviceGamut;c=b<=0.5?b*(f+1):b+f-b*f;e=b*2-c;return[j(a(e,c,g+1/3)*255),j(a(e,c,g)*255),j(a(e,c,g-1/3)*255)]},hueToRgb:function(b,a,c){if(c<0){c++}if(c>1){c--}if(c<1/6){return b+(a-b)*c*6}if(c<1/2){return a}if(c<2/3){return b+(a-b)*(2/3-c)*6}return b},rgbToHsl:function(a,j,m){a/=255;j/=255;m/=255;var n=Math.max(a,j,m),e=Math.min(a,j,m),f,o,c=(n+e)/2,k=n-e;if(n===e){f=o=0}else{o=c>0.5?k/(2-n-e):k/(n+e);switch(n){case a:f=(j-m)/k+(j<m?6:0);break;case j:f=(m-a)/k+2;break;case m:f=(a-j)/k+4;break}f/=6}f*=360;return[f,o,c]},PARSE_RGBA:/^rgba\(\s*([\d]+%?)\s*,\s*([\d]+%?)\s*,\s*([\d]+%?)\s*,\s*([.\d]+)\s*\)$/,PARSE_RGB:/^rgb\(\s*([\d]+%?)\s*,\s*([\d]+%?)\s*,\s*([\d]+%?)\s*\)$/,PARSE_HSLA:/^hsla\(\s*(-?[\d]+)\s*\s*,\s*([\d]+)%\s*,\s*([\d]+)%\s*,\s*([.\d]+)\s*\)$/,PARSE_HSL:/^hsl\(\s*(-?[\d]+)\s*,\s*([\d]+)%\s*,\s*([\d]+)%\s*\)$/,PARSE_HEX:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,PARSE_ARGB:/^#[0-9a-fA-F]{8}$/,KEYWORDS:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},from:function(h){var m=SC.Color,l=h,k,j,c,e=1,f=function(b){var a=parseInt(b,10);return b.slice(-1)==="%"?m.clampInt(a*2.55,0,255):m.clampInt(a,0,255)};if(m.KEYWORDS.hasOwnProperty(h)){h=m.KEYWORDS[h]}if(m.PARSE_RGB.test(h)){h=h.match(m.PARSE_RGB);k=f(h[1]);j=f(h[2]);c=f(h[3])}else{if(m.PARSE_RGBA.test(h)){h=h.match(m.PARSE_RGBA);k=f(h[1]);j=f(h[2]);c=f(h[3]);e=parseFloat(h[4],10)}else{if(m.PARSE_HEX.test(h)){if(h.length===4){h="#"+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2)+h.charAt(3)+h.charAt(3)}k=parseInt(h.slice(1,3),16);j=parseInt(h.slice(3,5),16);c=parseInt(h.slice(5,7),16)}else{if(m.PARSE_ARGB.test(h)){k=parseInt(h.slice(3,5),16);j=parseInt(h.slice(5,7),16);c=parseInt(h.slice(7,9),16);e=parseInt(h.slice(1,3),16)/255}else{if(m.PARSE_HSL.test(h)){h=h.match(m.PARSE_HSL);h=m.hslToRgb(((parseInt(h[1],10)%360+360)%360),m.clamp(parseInt(h[2],10)/100,0,1),m.clamp(parseInt(h[3],10)/100,0,1));k=h[0];j=h[1];c=h[2]}else{if(m.PARSE_HSLA.test(h)){h=h.match(m.PARSE_HSLA);e=parseFloat(h[4],10);h=m.hslToRgb(((parseInt(h[1],10)%360+360)%360),m.clamp(parseInt(h[2],10)/100,0,1),m.clamp(parseInt(h[3],10)/100,0,1));k=h[0];j=h[1];c=h[2]}else{if(h==="transparent"){k=j=c=0;e=0}else{return NO}}}}}}}return SC.Color.create({original:l,r:m.clampInt(k,0,255),g:m.clampInt(j,0,255),b:m.clampInt(c,0,255),a:m.clamp(e,0,1)})}});SC.BENCHMARK_LOG_READY=YES;sc_require("system/event");SC.mixin({isReady:NO,suppressOnReady:SC.suppressOnReady?YES:NO,suppressMain:SC.suppressMain?YES:NO,ready:function(b,c){var a=SC._readyQueue;if(c===undefined){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(SC.isReady){jQuery(document).ready(function(){c.call(b)})}else{if(!a){SC._readyQueue=[]}SC._readyQueue.push(function(){c.call(b)})}return this},onReady:{done:function(){if(SC.isReady){return}SC.isReady=true;SC.RunLoop.begin();SC.Locale.createCurrentLocale();var e=SC.Locale.currentLanguage.toLowerCase();jQuery("body").addClass(e);jQuery("html").attr("lang",e);jQuery("#loading").remove();var c=SC._readyQueue,b,a;if(c){for(b=0,a=c.length;b<a;b++){c[b].call()}SC._readyQueue=null}if(window.main&&!SC.suppressMain&&(SC.mode===SC.APP_MODE)){window.main()}SC.RunLoop.end()}}});if(!SC.suppressOnReady){jQuery.event.special.ready._default=SC.onReady.done}SC.APP_MODE="APP_MODE";SC.TEST_MODE="TEST_MODE";SC.mode=SC.APP_MODE;SC.platform=SC.Object.create({scrollbarSize:function(){var a=document.createElement("DIV"),e;a.innerHTML="<div style='height:1px;'></div>";a.style.cssText="position:absolute;width:100px;height:100px;overflow-y:visible;";e=a.childNodes[0];document.body.appendChild(a);var b=e.innerWidth||e.clientWidth;a.style.overflowY="scroll";var c=e.innerWidth||e.clientWidth;document.body.removeChild(a);return b-c}.property().cacheable(),touch:!SC.none(window.ontouchstart)||SC.browser.name===SC.BROWSER.android,bounceOnScroll:SC.browser.os===SC.OS.ios,pinchToZoom:SC.browser.os===SC.OS.ios,input:{placeholder:("placeholder" in document.createElement("input"))},input:function(e){var f={},c=e.length,g=document.createElement("input"),b,a;for(a=0;a<c;a++){b=e[a];f[b]=!!(b in g)}return f}(["autocomplete","readonly","list","size","required","multiple","maxlength","pattern","min","max","step","placeholder"]),standalone:!!navigator.standalone,cssPrefix:null,domCSSPrefix:null,simulateTouchEvents:function(){if(this.touch){return}SC.Logger.log("Simulating touch events");SC.platform.touch=YES;SC.platform.bounceOnScroll=YES;document.body.className=document.body.className+" touch";this._simtouch_counter=1;this.removeEvents(["click","dblclick","mouseout","mouseover","mousewheel"]);this.replaceEvent("mousemove",this._simtouch_mousemove);this.replaceEvent("mousedown",this._simtouch_mousedown);this.replaceEvent("mouseup",this._simtouch_mouseup);SC.platform.windowSizeDeterminesOrientation=YES;SC.device.orientationHandlingShouldChange()},removeEvents:function(e){var b,a=e.length,c;for(b=0;b<a;b++){c=e[b];SC.Event.remove(document,c,SC.RootResponder.responder,SC.RootResponder.responder[c])}},replaceEvent:function(a,b){SC.Event.remove(document,a,SC.RootResponder.responder,SC.RootResponder.responder[a]);SC.Event.add(document,a,this,b)},_simtouch_mousemove:function(a){if(!this._mousedown){if(a.altKey&&this._pinchCenter===null){this._pinchCenter={pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY}}else{if(!a.altKey&&this._pinchCenter!==null){this._pinchCenter=null}}return NO}var b=this.manufactureTouchEvent(a,"touchmove");return SC.RootResponder.responder.touchmove(b)},_simtouch_mousedown:function(a){this._mousedown=YES;var b=this.manufactureTouchEvent(a,"touchstart");return SC.RootResponder.responder.touchstart(b)},_simtouch_mouseup:function(a){var c=this.manufactureTouchEvent(a,"touchend"),b=SC.RootResponder.responder.touchend(c);this._mousedown=NO;this._simtouch_counter++;return b},manufactureTouchEvent:function(m,l){var c,n,g=this._simtouch_counter;c={type:l,target:m.target,identifier:g,pageX:m.pageX,pageY:m.pageY,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY};m.touches=[c];if(m.altKey&&this._pinchCenter!==null){var j=this._pinchCenter.pageX+this._pinchCenter.pageX-m.pageX,h=this._pinchCenter.pageY+this._pinchCenter.pageY-m.pageY,f=this._pinchCenter.screenX+this._pinchCenter.screenX-m.screenX,e=this._pinchCenter.screenY+this._pinchCenter.screenY-m.screenY,b=this._pinchCenter.clientX+this._pinchCenter.clientX-m.clientX,a=this._pinchCenter.clientY+this._pinchCenter.clientY-m.clientY,k=this._simtouch_counter+1;n={type:l,target:m.target,identifier:k,pageX:j,pageY:h,screenX:f,screenY:e,clientX:b,clientY:a};m.touches=[c,n]}m.changedTouches=m.touches;return m},supportsCSSTransitions:NO,supportsCSSTransforms:NO,understandsCSS3DTransforms:NO,supportsCSS3DTransforms:NO,supportsAcceleratedLayers:NO,supportsHashChange:function(){return("onhashchange" in window)&&(document.documentMode===undefined||document.documentMode>7)}(),supportsHistory:function(){return !!(window.history&&window.history.pushState)}(),supportsCanvas:function(){return !!document.createElement("canvas").getContext}(),supportsOrientationChange:("onorientationchange" in window),windowSizeDeterminesOrientation:SC.browser.os===SC.OS.ios||!("onorientationchange" in window)});(function(){var a=navigator.userAgent.toLowerCase();if((/webkit/).test(a)){SC.platform.cssPrefix="webkit";SC.platform.domCSSPrefix="Webkit"}else{if((/opera/).test(a)){SC.platform.cssPrefix="opera";SC.platform.domCSSPrefix="O"}else{if((/msie/).test(a)&&!(/opera/).test(a)){SC.platform.cssPrefix="ms";SC.platform.domCSSPrefix="ms"}else{if((/mozilla/).test(a)&&!(/(compatible|webkit)/).test(a)){SC.platform.cssPrefix="moz";SC.platform.domCSSPrefix="Moz"}}}}})();(function(){var b=document.createElement("div");var a=["-moz-","-moz-","-o-","-ms-","-webkit-"],j=["moz","Moz","o","ms","webkit"];var g="",f=null,k,c;for(f=0,c=a.length;f<c;f++){k=a[f];g+=k+"transition:all 1s linear;";g+=k+"transform: translate(1px, 1px);";g+=k+"perspective: 500px;"}b.style.cssText=g;var l;for(f=0,c=j.length;f<c;f++){l=j[f];if(b.style[l+"TransitionProperty"]!==undefined){SC.platform.supportsCSSTransitions=YES}if(b.style[l+"Transform"]!==undefined){SC.platform.supportsCSSTransforms=YES}if(b.style[l+"Perspective"]!==undefined||b.style[l+"PerspectiveProperty"]!==undefined){SC.platform.understandsCSS3DTransforms=YES;SC.platform.supportsCSS3DTransforms=YES}}try{if(window.media&&window.media.matchMedium){if(!window.media.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO}}else{if(window.styleMedia&&window.styleMedia.matchMedium){if(!window.styleMedia.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO}}}}catch(h){SC.platform.supportsCSS3DTransforms=NO}if(SC.platform.supportsCSSTransforms&&SC.platform.cssPrefix==="webkit"){SC.platform.supportsAcceleratedLayers=YES}})();sc_require("system/ready");sc_require("system/platform");SC.CAPTURE_BACKSPACE_KEY=NO;SC.RootResponder=SC.Object.extend({panes:null,init:function(){arguments.callee.base.apply(this,arguments);this.panes=SC.Set.create();if(SC.platform.supportsCSSTransitions){this[SC.platform.cssPrefix+"TransitionEnd"]=this.transitionEnd;this["transitionend"]=this.transitionEnd}},mainPane:null,makeMainPane:function(b){var a=this.get("mainPane");if(a===b){return this}this.beginPropertyChanges();if(this.get("keyPane")===a){this.makeKeyPane(b)}this.set("mainPane",b);if(a){a.blurMainTo(b)}if(b){b.focusMainFrom(a)}this.endPropertyChanges();return this},menuPane:null,makeMenuPane:function(b){if(b&&!b.get("acceptsMenuPane")){return this}else{var a=this.get("menuPane");if(a===b){return this}this.set("menuPane",b)}return this},keyPane:null,previousKeyPanes:[],makeKeyPane:function(g){var f,a,e;if(g){if(!g.get("acceptsKeyPane")){return this}else{a=this.get("keyPane");if(a===g){return this}else{if(a){e=this.get("previousKeyPanes");e.push(a)}f=g}}}else{a=this.get("keyPane");e=this.get("previousKeyPanes");f=null;var c;while(e.length>0){c=e.pop();if(c.get("isPaneAttached")&&c.get("acceptsKeyPane")){f=c;break}}}if(!f){var b=this.get("mainPane");if(b&&b.get("acceptsKeyPane")){f=b}}if(a){a.willLoseKeyPaneTo(f)}if(f){f.willBecomeKeyPaneFrom(a)}this.set("keyPane",f);if(f){f.didBecomeKeyPaneFrom(a)}if(a){a.didLoseKeyPaneTo(f)}return this},currentWindowSize:null,computeWindowSize:function(){var c,b,a;if(!this._bod||!this._docElement){b=document.body;a=document.documentElement;this._bod=b;this._docElement=a}else{b=this._bod;a=this._docElement}if(window.innerHeight){c={width:window.innerWidth,height:window.innerHeight}}else{if(a&&a.clientHeight){c={width:a.clientWidth,height:a.clientHeight}}else{if(b){c={width:b.clientWidth,height:b.clientHeight}}}}return c},resize:function(){this._resize();return YES},_resize:function(){var a=this.computeWindowSize(),b=this.get("currentWindowSize");this.set("currentWindowSize",a);if(!SC.rectsEqual(a,b)){SC.device.windowSizeDidChange(a);if(this.panes){SC.run(function(){this.panes.invoke("windowSizeDidChange",b,a)},this)}}},hasFocus:NO,focus:function(b){if(!this.get("hasFocus")){SC.$("body").addClass("sc-focus").removeClass("sc-blur");if(!SC.TABBING_ONLY_INSIDE_DOCUMENT&&!SC.browser.isIE8OrLower){var a=SC.RootResponder.responder.get("keyPane");if(a){var c=a.get("nextValidKeyView");if(c){a.makeFirstResponder(c)}}}SC.run(function(){this.set("hasFocus",YES)},this)}return YES},focusin:function(a){if(this._focusTimeout){clearTimeout(this._focusTimeout)}this.focus(a)},focusout:function(a){var b=this;this._focusTimeout=setTimeout(function(){b.blur(a)},300)},blur:function(a){if(this.get("hasFocus")){SC.$("body").addClass("sc-blur").removeClass("sc-focus");SC.run(function(){this.set("hasFocus",NO)},this)}return YES},dragDidStart:function(a){this._mouseDownView=a;this._drag=a},defaultResponder:null,sendAction:function(e,f,c,g,b,a){f=this.targetForAction(e,f,c,g,a);if(f&&f.isResponderContext){return !!f.sendAction(e,c,b,a)}else{return f&&f.tryToPerform(e,c)}},_responderFor:function(e,b,a){var c=e?e.get("defaultResponder"):null;if(e){e=a||e.get("firstResponder")||e;do{if(e.respondsTo(b)){return e}}while((e=e.get("nextResponder")))}if(typeof c===SC.T_STRING){c=SC.objectForPropertyPath(c)}if(!c){return null}else{if(c.isResponderContext){return c}else{if(c.respondsTo(b)){return c}else{return null}}}},targetForAction:function(c,g,f,h,a){if(!c||(SC.typeOf(c)!==SC.T_STRING)){return null}if(g){if(SC.typeOf(g)===SC.T_STRING){g=SC.objectForPropertyPath(g)||SC.objectForPropertyPath(g,f)}if(g&&!g.isResponderContext){if(g.respondsTo&&!g.respondsTo(c)){g=null}else{if(SC.typeOf(g[c])!==SC.T_FUNCTION){g=null}}}return g}if(h){g=this._responderFor(h,c,a);if(g){return g}}var b=this.get("keyPane"),e=this.get("mainPane");if(b&&(b!==h)){g=this._responderFor(b,c)}if(!g&&e&&(e!==b)){g=this._responderFor(e,c)}if(!g&&(g=this.get("defaultResponder"))){if(SC.typeOf(g)===SC.T_STRING){g=SC.objectForPropertyPath(g);if(g){this.set("defaultResponder",g)}}if(g&&!g.isResponderContext){if(g.respondsTo&&!g.respondsTo(c)){g=null}else{if(SC.typeOf(g[c])!==SC.T_FUNCTION){g=null}}}}return g},targetViewForEvent:function(a){return a.target?SC.$(a.target).view()[0]:null},sendEvent:function(c,a,e){var f,b;SC.run(function(){if(e){f=e.get("pane")}else{f=this.get("menuPane")||this.get("keyPane")||this.get("mainPane")}b=(f)?f.sendEvent(c,a,e):null},this);return b},listenFor:function(e,c,b,a){b=b?b:this;e.forEach(function(f){var g=b[f];if(g){SC.Event.add(c,f,b,g,null,a)}},this);c=null;return b},setup:function(){this.listenFor(["touchstart","touchmove","touchend","touchcancel"],document);this.listenFor(["keydown","keyup","beforedeactivate","mousedown","mouseup","click","dblclick","mousemove","selectstart","contextmenu"],document).listenFor(["resize"],window);if(SC.browser.isIE8OrLower){this.listenFor(["focusin","focusout"],document)}else{this.listenFor(["focus","blur"],window)}this.listenFor(["webkitAnimationStart","webkitAnimationIteration","webkitAnimationEnd"],document);if(SC.platform.supportsCSSTransitions){this.listenFor(["transitionend",SC.platform.cssPrefix+"TransitionEnd"],document)}if(this.keypress){if(SC.CAPTURE_BACKSPACE_KEY&&SC.browser.isMozilla){var b=this;document.onkeypress=function(f){f=SC.Event.normalizeEvent(f);return b.keypress.call(b,f)}}else{SC.Event.add(document,"keypress",this,this.keypress)}}["drag","selectstart"].forEach(function(g){var h=this[g];if(h){if(SC.browser.isIE){var f=this;document.body["on"+g]=function(j){return h.call(f,SC.Event.normalizeEvent(event||window.event))};SC.Event.add(window,"unload",this,function(){document.body["on"+g]=null})}else{SC.Event.add(document,g,this,h)}}},this);var a="mousewheel";if(SC.browser.isMozilla){if(SC.browser.compare(SC.browser.engineVersion,"1.9.1")<0){a="DOMMouseScroll"}else{a="MozMousePixelScroll"}}SC.Event.add(document,a,this,this.mousewheel);this.set("currentWindowSize",this.computeWindowSize());if(SC.browser.os===SC.OS.ios&&SC.browser.name===SC.BROWSER.safari){if(SC.platform&&!SC.platform.touch){SC.platform.simulateTouchEvents()}var c=SC.RunLoop.prototype.endRunLoop,e;e=function(){if(c){c.apply(this,arguments)}var k=SC.RootResponder.responder._touches,j,f,l,g,n,o=NO;if(k){for(j in k){if(k[j]._rescuedElement){continue}l=f=k[j].target;while(f&&(f=f.parentNode)&&!o){o=(f===document.body)}if(!o&&l){if(l.parentNode&&l.cloneNode){var m=l.cloneNode(true);l.parentNode.replaceChild(m,l);l.swapNode=m}var h=SC.touchHoldingPen;if(!h){h=SC.touchHoldingPen=document.createElement("div");h.style.display="none";document.body.appendChild(h)}h.appendChild(l);k[j]._rescuedElement=l}}}};SC.RunLoop.prototype.endRunLoop=e}},_touchedViews:{},_touches:{},touchesForView:function(a){if(this._touchedViews[SC.guidFor(a)]){return this._touchedViews[SC.guidFor(a)].touches}},averagedTouchesForView:function(j,h){var n=this.touchesForView(j),b=j._scrr_averagedTouches||(j._scrr_averagedTouches={});if((!n||n.length===0)&&!h){b.x=0;b.y=0;b.d=0;b.touchCount=0}else{var f=this._averagedTouches_touches||(this._averagedTouches_touches=[]);f.length=0;if(n){var e,g=n.length;for(e=0;e<g;e++){f.push(n[e])}}if(h){f.push(h)}var k,c,a=0,p=0,o,m,l=0;g=f.length;for(k=0;k<g;k++){c=f[k];a+=c.pageX;p+=c.pageY}a/=g;p/=g;for(k=0;k<g;k++){c=f[k];o=Math.abs(c.pageX-a);m=Math.abs(c.pageY-p);l+=Math.pow(o*o+m*m,0.5)}l/=g;b.x=a;b.y=p;b.d=l;b.touchCount=g}return b},assignTouch:function(b,a){if(b.hasEnded){throw"Attempt to assign a touch that is already finished."}if(b.view===a){return}if(b.view){this.unassignTouch(b)}if(!this._touchedViews[SC.guidFor(a)]){this._touchedViews[SC.guidFor(a)]={view:a,touches:SC.CoreSet.create([]),touchCount:0};a.set("hasTouch",YES)}b.view=a;this._touchedViews[SC.guidFor(a)].touches.add(b);this._touchedViews[SC.guidFor(a)].touchCount++},unassignTouch:function(c){var a,b;if(!c.view){return}a=c.view;b=this._touchedViews[SC.guidFor(a)];b.touches.remove(c);b.touchCount--;if(b.touchCount<1){a.set("hasTouch",NO);b.view=null;delete this._touchedViews[SC.guidFor(a)]}c.view=undefined},_flushQueuedTouchResponder:function(){if(this._queuedTouchResponder){var a=this._queuedTouchResponder;this._queuedTouchResponder=null;this.makeTouchResponder.apply(this,a)}},makeTouchResponder:function(g,f,c,m){if(this._isMakingTouchResponder){this._queuedTouchResponder=[g,f,c,m];return}this._isMakingTouchResponder=YES;var j=g.touchResponders,b;if(g.touchResponder===f){this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder();return}var a;if(f){a=f.get("pane")}else{a=this.get("keyPane")||this.get("mainPane")}if(j.indexOf(f)<0){if(m){try{f=(a)?a.sendEvent("touchStart",g,f):null}catch(h){SC.Logger.error("Error in touchStart: "+h);f=null}}else{if(f&&((f.get?f.get("acceptsMultitouch"):f.acceptsMultitouch)||!f.hasTouch)){if(!f.touchStart(g)){f=null}}else{}}}if(!c||(j.indexOf(f)>-1&&j[j.length-1]!==f)){this.unassignTouch(g);var k=j.length-1,l=j[k];while(l&&l!==f){b=this.touchesForView(l);if((l.get?l.get("acceptsMultitouch"):l.acceptsMultitouch)||!b){if(l.touchCancelled){l.touchCancelled(g)}}k--;l=j[k];j.pop();g.touchResponder=j[k];g.nextTouchResponder=j[k-1]}}if(f){this.assignTouch(g,f);if(f!==g.touchResponder){j.push(f);g.touchResponder=f;g.nextTouchResponder=j[j.length-2]}}this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder()},captureTouch:function(j,f,h){if(!f){f=this}var g=j.targetView,c=g,e=[],b,a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Received one touch on %@".fmt(g.toString()))}while(c&&(c!==f)){e.unshift(c);c=c.get("nextResponder")}for(a=e.length,b=0;b<a;b++){c=e[b];if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Checking %@ for captureTouch response…".fmt(c.toString()))}if(c.tryToPerform("captureTouch",j)){if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Making %@ touch responder because it returns YES to captureTouch".fmt(c.toString()))}this.makeTouchResponder(j,c,h,YES);return}}if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Didn't find a view that returned YES to captureTouch, so we're calling touchStart")}this.makeTouchResponder(j,g,h,YES)},endMissingTouches:function(f){var b,a=f.length,e={},c=[];for(b=0;b<a;b++){e[f[b].identifier]=YES}for(b in this._touches){var g=this._touches[b].identifier;if(!e[g]){c.push(this._touches[b])}}for(b=0,a=c.length;b<a;b++){if(this._touches[c[b].identifier]){this._touches[c[b].identifier].lastEvent="touchend"}this.endTouch(c[b]);this.finishTouch(c[b])}},_touchCount:0,endTouch:function(b,h,c){if(!h){h="touchEnd"}var a,g,e,f;this.unassignTouch(b);if(b.touchResponder){f=b.touchResponder;g=b.touchResponders;a=g.length-1;e=g[a];while(e){if(e[h]){e[h](b,c)}if(b.touchResponder!==f){break}a--;e=g[a];h="touchCancelled"}}},finishTouch:function(b){var a;this.unassignTouch(b);if(a=b._rescuedElement){if(a.swapNode&&a.swapNode.parentNode){a.swapNode.parentNode.replaceChild(a,a.swapNode)}else{if(a.parentNode===SC.touchHoldingPen){SC.touchHoldingPen.removeChild(a)}}delete b._rescuedElement;a.swapNode=null;a=null}b.touchResponders=null;b.touchResponder=null;b.nextTouchResponder=null;b.hasEnded=YES;if(this._touches[b.identifier]){delete this._touches[b.identifier]}},touchstart:function(a){if(this.ignoreTouchHandle(a)){return YES}var b=NO;SC.run(function(){this.endMissingTouches(a.touches);var f,j=a.changedTouches,e=j.length,h,g,k,c;a.touchContext=this;for(f=0;f<e;f++){k=j[f];if(this._touches[k.identifier]&&this._touches[k.identifier].lastEvent==="touchstart"){continue}c=SC.Touch.create(k,this);if(!c.targetView){continue}c.lastEvent="touchstart";if(c.hidesTouchIntercept){b=YES}c.timeStamp=a.timeStamp;this._touches[k.identifier]=c;c.event=a;this.captureTouch(c,this);c.event=null}},this);if(b){return YES}return a.hasCustomEventHandling},touchmove:function(a){if(this.ignoreTouchHandle(a)){return YES}SC.run(function(){var c=a.changedTouches,b,p,n,g=c.length,m,l,k,o,h={},f,j,e=NO;if(this._drag){b=SC.Touch.create(a.changedTouches[0],this);this._drag.tryToPerform("mouseDragged",b)}for(n=0;n<g;n++){b=c[n];p=this._touches[b.identifier];if(!p){continue}p.lastEvent="touchmove";if(p.hidesTouchIntercept){e=YES}p.pageX=b.pageX;p.pageY=b.pageY;p.clientX=b.clientX;p.clientY=b.clientY;p.screenX=b.screenX;p.screenY=b.screenY;p.timeStamp=a.timeStamp;p.event=a;if(p.touchResponder){m=p.touchResponder;j=SC.guidFor(m);if(!h[j]){h[j]={view:m,touches:[]}}h[j].touches.push(p)}}if(e){a.allowDefault();return YES}for(n in h){m=h[n].view;l=h[n].touches;a.viewChangedTouches=l;k=this.touchesForView(m);o=k.firstObject();a.pageX=o.pageX;a.pageY=o.pageY;a.clientX=o.clientX;a.clientY=o.clientY;a.screenX=o.screenX;a.screenY=o.screenY;a.touchContext=this;m.tryToPerform("touchesDragged",a,k)}c=a.changedTouches;g=c.length;for(n=0;n<g;n++){b=c[n];p=this._touches[b.identifier];if(p){p.event=null}}},this);return a.hasCustomEventHandling},touchend:function(a){var b=NO;if(this.ignoreTouchHandle(a)){return YES}SC.run(function(){var j=a.changedTouches,h,p,n,k=j.length,l,c,g=a.isCancel?"touchCancelled":"touchEnd",m,o,e,f;for(n=0;n<k;n++){h=j[n];h.type="touchend";p=this._touches[h.identifier];if(!p){continue}p.lastEvent="touchend";p.timeStamp=a.timeStamp;p.pageX=h.pageX;p.pageY=h.pageY;p.clientX=h.clientX;p.clientY=h.clientY;p.screenX=h.screenX;p.screenY=h.screenY;p.type="touchend";p.event=a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("-- Received touch end")}if(p.hidesTouchIntercept){p.unhideTouchIntercept();b=YES}if(this._drag){this._drag.tryToPerform("mouseUp",h);this._drag=null}this.endTouch(p,g,a);this.finishTouch(p)}},this);if(b){return YES}return a.hasCustomEventHandling},touchcancel:function(a){a.isCancel=YES;this.touchend(a)},ignoreTouchHandle:function(b){if(SC.browser.isMobileSafari){var a=b.target.tagName;if(a==="INPUT"||a==="TEXTAREA"||a==="A"||a==="SELECT"){b.allowDefault();return YES}}return NO},attemptKeyEquivalent:function(b){var e=null;var c=b.commandCodes()[0];if(!c){return NO}var g=this.get("menuPane"),a=this.get("keyPane"),f=this.get("mainPane");if(g){e=g.performKeyEquivalent(c,b);if(e){return e}}if(a){e=a.performKeyEquivalent(c,b);if(e||a.get("isModal")){return e}}if(!e&&f&&(f!==a)){e=f.performKeyEquivalent(c,b);if(e||f.get("isModal")){return e}}return e},_lastModifiers:null,_handleModifierChanges:function(b){var a;a=this._lastModifiers=(this._lastModifiers||{alt:false,ctrl:false,shift:false});var c=false;if(b.altKey!==a.alt){a.alt=b.altKey;c=true}if(b.ctrlKey!==a.ctrl){a.ctrl=b.ctrlKey;c=true}if(b.shiftKey!==a.shift){a.shift=b.shiftKey;c=true}b.modifiers=a;return(c)?(this.sendEvent("flagsChanged",b)?b.hasCustomEventHandling:YES):YES},_isFunctionOrNonPrintableKey:function(a){return !!(a.altKey||a.ctrlKey||a.metaKey||((a.charCode!==a.which)&&SC.FUNCTION_KEYS[a.which]))},_isModifierKey:function(a){return !!SC.MODIFIER_KEYS[a.charCode]},keydown:function(a){if(SC.none(a)){return YES}var f=a.keyCode;if(SC.browser.isMozilla&&a.keyCode===9){this.keydownCounter=1}if(f===229){this._IMEInputON=YES;return this.sendEvent("keyDown",a)}if(f===27&&this._drag){this._drag.cancelDrag();this._drag=null;this._mouseDownView=null;return YES}if(SC.browser.isMozilla&&(a.which===8)){return true}var b=this._handleModifierChanges(a),e=a.target||a.srcElement,c=(a.which===8)&&!SC.allowsBackspaceToPreviousPage&&(e===document.body);if(this._isModifierKey(a)){return(c?NO:b)}b=YES;if(this._isFunctionOrNonPrintableKey(a)){if(f>=37&&f<=40&&SC.browser.isMozilla){return YES}b=this.sendEvent("keyDown",a);if(!b){b=!this.attemptKeyEquivalent(a)}else{b=a.hasCustomEventHandling;if(b){c=NO}}}return c?NO:b},keypress:function(b){var c,f=b.keyCode,g=SC.browser.isMozilla;if(g&&b.keyCode===9){this.keydownCounter++;if(this.keydownCounter==2){return YES}}if(g&&(b.which===8)){b.which=f;c=this.sendEvent("keyDown",b);return c?(SC.allowsBackspaceToPreviousPage||b.hasCustomEventHandling):YES}else{var e=(f>=37&&f<=40&&g),a=b.charCode;if((a!==undefined&&a===0&&b.keyCode!==9)&&!e){return YES}if(e){b.which=f}if(e||!this._isFunctionOrNonPrintableKey(b)){return this.sendEvent("keyDown",b)?b.hasCustomEventHandling:YES}}},keyup:function(a){if(this._ffevt){this._ffevt=null}var b=this._handleModifierChanges(a);if(this._isModifierKey(a)){return b}if(this._IMEInputON&&a.keyCode===13){a.isIMEInput=YES;this.sendEvent("keyDown",a);this._IMEInputON=NO}return this.sendEvent("keyUp",a)?a.hasCustomEventHandling:YES},beforedeactivate:function(c){var b=c.toElement;if(b&&b.tagName&&b.tagName!=="IFRAME"){var a=SC.$(b).view()[0];if(a&&a.get("blocksIEDeactivate")){return NO}}return YES},mousedown:function(f){var e;if(SC.platform.touch){f.allowDefault();this._lastMouseDownCustomHandling=YES;return YES}this._clickCount+=1;if(!this._lastMouseUpAt||((Date.now()-this._lastMouseUpAt)>250)){this._clickCount=1}else{var c=this._lastMouseDownX-f.clientX,a=this._lastMouseDownY-f.clientY,h=Math.sqrt(c*c+a*a);if(h>8){this._clickCount=1}}f.clickCount=this._clickCount;this._lastMouseDownX=f.clientX;this._lastMouseDownY=f.clientY;var b=this.targetViewForEvent(f);if(b){e=b.getPath("pane.firstResponder")}if(e&&e.get("blurOnMouseDown")&&e!==b){e.resignFirstResponder(f)}b=this._mouseDownView=this.sendEvent("mouseDown",f,b);if(b&&b.respondsTo("mouseDragged")){this._mouseCanDrag=YES}var g=b?f.hasCustomEventHandling:YES;this._lastMouseDownCustomHandling=g;return g},mouseup:function(b){var g=NO;if(SC.platform.touch){b.allowDefault();this._lastMouseUpCustomHandling=YES;return YES}if(this._drag){this._drag.tryToPerform("mouseUp",b);this._drag=null}var f=null,a=this._mouseDownView,e=this.targetViewForEvent(b);b.clickCount=this._clickCount;if(a){f=this.sendEvent("mouseUp",b,a);if(!f&&(this._clickCount===2)){f=this.sendEvent("doubleClick",b,a);g=YES}if(!f){f=this.sendEvent("click",b,a);g=YES}}if(!f&&!g){if(this._clickCount===2){f=this.sendEvent("doubleClick",b,e)}if(!f){f=this.sendEvent("click",b,e)}}this._mouseCanDrag=NO;this._mouseDownView=null;this._lastMouseUpAt=Date.now();var c=f?b.hasCustomEventHandling:YES;this._lastMouseUpCustomHandling=c;return c},click:function(a){if(!this._lastMouseUpCustomHandling||!this._lastMouseDownCustomHandling){a.preventDefault();a.stopPropagation();return NO}return YES},dblclick:function(a){if(SC.browser.isIE8OrLower){this._clickCount=2;this.mouseup(a)}},mousewheel:function(b){var a=this.targetViewForEvent(b),c=this.sendEvent("mouseWheel",b,a);return(c)?b.hasCustomEventHandling:YES},_lastHovered:null,mousemove:function(a){if(SC.platform.touch){a.allowDefault();return YES}if(SC.browser.isIE){if(this._lastMoveX===a.clientX&&this._lastMoveY===a.clientY){return}}this._lastMoveX=a.clientX;this._lastMoveY=a.clientY;SC.run(function(){if(this._drag){if(SC.browser.isIE){if(this._lastMouseDownX!==a.clientX||this._lastMouseDownY!==a.clientY){this._drag.tryToPerform("mouseDragged",a)}}else{this._drag.tryToPerform("mouseDragged",a)}}else{var e=this._lastHovered||[],f=[],h,g,b,c=this.targetViewForEvent(a);while(c&&(c!==this)){f.push(c);c=c.get("nextResponder")}for(g=0,b=e.length;g<b;g++){c=e[g];h=c.respondsTo("mouseExited");if(h&&f.indexOf(c)===-1){c.tryToPerform("mouseExited",a)}}for(g=0,b=f.length;g<b;g++){c=f[g];if(e.indexOf(c)!==-1){c.tryToPerform("mouseMoved",a)}else{c.tryToPerform("mouseEntered",a)}}this._lastHovered=f;if(this._mouseDownView){if(SC.browser.isIE){if(this._lastMouseDownX!==a.clientX&&this._lastMouseDownY!==a.clientY){this._mouseDownView.tryToPerform("mouseDragged",a)}}else{this._mouseDownView.tryToPerform("mouseDragged",a)}}}},this)},_mouseCanDrag:YES,selectstart:function(b){var c=this.targetViewForEvent(b),a=this.sendEvent("selectStart",b,c);if(c&&c.respondsTo("mouseDragged")){return(a!==null?YES:NO)&&!this._mouseCanDrag}else{return(a!==null?YES:NO)}},drag:function(){return false},contextmenu:function(b){var a=this.targetViewForEvent(b);a=this.sendEvent("contextMenu",b,a);ret=a?b.hasCustomEventHandling:YES;return ret},webkitAnimationStart:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidStart",b,a)}catch(c){SC.Logger.warn("Exception during animationDidStart: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationIteration:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidIterate",b,a)}catch(c){SC.Logger.warn("Exception during animationDidIterate: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationEnd:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidEnd",b,a)}catch(c){SC.Logger.warn("Exception during animationDidEnd: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},transitionEnd:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("transitionDidEnd",b,a)}catch(c){SC.Logger.warn("Exception during transitionDidEnd: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES}});SC.Touch=function(e,a){this.touchContext=a;this.identifier=e.identifier;var c=e.target,b;if(c&&SC.$(c).hasClass("touch-intercept")){e.target.style.webkitTransform="translate3d(0px,-5000px,0px)";c=document.elementFromPoint(e.pageX,e.pageY);if(c){b=SC.$(c).view()[0]}this.hidesTouchIntercept=NO;if(c.tagName==="INPUT"){this.hidesTouchIntercept=e.target}else{e.target.style.webkitTransform="translate3d(0px,0px,0px)"}}else{b=e.target?SC.$(e.target).view()[0]:null}this.targetView=b;this.target=c;this.hasEnded=NO;this.type=e.type;this.clickCount=1;this.view=undefined;this.touchResponder=this.nextTouchResponder=undefined;this.touchResponders=[];this.startX=this.pageX=e.pageX;this.startY=this.pageY=e.pageY;this.clientX=e.clientX;this.clientY=e.clientY;this.screenX=e.screenX;this.screenY=e.screenY;this.lastEvent=undefined};SC.Touch.prototype={unhideTouchIntercept:function(){var a=this.hidesTouchIntercept;if(a){setTimeout(function(){a.style.webkitTransform="translate3d(0px,0px,0px)"},500)}},allowDefault:function(){if(this.event){this.event.hasCustomEventHandling=YES}},preventDefault:function(){if(this.event){this.event.preventDefault()}},stopPropagation:function(){if(this.event){this.event.stopPropagation()}},stop:function(){if(this.event){this.event.stop()}},end:function(){this.touchContext.endTouch(this)},makeTouchResponder:function(b,c,a){this.touchContext.makeTouchResponder(this,b,c,a)},captureTouch:function(a,b){this.touchContext.captureTouch(this,a,b)},touchesForView:function(a){return this.touchContext.touchesForView(a)},touchesForResponder:function(a){return this.touchContext.touchesForView(a)},averagedTouchesForView:function(a,b){return this.touchContext.averagedTouchesForView(a,(b?this:null))}};SC.mixin(SC.Touch,{create:function(b,a){return new SC.Touch(b,a)}});SC.ready(SC.RootResponder,SC.RootResponder.ready=function(){var a;a=SC.RootResponder.responder=SC.RootResponder.create();a.setup()});sc_require("system/core_query");sc_require("system/ready");sc_require("system/root_responder");sc_require("system/platform");SC.PORTRAIT_ORIENTATION="portrait";SC.LANDSCAPE_ORIENTATION="landscape";SC.NO_ORIENTATION="desktop";SC.device=SC.Object.create({orientation:SC.NO_ORIENTATION,isOffline:NO,mouseLocation:function(){var a=SC.RootResponder.responder,c=a._lastMoveX,b=a._lastMoveY;if(SC.empty(c)||SC.empty(b)){return null}return{x:c,y:b}}.property(),init:function(){arguments.callee.base.apply(this,arguments);if(navigator&&navigator.onLine===false){this.set("isOffline",YES)}},setup:function(){var a=SC.RootResponder.responder;a.listenFor(["online","offline"],window,this);this.orientationHandlingShouldChange()},orientationHandlingShouldChange:function(){if(SC.platform.windowSizeDeterminesOrientation){SC.Event.remove(window,"orientationchange",this,this.orientationchange);this.windowSizeDidChange(SC.RootResponder.responder.get("currentWindowSize"))}else{if(SC.platform.supportsOrientationChange){SC.Event.add(window,"orientationchange",this,this.orientationchange);this.orientationchange()}}},windowSizeDidChange:function(a){if(SC.platform.windowSizeDeterminesOrientation){if(!SC.browser.iOS){SC.run(function(){if(SC.platform.touch){if(a.height>=a.width){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}}else{SC.device.set("orientation",SC.NO_ORIENTATION)}})}else{SC.run(function(){if(a.width===window.screen.width){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}})}return YES}return NO},orientationchange:function(a){SC.run(function(){if(window.orientation===0||window.orientation===180){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}})},orientationObserver:function(){var a=SC.$(document.body),b=this.get("orientation");if(b===SC.PORTRAIT_ORIENTATION){a.addClass("portrait")}else{a.removeClass("portrait")}if(b===SC.LANDSCAPE_ORIENTATION){a.addClass("landscape")}else{a.removeClass("landscape")}}.observes("orientation"),online:function(a){this.set("isOffline",NO)},offline:function(a){this.set("isOffline",YES)}});SC.ready(function(){SC.device.setup()});SC.MODIFIED_KEY_BINDINGS={"ctrl_.":"cancel",shift_tab:"insertBacktab",shift_left:"moveLeftAndModifySelection",shift_right:"moveRightAndModifySelection",shift_up:"moveUpAndModifySelection",shift_down:"moveDownAndModifySelection",alt_left:"moveLeftAndModifySelection",alt_right:"moveRightAndModifySelection",alt_up:"moveUpAndModifySelection",alt_down:"moveDownAndModifySelection",ctrl_a:"selectAll"};SC.BASE_KEY_BINDINGS={escape:"cancel",backspace:"deleteBackward","delete":"deleteForward","return":"insertNewline",tab:"insertTab",left:"moveLeft",right:"moveRight",up:"moveUp",down:"moveDown",home:"moveToBeginningOfDocument",end:"moveToEndOfDocument",pagedown:"pageDown",pageup:"pageUp"};SC.Page=SC.Object.extend({owner:null,get:function(a){var b=this[a];if(b&&b.isClass){this[a]=b=b.create({page:this});if(!this.get("inDesignMode")){b.awake()}return b}else{return arguments.callee.base.apply(this,arguments)}},awake:function(){var b,a;for(a in this){if(!this.hasOwnProperty(a)){continue}b=this[a];if(b&&b.isViewClass){this[a]=b=b.create({page:this})}}return this},getIfConfigured:function(b){var a=this[b];return(a&&a.isViewClass)?null:this.get(b)},loc:function(c){var a,b;for(b in c){if(!c.hasOwnProperty(b)){continue}a=this[b];if(!a||!a.isViewClass){continue}a.loc(c[b])}return this}});SC.Page.design=SC.Page.create;SC.Page.localization=function(a){return a};sc_require("system/builder");SC.MODE_REPLACE="replace";SC.MODE_APPEND="append";SC.MODE_PREPEND="prepend";SC.NON_PIXEL_PROPERTIES=["zIndex","fontWeight","opacity"];SC.COMBO_STYLES={WebkitTransition:["WebkitTransitionProperty","WebkitTransitionDuration","WebkitTransitionDelay","WebkitTransitionTimingFunction"]};SC.RenderContext=SC.Builder.create({SELF_CLOSING:SC.CoreSet.create().addEach(["area","base","basefront","br","hr","input","img","link","meta"]),init:function(f,e){var b,a;if(e){this.prevObject=e;this.strings=e.strings;this.offset=e.length+e.offset}if(!this.strings){this.strings=[]}if(f===undefined){f="div";a=YES}else{if(f==="div"||f==="label"||f==="a"){a=YES}else{if(SC.typeOf(f)===SC.T_STRING){f=f.toLowerCase();a=YES}}}if(a){this._tagName=f;this._needsTag=YES;this.needsContent=YES;var g=this;while(g){g.length++;g=g.prevObject}this.strings.push(null);this._selfClosing=this.SELF_CLOSING.contains(f)}else{this._elem=f;this._needsTag=NO;this.length=0;this.needsContent=NO}return this},strings:null,offset:0,length:0,updateMode:SC.MODE_REPLACE,needsContent:NO,get:function(b){var a=this.strings||[];return(b===undefined)?a.slice(this.offset,this.length):a[b+this.offset]},push:function(e){var b=this.strings,a=arguments.length;if(!b){this.strings=b=[]}if(a>1){b.push.apply(b,arguments)}else{b.push(e)}var f=this;while(f){f.length+=a;f=f.prevObject}this.needsContent=YES;return this},text:function(c){var b=arguments.length,a=0;for(a=0;a<b;a++){this.push(SC.RenderContext.escapeHTML(arguments[a]))}return this},join:function(b){if(this._needsTag){this.end()}var a=this.strings;return a?a.join(b||""):""},begin:function(a){return SC.RenderContext(a,this)},element:function(){return this._elem?this._elem:SC.$(this.join())[0]},remove:function(a){if(!a){return}var b,c=this._elem;if(!c||!c.removeChild){return}b=document.getElementById(a);if(b){b=c.removeChild(b);b=null}},update:function(){var c=this._elem,h=this.updateMode,f,e,a,g,b;this._innerHTMLReplaced=NO;if(!c){return}f=this.$();if(this.length>0){this._innerHTMLReplaced=YES;if(h===SC.MODE_REPLACE){f.html(this.join())}else{a=c.cloneNode(false);a.innerHTML=this.join();g=a.firstChild;while(g){b=g.nextSibling;c.insertBefore(g,b);g=b}g=b=a=null}}if(this._idDidChange&&(e=this._id)){f.attr("id",e)}jQuery.Buffer.flush();c=this._elem=null;return this.prevObject||this},_DEFAULT_ATTRS:{},end:function(){var p="",b="",e,n,l,j,m=this._attrs,f=this._classNames,a=this._id,o=this._styles,k,h;p="<"+this._tagName;if(m||f||o||a){if(!m){m=this._DEFAULT_ATTRS}if(a){m.id=a}if(f){m["class"]=f.join(" ")}if(o){for(l in o){if(!o.hasOwnProperty(l)){continue}j=o[l];if(j===null){continue}if(typeof j===SC.T_NUMBER&&!SC.NON_PIXEL_PROPERTIES.contains(l)){j+="px"}b=b+this._dasherizeStyleName(l)+": "+j+"; "}m.style=b}p=p+" ";for(l in m){if(!m.hasOwnProperty(l)){continue}j=m[l];if(j===null){continue}p=p+l+'="'+j+'" '}if(m===this._DEFAULT_ATTRS){delete m.style;delete m["class"];delete m.id}}k=this.strings;h=(this._selfClosing===NO)?NO:(this.length===1);p=p+(h?" />":">");k[this.offset]=p;if(!h){k.push("</"+this._tagName+">");var g=this;while(g){g.length++;g=g.prevObject}}this._elem=null;return this.prevObject||this},tag:function(a,b){return this.begin(a,b).end()},tagName:function(a){if(a===undefined){if(!this._tagName&&this._elem){this._tagName=this._elem.tagName}return this._tagName}else{this._tagName=a;this._tagNameDidChange=YES;return this}},id:function(a){if(a===undefined){if(!this._id&&this._elem){this._id=this._elem.id}return this._id}else{this._id=a;this._idDidChange=YES;return this}},classNames:function(b,a){if(this._elem){if(b){this.$().resetClassNames().addClass(b);return this}else{return this.$().attr("class").split(" ")}}if(b===undefined){if(this._cloneClassNames){this._classNames=(this._classNames||[]).slice();this._cloneClassNames=NO}if(!this._classNames){this._classNames=[]}return this._classNames}else{this._classNames=b;this._cloneClassNames=a||NO;this._classNamesDidChange=YES;return this}},hasClass:function(a){if(this._elem){return this.$().hasClass(a)}return this.classNames().indexOf(a)>=0},addClass:function(g){if(g===undefined||g===null){SC.Logger.warn("You are adding an undefined or empty class"+this.toString());return this}if(this._elem){if(SC.typeOf(g)===SC.T_STRING){this.$().addClass(g)}else{var c,b=g.length;for(c=0;c<b;c++){this.$().addClass(g[c])}}return this}var h=this.classNames();if(SC.typeOf(g)===SC.T_STRING){if(h.indexOf(g)<0){h.push(g);this._classNamesDidChange=YES}}else{var e;for(var f=0,a=g.length;f<a;f++){e=g[f];if(h.indexOf(e)<0){h.push(e);this._classNamesDidChange=YES}}}return this},removeClass:function(b){if(this._elem){this.$().removeClass(b);return this}var c=this._classNames,a;if(c&&(a=c.indexOf(b))>=0){if(this._cloneClassNames){c=this._classNames=c.slice();this._cloneClassNames=NO}c[a]=null;this._classNamesDidChange=YES}return this},resetClassNames:function(){if(this._elem){this.$().resetClassNames();return this}this._classNames=[];this._classNamesDidChange=YES;return this},setClass:function(e,c){if(this._elem){this.$().setClass(e,c);return this}var g,a,b,f;if(c!==undefined){return c?this.addClass(e):this.removeClass(e)}else{g=this._classNames;if(!g){g=this._classNames=[]}if(this._cloneClassNames){g=this._classNames=g.slice();this._cloneClassNames=NO}f=NO;for(b in e){if(!e.hasOwnProperty(b)){continue}a=g.indexOf(b);if(e[b]){if(a<0){g.push(b);f=YES}}else{if(a>=0){g[a]=null;f=YES}}}if(f){this._classNamesDidChange=YES}}return this},_STYLE_REGEX:/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g,styles:function(e,f){if(this._elem){if(e){this.$().resetStyles().css(e)}return this.$().styles()}var a,c,b;if(e===undefined){if(!this._styles&&this._elem){a=this.$().attr("style");if(a&&(a=a.toString()).length>0){if(SC.browser.name===SC.BROWSER.ie){a=a.toLowerCase()}e={};c=this._STYLE_REGEX;c.lastIndex=0;while(b=c.exec(a)){e[this._camelizeStyleName(b[1])]=b[2]}this._styles=e;this._cloneStyles=NO}else{this._styles={}}}else{if(!this._styles){this._styles={}}else{if(this._cloneStyles){this._styles=SC.clone(this._styles);this._cloneStyles=NO}}}return this._styles}else{this._styles=e;this._cloneStyles=f||NO;this._stylesDidChange=YES;return this}},_deleteComboStyles:function(f,e){var h=SC.COMBO_STYLES[e],g=NO,c;if(h){for(var a=0,b=h.length;a<b;a++){c=h[a];if(f[c]){delete f[c];g=YES}}}return g},resetStyles:function(){this.styles({});return this},addStyle:function(a,f){if(this._elem){this.$().css(a,f);return this}var b,e=NO,c=this.styles();if(typeof a===SC.T_STRING){if(f===undefined){return c[a]}else{e=this._deleteComboStyles(c,a);if(c[a]!==f){c[a]=f;e=YES}if(e){this._stylesDidChange=YES}}}else{for(b in a){if(!a.hasOwnProperty(b)){continue}e=e||this._deleteComboStyles(c,b);f=a[b];if(c[b]!==f){c[b]=f;e=YES}}if(e){this._stylesDidChange=YES}}return this},removeStyle:function(a){if(this._elem){this.$().css(a,null);return this}if(!this._styles){return this}var b=this.styles();if(b[a]){b[a]=null;this._stylesDidChange=YES}},attr:function(a,f){if(this._elem){this.$().attr(a,f);return this}var c,b=this._attrs,e=NO;if(!b){this._attrs=b={}}if(typeof a===SC.T_STRING){if(f===undefined){return b[a]}else{if(b[a]!==f){b[a]=f;this._attrsDidChange=YES}}}else{for(c in a){if(!a.hasOwnProperty(c)){continue}f=a[c];if(b[c]!==f){b[c]=f;e=YES}}if(e){this._attrsDidChange=YES}}return this},removeAttr:function(a){if(this._elem){this.$().removeAttr(a);return this}},$:function(c){var a,b=this._elem;a=!b?SC.$.buffer([]):(c===undefined)?SC.$.buffer(b):SC.$.buffer(c,b);b=null;return a},_camelizeStyleName:function(a){var b=a.match(/^-(webkit|moz|o)-/),c=SC.String.camelize(a);if(b){return c.substr(0,1).toUpperCase()+c.substr(1)}else{return c}},_dasherizeStyleName:function(a){var b=SC.String.dasherize(a);if(b.match(/^(webkit|moz|ms|o)-/)){b="-"+b}return b}});SC.RenderContext.fn.html=SC.RenderContext.fn.push;SC.RenderContext.fn.css=SC.RenderContext.fn.addStyle;(function(){var b=/[&<>]/g,a=function(c){switch(c){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;"}};SC.RenderContext.escapeHTML=function(c){if(!c){return""}if(SC.typeOf(c)===SC.T_NUMBER){c=c.toString()}return c.replace(b,a)}})();(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelRequestAnimationFrame=window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(j,f){var e=new Date().getTime();var g=Math.max(0,16-(e-b));var h=window.setTimeout(function(){j(e+g)},g);b=e+g;return h}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(e){clearTimeout(e)}}}());SC.SelectionSet=SC.Object.extend(SC.Enumerable,SC.Freezable,SC.Copyable,{isSelectionSet:YES,length:function(){var a=0,b=this._sets,c=this._objects;if(c){a+=c.get("length")}if(b){b.forEach(function(e){a+=e.get("length")})}return a}.property().cacheable(),sources:function(){var c=[],e=this._sets,b=e?e.length:0,a,g,f;for(a=0;a<b;a++){g=e[a];if(g&&g.get("length")>0&&g.source){c.push(g.source)}}return c}.property().cacheable(),indexSetForSource:function(f){if(!f||!f.isSCArray){return null}var b=this._indexSetCache,e=this._objects,c,a;if(!b){b=this._indexSetCache={}}c=b[SC.guidFor(f)];if(c&&c._sourceRevision&&(c._sourceRevision!==f.propertyRevision)){c=null}if(!c){c=this._indexSetForSource(f,NO);if(c&&c.get("length")===0){c=null}if(e){if(c){c=c.copy()}e.forEach(function(g){if((a=f.indexOf(g))>=0){if(!c){c=SC.IndexSet.create()}c.add(a)}},this)}if(c){c=b[SC.guidFor(f)]=c.frozenCopy();c._sourceRevision=f.propertyRevision}}return c},_indexSetForSource:function(g,h){if(h===undefined){h=YES}var e=SC.guidFor(g),c=this[e],f=this._sets,a=f?f.length:0,b=null;if(c>=a){c=null}if(SC.none(c)){if(h&&!this.isFrozen){this.propertyWillChange("sources");if(!f){f=this._sets=[]}b=f[a]=SC.IndexSet.create();b.source=g;this[e]=a;this.propertyDidChange("sources")}}else{b=f?f[c]:null}return b},add:function(a,b,e){if(this.isFrozen){throw SC.FROZEN_ERROR}var h,g,l,k,c,f,j,m;if(b===undefined&&e===undefined){if(!a){throw"Must pass params to SC.SelectionSet.add()"}if(a.isIndexSet){return this.add(a.source,a)}if(a.isSelectionSet){h=a._sets;m=a._objects;g=h?h.length:0;this.beginPropertyChanges();for(l=0;l<g;l++){k=h[l];if(k&&k.get("length")>0){this.add(k.source,k)}}if(m){this.addObjects(m)}this.endPropertyChanges();return this}}k=this._indexSetForSource(a,YES);c=this.get("length");j=k.get("length");f=c-j;k.add(b,e);this._indexSetCache=null;f+=k.get("length");if(f!==c){this.propertyDidChange("length");this.enumerableContentDidChange();if(j===0){this.notifyPropertyChange("sources")}}return this},remove:function(a,b,e){if(this.isFrozen){throw SC.FROZEN_ERROR}var h,g,l,k,c,f,j,m;if(b===undefined&&e===undefined){if(!a){throw"Must pass params to SC.SelectionSet.remove()"}if(a.isIndexSet){return this.remove(a.source,a)}if(a.isSelectionSet){h=a._sets;m=a._objects;g=h?h.length:0;this.beginPropertyChanges();for(l=0;l<g;l++){k=h[l];if(k&&k.get("length")>0){this.remove(k.source,k)}}if(m){this.removeObjects(m)}this.endPropertyChanges();return this}}k=this._indexSetForSource(a,YES);c=this.get("length");f=c-k.get("length");if(k&&(m=this._objects)){if(e!==undefined){b=SC.IndexSet.create(b,e);e=undefined}m.forEach(function(n){l=a.indexOf(n);if(b.contains(l)){m.remove(n);f--}},this)}k.remove(b,e);j=k.get("length");f+=j;this._indexSetCache=null;if(f!==c){this.propertyDidChange("length");this.enumerableContentDidChange();if(j===0){this.notifyPropertyChange("sources")}}return this},contains:function(b,e,a){if(e===undefined&&a===undefined){return this.containsObject(b)}var c=this.indexSetForSource(b);if(!c){return NO}return c.contains(e,a)},intersects:function(b,e,a){var c=this.indexSetForSource(b,NO);if(!c){return NO}return c.intersects(e,a)},_TMP_ARY:[],addObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.addObjects(c);c.length=0;return a},addObjects:function(a){var e=this._objects,b,c;if(!e){e=this._objects=SC.CoreSet.create()}b=e.get("length");e.addEach(a);c=e.get("length");this._indexSetCache=null;if(c!==b){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},removeObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.removeObjects(c);c.length=0;return a},removeObjects:function(b){var f=this._objects,c,e,a;if(!f){return this}c=f.get("length");f.removeEach(b);e=f.get("length");if(a=this._sets){a.forEach(function(g){c+=g.get("length");g.removeObjects(b);e+=g.get("length")},this)}this._indexSetCache=null;if(e!==c){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},containsObject:function(c){var f=this._objects;if(f&&f.contains(c)){return YES}var e=this._sets,b=e?e.length:0,a,g;for(a=0;a<b;a++){g=e[a];if(g&&g.indexOf(c)>=0){return YES}}return NO},constrain:function(f){var h,b,a,e;this.beginPropertyChanges();this.get("sources").forEach(function(j){if(j===f){return}var k=this._indexSetForSource(f,NO);if(k){this.remove(f,k)}},this);h=this._indexSetForSource(f,NO);if(h&&((a=h.get("max"))>(b=f.get("length")))){this.remove(f,b,a-b)}if(e=this._objects){var c,g;for(c=e.length-1;c>=0;c--){g=e[c];if(f.indexOf(g)<0){this.removeObject(g)}}}this.endPropertyChanges();return this},isEqual:function(h){var g,e,b,a,c,f;if(!h||!h.isSelectionSet){return NO}if(h===this){return YES}if((this._sets===h._sets)&&(this._objects===h._objects)){return YES}if(this.get("length")!==h.get("length")){return NO}g=this._objects;e=h._objects;if(g||e){if((g?g.get("length"):0)!==(e?e.get("length"):0)){return NO}if(g&&!g.isEqual(e)){return NO}}c=this.get("sources");a=c.get("length");for(b=0;b<a;b++){f=c.objectAt(b);g=this._indexSetForSource(f,NO);e=this._indexSetForSource(f,NO);if(!!e!==!!g){return NO}if(g&&!g.isEqual(e)){return NO}}return YES},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}if(this._sets){this._sets.length=0}if(this._objects){this._objects=null}this._indexSetCache=null;this.propertyDidChange("length");this.enumerableContentDidChange();this.notifyPropertyChange("sources");return this},copy:function(){var c=this.constructor.create(),e=this._sets,b=e?e.length:0,a,f;if(e&&b>0){e=c._sets=e.slice();for(a=0;a<b;a++){if(!(f=e[a])){continue}f=e[a]=f.copy();c[SC.guidFor(f.source)]=a}}if(this._objects){c._objects=this._objects.copy()}return c},freeze:function(){if(this.get("isFrozen")){return this}var a=this._sets,b=a?a.length:0,c;while(--b>=0){c=a[b];if(c){c.freeze()}}if(this._objects){this._objects.freeze()}this.set("isFrozen",YES);return this},toString:function(){var a=this._sets||[];a=a.map(function(b){return b.toString().replace("SC.IndexSet",SC.guidFor(b.source))},this);if(this._objects){a.push(this._objects.toString())}return"SC.SelectionSet:%@<%@>".fmt(SC.guidFor(this),a.join(","))},firstObject:function(){var b=this._sets,c=this._objects;if(b&&b.get("length")>0){var f=b?b[0]:null,e=f?f.source:null,a=f?f.firstObject():-1;if(e&&a>=0){return e.objectAt(a)}}return c?c.firstObject():undefined}.property(),nextObject:function(c,f,b){var e,a;if(c===0){e=b.objects=[];this.forEach(function(g){e.push(g)},this);b.max=e.length}e=b.objects;a=e[c];if(c+1>=b.max){b.objects=b.max=null}return a},forEach:function(h,f){var c=this._sets,e=this._objects,b=c?c.length:0,g,a;for(a=0;a<b;a++){g=c[a];if(g){g.forEachObject(h,f)}}if(e){e.forEach(h,f)}return this}});SC.SelectionSet.prototype.clone=SC.SelectionSet.prototype.copy;SC.SelectionSet.EMPTY=SC.SelectionSet.create().freeze();sc_require("mixins/delegate_support");SC.SparseArray=SC.Object.extend(SC.Observable,SC.Enumerable,SC.Array,SC.DelegateSupport,{_requestingLength:0,_requestingIndex:0,length:function(){var a=this.delegate;if(a&&SC.none(this._length)&&a.sparseArrayDidRequestLength){this._requestingLength++;a.sparseArrayDidRequestLength(this);this._requestingLength--}return this._length||0}.property().cacheable(),provideLength:function(b){var a;if(SC.none(b)){this._sa_content=null}if(b!==this._length){a=this._length;this._length=b;if(this._requestingLength<=0){this.arrayContentDidChange(0,a||0,b||0)}}return this},rangeWindowSize:1,requestedRangeIndex:null,init:function(){arguments.callee.base.apply(this,arguments);this.requestedRangeIndex=[];this._TMP_PROVIDE_ARRAY=[];this._TMP_PROVIDE_RANGE={length:1};this._TMP_RANGE={}},objectAt:function(a,e){var c=this._sa_content,b;if(!c){c=this._sa_content=[]}if((b=c[a])===undefined){if(!e){this.requestIndex(a)}b=c[a]}return b},definedIndexes:function(e){var c=SC.IndexSet.create(),f=this._sa_content,b,a;if(!f){return c.freeze()}if(e){e.forEach(function(g){if(f[g]!==undefined){c.add(g)}})}else{a=f.length;for(b=0;b<a;b++){if(f[b]!==undefined){c.add(b)}}}return c.freeze()},_TMP_RANGE:{},requestIndex:function(b){var c=this.delegate;if(!c){return this}var a=this.get("rangeWindowSize"),f=b;if(a>1){f=f-Math.floor(f%a)}if(a<1){a=1}this._requestingIndex++;if(c.sparseArrayDidRequestRange){var e=this._TMP_RANGE;if(this.wasRangeRequested(f)===-1){e.start=f;e.length=a;this.requestedRangeIndex.push(f);c.sparseArrayDidRequestRange(this,e)}}else{if(c.sparseArrayDidRequestIndex){while(--a>=0){c.sparseArrayDidRequestIndex(this,f+a)}}}this._requestingIndex--;return this},wasRangeRequested:function(c){var b,a;for(b=0,a=this.requestedRangeIndex.length;b<a;b++){if(this.requestedRangeIndex[b]===c){return b}}return -1},rangeRequestCompleted:function(b){var a=this.wasRangeRequested(b);if(a>=0){this.requestedRangeIndex.removeAt(a,1);return YES}return NO},provideObjectsInRange:function(b,f){var c=this._sa_content;if(!c){c=this._sa_content=[]}var e=b.start,a=b.length;while(--a>=0){c[e+a]=f.objectAt(a)}if(this._requestingIndex<=0){this.arrayContentDidChange(b.start,b.length,b.length)}return this},provideObjectAtIndex:function(c,b){var e=this._TMP_PROVIDE_ARRAY,a=this._TMP_PROVIDE_RANGE;e[0]=b;a.start=c;return this.provideObjectsInRange(a,e)},objectsDidChangeInRange:function(a){var b=this._sa_content;if(b){if(a.start===0&&SC.maxRange(a)>=b.length){this._sa_content=null}else{var e=a.start,c=Math.min(e+a.length,b.length);while(--c>=e){b[c]=undefined}}}this.arrayContentDidChange(a.start,a.length,a.length);return this},indexOf:function(e){var f,b,a=this.delegate;if(a&&a.sparseArrayDidRequestIndexOf){b=a.sparseArrayDidRequestIndexOf(this,e)}if(SC.none(b)){f=this._sa_content;if(!f){f=this._sa_content=[]}b=f.indexOf(e)}return b},replace:function(b,h,f){f=f||[];var c=this.delegate;if(c){if(!c.sparseArrayShouldReplace||!c.sparseArrayShouldReplace(this,b,h,f)){return this}}var e=this._sa_content;if(!e){e=this._sa_content=[]}e.replace(b,h,f);var a=f?(f.get?f.get("length"):f.length):0;var g=a-h;this.arrayContentWillChange(b,h,a);if(!SC.none(this._length)){this.propertyWillChange("length");this._length+=g;this.propertyDidChange("length")}this.beginPropertyChanges();this.arrayContentDidChange(b,h,a);this.enumerableContentDidChange(b,h,g);this.endPropertyChanges();return this},reset:function(){var a;this._sa_content=null;a=this._length;this._length=null;this.arrayContentDidChange(0,a,0);this.invokeDelegateMethod(this.delegate,"sparseArrayDidReset",this);return this}});SC.SparseArray.array=function(a){return this.create({_length:a||0})};SC.Timer=SC.Object.extend({target:null,action:null,isPooled:NO,interval:0,startTime:null,repeats:NO,until:null,isPaused:NO,isScheduled:NO,isValid:YES,lastFireTime:0,fireTime:function(){if(!this.get("isValid")){return -1}var f=this.get("startTime");if(!f||f===0){return -1}var a=this.get("interval"),c=this.get("lastFireTime");if(c<f){c=f}var b;if(this.get("repeats")){if(a===0){b=c}else{b=f+(Math.floor((c-f)/a)+1)*a}}else{b=f+a}var e=this.get("until");if(e&&e>0&&b>e){b=e}return b}.property("interval","startTime","repeats","until","isValid","lastFireTime").cacheable(),schedule:function(){if(!this.get("isValid")){return this}this.beginPropertyChanges();if(!this.startTime){this.set("startTime",SC.RunLoop.currentRunLoop.get("startTime"))}var a=this.get("fireTime"),b=this.get("lastFireTime");if(a>=b){this.set("isScheduled",YES);SC.RunLoop.currentRunLoop.scheduleTimer(this,a)}this.endPropertyChanges();return this},invalidate:function(){this.beginPropertyChanges();this.set("isValid",NO);var a=SC.RunLoop.currentRunLoop;if(a){a.cancelTimer(this)}this.action=this.target=null;this.endPropertyChanges();if(this.get("isPooled")){SC.Timer.returnTimerToPool(this)}return this},fire:function(){var b=Date.now();this.set("lastFireTime",b);var a=this.get("fireTime");if(!this.get("isPaused")){this.performAction()}if(a>b){this.schedule()}else{this.invalidate()}},performAction:function(){var a=SC.typeOf(this.action);if(a==SC.T_FUNCTION){this.action.call((this.target||this),this)}else{if(a===SC.T_STRING){if(this.action.indexOf(".")>=0){var f=this.action.split(".");var c=f.pop();var e=SC.objectForPropertyPath(f,window);var b=e.get?e.get(c):e[c];if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(e,this)}else{throw"%@: Timer could not find a function at %@".fmt(this,this.action)}}else{SC.RootResponder.responder.sendAction(this.action,this.target,this)}}}},init:function(){arguments.callee.base.apply(this,arguments);if(this.startTime instanceof Date){this.startTime=this.startTime.getTime()}if(this.until instanceof Date){this.until=this.until.getTime()}},RESET_DEFAULTS:{target:null,action:null,isPooled:NO,isPaused:NO,isScheduled:NO,isValid:YES,interval:0,repeats:NO,until:null,startTime:null,lastFireTime:0},reset:function(b){if(!b){b=SC.EMPTY_HASH}this.propertyWillChange("fireTime");var c=this.RESET_DEFAULTS;for(var a in c){if(!c.hasOwnProperty(a)){continue}this[a]=SC.none(b[a])?c[a]:b[a]}this.propertyDidChange("fireTime");return this},removeFromTimerQueue:function(c){var b=this._timerQueuePrevious,a=this._timerQueueNext;if(!b&&!a&&c!==this){return c}if(b){b._timerQueueNext=a}if(a){a._timerQueuePrevious=b}this._timerQueuePrevious=this._timerQueueNext=null;return(c===this)?a:c},scheduleInTimerQueue:function(c,b){this._timerQueueRunTime=b;var a=c;var e=null;while(a&&a._timerQueueRunTime<b){e=a;a=a._timerQueueNext}if(e){e._timerQueueNext=this;this._timerQueuePrevious=e}if(a){a._timerQueuePrevious=this;this._timerQueueNext=a}return(a===c)?this:c},collectExpiredTimers:function(c,a){if(this._timerQueueRunTime>a){return this}c.push(this);var b=this._timerQueueNext;this._timerQueueNext=null;if(b){b._timerQueuePrevious=null}return b?b.collectExpiredTimers(c,a):null}});SC.Timer.schedule=function(a){var b;if(!a||SC.none(a.isPooled)||a.isPooled){b=this.timerFromPool(a)}else{b=this.create(a)}return b.schedule()};SC.Timer.timerFromPool=function(a){var b=this._timerPool;if(!b){b=this._timerPool=[]}var c=b.pop();if(!c){c=this.create()}return c.reset(a)};SC.Timer.returnTimerToPool=function(a){if(!this._timerPool){this._timerPool=[]}this._timerPool.push(a);return this};sc_require("system/browser");SC.mixin({normalizeURL:function(a){if(a.slice(0,1)=="/"){a=window.location.protocol+"//"+window.location.host+a}else{if((a.slice(0,5)=="http:")||(a.slice(0,6)=="https:")){}else{a=window.location.href+"/"+a}}return a},isPercentage:function(a){return(a<1&&a>0)},minX:function(a){return a.x||0},maxX:function(a){return(a.x||0)+(a.width||0)},midX:function(a){return(a.x||0)+((a.width||0)/2)},minY:function(a){return a.y||0},maxY:function(a){return(a.y||0)+(a.height||0)},midY:function(a){return(a.y||0)+((a.height||0)/2)},centerX:function(b,a){return(a.width-b.width)/2},centerY:function(b,a){return(a.height-b.height)/2},offset:function(f,c){var g,b,j,a;c=c||"document";if(c==="parent"){a=jQuery(f).position()}else{a=jQuery(f).offset();if(SC.browser.isMobileSafari){g=navigator.userAgent;b=g.indexOf("Mobile/");j=g.substring(b+7,b+9);if(parseInt(SC.browser.mobileSafari,0)<=532||(j<="8A")){a.left-=window.pageXOffset;a.top-=window.pageYOffset}}if(c==="viewport"){if(SC.browser.isIE8OrLower){a.left-=$(window).scrollLeft();a.top-=$(window).scrollTop()}else{a.left-=window.pageXOffset;a.top-=window.pageYOffset}}}try{a.x=a.left;a.y=a.top}catch(h){a={x:a.left,y:a.top}}delete a.left;delete a.top;return a},viewportOffset:function(b){var a=SC.offset(b,"viewport");return{x:a.left,y:a.top}}});SC.mixin({ZERO_POINT:{x:0,y:0},pointInRect:function(a,b){return(a.x>=SC.minX(b))&&(a.y>=SC.minY(b))&&(a.x<=SC.maxX(b))&&(a.y<=SC.maxY(b))},rectsEqual:function(b,a,c){if(!b||!a){return(b==a)}if(!c&&c!==0){c=0.1}if((b.y!=a.y)&&(Math.abs(b.y-a.y)>c)){return NO}if((b.x!=a.x)&&(Math.abs(b.x-a.x)>c)){return NO}if((b.width!=a.width)&&(Math.abs(b.width-a.width)>c)){return NO}if((b.height!=a.height)&&(Math.abs(b.height-a.height)>c)){return NO}return YES},intersectRects:function(b,a){var c={x:Math.max(SC.minX(b),SC.minX(a)),y:Math.max(SC.minY(b),SC.minY(a)),width:Math.min(SC.maxX(b),SC.maxX(a)),height:Math.min(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},unionRects:function(b,a){var c={x:Math.min(SC.minX(b),SC.minX(a)),y:Math.min(SC.minY(b),SC.minY(a)),width:Math.max(SC.maxX(b),SC.maxX(a)),height:Math.max(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},cloneRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}},stringFromRect:function(a){if(!a){return"(null)"}else{return"{x:"+a.x+", y:"+a.y+", width:"+a.width+", height:"+a.height+"}"}}});sc_require("panes/pane");sc_require("panes/keyboard");sc_require("panes/layout");sc_require("panes/manipulation");sc_require("panes/visibility");SC.MainPane=SC.Pane.extend({layout:{top:0,left:0,bottom:0,right:0,minHeight:200,minWidth:200},init:function(){var c={x:0,y:0,width:1000,height:1000},a=this.get("layout"),b=false;if(document&&document.body){c.width=document.body.clientWidth;c.height=document.body.clientHeight;if(a.minHeight||a.minWidth){if((a.minHeight&&c.height<a.minHeight)||(a.minWidth&&c.width<a.minWidth)){SC.bodyOverflowArbitrator.requestVisible(this)}else{SC.bodyOverflowArbitrator.requestHidden(this)}}}arguments.callee.base.apply(this,arguments)},paneDidAttach:function(){var b=arguments.callee.base.apply(this,arguments),a=this.rootResponder;a.makeMainPane(this);if(!a.get("keyRootView")){a.makeKeyPane(this)}return b},acceptsKeyPane:YES,classNames:["sc-main"]});Function.prototype.handleEvents=function(){this.isEventHandler=YES;this.events=arguments;return this};Function.prototype.stateObserves=function(){this.isStateObserveHandler=YES;this.args=SC.A(arguments);return this};SC.StatechartDelegate={isStatechartDelegate:YES,statechartUpdateLocationForState:function(b,a,c){SC.routes.set("location",a)},statechartAcquireLocationForState:function(a,b){return SC.routes.get("location")},statechartBindStateToRoute:function(b,e,a,c){SC.routes.add(a,e,c)},statechartShouldStateHandleTriggeredRoute:function(a,c,b){return YES},statechartStateCancelledHandlingTriggeredRoute:function(a,c,b){}};SC.StatePathMatcher=SC.Object.extend({state:null,expression:null,tokens:null,init:function(){arguments.callee.base.apply(this,arguments);this._parseExpression()},_parseExpression:function(){var j=this.expression?this.expression.split("."):[],b=j.length,g=0,c,f=null,e,h=[];for(;g<b;g+=1){c=j[g];if(c.indexOf("~")>=0){c=c.split("~");if(c.length>2){throw"Invalid use of '~' at part %@".fmt(g)}e=SC.StatePathMatcher._ExpandToken.create({start:c[0],end:c[1]})}else{if(c==="this"){if(h.length>0){throw"Invalid use of 'this' at part %@".fmt(g)}e=SC.StatePathMatcher._ThisToken.create()}else{e=SC.StatePathMatcher._BasicToken.create({value:c})}}e.owner=this;h.push(e)}this.set("tokens",h);var a=SC.clone(h);this._chain=f=a.pop();while(e=a.pop()){f.nextToken=e;f=e}},lastPart:function(){var c=this.get("tokens"),a=c?c.length:0,b=a>0?c[a-1]:null;return b.get("lastPart")}.property("tokens").cacheable(),match:function(a){this._stack=a.split(".");if(SC.empty(a)||SC.typeOf(a)!==SC.T_STRING){return NO}return this._chain.match()},_pop:function(){this._lastPopped=this._stack.pop();return this._lastPopped}});SC.StatePathMatcher._Token=SC.Object.extend({type:null,owner:null,nextToken:null,lastPart:null,match:function(){return NO}});SC.StatePathMatcher._BasicToken=SC.StatePathMatcher._Token.extend({type:"basic",value:null,lastPart:function(){return this.value}.property("value").cacheable(),match:function(){var a=this.owner._pop(),b=this.nextToken;if(this.value!==a){return NO}return b?b.match():YES}});SC.StatePathMatcher._ExpandToken=SC.StatePathMatcher._Token.extend({type:"expand",start:null,end:null,lastPart:function(){return this.end}.property("end").cacheable(),match:function(){var e=this.start,a=this.end,b,c=this.nextToken;b=this.owner._pop();if(b!==a){return NO}while(b=this.owner._pop()){if(b===e){return c?c.match():YES}}return NO}});SC.StatePathMatcher._ThisToken=SC.StatePathMatcher._Token.extend({type:"this",lastPart:"this",match:function(){var f=this.owner.state,c=f.get("substates"),a=c.length,e=0,b;b=this.owner._lastPopped;if(!b||this.owner._stack.length!==0){return NO}for(;e<a;e+=1){if(c[e].get("name")===b){return YES}}return NO}});SC.Async=SC.Object.extend({func:null,arg1:null,arg2:null,tryToPerform:function(e){var c=this.get("func"),b=this.get("arg1"),a=this.get("arg2"),f=SC.typeOf(c);if(f===SC.T_STRING){e.tryToPerform(c,b,a)}else{if(f===SC.T_FUNCTION){c.apply(e,[b,a])}}}});SC.Async.mixin({perform:function(c,b,a){return SC.Async.create({func:c,arg1:b,arg2:a})}});SC.State=SC.Object.extend({name:null,parentState:null,historyState:null,initialSubstate:null,substatesAreConcurrent:NO,substates:null,statechart:null,stateIsInitialized:NO,currentSubstates:null,enteredSubstates:null,representRoute:null,trace:function(){var a=this.getPath("statechart.statechartTraceKey");return this.getPath("statechart.%@".fmt(a))}.property().cacheable(),owner:function(){var c=this.get("statechart"),b=c?c.get("statechartOwnerKey"):null,a=c?c.get(b):null;return a?a:c}.property().cacheable(),statechartDelegate:function(){return this.getPath("statechart.statechartDelegate")}.property().cacheable(),location:function(b,c){var e=this.get("statechart"),a=this.get("statechartDelegate");if(c!==undefined){a.statechartUpdateLocationForState(e,c,this)}return a.statechartAcquireLocationForState(e,this)}.property().idempotent(),init:function(){arguments.callee.base.apply(this,arguments);this._registeredEventHandlers={};this._registeredStringEventHandlers={};this._registeredRegExpEventHandlers=[];this._registeredStateObserveHandlers={};this._registeredSubstatePaths={};this._registeredSubstates=[];this._isEnteringState=NO;this._isExitingState=NO;var b=this.get("statechart"),c=b?b.get("statechartOwnerKey"):null,a=b?b.get("statechartTraceKey"):null;if(b){b.addObserver(c,this,"_statechartOwnerDidChange");b.addObserver(a,this,"_statechartTraceDidChange")}},destroy:function(){var c=this.get("statechart"),e=c?c.get("statechartOwnerKey"):null,a=c?c.get("statechartTraceKey"):null;if(c){c.removeObserver(e,this,"_statechartOwnerDidChange");c.removeObserver(a,this,"_statechartTraceDidChange")}var b=this.get("substates");if(b){b.forEach(function(f){f.destroy()})}this._teardownAllStateObserveHandlers();this.set("substates",null);this.set("currentSubstates",null);this.set("enteredSubstates",null);this.set("parentState",null);this.set("historyState",null);this.set("initialSubstate",null);this.set("statechart",null);this.notifyPropertyChange("trace");this.notifyPropertyChange("owner");this._registeredEventHandlers=null;this._registeredStringEventHandlers=null;this._registeredRegExpEventHandlers=null;this._registeredStateObserveHandlers=null;this._registeredSubstatePaths=null;this._registeredSubstates=null;arguments.callee.base.apply(this,arguments)},initState:function(){if(this.get("stateIsInitialized")){return}this._registerWithParentStates();this._setupRouteHandling();var m=null,l=null,b=null,n=[],k=NO,j=this.get("initialSubstate"),g=this.get("substatesAreConcurrent"),e=this.get("statechart"),c=0,h=0,f=NO,a=null;this.set("substates",n);if(SC.kindOf(j,SC.HistoryState)&&j.isClass){a=this.createSubstate(j);this.set("initialSubstate",a);if(SC.none(a.get("defaultState"))){this.stateLogError("Initial substate is invalid. History state requires the name of a default state to be set");this.set("initialSubstate",null);a=null}}for(m in this){l=this[m];f=SC.typeOf(l)===SC.T_FUNCTION;if(f&&l.isEventHandler){this._registerEventHandler(m,l);continue}if(f&&l.isStateObserveHandler){this._registerStateObserveHandler(m,l);continue}if(f&&l.statePlugin){l=l.apply(this)}if(SC.kindOf(l,SC.State)&&l.isClass&&this[m]!==this.constructor){b=this._addSubstate(m,l);if(m===j){this.set("initialSubstate",b);k=YES}else{if(a&&a.get("defaultState")===m){a.set("defaultState",b);k=YES}}}}if(!SC.none(j)&&!k){this.stateLogError("Unable to set initial substate %@ since it did not match any of state's %@ substates".fmt(j,this))}if(n.length===0){if(!SC.none(j)){this.stateLogWarning("Unable to make %@ an initial substate since state %@ has no substates".fmt(j,this))}}else{if(n.length>0){b=this._addEmptyInitialSubstateIfNeeded();if(!b&&j&&g){this.set("initialSubstate",null);this.stateLogWarning("Can not use %@ as initial substate since substates are all concurrent for state %@".fmt(j,this))}}}this.notifyPropertyChange("substates");this.set("currentSubstates",[]);this.set("enteredSubstates",[]);this.set("stateIsInitialized",YES)},_setupRouteHandling:function(){var b=this.get("representRoute"),c=this.get("statechart"),a=this.get("statechartDelegate");if(!b){return}if(this.get("isConcurrentState")){this.stateLogError("State %@ cannot handle route '%@' since state is concurrent".fmt(this,b));return}a.statechartBindStateToRoute(c,this,b,this.routeTriggered)},routeTriggered:function(g){if(this._isEnteringState){return}var f=this.get("statechart"),b=this.get("statechartDelegate"),e=this.get("location");var a={state:this,location:e,params:g,handler:this.routeTriggered};var c=this.createStateRouteHandlerContext(a);if(b.statechartShouldStateHandleTriggeredRoute(f,this,c)){if(this.get("trace")&&e){this.stateLogTrace("will handle route '%@'".fmt(e))}this.handleTriggeredRoute(c)}else{b.statechartStateCancelledHandlingTriggeredRoute(f,this,c)}},createStateRouteHandlerContext:function(a){return SC.StateRouteHandlerContext.create(a)},handleTriggeredRoute:function(a){this.gotoState(this,a)},_addEmptyInitialSubstateIfNeeded:function(){var c=this.get("initialSubstate"),b=this.get("substatesAreConcurrent");if(c||b){return null}var a=this.createSubstate(SC.EmptyState);this.set("initialSubstate",a);this.get("substates").push(a);this[a.get("name")]=a;a.initState();this.stateLogWarning("state %@ has no initial substate defined. Will default to using an empty state as initial substate".fmt(this));return a},_addSubstate:function(c,e,a){var b=this.get("substates");a=SC.clone(a)||{};a.name=c;e=this.createSubstate(e,a);b.push(e);this[c]=e;e.initState();return e},addSubstate:function(c,f,b){if(SC.empty(c)){this.stateLogError("Can not add substate. name required");return null}if(this[c]!==undefined){this.stateLogError("Can not add substate '%@'. Already a defined property".fmt(c));return null}if(!this.get("stateIsInitialized")){this.stateLogError("Can not add substate '%@'. this state is not yet initialized".fmt(c));return null}var a=arguments.length;if(a===1){f=SC.State}else{if(a===2&&SC.typeOf(f)===SC.T_HASH){b=f;f=SC.State}}var e=SC.kindOf(f,SC.State)&&f.isClass;if(!e){this.stateLogError("Can not add substate '%@'. must provide a state class".fmt(c));return null}f=this._addSubstate(c,f,b);this._addEmptyInitialSubstateIfNeeded();this.notifyPropertyChange("substates");return f},createSubstate:function(b,a){a=a||{};return b.create({parentState:this,statechart:this.get("statechart")},a)},_registerEventHandler:function(b,f){var e=f.events,g=null,a=e.length,c=0;this._registeredEventHandlers[b]=f;for(;c<a;c+=1){g=e[c];if(SC.typeOf(g)===SC.T_STRING){this._registeredStringEventHandlers[g]={name:b,handler:f};continue}if(g instanceof RegExp){this._registeredRegExpEventHandlers.push({name:b,handler:f,regexp:g});continue}this.stateLogError("Invalid event %@ for event handler %@ in state %@".fmt(g,b,this))}},_registerStateObserveHandler:function(e,g){var f=0,c=g.args,b=c.length,a,h=YES;for(;f<b;f+=1){a=c[f];if(SC.typeOf(a)!==SC.T_STRING||SC.empty(a)){this.stateLogError("Invalid argument %@ for state observe handler %@ in state %@".fmt(a,e,this));h=NO}}if(!h){return}this._registeredStateObserveHandlers[e]=g.args},_registerWithParentStates:function(){var a=this.get("parentState");while(!SC.none(a)){a._registerSubstate(this);a=a.get("parentState")}},_registerSubstate:function(b){var c=b.pathRelativeTo(this);if(SC.none(c)){return}this._registeredSubstates.push(b);var a=this._registeredSubstatePaths;if(a[b.get("name")]===undefined){a[b.get("name")]={}}var e=a[b.get("name")];e[c]=b},pathRelativeTo:function(b){var c=this.get("name"),a=this.get("parentState");while(!SC.none(a)&&a!==b){c="%@.%@".fmt(a.get("name"),c);a=a.get("parentState")}if(a!==b&&b!==this){this.stateLogError("Can not generate relative path from %@ since it not a parent state of %@".fmt(b,this));return null}return c},getSubstate:function(g,j,f){if(!g){return null}var b=SC.typeOf(g);if(b===SC.T_OBJECT){return this._registeredSubstates.indexOf(g)>-1?g:null}if(b!==SC.T_STRING){this.stateLogError("Can not find matching subtype. value must be an object or string: %@".fmt(g));return null}var e=SC.StatePathMatcher.create({state:this,expression:g}),c=[],h;if(e.get("tokens").length===0){return null}var l=this._registeredSubstatePaths[e.get("lastPart")];if(!l){return this._notifySubstateNotFound(j,f,g)}for(h in l){if(e.match(h)){c.push(l[h])}}if(c.length===1){return c[0]}if(c.length>1){var k=[];for(h in l){k.push(h)}if(j){return this._notifySubstateNotFound(j,f,g,k)}var a="Can not find substate matching '%@' in state %@. Ambiguous with the following: %@";this.stateLogError(a.fmt(g,this.get("fullPath"),k.join(", ")))}return this._notifySubstateNotFound(j,f,g)},_notifySubstateNotFound:function(e,c,b,a){return e?e.call(c||this,this,b,a):null},getState:function(a){if(a===this.get("name")){return this}if(SC.kindOf(a,SC.State)){return a}return this.getSubstate(a,this._handleSubstateNotFound)},_handleSubstateNotFound:function(e,c,a){var b=this.get("parentState");if(b){return b.getState(c)}if(a){var f="Can not find state matching '%@'. Ambiguous with the following: %@";this.stateLogError(f.fmt(c,a.join(", ")))}return null},gotoState:function(c,a){var b=this.getState(c);if(!b){var e="can not go to state %@ from state %@. Invalid value.";this.stateLogError(e.fmt(c,this));return}var f=this.findFirstRelativeCurrentState(b);this.get("statechart").gotoState(b,f,false,a)},gotoHistoryState:function(e,a,b){var c=this.getState(e);if(!c){var f="can not go to history state %@ from state %@. Invalid value.";this.stateLogError(f.fmt(e,this));return}var g=this.findFirstRelativeCurrentState(c);this.get("statechart").gotoHistoryState(c,g,a,b)},resumeGotoState:function(){this.get("statechart").resumeGotoState()},stateIsCurrentSubstate:function(a){if(SC.typeOf(a)===SC.T_STRING){a=this.get("statechart").getState(a)}var b=this.get("currentSubstates");return !!b&&b.indexOf(a)>=0},stateIsEnteredSubstate:function(b){if(SC.typeOf(b)===SC.T_STRING){b=this.get("statechart").getState(b)}var a=this.get("enteredSubstates");return !!a&&a.indexOf(b)>=0},isRootState:function(){return this.getPath("statechart.rootState")===this}.property(),isCurrentState:function(){return this.stateIsCurrentSubstate(this)}.property("currentSubstates").cacheable(),isConcurrentState:function(){return this.getPath("parentState.substatesAreConcurrent")}.property(),isEnteredState:function(){return this.stateIsEnteredSubstate(this)}.property("enteredSubstates").cacheable(),hasSubstates:function(){return this.getPath("substates.length")>0}.property("substates"),hasCurrentSubstates:function(){var a=this.get("currentSubstates");return !!a&&a.get("length")>0}.property("currentSubstates").cacheable(),hasEnteredSubstates:function(){var a=this.get("enteredSubstates");return !!a&&a.get("length")>0}.property("enteredSubstates").cacheable(),findFirstRelativeCurrentState:function(b){if(this.get("isCurrentState")){return this}var a=this.get("currentSubstates")||[],e=a.get("length"),c=this.get("parentState");if(e===0){return c?c.findFirstRelativeCurrentState():null}if(e>1){b=this.getSubstate(b);if(b){return b.findFirstRelativeCurrentState()}}return a[0]},reenter:function(){if(this.get("isEnteredState")){this.gotoState(this)}else{SC.Logger.error("Can not re-enter state %@ since it is not an entered state in the statechart".fmt(this))}},tryToHandleEvent:function(a,f,e){var c=this.get("trace"),j=this.get("statechart"),h;if(this._registeredEventHandlers[a]){this.stateLogWarning("state %@ can not handle event '%@' since it is a registered event handler".fmt(this,a));return NO}if(this._registeredStateObserveHandlers[a]){this.stateLogWarning("state %@ can not handle event '%@' since it is a registered state observe handler".fmt(this,a));return NO}if(SC.typeOf(this[a])===SC.T_FUNCTION){if(c){this.stateLogTrace("will handle event '%@'".fmt(a))}j.stateWillTryToHandleEvent(this,a,a);h=(this[a](f,e)!==NO);j.stateDidTryToHandleEvent(this,a,a,h);return h}var k=this._registeredStringEventHandlers[a];if(k){if(c){this.stateLogTrace("%@ will handle event '%@'".fmt(k.name,a))}j.stateWillTryToHandleEvent(this,a,k.name);h=(k.handler.call(this,a,f,e)!==NO);j.stateDidTryToHandleEvent(this,a,k.name,h);return h}var g=this._registeredRegExpEventHandlers.length,b=0;for(;b<g;b+=1){k=this._registeredRegExpEventHandlers[b];if(a.match(k.regexp)){if(c){this.stateLogTrace("%@ will handle event '%@'".fmt(k.name,a))}j.stateWillTryToHandleEvent(this,a,k.name);h=(k.handler.call(this,a,f,e)!==NO);j.stateDidTryToHandleEvent(this,a,k.name,h);return h}}if(SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION){if(c){this.stateLogTrace("unknownEvent will handle event '%@'".fmt(a))}j.stateWillTryToHandleEvent(this,a,"unknownEvent");h=(this.unknownEvent(a,f,e)!==NO);j.stateDidTryToHandleEvent(this,a,"unknownEvent",h);return h}return NO},enterState:function(a){},stateWillBecomeEntered:function(a){this._isEnteringState=YES},stateDidBecomeEntered:function(a){this._setupAllStateObserveHandlers();this._isEnteringState=NO},exitState:function(a){},stateWillBecomeExited:function(a){this._isExitingState=YES;this._teardownAllStateObserveHandlers()},stateDidBecomeExited:function(a){this._isExitingState=NO},_setupAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("addObserver")},_teardownAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("removeObserver")},_configureAllStateObserveHandlers:function(b){var h,j,g,a,k,e,c,f;for(h in this._registeredStateObserveHandlers){j=this._registeredStateObserveHandlers[h];for(c=0;c<j.length;c+=1){k=j[c];e=h;a=k.indexOf(".");if(a<0){this[b](k,this,e)}else{if(k.indexOf("*")===0){this[b](k.slice(1),this,e)}else{f=null;if(a===0){f=this;k=k.slice(1)}else{if(a===4&&k.slice(0,5)==="this."){f=this;k=k.slice(5)}else{if(a<0&&k.length===4&&k==="this"){f=this;k=""}}}SC.Observers[b](k,this,e,f)}}}}},performAsync:function(c,b,a){return SC.Async.perform(c,b,a)},respondsToEvent:function(e){if(this._registeredEventHandlers[e]){return false}if(SC.typeOf(this[e])===SC.T_FUNCTION){return true}if(this._registeredStringEventHandlers[e]){return true}if(this._registeredStateObserveHandlers[e]){return false}var a=this._registeredRegExpEventHandlers.length,b=0,c;for(;b<a;b+=1){c=this._registeredRegExpEventHandlers[b];if(e.match(c.regexp)){return true}}return SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION},fullPath:function(){var a=this.getPath("statechart.rootState");if(!a){return this.get("name")}return this.pathRelativeTo(a)}.property("name","parentState").cacheable(),toString:function(){return this.get("fullPath")},_enteredSubstatesDidChange:function(){this.notifyPropertyChange("enteredSubstates")}.observes("*enteredSubstates.[]"),_currentSubstatesDidChange:function(){this.notifyPropertyChange("currentSubstates")}.observes("*currentSubstates.[]"),_statechartTraceDidChange:function(){this.notifyPropertyChange("trace")},_statechartOwnerDidChange:function(){this.notifyPropertyChange("owner")},stateLogTrace:function(b){var a=this.get("statechart");a.statechartLogTrace("%@: %@".fmt(this,b))},stateLogWarning:function(b){var a=this.get("statechart");a.statechartLogWarning(b)},stateLogError:function(b){var a=this.get("statechart");a.statechartLogError(b)}});SC.State.plugin=function(c){var a=SC.A(arguments);a.shift();var b=function(){var e=SC.objectForPropertyPath(c);if(!e){console.error("SC.State.plugin: Unable to determine path %@".fmt(c));return undefined}if(!e.isClass||!e.kindOf(SC.State)){console.error("SC.State.plugin: Unable to extend. %@ must be a class extending from SC.State".fmt(c));return undefined}return e.extend.apply(e,a)};b.statePlugin=YES;return b};SC.State.design=SC.State.extend;sc_require("system/state");SC.EMPTY_STATE_NAME="__EMPTY_STATE__";SC.EmptyState=SC.State.extend({name:SC.EMPTY_STATE_NAME,enterState:function(){var a="No initial substate was defined for state %@. Entering default empty state";this.stateLogWarning(a.fmt(this.get("parentState")))}});sc_require("system/state");SC.HistoryState=SC.Object.extend({isRecursive:NO,defaultState:null,statechart:null,parentState:null,state:function(){var b=this.get("defaultState"),a=this.getPath("parentState.historyState");return !!a?a:b}.property().cacheable(),parentHistoryStateDidChange:function(){this.notifyPropertyChange("state")}.observes("*parentState.historyState")});SC.StateRouteHandlerContext=SC.Object.extend({state:null,location:null,params:null,handler:null,retry:function(){var b=this.get("state"),c=this.get("params"),a=this.get("handler");if(SC.typeOf(a)===SC.T_STRING){a=b[a]}if(SC.typeOf(a)===SC.T_FUNCTION){a.apply(b,[c])}}});sc_require("system/state");sc_require("mixins/statechart_delegate");SC.StatechartManager={isResponderContext:YES,isStatechart:YES,statechartIsInitialized:NO,name:null,rootState:null,rootStateExample:SC.State,initialState:null,statesAreConcurrent:NO,monitorIsActive:NO,monitor:null,statechartTraceKey:"trace",trace:NO,statechartOwnerKey:"owner",owner:null,autoInitStatechart:YES,suppressStatechartWarnings:NO,delegate:null,statechartDelegate:function(){var a=this.get("delegate");return this.delegateFor("isStatechartDelegate",a)}.property("delegate"),initMixin:function(){if(this.get("autoInitStatechart")){this.initStatechart()}},destroyMixin:function(){var b=this.get("rootState"),a=this.get("statechartTraceKey");this.removeObserver(a,this,"_statechartTraceDidChange");b.destroy();this.set("rootState",null)},initStatechart:function(){if(this.get("statechartIsInitialized")){return}this._gotoStateLocked=NO;this._sendEventLocked=NO;this._pendingStateTransitions=[];this._pendingSentEvents=[];this.sendAction=this.sendEvent;if(this.get("monitorIsActive")){this.set("monitor",SC.StatechartMonitor.create({statechart:this}))}var a=this.get("statechartTraceKey");this.addObserver(a,this,"_statechartTraceDidChange");this._statechartTraceDidChange();var e=this.get("allowStatechartTracing"),c=this.get("rootState"),f;if(e){this.statechartLogTrace("BEGIN initialize statechart")}if(!c){c=this._constructRootStateClass()}else{if(SC.typeOf(c)===SC.T_FUNCTION&&c.statePlugin){c=c.apply(this)}}if(!(SC.kindOf(c,SC.State)&&c.isClass)){f="Unable to initialize statechart. Root state must be a state class";this.statechartLogError(f);throw f}c=this.createRootState(c,{statechart:this,name:SC.ROOT_STATE_NAME});this.set("rootState",c);c.initState();if(SC.kindOf(c.get("initialSubstate"),SC.EmptyState)){f="Unable to initialize statechart. Root state must have an initial substate explicilty defined";this.statechartLogError(f);throw f}if(!SC.empty(this.get("initialState"))){var b="initialState";this.set(b,c.get(this.get(b)))}this.set("statechartIsInitialized",YES);this.gotoState(c);if(e){this.statechartLogTrace("END initialize statechart")}},createRootState:function(b,a){if(!a){a={}}b=b.create(a);return b},currentStates:function(){return this.getPath("rootState.currentSubstates")}.property().cacheable(),firstCurrentState:function(){var a=this.get("currentStates");return a?a.objectAt(0):null}.property("currentStates").cacheable(),currentStateCount:function(){return this.getPath("currentStates.length")}.property("currentStates").cacheable(),stateIsCurrentState:function(a){return this.get("rootState").stateIsCurrentSubstate(a)},enteredStates:function(){return this.getPath("rootState.enteredSubstates")}.property().cacheable(),stateIsEntered:function(a){return this.get("rootState").stateIsEnteredSubstate(a)},doesContainState:function(a){return !SC.none(this.getState(a))},getState:function(b){var a=this.get("rootState");return a===b?a:a.getSubstate(b)},gotoState:function(b,m,n,c){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@. statechart has not yet been initialized".fmt(b));return}if(this.get("isDestroyed")){this.statechartLogError("can not go to state %@. statechart is destroyed".fmt(this));return}var k=this._processGotoStateArgs(arguments);b=k.state;m=k.fromCurrentState;n=k.useHistory;c=k.context;var p=null,l=[],o=[],g=this.get("allowStatechartTracing"),a=this.get("rootState"),j=b,f=m,e;b=this.getState(b);if(SC.none(b)){this.statechartLogError("Can not to goto state %@. Not a recognized state in statechart".fmt(j));return}if(this._gotoStateLocked){this._pendingStateTransitions.push({state:b,fromCurrentState:m,useHistory:n,context:c});return}this._gotoStateLocked=YES;if(m){m=this.getState(m);if(SC.none(m)||!m.get("isCurrentState")){e="Can not to goto state %@. %@ is not a recognized current state in statechart";this.statechartLogError(e.fmt(j,f));this._gotoStateLocked=NO;return}}else{m=b.findFirstRelativeCurrentState();if(!m){m=this.get("firstCurrentState")}}if(g){this.statechartLogTrace("BEGIN gotoState: %@".fmt(b));e="starting from current state: %@";e=e.fmt(m?m:"---");this.statechartLogTrace(e);e="current states before: %@";e=e.fmt(this.getPath("currentStates.length")>0?this.get("currentStates"):"---");this.statechartLogTrace(e)}if(!SC.none(m)){l=this._createStateChain(m)}o=this._createStateChain(b);p=this._findPivotState(l,o);if(p){if(g){this.statechartLogTrace("pivot state = %@".fmt(p))}if(p.get("substatesAreConcurrent")&&p!==b){this.statechartLogError("Can not go to state %@ from %@. Pivot state %@ has concurrent substates.".fmt(b,m,p));this._gotoStateLocked=NO;return}}var h=[];this._traverseStatesToExit(l.shift(),l,p,h);if(p!==b){this._traverseStatesToEnter(o.pop(),o,p,n,h)}else{this._traverseStatesToExit(p,[],null,h);this._traverseStatesToEnter(p,null,null,n,h)}this._gotoStateActions=h;this._executeGotoStateActions(b,h,null,c)},gotoStateActive:function(){return this._gotoStateLocked}.property(),gotoStateSuspended:function(){return this._gotoStateLocked&&!!this._gotoStateSuspendedPoint}.property(),resumeGotoState:function(){if(!this.get("gotoStateSuspended")){this.statechartLogError("Can not resume goto state since it has not been suspended");return}var a=this._gotoStateSuspendedPoint;this._executeGotoStateActions(a.gotoState,a.actions,a.marker,a.context)},_executeGotoStateActions:function(h,g,b,c){var f=null,a=g.length,e=null;b=SC.none(b)?0:b;for(;b<a;b+=1){this._currentGotoStateAction=f=g[b];switch(f.action){case SC.EXIT_STATE:e=this._exitState(f.state,c);break;case SC.ENTER_STATE:e=this._enterState(f.state,f.currentState,c);break}if(SC.kindOf(e,SC.Async)){this._gotoStateSuspendedPoint={gotoState:h,actions:g,marker:b+1,context:c};e.tryToPerform(f.state);return}}this.beginPropertyChanges();this.notifyPropertyChange("currentStates");this.notifyPropertyChange("enteredStates");this.endPropertyChanges();if(this.get("allowStatechartTracing")){this.statechartLogTrace("current states after: %@".fmt(this.get("currentStates")));this.statechartLogTrace("END gotoState: %@".fmt(h))}this._cleanupStateTransition()},_cleanupStateTransition:function(){this._currentGotoStateAction=null;this._gotoStateSuspendedPoint=null;this._gotoStateActions=null;this._gotoStateLocked=NO;this._flushPendingStateTransition()},_exitState:function(e,b){var c;if(e.get("currentSubstates").indexOf(e)>=0){c=e.get("parentState");while(c){c.get("currentSubstates").removeObject(e);c=c.get("parentState")}}c=e;while(c){c.get("enteredSubstates").removeObject(e);c=c.get("parentState")}if(this.get("allowStatechartTracing")){this.statechartLogTrace("<-- exiting state: %@".fmt(e))}e.set("currentSubstates",[]);e.stateWillBecomeExited(b);var a=this.exitState(e,b);e.stateDidBecomeExited(b);if(this.get("monitorIsActive")){this.get("monitor").pushExitedState(e)}e._traverseStatesToExit_skipState=NO;return a},exitState:function(b,a){return b.exitState(a)},_enterState:function(e,f,b){var c=e.get("parentState");if(c&&!e.get("isConcurrentState")){c.set("historyState",e)}if(f){c=e;while(c){c.get("currentSubstates").pushObject(e);c=c.get("parentState")}}c=e;while(c){c.get("enteredSubstates").pushObject(e);c=c.get("parentState")}if(this.get("allowStatechartTracing")){this.statechartLogTrace("--> entering state: %@".fmt(e))}e.stateWillBecomeEntered(b);var a=this.enterState(e,b);e.stateDidBecomeEntered(b);if(this.get("monitorIsActive")){this.get("monitor").pushEnteredState(e)}return a},enterState:function(b,a){if(b.enterStateByRoute&&SC.kindOf(a,SC.StateRouteHandlerContext)){return b.enterStateByRoute(a)}else{return b.enterState(a)}},gotoHistoryState:function(g,f,c,e){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@'s history state. Statechart has not yet been initialized".fmt(g));return}var b=this._processGotoStateArgs(arguments);g=b.state;f=b.fromCurrentState;c=b.useHistory;e=b.context;g=this.getState(g);if(!g){this.statechartLogError("Can not to goto state %@'s history state. Not a recognized state in statechart".fmt(g));return}var a=g.get("historyState");if(!c){if(a){this.gotoState(a,f,e)}else{this.gotoState(g,f,e)}}else{this.gotoState(g,f,YES,e)}},sendEvent:function(b,h,g){if(this.get("isDestroyed")){this.statechartLogError("can send event %@. statechart is destroyed".fmt(b));return}var c=NO,m=NO,j=this.get("currentStates").slice(),l={},k=0,f=0,a=null,e=this.get("allowStatechartTracing");if(this._sendEventLocked||this._goStateLocked){this._pendingSentEvents.push({event:b,arg1:h,arg2:g});return}this._sendEventLocked=YES;if(e){this.statechartLogTrace("BEGIN sendEvent: '%@'".fmt(b))}k=j.get("length");for(;f<k;f+=1){m=NO;a=j[f];if(!a.get("isCurrentState")){continue}while(!m&&a){if(!l[a.get("fullPath")]){m=a.tryToHandleEvent(b,h,g);l[a.get("fullPath")]=YES}if(!m){a=a.get("parentState")}else{c=YES}}}this._sendEventLocked=NO;if(e){if(!c){this.statechartLogTrace("No state was able handle event %@".fmt(b))}this.statechartLogTrace("END sendEvent: '%@'".fmt(b))}var n=this._flushPendingSentEvents();return c?this:(n?this:null)},stateWillTryToHandleEvent:function(c,b,a){this._stateHandleEventInfo={state:c,event:b,handler:a}},stateDidTryToHandleEvent:function(c,b,a,e){this._stateHandleEventInfo=null},_createStateChain:function(b){var a=[];while(b){a.push(b);b=b.get("parentState")}return a},_findPivotState:function(c,b){if(c.length===0||b.length===0){return null}var a=c.find(function(f,e){if(b.indexOf(f)>=0){return YES}});return a},_traverseStatesToExit:function(b,l,e,j){if(!b||b===e){return}var f=this.get("allowStatechartTracing");if(b.get("substatesAreConcurrent")){var g=0,h=b.get("currentSubstates"),k=h.length,c=null;for(;g<k;g+=1){c=h[g];if(c._traverseStatesToExit_skipState===YES){continue}var a=this._createStateChain(c);this._traverseStatesToExit(a.shift(),a,b,j)}}j.push({action:SC.EXIT_STATE,state:b});if(b.get("isCurrentState")){b._traverseStatesToExit_skipState=YES}this._traverseStatesToExit(l.shift(),l,e,j)},_traverseStatesToEnter:function(b,f,k,h,e){if(!b){return}var c=this.get("allowStatechartTracing");if(k){if(b!==k){this._traverseStatesToEnter(f.pop(),f,k,h,e)}else{this._traverseStatesToEnter(f.pop(),f,null,h,e)}}else{if(!f||f.length===0){var j={action:SC.ENTER_STATE,state:b,currentState:NO};e.push(j);var g=b.get("initialSubstate"),a=b.get("historyState");if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),null,h,e)}else{if(b.get("hasSubstates")&&a&&h){this._traverseStatesToEnter(a,null,null,h,e)}else{if(g){if(SC.kindOf(g,SC.HistoryState)){if(!h){h=g.get("isRecursive")}g=g.get("state")}this._traverseStatesToEnter(g,null,null,h,e)}else{j.currentState=YES}}}}else{if(f.length>0){e.push({action:SC.ENTER_STATE,state:b});var l=f.pop();this._traverseStatesToEnter(l,f,null,h,e);if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),l,h,e)}}}}},respondsTo:function(e){var b=this.get("currentStates"),a=b.get("length"),c=0,f=null;for(;c<a;c+=1){f=b.objectAt(c);while(f){if(f.respondsToEvent(e)){return true}f=f.get("parentState")}}return SC.typeOf(this[e])===SC.T_FUNCTION},tryToPerform:function(e,c,b){if(!this.respondsTo(e)){return NO}if(SC.typeOf(this[e])===SC.T_FUNCTION){var a=this[e](c,b);if(a!==NO){return YES}}return !!this.sendEvent(e,c,b)},invokeStateMethod:function(l,k,c){if(l==="unknownEvent"){this.statechartLogError("can not invoke method unkownEvent");return}k=SC.A(arguments);k.shift();var g=k.length,n=g>0?k[g-1]:null,m=SC.typeOf(n)===SC.T_FUNCTION?k.pop():null,f=this.get("currentStates"),e=0,b=null,j={},a,o=undefined,h=0;g=f.get("length");for(;e<g;e+=1){b=f.objectAt(e);while(b){if(j[b.get("fullPath")]){break}j[b.get("fullPath")]=YES;a=b[l];if(SC.typeOf(a)===SC.T_FUNCTION&&!a.isEventHandler){o=a.apply(b,k);if(m){m.call(this,b,o)}h+=1;break}b=b.get("parentState")}}return h===1?o:undefined},_traverseConcurrentStatesToEnter:function(e,c,g,b){var f=0,a=e.length,h=null;for(;f<a;f+=1){h=e[f];if(h!==c){this._traverseStatesToEnter(h,null,null,g,b)}}},_flushPendingStateTransition:function(){if(!this._pendingStateTransitions){this.statechartLogError("Unable to flush pending state transition. _pendingStateTransitions is invalid");return}var a=this._pendingStateTransitions.shift();if(!a){return}this.gotoState(a.state,a.fromCurrentState,a.useHistory,a.context)},_flushPendingSentEvents:function(){var a=this._pendingSentEvents.shift();if(!a){return null}return this.sendEvent(a.event,a.arg1,a.arg2)},_monitorIsActiveDidChange:function(){if(this.get("monitorIsActive")&&SC.none(this.get("monitor"))){this.set("monitor",SC.StatechartMonitor.create())}}.observes("monitorIsActive"),_processGotoStateArgs:function(b){var e={state:null,fromCurrentState:null,useHistory:false,context:null},a=null,c=null;b=SC.$A(b);b=b.filter(function(f){return !(f===undefined)});a=b.length;if(a<1){return e}e.state=b[0];if(a===2){c=b[1];switch(SC.typeOf(c)){case SC.T_BOOL:e.useHistory=c;break;case SC.T_HASH:case SC.T_OBJECT:if(!SC.kindOf(c,SC.State)){e.context=c}break;default:e.fromCurrentState=c}}else{if(a===3){c=b[1];if(SC.typeOf(c)===SC.T_BOOL){e.useHistory=c;e.context=b[2]}else{e.fromCurrentState=c;c=b[2];if(SC.typeOf(c)===SC.T_BOOL){e.useHistory=c}else{e.context=c}}}else{e.fromCurrentState=b[1];e.useHistory=b[2];e.context=b[3]}}return e},_constructRootStateClass:function(){var e="rootStateExample",f=this.get(e),b=this.get("initialState"),c=this.get("statesAreConcurrent"),a=0,k,h,g,j={};if(SC.typeOf(f)===SC.T_FUNCTION&&f.statePlugin){f=f.apply(this)}if(!(SC.kindOf(f,SC.State)&&f.isClass)){this._logStatechartCreationError("Invalid root state example");return null}if(c&&!SC.empty(b)){this._logStatechartCreationError("Can not assign an initial state when states are concurrent")}else{if(c){j.substatesAreConcurrent=YES}else{if(SC.typeOf(b)===SC.T_STRING){j.initialSubstate=b}else{this._logStatechartCreationError("Must either define initial state or assign states as concurrent");return null}}}for(k in this){if(k===e){continue}h=this[k];g=SC.typeOf(h)===SC.T_FUNCTION;if(g&&h.statePlugin){h=h.apply(this)}if(SC.kindOf(h,SC.State)&&h.isClass&&this[k]!==this.constructor){j[k]=h;a+=1}}if(a===0){this._logStatechartCreationError("Must define one or more states");return null}return f.extend(j)},_logStatechartCreationError:function(a){SC.Logger.error("Unable to create statechart for %@: %@.".fmt(this,a))},statechartLogTrace:function(a){SC.Logger.info("%@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogError:function(a){SC.Logger.error("ERROR %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogWarning:function(a){if(this.get("suppressStatechartWarnings")){return}SC.Logger.warn("WARN %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogPrefix:function(){var b=SC._object_className(this.constructor),a=this.get("name"),c;if(SC.empty(a)){c="%@<%@>".fmt(b,SC.guidFor(this))}else{c="%@<%@, %@>".fmt(b,a,SC.guidFor(this))}return c}.property().cacheable(),allowStatechartTracing:function(){var a=this.get("statechartTraceKey");return this.get(a)}.property().cacheable(),_statechartTraceDidChange:function(){this.notifyPropertyChange("allowStatechartTracing")},details:function(){var b={initialized:this.get("statechartIsInitialized")};if(this.get("name")){b.name=this.get("name")}if(!this.get("statechartIsInitialized")){return b}b["current-states"]=[];this.get("currentStates").forEach(function(g){b["current-states"].push(g.get("fullPath"))});var a={active:this.get("gotoStateActive"),suspended:this.get("gotoStateSuspended")};if(this._gotoStateActions){a["transition-sequence"]=[];var f=this._gotoStateActions,c=function(h){var g=h.action===SC.ENTER_STATE?"enter":"exit";return"%@ %@".fmt(g,h.state.get("fullPath"))};f.forEach(function(g){a["transition-sequence"].push(c(g))});a["current-transition"]=c(this._currentGotoStateAction)}b["state-transition"]=a;if(this._stateHandleEventInfo){var e=this._stateHandleEventInfo;b["handling-event"]={state:e.state.get("fullPath"),event:e.event,handler:e.handler}}else{b["handling-event"]=false}return b}.property(),toStringWithDetails:function(){var b="",c=this.toString(),a=this.get("details");b+=c+"\n";b+=this._hashToString(a,2);return b},_hashToString:function(e,a){var f="";for(var b in e){var c=e[b];if(c instanceof Array){f+=this._arrayToString(b,c,a)+"\n"}else{if(c instanceof Object){f+="%@%@:\n".fmt(" ".mult(a),b);f+=this._hashToString(c,a+2)}else{f+="%@%@: %@\n".fmt(" ".mult(a),b,c)}}}return f},_arrayToString:function(b,e,a){if(e.length===0){return"%@%@: []".fmt(" ".mult(a),b)}var c="%@%@: [\n".fmt(" ".mult(a),b);e.forEach(function(g,f){c+="%@%@\n".fmt(" ".mult(a+2),g)},this);c+=" ".mult(a)+"]";return c}};SC.mixin(SC.StatechartManager,SC.StatechartDelegate,SC.DelegateSupport);SC.ROOT_STATE_NAME="__ROOT_STATE__";SC.EXIT_STATE=0;SC.ENTER_STATE=1;SC.Statechart=SC.Object.extend(SC.StatechartManager,{autoInitStatechart:NO});SC.Statechart.design=SC.Statechart.extend;SC.routes=SC.Object.create({wantsHistory:NO,usesHistory:null,baseURI:document.baseURI,_didSetup:NO,_location:null,_firstRoute:null,_extractParametersAndRoute:function(e,b){var a={},k=e.route||"",g,c,f,j,h,l;g=(k.indexOf("?")<0&&k.indexOf("&")>=0)?"&":"?";c=k.split(g);k=c.shift();a=this.deparam(c.join("&"),b||false);for(l in e){if(e.hasOwnProperty(l)&&l!=="route"){a[l]=""+e[l]}}a.params=g+$.param(a);a.route=k;return a},location:function(a,b){this._skipRoute=NO;return this._extractLocation(a,b)}.property(),informLocation:function(a,b){this._skipRoute=YES;var c=this.location.lastSetValueKey;if(c&&this._kvo_cache){this._kvo_cache[c]=b}return this._extractLocation(a,b)}.property(),_extractLocation:function(c,e){var a,b;if(e!==undefined){if(e===null){e=""}if(typeof(e)==="object"){a=this._extractParametersAndRoute(e);e=a.route+a.params}if(!SC.empty(e)||(this._location&&this._location!==e)){b=encodeURI(e);if(this.usesHistory){if(b.length>0){b="/"+b}window.history.pushState(null,null,this.get("baseURI")+b)}else{window.location.hash=b}}this._location=e}return this._location},ping:function(){var a;if(!this._didSetup){this._didSetup=YES;if(this.get("wantsHistory")&&SC.platform.supportsHistory){this.usesHistory=YES;this.popState();SC.Event.add(window,"popstate",this,this.popState)}else{this.usesHistory=NO;if(SC.platform.supportsHashChange){this.hashChange();SC.Event.add(window,"hashchange",this,this.hashChange)}else{a=this;this._invokeHashChange=function(){a.hashChange();setTimeout(a._invokeHashChange,100)};this._invokeHashChange()}}}},hashChange:function(a){var b=window.location.hash;b=(b&&b.length>0)?b.slice(1,b.length):"";if(!SC.browser.isMozilla){b=decodeURI(b)}if(this.get("location")!==b&&!this._skipRoute){SC.run(function(){this.set("location",b)},this)}this._skipRoute=false},popState:function(a){var b=this.get("baseURI"),c=document.location.href;if(c.slice(0,b.length)===b){c=c.slice(b.length+1,c.length);if(this.get("location")!==c&&!this._skipRoute){SC.run(function(){this.set("location",c)},this)}}this._skipRoute=false},add:function(a,b,c){if(!this._didSetup){this.invokeLast(this.ping)}if(c===undefined&&SC.typeOf(b)===SC.T_FUNCTION){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(!this._firstRoute){this._firstRoute=this._Route.create()}this._firstRoute.add(a.split("/"),b,c);return this},locationDidChange:function(){this.trigger()}.observes("location"),trigger:function(){var a=this._firstRoute,b=this.get("location"),e,c;if(a){e=this._extractParametersAndRoute({route:b});b=e.route;delete e.route;delete e.params;c=a.routeForParts(b.split("/"),e);if(c&&c.method){c.method.call(c.target||this,e)}}},deparam:function(l,h){var k={},b={"true":!0,"false":!1,"null":null},g=l.replace(/\+/g," ").split("&"),m=g.length,o,e,q,c,p,j,s,n,f=decodeURIComponent,a=Object.prototype.toString;for(o=0;o<m;++o){e=g[o].split("="),q=f(e[0]),p=k,s=q.split("]["),n=q.length-1;if(/\[/.test(s[0])&&/\]$/.test(s[n])){s[n]=s[n].replace(/\]$/,"");s=s.shift().split("[").concat(s);n=s.length-1}else{n=0}if(e.length===2){c=f(e[1]);if(h){c=c&&!isNaN(c)?+c:c==="undefined"?undefined:b[c]!==undefined?b[c]:c}if(n){for(j=0;j<n;++j){q=s[j]===""?p.length:s[j];p=p[q]=j<n?p[q]||(s[j+1]&&isNaN(s[j+1])?{}:[]):c}}else{if(a.apply(k[q])==="[object Array]"){k[q].push(c)}else{if(k[q]!==undefined){k[q]=[k[q],c]}else{k[q]=c}}}}else{if(q){k[q]=h?undefined:""}}}return k},_Route:SC.Object.extend({target:null,method:null,staticRoutes:null,dynamicRoutes:null,wildcardRoutes:null,add:function(c,b,f){var a,e;c=SC.clone(c);if(!c||c.length===0){this.target=b;this.method=f}else{a=c.shift();switch(a.slice(0,1)){case":":a=a.slice(1,a.length);if(!this.dynamicRoutes){this.dynamicRoutes={}}if(!this.dynamicRoutes[a]){this.dynamicRoutes[a]=this.constructor.create()}e=this.dynamicRoutes[a];break;case"*":a=a.slice(1,a.length);if(!this.wildcardRoutes){this.wildcardRoutes={}}e=this.wildcardRoutes[a]=this.constructor.create();break;default:if(!this.staticRoutes){this.staticRoutes={}}if(!this.staticRoutes[a]){this.staticRoutes[a]=this.constructor.create()}e=this.staticRoutes[a]}if(e){e.add(c,b,f)}}},routeForParts:function(e,f){var b,c,a;e=SC.clone(e);if(!e||e.length===0){return this.method?this:null}else{b=e.shift();if(this.staticRoutes&&this.staticRoutes[b]){return this.staticRoutes[b].routeForParts(e,f)}else{for(c in this.dynamicRoutes){a=this.dynamicRoutes[c].routeForParts(e,f);if(a){f[c]=b;return a}}for(c in this.wildcardRoutes){e.unshift(b);f[c]=e.join("/");return this.wildcardRoutes[c].routeForParts(null,f)}return null}}}})});SC.SCANNER_OUT_OF_BOUNDS_ERROR=new Error("Out of bounds.");SC.SCANNER_INT_ERROR=new Error("Not an int.");SC.SCANNER_SKIP_ERROR=new Error("Did not find the string to skip.");SC.SCANNER_SCAN_ARRAY_ERROR=new Error("Did not find any string of the given array to scan.");SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR=new Error("Can't compare the dates of two DateTimes that don't have the same timezone.");SC.DATETIME_ISO8601="%Y-%m-%dT%H:%M:%S%Z";SC.Scanner=SC.Object.extend({string:null,scanLocation:0,scan:function(a){if(this.scanLocation+a>this.length){throw SC.SCANNER_OUT_OF_BOUNDS_ERROR}var b=this.string.substr(this.scanLocation,a);this.scanLocation+=a;return b},scanInt:function(c,f){if(f===undefined){f=c}var e=this.scan(f);var b=new RegExp("^\\d{"+c+","+f+"}");var a=e.match(b);if(!a){throw SC.SCANNER_INT_ERROR}if(a[0].length<f){this.scanLocation+=a[0].length-f}return parseInt(a[0],10)},skipString:function(a){if(this.scan(a.length)!==a){throw SC.SCANNER_SKIP_ERROR}return YES},scanArray:function(c){for(var b=0,a=c.length;b<a;b++){if(this.scan(c[b].length)===c[b]){return b}this.scanLocation-=c[b].length}throw SC.SCANNER_SCAN_ARRAY_ERROR}});SC.DateTime=SC.Object.extend(SC.Freezable,SC.Copyable,{_ms:0,timezone:0,isFrozen:YES,adjust:function(b,a){var c;b=b?SC.clone(b):{};c=(b.timezone!==undefined)?b.timezone:(this.timezone!==undefined)?this.timezone:0;return this.constructor._adjust(b,this._ms,c,a)._createFromCurrentState()},advance:function(a){return this.constructor._advance(a,this._ms,this.timezone)._createFromCurrentState()},unknownProperty:function(a){return this.constructor._get(a,this._ms,this.timezone)},toFormattedString:function(a){return this.constructor._toFormattedString(a,this._ms,this.timezone)},toISO8601:function(){return this.constructor._toFormattedString(SC.DATETIME_ISO8601,this._ms,this.timezone)},toString:function(){return"UTC: "+new Date(this._ms).toUTCString()+", timezone: "+this.timezone},isEqual:function(a){return this.constructor.compare(this,a)===0},copy:function(){return this},toTimezone:function(a){if(a===undefined){a=0}return this.advance({timezone:a-this.timezone})}});SC.DateTime.mixin(SC.Comparable,{recordFormat:SC.DATETIME_ISO8601,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_englishDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AMPMNames:["AM","PM"],_date:new Date(),_tz:0,timezone:new Date().getTimezoneOffset(),_dt_cache:{},_dt_cache_index:-1,_DT_CACHE_MAX_LENGTH:1000,_setCalcState:function(a,c){var b={milliseconds:this._date.getTime(),timezone:this._tz};if(a!==undefined){this._date.setTime(a)}if(c!==undefined){this._tz=c}return b},_setCalcStateFromHash:function(c,b){var e=(b!==undefined)?b:this._tz;var a=this._toMilliseconds(c,this._ms,e);return this._setCalcState(a,e)},_get:function(x,b,o){var n,u,h,p,e,k,l,f,q,a;var c,j;var t=this._date;var s,g=null;s=this._setCalcState(b,o);if(x==="milliseconds"){g=t.getTime()}else{if(x==="timezone"){g=this._tz}}if(g===null){q=x.slice(0,4);a=x.slice(4);if(q==="last"||q==="next"){c=this._get("dayOfWeek",b,o);j=this._englishDayNames.indexOf(a);if(j>=0){var w=j-c;if(q==="last"&&w>=0){w-=7}if(q==="next"&&w<0){w+=7}this._advance({day:w},b,o);g=this._createFromCurrentState()}}}if(g===null){if(o!==undefined){this._setCalcState(t.getTime()-(o*60000),0)}switch(x){case"year":g=t.getUTCFullYear();break;case"month":g=t.getUTCMonth()+1;break;case"day":g=t.getUTCDate();break;case"dayOfWeek":g=t.getUTCDay();break;case"hour":g=t.getUTCHours();break;case"minute":g=t.getUTCMinutes();break;case"second":g=t.getUTCSeconds();break;case"millisecond":g=t.getUTCMilliseconds();break}if((g===null)&&(x==="isLeapYear")){e=this._get("year");g=(e%4===0&&e%100!==0)||e%400===0}if((g===null)&&(x==="daysInMonth")){switch(this._get("month")){case 4:case 6:case 9:case 11:g=30;break;case 2:g=this._get("isLeapYear")?29:28;break;default:g=31;break}}if((g===null)&&(x==="dayOfYear")){n=t.getTime();h=this._get("day");this._setCalcStateFromHash({day:1});for(p=this._get("month")-1;p>0;p--){this._setCalcStateFromHash({month:p});h+=this._get("daysInMonth")}t.setTime(n);g=h}if((g===null)&&(x.slice(0,4)==="week")){k=x.length===4?1:parseInt(x.slice("4"),10);l=this._get("dayOfWeek");f=this._get("dayOfYear")-1;if(k===0){g=parseInt((f-l+7)/7,10)}else{g=parseInt((f-(l-1+7)%7+7)/7,10)}}}this._setCalcState(s.milliseconds,s.timezone);return g},_adjust:function(c,g,f,a){var e=c?SC.clone(c):{};var b=this._toMilliseconds(c,g,f,a);this._setCalcState(b,f);return this},_advance:function(a,g,e){var c=a?SC.clone(a):{};var f;for(var b in c){c[b]+=this._get(b,g,e)}f=(c.timezone!==undefined)?c.timezone:e;return this._adjust(c,g,f,NO)},_toMilliseconds:function(k,c,h,f){var a=k?SC.clone(k):{};var j=this._date;var g=j.getTime();var b,e;if(!SC.none(c)){j.setTime(c)}e=(h!==undefined)?h:(this.timezone!==undefined)?this.timezone:0;j.setTime(j.getTime()-(e*60000));if(f===undefined||f===YES){if(!SC.none(a.hour)&&SC.none(a.minute)){a.minute=0}if(!(SC.none(a.hour)&&SC.none(a.minute))&&SC.none(a.second)){a.second=0}if(!(SC.none(a.hour)&&SC.none(a.minute)&&SC.none(a.second))&&SC.none(a.millisecond)){a.millisecond=0}}if(SC.none(a.year)){a.year=j.getUTCFullYear()}if(SC.none(a.month)){a.month=j.getUTCMonth()+1}if(SC.none(a.day)){a.day=j.getUTCDate()}if(SC.none(a.hour)){a.hour=j.getUTCHours()}if(SC.none(a.minute)){a.minute=j.getUTCMinutes()}if(SC.none(a.second)){a.second=j.getUTCSeconds()}if(SC.none(a.millisecond)){a.millisecond=j.getUTCMilliseconds()}b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);j.setTime(b+(e*60000));b=j.getTime();j.setTime(g);return b},create:function(){var k=arguments.length===0?{}:arguments[0];var e;if(SC.typeOf(k)===SC.T_NUMBER){k={milliseconds:k}}e=(k.timezone!==undefined)?k.timezone:this.timezone;if(e===undefined){e=0}if(!SC.none(k.milliseconds)){var j="nu"+k.milliseconds+e,a=this._dt_cache;var f=a[j];if(!f){var g,h=this._dt_cache_index,b=this;f=a[j]=new b([{_ms:k.milliseconds,timezone:e}]);h=this._dt_cache_index=(h+1)%this._DT_CACHE_MAX_LENGTH;g=a[h];if(g!==undefined&&a[g]){delete a[g]}a[h]=j}return f}else{var c=new Date();return this.create({milliseconds:this._toMilliseconds(k,c.getTime(),e,k.resetCascadingly),timezone:e})}},_createFromCurrentState:function(){return this.create({milliseconds:this._date.getTime(),timezone:this._tz})},parse:function(p,c){var q=new RegExp("(?:%([aAbBcdDhHiIjmMpsSUWwxXyYZ%])|(.))","g");var o,k,a={},b={},j=SC.Scanner.create({string:p});if(SC.none(c)){c=SC.DATETIME_ISO8601}try{while((k=q.exec(c))!==null){switch(k[1]){case"a":b.dayOfWeek=j.scanArray(this.abbreviatedDayNames);break;case"A":b.dayOfWeek=j.scanArray(this.dayNames);break;case"b":a.month=j.scanArray(this.abbreviatedMonthNames)+1;break;case"B":a.month=j.scanArray(this.monthNames)+1;break;case"c":throw"%c is not implemented";case"d":case"D":a.day=j.scanInt(1,2);break;case"h":case"H":a.hour=j.scanInt(1,2);break;case"i":case"I":a.hour=j.scanInt(1,2);break;case"j":throw"%j is not implemented";case"m":a.month=j.scanInt(1,2);break;case"M":a.minute=j.scanInt(1,2);break;case"p":a.meridian=j.scanArray(this.AMPMNames);break;case"S":a.second=j.scanInt(1,2);break;case"s":a.millisecond=j.scanInt(1,3);break;case"U":throw"%U is not implemented";case"W":throw"%W is not implemented";case"w":throw"%w is not implemented";case"x":throw"%x is not implemented";case"X":throw"%X is not implemented";case"y":a.year=j.scanInt(2);a.year+=(a.year>70?1900:2000);break;case"Y":a.year=j.scanInt(4);break;case"Z":var g=j.scan(1);if(g==="Z"){a.timezone=0}else{if(g==="+"||g==="-"){var l=j.scanInt(2);if(j.scan(1)!==":"){j.scan(-1)}var f=j.scanInt(2);a.timezone=(g==="+"?-1:1)*(l*60+f)}}break;case"%":j.skipString("%");break;default:j.skipString(k[0]);break}}}catch(n){SC.Logger.log("SC.DateTime.createFromString "+n.toString());return null}if(!SC.none(a.meridian)&&!SC.none(a.hour)){if((a.meridian===1&&a.hour!==12)||(a.meridian===0&&a.hour===12)){a.hour=(a.hour+12)%24}delete a.meridian}o=this.create(a);if(!SC.none(b.dayOfWeek)&&o.get("dayOfWeek")!==b.dayOfWeek){return null}return o},_pad:function(b,a){var c=""+b;if(a===undefined){a=2}while(c.length<a){c="0"+c}return c},__toFormattedString:function(b,f,c){var a,e;switch(b[1]){case"a":return this.abbreviatedDayNames[this._get("dayOfWeek")];case"A":return this.dayNames[this._get("dayOfWeek")];case"b":return this.abbreviatedMonthNames[this._get("month")-1];case"B":return this.monthNames[this._get("month")-1];case"c":return this._date.toString();case"d":return this._pad(this._get("day"));case"D":return this._get("day");case"h":return this._get("hour");case"H":return this._pad(this._get("hour"));case"i":a=this._get("hour");return(a===12||a===0)?12:(a+12)%12;case"I":a=this._get("hour");return this._pad((a===12||a===0)?12:(a+12)%12);case"j":return this._pad(this._get("dayOfYear"),3);case"m":return this._pad(this._get("month"));case"M":return this._pad(this._get("minute"));case"p":return this._get("hour")>11?this.AMPMNames[1]:this.AMPMNames[0];case"S":return this._pad(this._get("second"));case"s":return this._pad(this._get("millisecond"),3);case"u":return this._pad(this._get("utc"));case"U":return this._pad(this._get("week0"));case"W":return this._pad(this._get("week1"));case"w":return this._get("dayOfWeek");case"x":return this._date.toDateString();case"X":return this._date.toTimeString();case"y":return this._pad(this._get("year")%100);case"Y":return this._get("year");case"Z":e=-1*c;return(e>=0?"+":"-")+this._pad(parseInt(Math.abs(e)/60,10))+":"+this._pad(Math.abs(e)%60);case"%":return"%"}},_toFormattedString:function(c,f,b){var a=this;var e=(b!==undefined)?b:(this.timezone!==undefined)?this.timezone:0;this._setCalcState(f-(b*60000),0);return c.replace(/\%([aAbBcdDhHiIjmMpsSUWwxXyYZ\%])/g,function(){var g=a.__toFormattedString.call(a,arguments,f,b);return g})},compare:function(e,c){var g=e.get("milliseconds");var f=c.get("milliseconds");return g<f?-1:g===f?0:1},compareDate:function(e,c){if(e.get("timezone")!==c.get("timezone")){throw SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR}var g=e.adjust({hour:0}).get("milliseconds");var f=c.adjust({hour:0}).get("milliseconds");return g<f?-1:g===f?0:1}});SC.Binding.dateTime=function(a){return this.transform(function(b,c){return b?b.toFormattedString(a):null})};SC.stringsFor("English",{"_SC.DateTime.dayNames":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday","_SC.DateTime.abbreviatedDayNames":"Sun Mon Tue Wed Thu Fri Sat","_SC.DateTime.monthNames":"January February March April May June July August September October November December","_SC.DateTime.abbreviatedMonthNames":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec","_SC.DateTime.AMPMNames":"AM PM"});SC.DateTime.mixin({_setup:function(){SC.DateTime.dayNames=SC.String.w(SC.String.loc("_SC.DateTime.dayNames"));SC.DateTime.abbreviatedDayNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedDayNames"));SC.DateTime.monthNames=SC.String.w(SC.String.loc("_SC.DateTime.monthNames"));SC.DateTime.abbreviatedMonthNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedMonthNames"));SC.DateTime.AMPMNames=SC.String.w(SC.String.loc("_SC.DateTime.AMPMNames"))}});jQuery(document).ready(function(){SC.DateTime._setup()});SC.Response=SC.Object.extend({isResponse:YES,isError:NO,errorValue:function(){return this}.property().cacheable(),errorObject:null,request:null,originalRequest:function(){var a=this.get("request");while(a.get("source")){a=a.get("source")}return a}.property("request").cacheable(),type:function(){return this.getPath("request.type")}.property("request").cacheable(),address:function(){return this.getPath("request.address")}.property("request").cacheable(),isJSON:function(){return this.getPath("request.isJSON")||NO}.property("request").cacheable(),isXML:function(){return this.getPath("request.isXML")||NO}.property("request").cacheable(),listeners:function(){return this.getPath("request.listeners")}.property("request").cacheable(),status:-100,headers:null,body:function(){var a=this.get("encodedBody");if(a&&this.get("isJSON")){try{a=SC.json.decode(a)}catch(b){return SC.Error.create({message:b.name+": "+b.message,label:"Response",errorValue:this})}}return a}.property("encodedBody").cacheable(),response:function(){return this.get("body")}.property("body").cacheable(),isCancelled:NO,timedOut:null,timeoutTimer:null,fire:function(){var a=this.get("request"),c=a?a.get("source"):null;if(c&&c.willSend){c.willSend(a,this)}a.freeze();if(!this.get("isCancelled")){this.invokeTransport()}var b=a.get("timeout");if(b){var e=SC.Timer.schedule({target:this,action:"timeoutReached",interval:b,repeats:NO});this.set("timeoutTimer",e)}if(!this.get("isCancelled")&&c&&c.didSend){c.didSend(a,this)}},invokeTransport:function(){this.receive(function(a){this.set("status",200)},this)},receive:function(f,a){if(!this.get("timedOut")){var e=this.get("timeoutTimer");if(e){e.invalidate()}this.set("timedOut",NO)}var b=this.get("request");var c=b?b.get("source"):null;SC.run(function(){if(c&&c.willReceive){c.willReceive(b,this)}f.call(a,!this.get("isCancelled"));if(!this.get("isCancelled")&&c&&c.didReceive){c.didReceive(b,this)}if(!this.get("isCancelled")){this.notify()}},this);SC.Request.manager.transportDidClose(this);return this},cancel:function(){if(!this.get("isCancelled")){this.set("isCancelled",YES);this.cancelTransport();SC.Request.manager.transportDidClose(this)}},timeoutReached:function(){if(this.get("timedOut")===null){this.set("timedOut",YES);this.cancelTransport();this.receive(function(b){if(!b){return}var a=SC.$error("HTTP Request timed out","Request",0);a.set("errorValue",this);this.set("isError",YES);this.set("errorObject",a);this.set("status",0)},this);return YES}return NO},cancelTransport:function(){},_notifyListeners:function(j,b){var k=j[b],h,g,a;if(!k){return NO}var e=NO;var f=k.length;for(var c=0;c<f;c++){var l=k[c];h=(l.args||[]).copy();h.unshift(this);g=l.target;a=l.action;if(SC.typeOf(a)===SC.T_STRING){a=g[a]}e=a.apply(g,h)}return e},notify:function(){var b=this.get("listeners"),a=this.get("status"),c=Math.floor(a/100)*100,e=NO;if(!b){return this}e=this._notifyListeners(b,a);if(!e&&c!==a){e=this._notifyListeners(b,c)}if(!e&&a!==0){e=this._notifyListeners(b,0)}return this},toString:function(){var a=arguments.callee.base.apply(this,arguments);return"%@<%@ %@, status=%@".fmt(a,this.get("type"),this.get("address"),this.get("status"))}});SC.XHRResponse=SC.Response.extend({headers:function(){var c=this.get("rawRequest"),b=c?c.getAllResponseHeaders():null,a={};if(!b){return a}b.split("\n").forEach(function(h){var e=h.indexOf(":"),f,g;if(e>=0){f=h.slice(0,e);g=h.slice(e+1).trim();a[f]=g}},this);return a}.property("status").cacheable(),header:function(a){var b=this.get("rawRequest");return b?b.getResponseHeader(a):null},encodedBody:function(){var a=this.get("rawRequest");if(!a){return null}if(this.get("isXML")){return a.responseXML}return a.responseText}.property("status").cacheable(),cancelTransport:function(){var a=this.get("rawRequest");if(a){a.abort()}this.set("rawRequest",null)},invokeTransport:function(){var e,o,b,h,j=this.get("request"),f,a,g,c;h=this.createRequest();this.set("rawRequest",h);g=!!j.get("isAsynchronous");if(g){if(window.XMLHttpRequestProgressEvent){o=j.get("listeners");if(o){for(var p in o){if(isNaN(parseInt(p,10))){b=o[p];for(var l=0,m=b.length;l<m;l++){e=b[l];var n=p.split(".");if(SC.none(n[1])){SC.Event.add(h,n[0],e.target,e.action,e.args)}else{SC.Event.add(h[n[0]],n[1],e.target,e.action,e.args)}}}}}SC.Event.add(h,"loadend",this,this.finishRequest)}else{if(window.XMLHttpRequest&&h.addEventListener){SC.Event.add(h,"readystatechange",this,this.finishRequest)}else{f=this;a=function(){if(!f){return null}var q=f.finishRequest();if(q){f=null}return q};h.onreadystatechange=a}}}h.open(this.get("type"),this.get("address"),g);c=this.getPath("request.headers");for(var k in c){h.setRequestHeader(k,c[k])}h.send(this.getPath("request.encodedBody"));if(!g){this.finishRequest()}return h},createRequest:function(){var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{try{a=new ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(b){}try{if(!a){a=new ActiveXObject("MSXML2.XMLHTTP")}}catch(b){}}return a},finishRequest:function(p){var c,m,a,f=this.get("rawRequest"),j=f.readyState,g,n,e,b;if(j===4&&!this.get("timedOut")){this.receive(function(q){if(!q){return}e=-1;try{e=f.status||0}catch(t){}if((e<200)||(e>=300)){try{b=f.statusText||""}catch(s){b=""}n=SC.$error(b||"HTTP Request failed","Request",e);n.set("errorValue",this);this.set("isError",YES);this.set("errorObject",n)}this.set("status",e)},this);if(window.XMLHttpRequestProgressEvent){SC.Event.remove(f,"loadend",this,this.finishRequest);g=this.get("request");m=g.get("listeners");if(m){for(var o in m){if(isNaN(parseInt(o,10))){a=m[o];for(var h=0,k=a.length;h<k;h++){c=a[h];var l=o.split(".");if(SC.none(l[1])){SC.Event.remove(f,l[0],c.target,c.action,c.args)}else{SC.Event.remove(f[l[0]],l[1],c.target,c.action,c.args)}}}}}}else{if(window.XMLHttpRequest&&f.addEventListener){SC.Event.remove(f,"readystatechange",this,this.finishRequest)}else{f.onreadystatechange=null}}return YES}return NO}});sc_require("system/response");SC.Request=SC.Object.extend(SC.Copyable,SC.Freezable,{isAsynchronous:YES,isJSON:NO,isXML:NO,attachIdentifyingHeaders:YES,headers:function(){var a=this._headers;if(!a){a=this._headers={}}return a}.property().cacheable(),responseClass:SC.XHRResponse,source:null,address:null,type:"GET",timeout:null,body:null,encodedBody:function(){var a=this.get("body");if(a&&this.get("isJSON")){a=SC.json.encode(a)}return a}.property("isJSON","isXML","body").cacheable(),willSend:function(b,a){},didSend:function(b,a){},willReceive:function(b,a){},didReceive:function(b,a){},concatenatedProperties:"COPY_KEYS",COPY_KEYS:["attachIdentifyingHeaders","isAsynchronous","isJSON","isXML","address","type","timeout","body","responseClass","willSend","didSend","willReceive","didReceive"],copy:function(){var a={},e=this.COPY_KEYS,g=e.length,b,c,f;while(--g>=0){b=e[g];if(this.hasOwnProperty(b)){a[b]=this.get(b)}}if(this.hasOwnProperty("listeners")){a.listeners=SC.copy(this.get("listeners"))}if(this.hasOwnProperty("_headers")){a._headers=SC.copy(this._headers)}a.source=this.get("source")||this;return this.constructor.create(a)},header:function(a,b){var e,c;if(SC.typeOf(a)===SC.T_STRING){c=this._headers;if(arguments.length===1){return c?c[a]:null}else{this.propertyWillChange("headers");if(!c){c=this._headers={}}c[a]=b;this.propertyDidChange("headers");return this}}else{if(b===undefined){c=a;this.beginPropertyChanges();for(e in c){if(!c.hasOwnProperty(e)){continue}this.header(e,c[e])}this.endPropertyChanges();return this}}return this},clearHeaders:function(){this.propertyWillChange("headers");this._headers={};this.propertyDidChange("headers")},async:function(a){if(a===undefined){a=YES}return this.set("isAsynchronous",a)},timeoutAfter:function(a){return this.set("timeout",a)},json:function(a){if(a===undefined){a=YES}if(a){this.set("isXML",NO)}return this.set("isJSON",a)},xml:function(a){if(a===undefined){a=YES}if(a){this.set("isJSON",NO)}return this.set("isXML",a)},_prep:function(){var a=!!this.header("Content-Type");if(this.get("attachIdentifyingHeaders")){this.header("X-Requested-With","XMLHttpRequest");this.header("X-SproutCore-Version",SC.VERSION)}if(!a&&!!this.get("body")){if(this.get("isJSON")){this.header("Content-Type","application/json")}else{if(this.get("isXML")){this.header("Content-Type","text/xml")}}}return this},send:function(a){var b=this.get("timeout");if(b&&!this.get("isAsynchronous")){throw"Timeout values cannot be used with synchronous requests"}else{if(b===0){throw"The timeout value must either not be specified or must be greater than 0"}}if(a){this.set("body",a)}return SC.Request.manager.sendRequest(this.copy()._prep())},resend:function(){var a=this.get("source")?this:this.copy()._prep();return SC.Request.manager.sendRequest(a)},notify:function(f,e,c){var a;if(SC.typeOf(f)!==SC.T_NUMBER&&SC.typeOf(f)!==SC.T_STRING){a=SC.A(arguments).slice(2);c=e;e=f;f=0}else{a=SC.A(arguments).slice(3)}var b=this.get("listeners");if(!b){this.set("listeners",b={})}if(!b[f]){b[f]=[]}b[f].push({target:e,action:c,args:a});return this}});SC.Request.mixin({getUrl:function(a){return this.create().set("address",a).set("type","GET")},postUrl:function(b,a){var c=this.create().set("address",b).set("type","POST");if(a){c.set("body",a)}return c},deleteUrl:function(a){return this.create().set("address",a).set("type","DELETE")},putUrl:function(b,a){var c=this.create().set("address",b).set("type","PUT");if(a){c.set("body",a)}return c},patchUrl:function(b,a){var c=this.create().set("address",b).set("type","PATCH");if(a){c.set("body",a)}return c}});SC.Request.manager=SC.Object.create({maxRequests:6,inflight:[],pending:[],sendRequest:function(b){if(!b){return null}var a=b.get("responseClass").create({request:b});this.get("pending").pushObject(a);this.fireRequestIfNeeded();return a},cancel:function(b){var e=this.get("pending"),c=this.get("inflight"),a;if(e.indexOf(b)>=0){this.propertyWillChange("pending");e.removeObject(b);this.propertyDidChange("pending");return YES}else{if(c.indexOf(b)>=0){b.cancel();c.removeObject(b);this.fireRequestIfNeeded();return YES}}return NO},cancelAll:function(){if(this.get("pending").length||this.get("inflight").length){this.set("pending",[]);this.get("inflight").forEach(function(a){a.cancel()});this.set("inflight",[]);return YES}return NO},fireRequestIfNeeded:function(){var e=this.get("pending"),c=this.get("inflight"),a=this.get("maxRequests"),b;if((e.length>0)&&(c.length<a)){b=e.shiftObject();c.pushObject(b);b.fire()}},transportDidClose:function(a){this.get("inflight").removeObject(a);this.fireRequestIfNeeded()}});SC.FOCUS_ALL_CONTROLS=NO;SC.ready(function(){var a=SC.SAFARI_FOCUS_BEHAVIOR;if(a!==null&&a!==undefined){SC.FOCUS_ALL_CONTROLS=SC.SAFARI_FOCUS_BEHAVIOR}});if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat([]);SC.TreeItemContent={isTreeItemContent:YES,treeItemChildren:null,treeItemIsExpanded:YES,treeItemIsGrouped:NO,treeItemDisclosureState:function(b,a){return this.get("treeItemIsExpanded")?SC.BRANCH_OPEN:SC.BRANCH_CLOSED},treeItemCollapse:function(b,a){this.setIfChanged("treeItemIsExpanded",NO)},treeItemExpand:function(b,a){this.setIfChanged("treeItemIsExpanded",YES)},treeItemBranchIndexes:function(f,c){var e=this.get("treeItemChildren"),b,h,a,g;if(!e){return null}b=SC.IndexSet.create();h=e.get("length");for(a=0;a<h;a++){if(!(g=e.objectAt(a))){continue}if(!g.get("treeItemChildren")){continue}if(g.treeItemDisclosureState(this,a)!==SC.LEAF_NODE){b.add(a)}}return b.get("length")>0?b:null}};SC.BRANCH_OPEN=17;SC.BRANCH_CLOSED=18;SC.LEAF_NODE=32;SC.CollectionContent={isCollectionContent:YES,contentIndexIsSelected:function(b,c,a){var e=b.get("selection");return e?e.contains(c,a):NO},contentIndexIsEnabled:function(b,c,a){return b.get("isEnabled")},contentGroupIndexes:function(a,b){return null},contentIndexIsGroup:function(b,c,a){return NO},contentIndexOutlineLevel:function(b,c,a){return -1},contentIndexDisclosureState:function(b,c,a){return SC.LEAF_NODE},contentIndexExpand:function(b,c,a){SC.Logger.log("contentIndexExpand(%@, %@, %@)".fmt(b,c,a))},contentIndexCollapse:function(b,c,a){SC.Logger.log("contentIndexCollapse(%@, %@, %@)".fmt(b,c,a))}};sc_require("mixins/tree_item_content");sc_require("mixins/collection_content");SC.TreeItemObserver=SC.Object.extend(SC.Array,SC.CollectionContent,{item:null,delegate:null,parentObserver:null,parentItem:function(){var a=this.get("parentObserver");return a?a.get("item"):null}.property("parentObserver").cacheable(),index:null,outlineLevel:0,children:null,disclosureState:SC.BRANCH_OPEN,branchIndexes:function(){var f=this.get("item"),b,g,a,e,c;if(!f){return SC.IndexSet.EMPTY}else{if(f.isTreeItemContent){g=this.get("parentItem");a=this.get("index");return f.treeItemBranchIndexes(g,a)}else{e=this.get("children");if(!e){return null}c=SC.IndexSet.create();b=e.get("length");g=f;for(a=0;a<b;a++){if(!(f=e.objectAt(a))){continue}if(!this._computeChildren(f,g,a)){continue}if(this._computeDisclosureState(f,g,a)!==SC.LEAF_NODE){c.add(a)}}return c.get("length")>0?c:null}}}.property("children").cacheable(),isHeaderVisible:function(){return !!this.get("parentObserver")}.property("parentObserver").cacheable(),length:0,objectAt:function(g,c){var h=this.get("length"),k=this.get("item"),a=this._objectAtCache,j=g,f=0,e,b;if(g>=h){return undefined}if(this.get("isHeaderVisible")){if(g===0){return k}else{j--}}k=null;if(!a){a=this._objectAtCache=[]}if((k=a[g])!==undefined){return k}b=this.get("children");if(!b){return undefined}if(e=this.get("branchIndexes")){e.forEach(function(n){if(k||(n>j)){return}var m=this.branchObserverAt(n),l;if(!m){return}l=m.get("length");if(n+l>j){k=m.objectAt(j-n,c);j=-1}else{j-=l-1}},this)}if(j>=0){k=b.objectAt(j,c)}a[g]=k;return k},replace:function(a,b,l,e){var k=a,h=null,f,g,j;if(e===undefined){e=SC.DROP_BEFORE}if(this.get("isHeaderVisible")){k--}if(k<0){throw"Tree Item cannot replace itself"}if(f=this.get("branchIndexes")){f.forEach(function(m){if(h||(m>=k)){return}if(!(h=this.branchObserverAt(m))){return}g=h.get("length");if((m+g===k)&&e===SC.DROP_AFTER){k-=m}else{if(m+g>k){k-=m}else{k-=g-1;h=null}}},this)}if(h){h.replace(k,b,l,e);return this}j=k+b;if(b>1&&f){f.forEachIn(k,f.get("max")-k,function(m){if(m>j){return}if(!(h=this.branchObserverAt(m))){return}g=h.get("length");j-=g-1},this)}b=j-k;var c=this.get("children");if(!c){throw"cannot replace() tree item with no children"}if((b<0)||(j>c.get("length"))){throw"replace() range must lie within a single tree item"}c.replace(k,b,l,e);return this},observerContentDidChange:function(b,c,k){this.invalidateBranchObserversAt(b);this._objectAtCache=this._outlineLevelCache=null;this._disclosureStateCache=null;this._contentGroupIndexes=NO;this.notifyPropertyChange("branchIndexes");var e=this.get("length"),f=this._computeLength(),h=this.get("parentObserver"),g;if(e!==f){this.set("length",f)}if(!this._notifyParent){return this}if(h){g=SC.IndexSet.create(this.get("index"));h._childrenRangeDidChange(h.get("children"),null,"[]",g)}else{if(e===f){c=this.expandChildIndex(b+c);b=this.expandChildIndex(b);c=c-b;k=0}else{b=this.expandChildIndex(b);c=f-b;k=f-e}var j=c;var a=k+j;this.arrayContentDidChange(b,j,a)}},expandChildIndex:function(c){var b=c;if(this.get("isHeaderVisible")){c++}var a=this.get("branchIndexes");if(!a||a.get("length")===0){return b}a.forEachIn(0,c,function(e){b+=this.branchObserverAt(e).get("length")-1},this);return b},_contentGroupIndexes:NO,contentGroupIndexes:function(a,f){if(f!==this){return null}var c=this._contentGroupIndexes;if(c!==NO){return c}if(this.get("parentObserver")){return null}var e=this.get("item"),h,b,j,g;if(e&&e.isTreeItemContent){h=e.get("treeItemIsGrouped")}else{h=!!this.delegate.get("treeItemIsGrouped")}if(h){c=SC.IndexSet.create();b=this.get("branchIndexes");if(b){j=b.min();g=0;b.forEach(function(l){c.add(l+g,1);var k=this.branchObserverAt(l);if(k){g+=k.get("length")-1;j+=g}},this)}}else{c=null}this._contentGroupIndexes=c;return c},contentIndexIsGroup:function(b,e,a){var c=this.contentGroupIndexes(b,e);return c?c.contains(a):NO},contentIndexOutlineLevel:function(l,h,f){if(h!==this){return -1}var a=this._outlineLevelCache;if(a&&(a[f]!==undefined)){return a[f]}if(!a){a=this._outlineLevelCache=[]}var g=this.get("length"),m=f,e=0,j=null,c,b,k;if(f>=g){return -1}if(this.get("isHeaderVisible")){if(f===0){return a[0]=this.get("outlineLevel")-1}else{m--}}if(c=this.get("branchIndexes")){c.forEach(function(p){if((j!==null)||(p>m)){return}var o=this.branchObserverAt(p),n;if(!o){return}n=o.get("length");if(p+n>m){j=o.contentIndexOutlineLevel(l,o,m-p);m=-1}else{m-=n-1}},this)}if(m>=0){j=this.get("outlineLevel")}a[f]=j;return j},contentIndexDisclosureState:function(l,h,f){if(h!==this){return -1}var a=this._disclosureStateCache;if(a&&(a[f]!==undefined)){return a[f]}if(!a){a=this._disclosureStateCache=[]}var g=this.get("length"),m=f,e=0,j=null,c,b,k;if(f>=g){return SC.LEAF_NODE}if(this.get("isHeaderVisible")){if(f===0){return a[0]=this.get("disclosureState")}else{m--}}if(c=this.get("branchIndexes")){c.forEach(function(p){if((j!==null)||(p>m)){return}var o=this.branchObserverAt(p),n;if(!o){return}n=o.get("length");if(p+n>m){j=o.contentIndexDisclosureState(l,o,m-p);m=-1}else{m-=n-1}},this)}if(m>=0){j=SC.LEAF_NODE}a[f]=j;return j},contentIndexExpand:function(b,g,a){var c,h=a,e,f;if(g!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._expand(this.get("item"));return}else{h--}}if(c=this.get("branchIndexes")){c.forEach(function(l){if(l>=h){return}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){k.contentIndexExpand(b,k,h-l);h=-1}else{h-=j-1}},this)}if(h>=0){e=this.get("children");f=e?e.objectAt(h):null;if(f){this._expand(f,this.get("item"),h)}}},contentIndexCollapse:function(b,g,a){var c,e,f,h=a;if(g!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._collapse(this.get("item"));return}else{h--}}if(c=this.get("branchIndexes")){c.forEach(function(l){if(l>=h){return}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){k.contentIndexCollapse(b,k,h-l);h=-1}else{h-=j-1}},this)}if(h>=0){e=this.get("children");f=e?e.objectAt(h):null;if(f){this._collapse(f,this.get("item"),h)}}},branchObserverAt:function(e){var h=this._branchObserversByIndex,c=this._branchObserverIndexes,f,j,b,l,a,g,k;if(!h){h=this._branchObserversByIndex=[]}if(!c){c=this._branchObserverIndexes=SC.IndexSet.create()}if(f=h[e]){return f}a=this.get("children");l=a?a.objectAt(e):null;if(!l){return null}h[e]=f=SC.TreeItemObserver.create({item:l,delegate:this.get("delegate"),parentObserver:this,index:e,outlineLevel:this.get("outlineLevel")+1});c.add(e);return f},invalidateBranchObserversAt:function(c){var b=this._branchObserversByIndex,a=this._branchObserverIndexes;if(!b||b.length<=c){return this}if(c<0){c=0}a.forEachIn(c,a.get("max")-c,function(f){var e=b[f];if(e){e.destroy()}},this);b.length=c;return this},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("item");if(!a){throw"SC.TreeItemObserver.item cannot be null"}a.addObserver("*",this,this._itemPropertyDidChange);this._itemPropertyDidChange(a,"*");this._notifyParent=YES},destroy:function(){this.invalidateBranchObserversAt(0);this._objectAtCache=null;this._notifyParent=NO;var c=this.get("item");if(c){c.removeObserver("*",this,this._itemPropertyDidChange)}var a=this._children,b=this._childrenRangeObserver;if(a&&b){a.removeRangeObserver(b)}this.set("length",0);arguments.callee.base.apply(this,arguments)},_itemPropertyDidChange:function(g,b){var a=this.get("children"),f=this.get("disclosureState"),e=this.get("item"),c;this.beginPropertyChanges();c=this._computeDisclosureState(e);if(f!==c){this.set("disclosureState",c)}c=this._computeChildren(e);if(a!==c){this.set("children",c)}this.endPropertyChanges()},_childrenDidChange:function(){var c=this.get("disclosureState"),e=c===SC.BRANCH_OPEN?this.get("children"):null,b=this._children,a=this._childrenRangeObserver;if(b===e){return this}if(a){b.removeRangeObserver(a)}if(e){this._childrenRangeObserver=e.addRangeObserver(null,this,this._childrenRangeDidChange)}else{this._childrenRangeObserver=null}this._children=e;this._childrenRangeDidChange(e,null,"[]",null)}.observes("children","disclosureState"),_childrenRangeDidChange:function(g,k,j,e){var a=this.get("children"),f=a?a.get("length"):0,c=e?e.get("min"):0,h=e?e.get("max"):f,b=this._childrenLen||0;this._childrenLen=f;this.observerContentDidChange(c,h-c,f-b)},_computeDisclosureState:function(e,f,b){var c,a;if(!e||!this._computeChildren(e)){return SC.LEAF_NODE}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")}if(b===undefined){b=this.get("index")}return e.treeItemDisclosureState(f,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}return e.get(c)?SC.BRANCH_OPEN:SC.BRANCH_CLOSED}}},_collapse:function(e,f,b){var c,a;if(!e||!this._computeChildren(e)){return this}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")}if(b===undefined){b=this.get("index")}e.treeItemCollapse(f,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}e.setIfChanged(c,NO)}}return this},_expand:function(e,f,b){var c,a;if(!e||!this._computeChildren(e)){return this}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")}if(b===undefined){b=this.get("index")}e.treeItemExpand(f,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}e.setIfChanged(c,YES)}}return this},_computeChildren:function(c){var a,b;if(!c){return null}else{if(c.isTreeItemContent){return c.get("treeItemChildren")}else{b=this._treeItemChildrenKey;if(!b){a=this.get("delegate");b=a?a.get("treeItemChildrenKey"):"treeItemChildren";this._treeItemChildrenKey=b}return c.get(b)}}},_computeLength:function(){var b=this.get("isHeaderVisible")?1:0,e=this.get("disclosureState"),c=this.get("children"),a;if((e===SC.BRANCH_OPEN)&&c){b+=c.get("length");if(a=this.get("branchIndexes")){a.forEach(function(f){var g=this.branchObserverAt(f);b+=g.get("length")-1},this)}}return b}});sc_require("private/tree_item_observer");SC.TreeController=SC.ObjectController.extend(SC.SelectionSupport,{treeItemIsGrouped:NO,treeItemIsExpandedKey:"treeItemIsExpanded",treeItemChildrenKey:"treeItemChildren",arrangedObjects:function(){var a,b=this.get("content");if(b){a=SC.TreeItemObserver.create({item:b,delegate:this});a.bind("allowsSelection",this,"allowsSelection");a.bind("allowsMultipleSelection",this,"allowsMultipleSelection");a.bind("allowsEmptySelection",this,"allowsEmptySelection")}else{a=null}this._sctc_arrangedObjects=a;return a}.property().cacheable(),_sctc_invalidateArrangedObjects:function(){this.propertyWillChange("arrangedObjects");var a=this._sctc_arrangedObjects;if(a){a.destroy()}this._sctc_arrangedObjects=null;this.propertyDidChange("arrangedObjects")}.observes("content","treeItemIsExpandedKey","treeItemChildrenKey","treeItemIsGrouped"),_sctc_arrangedObjectsContentDidChange:function(){this.updateSelectionAfterContentChange()}.observes("*arrangedObjects.[]"),canSelectGroups:NO,firstSelectableObject:function(){var e=this.get("arrangedObjects"),c,b,a=0;if(!e){return null}if(this.get("canSelectGroups")){return e.get("firstObject")}c=e.contentGroupIndexes(null,e);b=e.get("length");while(c.contains(a)&&(a<b)){a++}return a>=b?null:e.objectAt(a)}.property()});SC.InlineTextFieldDelegate={editor:null,acquireEditor:function(a){var b=this.editor;if(b){if(b.get("isEditing")&&!b.commitEditing()&&!b.discardEditing()){return null}this.releaseEditor(b)}var c=a.exampleEditor?a.exampleEditor:SC.InlineTextFieldView,e=a.get("pane");b=this.editor=e.createChildView(c,{inlineEditorDelegate:this});e.appendChild(b);return b},releaseEditor:function(a){a.removeFromParent();this.editor=null;return YES}};SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_HUMANIZE_REGEXP=(/[\-_]/g);SC.STRING_REGEXP_ESCAPED_REGEXP=(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g);SC.STRING_DASHERIZE_CACHE={top:"top",left:"left",right:"right",bottom:"bottom",width:"width",height:"height",minWidth:"min-width",maxWidth:"max-width"};SC.INFLECTION_CONSTANTS={PLURAL:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/,"s"]],SINGULAR:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/s$/i,""]],IRREGULAR:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["person","people"]],UNCOUNTABLE:["sheep","fish","series","species","money","rice","information","info","equipment"]};SC.mixin(SC.String,{capitalizeEach:function(a){return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,b,e){return(e)?(b+e.toUpperCase()):b}).capitalize()},titleize:function(b){var a=b.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2");return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,f,e){return e?" "+e.toUpperCase():" "}).capitalize()},classify:function(e){var a=e.replace(SC.STRING_TITLEIZE_REGEXP,function(f,h,g){return g?g.toUpperCase():""});var c=a.charAt(0),b=c.toUpperCase();return c!==b?b+a.slice(1):a},humanize:function(a){return SC.String.decamelize(a).replace(SC.STRING_HUMANIZE_REGEXP," ")},escapeForRegExp:function(a){return a.replace(SC.STRING_REGEXP_ESCAPED_REGEXP,"\\$1")},removeDiacritics:function(h){var a=SC.diacriticMappingTable;if(!a){SC.diacriticMappingTable={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ā":"A","Ă":"A","Ą":"A","Ǎ":"A","Ǟ":"A","Ǡ":"A","Ǻ":"A","Ȁ":"A","Ȃ":"A","Ȧ":"A","Ḁ":"A","Ạ":"A","Ả":"A","Ấ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ắ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Å":"A","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ç":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ḉ":"C","Ď":"D","Ḋ":"D","Ḍ":"D","Ḏ":"D","Ḑ":"D","Ḓ":"D","È":"E","É":"E","Ê":"E","Ë":"E","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ȩ":"E","Ḕ":"E","Ḗ":"E","Ḙ":"E","Ḛ":"E","Ḝ":"E","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ế":"E","Ề":"E","Ể":"E","Ễ":"E","Ệ":"E","Ḟ":"F","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","Ǧ":"G","Ǵ":"G","Ḡ":"G","Ĥ":"H","Ȟ":"H","Ḣ":"H","Ḥ":"H","Ḧ":"H","Ḩ":"H","Ḫ":"H","Ì":"I","Í":"I","Î":"I","Ï":"I","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ḭ":"I","Ḯ":"I","Ỉ":"I","Ị":"I","Ĵ":"J","Ķ":"K","Ǩ":"K","Ḱ":"K","Ḳ":"K","Ḵ":"K","Ĺ":"L","Ļ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ḻ":"L","Ḽ":"L","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ñ":"N","Ń":"N","Ņ":"N","Ň":"N","Ǹ":"N","Ṅ":"N","Ṇ":"N","Ṉ":"N","Ṋ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ō":"O","Ŏ":"O","Ő":"O","Ơ":"O","Ǒ":"O","Ǫ":"O","Ǭ":"O","Ȍ":"O","Ȏ":"O","Ȫ":"O","Ȭ":"O","Ȯ":"O","Ȱ":"O","Ṍ":"O","Ṏ":"O","Ṑ":"O","Ṓ":"O","Ọ":"O","Ỏ":"O","Ố":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ớ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Ṕ":"P","Ṗ":"P","Ŕ":"R","Ŗ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ṟ":"R","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṥ":"S","Ṧ":"S","Ṩ":"S","Ţ":"T","Ť":"T","Ț":"T","Ṫ":"T","Ṭ":"T","Ṯ":"T","Ṱ":"T","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","Ư":"U","Ǔ":"U","Ǖ":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ȕ":"U","Ȗ":"U","Ṳ":"U","Ṵ":"U","Ṷ":"U","Ṹ":"U","Ṻ":"U","Ụ":"U","Ủ":"U","Ứ":"U","Ừ":"U","Ử":"U","Ữ":"U","Ự":"U","Ṽ":"V","Ṿ":"V","Ŵ":"W","Ẁ":"W","Ẃ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẋ":"X","Ẍ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ȳ":"Y","Ẏ":"Y","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","Ẑ":"Z","Ẓ":"Z","Ẕ":"Z","`":"`","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ā":"a","ă":"a","ą":"a","ǎ":"a","ǟ":"a","ǡ":"a","ǻ":"a","ȁ":"a","ȃ":"a","ȧ":"a","ḁ":"a","ạ":"a","ả":"a","ấ":"a","ầ":"a","ẩ":"a","ẫ":"a","ậ":"a","ắ":"a","ằ":"a","ẳ":"a","ẵ":"a","ặ":"a","ḃ":"b","ḅ":"b","ḇ":"b","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ḉ":"c","ď":"d","ḋ":"d","ḍ":"d","ḏ":"d","ḑ":"d","ḓ":"d","è":"e","é":"e","ê":"e","ë":"e","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ȅ":"e","ȇ":"e","ȩ":"e","ḕ":"e","ḗ":"e","ḙ":"e","ḛ":"e","ḝ":"e","ẹ":"e","ẻ":"e","ẽ":"e","ế":"e","ề":"e","ể":"e","ễ":"e","ệ":"e","ḟ":"f","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","ǧ":"g","ǵ":"g","ḡ":"g","ĥ":"h","ȟ":"h","ḣ":"h","ḥ":"h","ḧ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ì":"i","í":"i","î":"i","ï":"i","ĩ":"i","ī":"i","ĭ":"i","į":"i","ǐ":"i","ȉ":"i","ȋ":"i","ḭ":"i","ḯ":"i","ỉ":"i","ị":"i","ĵ":"j","ǰ":"j","ķ":"k","ǩ":"k","ḱ":"k","ḳ":"k","ḵ":"k","ĺ":"l","ļ":"l","ľ":"l","ḷ":"l","ḹ":"l","ḻ":"l","ḽ":"l","ḿ":"m","ṁ":"m","ṃ":"m","ñ":"n","ń":"n","ņ":"n","ň":"n","ǹ":"n","ṅ":"n","ṇ":"n","ṉ":"n","ṋ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ō":"o","ŏ":"o","ő":"o","ơ":"o","ǒ":"o","ǫ":"o","ǭ":"o","ȍ":"o","ȏ":"o","ȫ":"o","ȭ":"o","ȯ":"o","ȱ":"o","ṍ":"o","ṏ":"o","ṑ":"o","ṓ":"o","ọ":"o","ỏ":"o","ố":"o","ồ":"o","ổ":"o","ỗ":"o","ộ":"o","ớ":"o","ờ":"o","ở":"o","ỡ":"o","ợ":"o","ṕ":"p","ṗ":"p","ŕ":"r","ŗ":"r","ř":"r","ȑ":"r","ȓ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ṟ":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ș":"s","ṡ":"s","ṣ":"s","ṥ":"s","ṧ":"s","ṩ":"s","ţ":"t","ť":"t","ț":"t","ṫ":"t","ṭ":"t","ṯ":"t","ṱ":"t","ẗ":"t","ù":"u","ú":"u","û":"u","ü":"u","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ư":"u","ǔ":"u","ǖ":"u","ǘ":"u","ǚ":"u","ǜ":"u","ȕ":"u","ȗ":"u","ṳ":"u","ṵ":"u","ṷ":"u","ṹ":"u","ṻ":"u","ụ":"u","ủ":"u","ứ":"u","ừ":"u","ử":"u","ữ":"u","ự":"u","ṽ":"v","ṿ":"v","ŵ":"w","ẁ":"w","ẃ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẘ":"w","ẋ":"x","ẍ":"x","ý":"y","ÿ":"y","ŷ":"y","ȳ":"y","ẏ":"y","ẙ":"y","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","ź":"z","ż":"z","ž":"z","ẑ":"z","ẓ":"z","ẕ":"z"};a=SC.diacriticMappingTable}var e,f,b="",g=h.length;for(var c=0;c<=g;++c){e=h.charAt(c);f=a[e];b+=f||e}return b},pluralize:function(h){var m,f,b=h.split(/\s/).pop(),j=h.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(m=0,f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;m<f;m++){var g=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[m];if(b==g){return h.toString()}}for(m=0,f=SC.INFLECTION_CONSTANTS.IRREGULAR.length;m<f;m++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[m][0],l=SC.INFLECTION_CONSTANTS.IRREGULAR[m][1];if((b==c)||(b==l)){if(a){l=l.capitalize()}return j+l}}for(m=0,f=SC.INFLECTION_CONSTANTS.PLURAL.length;m<f;m++){var k=SC.INFLECTION_CONSTANTS.PLURAL[m][0],e=SC.INFLECTION_CONSTANTS.PLURAL[m][1];if(k.test(b)){return h.replace(k,e)}}},singularize:function(h){var m,f,b=h.split(/\s/).pop(),j=h.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(m=0,f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;m<f;m++){var g=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[m];if(b==g){return h.toString()}}for(m=0,f=SC.INFLECTION_CONSTANTS.IRREGULAR.length;m<f;m++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[m][0],l=SC.INFLECTION_CONSTANTS.IRREGULAR[m][1];if((b==c)||(b==l)){if(a){c=c.capitalize()}return j+c}}for(m=0,f=SC.INFLECTION_CONSTANTS.SINGULAR.length;m<f;m++){var k=SC.INFLECTION_CONSTANTS.SINGULAR[m][0],e=SC.INFLECTION_CONSTANTS.SINGULAR[m][1];if(k.test(b)){return h.replace(k,e)}}}});SC.String.strip=SC.String.trim;sc_require("system/string");SC.supplement(String.prototype,{capitalizeEach:function(){return SC.String.capitalizeEach(this,arguments)},titleize:function(a){return SC.String.titleize(this,arguments)},classify:function(a){return SC.String.classify(this,arguments)},humanize:function(a){return SC.String.humanize(this,arguments)},escapeForRegExp:function(a){return SC.String.escapeForRegExp(this,arguments)},removeDiacritics:function(a){return SC.String.removeDiacritics(this,arguments)},trim:function(a){return SC.String.trim(this,arguments)},trimLeft:function(a){return SC.String.trimLeft(this,arguments)},trimRight:function(a){return SC.String.trimRight(this,arguments)},pluralize:function(a){return SC.String.pluralize(this,arguments)},singularize:function(a){return SC.String.singularize(this,arguments)}});SC.Gesture=SC.Object.extend({name:"gesture",touchIsInGesture:function(b,a){return NO},touchStart:function(a){},touchesDragged:function(a,b){},touchEnd:function(a){},start:function(){if(!this.get("isActive")){this.set("isActive",YES);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Start";if(this.view[a]){this.view[a].apply(this.view,b)}}},end:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"End";if(this.view[a]){this.view[a].apply(this.view,b)}}},change:function(){if(this.get("isActive")){var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Changed";if(this.view[a]){this.view[a].apply(this.view,b)}}},cancel:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Cancelled";if(this.view[a]){this.view[a].apply(this.view,b)}}},trigger:function(){var b=SC.$A(arguments);b.unshift(this);var a=this.name;if(this.view[a]){this.view[a].apply(this.view,b)}},take:function(a){a.isTaken=YES;if(SC.none(a.touchResponder)||a.touchResponder!==this){a.makeTouchResponder(this,YES)}},release:function(a){a.isTaken=NO;if(a.nextTouchResponder){a.makeTouchResponder(a.nextTouchResponder)}},discardTouch:function(a){a.isTaken=YES;a.makeTouchResponder(null)},statusForTouch:function(c){var b=SC.guidFor(c.view)+this.name;var a=c[b];if(!a){a=c[b]={}}return a},unassignedTouchDidStart:function(a){if(a.isTaken){return}if(this.touchIsInGesture(a,this.statusForTouch(a))){this.take(a)}},unassignedTouchesDidChange:function(a,b){b.forEach(function(c){if(c.isTaken){return}if(this.touchIsInGesture(c,this.statusForTouch(c))){this.take(c)}},this)},unassignedTouchDidEnd:function(a){},interestedInTouch:function(b){var a=this.statusForTouch(b);if(a.isInterested){return}a.isInterested=YES;b.isInteresting++},uninterestedInTouch:function(b){var a=this.statusForTouch(b);if(!a.isInterested){return}a.isInterested=NO;b.isInteresting--}});sc_require("system/gesture");SC.PinchGesture=SC.Gesture.extend({name:"pinch",acceptsMultitouch:YES,scale:1,unassignedTouchesDidChange:function(a,b){if(b.length==2){this.take(b[0]);this.take(b[1])}},touchStart:function(b){var a=b.touchesForResponder(this);if(!a||a.length===0){return YES}else{if(a.length==1){this.start([a[0],b]);return YES}else{return NO}}},touchesDragged:function(a,c){var e=c.firstObject(),b=e.averagedTouchesForView(this);if(b.touchCount==2){if(!this._startDistance){this._startDistance=b.d}this.scale=b.d/this._startDistance;this.change(c,this.scale)}},touchEnd:function(b){this._startDistance=null;var a=b.touchesForResponder(this);this.trigger(a,this.scale);this.end(a,this.scale);if(a){a.forEach(function(c){this.release(c)},this)}}});sc_require("system/gesture");SC.SWIPE_HORIZONTAL="X";SC.SWIPE_VERTICAL="Y";SC.SWIPE_ANY="XY";SC.SWIPE_LEFT="LEFT";SC.SWIPE_RIGHT="RIGHT";SC.SWIPE_UP="UP";SC.SWIPE_DOWN="DOWN";SC.SwipeGesture=SC.Gesture.extend({name:"swipe",acceptsMultitouch:YES,direction:SC.SWIPE_HORIZONTAL,currentDirection:null,startDistance:5,swipeDistance:40,tolerance:0.5,touchIsInGesture:function(j,g){if(!g.flunked){var k=this.get("direction"),e=this.get("currentDirection"),a=this.get("startDistance"),h=j.pageX-j.startX,f=j.pageY-j.startY,c=Math.abs(h),b=Math.abs(f);if(Math.abs(h)>a||Math.abs(f)>a){if(!e){if(k==SC.SWIPE_ANY){if(c>b){e=SC.SWIPE_HORIZONTAL}else{if(b>c){e=SC.SWIPE_VERTICAL}else{return NO}}}else{e=k}this.set("currentDirection",e)}var m=(e==SC.SWIPE_HORIZONTAL)?h:f,l=(e==SC.SWIPE_HORIZONTAL)?f:h;if(Math.abs(m)*this.get("tolerance")>Math.abs(l)){return YES}}}return NO},touchStart:function(e){var b=this.get("currentDirection"),c=e["page"+b]-e["start"+b],a;if(c<0){a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}this.start(e,a,c);return YES},touchesDragged:function(k,e){var c=e.firstObject();var f=this.get("currentDirection"),a=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),j=c["page"+f]-c["start"+f],g=c["page"+a]-c["start"+a],h;if(j<0){h=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{h=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(j)<this.get("startDistance")||Math.abs(j)*this.get("tolerance")<Math.abs(g)){this.release(c);var b=c.touchesForResponder(this);if(!b||b.length===0){this.cancel(c,h,j)}}else{this.change(c,h,j)}},touchEnd:function(h){var f=this.get("currentDirection"),e=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),g=h["page"+f]-h["start"+f],b=h["page"+e]-h["start"+e],a;if(g<0){a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(g)>this.get("swipeDistance")||Math.abs(g)*this.get("tolerance")<Math.abs(b)){this.trigger(h,a)}this.end(h,a,g);this.set("currentDirection",null);var c=h.touchesForResponder(this);if(c){c.forEach(function(j){this.release(j)},this)}},cancel:function(){arguments.callee.base.apply(this,arguments);this.set("currentDirection",null)}});sc_require("system/gesture");SC.TapGesture=SC.Gesture.extend({name:"tap",acceptsMultitouch:NO,_tapCount:null,_candidateTouch:null,_eventTimer:null,tapWiggle:10,tapDelay:200,touchIsInGesture:function(b,a){return !b.tapFlunked},touchStart:function(a){if(this._eventTimer){this._eventTimer.invalidate()}if(this._candidateTouch&&this._candidateTouch.touch.identifier!==a.identifier){this._cancelTap(a);return NO}this._candidateTouch={startTime:Date.now(),touch:a};this.start(a);return YES},touchesDragged:function(a,c){var f=c[0];var b=(c.length>1||!this._candidateTouch||f.identifier!==this._candidateTouch.touch.identifier);var e=this._calculateDragDistance(f)>this.get("tapWiggle");if(b||e){this._cancelTap(f)}},touchEnd:function(a){if(this._calculateDragDistance(a)>this.get("tapWiggle")||Date.now()-this._candidateTouch.startTime>this.get("tapDelay")){this._cancelTap(a)}else{this._addTap(a)}},_addTap:function(b){var a=this;if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=(this._tapCount||0)+1;this._candidateTouch=null;this._eventTimer=SC.Timer.schedule({target:a,action:function(){this._triggerTap(b)},interval:this.get("tapDelay")});this.change(b,this._tapCount);this.trigger(b,this._tapCount)},_cancelTap:function(a){a.tapFlunked=YES;this.release(a);this.cancel(a,this._tapCount);if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_triggerTap:function(a){this.end(a,this._tapCount);this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_calculateDragDistance:function(a){return Math.sqrt(Math.pow(a.pageX-a.startX,2)+Math.pow(a.pageY-a.startY,2))}});SC.AutoMixin={autoMixins:[],createChildView:function(b,c){if(!c){c={}}c.owner=c.parentView=this;c.isVisibleInWindow=this.get("isVisibleInWindow");if(!c.page){c.page=this.page}var a=this.get("autoMixins");a.push(c);b=b.create.apply(b,a);return b}};SC.mixin({_copy_computed_props:["maxWidth","maxHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","fontFamily","fontSize","fontStyle","fontWeight","fontVariant","lineHeight","whiteSpace","letterSpacing","wordWrap"],stringFromLayout:function(f){var e=["maxHeight","maxWidth","minHeight","minWidth","centerY","centerX","width","height","bottom","right","top","left","zIndex","opacity","border","borderLeft","borderRight","borderTop","borderBottom"],a=[],c,b=e.length;while(--b>=0){c=e[b];if(f.hasOwnProperty(c)){a.push(c+":"+f[c])}}return"{"+a.join(", ")+"}"},heightForString:function(j,c,b,a,h){var f=this._heightCalcElement,g,k;if(!h){j=SC.RenderContext.escapeHTML(j)}g=(a&&SC.typeOf(a)===SC.T_ARRAY)?a.join(" "):"";if(!c){c=100}if(!f){f=this._heightCalcElement=document.createElement("div");document.body.insertBefore(f,null)}b=b+"; width: "+c+"px; left: "+(-1*c)+"px; position: absolute";var e=SC.$(f);e.attr("style",b);if(g!==""){e.attr("class",g)}f.innerHTML=j;k=f.clientHeight;f=null;return k},prepareStringMeasurement:function(p,a){var l=this._metricsCalculationElement,j,q,c,e;j=SC.A(a).join(" ");if(!l){var o=document.createElement("div");o.style.cssText="position:absolute; left:-10010px; top:-10px;width:10000px; height:0px; overflow:hidden;visibility:hidden;";l=this._metricsCalculationElement=document.createElement("div");o.appendChild(l);document.body.insertBefore(o,null)}e=SC.$(l);if(SC.typeOf(p)!=SC.T_STRING){var h=null;if(document.defaultView&&document.defaultView.getComputedStyle){h=document.defaultView.getComputedStyle(p,null)}else{h=p.currentStyle}var n=this._copy_computed_props;for(var k=0;k<n.length;k++){var b=n[k],g=h[b];l.style[b]=g}var m=l.style;if(m.font===""){var f="";if(m.fontStyle){f+=m.fontStyle+" "}if(m.fontVariant){f+=m.fontVariant+" "}if(m.fontWeight){f+=m.fontWeight+" "}if(m.fontSize){f+=m.fontSize}else{f+="10px"}if(m.lineHeight){f+="/"+m.lineHeight}f+=" ";if(m.fontFamily){f+=m.fontFamily}else{m+="sans-serif"}l.style.font=f}SC.mixin(l.style,{left:"0px",top:"0px",position:"absolute",bottom:"auto",right:"auto",width:"auto",height:"auto"});h=null}else{c=p;e.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")}l.className=j;l=null},teardownStringMeasurement:function(){var a=this._metricsCalculationElement;a.innerHTML="";a.className="";a.setAttribute("style","");a=null},measureString:function(c,b){var e=this._metricsCalculationElement,f=0;if(!e){throw"measureString requires a string measurement environment to be set up. Did you mean metricsForString?"}if(b){e.innerHTML=c}else{if(typeof e.innerText!="undefined"){e.innerText=c}else{e.textContent=c}}if(SC.browser.isIE){f=1}var a={width:e.clientWidth+f,height:e.clientHeight};if(SC.browser.isMozilla){a.width+=1}e=null;return a},metricsForString:function(c,e,f,b){SC.prepareStringMeasurement(e,f);var a=SC.measureString(c,b);SC.teardownStringMeasurement();return a}});sc_require("system/utils/string_measurement");SC.AutoResize={shouldAutoResize:YES,shouldMeasureSize:YES,shouldCacheSizes:NO,shouldResizeWidth:YES,shouldResizeHeight:NO,measuredSize:{width:0,height:0},maxWidth:null,maxHeight:null,shouldAutoFitText:NO,autoFitDiscreteFontSizes:NO,minFontSize:12,maxFontSize:20,calculatedFontSize:20,fontPropertyDidChange:function(){if(this.get("shouldAutoFitText")){this.invokeLast(this.fitTextToFrame)}}.observes("shouldAutoFitText","minFontSize","maxFontSize","measuredSize"),measuredSizeDidChange:function(){var c=this.get("measuredSize"),b=c.width,j=c.height,h,a,e=this.get("autoResizePadding")||0,g=this.get("maxWidth"),f=this.get("maxHeight");if(SC.typeOf(e)===SC.T_NUMBER){h=a=e}else{h=e.height;a=e.width}j+=h;b+=a;if(this.get("shouldAutoResize")){if(this.get("shouldResizeWidth")){if(g&&b>g){b=g}this.set("calculatedWidth",b);this.adjust("width",b)}if(this.get("shouldResizeHeight")){if(f&&j>f){j=f}this.set("calculatedHeight",j);this.adjust("height",j)}}}.observes("shouldAutoResize","measuredSize","autoResizePadding","maxWidth","minWidth","shouldResizeWidth","shouldResizeHeight"),initMixin:function(){},batchResizeId:null,scheduleMeasurement:function(){var a=this.get("batchResizeId");if(!this.get("shouldMeasureSize")||!this.get("isVisibleInWindow")||(this.get("autoResizeText")===this._lastMeasuredText&&a===this._lastMeasuredId)){return}SC.AutoResizeManager.scheduleMeasurementForView(this,a)}.observes("isVisibleInWindow","shouldMeasureSize","autoResizeText","batchResizeId"),_lastMeasuredText:null,_cachedMetrics:function(c,e){if(!this.get("shouldCacheSizes")){return}var b=SC.cacheSlotFor(this.get("batchResizeId")||this),a=this.get("autoResizeText");if(e){b[a]=e}else{e=b[a]}return e}.property("shouldCacheSizes","autoResizeText","batchResizeId").cacheable(),measureSize:function(e){var j,f=this.get("autoResizeLayer"),c=this.get("autoResizeText"),b=!this.get("escapeHTML"),h=this.get("batchResizeId"),a=this.get("_cachedMetrics"),g=this.get("maxFontSize");if(!f){return}if(a){j=a}else{if(SC.none(c)||c===""){j={width:0,height:0}}else{if(e){j=SC.measureString(c,b)}else{this.prepareLayerForStringMeasurement(f);j=SC.metricsForString(c,f,this.get("classNames"),b)}}}this.set("measuredSize",j);if(this.get("shouldCacheSizes")){this.setIfChanged("_cachedMetrics",j)}this._lastMeasuredText=c;this._lastMeasuredId=h;return j},prepareLayerForStringMeasurement:function(a){var b=this.get("maxFontSize");if(this.get("shouldAutoFitText")&&this.get("calculatedFontSize")!==b){a.style.fontSize=b+"px"}},viewDidResize:function(a){a();this.fontPropertyDidChange()}.enhance(),fitTextToFrame:function(){var t=this.get("autoResizeLayer");if(!t){return}var c=this.get("maxFontSize"),e=this.get("minFontSize");this.prepareLayerForStringMeasurement(t);var f=this.get("frame"),g=this.get("autoResizePadding")||0,l=f.width-1,h=f.height-1,s=this.get("measuredSize"),a=s.width,u=s.height;if(SC.typeOf(g)===SC.T_NUMBER){l-=g;h-=g}else{l-=g.width;h-=g.height}if(a<=l&&u<=h){return}if(this.get("autoFitDiscreteFontSizes")){j=e}else{var b=l/a,k=h/u,n=Math.floor(c*Math.min(b,k)),j,q=this.get("classNames"),p=!this.get("escapeHTML"),m=this.get("autoResizeText"),o;n=j=Math.min(c,Math.max(e,n));t.style.fontSize=n+"px";o=SC.metricsForString(m,t,q,p);if(o.width>l||o.height>h){for(n=n-1;n>=e;n--){t.style.fontSize=n+"px";o=SC.metricsForString(m,t,q,p);j=n;if(o.width<=l&&o.height<=h){break}}}else{if(o.width<l||o.height<h){for(n=n+1;n<=c;n++){t.style.fontSize=n+"px";o=SC.metricsForString(m,t,q,p);if(o.width<=l&&o.height<=h){j=n}if(o.width>=l||o.height>=h){break}}}}}t.style.fontSize=j+"px";this.set("calculatedFontSize",j)},applyAttributesToContext:function(b,a){b(a);if(this.get("shouldAutoFitText")){a.css("font-size",this.get("calculatedFontSize")+"px")}}.enhance(),didCreateLayer:function(a){a();this.scheduleMeasurement()}.enhance()};SC.AutoResizeManager={measurementQueue:SC.CoreSet.create(),scheduleMeasurementForView:function(a){this.measurementQueue.add(a);SC.RunLoop.currentRunLoop.invokeLast(this.doBatchResize)},cancelMeasurementForView:function(a,b){this.measurementQueue.remove(a)},doBatchResize:function(){if(this!==SC.AutoResizeManager){return SC.AutoResizeManager.doBatchResize()}var b,e,g,h=this.measurementQueue,j,c,f,a;while((a=h.get("length"))>0){j=NO;b=h[a-1].get("batchResizeId");for(f=a-1;f>=0;--f){e=h[f];if(e.get("batchResizeId")!==b){continue}if(e.get("isVisibleInWindow")&&e.get("shouldMeasureSize")&&(g=e.get("autoResizeLayer"))){c=e.get("autoResizeText");if(!SC.none(c)&&c!==""&&!e.get("_cachedMetrics")&&!j){e.prepareLayerForStringMeasurement(g);SC.prepareStringMeasurement(g,e.get("classNames"));j=YES}e.measureSize(YES)}h.remove(e);if(!b){break}}if(j){SC.teardownStringMeasurement()}}}};if(SC.Button){SC.Button.initMixin=function(){throw"SC.Button is deprecated as a mixin and is now a subclass of SC.TemplateView. Subclass SC.ButtonView instead."}}SC.ContentDisplay={concatenatedProperties:"contentDisplayProperties",displayProperties:["content"],contentDisplayProperties:[],initMixin:function(){this._display_contentDidChange()},destroyMixin:function(){if(!this._display_content){return}this._display_stopObservingContent(this._display_content);this._display_content=null},_display_beginObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("addObserver","*",this,b)}else{if(a.addObserver){a.addObserver("*",this,b)}}},_display_stopObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("removeObserver","*",this,b)}else{if(a.removeObserver){a.removeObserver("*",this,b)}}},_display_contentDidChange:function(e,a,c){if((c=this.get("content"))===this._display_content){return}var b=this._display_content;if(b){this._display_stopObservingContent(b)}b=this._display_content=c;if(b){this._display_beginObservingContent(b)}this.displayDidChange()}.observes("content","contentDisplayProperties"),_display_contentPropertyDidChange:function(f,c,e,b){if(c==="*"){this.displayDidChange()}else{var a=this.get("contentDisplayProperties");if(a&&a.indexOf(c)>=0){this.displayDidChange()}}}};SC.ContentValueSupport={hasContentValueSupport:YES,initMixin:function(){this._control_contentKeysDidChange()},value:null,content:null,contentKeys:null,_default_contentKeys:{contentValueKey:"value"},contentValueKey:null,contentPropertyDidChange:function(c,b){var a=this.get("contentKeys");if(a){var e;for(e in a){if(b==="*"||b===this.getDelegateProperty(e,this,this.get("displayDelegate"),a)){return this.updatePropertyFromContent(a[e],b,e,c)}}}else{return this.updatePropertyFromContent("value",b,"contentValueKey",c)}},updatePropertyFromContent:function(g,c,f,e){var a,b;if(f===undefined){f="content"+g.capitalize()+"Key"}if(this[f]){f=this.get(f)}else{if((a=this.get("displayDelegate"))&&(b=a[f])){f=a.get?a.get(f):b}else{return this}}if(c==="*"||c===f){if(e===undefined){e=this.get("content")}if(e){b=e.get?e.get(f):e[f]}else{b=null}this.setIfChanged(g,b)}return this},updateContentWithValueObserver:function(e,a){var g=this._reverseContentKeys;if(!a||a==="*"){for(a in g){this.updateContentWithValueObserver(this,a)}}var c=this.get(a);var b=this.get("content"),f=this.getDelegateProperty(g[a],this,this.displayDelegate);if(!f||!b){return this}if(typeof b.setIfChanged===SC.T_FUNCTION){b.setIfChanged(f,c)}else{if(b[f]!==c){b[f]=c}}},_control_content:null,_old_contentValueKeys:null,_old_contentKeys:null,_control_contentDidChange:function(j,m){var k=this.get("content"),b=this.get("contentKeys"),a,c=this._control_content,n=this._old_contentValueKeys,l=SC.typeOf(n),h=this.contentPropertyDidChange;if(c&&c.removeObserver&&n){if(l===SC.T_STRING){c.removeObserver(n,this,h);n=null}else{var e,g=n.get("length");for(e=0;e<g;e++){a=n[e];c.removeObserver(a,this,h)}n.clear()}}if(k&&k.addObserver){if(b){if(!n){n=SC.CoreSet.create()}for(a in b){a=this.getDelegateProperty(a,this,this.get("displayDelegate"));if(a){k.addObserver(a,this,h);n.add(a)}}}else{a=this.getDelegateProperty("contentValueKey",this,this.get("displayDelegate"));if(a){k.addObserver(a,this,h);if(n){n.add(a)}else{n=a}}}}this._control_content=k;this._old_contentValueKeys=n;m=(!m||m==="content")?"*":this.get(m);if(m){this.contentPropertyDidChange(k,m)}}.observes("content"),_old_contentKeys:null,_control_contentKeysDidChange:function(){var e,c={},a=this.get("contentKeys")||this._default_contentKeys,j,b=this._old_contentKeys,h=this._control_contentDidChange,g=this.updateContentWithValueObserver;for(e in b){j=b[e];this.removeObserver(j,this,g);this.removeObserver(e,this,h)}for(e in a){j=a[e];c[j]=e;this.addObserver(j,this,g);this.addObserver(e,this,h)}this._reverseContentKeys=c;this._old_contentKeys=a;this._control_contentDidChange()}.observes("contentKeys")};sc_require("mixins/content_value_support");sc_require("system/string");SC.AUTO_CONTROL_SIZE="__AUTO__";SC.JUMBO_CONTROL_SIZE="sc-jumbo-size";SC.HUGE_CONTROL_SIZE="sc-huge-size";SC.LARGE_CONTROL_SIZE="sc-large-size";SC.REGULAR_CONTROL_SIZE="sc-regular-size";SC.SMALL_CONTROL_SIZE="sc-small-size";SC.TINY_CONTROL_SIZE="sc-tiny-size";SC.Control=SC.mixin(SC.clone(SC.ContentValueSupport),{isControl:YES,isSelected:NO,isSelectedBindingDefault:SC.Binding.oneWay().bool(),isActive:NO,isActiveBindingDefault:SC.Binding.oneWay().bool(),fieldKey:null,fieldLabel:null,errorLabel:function(){var a,e,c,b;if(a=this.get("fieldLabel")){return a}e=this.get("fieldKey")||this.constructor.toString();c=e?SC.String.capitalize(SC.String.humanize(e)):"";b=SC.String.locWithDefault("FieldKey."+e,c);return SC.String.locWithDefault("ErrorLabel."+e,b)}.property("fieldLabel","fieldKey").cacheable(),controlSize:SC.REGULAR_CONTROL_SIZE,displayProperties:["isEnabled","isSelected","isActive","controlSize"],_CONTROL_TMP_CLASSNAMES:{},renderMixin:function(b,h){var e=this.get("isSelected"),c=!this.get("isEnabled"),f=this._CONTROL_TMP_CLASSNAMES;f.mixed=e===SC.MIXED_STATE;f.sel=e&&(e!==SC.MIXED_STATE);f.active=this.get("isActive");var g=this.get("controlSize");if(!g){g=SC.REGULAR_CONTROL_SIZE}if(h){b.setClass(f);if(!this.get("renderDelegate")){b.addClass(g)}}else{b.$().setClass(f);if(!this.get("renderDelegate")){b.$().addClass(g)}}if(!h&&this.$input){var a=this.$input();if(a.attr("type")!=="radio"){this.$input().attr("disabled",c)}}}});SC.Editable={isEditable:NO,isEditing:NO,beginEditing:function(){if(!this.get("isEditable")){return NO}if(this.get("isEditing")){return YES}this.beginPropertyChanges();this.set("isEditing",YES);this.becomeFirstResponder();this.endPropertyChanges();return YES},discardEditing:function(){return !this.get("isEditing")},commitEditing:function(){if(!this.get("isEditing")){return YES}this.set("isEditing",NO);this.resignFirstResponder();return YES}};SC.ALIGN_JUSTIFY="justify";SC.FlowedLayout={isFlowedLayout:YES,layoutDirection:SC.LAYOUT_HORIZONTAL,autoResize:YES,shouldResizeWidth:YES,shouldResizeHeight:YES,align:SC.ALIGN_LEFT,canWrap:YES,defaultFlowSpacing:{left:0,bottom:0,top:0,right:0},flowPadding:{left:0,bottom:0,right:0,top:0},_scfl_validFlowPadding:function(){var b=this.get("flowPadding")||{},a={};a.left=b.left||0;a.top=b.top||0;a.bottom=b.bottom||0;a.right=b.right||0;return a}.property("flowPadding").cacheable(),concatenatedProperties:["childMixins"],initMixin:function(){this._scfl_tileOnce()},_scfl_childViewsDidChange:function(a){this._scfl_tileOnce()}.observes("childViews"),_scfl_layoutPropertyDidChange:function(a){this._scfl_tileOnce()}.observes("layoutDirection","align","flowPadding","canWrap","defaultFlowSpacing","isVisibleInWindow"),layoutDidChangeFor:function(h){var b=h._scfl_lastLayout,a=h.get("layout"),e=h.get("frame");if(!b){return arguments.callee.base.apply(this,arguments)}var g=YES;if(b.left&&b.left!==a.left){g=NO}else{if(b.top&&b.top!==a.top){g=NO}else{if(!h.get("fillWidth")&&b.width&&b.width!==a.width){g=NO}else{if(!b.width&&!h.get("fillWidth")&&e.width!==h._scfl_lastFrame.width){g=NO}else{if(!h.get("fillHeight")&&b.height&&b.height!==a.height){g=NO}else{if(!b.height&&!h.get("fillHeight")&&e.height!==h._scfl_lastFrame.height){g=NO}}}}}}if(g){return arguments.callee.base.apply(this,arguments)}this._scfl_tileOnce();arguments.callee.base.apply(this,arguments)},observeChildLayout:function(a){if(a._scfl_isBeingObserved){return}a._scfl_isBeingObserved=YES;a.addObserver("flowSpacing",this,"_scfl_tileOnce");a.addObserver("isVisible",this,"_scfl_tileOnce");a.addObserver("useAbsoluteLayout",this,"_scfl_tileOnce");a.addObserver("calculatedWidth",this,"_scfl_tileOnce");a.addObserver("calculatedHeight",this,"_scfl_tileOnce");a.addObserver("startsNewRow",this,"_scfl_tileOnce");a.addObserver("isSpacer",this,"_scfl_tileOnce");a.addObserver("maxSpacerLength",this,"_scfl_tileOnce");a.addObserver("fillWidth",this,"_scfl_tileOnce");a.addObserver("fillHeight",this,"_scfl_tileOnce")},unobserveChildLayout:function(a){a._scfl_isBeingObserved=NO;a.removeObserver("flowSpacing",this,"_scfl_tileOnce");a.removeObserver("isVisible",this,"_scfl_tileOnce");a.removeObserver("useAbsoluteLayout",this,"_scfl_tileOnce");a.removeObserver("calculatedWidth",this,"_scfl_tileOnce");a.removeObserver("calculatedHeight",this,"_scfl_tileOnce");a.removeObserver("startsNewRow",this,"_scfl_tileOnce");a.removeObserver("isSpacer",this,"_scfl_tileOnce");a.removeObserver("maxSpacerLength",this,"_scfl_tileOnce");a.removeObserver("fillWidth",this,"_scfl_tileOnce");a.removeObserver("fillHeight",this,"_scfl_tileOnce")},shouldIncludeChildInFlow:function(a,b){return b.get("isVisible")&&!b.get("useAbsoluteLayout")},flowSpacingForChild:function(a,b){var c=b.get("flowSpacing");if(SC.none(c)){c=this.get("defaultFlowSpacing")}if(SC.none(c)){c=0}if(SC.typeOf(c)===SC.T_NUMBER){c={left:c,right:c,bottom:c,top:c}}else{c.left=c.left||0;c.right=c.right||0;c.top=c.top||0;c.bottom=c.bottom||0}return c},flowSizeForChild:function(a,e){var c=e.get("calculatedWidth"),h=e.get("calculatedHeight"),k=this.get("layoutDirection"),g={},j=e.get("frame"),b=e.get("layout");e._scfl_lastFrame=j;if(c){g.width=c}else{g.width=b.width||j.width}if(h){g.height=h}else{g.height=b.height||j.height}if(e.get("isSpacer")){g.maxSpacerLength=e.get("maxSpacerLength");if(k===SC.LAYOUT_HORIZONTAL){g.width=b.minWidth||0}else{g.height=b.minHeight||0}}if(k===SC.LAYOUT_HORIZONTAL&&e.get("fillHeight")){g.height=b.minHeight||0}else{if(k===SC.LAYOUT_VERTICAL&&e.get("fillWidth")){g.width=b.minWidth||0}}return g},clippingFrame:function(){return{left:0,top:0,width:this.get("calculatedWidth"),height:this.get("calculatedHeight")}}.property("calculatedWidth","calculatedHeight"),_scfl_maxCollapsedRowLength:0,_scfl_totalCollapsedRowSize:0,_scfl_calculatedSizeDidChange:function(){if(this.get("autoResize")){if(this.get("layoutDirection")==SC.LAYOUT_VERTICAL){if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_totalCollapsedRowSize"))}}else{if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_totalCollapsedRowSize"))}}}}.observes("autoResize","shouldResizeWidth","_scfl_maximumCollapsedRowLength","_scfl_totalCollapsedRowSize","shouldResizeHeight"),_scfl_createPlan:function(){var f=this.get("layoutDirection"),a=this.get("_scfl_validFlowPadding"),e=this.get("frame");var c=(f===SC.LAYOUT_VERTICAL);var b={rows:undefined,maximumCollapsedRowLength:0,totalCollapsedRowSize:0,isVertical:f===SC.LAYOUT_VERTICAL,isHorizontal:f===SC.LAYOUT_HORIZONTAL,flowPadding:a,planStartPadding:a[c?"left":"top"],planEndPadding:a[c?"right":"bottom"],rowStartPadding:a[c?"top":"left"],rowEndPadding:a[c?"bottom":"right"],maximumRowLength:undefined,fitToPlanSize:undefined,align:this.get("align")};if(c){b.maximumRowLength=e.height-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=e.width-b.planStartPadding-b.planEndPadding}else{b.maximumRowLength=e.width-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=e.height-b.planStartPadding-b.planEndPadding}return b},_scfl_distributeChildrenIntoRows:function(e){var b=this.get("childViews"),a,h,c=b.length,f=e.isVertical,k=[],g;g=-1;h=0;while(h<c&&h!==g){g=h;var j={plan:e,rowLength:undefined,rowSize:undefined,shouldExpand:undefined,items:undefined,position:undefined};h=this._scfl_distributeChildrenIntoRow(b,h,j);k.push(j)}e.rows=k},_scfl_distributeChildrenIntoRow:function(f,o,k){var q,w=f.length,b=k.plan,h,a,e,s=[],m=0,n=b.isVertical,l,g,c,p=this.get("canWrap"),j=NO,t=0,v=k.plan.maximumRowLength;for(q=o;q<w;q++){h=f[q];j=j||(s.length>0&&h.get("startsNewRow"));if(!this.shouldIncludeChildInFlow(q,h)){continue}a=this.flowSizeForChild(q,h);e=this.flowSpacingForChild(q,h);a.width+=e.left+e.right;a.height+=e.top+e.bottom;g=a[n?"height":"width"];if(!SC.none(a.maxSpacerLength)){c=a.maxSpacerLength+(n?e.top+e.bottom:e.left+e.right)}l=a[n?"width":"height"];if((j||(p&&m+g>v))&&s.length>0){break}var x={child:h,itemLength:g,maxSpacerLength:c,itemSize:l,spacing:e,position:undefined,fillRow:n?h.get("fillWidth"):h.get("fillHeight"),isSpacer:h.get("isSpacer"),left:undefined,top:undefined,width:undefined,height:undefined};s.push(x);m+=g;t=Math.max(g,t)}k.rowLength=m;var u=p?t:k.rowLength;k.plan.maximumCollapsedRowLength=Math.max(u,k.plan.maximumCollapsedRowLength);k.items=s;return q},_scfl_positionChildrenInRows:function(e){var c=e.rows,b=c.length,a;for(a=0;a<b;a++){this._scfl_positionChildrenInRow(c[a])}},_scfl_positionChildrenInRow:function(o){var h=o.items,f=h.length,l,n,e,m=0,a=0,c,g=o.plan.align,k=YES,b=0,j=NO;for(l=0;l<f;l++){n=h[l];if(n.isSpacer){a+=n.child.get("spaceUnits")||1}}if(g===SC.ALIGN_JUSTIFY){a+=f-1}c=Math.max(0,o.plan.maximumRowLength-o.rowLength)/a;while(c>0){for(l=0;l<f;l++){n=h[l];if(n.isSpacer){n.itemLength+=c*(n.child.get("spaceUnits")||1);if(n.itemLength>n.maxSpacerLength){b+=n.itemLength-n.maxSpacerLength;n.itemLength=n.maxSpacerLength}else{j=YES}}}if(!j){break}c=Math.round(b/a);b=0}e=0;if(a===0&&(g===SC.ALIGN_RIGHT||g===SC.ALIGN_BOTTOM)){e=o.plan.maximumRowLength-o.rowLength}else{if(a===0&&(g===SC.ALIGN_CENTER||g===SC.ALIGN_MIDDLE)){e=(o.plan.maximumRowLength/2)-(o.rowLength/2)}}e+=o.plan.rowStartPadding;for(l=0;l<f;l++){n=h[l];if(!n.fillRow){k=NO}m=Math.max(n.itemSize,m);n.position=e;e+=n.itemLength;if(g===SC.ALIGN_JUSTIFY&&l<f-1){e+=c}}o.shouldExpand=f>0?k:NO;o.rowLength=e-o.plan.rowStartPadding;o.rowSize=m;o.plan.totalCollapsedRowSize+=o.rowSize},_scfl_positionRows:function(e){var k=e.rows,c=k.length,g,j,b,a=0,h=0,f;for(g=0;g<c;g++){if(k[g].shouldExpand){a++}h+=k[g].rowSize}f=e.fitToPlanSize-h;b=e.planStartPadding;for(g=0;g<c;g++){j=k[g];if(j.shouldExpand&&f>0){j.rowSize+=f/a;a--}j.position=b;b+=j.rowSize}},_scfl_applyPlan:function(j){var p=j.rows,b,c,o,f=0,l=0,h,a,e,n,g,m,k=j.isVertical;c=p.length;for(b=0;b<c;b++){o=p[b];f=Math.max(f,o.rowLength);l+=o.rowSize;h=o.items;e=h.length;for(a=0;a<e;a++){n=h[a];n.child.beginPropertyChanges();m=n.fillRow?o.rowSize:n.itemSize;g={left:n.spacing.left+(k?o.position:n.position),top:n.spacing.top+(k?n.position:o.position),width:k?m:n.itemLength,height:k?n.itemLength:m};g.width-=n.spacing.left+n.spacing.right;g.height-=n.spacing.top+n.spacing.bottom;this.applyPlanToView(n.child,g);n.child._scfl_lastLayout=g;n.child.endPropertyChanges()}}l+=j.planStartPadding+j.planEndPadding;f+=j.rowStartPadding+j.rowEndPadding;this.beginPropertyChanges();this.set("calculatedHeight",k?f:l);this.set("calculatedWidth",k?l:f);this.set("_scfl_maximumCollapsedRowLength",j.maximumCollapsedRowLength);this.set("_scfl_totalCollapsedRowSize",j.totalCollapsedRowSize);this.endPropertyChanges()},applyPlanToView:function(a,b){a.adjust(b)},_scfl_tileOnce:function(){this.invokeLast(this._scfl_tile)},_scfl_tile:function(){if(!this.get("isVisibleInWindow")){return}var g=this._scfl_createPlan();this._scfl_distributeChildrenIntoRows(g);this._scfl_positionChildrenInRows(g);this._scfl_positionRows(g);this._scfl_applyPlan(g);this.setIfChanged("numberOfRows",g.rows.length);var e=this._scfl_isObserving||SC.CoreSet.create(),c=SC.CoreSet.create();var f=this.get("childViews"),b=f.length,a,h;for(a=0;a<b;a++){h=f[a];if(!e.contains(h)){this.observeChildLayout(h)}else{e.remove(h)}c.add(h)}b=e.length;for(a=0;a<b;a++){this.unobserveChildLayout(e[a])}},_scfl_frameDidChange:function(){var b=this.get("frame"),a=this._scfl_lastFrameSize||{};this._scfl_lastFrameSize=SC.clone(b);if(a.width==b.width&&a.height==b.height){return}this._scfl_tileOnce()}.observes("frame"),destroyMixin:function(){var c=this._scfl_isObserving;if(!c){return}var b=c.length,a;for(a=0;a<b;a++){this.unobserveChildLayout(c[a])}},reorder:function(b){if(!SC.typeOf(b)===SC.T_ARRAY){b=arguments}var c=b.length,e=this.childViews,a;this.beginPropertyChanges();while(c-->0){a=b[c];if(SC.typeOf(a)===SC.T_STRING){a=this.get(a)}e.removeObject(a);e.unshiftObject(a)}this.endPropertyChanges();this._scfl_childViewsDidChange();return this}};SC.Gesturable={concatenatedProperties:["gestures"],gestures:[],initMixin:function(){this.createGestures()},createGestures:function(){var f=this.get("gestures"),b,a=f.length,c,e=[];for(b=0;b<a;b++){if(SC.typeOf(f[b])===SC.T_STRING){c=this.get(f[b])}else{c=f[b]}if(!c){throw"Could not find gesture named '"+f[b]+"' on view."}if(c.isClass){c=c.create({view:this})}if(SC.typeOf(f[b])===SC.T_STRING){this[f[b]]=c}e.push(c)}this.set("gestures",e)},touchStart:function(a){this.gestureTouchStart(a)},touchesDragged:function(a,b){this.gestureTouchesDragged(a,b)},touchEnd:function(a){this.gestureTouchEnd(a)},gestureTouchStart:function(f){f.isInteresting=0;var e=this.get("gestures"),b,a=e.length,c;for(b=0;b<a;b++){c=e[b];c.unassignedTouchDidStart(f)}},gestureTouchesDragged:function(c,f){var h=this.get("gestures"),b,a=h.length,e;for(b=0;b<a;b++){e=h[b];e.unassignedTouchesDidChange(c,f)}},gestureTouchEnd:function(f){var e=this.get("gestures"),b,a=e.length,c;for(b=0;b<a;b++){c=e[b];c.unassignedTouchDidEnd(f)}}};SC.InlineEditable={isInlineEditable:YES,isEditable:YES,exampleEditor:SC.InlineTextFieldView,isEditing:NO,inlineEditorDelegate:SC.InlineTextFieldDelegate,_editor:null,beginEditing:function(){var a;a=this.delegateFor("inlineEditorShouldBeginEditing",this.inlineEditorDelegate);if(a&&!a.inlineEditorShouldBeginEditing(this,this.get("value"))){return NO}this._editor=this.invokeDelegateMethod(this.inlineEditorDelegate,"acquireEditor",this);if(this._editor){return this._editor.beginEditing(this)}else{return NO}},commitEditing:function(){return this._editor?this._editor.commitEditing():NO},discardEditing:function(){return this._editor?this._editor.discardEditing():NO},inlineEditorShouldBeginEditing:function(){return !this.get("isEditing")&&this.get("isEditable")},inlineEditorWillBeginEditing:function(b,c,a){b.set("value",this.get("value"))},inlineEditorDidBeginEditing:function(b,c,a){this.set("isEditing",YES)},inlineEditorWillCommmitEditing:function(b,c,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,c)}},inlineEditorDidCommitEditing:function(b,c,a){a.setIfChanged("value",c);if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,c)}this._endEditing()},inlineEditorWillDiscardEditing:function(b,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,this.get("value"))}},inlineEditorDidDiscardEditing:function(b,a){if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,this.get("value"))}this._endEditing()},_endEditing:function(){if(this._editor){this.invokeDelegateMethod(this.inlineEditorDelegate,"releaseEditor",this._editor);this._editor=null}this.set("isEditing",NO)}};SC.InlineEditor={isInlineEditor:YES,isEditing:NO,inlineEditorDelegate:null,_target:null,beginEditing:function(b){if(this.get("isEditing")||!b||!b.isInlineEditable){return NO}var a,c;c=this._target=b;a=this.delegateFor("inlineEditorWillBeginEditing",this.inlineEditorDelegate,c);if(a){a.inlineEditorWillBeginEditing(this,this.get("value"),c)}this.set("isEditing",YES);this.invokeLast(this._callDidBegin);this._didBeginInvoked=YES;return YES},_callDidBegin:function(){if(!this.get("isEditing")){return NO}this._didBeginInvoked=NO;var b=this._target,a;a=this.delegateFor("inlineEditorDidBeginEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidBeginEditing(this,this.get("value"),b)}},commitEditing:function(){if(!this.get("isEditing")){return NO}if(this._didBeginInvoked){this._callDidBegin()}var a,b=this._target;a=this.delegateFor("inlineEditorShouldCommitEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldCommitEditing(this,this.get("value"),b)){return NO}a=this.delegateFor("inlineEditorWillCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillCommitEditing(this,this.get("value"),b)}this._endEditing();a=this.delegateFor("inlineEditorDidCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidCommitEditing(this,this.get("value"),b)}return YES},discardEditing:function(){if(!this.get("isEditing")){return NO}if(this._didBeginInvoked){this._callDidBegin()}var a,b=this._target;a=this.delegateFor("inlineEditorShouldDiscardEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldDiscardEditing(this,b)){return NO}a=this.delegateFor("inlineEditorWillDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillDiscardEditing(this,b)}this._endEditing();a=this.delegateFor("inlineEditorDidDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidDiscardEditing(this,b)}return YES},_endEditing:function(){this.set("isEditing",NO);this._target=null}};SC.InlineEditorDelegate={acquireEditor:function(a){},releaseEditor:function(a){},inlineEditorShouldBeginEditing:function(a,b){},inlineEditorWillBeginEditing:function(b,c,a){},inlineEditorDidBeginEditing:function(b,c,a){},inlineEditorShouldCommitEditing:function(b,c,a){},inlineEditorWillCommitEditing:function(b,c,a){},inlineEditorDidCommitEditing:function(b,c,a){},inlineEditorShouldDiscardEditing:function(b,a){},inlineEditorWillDiscardEditing:function(b,a){},inlineEditorDidDiscardEditing:function(b,a){},inlineEditorWillEndEditing:function(b,c,a){},inlineEditorDidEndEditing:function(b,c,a){}};SC.SCALE_NONE="none";SC.FILL="fill";SC.FILL_PROPORTIONALLY="fillProportionally";SC.BEST_FIT="fitBest";SC.BEST_FIT_DOWN_ONLY="fitBestDown";SC.InnerFrame={align:SC.ALIGN_CENTER,innerFrameForSize:function(a,c,j,b){var f=this.get("align"),e=this.get("scale"),h,g,k;k={x:0,y:0,width:j,height:b};if(e===SC.FILL){return k}h=j/a;g=b/c;switch(e){case SC.FILL_PROPORTIONALLY:e=h>g?h:g;break;case SC.BEST_FIT:e=h<g?h:g;break;case SC.BEST_FIT_DOWN_ONLY:if((a>j)||(c>b)){e=h<g?h:g}else{e=1}break;case SC.SCALE_NONE:e=1;break;default:if(isNaN(window.parseFloat(e))||(window.parseFloat(e)<=0)){SC.Logger.warn("SC.InnerFrame: The scale '%@' was not understood.  Scale must be one of SC.FILL, SC.FILL_PROPORTIONALLY, SC.BEST_FIT, SC.BEST_FIT_DOWN_ONLY or a positive number greater than 0.00.".fmt(e));return k}}a*=e;c*=e;k.width=Math.round(a);k.height=Math.round(c);switch(f){case SC.ALIGN_LEFT:k.x=0;k.y=(b/2)-(c/2);break;case SC.ALIGN_RIGHT:k.x=j-a;k.y=(b/2)-(c/2);break;case SC.ALIGN_TOP:k.x=(j/2)-(a/2);k.y=0;break;case SC.ALIGN_BOTTOM:k.x=(j/2)-(a/2);k.y=b-c;break;case SC.ALIGN_TOP_LEFT:k.x=0;k.y=0;break;case SC.ALIGN_TOP_RIGHT:k.x=j-a;k.y=0;break;case SC.ALIGN_BOTTOM_LEFT:k.x=0;k.y=b-c;break;case SC.ALIGN_BOTTOM_RIGHT:k.x=j-a;k.y=b-c;break;default:if(f!==SC.ALIGN_CENTER&&f!==SC.ALIGN_MIDDLE){SC.Logger.warn("SC.InnerFrame: The align '%@' was not understood.  Align must be one of SC.ALIGN_CENTER/SC.ALIGN_MIDDLE, SC.ALIGN_LEFT, SC.ALIGN_RIGHT, SC.ALIGN_TOP, SC.ALIGN_BOTTOM, SC.ALIGN_TOP_LEFT, SC.ALIGN_TOP_RIGHT, SC.ALIGN_BOTTOM_LEFT or SC.ALIGN_BOTTOM_RIGHT.".fmt(f))}k.x=(j/2)-(a/2);k.y=(b/2)-(c/2)}return k},scale:SC.FILL};SC.StaticLayout={hasStaticLayout:YES};SC.Validatable={initMixin:function(){this._validatable_validatorDidChange()},validator:null,errorLabel:null,isValid:function(){return SC.typeOf(this.get("value"))!==SC.T_ERROR}.property("value"),ownerForm:null,performValidate:function(c){var a=SC.VALIDATE_OK;if(this._validator){var b=this.get("ownerForm");if(c){a=this._validator.validatePartial(b,this);if((a==SC.VALIDATE_NO_CHANGE)&&(this._validator.validateChange(b,this)==SC.VALIDATE_OK)){a=SC.VALIDATE_OK}}else{a=this._validator.validateChange(b,this)}}return a},performValidateSubmit:function(){return this._validator?this._validator.validateSubmit(this.get("ownerForm"),this):SC.VALIDATE_OK},performValidateKeyDown:function(a){var b=a.getCharString();if(!b){return YES}return this._validator?this._validator.validateKeyDown(this.get("ownerForm"),this,b):YES},validatorObject:function(){return this._validator}.property(),validateSubmit:function(){return this.performValidateSubmit()},objectForFieldValue:function(b,a){return this._validator?this._validator.objectForFieldValue(b,this.get("ownerForm"),this):b},fieldValueForObject:function(a){return this._validator?this._validator.fieldValueForObject(a,this.get("ownerForm"),this):a},_validatable_displayObserver:function(){this.displayDidChange()}.observes("isValid"),renderMixin:function(a){a.setClass("invalid",!this.get("isValid"))},_validatable_validatorDidChange:function(){var a=this.get("ownerForm");var b=SC.Validator.findFor(a,this,this.get("validator"));if(b!=this._validator){this.propertyWillChange("validatorObject");if(this._validator){this._validator.detachFrom(a,this)}this._validator=b;if(this._validator){this._validator.attachTo(a,this)}this.propertyDidChange("validatorObject")}}.observes("validator","ownerForm")};SC.RenderDelegate={create:function(){var c=SC.beget(this);var b,a=arguments.length;for(b=0;b<a;b++){c.mixin(arguments[b])}return c},reopen:function(b){var c,a;for(c in b){a=b[c];if(!b.hasOwnProperty(c)){continue}if(typeof a==="function"&&a!==this[c]){a.base=this[c]||SC.K}if(a&&a.isEnhancement&&a!==this[c]){a=SC._enhance(this[c]||SC.K,a)}this[c]=a}},get:function(a){return this[a]},getPropertyFor:function(b,a){if(this[a+"For"]){return this[a+"For"](b,a)}return this[a]},className:undefined,render:function(b,a){},update:function(b,a){}};SC.RenderDelegate.extend=SC.RenderDelegate.create;SC.RenderDelegate.mixin=SC.RenderDelegate.reopen;sc_require("render_delegates/render_delegate");SC.BaseTheme.canvasImageRenderDelegate=SC.RenderDelegate.create({className:"canvasImage",render:function(e,b){var c=e.get("width")||0,a=e.get("height")||0;b.attr("width",c);b.attr("height",a)},update:function(a,f){var h=f[0],k=a.get("image"),e=a.get("frame"),n=e.width,l=e.height,m=a.get("innerFrame"),o=a.get("backgroundColor"),q=a.get("renderState"),b;var p=![m.x,m.y,m.width,m.height].isEqual(q._lastInnerFrameValues),j=![h.width,h.height].isEqual(q._lastElemSizeValues),g=a.didChangeFor("canvasImageRenderDelegate","backgroundColor"),c=a.didChangeFor("canvasImageRenderDelegate","image")||(k&&k.complete)!==q._lastImageComplete;if(j||p||g||c){if(h&&h.getContext){h.height=l;h.width=n;b=h.getContext("2d");b.clearRect(0,0,n,l);if(o){b.fillStyle=o;b.fillRect(0,0,n,l)}if(k&&k.complete){b.drawImage(k,Math.floor(m.x),Math.floor(m.y),Math.floor(m.width),Math.floor(m.height))}}q._lastInnerFrameValues=[m.x,m.y,m.width,m.height];q._lastElemSizeValues=[h.width,h.height];q._lastImageComplete=k&&k.complete}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.containerRenderDelegate=SC.RenderDelegate.create({render:function(b,a){},update:function(){}});sc_require("render_delegates/render_delegate");SC.RenderDelegate.reopen({sizes:[SC.TINY_CONTROL_SIZE,SC.SMALL_CONTROL_SIZE,SC.REGULAR_CONTROL_SIZE,SC.LARGE_CONTROL_SIZE,SC.HUGE_CONTROL_SIZE,SC.JUMBO_CONTROL_SIZE],sizeFor:function(g){var f=g.get("controlSize"),c,b,a;if(f){if(!this[f]){this[f]={}}c=this[f];if(!c.name){c.name=f}return c}var e=g.get("frame");if(!e){c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c}for(b=0;b<a;b++){key=sizes[b];c=this[key];if(!c){continue}if((c.width===undefined&&c.height===undefined&&c.minHeight===undefined&&c.minWidth===undefined&&c.maxHeight===undefined&&c.maxWidth===undefined)||(c.width!==undefined&&e.width!==c.width)||(c.minWidth!==undefined&&e.width<c.minWidth)||(c.maxWidth!==undefined&&e.width>c.maxWidth)||(c.height!==undefined&&e.height!==c.height)||(c.minHeight!==undefined&&e.height<c.minHeight)||(c.maxHeight!==undefined&&e.height<c.maxHeight)){continue}if(!c.name){c.name=key}return c}c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c},addSizeClassName:function(c,b){var a=this.sizeFor(c);if(a){b.addClass(a.name)}},updateSizeClassName:function(c,a){var b=this.sizeFor(c);if(b){a.addClass(b.name)}},getPropertyFor:function(c,a){var b=this.sizeFor(c);if(b){if(b[a+"For"]){return b[a+"For"](c,a)}else{if(b[a]!==undefined){return b[a]}}}if(this[a+"For"]){return this[a+"For"]}return this[a]}});sc_require("render_delegates/render_delegate");SC.BaseTheme.imageRenderDelegate=SC.RenderDelegate.create({className:"image",render:function(g,c){var f=g.get("image"),b=g.get("imageValue"),e=g.get("type")||SC.IMAGE_TYPE_URL,a=g.get("toolTip");c=c.begin("img");c.attr("src",f.src);if(b&&e===SC.IMAGE_TYPE_CSS_CLASS){c.addClass(b);this._last_class=b}if(a){c.attr("title",a);c.attr("alt",a)}c.addStyle(this.imageStyles(g));c=c.end()},update:function(f,a){var e=f.get("image"),c=f.get("imageValue"),b=f.get("toolTip");a=a.find("img");a.attr("src",e.src);if(c!==this._last_class){a.setClass(this._last_class,NO)}if(c){a.addClass(c);this._last_class=c}if(b){a.attr("title",b);a.attr("alt",b)}a.css(this.imageStyles(f))},imageStyles:function(b){var a=b.get("innerFrame");return{position:"absolute",left:Math.round(a.x),top:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height)}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.labelRenderDelegate=SC.RenderDelegate.create({className:"label",render:function(e,c){this.addSizeClassName(e,c);var a=e.get("toolTip");if(a){c.attr("title",a)}c.addStyle({fontWeight:e.get("fontWeight")||null,textAlign:e.get("textAlign")||null});c.setClass("ellipsis",e.get("needsEllipsis")||NO);c.setClass("icon",e.get("icon")||NO);var b=this.htmlForTitleAndIcon(e);c.push(b);e.get("renderState")._lastHTMLForTitleAndIcon=b},update:function(e,a){this.updateSizeClassName(e,a);a.css({fontWeight:e.get("fontWeight")||null,textAlign:e.get("textAlign")||null});var b=e.get("toolTip");if(b){a.attr("title",b)}else{a.removeAttr("title")}a.setClass("ellipsis",e.get("needsEllipsis")||NO);var c=this.htmlForTitleAndIcon(e);if(e.get("renderState")._lastHTMLForTitleAndIcon!==c){a.html(c);e.get("renderState")._lastHTMLForTitleAndIcon=c}},htmlForTitleAndIcon:function(f){var e=f.get("title"),c=f.get("hint"),b=f.get("escapeHTML"),a=f.get("icon")||"";if(e&&b){e=SC.RenderContext.escapeHTML(e)}if(b){c=SC.RenderContext.escapeHTML(c)}if(c&&!e){e="<span class='sc-hint'>"+c+"</span>"}if(a){if(a.indexOf("/")>=0){a='<img src="'+a+'" alt="" class="icon" />'}else{a='<img src="'+SC.BLANK_IMAGE_URL+'" alt="" class="icon '+a+'" />'}}return a+(SC.none(e)?"":e)}});sc_require("core");SC.Benchmark={verbose:NO,enabled:YES,events:{},stats:{},globalStartTime:null,addEvent:function(a,b){if(!b){b=new Date().getTime()}this.events[a]=b},start:function(b,a,f,e){if(!this.enabled){return}var g=(f||Date.now()),c;if(a){c=this._subStatFor(b,a)}else{c=this._statFor(b)}if(e&&c._starts.length>0){c._starts.push("ignore")}else{c._starts.push(g)}c._times.push({start:g,_subStats:{}});return b},end:function(c,b,g){var f;if(!this.enabled){return}if(b){f=this._subStatFor(c,b)}else{f=this._statFor(c)}var h=f._starts.pop();if(!h){SC.Logger.log('SC.Benchmark "%@" ended without a matching start.  No information was saved.'.fmt(c));return}if(h=="ignore"){return}var a=(g||Date.now());var e=a-h;f._times[f._times.length-1].end=a;f._times[f._times.length-1].dur=e;f.amt+=e;f.runs++;if(this.verbose){this.log(c)}},setGlobalStartTime:function(a){this.globalStartTime=a},bench:function(f,e,a){if(!e){e="bench%@".fmt(this._benchCount++)}if(!a){a=1}var b;while(--a>=0){var c=SC.Benchmark.start(e);b=f();SC.Benchmark.end(c)}return b},install:function(a,e,b){a["b__"+e]=a[e];var c=a["b__"+e];a[e]=function(){var g="%@(%@)".fmt(e,$A(arguments).join(", "));SC.Benchmark.start(g,b);var f=c.apply(this,arguments);SC.Benchmark.end(g);return f}},restore:function(a,b){a[b]=a["b__"+b]},report:function(c){if(c){return this._genReport(c)}var b=[];for(var a in this.stats){if(!this.stats.hasOwnProperty(a)){continue}b.push(this._genReport(a))}return b.join("\n")},timelineReport:function(a){a=(a)?"SproutCore Application":a;var b=[a,"User-Agent: %@".fmt(navigator.userAgent),"Report Generated: %@ (%@)".fmt(new Date().toString(),Date.now()),""];var e=this._compileChartData(true);for(var c=0;c<e.length;c++){if(e[c][4]){b.push(this._timelineGenSubReport(e[c]))}else{b.push(this._timelineGenReport(e[c]))}}return b.join("\n")},getTimelineChartContent:function(){var m=this._compileChartData(false);var h=m.length;if(h===0){return}var c=this.globalStartTime?this.globalStartTime:m[0][1];var e=m[h-1][2]-c;var o=25+h*30;var s=Math.ceil(e/200)+1;var u=s*50;var n=10,v=300;var p="<div class = 'sc-benchmark-timeline-chart' style = 'position:relative;'>";p+="<div class = 'sc-benchmark-top'></div>";for(var q=0;q<s;q++){p+="<div class = 'sc-benchmark-tick' style = '";p+="left: "+(n+q*50)+"px; ";p+="height: "+o+"px;";p+="'></div>";p+="<div class = 'sc-benchmark-tick-label' style = '";p+="left: "+(n+q*50)+"px; ";p+="'>"+(q*200)+"ms</div>"}for(q=0;q<h;q++){p+="<div class = 'sc-benchmark-row ";p+=(q%2===0)?"even":"odd";p+="' style = '";p+="top: "+(50+(q*30))+"px; ";p+="'></div>";var k=document.createElement("div");var g=m[q][1];var f=m[q][2];var a=m[q][3];p+="<div class = 'sc-benchmark-bar' style = '";p+="left:"+(n+((g-c)/4))+"px; width: "+((a/4))+"px;";p+="top: "+(28+(q*30))+"px;";p+="' title = 'start: "+(g-c)+" ms, end: "+(f-c)+" ms, duration: "+a+" ms'";p+=">";p+="&nbsp;"+m[q][0]+" <span class='sc-benchmark-emphasis'>";p+=a+"ms (start: "+(g-c)+"ms)";p+="</span>";p+="</div>"}var b=this.events,l=0;for(q in b){var j=b[q]-c;p+="<div class = 'sc-benchmark-event idx"+(l%10)+"' style = '";p+="left: "+(n+j/4)+"px; height: "+o+"px; top: 20px;";p+="' title = '"+q+": "+j+"'></div>";l++}p+="</div>";return{html:p,totalCapturedTime:e,pointsCaptured:h,width:u+n+v,height:o}},getTimelineChartView:function(){var a=SC.ScrollView.create({contentView:SC.StaticContentView.extend({}),reload:function(){var b=SC.Benchmark.getTimelineChartContent();this.contentView.set("content",b.html);this.contentView.adjust({width:b.width,height:b.height});this.chartContent=b;SC.RunLoop.invokeLater(SC.Benchmark,function(){this.contentView.notifyPropertyChange("frame")})}});a.reload();return a},timelineChart:function(a){SC.RunLoop.begin();var c=0;this.hideChart();var b=this.getTimelineChartView();var f=b.chartContent.pointsCaptured,e=b.chartContent.totalCapturedTime;this._benchmarkChart=SC.Pane.create({classNames:["sc-benchmark-pane"],layout:{left:20,right:20,bottom:20,top:20},childViews:["title","exit"],exit:SC.ButtonView.extend({layout:{right:20,top:20,width:100,height:30},title:"Hide Chart",target:this,action:"hideChart"}),title:SC.LabelView.extend({classNames:["sc-benchmark-title"],layout:{left:20,top:23,right:200,height:30},value:((a)?a:"SproutCore Application")+(" - Total Captured Time: "+e+" ms - Points Captured: "+f),fontWeight:"bold"})}).append();b.set("layout",{left:20,top:60,bottom:20,right:20});this._benchmarkChart.appendChild(b);SC.RunLoop.end()},hideChart:function(){if(this._benchmarkChart){this._benchmarkChart.remove();this._benchmarkChart=null}return YES},tryToPerform:function(b,a){if(this[b]){return this[b](a)}return NO},log:function(e){var c=this.report(e).split("\n"),b=c.length,a;for(a=0;a<b;a++){SC.Logger.log(c[a])}},startProfile:function(a){if(!this.enabled){return}SC.Logger.profile(a)},endProfile:function(a){if(!this.enabled){return}SC.Logger.profileEnd(a)},loadPreloadEvents:function(){var g=SC.benchmarkPreloadEvents,f=[],b,a,c;if(typeof webkitPerformnce!=="undefined"){SC.mixin(g,webkitPerformane.timing)}if(!this.globalStartTime){var e=["navigation","navigationStart","headStart"];a=e.length;for(b=0;b<a;b++){if(g[e[b]]){this.globalStartTime=g[e[b]];break}}}this.javascriptStartTime=g.headStart;SC.mixin(this.events,g);this._hasLoadedPreloadEvents=true},_loadBenchmarksFromEvents:function(){if(!this._hasLoadedPreloadEvents){this.loadPreloadEvents()}var b=this.events;for(var a in b){if(a.substr(-3)!=="End"){continue}var c=a.substr(0,a.length-3);if(!b[c+"Start"]){continue}SC.Benchmark.start(c,undefined,b[c+"Start"]);SC.Benchmark.end(c,undefined,b[c+"End"]);delete b[c+"Start"];delete b[c+"End"]}},_compileChartData:function(h){this._loadBenchmarksFromEvents();var m=[],a;for(var n in this.stats){var f=this.stats[n];for(var g=0;g<f._times.length;g++){var o=f._times[g];a=(f._times.length>1)?(g+1)+" - "+n:n;m.push([a,o.start,o.end,o.dur,false]);if(h){var b=o._subStats;for(var c in b){var l=b[c];for(var e=0;e<l._times.length;e++){var p=l._times[e];a=(l._times.length>1)?(e+1)+" - "+c:c;m.push([a,p.start,p.end,p.dur,true])}}}}}m.sort(function(k,j){if(k[1]<j[1]){return -1}else{if(k[1]==j[1]){if(k[3]&&!j[3]){return -1}if(!k[3]&&j[3]){return 1}return 0}}return 1});return m},_genReport:function(a){var b=this._statFor(a);var e=(b.runs>0)?(Math.floor(b.amt*1000/b.runs)/1000):0;var c=b._times[b._times.length-1];return"BENCH %@ msec: %@ (%@x); latest: %@".fmt(e,(b.name||a),b.runs,c.end-c.start)},_timelineGenReport:function(a){if(this.globalStartTime){return"BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_timelineGenSubReport:function(a){if(this.globalStartTime){return"   CHECKPOINT BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"   CHECKPOINT BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_subStatFor:function(e,c){var f=this.stats[c]._times.length;if(f===0){return}var a=this.stats[c]._times[this.stats[c]._times.length-1]._subStats;var b=a[e];if(!b){a[e]={runs:0,amt:0,name:e,_starts:[],_times:[]};b=a[e]}return b},_statFor:function(b){var a=this.stats[b];if(!a){a=this.stats[b]={runs:0,amt:0,name:b,_starts:[],_times:[]};a=this.stats[b]}return a},reset:function(){this.stats={}},_bench:function(b,a){SC.Benchmark.bench(b,a,1)},_benchCount:1};SC.Benchmark=SC.Benchmark;SC.Cookie=SC.Object.extend({name:null,value:"",expires:null,path:null,domain:null,secure:NO,isCookie:YES,destroy:function(){this.set("expires",-1);this.write();arguments.callee.base.apply(this,arguments)},write:function(){var e=this.get("name"),g=this.get("value"),a=this.get("expires"),j=this.get("path"),f=this.get("domain"),h=this.get("secure"),b="",c;if(a){if(typeof a===SC.T_NUMBER){c=new Date();c.setTime(c.getTime()+(a*24*60*60*1000))}else{if(SC.DateTime&&a.get&&a.get("milliseconds")){c=new Date(a.get("milliseconds"))}else{if(a.toUTCString&&a.toUTCString.apply){c=a}}}if(c){b="; expires="+c.toUTCString()}}if(!SC.none(j)){b+="; path="+j}if(!SC.none(f)){b+="; domain="+f}if(h===YES){b+="; secure"}document.cookie=e+"="+encodeURIComponent(g)+b;return this}});SC.Cookie.mixin({find:function(a){if(document.cookie&&document.cookie!==""){var e=document.cookie.split(";");for(var c=0;c<e.length;c++){var b=SC.String.trim(String(e[c]));if(b.substring(0,a.length+1)===(a+"=")){return SC.Cookie.create({name:a,value:decodeURIComponent(b.substring(a.length+1))})}}}return null}});SC.CookieMonster={nomNomNom:function(b){var a=SC.kindOf(b,SC.Cookie);if(a){SC.Logger.log("YUM!");return b.destroy()}SC.Logger.error("Y U PASS ME NO COOKIE? %@",b);return NO}};SC.mixin(SC.$.fn,{setClass:function(e,c){if(SC.none(e)){return this}var f=SC.typeOf(e)!==SC.T_STRING,a=this._fixupClass,b;this.each(function(){if(this.nodeType!==1){return}var j=this.className.split(/\s+/),h=NO;if(f){for(var g in e){if(e.hasOwnProperty(g)){h=a(j,g,e[g])||h}}}else{h=a(j,e,c)}if(h){this.className=j.join(" ")}});return this},_fixupClass:function(e,a,c){var b=e.indexOf(a);if(c){if(b<0){e.push(a);return YES}}else{if(b>=0){e[b]=null;return YES}}return NO}});SC.ExceptionHandler={enabled:(SC.buildMode!=="debug"),handleException:function(a){if(this.isShowingErrorDialog){return NO}this._displayErrorDialog(a);return NO},_displayErrorDialog:function(b){var a=this._errorDialogHTMLForException(b),c=document.createElement("div");c.style.cssText="left: 0px; right: 0px; top: 0px; bottom: 0px; position: absolute; background-color: white; background-color: rgba(255,255,255,0.6); z-index:100;";c.innerHTML=a;document.body.appendChild(c);this.isShowingErrorDialog=YES},_errorDialogHTMLForException:function(b){var a;a=['<div id="sc-error-dialog" style="position: absolute; width: 500px; left: 50%; top: 50%; margin-left: -250px; background-color: white; border: 1px solid black; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; padding: 10px">',"An error has occurred which prevents the application from running:","<br><br>",b.message,'<div id="sc-error-dialog-reload-button" onclick="window.location.reload();" style="float: right; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; border: 1px solid black; padding: 3px; clear: both; margin-top: 20px; cursor: pointer;">',"Reload","</div>","</div>"];return a.join("")},isShowingErrorDialog:NO};SC.IMAGE_ABORTED_ERROR=SC.$error("SC.Image.AbortedError","Image",-100);SC.IMAGE_FAILED_ERROR=SC.$error("SC.Image.FailedError","Image",-101);SC.imageQueue=SC.Object.create({loadLimit:4,activeRequests:0,loadImage:function(a,f,g,e){var b=SC.typeOf(f);if(SC.none(g)&&SC.typeOf(f)===SC.T_FUNCTION){f=null;g=f}if(SC.typeOf(g)===SC.T_STRING){g=f[g]}if(SC.none(e)){e=SC.none(f)&&SC.none(g)}var c=this._imageEntryFor(a);if(c.status===this.IMAGE_LOADED){if(g){g.call(f||c.image,c.url,c.image)}}else{if(f||g){this._addCallback(c,f,g)}c.retainCount++;this._scheduleImageEntry(c,e)}},releaseImage:function(a,e,f){var c=this._imageEntryFor(a,NO);if(!c){return this}if(--c.retainCount<=0){this._deleteEntry(c)}else{if(e||f){var b=SC.typeOf(e);if(SC.none(f)&&SC.typeOf(e)===SC.T_FUNCTION){e=null;f=e}if(SC.typeOf(f)===SC.T_STRING){f=e[f]}this._removeCallback(c,e,f)}}},reloadImage:function(a){var b=this._imageEntryFor(a,NO);if(b&&b.status===this.IMAGE_LOADED){b.status=this.IMAGE_WAITING}},loadNextImage:function(){var c=null,a;if(this.get("activeRequests")>=this.get("loadLimit")){return}a=this._foregroundQueue;while(a.length>0&&!c){c=a.shift()}if(!c){a=this._backgroundQueue;while(a.length>0&&!c){c=a.shift()}}this.set("isLoading",!!c);if(c){var b=c.image;if(!b){return}$(b).bind("abort",this._imageDidAbort);$(b).bind("error",this._imageDidError);$(b).bind("load",this._imageDidLoad);b.src=c.url;this._loading.push(c);this.incrementProperty("activeRequests");this.loadNextImage()}},_imageEntryFor:function(c,a){if(a===undefined){a=YES}var e=this._images[c];if(!e&&a){var b=new Image();e=this._images[c]={url:c,status:this.IMAGE_WAITING,callbacks:[],retainCount:0,image:b};b.entry=e}else{if(e&&e.image===null){e.image=new Image();e.image.entry=e}}return e},_deleteEntry:function(a){this._unscheduleImageEntry(a);delete this._images[a.url]},_addCallback:function(c,e,f){var b=c.callbacks;var a=b.find(function(g){return g[0]===e&&g[1]===f},this);if(!a){b.push([e,f])}b=null;return this},_removeCallback:function(b,c,e){var a=b.callbacks;a.forEach(function(g,f){if(g[0]===c&&g[1]===e){a[f]=null}},this);a=null;return this},_scheduleImageEntry:function(e,c){var b=this._backgroundQueue;var f=this._foregroundQueue;if(e.status===this.IMAGE_LOADED){return this}if((e.status===this.IMAGE_QUEUED)&&!c&&e.isBackground){b[b.indexOf(e)]=null;e.status=this.IMAGE_WAITING}if(e.status!==this.IMAGE_QUEUED){var a=(c)?b:f;a.push(e);e.status=this.IMAGE_QUEUED;e.isBackground=c}if(!this.isLoading){this.invokeLater(this.loadNextImage,100)}this.set("isLoading",YES);return this},_unscheduleImageEntry:function(b){if(b.status!==this.IMAGE_QUEUED){return this}var a=b.isBackground?this._backgroundQueue:this._foregroundQueue;a[a.indexOf(b)]=null;if(this._loading.indexOf(b)>=0){if(a.image){a.image.abort()}this.imageStatusDidChange(b,this.ABORTED)}return this},_imageDidAbort:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ABORTED)},this)},_imageDidError:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ERROR)},this)},_imageDidLoad:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.LOADED)},this)},imageStatusDidChange:function(c,a){if(!c){return}var b=c.url;var e;switch(a){case this.LOADED:e=c.image;break;case this.ABORTED:e=SC.IMAGE_ABORTED_ERROR;break;case this.ERROR:e=SC.IMAGE_FAILED_ERROR;break;default:e=SC.IMAGE_FAILED_ERROR;break}c.callbacks.forEach(function(g){var h=g[0],j=g[1];j.call(h,b,e)},this);c.callbacks=[];c.status=(a===this.LOADED)?this.IMAGE_LOADED:this.IMAGE_WAITING;var f=c.image;if(f){f.onload=f.onerror=f.onabort=null;if(a!==this.LOADED){c.image=null}}this._loading[this._loading.indexOf(c)]=null;if(this._loading.length>this.loadLimit*2){this._loading=this._loading.compact()}this.decrementProperty("activeRequests");this.loadNextImage()},init:function(){arguments.callee.base.apply(this,arguments);this._images={};this._loading=[];this._foregroundQueue=[];this._backgroundQueue=[]},IMAGE_LOADED:"loaded",IMAGE_QUEUED:"queued",IMAGE_WAITING:"waiting",ABORTED:"aborted",ERROR:"error",LOADED:"loaded"});SC.Math=SC.Object.create({near:function(c,b,a){if(!a){a=0.00001}return Math.abs(c-b)<=a},round:function(e,a){if(!a){a=0}var b=Math.pow(10,a);if(a<0){var c=b.toString();b=c.substring(0,c.indexOf("1")+1)}e=e.valueOf();return Math.round(e*b)/b}});SC.Task=SC.Object.extend({run:function(a){}});sc_require("tasks/task");SC.LOG_MODULE_LOADING=YES;SC.Module=SC.Object.create({isModuleReady:function(a){var b=SC.MODULE_INFO[a];return b?!!b.isReady:NO},loadModule:function(b,h,a){var c=SC.MODULE_INFO[b],j,g,k=SC.A(arguments).slice(3),e=SC.LOG_MODULE_LOADING,l,f;if(a===undefined&&SC.typeOf(h)===SC.T_FUNCTION){a=h;h=null}if(e){SC.debug("SC.Module: Attempting to load '%@'",b)}if(!c){throw"SC.Module: could not find module '%@'".fmt(b)}c.isPrefetching=NO;if(c.isLoaded&&!c.isWaitingForRunLoop){if(e){SC.debug("SC.Module: Module '%@' already loaded.",b)}if(!this._dependenciesMetForModule(b)){this._addCallbackForModule(b,h,a,k);this._loadDependenciesForModule(b);return NO}if(c.source){if(e){SC.debug("SC.Module: Evaluating JavaScript for module '%@'.",b)}this._evaluateStringLoadedModule(c);this._addCallbackForModule(b,h,a,k);this.invokeLast(function(){c.isReady=YES;this._moduleDidBecomeReady(b)});return NO}if(a){if(SC.isReady){SC.Module._invokeCallback(b,h,a,k)}else{SC.ready(SC.Module,function(){SC.Module._invokeCallback(b,h,a,k)})}}return YES}else{if(c.isWaitingForRunLoop){this._addCallbackForModule(b,h,a,k)}else{if(e){SC.debug("SC.Module: Module '%@' is not loaded, loading now.",b)}this._addCallbackForModule(b,h,a,k);if(!c.isLoading){this._loadDependenciesForModule(b);this._loadCSSForModule(b);this._loadJavaScriptForModule(b);c.isLoading=YES}return NO}}},_addCallbackForModule:function(b,f,g,a){var c=SC.MODULE_INFO[b];var e=c.callbacks||[];if(g){e.push(function(){SC.Module._invokeCallback(b,f,g,a)})}c.callbacks=e},prefetchModule:function(a){var b=SC.MODULE_INFO[a];if(b.isLoading||b.isLoaded){return}if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Prefetching module '%@'.",a)}this._loadDependenciesForModule(a);this._loadCSSForModule(a);this._loadJavaScriptForModule(a);b.isLoading=YES;b.isPrefetching=YES},_executeLazilyInstantiatedModule:function(b,c,k){var j=SC.LAZY_INSTANTIATION[b];var h;var a;var l,f;if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Module '%@' is marked for lazy instantiation, instantiating it now…",b)}f=j.length;for(l=0;l<f;l++){try{j[l]()}catch(g){SC.Logger.error("SC.Module: Failed to lazily instatiate entry for  '%@'".fmt(b))}}delete SC.LAZY_INSTANTIATION[b];h=this._targetForTargetName(c);a=this._methodForMethodNameInTarget(k,h);if(!a){throw"SC.Module: could not find callback for lazily instantiated module '%@'".fmt(b)}},_evaluateStringLoadedModule:function(b){var a=b.source;jQuery.globalEval(a);delete b.source;if(b.cssSource){var c=document.createElement("style");c.setAttribute("type","text/css");if(c.styleSheet){c.styleSheet.cssText=b.cssSource}else{var e=document.createTextNode(b.cssSource);c.appendChild(e)}document.getElementsByTagName("head")[0].appendChild(c)}b.isReady=YES},_loadCSSForModule:function(e){var g=document.getElementsByTagName("head")[0];var f=SC.MODULE_INFO[e];var j=f.styles||[];var b=j.length;var c;var h;var a;if(!g){g=document.documentElement}b=j.length;for(a=0;a<b;a++){c=j[a];if(c.length>0){if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Loading CSS file in '%@' -> '%@'",e,c)}h=document.createElement("link");h.setAttribute("href",c);h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");g.appendChild(h)}}h=null},_loadJavaScriptForModule:function(b){var c=SC.MODULE_INFO[b];var e;var a;var f=c.dependencies;var g=YES;if(f&&f.length>0){g=this._dependenciesMetForModule(b)}if(c.isPrefetched){a=c.stringURL}else{if(g){a=c.scriptURL}else{a=c.stringURL}}if(a.length>0){if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Loading JavaScript file in '%@' -> '%@'",b,a)}e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src",a);if(SC.browser.isIE){e.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){SC.run(function(){SC.Module._moduleDidLoad(b)})}}}else{e.onload=function(){SC.run(function(){SC.Module._moduleDidLoad(b)})}}document.body.appendChild(e)}},_dependenciesMetForModule:function(c){var f=SC.MODULE_INFO[c].dependencies||[];var b,a=f.length;var g;var e;for(b=0;b<a;b++){g=f[b];e=SC.MODULE_INFO[g];if(!e){throw"SC.loadModule: Unable to find dependency %@ for module %@.".fmt(g,c)}if(!e.isReady){return NO}}return YES},_loadDependenciesForModule:function(a){var b=SC.MODULE_INFO[a];var f=SC.LOG_MODULE_LOADING;var k=b.dependencies||[];var g=YES;var h=k.length;var l;var e;var c;var j;for(l=0;l<h;l++){e=k[l];c=SC.MODULE_INFO[e];if(!c){throw"SC.Module: could not find required module '%@' for module '%@'".fmt(e,a)}else{if(c.isLoading){g=NO;j=c.dependents;if(!j){c.dependents=j=[]}j.push(a)}else{if(c.isReady){continue}else{g=NO;j=c.dependents;if(!j){c.dependents=j=[]}j.push(a);if(f){SC.debug("SC.Module: '%@' depends on '%@', loading dependency…",a,e)}SC.Module.loadModule(e)}}}}},_invokeCallback:function(c,e,a,b){var h;var g;g=this._targetForTargetName(e);h=this._methodForMethodNameInTarget(a,g);if(!h){if(SC.LAZY_INSTANTIATION[c]){this._executeLazilyInstantiatedModule(c,e,a);g=this._targetForTargetName(e);h=this._methodForMethodNameInTarget(a,g)}else{throw"SC.Module: could not find callback for '%@'".fmt(c)}}if(!b){b=[]}b.unshift(c);var f=!!SC.RunLoop.currentRunLoop;if(f){SC.run(function(){h.apply(g,b)})}else{h.apply(g,b)}},_invokeCallbacksForModule:function(c){var f=SC.MODULE_INFO[c],e;if(!f){return}if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Module '%@' has completed loading, invoking callbacks.",c)}e=f.callbacks||[];for(var b=0,a=e.length;b<a;++b){e[b]()}},_evaluateAndInvokeCallbacks:function(a){var e=SC.MODULE_INFO;var b=e[a];var c=SC.LOG_MODULE_LOADING;if(c){SC.debug("SC.Module: Evaluating and invoking callbacks for '%@'.",a)}if(b.source){this._evaluateStringLoadedModule(b)}b.isWaitingForRunLoop=YES;this.invokeLast(function(){b.isReady=YES;this._moduleDidBecomeReady(a)})},_moduleDidBecomeReady:function(a){var c=SC.MODULE_INFO;var b=c[a];var e=SC.LOG_MODULE_LOADING;b.isWaitingForRunLoop=NO;if(SC.isReady){SC.Module._invokeCallbacksForModule(a);delete b.callbacks}else{SC.ready(SC,function(){SC.Module._invokeCallbacksForModule(a);delete b.callbacks})}var h=b.dependents||[];var f,k;for(var j=0,g=h.length;j<g;j++){f=h[j];k=c[f];if(k.isLoaded&&this._dependenciesMetForModule(f)){if(e){SC.debug("SC.Module: Now that %@ has loaded, all dependencies for a dependent %@ are met.",a,f)}this._evaluateAndInvokeCallbacks(f)}}},_moduleDidLoad:function(b){var c=SC.MODULE_INFO[b];var f=SC.LOG_MODULE_LOADING;var e;var g,a;if(f){SC.debug("SC.Module: Module '%@' finished loading.",b)}if(!c){if(f){SC.debug("SC._moduleDidLoad() called for unknown module '@'.",b)}c=SC.MODULE_INFO[b]={isLoaded:YES,isReady:YES};return}if(c.isLoaded){if(f){SC.debug("SC._moduleDidLoad() called more than once for module '%@'. Skipping.",b)}return}delete c.isLoading;c.isLoaded=YES;if(!c.isPrefetching){e=this._dependenciesMetForModule(b);if(e){this._evaluateAndInvokeCallbacks(b)}else{if(f){SC.debug("SC.Module: Dependencies for '%@' not met yet, waiting to evaluate.",b)}}}else{delete c.isPrefetching;if(f){SC.debug("SC.Module: Module '%@' was prefetched, not evaluating until needed.",b)}}},_targetForTargetName:function(a){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a)}return a},_methodForMethodNameInTarget:function(a,b){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a,b)}return a},methodsForSuspend:"loadModule _moduleDidLoad prefetchModule _moduleDidBecomeReady".w(),suspend:function(){this._suspendCount=(this._suspendCount||0)+1;if(this._suspendCount!==1){return}var a=this.get("methodsForSuspend"),f,e,c,b;for(b=0;c=a[b];b++){if(!this[f="__replacement_"+c+"__"]){(this[f]=function(){(this._bufferedCalls||(this._bufferedCalls=[])).push({method:arguments.callee.methodName,arguments:arguments})}).methodName=c}if(!this[e="__saved_"+c+"__"]){this[e]=this[c]}this[c]=this[f]}},resume:function(){this._suspendCount=(this._suspendCount||0)-1;if(this._suspendCount<0){SC.warn("SC.Module.resume() was called without SC.Module having been in a suspended state. Call aborted.");this._suspendCount=0;return}if(this._suspendCount>0){return}var a=this.get("methodsForSuspend"),e=this._bufferedCalls,c,b,g,f;for(b=0;(c=a[b]);b++){this[c]=this["__saved_"+c+"__"]}for(b=0;f=e&&e[b];b++){this[f.method].apply(this,f.arguments)}if(e){e.length=0}}});SC.ready(function(){var e=SC.MODULE_INFO;var b;var c;var a;for(b in e){c=e[b];if(c.isPrefetched){a=SC.Module.PrefetchModuleTask.create({prefetchedModuleName:b});SC.backgroundTaskQueue.push(a)}}});SC.Module.PrefetchModuleTask=SC.Task.extend({prefetchedModuleName:null,run:function(){SC.Module.prefetchModule(this.prefetchedModuleName)}});sc_require("tasks/task");SC.TaskQueue=SC.Task.extend({init:function(){var a=this;this._doIdleEntry=function(){a._idleEntry()};this._suspendCount=0;this._tasks=[]},runWhenIdle:NO,runLimit:50,interval:50,isRunning:NO,minimumIdleDuration:500,_tasks:null,hasTasks:function(){return this._tasks.length>0}.property("taskCount").cacheable(),taskCount:function(){return this._tasks.length}.property().cacheable(),push:function(a){this._tasks.push(a);this.notifyPropertyChange("taskCount")},next:function(){if(this._tasks.length<1){return null}var a=this._tasks.shift();this.notifyPropertyChange("taskCount");return a},suspend:function(){this._suspendCount++},resume:function(){this._suspendCount--;if(this._suspendCount<=0){this._setupIdle()}},_taskCountDidChange:function(){this._setupIdle()}.observes("taskCount"),_runWhenIdleDidChange:function(){this._setupIdle()}.observes("runWhenIdle"),_setupIdle:function(){if(!this._suspendCount&&this.get("runWhenIdle")&&!this._idleIsScheduled&&this.get("taskCount")>0){setTimeout(this._doIdleEntry,this.get("interval"));this._idleIsScheduled=YES}},_idleEntry:function(){this._idleIsScheduled=NO;var a=SC.RunLoop.lastRunLoopEnd;if(!this.get("runWhenIdle")&&!this._suspendCount){return}if(Date.now()-a>this.get("minimumIdleDuration")){SC.run(this.run,this);SC.RunLoop.lastRunLoopEnd=a}this._setupIdle()},run:function(a){this.set("isRunning",YES);if(!a){a=this.get("runLimit")}var b,c=Date.now();while(b=this.next()){b.run(this);if(Date.now()-c>a){break}}this.set("isRunning",NO)}});SC.backgroundTaskQueue=SC.TaskQueue.create({runWhenIdle:YES});SC.TextSelection=SC.Object.extend(SC.Copyable,SC.Freezable,{start:-1,end:-1,length:function(){var b=this.get("start");var a=this.get("end");if((b)===-1||(a===-1)){return -1}else{return a-b}}.property("start","end").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.freeze()},copy:function(){return SC.TextSelection.create({start:this.get("start"),end:this.get("end")})},toString:function(){var a=this.get("length");if(a&&a>0){if(a===1){return"[%@ character selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))}else{return"[%@ characters selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))}}else{return"[no text selected; caret at %@]".fmt(this.get("start"))}}});SC.UserDefaults=SC.Object.extend({ready:NO,userDomain:null,appDomain:null,_defaults:null,_safari3DB:null,defaults:function(a){this._defaults=a;this.allPropertiesDidChange()},readDefault:function(k){var a,f,b,l,j,m,h;k=this._normalizeKeyName(k);b=this._userKeyName(k);if(this._written){f=this._written[b]}a=SC.browser.isIE&&SC.browser.compare(SC.browser.engineVersion,"7")===0;if(a){l=document.body;try{l.load("SC.UserDefaults")}catch(c){SC.Logger.error("Couldn't load userDefaults in IE7: "+c.description)}}else{if(this.HTML5DB_noLocalStorage){h=this._safari3DB}else{l=window.localStorage;if(!l&&window.globalStorage){l=window.globalStorage[window.location.hostname]}}}if(l||h){j=["SC.UserDefaults",b].join("-at-");if(a){f=l.getAttribute(j.replace(/\W/gi,""))}else{if(h){f=this.dataHash[j]}else{f=l[j]}}if(!SC.none(f)){try{f=SC.json.decode(f)}catch(g){}}}m=this.delegate;if(m&&m.userDefaultsNeedsDefault){f=m.userDefaultsNeedsDefault(this,k,b)}if(SC.none(f)&&this._defaults){f=this._defaults[b]||this._defaults[k]}return f},writeDefault:function(m,k){var b,g,c,n,l,o,j;m=this._normalizeKeyName(m);g=this._userKeyName(m);c=this._written;if(!c){c=this._written={}}c[g]=k;b=SC.browser.isIE&&SC.browser.compare(SC.browser.engineVersion,"7")===0;if(b){n=document.body}else{if(this.HTML5DB_noLocalStorage){j=this._safari3DB}else{n=window.localStorage;if(!n&&window.globalStorage){n=window.globalStorage[window.location.hostname]}}}l=["SC.UserDefaults",g].join("-at-");if(n||j){var a=SC.json.encode(k);if(b){n.setAttribute(l.replace(/\W/gi,""),a);n.save("SC.UserDefaults")}else{if(j){var f=this;j.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[l],function(){e.executeSql("insert into SCLocalStorage(key, value) VALUES ('"+l+"', '"+a+"');",[],f._nullDataHandler,f.killTransaction)})});this.dataHash[l]=a}else{try{n[l]=a}catch(h){SC.Logger.error("Failed using localStorage. "+h)}}}}o=this.delegate;if(o&&o.userDefaultsDidChange){o.userDefaultsDidChange(this,m,k,g)}return this},resetDefault:function(l){var b,a,g,c,m,k,j;b=this._normalizeKeyName(l);g=this._userKeyName(b);this.propertyWillChange(l);this.propertyWillChange(b);c=this._written;if(c){delete c[g]}a=SC.browser.isIE&&SC.browser.compare(SC.browser.engineVersion,"7")===0;if(a){m=document.body}else{if(this.HTML5DB_noLocalStorage){j=this._safari3DB}else{m=window.localStorage;if(!m&&window.globalStorage){m=window.globalStorage[window.location.hostname]}}}k=["SC.UserDefaults",g].join("-at-");if(m){if(a){m.setAttribute(k.replace(/\W/gi,""),null);m.save("SC.UserDefaults")}else{if(j){var f=this;j.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[k],null)});delete this.dataHash[k]}else{try{delete m[k]}catch(h){SC.Logger.warn("Deleting local storage encountered a problem. "+h)}}}}this.propertyDidChange(l);this.propertyDidChange(b);return this},unknownProperty:function(a,b){if(b===undefined){return this.readDefault(a)}else{this.writeDefault(a,b);return b}},_normalizeKeyName:function(a){if(a.indexOf(":")<0){var b=this.get("appDomain")||"app";a=[b,a].join(":")}return a},_userKeyName:function(b){var a=this.get("userDomain")||"(anonymous)";return[a,b].join("-at-")},_domainDidChange:function(){var a=NO;if(this.get("userDomain")!==this._scud_userDomain){this._scud_userDomain=this.get("userDomain");a=YES}if(this.get("appDomain")!==this._scud_appDomain){this._scud_appDomain=this.get("appDomain");a=YES}if(a){this.allPropertiesDidChange()}}.observes("userDomain","appDomain"),init:function(){arguments.callee.base.apply(this,arguments);var a;jQuery.readyWait++;if(SC.userDefaults&&SC.userDefaults.get("dataHash")){var h=SC.userDefaults.get("dataHash");if(h){this.dataHash=SC.userDefaults.get("dataHash")}}this._scud_userDomain=this.get("userDomain");this._scud_appDomain=this.get("appDomain");a=SC.browser.isIE&&SC.browser.compare(SC.browser.engineVersion,"7")===0;if(a){document.body.addBehavior("#default#userData")}this.HTML5DB_noLocalStorage=SC.browser.isWebkit&&SC.browser.compare(SC.browser.engineVersion,"523")>0&&SC.browser.compare(SC.browser.engineVersion,"528")<0;if(this.HTML5DB_noLocalStorage){var b;try{if(!window.openDatabase){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}else{var j="scdb",g="1.0",k="SproutCore database",l=65536;b=openDatabase(j,g,k,l)}}catch(f){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}if(b){var c=this;b.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS SCLocalStorage(key TEXT NOT NULL PRIMARY KEY, value TEXT NOT NULL);",[],c._nullDataHandler,c.killTransaction)});b.transaction(function(e){e.parent=c;e.executeSql("SELECT * from SCLocalStorage;",[],function(s,o){var p={},q;for(var n=0,m=o.rows.length;n<m;n++){q=o.rows.item(n);p[q.key]=q.value}s.parent.dataHash=p;SC.run(function(){jQuery.ready(true)})},c.killTransaction)});this._safari3DB=b}}else{jQuery.ready(true)}},_killTransaction:function(b,a){return true},_nullDataHandler:function(b,a){}});SC.userDefaults=SC.UserDefaults.create();SC.mixin({convertHsvToHex:function(e,c,a){var b=SC.Color.hsvToRgb(e,c,a);return SC.Color.create({r:b[0],g:b[1],b:b[2]}).toHex()},convertHexToHsv:function(b){var a=SC.Color.from(b);return a&&SC.Color.rgbToHsv(a.r,a.g,a.b)},PARSE_COLOR_RGBRE:/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,PARSE_COLOR_HEXRE:/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,expandColor:function(b){var c,f,e,a;c=this.parseColor(b);if(c){f=parseInt(c.slice(1,3),16);e=parseInt(c.slice(3,5),16);a=parseInt(c.slice(5,7),16);return[f,e,a]}},parseColor:function(e){var f=0,a="#",c,b;if(c=this.PARSE_COLOR_RGBRE.exec(e)){for(f=1;f<=3;f++){b=Math.max(0,Math.min(255,parseInt(c[f],0)));a+=this.toColorPart(b)}return a}if(c=this.PARSE_COLOR_HEXRE.exec(e)){if(c[1].length==3){for(f=0;f<3;f++){a+=c[1].charAt(f)+c[1].charAt(f)}return a}return"#"+c[1]}return false},toColorPart:function(a){if(a>255){a=255}var b=a.toString(16);if(a<16){return"0"+b}return b}});SC.mixin({_downloadFrames:0,download:function(e){var a=document.createElement("iframe"),c="DownloadFrame_"+this._downloadFrames;SC.$(a).attr("id",c);a.style.border="10px";a.style.width="0px";a.style.height="0px";a.style.position="absolute";a.style.top="-10000px";a.style.left="-10000px";if(!SC.browser.isSafari){SC.$(a).attr("src",e)}document.getElementsByTagName("body")[0].appendChild(a);if(SC.browser.isSafari){SC.$(a).attr("src",e)}this._downloadFrames=this._downloadFrames+1;if(!SC.browser.isSafari){var b=function(){document.body.removeChild(document.getElementById(c));c=null};b.invokeLater(null,2000)}a=null},getStyle:function(a,b){var c="";if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(e,f){return f.toUpperCase()});c=a.currentStyle[b]}}return c},uniJapaneseConvert:function(f){var a,c="",b,e;for(b=0,e=f.length;b<e;b++){a=f.charCodeAt(b);a=((a>=65281&&a<=65392)?a-65248:a);a=(a===12540?45:a);c=c+String.fromCharCode(a)}return c},pointInElement:function(b,h,c,g){var j,e,a,f;h=jQuery(h);c=c||"border";j=SC.offset(h,g);if(c==="padding"){e=h.innerWidth();a=h.innerHeight();j.x+=window.parseInt(h.css("border-left-width").replace("px",""));j.y+=window.parseInt(h.css("border-top-width").replace("px",""))}else{e=h.outerWidth(c==="margin");a=h.outerHeight(c==="margin");if(c==="margin"){j.x-=window.parseInt(h.css("margin-left").replace("px",""));j.y-=window.parseInt(h.css("margin-top").replace("px",""))}}f={x:j.x,y:j.y,width:e,height:a};return SC.pointInRect(b,f)},switchScale:function(){$("head meta[name=viewport]").remove();if(window.innerWidth===window.screen.width){$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=0" />')}else{$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0" />')}}});SC.mixin({ZERO_RANGE:{start:0,length:0},RANGE_NOT_FOUND:{start:0,length:-1},valueInRange:function(b,a){return(b>=0)&&(b>=a.start)&&(b<(a.start+a.length))},minRange:function(a){return a.start},maxRange:function(a){return(a.length<0)?-1:(a.start+a.length)},unionRanges:function(c,b){if((c==null)||(c.length<0)){return b}if((b==null)||(b.length<0)){return c}var e=Math.min(c.start,b.start),a=Math.max(SC.maxRange(c),SC.maxRange(b));return{start:e,length:a-e}},intersectRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var e=Math.max(SC.minRange(c),SC.minRange(b)),a=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<e){return SC.RANGE_NOT_FOUND}return{start:e,length:a-e}},subtractRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var a=Math.max(SC.minRange(c),SC.minRange(b)),e=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<e){return SC.RANGE_NOT_FOUND}return{start:e,length:a-e}},cloneRange:function(a){return{start:a.start,length:a.length}},rangesEqual:function(b,a){if(b===a){return true}if(b==null){return a.length<0}if(a==null){return b.length<0}return(b.start==a.start)&&(b.length==a.length)}});SC.mixin({bestStringMetricsForMaxWidth:function(a,z,o,B,y){if(!z){SC.warn("When calling bestMetricsForWidth, the second argument, maxWidth, is required. There's no reason to call this without a maxWidth.");return undefined}z=Math.ceil(parseFloat(z));var C=arguments.callee,j=SC.typeOf(o||(o=""))!==SC.T_STRING,n=j?o.style.maxWidth:undefined,p=(!j||o.cacheableForMetrics)?SC.cacheSlotFor(o,B,y,a):undefined,t=j?(C._applyMaxToEl||(C._applyMaxToEl=function(G,l){G.style.maxWidth=l+"px";return G})):(C._applyMaxToStr||(C._applyMaxToStr=function(G,l){return G.replace(/max-width:[^;]*;/g,"")+" max-width:"+l+"px"})),w=j?(C._removeMaxFromEl||(C._removeMaxFromEl=function(l){l.style.maxWidth="none";return l})):(C._removeMaxFromStr||(C._removeMaxFromStr=function(l){return l.replace(/max-width:[^;]*;/g,"")+" max-width:none"})),q=false;if(p){p.list||(p.list=[{width:Infinity,height:0}]);for(var x=1,v=p.list.length,E,b,F;x<v&&!F;x++){E=p.list[x];b=p.list[x-1];if(!E||!E.width){continue}if(z>=E.width){if((b&&b.width)||(z<=E.maxWidth)){return E}F=E}}}var s=t(o,z),u=SC.metricsForString(a,s,B,y),A=u.height,e=p?p.parent.height||(p.parent.height=SC.metricsForString("W",s,B).height):SC.metricsForString("W",s,B).height,c=Math.round(A/e);if(q){c--;A=c*e}if(A>e){var h=q?Math.ceil(u.width*2.5):u.width,m=q?u.width:Math.floor(u.width/2.5),D,g=new Date()*1,k=0;while(h-m>1||(u.height>A&&!q)||(u.height<A&&q)){k++;D=(h+m)/2;s=t(s,D);u=SC.metricsForString(a,s,B,y);if(u.height>A){m=D}else{h=D}}u.width=Math.ceil(D);u.height=A;u.maxWidth=z;u.lineHeight=e;u.lines=c;u.searchPerformed=true;u.searchTime=new Date()*1-g;u.searchCount=k}else{if(q){u=SC.metricsForString(a,s=w(s),B,y)}u.maxWidth=z;u.lineHeight=e;u.lines=c;u.searchPerformed=false}u.browserCorrection=0;if(SC.browser.isIE){u.browserCorrection=1}if(SC.browser.isMozilla){u.browserCorrection=1}u.width=Math.min(z,u.width+u.browserCorrection);if(p){var f=p.list[c];if(f&&f.maxWidth<z){f.maxWidth=z}if(!f){f=p.list[c]=u}}if(j){s.style.maxWidth=n}F=q?F:u;return F},cacheSlotFor:function(){var f=arguments.callee.caller,g=f.cache||(f.cache={});if(!arguments[0]){return g}var b=(arguments[0] instanceof Array||arguments[0].callee)?arguments[0]:arguments,e=b.length,a,c;for(c=0;c<e;c++){if(typeof(a=b[c])==="object"){a=SC.guidFor(a)}g=g[a]||(g[a]={parent:g})}return g},cachedVersionOf:function(){var a=function(c){var b=function(){var e=SC.cacheSlotFor(arguments);return e.result||(e.result=arguments.callee.func.apply(this,arguments))};b.func=c;return b};return a(a)}()});sc_require("tasks/task");SC.didPreloadBundle=function(){};SC.PreloadBundleTask=SC.Task.extend({bundle:null,target:"SC",action:"preloaded",run:function(a){var b;if(b=this.get("bundle")){var c=Date.now();SC.Module.loadModule(this.get("bundle"),this.get("target"),this.get("action"))}}});sc_require("system/string");SC.VALIDATE_OK=YES;SC.VALIDATE_NO_CHANGE=NO;SC.Validator=SC.Object.extend({fieldValueForObject:function(b,c,a){return b},objectForFieldValue:function(c,b,a){return c},validate:function(a,b){return true},validateError:function(a,b){return SC.$error(SC.String.loc("Invalid.General(%@)",b.get("fieldValue")),b.get("fieldKey"))},validateChange:function(b,c,a){return this.validate(b,c)?SC.VALIDATE_OK:this.validateError(b,c)},validateSubmit:function(a,b){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)},validatePartial:function(a,b){if(!b.get("isValid")){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)}else{return SC.VALIDATE_NO_CHANGE}},validateKeyDown:function(b,c,a){return true},attachTo:function(a,b){},detachFrom:function(a,b){}});SC.Validator.mixin({OK:true,NO_CHANGE:false,findFor:function(f,h,g){var c;if(!g){return}if(g instanceof SC.Validator){c=g}else{if(g.isClass){c=g.create()}else{if(SC.typeOf(g)===SC.T_STRING){var b=null;var a=g.match(/^(.+)\[(.*)\]/);if(a){g=a[1];b=a[2]}g=SC.String.classify(g);var e=SC.Validator[g];if(SC.none(e)){throw"validator %@ not found for %@".fmt(g,h)}else{if(b){if(!f){throw"named validator (%@) could not be found for field %@ because the field does not belong to a form".fmt(b,h)}if(!f._validatorHash){f._validatorHash={}}c=(b)?f._validatorHash[b]:null;if(!c){c=e.create()}if(b){f._validatorHash[b]=c}}else{c=e.create()}}}}}return c},fieldValueForObject:function(a,b,c){if(this.prototype&&this.prototype.fieldValueForObject){return this.prototype.fieldValueForObject(a,b,c)}else{return null}},objectForFieldValue:function(b,a,c){if(this.prototype&&this.prototype.objectForFieldValue){return this.prototype.objectForFieldValue(b,a,c)}else{return null}}});sc_require("validators/validator");SC.Validator.CreditCard=SC.Validator.extend({fieldValueForObject:function(a,b,c){if(typeof(a)=="string"&&a.length==16){a=[a.slice(0,4),a.slice(4,8),a.slice(8,12),a.slice(12,16)].join(" ")}return a},objectForFieldValue:function(b,a,c){return b.replace(/[\s-\.\:]/g,"")},validate:function(a,b){return this.checkNumber(b.get("fieldValue"))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.CreditCard(%@)",a),a)},validateKeyDown:function(b,c,a){return !!a.match(/[0-9\- ]/)},checkNumber:function(k){if(!k||k.length===0){return YES}k=k.replace(/[^0-9]/g,"");var a="0123456789";var h=k.length;var g=parseInt(k,0);var m=k.toString();m=m.replace(/^\s+|\s+$/g,"");var l=0;var o=true;var b=false;var n;var e;for(var c=0;c<h;c++){n=""+m.substring(c,c+1);if(a.indexOf(n)=="-1"){o=false}}if(!o){b=false}if((h===0)&&(b)){b=false}else{if(h>=15){for(var f=h;f>0;f--){e=parseInt(g,0)%10;e=parseInt(e,0);l+=e;f--;g=g/10;e=parseInt(g,0)%10;e=e*2;switch(e){case 10:e=1;break;case 12:e=3;break;case 14:e=5;break;case 16:e=7;break;case 18:e=9;break;default:e=e}g=g/10;l+=e}if((l%10)===0){b=true}else{b=false}}}return b}});sc_require("validators/validator");SC.Validator.Date=SC.Validator.extend({format:"%b %d, %Y %i:%M:%S %p",fieldValueForObject:function(a,b,f){var e=this.get("format"),c;if(SC.typeOf(a)===SC.T_NUMBER){c=SC.DateTime.create(a)}else{if(a instanceof Date){c=a.getTime()}}if(c){a=c.toFormattedString(e)}return a},objectForFieldValue:function(c,a,f){var e=this.get("format"),b;if(c){b=SC.DateTime.parse(c,e);c=b?b._ms:null}return c}});sc_require("validators/validator");SC.Validator.DateTime=SC.Validator.extend({format:"%d/%m/%Y",fieldValueForObject:function(a,b,c){if(SC.kindOf(a,SC.DateTime)){a=a.toFormattedString(this.get("format"))}else{a=null}return a},objectForFieldValue:function(b,a,c){if(b){b=SC.DateTime.parse(b,this.get("format"))}return b}});sc_require("validators/validator");SC.Validator.Email=SC.Validator.extend({validate:function(a,b){return(b.get("fieldValue")||"").match(/.+@.+\...+/)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Email(%@)",a),a)}});SC.Validator.EmailOrEmpty=SC.Validator.Email.extend({validate:function(a,c){var b=c.get("fieldValue");return(b&&b.length>0)?b.match(/.+@.+\...+/):true}});sc_require("validators/validator");SC.Validator.NotEmpty=SC.Validator.extend({validate:function(a,c){var b=c.get("fieldValue");if(SC.none(b)){return NO}if(!SC.none(b.length)){return b.length>0}return YES},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.NotEmpty(%@)",SC.String.capitalize(a)),c.get("errorLabel"))}});sc_require("validators/validator");sc_require("system/utils/misc");SC.Validator.Number=SC.Validator.extend({places:0,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(this.get("places"));break;case SC.T_NULL:case SC.T_UNDEFINED:a="";break}return a},objectForFieldValue:function(c,b,e){var a;c=c.replace(/,/g,"");switch(SC.typeOf(c)){case SC.T_STRING:if(c.length===0){c=null}else{if(this.get("places")>0){c=parseFloat(c)}else{if(c.length===1&&c.match(/-/)){c=null}else{a=parseInt(c,0);if(isNaN(a)){c=SC.uniJapaneseConvert(c);c=parseInt(c,0);if(isNaN(c)){c=""}}else{c=a}}}}break;case SC.T_NULL:case SC.T_UNDEFINED:c=null;break}return c},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!(isNaN(b)||isNaN(parseFloat(b)))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){if(!a){a=""}var e=c.$input().val();if(!e){e=""}e+=a;if(this.get("places")===0){if(a.length===0){return true}else{return e.match(/^[\-{0,1}]?[0-9,\0]*/)[0]===e}}else{if(a.length===0){return true}else{return e.match(/^[\-{0,1}]?[0-9,\0]*\.?[0-9\0]+/)===e}}}});sc_require("validators/validator");SC.Validator.Password=SC.Validator.extend({attachTo:function(a,b){arguments.callee.base.apply(this,arguments);if(!this.fields){this.fields=[]}this.fields.push(b)},validate:function(f){if(!this.fields||this.fields.length===0){return true}var e=false;var b=false;var a=true;var c=this.fields[0].get("fieldValue");this.fields.forEach(function(h){var g=h.get("fieldValue");if(g!=c){a=false}if(!g||g.length===0){e=true}if(g&&g.length>0){b=true}});if(f){return(b===false)?false:a}else{return(e===true)?true:a}},updateFields:function(c,b){if(!this.fields||this.fields.length===0){return true}var a=SC.String.loc("Invalid.Password");var e=this._field;this.fields.forEach(function(g){var h=(b)?null:((g==e)?a:"");c.setErrorFor(g,h)});return(b)?SC.VALIDATE_OK:a},validateChange:function(b,c,a){return this.updateFields(b,this.validate(false))},validateSubmit:function(a,b){return this.updateFields(a,this.validate(true))},validatePartial:function(b,c){var a=!this._field.get("isValid");if(a){return this.updateFields(b,this.validate(false))}else{return SC.VALIDATE_NO_CHANGE}}});sc_require("validators/validator");SC.Validator.PositiveInteger=SC.Validator.extend({defaultValue:null,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(0);break;case SC.T_NULL:case SC.T_UNDEFINED:a=this.get("defaultValue");break}return a},objectForFieldValue:function(b,a,c){b=b.replace(/,/g,"");switch(SC.typeOf(b)){case SC.T_STRING:if(b.length===0){b=this.get("defaultValue")}else{b=parseInt(b,0)}break;case SC.T_NULL:case SC.T_UNDEFINED:b=this.get("defaultValue");break}if(isNaN(b)){return this.get("defaultValue")}return b},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!isNaN(b)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){var e=c.$input().val();if(!e){e=""}e+=a;if(a.length===0){return true}else{return e.match(/^[0-9\0]*/)[0]===e}}});SC.ContainerView=SC.View.extend({classNames:["sc-container-view"],renderDelegateName:"containerRenderDelegate",nowShowing:null,contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.get("contentView");if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},awake:function(){arguments.callee.base.apply(this,arguments);var a=this.get("nowShowing");if(a&&a.length>0){this.nowShowingDidChange()}},nowShowingDidChange:function(){var c=this.get("nowShowing");if(c===SC.CONTENT_SET_DIRECTLY){return}var a=(this._instantiatedLastView===YES)?this.get("contentView"):null;this._instantiatedLastView=NO;if(SC.typeOf(c)===SC.T_STRING&&c.length>0){if(c.indexOf(".")>0){c=SC.objectForPropertyPath(c)}else{var b=this.getPath(c);c=SC.kindOf(b,SC.CoreView)?b:SC.objectForPropertyPath(c,this.get("page"))}}if(SC.typeOf(c)===SC.T_CLASS){if(c.kindOf(SC.CoreView)){c=this.createChildView(c);this._instantiatedLastView=YES}else{c=null}}if(c&&!(c instanceof SC.CoreView)){c=null}this.set("contentView",c);if(a){a.destroy()}}.observes("nowShowing"),contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView")});sc_require("mixins/validatable");SC.FieldView=SC.View.extend(SC.Control,SC.Validatable,{fieldValue:function(){var a=this.get("value");if(SC.typeOf(a)===SC.T_ERROR){a=a.get("errorValue")}return this.fieldValueForObject(a)}.property("value","validator").cacheable(),$input:function(){var a=this._inputElementTagName();return this.$(a).andSelf().filter(a)},_inputElementTagName:function(){return"input"},setFieldValue:function(b){if(SC.none(b)){b=""}var a=this.$input();if(a.val()!==b){a.val(b)}return this},getFieldValue:function(){return this.$input().val()},_field_fieldValueDidChange:function(a){SC.run(function(){this.fieldValueDidChange(NO)},this)},fieldValueDidChange:function(a){var c=this.getFieldValue();var b=this.objectForFieldValue(c,a);this.setIfChanged("value",b)},_field_valueDidChange:function(){this.setFieldValue(this.get("fieldValue"))}.observes("fieldValue"),didCreateLayer:function(){this.setFieldValue(this.get("fieldValue"));this._addChangeEvent()},willDestroyLayer:function(){SC.Event.remove(this.$input(),"change",this,this._field_fieldValueDidChange)},mouseDown:function(a){this._field_isMouseDown=YES;a.allowDefault();return YES},mouseExited:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}a.allowDefault();return YES},mouseEntered:function(a){this.set("isActive",this._field_isMouseDown);a.allowDefault();return YES},mouseUp:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}this._field_isMouseDown=NO;a.allowDefault();return YES},keyDown:function(b){if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(this.performValidateKeyDown(b)){this._isKeyDown=YES;b.allowDefault()}else{b.stop()}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),_addChangeEvent:function(){SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)},_field_setFieldValue:function(b){this.propertyWillChange("fieldValue");if(this.fieldValueForObject){b=this.fieldValueForObject(b)}var a=this.setFieldValue(b);this.propertyDidChange("fieldValue");return a},_field_getFieldValue:function(){var a=this.getFieldValue();if(this.objectForFieldValue){a=this.objectForFieldValue(a)}return a}});SC.IMAGE_STATE_NONE="none";SC.IMAGE_STATE_LOADING="loading";SC.IMAGE_STATE_LOADED="loaded";SC.IMAGE_STATE_FAILED="failed";SC.IMAGE_TYPE_NONE="NONE";SC.IMAGE_TYPE_URL="URL";SC.IMAGE_TYPE_CSS_CLASS="CSS_CLASS";SC.BLANK_IMAGE_DATAURL="data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==";SC.BLANK_IMAGE_URL=SC.browser.isIE&&SC.browser.compare(SC.browser.engineVersion,"8")<0?"/static/sproutcore/foundation/en/01b7ef43031f5d4a99f7ebe2e42b5d974566d43c/source/resources/blank.gif":SC.BLANK_IMAGE_DATAURL;SC.BLANK_IMAGE=new Image();SC.BLANK_IMAGE.src=SC.BLANK_IMAGE_URL;SC.BLANK_IMAGE.width=SC.BLANK_IMAGE.height=1;SC.ImageView=SC.View.extend(SC.Control,SC.InnerFrame,{classNames:"sc-image-view",displayProperties:["frame","image","innerFrame","toolTip","imageValue","type"],renderDelegateName:function(){return(this.get("useCanvas")?"canvasImage":"image")+"RenderDelegate"}.property("useCanvas").cacheable(),tagName:function(){return this.get("useCanvas")?"canvas":"div"}.property("useCanvas").cacheable(),canLoadInBackground:NO,image:SC.BLANK_IMAGE,imageValue:function(){var a=this.get("value");return a&&a.isEnumerable?a.firstObject():a}.property("value").cacheable(),innerFrame:function(){var c=this.get("image"),b=c.width,a=c.height,e=this.get("frame");if(SC.none(e)){return{x:0,y:0,width:0,height:0}}return this.innerFrameForSize(b,a,e.width,e.height)}.property("align","image","scale","frame").cacheable(),localize:YES,status:SC.IMAGE_STATE_NONE,type:function(){var a=this.get("imageValue");if(SC.ImageView.valueIsUrl(a)){return SC.IMAGE_TYPE_URL}else{if(!SC.none(a)){return SC.IMAGE_TYPE_CSS_CLASS}}return SC.IMAGE_TYPE_NONE}.property("imageValue").cacheable(),useCanvas:function(){return SC.platform.supportsCanvas&&!this.get("useStaticLayout")&&this.get("type")!==SC.IMAGE_TYPE_CSS_CLASS}.property("useStaticLayout","type").cacheable(),useImageQueue:YES,value:null,viewDidResize:function(){var b=this.get("layer"),c,a;if(b){c=b.offsetWidth;a=b.offsetHeight;if(this._cachedWidth!==c||this._cachedHeight!==a){this.notifyPropertyChange("frame");this._cachedWidth=c;this._cachedHeight=a}}},init:function(){arguments.callee.base.apply(this,arguments);this._image_valueDidChange();if(this.get("useImageCache")!==undefined){SC.Logger.warn("%@ has useImageCache set, please set useImageQueue instead".fmt(this));this.set("useImageQueue",this.get("useImageCache"))}},layerDidChange:function(){if(this.get("useCanvas")){this.set("layerNeedsUpdate",YES)}}.observes("layer"),_image_valueDidChange:function(){var b=this.get("imageValue"),a=this.get("type");if(b!==this._iv_value){this._iv_value=b;this.set("image",SC.BLANK_IMAGE);if(a!==SC.IMAGE_TYPE_CSS_CLASS){this.set("status",SC.IMAGE_STATE_LOADING);if(!this._loadImageUsingCache()){this._loadImage()}}}}.observes("imageValue"),_loadImageUsingCache:function(){var c=this.get("imageValue"),b=this.get("type");if(b===SC.IMAGE_TYPE_URL&&this.get("useImageQueue")){var a=this.get("isVisibleInWindow")||this.get("canLoadInBackground");SC.imageQueue.loadImage(c,this,this._loadImageUsingCacheDidComplete,a);return YES}return NO},_loadImageUsingCacheDidComplete:function(a,c){var b=this.get("imageValue");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},_loadImage:function(){var e=this.get("imageValue"),b=this.get("type"),c=this,g,a;if(b===SC.IMAGE_TYPE_URL){g=new Image();var f=function(){SC.run(function(){c._loadImageDidComplete(e,SC.$error("SC.Image.FailedError","Image",-101))})};var h=function(){SC.run(function(){c._loadImageDidComplete(e,g)})};a=$(g);a.bind("error",f);a.bind("abort",f);a.bind("load",h);g.src=e;return YES}return NO},_loadImageDidComplete:function(a,c){var b=this.get("imageValue");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},didLoad:function(a){this.set("status",SC.IMAGE_STATE_LOADED);if(!a){a=SC.BLANK_IMAGE}this.set("image",a)},didError:function(a){this.set("status",SC.IMAGE_STATE_FAILED);this.set("image",SC.BLANK_IMAGE)}});SC.ImageView.valueIsUrl=function(a){return a&&SC.typeOf(a)===SC.T_STRING?a.indexOf("/")>=0:NO};sc_require("views/field");sc_require("system/text_selection");sc_require("mixins/static_layout");sc_require("mixins/editable");SC.TextFieldView=SC.FieldView.extend(SC.StaticLayout,SC.Editable,{classNames:["sc-text-field-view"],isTextField:YES,applyImmediately:YES,commitOnBlur:YES,isPassword:NO,isTextArea:NO,focused:NO,hint:"",type:"text",isBrowserFocusable:YES,autoCorrect:YES,autoCapitalize:YES,formattedHint:function(){var a=this.get("hint");return typeof(a)==="string"&&this.get("localize")?SC.String.loc(a):a}.property("hint","localize").cacheable(),hintOnFocus:YES,localize:YES,isEditing:NO,defaultTabbingEnabled:YES,isContextMenuEnabled:YES,continuouslyUpdatesValue:null,allowsErrorAsValue:YES,leftAccessoryView:null,rightAccessoryView:null,spellCheckEnabled:YES,maxLength:5096,shouldRenderBorder:YES,supportsAutoResize:YES,autoResizeLayer:function(){return this.$input()[0]}.property("layer").cacheable(),autoResizeText:function(){return this.get("value")}.property("value").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",20),_hintON:YES,init:function(){var a=this.get("value");this._hintON=((!a||a&&a.length===0)&&!this.get("hintOnFocus"))?YES:NO;var b=this.get("continouslyUpdatesValue");if(b!==null&&b!==undefined){this.set("applyImmediately",b)}return arguments.callee.base.apply(this,arguments)},isEditable:YES,selection:function(n,l){var f=this.$input()[0],g,a,c;if(l===undefined){if(f){a=null;c=null;if(!f.value){a=c=0}else{try{if("selectionStart" in f){a=f.selectionStart}if("selectionEnd" in f){c=f.selectionEnd}}catch(h){return null}if(a===null||c===null){var m=document.selection;if(m){var k=m.type;if(k&&(k==="None"||k==="Text")){g=m.createRange();if(!this.get("isTextArea")){var b=g.text.length;a=Math.abs(g.moveStart("character",0-(f.value.length+1)));c=a+b}else{var j=g.duplicate();j.moveToElementText(f);j.setEndPoint("EndToStart",g);a=j.text.length;c=a+g.text.length}}}}}return SC.TextSelection.create({start:a,end:c})}else{return null}}else{if(!l||!l.kindOf||!l.kindOf(SC.TextSelection)){throw"When setting the selection, you must specify an SC.TextSelection instance."}if(f){if(f.setSelectionRange){f.setSelectionRange(l.get("start"),l.get("end"))}else{g=f.createTextRange();a=l.get("start");g.move("character",a);g.moveEnd("character",l.get("end")-a);g.select()}}return l}}.property("fieldValue").cacheable(),displayProperties:["isBrowserFocusable","formattedHint","fieldValue","isEditing","isEditable","leftAccessoryView","rightAccessoryView","isTextArea"],createChildViews:function(){arguments.callee.base.apply(this,arguments);this.accessoryViewObserver()},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),accessoryViewObserver:function(){var g,j=["leftAccessoryView","rightAccessoryView"],a=j.length,b,f,e,h;for(b=0;b<a;b++){f=j[b];e=this["_"+f];h=this.get(f);if(!(e&&h&&(e===h))){if(e){g=e.get("classNames");g=g.without("sc-text-field-accessory-view");e.set("classNames",g);this.removeChild(e);e=null;this["_"+f]=null}if(h){if(h.isClass){h=h.create({layoutView:this})}g=h.get("classNames");var c="sc-text-field-accessory-view";if(g.indexOf(c)<0){g=SC.clone(g);g.push(c);h.set("classNames",g)}this.appendChild(h);this["_"+f]=h}}}}.observes("leftAccessoryView","rightAccessoryView"),layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")}if(a&&this.get("childViewsNeedLayout")){var b=this.get("rightAccessoryView");if(b&&b.get){var c=b.get("layout");if(c){c.left=null;if(!c.right){c.right=0}b.adjust(c)}}}arguments.callee.base.apply(this,arguments)},render:function(f,g){arguments.callee.base.apply(this,arguments);var a,e,c,b;a=this.get("fieldValue");if(SC.none(a)){a=""}a=String(a);f.setClass("not-empty",a.length>0);e=this._getAccessoryViewWidths();c=e.left;b=e.right;if(c){c+="px"}if(b){b+="px"}this._renderField(f,g,a,c,b)},_forceRenderFirstTime:NO,_renderFieldLikeFirstTime:function(){this.set("_forceRenderFirstTime",YES)}.observes("isTextArea"),_renderField:function(g,m,z,k,t){var u=this.get("formattedHint"),b=this.get("hintOnFocus"),p="",l=this.get("maxLength"),x=this.get("isTextArea"),E=this.get("isEnabled"),q=this.get("isEditable"),v=this.get("autoCorrect"),F=this.get("autoCapitalize"),n=this.get("isBrowserFocusable"),I="",f="",e="",H,A,h,D,c,o,j,a,y,w;g.setClass("text-area",x);a=SC.browser.isWebkit&&SC.browser.compare(SC.browser.engineVersion,"532")<0;g.setClass("oldWebKitFieldPadding",a);if(m||this._forceRenderFirstTime){this._forceRenderFirstTime=NO;y=E?(q?"":'readonly="readonly"'):'disabled="disabled"';H=this.get("layerId");I=this.get("spellCheckEnabled")?' spellcheck="true"':' spellcheck="false"';if(v!=null){e=" autocorrect="+(!v?'"off"':'"true"')}if(v!=null){f=" autocapitalize="+(!F?'"off"':'"true"')}if(n){w='tabindex="-1"'}if(SC.platform.input.placeholder&&!b){p=' placeholder="'+u+'"'}if(this.get("shouldRenderBorder")){g.push('<div class="border"></div>')}A="";if(k||t){A='style="';if(k){A+="left:"+k+";"}if(t){A+="right:"+t+";"}A+='"'}g.push('<div class="padding" '+A+">");z=this.get("escapeHTML")?SC.RenderContext.escapeHTML(z):z;if(this._hintON&&!SC.platform.input.placeholder&&(!z||(z&&z.length===0))){z=u;g.setClass("sc-hint",YES)}if(b){var B='<div aria-hidden="true" class="hint '+(x?"":"ellipsis")+'%@">'+u+"</div>";g.push(B.fmt(z?" sc-hidden":""))}j="field";if(x){g.push('<textarea aria-label="'+u+'" aria-multiline="true" class="'+j+'" name="'+H+'" '+y+p+I+e+w+f+' maxlength="'+l+'">'+z+"</textarea></div>")}else{h=this.get("type");if(this.get("isPassword")){h="password"}g.push('<input aria-label="'+u+'" class="'+j+'" type="'+h+'" name="'+H+'" '+y+' value="'+z+'"'+p+I+w+' maxlength="'+l+'" '+e+" "+f+"/></div>")}}else{var s=this.$input(),C=s[0],G=this.get("value");if(b){this.$(".hint")[0].innerHTML=u}else{if(!b){C.placeholder=u}}if(SC.browser.name===SC.BROWSER.ie&&SC.browser.version<=8&&!x){s.css("line-height",this.get("frame").height+"px")}if(!G||(G&&G.length===0)){if(this.get("isPassword")){C.type="password"}if(!SC.platform.input.placeholder&&this._hintON){if(!this.get("isFirstResponder")){g.setClass("sc-hint",YES);s.val(u)}else{g.setClass("sc-hint",NO);s.val("")}}}if(v!=null){s.attr("autoCorrect",!v?"off":"true")}else{s.attr("autoCorrect",null)}if(F!=null){s.attr("autoCapitalize",!F?"off":"true")}else{s.attr("autoCapitalize",null)}if(!b&&SC.platform.input.placeholder){s.attr("placeholder",u)}if(n){s.removeAttr("tabindex")}else{s.attr("tabindex","-1")}c=s[0];if(c){if(!E){c.disabled="true";c.readOnly=null}else{if(!q){c.disabled=null;c.readOnly="true"}else{c.disabled=null;c.readOnly=null}}o=c.parentNode.style;if(k){if(o.left!==k){o.left=k}}else{o.left=null}if(t){if(o.right!==t){o.right=t}}else{o.right=null}}}},_getAccessoryViewWidths:function(){var c={},l=["left","right"],e=l.length,g,h,m,k,a,j,f,b;for(g=0;g<e;g++){h=l[g];m=this["_"+h+"AccessoryView"];if(m&&m.isObservable){b=m.get("frame");if(b){a=b.width;if(a){j=m.get("layout");if(j){f=j[h];a+=f}c[h]=a}}}}return c},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);if(!SC.platform.input.placeholder){this.invokeLast(this._setInitialPlaceHolderIE)}if(this.get("isTextArea")){this.invokeLast(this._addTextAreaEvents)}else{this._addTextAreaEvents();if(SC.browser.isMozilla){var a=this.$input();SC.Event.add(a,"keypress",this,this._firefox_dispatch_keypress)}}if(this.get("hintOnFocus")||(SC.browser.name===SC.BROWSER.ie&&SC.browser.version<=8&&!this.get("isTextArea"))){this.invokeLast(this._fixupTextLayout)}},_fixupTextLayout:function(){var a=this.get("frame").height;if(SC.browser.name===SC.BROWSER.ie&&SC.browser.version<=8&&!this.get("isTextArea")){this.$input().css("line-height",a+"px")}if(this.get("hintOnFocus")&&!this.get("isTextArea")){this.$(".hint").css("line-height",this.$(".hint").outerHeight()+"px")}},_setInitialPlaceHolderIE:function(){if(!SC.platform.input.placeholder&&this._hintON){var a=this.$input(),b=a.val();if(!b||(b&&b.length===0)){a.val(this.get("formattedHint"))}}},_addTextAreaEvents:function(){var a=this.$input();SC.Event.add(a,"focus",this,this._textField_fieldDidFocus);SC.Event.add(a,"blur",this,this._textField_fieldDidBlur);SC.Event.add(a,"select",this,this._textField_selectionDidChange);SC.Event.add(a,"input",this,this._textField_inputDidChange)},willDestroyLayer:function(){arguments.callee.base.apply(this,arguments);var a=this.$input();SC.Event.remove(a,"focus",this,this._textField_fieldDidFocus);SC.Event.remove(a,"blur",this,this._textField_fieldDidBlur);SC.Event.remove(a,"select",this,this._textField_selectionDidChange);SC.Event.remove(a,"keypress",this,this._firefox_dispatch_keypress);SC.Event.remove(a,"input",this,this._textField_inputDidChange)},_textField_fieldDidFocus:function(a){SC.run(function(){this.set("focused",YES);this.fieldDidFocus(a);var b=this.get("value");if(!SC.platform.input.placeholder&&((!b)||(b&&b.length===0))){this._hintON=NO}},this)},_textField_fieldDidBlur:function(a){SC.run(function(){this.set("focused",NO);this.fieldDidBlur(this._origEvent||a);var b=this.get("value");if(!SC.platform.input.placeholder&&!this.get("hintOnFocus")&&((!b)||(b&&b.length===0))){this._hintON=YES}},this)},fieldDidFocus:function(a){this.becomeFirstResponder();this.beginEditing(a);if(this._didHideInterceptForPane){this._didHideInterceptForPane.showTouchIntercept();this._didHideInterceptForPane=null}var b=this.get("pane");if(b&&b.get("hasTouchIntercept")){b.hideTouchIntercept();this._didHideInterceptForPane=this.get("pane")}},fieldDidBlur:function(a){this.resignFirstResponder(a);if(this.get("commitOnBlur")){this.commitEditing(a)}var b=this._didHideInterceptForPane;if(b){b.showTouchIntercept();b=null}},_field_fieldValueDidChange:function(a){if(this.get("focused")){SC.run(function(){this.fieldValueDidChange(NO)},this)}this.updateHintOnFocus()},_textField_inputDidChange:function(){var a=SC.empty(this._fieldValueDidChangeTimer)||!this._fieldValueDidChangeTimer.get("isValid");if(this.get("applyImmediately")&&a){this.invokeLater(this.fieldValueDidChange,10)}},updateHintOnFocus:function(){var a=this.get("hintOnFocus");if(!a){return}if(this.getFieldValue()){this.$(".hint").addClass("sc-hidden")}else{this.$(".hint").removeClass("sc-hidden")}}.observes("value"),_topOffsetForFirefoxCursorFix:3,_firefox_dispatch_keypress:function(a){var e=this.get("selection"),f=this.get("value"),c=f?f.length:0,b;if(!e||((e.get("length")===0&&(e.get("start")===0)||e.get("end")===c))){b=SC.RootResponder.responder;if(a.keyCode===9){return}b.keypress.call(b,a);a.stopPropagation()}},_textField_selectionDidChange:function(){this.notifyPropertyChange("selection")},didBecomeKeyResponderFrom:function(a){if(this.get("isVisibleInWindow")){var b=this.$input()[0];try{if(b){b.focus()}}catch(c){}if(!this._txtFieldMouseDown){this.invokeLast(this._selectRootElement)}}},_selectRootElement:function(){var b=this.$input()[0],a;if(b){a=SC.browser.os===SC.OS.mac&&SC.browser.compare(SC.browser.osVersion,"10.7")===0;if(!(SC.browser.name===SC.BROWSER.safari&&a&&SC.buildLocale==="ko-kr")){b.select()}}else{this._textField_selectionDidChange()}},didLoseKeyResponderTo:function(a){var b=this.$input()[0];if(b){b.blur()}this.invokeLater("scrollToOriginIfNeeded",100)},scrollToOriginIfNeeded:function(){var b=this.get("pane");if(!b){return}var a=b.get("firstResponder");if(!a||!a.get("isTextField")){document.body.scrollTop=document.body.scrollLeft=0}},keyDown:function(a){return this.interpretKeyEvents(a)||NO},insertText:function(c,a){var g=a.which,e=a.keyCode,b=false;if(!SC.platform.input.maxlength&&this.get("isTextArea")){var f=this.get("value");if(f&&((!SC.browser.isMozilla&&g>47)||(SC.browser.isMozilla&&((g>32&&g<43)||g>47)&&!(e>36&&e<41)))&&(f.length>=this.get("maxLength"))){b=true}}if((this.performValidateKeyDown(a)||SC.platform.touch)&&!b){this._isKeyDown=YES;a.allowDefault()}else{a.stop()}if(this.get("applyImmediately")){this._fieldValueDidChangeTimer=this.invokeLater(this.fieldValueDidChange,10)}return YES},insertTab:function(b){if(!this.get("defaultTabbingEnabled")){return NO}var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertNewline:function(a){if(this.get("isTextArea")){a.allowDefault();return YES}return NO},deleteForward:function(a){a.allowDefault();return YES},deleteBackward:function(a){a.allowDefault();return YES},moveLeft:function(a){a.allowDefault();return YES},moveRight:function(a){a.allowDefault();return YES},selectAll:function(a){a.allowDefault();return YES},moveUp:function(a){if(this.get("isTextArea")){a.allowDefault();return YES}return NO},moveDown:function(a){if(this.get("isTextArea")){a.allowDefault();return YES}return NO},keyUp:function(a){if(SC.browser.isMozilla&&a.keyCode===SC.Event.KEY_RETURN){this.fieldValueDidChange()}this.notifyPropertyChange("selection");this._isKeyDown=NO;a.allowDefault();return YES},mouseDown:function(a){var b=this.get("fieldValue");this._txtFieldMouseDown=YES;this.becomeFirstResponder();if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)}},mouseUp:function(a){this._txtFieldMouseDown=NO;this.notifyPropertyChange("selection");if(!this.get("isEnabled")){a.stop();return YES}return arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},mouseWheel:function(a){if(this.get("isTextArea")){a.allowDefault();return YES}else{return NO}},selectStart:function(a){return YES},_inputElementTagName:function(){if(this.get("isTextArea")){return"textarea"}else{return"input"}},_valueObserver:function(){var b=this.get("value"),a;if(b&&b.length>0){this._hintON=NO;a=this.get("maxLength");if(!SC.platform.input.maxlength&&b.length>a){this.set("value",b.substr(0,a))}}else{if(!this.get("hintOnFocus")){this._hintON=YES}}}.observes("value")});sc_require("views/text_field");sc_require("system/utils/misc");sc_require("delegates/inline_text_field");sc_require("mixins/inline_editor");SC.InlineTextFieldView=SC.TextFieldView.extend(SC.InlineEditor,{classNames:["inline-editor"],_topOffsetForFirefoxCursorFix:0,blurOnMouseDown:YES,_updateViewStyle:function(b){var c="",a=SC.getStyle(b,"font-size");if(a&&a.length>0){c=c+"font-size: "+a+" !important; "}a=SC.getStyle(b,"font-family");if(a&&a.length>0){c=c+"font-family: "+a+" !important; "}a=SC.getStyle(b,"font-weight");if(a&&a.length>0){c=c+"font-weight: "+a+" !important; "}a=SC.getStyle(b,"z-index");if(a&&a.length>0){c=c+"z-index: "+a+" !important; "}a=SC.getStyle(b,"line-height");if(a&&a.length>0){c=c+"line-height: "+a+" !important; "}a=SC.getStyle(b,"text-align");if(a&&a.length>0){c=c+"text-align: "+a+" !important; "}a=SC.getStyle(b,"top-margin");if(a&&a.length>0){c=c+"top-margin: "+a+" !important; "}a=SC.getStyle(b,"bottom-margin");if(a&&a.length>0){c=c+"bottom-margin: "+a+" !important; "}a=SC.getStyle(b,"left-margin");if(a&&a.length>0){c=c+"left-margin: "+a+" !important; "}a=SC.getStyle(b,"right-margin");if(a&&a.length>0){c=c+"right-margin: "+a+" !important; "}return c},_updateViewPaddingStyle:function(b){var c="",a=SC.getStyle(b,"padding-top");if(a&&a.length>0){c=c+"top: "+a+" !important; "}a=SC.getStyle(b,"padding-bottom");if(a&&a.length>0){c=c+"bottom: "+a+" !important; "}a=SC.getStyle(b,"padding-left");if(a&&a.length>0){c=c+"left: "+a+" !important; "}a=SC.getStyle(b,"padding-right");if(a&&a.length>0){c=c+"right: "+a+" !important; "}return c},updateStyle:function(e){if(e.length){e=e[0]}var a=document.getElementById("sc-inline-text-field-style"),c=this._updateViewStyle(e),f=this._updateViewPaddingStyle(e),g=".inline-editor input{"+c+"}.inline-editor textarea{"+c+"}.inline-editor .padding{"+f+"}";if(!a){var b=document.getElementsByTagName("head")[0];a=document.createElement("style");a.type="text/css";a.media="screen";a.id="sc-inline-text-field-style";b.appendChild(a)}if(a.styleSheet){a.styleSheet.cssText=g}else{a.innerHTML=g}},positionOverTargetView:function(l,e,c,b,f){var h;if(!c){c=l.get("pane")}if(!f){f=l.$()[0]}if(!b){var j=l.get("frame");b=SC.offset(f);b.height=j.height;b.width=j.width}var k={},a=c.$()[0],g=l.get("layout");k.height=b.height;k.width=b.width;h=SC.browser.isIE&&SC.browser.compare(SC.browser.engineVersion,"7")===0;if(e&&g.left){k.left=b.x-g.left-a.offsetLeft-1;if(h){k.left--}}else{k.left=b.x-a.offsetLeft-1;if(h){k.left--}}if(e&&g.top){k.top=b.y-g.top-a.offsetTop;if(h){k.top=k.top-2}}else{k.top=b.y-a.offsetTop;if(h){k.top=k.top-2}}this.set("layout",k)},multiline:NO,isTextArea:function(){return this.get("multiline")}.property("multiline").cacheable(),beginEditing:function(b,a){if(!b(a)){return NO}var e=a.get("pane"),c=this.get("exampleElement");this.beginPropertyChanges();if(c){if(c.length){c=c[0]}}else{c=a.$()[0]}this.updateStyle(c);this.positionOverTargetView(a,this.get("isCollection"),e,this.get("exampleFrame"),c);this._previousFirstResponder=e?e.get("firstResponder"):null;this.becomeFirstResponder();this.endPropertyChanges();return YES}.enhance(),blurEditor:function(a){if(!this.get("isEditing")){return YES}return this.commitOnBlur?this.commitEditing():this.discardEditing()},_endEditing:function(b){var a=b();if(this.get("isFirstResponder")){var c=this.get("pane");if(c&&this._previousFirstResponder){c.makeFirstResponder(this._previousFirstResponder)}else{this.resignFirstResponder()}}this._previousFirstResponder=null;return a}.enhance(),mouseDown:function(a){arguments.callee.base.call(this,a);return this.get("isEditing")},touchStart:function(a){this.mouseDown(a)},keyDown:function(a){var b=this.interpretKeyEvents(a);this.fieldValueDidChange(true);return !b?NO:b},insertText:null,_scitf_blurInput:function(){var a=this.$input()[0];if(a){a.blur()}a=null},willRemoveFromParent:function(){return this._scitf_blurInput()},willLoseFirstResponder:function(b,a){if(b!==this){return}this._previousFirstResponder=null;this._origEvent=a;this._scitf_blurInput();return this.blurEditor(a)},cancel:function(){this.discardEditing();return YES},insertNewline:function(a){if(this.get("isTextArea")){return arguments.callee.base.apply(this,arguments)}else{this.commitEditing();return YES}},insertTab:function(a){var c=this.target;this.resignFirstResponder();this.commitEditing();if(c){var b=c.get("nextValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES},insertBacktab:function(a){var c=this.target;this.resignFirstResponder();this.commitEditing();if(c){var b=c.get("previousValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES}});SC.mixin(SC.InlineTextFieldView,{inlineEditorDelegate:SC.InlineTextFieldDelegate,label:null,editor:null,beginEditing:function(c){var a,e,b,f,g;if(SC.typeOf(c)===SC.T_HASH){b=c;if(!b.delegate||!b.exampleElement||!b.frame){SC.error("Delegate, exampleElement, and frame options are required.");return NO}c=b.delegate;f=b.value}else{f=c.get("value")}g=SC.beget(c);g.mixin({inlineEditorWillBeginEditing:function(){if(c.inlineEditorWillBeginEditing){c.inlineEditorWillBeginEditing.apply(c,arguments)}},inlineEditorDidBeginEditing:function(){if(c.inlineEditorDidBeginEditing){c.inlineEditorDidBeginEditing.apply(c,arguments)}},inlineEditorWillCommitEditing:function(j,k,h){if(c.inlineEditorWillCommitEditing){c.inlineEditorWillCommitEditing(j,k,h)}if(c.inlineEditorWillEndEditing){c.inlineEditorWillEndEditing(j,k)}},inlineEditorDidCommitEditing:function(j,k,h){if(c.inlineEditorDidCommitEditing){c.inlineEditorDidCommitEditing(j,k,h)}if(c.inlineEditorDidEndEditing){c.inlineEditorDidEndEditing(j,k)}SC.InlineTextFieldView._endEditing()},inlineEditorWillDiscardEditing:function(j,h){if(c.inlineEditorWillDiscardEditing){c.inlineEditorWillDiscardEditing(j,h)}if(c.inlineEditorWillEndEditing){c.inlineEditorWillEndEditing(j,this.get("value"))}},inlineEditorDidDiscardEditing:function(j,h){if(c.inlineEditorDidDiscardEditing){c.inlineEditorDidDiscardEditing(j,h)}if(c.inlineEditorDidEndEditing){c.inlineEditorDidEndEditing(j,this.get("value"))}SC.InlineTextFieldView._endEditing()}});if(c.inlineEditorShouldBeginEditing&&!c.inlineEditorShouldBeginEditing(c,f)){return NO}this.editor=e=this.inlineEditorDelegate.acquireEditor(c);e.set("value",f);if(b){e.set("exampleElement",b.exampleElement);e.set("exampleFrame",b.frame);e.set("multiline",b.multiline);e.set("escapeHTML",b.escapeHTML);e.set("isCollection",b.isCollection);e.set("commitOnBLur",b.commitOnBlur);e.set("validator",b.validator)}if(e){return e.beginEditing(g)}else{return NO}},commitEditing:function(){return this.inlineEditorDelegate.editor?this.inlineEditorDelegate.editor.commitEditing():NO},discardEditing:function(){return this.inlineEditorDelegate.editor?this.inlineEditorDelegate.editor.discardEditing():NO},_endEditing:function(){this.inlineEditorDelegate.releaseEditor(this.editor);this.editor=null}});sc_require("mixins/inline_editable");sc_require("mixins/inline_editor_delegate");sc_require("delegates/inline_text_field");SC.REGULAR_WEIGHT="normal";SC.BOLD_WEIGHT="bold";SC.LabelView=SC.View.extend(SC.Control,SC.InlineEditable,{classNames:["sc-label-view"],displayProperties:["displayTitle","displayHint","escapeHTML","textAlign","fontWeight","icon","needsEllipsis","toolTip"],inlineEditorDelegate:SC.InlineTextFieldDelegate,isEditable:NO,exampleEditor:SC.InlineTextFieldView,fontWeight:null,escapeHTML:YES,escapeHTMLBindingDefault:SC.Binding.oneWay().bool(),localize:NO,localizeBindingDefault:SC.Binding.oneWay().bool(),formatter:null,value:"",hint:null,hintEnabled:function(){return this.get("isEditable")}.property("isEditable").cacheable(),icon:null,textAlign:null,supportsAutoResize:YES,autoResizeLayer:function(){return this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",10),renderDelegateName:"labelRenderDelegate",displayTitle:function(){var h,f;h=this.get("value");f=this.getDelegateProperty("formatter",this.displayDelegate);if(f){var g=(SC.typeOf(f)===SC.T_FUNCTION)?f(h,this):f.fieldValueForObject(h,this);if(!SC.none(g)){h=g}}if(SC.typeOf(h)===SC.T_ARRAY){var e=[];for(var b=0,c=h.get("length");b<c;b++){var a=h.objectAt(b);if(!SC.none(a)&&a.toString){a=a.toString()}e.push(a)}h=e.join(",")}if(!SC.none(h)&&h.toString){h=h.toString()}if(h&&this.getDelegateProperty("localize",this.displayDelegate)){h=SC.String.loc(h)}return h}.property("value","localize","formatter").cacheable(),displayHint:function(){var b=this.get("hint"),a=this.get("isEditable");if(a){if(b&&this.getDelegateProperty("localize",this.displayDelegate)){b=SC.String.loc(b)}}else{b=null}return b}.property("hint","localize","isEditable").cacheable(),hintValue:function(){var a=this.get("hint");return a}.property("hint").cacheable(),doubleClick:function(a){return this.beginEditing()},inlineEditorDidBeginEditing:function(b,c,e,a){this._oldOpacity=this.get("layout").opacity||1;this.adjust("opacity",0);b(c,e,a)}.enhance(),inlineEditorDidEndEditing:function(){this.adjust("opacity",this._oldOpacity);this._oldOpacity=null}});SC.allowsBackspaceToPreviousPage=NO;SC.HORIZONTAL_ORIENTATION="horizontal";SC.VERTICAL_ORIENTATION="vertical";if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat(["__s18_0","__s18_1","__s18_2","__s18_3","__s18_4","__s18_5","__s18_6","__s18_7","__s18_8","__s18_9","__s18_10","__s18_11","__s18_12","__s18_13","__s18_14","__s18_15","__s18_16","__s18_17","__s18_18","__s18_19","__s18_20","__s18_21","__s18_22","__s18_23","__s18_24","__s18_25","__s18_26","__s18_27","__s18_28","__s18_29","__s18_30","__s18_31","__s18_32"]);SC.BORDER_BEZEL="sc-bezel-border";SC.BORDER_BLACK="sc-black-border";SC.BORDER_GRAY="sc-gray-border";SC.BORDER_TOP="sc-top-border";SC.BORDER_BOTTOM="sc-bottom-border";SC.BORDER_NONE=null;SC.Border={borderTop:0,borderRight:0,borderBottom:0,borderLeft:0,borderStyle:SC.BORDER_GRAY,hasBorder:YES,displayProperties:["borderStyle"],_BORDER_REGEXP:(/-border$/),initMixin:function(){this._sc_border_borderStyleDidChange();this._sc_border_borderDimensionsDidChange()},renderMixin:function(a,c){var b=this.get("borderStyle");if(b){if(this._BORDER_REGEXP.exec(b)){a.addClass(b)}else{a.addStyle("border","1px "+b+" solid")}}},_sc_border_borderStyleDidChange:function(){var a=this.get("borderStyle"),b=SC.Border.dimensions[a];if(b){this.beginPropertyChanges();this.set("borderTop",b);this.set("borderRight",b);this.set("borderBottom",b);this.set("borderLeft",b);this.endPropertyChanges()}},_sc_border_borderDimensionsDidChange:function(){var e=this.get("borderTop"),a=this.get("borderRight"),b=this.get("borderBottom"),c=this.get("borderLeft");this.adjust({borderTop:e,borderRight:a,borderBottom:b,borderLeft:c})}.observes("borderTop","borderRight","borderBottom","borderLeft")};SC.mixin(SC.Border,{dimensions:{"sc-bezel-border":1,"sc-black-border":1,"sc-gray-border":1,"sc-top-border":1,"sc-bottom-border":1}});SC.CollectionFastPath={initMixin:function(){this._indexMap={};this._viewMap={}},poolForExampleView:function(a){var b="_pool_"+SC.guidFor(a);if(!this[b]){this[b]=[]}return this[b]},createItemViewFromExampleView:function(c,b){var a=this.createItemView(c,null,b);if(a.isPoolable){a.owningPool=this.poolForExampleView(c)}a.createdFromExampleView=c;return a},configureItemView:function(b,a){b.beginPropertyChanges();b.setIfChanged("content",a.content);b.setIfChanged("contentIndex",a.contentIndex);b.setIfChanged("parentView",a.parentView);b.setIfChanged("layerId",a.layerId);b.setIfChanged("isEnabled",a.isEnabled);b.setIfChanged("isSelected",a.isSelected);b.setIfChanged("outlineLevel",a.outlineLevel);b.setIfChanged("layout",a.layout);b.setIfChanged("disclosureState",a.disclosureState);b.setIfChanged("isVisibleInWindow",a.isVisibleInWindow);b.setIfChanged("isGroupView",a.isGroupView);b.setIfChanged("page",this.page);b.endPropertyChanges()},wakePooledView:function(b,a){this.configureItemView(b,a);if(b.awakeFromPool){b.awakeFromPool(b.owningPool,this)}},allocateItemView:function(e,b){var a;if(e.prototype.isPoolable){var c=this.poolForExampleView(e);if(c.length>0){a=c.pop();this.wakePooledView(a,b)}}if(!a){a=this.createItemViewFromExampleView(e,b)}return a},releaseItemView:function(b){if(!b.isPoolable){b.destroy();return}var a=b.owningPool;a.push(b);if(b.hibernateInPool){b.hibernateInPool(a,this)}},contentIndexIsGroup:function(a,e,c){var f=this.get("contentDelegate");var b=this.get("_contentGroupIndexes"),g=NO;g=b&&b.contains(c);if(g){g=f.contentIndexIsGroup(this,this.get("content"),c)}return g},exampleViewForItem:function(g,e){var b=this.get("contentDelegate"),c=this.get("_contentGroupIndexes"),f,a,h=this.contentIndexIsGroup(this,this.get("content"),e);if(h){f=this.get("contentGroupExampleViewKey");if(f&&g){a=g.get(f)}if(!a){a=this.get("groupExampleView")||this.get("exampleView")}}else{f=this.get("contentExampleViewKey");if(f&&g){a=g.get(f)}if(!a){a=this.get("exampleView")}}return a},setAttributesForItem:function(g,e,c){var b=this.get("contentDelegate"),h=this.contentIndexIsGroup(this,this.get("content"),e),a=this.exampleViewForItem(g,e),f=this.get("content");c.createdFromExampleView=a;c.parentView=this.get("containerView")||this;c.contentIndex=e;c.owner=c.displayDelegate=this;c.content=g;c.page=this.page;c.layerId=this.layerIdFor(e);c.isEnabled=b.contentIndexIsEnabled(this,f,e);c.isSelected=b.contentIndexIsSelected(this,f,e);c.outlineLevel=b.contentIndexOutlineLevel(this,f,e);c.disclosureState=b.contentIndexDisclosureState(this,f,e);c.isVisibleInWindow=this.get("isVisibleInWindow");c.isGroupView=h;c.layout=this.layoutForContentIndex(e);if(!c.layout){c.layout=a.prototype.layout}},mappedViewsForItem:function(a,b){if(!b){b=this._viewMap}return b[SC.guidFor(a)]},mappedViewForItem:function(c,b,e){if(!e){e=this._viewMap}var a=e[SC.guidFor(c)];if(!a){return undefined}return a[b]},mapView:function(f,c,b,h){if(!h){h=this._viewMap}var e=SC.guidFor(f),a=h[e];if(!a){a=h[e]={_length:0}}a[c]=b;a._length++},unmapView:function(f,c,h){if(!h){h=this._viewMap}var e=SC.guidFor(f),a=h[e];if(!a){return}if(a[c]){var b=a[c];delete a[c];a._length--;if(a._length<=0){delete h[e]}}},itemViewForContentIndex:function(b){var e=this.get("content");if(!e){return}var c=e.objectAt(b);var f=this.exampleViewForItem(c,b),a=this._indexMap[b];if(a&&a.createdFromExampleView!==f){this.removeItemView(a);this.unmapView(c,b);a=null}if(!a){a=this.addItemView(f,c,b)}return a},nearestMappedViewIndexForItem:function(f,c,g){var b=this.mappedViewsForItem(f,g);if(!b){return null}var e=null,j=-1,h=0;for(var a in b){a=parseInt(a,10);if(isNaN(a)){continue}h=Math.abs(c-a);if(j<0||h<j){j=h;e=a}}return e},remapItemViews:function(b){var l=this._viewMap,a=(this._viewMap={}),k=(this._indexMap={}),m=[],j=this.get("content"),p;if(!j){return}var g=this._itemsToAdd;b.forEach(function(q){p=j.objectAt(q);var t=this.mappedViewsForItem(p,l);if(t){if(t[q]){var s=t[q];this.unmapView(p,q,l);this.mapView(p,q,s,a);k[q]=s}else{m.push(q)}}else{g.push(q)}},this);for(var o=0,h=m.length;o<h;o++){var n=m[o];p=j.objectAt(n);var f=this.nearestMappedViewIndexForItem(p,n,l),c;if(!SC.none(f)){c=this.mappedViewForItem(p,f,l);var e=this.exampleViewForItem(p,n);if(e===c.createdFromExampleView){this.unmapView(p,f,l);this.mapView(p,n,c,a);k[n]=c}else{g.push(n)}}else{g.push(n)}}return l},reloadIfNeeded:function(g,b){var e=this.get("content"),f;if(!g||!g.isIndexSet){g=this.get("nowShowing")}if(!b){f=this._invalidIndexes;if(!f||!this.get("isVisibleInWindow")){return this}this._invalidIndexes=NO;if(f.isIndexSet&&f.contains(g)){f=YES}if(this.willReload){this.willReload(f===YES?null:f)}}var h=this._itemsToAdd||(this._itemsToAdd=[]);var a=this.remapItemViews(g);this.processRemovals(a);if(f){this.processUpdates(f===YES?g:f)}this.processAdds();if(!b){this.clearDOMPools()}h.length=0;if(!b){var c=this.computeLayout();if(c){this.adjust(c)}if(this.didReload){this.didReload(f===YES?null:f)}}return this},processRemovals:function(c){var g=this.get("content");for(var e in c){var b=c[e];for(var f in b){f=parseInt(f,10);if(isNaN(f)){continue}var a=b[f];if(this._indexMap[f]===a){delete this._indexMap[f]}a._isInCollection=NO;this.removeItemView(a)}}},processUpdates:function(f){var b=this._itemsToUpdate,e=this.get("content"),c,a;f.forEach(function(g){c=e.objectAt(g);if(a=this.mappedViewForItem(c,g)){if(!a._isInCollection){return}var h=this.exampleViewForItem(c,g);this.updateItemView(a,h,c,g)}},this)},processAdds:function(){var g=this.get("content");var h=this._itemsToAdd,b,a=h.length,f,e;for(b=0;b<a;b++){f=h[b];e=g.objectAt(f);var j=this.exampleViewForItem(e,f);var c=this.addItemView(j,e,f)}},clearDOMPools:function(){var a=this._domPools||(this._domPools={});for(var b in a){this.clearDOMPool(a[b])}},domPoolSize:10,clearDOMPool:function(c){var b,a=c.length,e;for(b=this.domPoolSize;b<a;b++){e=c[b];this.removeChild(e);this.releaseItemView(e)}c.length=Math.min(c.length,this.domPoolSize)},domPoolForExampleView:function(e){var c=this._domPools||(this._domPools={}),a=SC.guidFor(e);var b=c[a];if(!b){b=c[a]=[]}return b},itemFromDOMPool:function(c){var b=this.domPoolForExampleView(c);if(b.length<1){return null}var a=b.shift();if(a.wakeFromDOMPool){a.wakeFromDOMPool()}return a},sendToDOMPool:function(a){var b=this.domPoolForExampleView(a.createdFromExampleView);b.push(a);var c=a.get("frame");a.adjust({top:-c.height});a.set("layerId",SC.guidFor(a));if(a.sleepInDOMPool){a.sleepInDOMPool()}},addItemView:function(f,e,c){var a,b=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(e,c,b);if(a=this.itemFromDOMPool(f)){this.configureItemView(a,b);a._isInCollection=YES;this.mapView(e,c,a);this._indexMap[c]=a;return a}a=this.allocateItemView(f,b);this.appendChild(a);a._isInCollection=YES;this.mapView(e,c,a);this._indexMap[c]=a;return a},removeItemView:function(a){if(a.get("layerIsCacheable")){this.sendToDOMPool(a)}else{this.removeChild(a)}a._isInCollection=NO},updateItemView:function(e,f,c,b){if(!e.get("layerIsCacheable")||e.createdFromExampleView!==f){this.unmapView(e,b);delete this._indexMap[b];this.removeItemView(e,c,b);var g=this.addItemView(f,c,b)}else{var a=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(c,b,a);this.configureItemView(e,a)}},_lastTopUpdate:0,_lastLeftUpdate:0,_tolerance:100,touchScrollDidChange:function(h,g){if(Date.now()-this._lastTouchScrollTime<25){return}var j=this.get("clippingFrame");var f=this._inScrollClippingFrame||(this._inScrollClippingFrame={x:0,y:0,width:0,height:0});f.x=j.x;f.y=j.y;f.width=j.width;f.height=j.height;f.x=h;f.y=g;var e=this.contentIndexesInRect(f);if(!e){return}var b=this.get("length"),a=e.get("max"),c=e.get("min");if(a>b||c<0){e=e.copy();e.remove(b,a-b).remove(c,0-c).freeze()}if(this._lastNowShowing){if(e.contains(this._lastNowShowing)&&this._lastNowShowing.contains(e)){return}}this._lastNowShowing=e;this.reloadIfNeeded(e,YES);this._lastTouchScrollTime=Date.now()}};SC.CollectionGroup={classNames:["sc-collection-group"]};SC.CollectionRowDelegate={isCollectionRowDelegate:YES,itemHeight:24,rowSpacing:0,rowPadding:0,rowHeight:function(b,c){var a=this.get("rowPadding");var e=this.get("itemHeight");if(c!==undefined){this.set("itemHeight",c-a*2);return c}return e+a*2}.property("itemHeight","rowPadding"),customRowHeightIndexes:null,contentIndexRowHeight:function(a,b,c){return this.get("rowHeight")}};SC.CollectionViewDelegate={isCollectionViewDelegate:YES,collectionViewSelectionForProposedSelection:function(a,b){return b},collectionViewShouldSelectIndexes:function(a,b,c){return b},collectionViewShouldDeselectIndexes:function(a,b){return b},collectionViewShouldDeleteIndexes:function(a,b){return b},collectionViewDeleteContent:function(a,c,b){if(!c){return NO}if(SC.typeOf(c.destroyAt)===SC.T_FUNCTION){c.destroyAt(b);a.selectPreviousItem(NO,1);return YES}else{if(SC.typeOf(c.removeAt)===SC.T_FUNCTION){c.removeAt(b);a.selectPreviousItem(NO,1);return YES}else{return NO}}},collectionViewShouldBeginDrag:function(a){return YES},collectionViewDragDataTypes:function(a){return[]},collectionViewDragDataForType:function(a,c,b){return null},collectionViewComputeDragOperations:function(a,b,c){return c},collectionViewValidateDragOperation:function(b,e,f,c,a){return(a&SC.DROP_ON)?SC.DRAG_NONE:f},collectionViewPerformDragOperation:function(b,e,f,c,a){return SC.DRAG_NONE},collectionViewDragViewFor:function(a,b){return null},ghostActsLikeCursor:NO};SC.NavigationBuilder={isNavigationBuilder:YES,navigationTransitions:NO,initMixin:function(){var b=SC.Animatable;if(b&&!this.isAnimatable){this.mixin(b)}else{if(!b){SC.Logger.error("SC.NavigationView and SC.NavigationBuilder require SC.Animatable to perform animations, but it is not present. Please ensure your app or framework references it.")}}var a=this.get("navigationTransitions");if(!a&&SC.Animatable){a={left:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"},transform:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"}}}if(SC.Animatable){SC.mixin(this.transitions,a)}},metrics:function(){var a=this.computeFrameWithParentFrame();return a},transform:function(a){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+a+"px,0px,0px)")}else{this.adjust("transform","translate("+a+"px,0px)")}},buildInNavigation:function(){var a=this.metrics();this.disableAnimation();this.transform(this.get("buildDirection")===SC.TO_LEFT?a.width:-a.width);this.enableAnimation();this.invokeLater("transform",10,0)},buildOutNavigation:function(){var a=this.metrics();this.transform(this.get("buildDirection")===SC.TO_LEFT?-a.width:a.width)},buildIn:function(){this.buildInNavigation()},buildOut:function(){this.buildOutNavigation()},resetBuild:function(){this.transform(0)},navigationBuildDidFinish:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}}};SC.Scrollable={isScrollable:true,verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("innerFrame").height}.property("innerFrame"),horizontalPageScroll:function(){return this.get("innerFrame").width}.property("innerFrame"),hasVerticalScroller:function(){return this.get("scrollFrame").height>this.get("innerFrame").height}.property("scrollFrame"),hasHorizontalScroller:function(){return this.get("scrollFrame").width>this.get("innerFrame").width}.property("scrollFrame"),scrollBy:function(a){var b=this.get("scrollFrame");var c=this.get("innerFrame");if(!this.get("hasVerticalScroller")){a.y=0}if(b.height<=c.height){a.y=0}if(!this.get("hasHorizontalScroller")){a.x=0}if(b.width<=c.width){a.x=0}var e={x:b.x-(a.x||0),y:b.y-(a.y||0)};this.set("scrollFrame",e);e=this.get("scrollFrame");return{x:e.x-b.x,y:e.y-b.y}},scrollTo:function(a,b){this.set("scrollFrame",{x:0-a,y:0-b})},scrollToVisible:function(b){var g=this.get("innerFrame");var e=this.get("scrollFrame");var a=this.convertFrameFromView(b.get("frame"),b);a.x-=(g.x+e.x);a.y-=(g.y+e.y);var c={x:0-e.x,y:0-e.y,width:g.width,height:g.height};c.y-=Math.max(0,SC.minY(c)-SC.minY(a));c.x-=Math.max(0,SC.minX(c)-SC.minX(a));c.y+=Math.max(0,SC.maxY(a)-SC.maxY(c));c.x+=Math.max(0,SC.maxX(a)-SC.maxX(c));this.scrollTo(c.x,c.y)},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy({y:this.get("verticalLineScroll")*a}).y},scrollUpLine:function(a){if(a===undefined){a=1}return 0-this.scrollBy({y:0-this.get("verticalLineScroll")*a}).y},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo({y:this.get("horizontalLineScroll")*a}).x},scrollLeftLine:function(a){if(a===undefined){a=1}return 0-this.scrollTo({y:0-this.get("horizontalLineScroll")*a}).x},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy({y:this.get("verticalPageScroll")*a}).y},scrollUpPage:function(a){if(a===undefined){a=1}return 0-this.scrollBy({y:0-this.get("verticalPageScroll")*a}).y},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollTo({y:this.get("horizontalPageScroll")*a}).x},scrollLeftPage:function(a){if(a===undefined){a=1}return 0-this.scrollTo({y:0-this.get("horizontalPageScroll")*a}).x}};SC.ModalPane=SC.Pane.extend({classNames:"sc-modal",_openPaneCount:0,paneWillAppend:function(f){var e;this._openPaneCount++;if(!this.get("isVisibleInWindow")){this.append()}var c=SC.RootResponder.responder.panes;for(var b=0,a=c.length;b<a;b++){e=c[b];if(e!==f){this._hideShowTextfields(e,NO)}}return this},paneDidRemove:function(f){var e;this._openPaneCount--;var c=SC.RootResponder.responder.panes;for(var b=0,a=c.length;b<a;b++){e=c[b];if(e!==f){this._hideShowTextfields(e,YES)}}if(this._openPaneCount<=0){this._openPaneCount=0;if(this.get("isVisibleInWindow")){this.remove()}}},_hideShowTextfields:function(c,b){var a;for(a in SC.View.views){a=SC.View.views[a];if(a!==c&&a.get("pane")===c&&a.get("isTextField")){if(b){if(a._scmp_isBrowserFocusable!==undefined){b=a._scmp_isBrowserFocusable;delete a._scmp_isBrowserFocusable}}else{a._scmp_isBrowserFocusable=a.get("isBrowserFocusable")}a.set("isBrowserFocusable",b)}}},mouseDown:function(b){var a=this.get("owner");if(a&&a.modalPaneDidClick){a.modalPaneDidClick(b)}},touchStart:function(a){this.mouseDown(a)}});sc_require("panes/modal");SC.PanelPane=SC.Pane.extend({isPanelPane:YES,classNames:["sc-panel"],acceptsKeyPane:YES,ariaRole:"dialog",ariaLabel:null,ariaLabelledBy:null,ariaDescribedBy:null,isModal:YES,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.contentView;if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView"),renderDelegateName:"panelRenderDelegate",_modalPane:function(){var a=this.get("modalPane");if(a&&a.isClass){a=a.create({owner:this});this.set("modalPane",a)}return a},appendTo:function(a){var b;if(!this.get("isVisibleInWindow")&&this.get("isModal")&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}return arguments.callee.base.apply(this,arguments)},remove:function(){var b,a=arguments.callee.base.apply(this,arguments);if(this._isShowingModal){this._isShowingModal=NO;if(b=this._modalPane()){b.paneDidRemove(this)}}return a},destroy:function(){var a=this.get("modalPane");if(a&&!a.isClass){a.destroy()}arguments.callee.base.apply(this,arguments)},_isModalDidChange:function(){var b,a=this.get("isModal");if(a){if(!this._isShowingModal&&this.get("isVisibleInWindow")&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}}else{if(this._isShowingModal&&(b=this._modalPane())){this._isShowingModal=NO;b.paneDidRemove(this)}}}.observes("isModal"),paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);this.becomeKeyPane();return a},displayProperties:["ariaLabel","ariaLabelledBy","ariaDescribedBy"]});SC.TOGGLE_BEHAVIOR="toggle";SC.PUSH_BEHAVIOR="push";SC.TOGGLE_ON_BEHAVIOR="on";SC.TOGGLE_OFF_BEHAVIOR="off";SC.HOLD_BEHAVIOR="hold";SC.ButtonView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),classNames:["sc-button-view"],themeName:"square",value:null,toggleOnValue:YES,toggleOffValue:NO,localize:NO,localizeBindingDefault:SC.Binding.bool(),title:"",tooltip:"",contentTitleKey:null,icon:null,contentIconKey:null,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("title","localize").cacheable(),keyEquivalent:null,buttonBehavior:SC.PUSH_BEHAVIOR,holdInterval:100,isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),isCancel:NO,isCancelBindingDefault:SC.Binding.oneWay().bool(),action:null,target:null,supportFocusRing:NO,supportsAutoResize:YES,autoResizeLayer:function(){var a=this.invokeRenderDelegateMethod("getRenderedAutoResizeLayer",this.$());return a||this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",10),_labelMinWidthIE7:0,triggerActionAfterDelay:function(a){if(!this.get("isEnabled")){return NO}this.set("isActive",YES);this.invokeLater("triggerAction",200,a);return YES},triggerAction:function(a){this._action(a,YES);this.didTriggerAction();this.set("isActive",NO)},didTriggerAction:function(){},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("keyEquivalent");if(a){this._defaultKeyEquivalent=a}if(!SC.none(this.get("value"))){this._button_valueDidChange()}},ariaRole:"button",displayProperties:["icon","displayTitle","value","displayToolTip","isDefault","isCancel","escapeHTML","needsEllipsis","tooltip","supportFocusRing","buttonBehavior"],renderDelegateName:"buttonRenderDelegate",contentKeys:{contentValueKey:"value",contentTitleKey:"title",contentIconKey:"icon"},_button_displayObserver:function(){this.displayDidChange()}.observes("title","icon","value"),performKeyEquivalent:function(c,b){if(!this.get("isVisibleInWindow")){return NO}if(!this.get("isEnabled")){return NO}var a=this.get("keyEquivalent");if(a){if(a===c){return this.triggerAction(b)}}else{if((this.get("isDefault")&&(c==="return"))||(this.get("isCancel")&&(c==="escape"))){return this.triggerAction(b)}}return NO},computeIsSelectedForValue:function(e){var b=this.get("toggleOnValue"),c,a;if(SC.typeOf(e)===SC.T_ARRAY){if(e.length===1){c=(e[0]==b)}else{c=null;e.find(function(f){a=(f==b);if(c===null){c=a}else{if(a!==c){c=SC.MIXED_STATE}}return c===SC.MIXED_STATE})}}else{if(e===SC.MIXED_STATE){c=SC.MIXED_STATE}else{c=(e===b)}}return c},_button_valueDidChange:function(){var b=this.get("value"),a=this.computeIsSelectedForValue(b);this.set("isSelected",a)}.observes("value"),_button_isSelectedDidChange:function(){var c=this.get("isSelected"),b=this.computeIsSelectedForValue(this.get("value"));if((c!==SC.MIXED_STATE)&&(b!==c)){var a=(c)?"toggleOnValue":"toggleOffValue";this.set("value",this.get(a))}}.observes("isSelected"),_defaultKeyEquivalent:null,_isDefaultOrCancelDidChange:function(){var b=!!this.get("isDefault"),a=!b&&this.get("isCancel");if(b){this.set("keyEquivalent","return")}else{if(a){this.set("keyEquivalent","escape")}else{this.set("keyEquivalent",this._defaultKeyEquivalent)}}}.observes("isDefault","isCancel"),mouseDown:function(a){var b=this.get("buttonBehavior");if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(b===SC.HOLD_BEHAVIOR){this._action(a)}else{if(!this._isFocused&&(b!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}return YES},mouseExited:function(a){if(this._isMouseDown){this.set("isActive",NO)}return YES},mouseEntered:function(a){if(this._isMouseDown){this.set("isActive",YES)}return YES},mouseUp:function(b){if(this._isMouseDown){this.set("isActive",NO)}this._isMouseDown=false;if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){var a=this.$().within(b.target);if(a&&this.get("isEnabled")){this._action(b)}}return YES},touchStart:function(b){var a=this.get("buttonBehavior");if(!this.get("isEnabled")){return YES}this.set("isActive",YES);if(a===SC.HOLD_BEHAVIOR){this._action(b)}else{if(!this._isFocused&&(a!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}b.preventDefault();return YES},touchesDragged:function(a,b){if(!this.touchIsInBoundary(a)){if(!this._touch_exited){this.set("isActive",NO)}this._touch_exited=YES}else{if(this._touch_exited){this.set("isActive",YES)}this._touch_exited=NO}a.preventDefault();return YES},touchEnd:function(a){this._touch_exited=NO;this.set("isActive",NO);if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.touchIsInBoundary(a)&&this.get("isEnabled")){this._action()}}a.preventDefault();return YES},keyDown:function(b){if(!this.get("isEnabled")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this.triggerActionAfterDelay(b);return YES}b.allowDefault();return NO},_action:function(a,c){switch(this.get("buttonBehavior")){case SC.TOGGLE_BEHAVIOR:var b=this.get("isSelected");if(b){this.set("value",this.get("toggleOffValue"))}else{this.set("value",this.get("toggleOnValue"))}break;case SC.TOGGLE_ON_BEHAVIOR:this.set("value",this.get("toggleOnValue"));break;case SC.TOGGLE_OFF_BEHAVIOR:this.set("value",this.get("toggleOffValue"));break;case SC.HOLD_BEHAVIOR:this._runHoldAction(a,c);break;default:this._runAction(a)}},_runAction:function(a){var c=this.get("action"),e=this.get("target")||null,b;if(c){if(c&&(SC.typeOf(c)===SC.T_FUNCTION)){this.action(a);return}else{b=this.getPath("pane.rootResponder");if(b){b.sendAction(c,e,this,this.get("pane"),null,this)}}}},_runHoldAction:function(a,b){if(this.get("isActive")){this._runAction();if(!b){SC.RunLoop.begin();this.invokeLater("_runHoldAction",this.get("holdInterval"),a);SC.RunLoop.end()}}},didBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$().focus()}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},didAppendToDocument:function(){if(SC.browser.isIE&&SC.browser.compare(SC.browser.engineVersion,"7")===0&&this.get("useStaticLayout")){var f=this.get("layout"),e=this.$(),a=0;if(e&&e[0]&&(a=e[0].clientWidth)&&a!==0&&this._labelMinWidthIE7===0){var c=this.$(".sc-button-label"),j=parseInt(c.css("paddingRight"),0),b=parseInt(c.css("paddingLeft"),0),h=parseInt(c.css("marginRight"),0),g=parseInt(c.css("marginLeft"),0);if(h=="auto"){SC.Logger.log(h+","+g+","+j+","+b)}if(!j&&isNaN(j)){j=0}if(!b&&isNaN(b)){b=0}if(!h&&isNaN(h)){h=0}if(!g&&isNaN(g)){g=0}this._labelMinWidthIE7=a-(j+b)-(h+g);c.css("minWidth",this._labelMinWidthIE7+"px")}else{this.invokeLater(this.didAppendToDocument,1)}}}});SC.ButtonView.CLICK_AND_HOLD_DELAY=SC.browser.isIE?600:300;SC.REGULAR_BUTTON_HEIGHT=24;sc_require("panes/panel");sc_require("views/button");SC.BUTTON1_STATUS="button1";SC.BUTTON2_STATUS="button2";SC.BUTTON3_STATUS="button3";SC.AlertPane=SC.PanelPane.extend({classNames:["sc-alert"],ariaRole:"alertdialog",delegate:null,icon:"sc-icon-alert-48",message:"",ariaLabel:function(){return this.get("message")}.property("message").cacheable(),description:"",displayDescription:function(){var a=this.get("description");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="description">'+a.split("\n").join('</p><p class="description">')+"</p>"}.property("description").cacheable(),caption:"",displayCaption:function(){var a=this.get("caption");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="caption">'+a.split("\n").join('</p><p class="caption">')+"</p>"}.property("caption").cacheable(),button1:SC.outlet("contentView.childViews.1.childViews.1"),button2:SC.outlet("contentView.childViews.1.childViews.0"),button3:SC.outlet("contentView.childViews.2.childViews.0"),buttonThreeWrapper:SC.outlet("contentView.childViews.2"),layout:{top:0.3,centerX:0,width:500},contentView:SC.View.extend({useStaticLayout:YES,layout:{left:0,right:0,top:0,height:"auto"},childViews:[SC.View.extend(SC.StaticLayout,{classNames:["info"],render:function(a,c){var b=this.get("pane");if(b.get("icon")=="blank"){a.addClass("plain")}a.push('<img src="'+SC.BLANK_IMAGE_URL+'" class="icon '+b.get("icon")+'" />');a.begin("h1").attr("class","header").text(b.get("message")||"").end();a.push(b.get("displayDescription")||"");a.push(b.get("displayCaption")||"");a.push('<div class="separator"></div>')}}),SC.View.extend({layout:{bottom:13,height:24,right:18,width:466},childViews:["cancelButton","okButton"],classNames:["text-align-right"],cancelButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,layout:{right:5,height:"auto",width:"auto",bottom:0},isCancel:YES,action:"dismiss",isVisible:NO}),okButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,layout:{left:0,height:"auto",width:"auto",bottom:0},isDefault:YES,action:"dismiss",isVisible:NO})}),SC.View.extend({layout:{bottom:13,height:24,left:18,width:150},childViews:[SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,layout:{left:0,height:"auto",width:"auto",bottom:0},action:"dismiss",isVisible:NO})]})]}),dismiss:function(b){var a=this.delegate,c,e,f;if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b.get("actionKey"))}if(e=(b&&b.get("customAction"))){if(SC.typeOf(e)===SC.T_FUNCTION){e.call(e)}else{c=this.getPath("pane.rootResponder");if(c){f=b.get("customTarget");c.sendAction(e,f||a,this,this,null,this)}}}this.remove()},alertInfoDidChange:function(){var a=this.getPath("contentView.childViews.0");if(a){a.displayDidChange()}}.observes("icon","message","displayDescription","displayCaption")});SC.AlertPane.mixin({show:function(g){g=SC.AlertPane._argumentsCall.apply(this,arguments);var a=this.create(g),l=0,h=g.buttons,f,j,b,e,c;if(h){h.forEach(function(m){l++;if(!m){return}f=a.get("button%@".fmt(l));j=m.title;b=m.action;e=m.target;c=g.themeName||"capsule";f.set("title".fmt(l),j);if(b){f.set("customAction".fmt(l),b)}if(e){f.set("customTarget".fmt(l),e)}f.set("isVisible",!!j);f.set("themeName",c)})}else{f=a.get("button1");f.set("title","OK");f.set("isVisible",YES)}var k=a.append();a.adjust("height",a.childViews[0].$().height());a.updateLayout();return k},warn:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-alert-48";return this.show(a)},info:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-info-48";return this.show(a)},error:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-error-48";return this.show(a)},plain:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="blank";return this.show(a)},_argumentsCall:function(b){var a=b;if(SC.typeOf(b)!==SC.T_HASH){var c=this._normalizeArguments(arguments);a={message:c[0],description:c[1],caption:c[2],delegate:c[7],icon:(c[6]||"sc-icon-alert-48"),themeName:"capsule"};if(SC.typeOf(c[3])===SC.T_STRING||SC.typeOf(c[4])===SC.T_STRING||SC.typeOf(c[5])===SC.T_STRING){a.buttons=[{title:c[3]},{title:c[4]},{title:c[5]}]}}return a},_normalizeArguments:function(b){b=SC.A(b);var a=b.length,c=b[a-1];if(SC.typeOf(c)!==SC.T_STRING){b[a-1]=null}else{c=null}b[7]=c;return b}});sc_require("panes/panel");SC.PalettePane=SC.PanelPane.extend({classNames:["sc-palette"],isModal:NO,modalPane:SC.ModalPane,isAnchored:NO,_mouseOffsetX:null,_mouseOffsetY:null,mouseDown:function(a){var b=this.get("frame");this._mouseOffsetX=b?(b.x-a.pageX):0;this._mouseOffsetY=b?(b.y-a.pageY):0;return YES},mouseDragged:function(a){if(!this.isAnchored){this.set("layout",{width:this.layout.width,height:this.layout.height,left:this._mouseOffsetX+a.pageX,top:this._mouseOffsetY+a.pageY});this.updateLayout()}return YES},touchStart:function(a){return this.mouseDown(a)},touchesDragged:function(a){return this.mouseDragged(a)}});sc_require("panes/palette");SC.PICKER_MENU="menu";SC.PICKER_FIXED="fixed";SC.PICKER_POINTER="pointer";SC.PICKER_MENU_POINTER="menu-pointer";SC.POINTER_LAYOUT=["perfectRight","perfectLeft","perfectTop","perfectBottom"];SC.PickerPane=SC.PalettePane.extend({classNames:["sc-picker"],isAnchored:YES,isModal:YES,pointerPos:"perfectRight",pointerPosX:0,pointerPosY:0,anchorElement:null,anchorCached:null,preferType:null,preferMatrix:null,pointerOffset:null,extraRightOffset:0,removeTarget:null,removeAction:null,repositionOnWindowResize:YES,_anchorView:null,_anchorHTMLElement:null,popup:function(c,b,e,a){if(c){if(c.isView){this._anchorView=c;this._setupScrollObservers(c)}else{this._anchorHTMLElement=c}}this.beginPropertyChanges();if(b){this.set("preferType",b)}if(e){this.set("preferMatrix",e)}if(a){this.set("pointerOffset",a)}this.endPropertyChanges();this.positionPane();this._hideOverflow();return this.append()},positionPane:function(g){g=g&&this.get("anchorCached");var b=g?this.get("anchorCached"):this.get("anchorElement"),c=this.get("preferType"),e=this.get("preferMatrix"),f=this.get("layout"),a;if(b){if(!g){b=this.computeAnchorRect(b);this.set("anchorCached",b)}if(b.x===0&&b.y===0){return}a=SC.cloneRect(b);if(c){switch(c){case SC.PICKER_MENU:case SC.PICKER_FIXED:if(!e||e.length!==3){this.set("preferMatrix",[1,4,3])}a.x+=((this.preferMatrix[2]===0)?a.width:0)+this.preferMatrix[0];a.y+=((this.preferMatrix[2]===3)?a.height:0)+this.preferMatrix[1];break;default:a.y+=a.height;break}}else{a.y+=a.height}a=this.fitPositionToScreen(a,this.get("frame"),b);this.adjust({width:a.width,height:a.height,left:a.x,top:a.y})}else{this.adjust({width:f.width,height:f.height,centerX:0,centerY:0})}this.updateLayout();return this},computeAnchorRect:function(c){var f,b,e,a=SC.RootResponder.responder.computeWindowSize();if(c.getBoundingClientRect){f=c.getBoundingClientRect();b={x:f.left,y:f.top,width:f.width,height:f.height};if(b.width===undefined||b.height===undefined){e=SC.$(c);b.width=e.outerWidth();b.height=e.outerHeight()}}else{b=SC.offset(c);e=SC.$(c);b.width=e.outerWidth();b.height=e.outerHeight()}b.height=(a.height-b.y)<b.height?(a.height-b.y):b.height;if(!SC.browser.isIE&&window.scrollX>0||window.scrollY>0){b.x+=window.scrollX;b.y+=window.scrollY}else{if(SC.browser.isIE&&(document.documentElement.scrollTop>0||document.documentElement.scrollLeft>0)){b.x+=document.documentElement.scrollLeft;b.y+=document.documentElement.scrollTop}}return b},fitPositionToScreen:function(j,c,b){var a=SC.RootResponder.responder.computeWindowSize(),h={x:0,y:0,width:a.width,height:a.height};var e=SC.RootResponder.responder.mainPane;if(e){var f=e.layout.minWidth,g=e.layout.minHeight;if(f&&h.width<f){h.width=e.layout.minWidth}if(g&&h.height<g){h.height=e.layout.minHeight}}c.x=j.x;c.y=j.y;if(this.preferType){switch(this.preferType){case SC.PICKER_MENU:c=this.fitPositionToScreenMenu(h,c,this.get("isSubMenu"));break;case SC.PICKER_MENU_POINTER:this.setupPointer(b);c=this.fitPositionToScreenMenuPointer(h,c,b);break;case SC.PICKER_POINTER:this.setupPointer(b);c=this.fitPositionToScreenPointer(h,c,b);break;case SC.PICKER_FIXED:break;default:break}}else{c=this.fitPositionToScreenDefault(h,c,b)}this.displayDidChange();return c},fitPositionToScreenDefault:function(c,e,b){if(SC.maxX(e)>c.width){var g=Math.max(SC.maxX(b),e.width);e.x=Math.min(g,c.width)-e.width}if(SC.minX(e)<0){e.x=SC.minX(Math.max(b,0));if(SC.maxX(e)>c.width){e.x=Math.max(0,c.width-e.width)}}if(SC.maxY(e)>c.height){g=Math.max((b.y-e.height),0);if(g>c.height){e.y=Math.max(0,c.height-e.height)}else{e.y=g}}if(SC.minY(e)<0){g=Math.min(SC.maxY(b),(c.height-b.height));e.y=Math.max(g,0)}return e},fitPositionToScreenMenu:function(c,b,a){if(a){b.x-=this.get("submenuOffsetX");b.y-=Math.floor(this.get("menuHeightPadding")/2)}if((b.x+b.width)>(c.width-20)){if(a){b.x=b.x-(b.width*2)}else{b.x=c.width-b.width-20}}if(b.x<7){b.x=7}if(b.y<7){b.height+=b.y;b.y=7}if(b.height+b.y+35>=c.height){if(b.height+50>=c.height){b.y=SC.MenuPane.VERTICAL_OFFSET;b.height=c.height-(SC.MenuPane.VERTICAL_OFFSET*2)}else{b.y+=(c.height-(b.height+b.y+35))}}return b},fitPositionToScreenMenuPointer:function(c,e,b){e=this.fitPositionToScreenPointer(c,e,b);if(e.height+e.y+35>=c.height){e.height=c.height-e.y-(SC.MenuPane.VERTICAL_OFFSET*2)}return e},fitPositionToScreenPointer:function(p,n,o){var j=[this.pointerOffset[0],this.pointerOffset[1],this.pointerOffset[2],this.pointerOffset[3]];var g=[[o.x+o.width+j[0],o.y+parseInt(o.height/2,0)-40],[o.x-n.width+j[1],o.y+parseInt(o.height/2,0)-40],[o.x+parseInt((o.width/2)-(n.width/2),0),o.y-n.height+j[2]],[o.x+parseInt((o.width/2)-(n.width/2),0),o.y+o.height+j[3]]];var c=[[o.x+o.width+n.width+j[0],o.y+parseInt(o.height/2,0)+n.height-24],[o.x+j[1],o.y+parseInt(o.height/2,0)+n.height-24],[o.x+parseInt((o.width/2)-(n.width/2),0)+n.width,o.y+j[2]],[o.x+parseInt((o.width/2)-(n.width/2),0)+n.width,o.y+o.height+n.height+j[3]]];var h=[[g[0][1]>0?0:0-g[0][1],c[0][0]<p.width?0:c[0][0]-p.width,c[0][1]<p.height?0:c[0][1]-p.height,g[0][0]>0?0:0-g[0][0]],[g[1][1]>0?0:0-g[1][1],c[1][0]<p.width?0:c[1][0]-p.width,c[1][1]<p.height?0:c[1][1]-p.height,g[1][0]>0?0:0-g[1][0]],[g[2][1]>0?0:0-g[2][1],c[2][0]<p.width?0:c[2][0]-p.width,c[2][1]<p.height?0:c[2][1]-p.height,g[2][0]>0?0:0-g[2][0]],[g[3][1]>0?0:0-g[3][1],c[3][0]<p.width?0:c[3][0]-p.width,c[3][1]<p.height?0:c[3][1]-p.height,g[3][0]>0?0:0-g[3][0]]];var e=this.preferMatrix;if(e[4]===-1){n.x=o.x+parseInt(o.width/2,0);n.y=o.y+parseInt(o.height/2,0)-parseInt(n.height/2,0);this.set("pointerPos",SC.POINTER_LAYOUT[0]+" fallback");this.set("pointerPosY",parseInt(n.height/2,0)-40)}else{n.x=g[e[4]][0];n.y=g[e[4]][1];this.set("pointerPos",SC.POINTER_LAYOUT[e[4]]);this.set("pointerPosY",0)}this.set("pointerPosX",0);for(var k=0,b,l=SC.POINTER_LAYOUT.length;k<l;k++){b=e[k];if(h[b][0]===0&&h[b][1]===0&&h[b][2]===0&&h[b][3]===0){if(e[4]!==b){n.x=g[b][0];n.y=g[b][1];this.set("pointerPosY",0);this.set("pointerPos",SC.POINTER_LAYOUT[b])}k=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&h[b][0]===0&&h[b][1]===0&&h[b][2]<n.height-91&&h[b][3]===0){if(e[4]!==b){n.x=g[b][0];this.set("pointerPos",SC.POINTER_LAYOUT[b])}n.y=g[b][1]-h[b][2];this.set("pointerPosY",h[b][2]);k=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&h[b][0]===0&&h[b][1]===0&&h[b][2]<=n.height-51&&h[b][3]===0){if(e[4]!==b){n.x=g[b][0]}n.y=g[b][1]-(n.height-51);this.set("pointerPosY",(n.height-53));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-low");k=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&h[b][0]===0&&h[b][1]<=parseInt(n.width/2,0)-this.get("extraRightOffset")&&h[b][2]===0&&h[b][3]===0){if(e[4]!==b){n.y=g[b][1]}n.x=g[b][0]-(parseInt(n.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-right");k=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&h[b][0]===0&&h[b][1]===0&&h[b][2]===0&&h[b][3]<=parseInt(n.width/2,0)-this.get("extraRightOffset")){if(e[4]!==b){n.y=g[b][1]}n.x=g[b][0]+(parseInt(n.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-left");k=SC.POINTER_LAYOUT.length}}}}}}return n},setupPointer:function(g){var h=this.pointerOffset,f=SC.PickerPane;if(!h||h.length!==4){if(this.get("preferType")==SC.PICKER_MENU_POINTER){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("pointerOffset",f.TINY_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.SMALL_CONTROL_SIZE:this.set("pointerOffset",f.SMALL_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.REGULAR_CONTROL_SIZE:this.set("pointerOffset",f.REGULAR_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.LARGE_CONTROL_SIZE:this.set("pointerOffset",f.LARGE_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.HUGE_CONTROL_SIZE:this.set("pointerOffset",f.HUGE_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break}}else{var e=(g.width<16)?((g.width<4)?9:6):0,b=(g.height<16)?((g.height<4)?9:6):0,c=f.PICKER_POINTER_OFFSET;var j=[c[0]+e,c[1]-e,c[2]-b,c[3]+b];this.set("pointerOffset",j);this.set("extraRightOffset",f.PICKER_EXTRA_RIGHT_OFFSET)}}if(!this.preferMatrix||this.preferMatrix.length!==5){this.set("preferMatrix",this.get("preferType")===SC.PICKER_MENU_POINTER?[3,2,1,0,3]:[0,1,2,3,2])}},displayProperties:["preferType","pointerPos","pointerPosY"],renderDelegateName:"pickerRenderDelegate",modalPaneDidClick:function(a){var e=this.get("frame"),g=this.get("removeTarget")||null,c=this.get("removeAction"),b=this.get("rootResponder");if(!this.clickInside(e,a)){if(c){b.sendAction(c,g,this,this,null,this)}else{this.remove()}return YES}return NO},mouseDown:function(a){return this.modalPaneDidClick(a)},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},windowSizeDidChange:function(b,a){if(this.repositionOnWindowResize){this.positionPane()}},remove:function(){if(this.get("isVisibleInWindow")&&this.get("isPaneAttached")){this._withdrawOverflowRequest()}this._removeScrollObservers();return arguments.callee.base.apply(this,arguments)},anchorElement:function(a,b){var c;if(b===undefined){c=this._anchorView;return c?c.get("layer"):this._anchorHTMLElement}else{if(!b){throw"You must set 'anchorElement' to either a view or a DOM element"}else{if(b.isView){this._anchorView=b;this._anchorHTMLElement=null}else{this._anchorView=null;this._anchorHTMLElement=b}}}}.property("layer").cacheable(),_hideOverflow:function(){var b=SC.$(document.body),a=SC.$(".sc-main"),e=parseInt(a.css("minWidth"),0),f=parseInt(a.css("minHeight"),0),c=SC.RootResponder.responder.get("currentWindowSize");if(c.width>=e&&c.height>=f){SC.bodyOverflowArbitrator.requestHidden(this)}},_withdrawOverflowRequest:function(){SC.bodyOverflowArbitrator.withdrawRequest(this)},_getScrollViewOfView:function(b){var a=b;while(YES){if(!a){return null}if(a.isScrollable){return a}a=a.get("parentView")}},_setupScrollObservers:function(b){var a=this._getScrollViewOfView(b);if(a){a.addObserver("horizontalScrollOffset",this,this._scrollOffsetDidChange);a.addObserver("verticalScrollOffset",this,this._scrollOffsetDidChange);this._scrollView=a}},_removeScrollObservers:function(){var a=this._scrollView;if(a){a.removeObserver("horizontalScrollOffset",this,this._scrollOffsetDidChange);a.removeObserver("verticalScrollOffset",this,this._scrollOffsetDidChange)}},_scrollOffsetDidChange:function(){this.positionPane()}});SC.PickerPane.PICKER_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.PICKER_EXTRA_RIGHT_OFFSET=20;SC.PickerPane.TINY_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.SMALL_PICKER_MENU_POINTER_OFFSET=[9,-9,-8,8];SC.PickerPane.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET=11;SC.PickerPane.REGULAR_PICKER_MENU_POINTER_OFFSET=[9,-9,-12,12];SC.PickerPane.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.LARGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-16,16];SC.PickerPane.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=17;SC.PickerPane.HUGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.SeparatorView=SC.View.extend({classNames:["sc-separator-view"],tagName:"span",layoutDirection:SC.LAYOUT_HORIZONTAL,render:function(a,b){if(b){a.push("<span></span>")}a.addClass(this.get("layoutDirection"))}});sc_require("views/button");sc_require("views/separator");SC.MenuItemView=SC.View.extend(SC.ContentDisplay,{classNames:["sc-menu-item"],displayProperties:["title","isEnabled","isSeparator","isChecked"],ariaRole:"menuitem",escapeHTML:YES,acceptsFirstResponder:YES,blocksIEDeactivate:YES,isContextMenuEnabled:NO,content:null,isSeparator:function(){return this.getContentProperty("itemSeparatorKey")===YES}.property("content").cacheable(),isEnabled:function(){return this.getContentProperty("itemIsEnabledKey")!==NO&&this.getContentProperty("itemSeparatorKey")!==YES}.property("content.isEnabled").cacheable(),isChecked:function(){return this.getContentProperty("itemCheckboxKey")}.property(),subMenu:function(){var c=this.get("content"),b,a;if(!c){return null}a=this.get("parentMenu");b=c.get(a.itemSubMenuKey);if(b){if(SC.kindOf(b,SC.MenuPane)){b.set("isModal",NO);b.set("isSubMenu",YES);b.set("parentMenu",a);return b}else{return SC.MenuPane.create({layout:{width:200},items:b,isModal:NO,isSubMenu:YES,parentMenu:a,controlSize:a.get("controlSize"),exampleView:a.get("exampleView")})}}return null}.property("content").cacheable(),hasSubMenu:function(){return !!this.get("subMenu")}.property("subMenu").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.contentDidChange()},render:function(b,j){var c=this.get("content"),a,g,f=this.get("parentMenu"),e=this.get("itemWidth")||f.layout.width,h=this.get("itemHeight")||SC.DEFAULT_MENU_ITEM_HEIGHT;this.set("itemWidth",e);this.set("itemHeight",h);if(this.get("isSeparator")){b.attr("role","separator")}else{if(this.get("isChecked")){b.attr("role","menuitemcheckbox");b.attr("aria-checked",true)}}b=b.begin("a").addClass("menu-item");if(this.get("isSeparator")){b.push('<span class="separator"></span>');b.addClass("disabled")}else{g=c.get(f.itemIconKey);if(g){this.renderImage(b,g);b.addClass("has-icon")}g=this.get("title");if(SC.typeOf(g)!==SC.T_STRING){g=g.toString()}this.renderLabel(b,g);if(this.get("isChecked")){b.push('<div class="checkbox"></div>')}if(this.get("hasSubMenu")){this.renderBranch(b)}g=this.getContentProperty("itemShortCutKey");if(g){this.renderShortcut(b,g)}}b=b.end()},renderImage:function(b,e){var a,c;if(e&&SC.ImageView.valueIsUrl(e)){a=e;c=""}else{c=e;a=SC.BLANK_IMAGE_URL}b.begin("img").addClass("image").addClass(c).attr("src",a).end()},renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)}b.push("<span class='value ellipsis'>"+a+"</span>")},renderBranch:function(a){a.push('<span class="has-branch"></span>')},renderShortcut:function(b,a){b.push('<span class = "shortcut">'+a+"</span>")},showSubMenu:function(){var a=this.get("subMenu");if(a){a.set("mouseHasEntered",NO);a.popup(this,[0,0,0])}this._subMenuTimer=null},title:function(){var b=this.getContentProperty("itemTitleKey"),a=this.getPath("parentMenu.localize");if(a&&b){b=SC.String.loc(b)}return b||""}.property("content.title").cacheable(),getContentProperty:function(b){var a=this.get("content"),c=this.get("parentMenu");if(a){return a.get(c.get(b))}},mouseUp:function(b){var a;a=this.getPath("parentMenu.rootMenu.targetMenuItem");if(a){a.performAction()}return YES},performAction:function(){if(!this.get("isEnabled")){this.getPath("parentMenu.rootMenu").remove();return YES}if(this.get("hasSubMenu")){return NO}var b=this.getContentProperty("itemDisableMenuFlashKey"),a;if(b){this.sendAction()}else{this._flashCounter=0;a=this.getPath("parentMenu.rootMenu");a._isFlashing=YES;this.invokeLater(this.flashHighlight,25);this.invokeLater(this.sendAction,150)}return YES},sendAction:function(){var c=this.getContentProperty("itemActionKey"),e=this.getContentProperty("itemTargetKey"),b=this.getPath("parentMenu.rootMenu"),a;this.getPath("parentMenu.rootMenu").remove();b._isFlashing=NO;c=(c===undefined)?b.get("action"):c;e=(e===undefined)?b.get("target"):e;b.set("selectedItem",this.get("content"));if(SC.typeOf(c)===SC.T_FUNCTION){c.apply(e,[b])}else{a=this.getPath("pane.rootResponder")||SC.RootResponder.responder;if(a){a.sendAction(c,e,b)}}},flashHighlight:function(){var a=this._flashCounter,b=this.$();if(a%2===0){b.addClass("focus")}else{b.removeClass("focus")}if(a<=2){this.invokeLater(this.flashHighlight,50);this._flashCounter++}},mouseDown:function(a){return YES},mouseEntered:function(a){var c=this.get("parentMenu"),b=c.get("rootMenu");if(b._isFlashing){return}c.set("mouseHasEntered",YES);this.set("mouseHasEntered",YES);c.set("currentMenuItem",this);if(this.get("isEnabled")){this.becomeFirstResponder()}if(this.get("hasSubMenu")){this._subMenuTimer=this.invokeLater(this.showSubMenu,100)}return YES},mouseExited:function(a){var b,c;if(this.get("hasSubMenu")){c=this._subMenuTimer;if(c){c.invalidate()}else{this.invokeLater(this.checkMouseLocation,100)}}else{b=this.get("parentMenu");if(b.get("currentMenuItem")===this){b.set("currentMenuItem",null)}}return YES},touchStart:function(a){this.mouseEntered(a);return YES},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},checkMouseLocation:function(){var b=this.get("subMenu"),c=this.get("parentMenu"),a,e;if(!b.get("mouseHasEntered")){a=c.get("currentMenuItem");if(a===this||a===null){e=c.get("previousMenuItem");if(e){e.resignFirstResponder()}this.resignFirstResponder();b.remove()}}},moveUp:function(b,a){var c=this.get("parentMenu");if(c){c.moveUp(this)}return YES},moveDown:function(b,a){var c=this.get("parentMenu");if(c){c.moveDown(this)}return YES},moveRight:function(b,a){this.showSubMenu();return YES},insertText:function(b,a){var c=this.get("parentMenu");if(c){c.insertText(b,a)}},keyDown:function(a){return this.interpretKeyEvents(a)},keyUp:function(a){return YES},cancel:function(a){this.getPath("parentMenu.rootMenu").remove();return YES},didBecomeFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",this)}},willLoseFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",null);b.set("previousSelectedMenuItem",this)}},insertNewline:function(b,a){this.mouseUp(a)},closeParent:function(){this.$().removeClass("focus");var a=this.get("parentMenu");if(a){a.remove()}},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},contentDidChange:function(){var b=this.get("content"),a=this._content;if(b===a){return}var c=this.contentPropertyDidChange;if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")}.observes("content"),contentPropertyDidChange:function(h,k){var b=this.get("parentMenu");if(!b){return}var a=SC.MenuItemView._contentPropertyToMenuItemPropertyMapping,j=SC.keys(a),f,g,e,c;if(k==="*"){for(f=0,g=j.length;f<g;++f){e=j[f];c=a[e];this.notifyPropertyChange(c)}}else{for(f=0,g=j.length;f<g;++f){e=j[f];if(b.get(e)===k){c=a[e];this.notifyPropertyChange(c)}}}}});SC.MenuItemView._contentPropertyToMenuItemPropertyMapping={itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemSeparatorKey:"isSeparator",itemSubMenuKey:"subMenu"};sc_require("panes/picker");sc_require("views/menu_item");SC.MenuPane=SC.PickerPane.extend({classNames:["sc-menu"],ariaRole:"menu",items:[],controlSize:SC.REGULAR_CONTROL_SIZE,itemHeight:SC.propertyFromRenderDelegate("itemHeight",20),itemSeparatorHeight:SC.propertyFromRenderDelegate("itemSeparatorHeight",9),menuHeight:0,menuHeightPadding:SC.propertyFromRenderDelegate("menuHeightPadding",6),submenuOffsetX:SC.propertyFromRenderDelegate("submenuOffsetX",2),selectedItem:null,exampleView:SC.MenuItemView,anchor:null,isSubMenu:NO,localize:YES,acceptsMenuPane:YES,isContextMenuEnabled:NO,popup:function(b,c){var a;this.beginPropertyChanges();if(b){if(b.isView){this._anchorView=b;this._setupScrollObservers(b)}else{this._anchorHTMLElement=b}}if(c){this.set("preferMatrix",c)}this.adjust("height",this.get("menuHeight"));this.positionPane();this.set("defaultResponder",this);this.endPropertyChanges();this._hideOverflow();this.append()},remove:function(){var a=this.get("parentMenu");this.set("currentMenuItem",null);this.closeOpenMenus();this.resignMenuPane();if(a){a.becomeMenuPane()}return arguments.callee.base.apply(this,arguments)},itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemValueKey:"value",itemIconKey:"icon",itemHeightKey:"height",itemSubMenuKey:"subMenu",itemSeparatorKey:"isSeparator",itemTargetKey:"target",itemActionKey:"action",itemCheckboxKey:"checkbox",itemShortCutKey:"shortcut",itemKeyEquivalentKey:"keyEquivalent",itemDisableMenuFlashKey:"disableMenuFlash",itemLayerIdKey:"layerId",itemExampleViewKey:"exampleView",menuItemKeys:["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemSeparatorKey","itemActionKey","itemCheckboxKey","itemShortCutKey","itemHeightKey","itemSubMenuKey","itemKeyEquivalentKey","itemTargetKey","itemLayerIdKey"],preferType:SC.PICKER_MENU,isModal:YES,_menuView:null,init:function(){return arguments.callee.base.apply(this,arguments)},displayProperties:["controlSize"],renderDelegateName:"menuRenderDelegate",createChildViews:function(){var b,a,c;b=this._menuScrollView=this.createChildView(SC.MenuScrollView,{borderStyle:SC.BORDER_NONE,controlSize:this.get("controlSize")});a=this._menuView=SC.View.create({parentViewDidResize:function(){this.notifyPropertyChange("frame")},viewDidResize:function(){}});c=this.get("menuItemViews");a.set("layout",{top:0,left:0,height:this.get("menuHeight")});a.replaceAllChildren(c);b.set("contentView",a);this.childViews=[b];return this},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);a.panes.add(this);this.set("currentWindowSize",a.computeWindowSize());this.set("isPaneAttached",YES);this.parentViewDidChange();this._notifyDidAppendToDocument();this.becomeMenuPane();return this},becomeMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(this)}return this},resignMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(null)}return this},menuItemViews:function(){return this.createMenuItemViews()}.property("displayItems").cacheable(),createMenuItemViews:function(){var k=[],t=this.get("displayItems"),a=this.get("exampleView"),w,e,n,m,f,s,p,h,b,l,u,c,g,o,j,q,y,x,v;if(!t){return k}p=this.get("itemHeightKey");h=this.get("itemSeparatorKey");m=this.get("itemExampleViewKey");b=this.get("itemHeight");g=this.get("itemKeyEquivalentKey");l=this.get("itemSeparatorHeight");y=this.get("itemLayerIdKey");c=Math.floor(this.get("menuHeightPadding")/2);u=c;j=this.menuItemKeys.map(SC._menu_fetchKeys,this);v=t.get("length");for(q=0;q<v;q++){w=t[q];s=w.get(p);if(!s){s=w.get(h)?l:b}x={layout:{height:s,top:u},contentDisplayProperties:j,content:w,parentMenu:this};if(w.get(y)){x.layerId=w.get(y)}f=w.get(m);if(f){e=f}else{e=a}n=this._menuView.createChildView(e,x);k[q]=n;u+=s;o=w.get(g);if(o){if(SC.typeOf(o)===SC.T_ARRAY){o.forEach(function(z){this._keyEquivalents[z]=n},this)}else{this._keyEquivalents[o]=n}}}this.set("menuHeight",u+c);return k},menuItemViewForContentIndex:function(a){var b=this.get("menuItemViews");if(!b){return undefined}return b.objectAt(a)},_keyEquivalents:{},rootMenu:function(){if(this.get("isSubMenu")){return this.getPath("parentMenu.rootMenu")}return this}.property("isSubMenu").cacheable(),windowSizeDidChange:function(b,a){this.remove();return arguments.callee.base.apply(this,arguments)},displayItems:function(){var e=this.get("items"),c=this.get("localize"),j=this.get("itemHeight"),b,f=[],a,g,h;if(!e){return null}b=e.get("length");for(a=0;a<b;a++){g=e.objectAt(a);if(!g){continue}h=SC.typeOf(g);if(h===SC.T_STRING){g=SC.Object.create({title:g,value:g,isEnabled:YES})}else{if(h===SC.T_HASH){g=SC.Object.create(g)}else{if(h===SC.T_ARRAY){g=this.convertArrayMenuItemToObject(g)}}}g.contentIndex=a;f.push(g)}return f}.property("items").cacheable(),_sc_menu_itemsDidChange:function(){var a=this.get("menuItemViews");this._menuView.replaceAllChildren(a);this._menuView.adjust("height",this.get("menuHeight"))}.observes("items"),convertArrayMenuItemToObject:function(g){SC.Logger.warn("Support for Array-based menu items has been deprecated.  Please update your menus to use a hash.");var f,c=SC._menu_fetchKeys,b=SC._menu_fetchItem,j,e=SC.Object.create(),a,h;f=this.menuItemKeys.map(c,this);e[f[0]]=g[0];e[f[1]]=g[1];e[f[2]]=g[2];e[f[3]]=g[3];e[f[4]]=g[4];e[f[5]]=g[5];e[f[6]]=g[6];e[f[7]]=g[7];e[f[8]]=g[8];e[f[9]]=g[9];e[f[10]]=g[10];e[f[11]]=g[11];e[f[12]]=g[12];return e},currentMenuItem:function(a,b){if(b!==undefined){if(this._currentMenuItem!==null){this.set("previousMenuItem",this._currentMenuItem)}this._currentMenuItem=b;this.setPath("rootMenu.targetMenuItem",b);return b}return this._currentMenuItem}.property().cacheable(),_sc_menu_currentMenuItemDidChange:function(){var a=this.get("currentMenuItem"),b=this.get("previousMenuItem");if(b){if(b.get("hasSubMenu")&&a===null){}else{b.resignFirstResponder();this.closeOpenMenusFor(b)}}if(a&&a.get("isEnabled")){a.scrollToVisible()}}.observes("currentMenuItem"),closeOpenMenusFor:function(a){if(!a){return}var b=a.get("parentMenu");while(b&&a){b=a.get("subMenu");if(b){b.remove();a.resignFirstResponder();a=b.get("previousMenuItem")}}},closeOpenMenus:function(){this.closeOpenMenusFor(this.get("previousMenuItem"))},mouseDown:function(a){this.modalPaneDidClick(a);return YES},mouseEntered:function(a){this.set("mouseHasEntered",YES)},keyUp:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},moveUp:function(){var c=this.get("currentMenuItem"),e=this.get("menuItemViews"),b,f,a;if(!c){a=e.get("length")-1}else{b=c.getPath("content.contentIndex");if(b===0){return YES}a=b-1}while(a>=0){if(e[a].get("isEnabled")){this.set("currentMenuItem",e[a]);e[a].becomeFirstResponder();break}a--}return YES},moveDown:function(){var e=this.get("currentMenuItem"),f=this.get("menuItemViews"),b=f.get("length"),c,g,a;if(!e){a=0}else{c=e.getPath("content.contentIndex");if(c===b){return YES}a=c+1}while(a<b){if(f[a].get("isEnabled")){this.set("currentMenuItem",f[a]);f[a].becomeFirstResponder();break}a++}return YES},moveToBeginningOfDocument:function(){var c=this.get("menuItemViews"),b=c.get("length"),a=0;while(a<b){if(c[a].get("isEnabled")){this.set("currentMenuItem",c[a]);c[a].becomeFirstResponder();break}++a}return YES},moveToEndOfDocument:function(){var c=this.get("menuItemViews"),b=c.get("length"),a=b-1;while(a>=0){if(c[a].get("isEnabled")){this.set("currentMenuItem",c[a]);c[a].becomeFirstResponder();break}--a}return YES},pageDown:function(){var c=this.get("currentMenuItem"),j,f=this.get("menuItemViews"),b=f.get("length"),a=0,h,e=0,g;if(this._menuScrollView&&this._menuScrollView.verticalScrollerView2){if(c){a=c.getPath("content.contentIndex")}h=a;g=this._menuScrollView.get("verticalPageScroll");for(a;a<b;a++){j=f[a];e+=j.get("layout").height;if(e>g){break}else{if(j.get("isEnabled")){h=a}}}j=f[h];this.set("currentMenuItem",j);j.becomeFirstResponder()}else{this.moveToEndOfDocument()}return YES},pageUp:function(){var c=this.get("currentMenuItem"),j,f=this.get("menuItemViews"),b=f.get("length"),a=b-1,h,e=0,g;if(this._menuScrollView&&this._menuScrollView.verticalScrollerView){if(c){a=c.getPath("content.contentIndex")}h=a;g=this._menuScrollView.get("verticalPageScroll");for(a;a>=0;a--){j=f[a];e+=j.get("layout").height;if(e>g){break}else{if(j.get("isEnabled")){h=a}}}j=f[h];this.set("currentMenuItem",j);j.becomeFirstResponder()}else{this.moveToBeginningOfDocument()}return YES},insertText:function(b,a){var e=this._timer,c=this._keyBuffer;if(e){e.invalidate()}e=this._timer=SC.Timer.schedule({target:this,action:"clearKeyBuffer",interval:500,isPooled:NO});c=c||"";c+=b.toUpperCase();this.selectMenuItemForString(c);this._keyBuffer=c;return YES},performKeyEquivalent:function(e,a,b){if(!b&&!this.get("isVisibleInWindow")){return NO}var c=this._keyEquivalents[e];if(c){c.performAction(YES);return YES}if(e==="escape"||e==="return"){this.remove();return YES}return NO},selectMenuItemForString:function(c){var e=this.get("menuItemViews"),g,h,b,a,f;if(!e){return}f=c.length;a=e.get("length");for(b=0;b<a;b++){g=e.objectAt(b);h=g.get("title");if(!h){continue}h=h.replace(/ /g,"").substr(0,f).toUpperCase();if(h===c){this.set("currentMenuItem",g);g.becomeFirstResponder();break}}},clearKeyBuffer:function(){this._keyBuffer=""},modalPaneDidClick:function(a){this.remove();return YES}});SC._menu_fetchKeys=function(a){return this.get(a)};SC._menu_fetchItem=function(a){if(!a){return null}return this.get?this.get(a):this[a]};SC.MenuPane.VERTICAL_OFFSET=23;sc_require("panes/panel");SC.SheetPane=SC.PanelPane.extend({classNames:["sc-sheet"],modalPane:SC.ModalPane,transitionDuration:200,_state:"NO_VIEW",init:function(){arguments.callee.base.apply(this,arguments);if(SC.Animatable){SC.SheetPane.ANIMATABLE_AVAILABLE=YES;this.mixin(SC.Animatable);if(!this.transitions){this.transitions={}}if(!this.transitions.top){this.transitions.top={duration:this.transitionDuration===200?0.3:this.transitionDuration/1000,action:"_complete",target:this}}}},append:function(){var a=this.get("layout");if(!a.height||!a.top){a=SC.View.convertLayoutToAnchoredLayout(a,this.computeParentDimensions())}a.top=-1*a.height;if(this.disableAnimation){this.disableAnimation()}this.adjust(a);this.updateLayout();if(this.enableAnimation){this.enableAnimation()}return arguments.callee.base.apply(this,arguments)},remove:function(){var b=this,a=arguments;this.invokeLater(function(){a.callee.base.apply(b,a)},this.transitionDuration);this.slideUp();return this},paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);this.slideDown();return a},slideDown:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_DOWN;if(SC.SheetPane.ANIMATABLE_AVAILABLE){this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_OUT;this.adjust("top",0)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");this.tick()}},slideUp:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_UP;if(SC.SheetPane.ANIMATABLE_AVAILABLE){var a=this.get("layout");this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_IN;this.adjust("top",-1*a.height)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");this.tick()}},_complete:function(){var a=this._direction;if(a===SC.SheetPane.SLIDE_DOWN){if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",0)}this.adjust({centerX:0,left:null});if(SC.browser.isMozilla){this.parentViewDidChange()}}else{var b=this.get("layout");if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",-1*b.height)}}this._state=SC.SheetPane.READY;this.updateLayout()},blurTo:function(a){this.setFirstResponder("")},tick:function(){this._timer=null;var b=Date.now();var f=(b-this._start)/(this._end-this._start),h=this,a=this._direction,c=this.get("layout"),e,g;if(f<0){f=0}if(f>=1){this._complete();return this}g=Math.floor(c.height*f);if(a==SC.SheetPane.SLIDE_DOWN){h.adjust("top",0-(c.height-g))}else{if(a==SC.SheetPane.SLIDE_UP){h.adjust("top",0-g)}}this._timer=this.invokeLater(this.tick,20);h.updateLayout();return this}});SC.SheetPane.mixin({ANIMATABLE_AVAILABLE:NO,NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",SLIDE_DOWN:"SLIDEDOWN",SLIDE_UP:"SLIDEUP"});SC.BaseTheme.buttonRenderDelegate=SC.RenderDelegate.create({className:"button","sc-small-size":{height:18,autoResizePadding:{width:15,height:0}},"sc-regular-size":{height:24,autoResizePadding:{width:20,height:0}},"sc-huge-size":{height:30,autoResizePadding:{width:30,height:0}},"sc-jumbo-size":{height:44,autoResizePadding:{width:50,height:0}},render:function(a,g){this.addSizeClassName(a,g);var f,b=a.get("toolTip"),h=a.get("isSelected")||NO,l=a.get("isActive")||NO,j=a.get("isDefault")||NO,k=a.get("isCancel")||NO,e=(a.get("buttonBehavior")===SC.TOGGLE_BEHAVIOR),c=SC.guidFor(a)+"-label";g.setClass({icon:!!a.get("icon"),def:j,cancel:k&&!j,active:l,sel:h});if(b){g.attr("title",b);g.attr("alt",b)}this.includeSlices(a,g,SC.THREE_SLICE);if(a.get("isSegment")){g.attr("aria-selected",h.toString())}else{if(e){g.attr("aria-pressed",l.toString())}}g.attr("aria-labelledby",c);g=g.begin("label").addClass("sc-button-label").id(c);a.get("theme").labelRenderDelegate.render(a,g);g=g.end();if(a.get("supportFocusRing")){g=g.begin("div").addClass("focus-ring");this.includeSlices(a,g,SC.THREE_SLICE);g=g.end()}},update:function(f,a){var e=(f.get("buttonBehavior")===SC.TOGGLE_BEHAVIOR);this.updateSizeClassName(f,a);if(f.get("isActive")){a.addClass("active")}var c=f.get("isDefault"),b=f.get("isCancel");if(f.get("isSegment")){a.attr("aria-selected",f.get("isSelected").toString())}else{if(e){a.attr("aria-pressed",f.get("isActive").toString())}}a.attr("title",f.get("toolTip"));a.setClass("icon",!!f.get("icon"));a.setClass("def",!!c);a.setClass("cancel",!!b&&!c);f.get("theme").labelRenderDelegate.update(f,a.find("label"))},getRenderedAutoResizeLayer:function(a,b){return b.find(".sc-button-label")[0]}});SC.BaseTheme.checkboxRenderDelegate=SC.RenderDelegate.create({className:"checkbox",render:function(a,c){this.addSizeClassName(a,c);var f=a.get("theme"),g,b;b=SC.guidFor(a)+"-label";var e=a.get("isSelected")||NO;var k=a.get("isActive");var j=!a.get("isEnabled");var h;if(e===SC.MIXED_STATE){h="mixed"}else{if(e){h="true"}else{h="false"}}c.attr("role","checkbox");c.attr("aria-checked",h);c.attr("aria-labelledby",b);c.setClass({sel:e,active:k,disabled:j});c.push('<span class = "button"></span>');c=c.begin("span").addClass("label").id(b);f.labelRenderDelegate.render(a,c);c=c.end()},update:function(h,c){this.updateSizeClassName(h,c);var g=h.get("theme");var e=h.get("isSelected");var f=h.get("isActive");var b=!h.get("isEnabled");var a;if(e===SC.MIXED_STATE){a="mixed"}else{if(e){a="true"}else{a="false"}}c.attr("aria-checked",a);g.labelRenderDelegate.update(h,c.find("span.label"));c.setClass({sel:e,active:f,disabled:b})}});SC.BaseTheme.collectionRenderDelegate=SC.RenderDelegate.create({className:"collection",render:function(b,a){a.setClass("focus",b.get("hasFirstResponder"));a.setClass("disabled",!b.get("isEnabled"));a.setClass("active",b.get("isActive"))},update:function(b,a){a.setClass("focus",b.get("hasFirstResponder"));a.setClass("disabled",!b.get("isEnabled"));a.setClass("active",b.get("isActive"))}});SC.BaseTheme.disclosureRenderDelegate=SC.RenderDelegate.create({className:"disclosure",render:function(h,a){this.addSizeClassName(h,a);var g=h.get("theme"),e=h.get("value"),b=["sc-button-label","sc-disclosure-label"];var f=SC.guidFor(h)+"-label";a.attr("aria-expanded",e);a.attr("aria-labelledby",f);if(h.get("isSelected")){a.addClass("sel")}var c="";c+=h.get("isSelected")?"open":"closed";if(h.get("isActive")){c+=" active"}a.push('<img src = "'+SC.BLANK_IMAGE_URL+'" class = "disclosure button '+c+'" />');a=a.begin("span").addClass(b).id(f);g.labelRenderDelegate.render(h,a);a=a.end()},update:function(e,a){this.updateSizeClassName(e,a);var c=e.get("theme"),b=e.get("value");a.attr("aria-expanded",b);if(e.get("isSelected")){a.addClass("sel")}a.find("img").setClass({open:e.get("isSelected"),closed:!e.get("isSelected"),active:e.get("isActive")});c.labelRenderDelegate.update(e,a.find("span.sc-disclosure-label"))}});SC.THREE_SLICE=["left","middle","right"];SC.NINE_SLICE=["top-left","top","top-right","left","middle","right","bottom-left","bottom","bottom-right"];SC.RenderDelegate.reopen({includeSlices:function(f,c,e){for(var b=0,a=e.length;b<a;b++){c.push('<div class="'+e[b]+'"></div>')}}});SC.BaseTheme.imageButtonRenderDelegate=SC.RenderDelegate.create({className:"image-button",render:function(e,b){var c=e.get("image"),a=e.get("toolTip");this.addSizeClassName(e,b);b.addClass("no-min-width");if(a){b.attr("title",a);b.attr("alt",a)}if(c){b.push("<div class='img "+c+"'></div>")}else{b.push("<div class='img'></div>")}},update:function(e,b){var c,a;this.updateSizeClassName(e,b);if(e.didChangeFor("imageButtonRenderDelegate","toolTip")){a=e.get("toolTip");b.attr("title",a);b.attr("alt",a)}c=e.get("image");if(c&&e.didChangeFor("imageButtonRenderDelegate","image")){b.children()[0].className="img "+c}}});SC.BaseTheme.MASTER_DETAIL_DIVIDER_WIDTH=1;SC.BaseTheme.masterDetailRenderDelegate=SC.RenderDelegate.create({className:"master-detail",dividerWidth:1,render:function(b,a){a.setClass("round-toolbars",SC.platform.touch)},update:function(b,a){a.setClass("round-toolbars",SC.platform.touch)}});SC.BaseTheme.panelRenderDelegate=SC.RenderDelegate.create({className:"panel",render:function(f,b){b=b.begin("div").addClass("panel-background");this.includeSlices(f,b,SC.NINE_SLICE);b=b.end();var a=f.get("ariaLabel"),c=f.get("ariaLabelledBy"),e=f.get("ariaDescribedBy");if(a){b.attr("aria-label",a)}if(c){b.attr("aria-labelledby",c)}if(e){b.attr("aria-describedby",e)}},update:function(f,c){var a=f.get("ariaLabel"),b=f.get("ariaLabelledBy"),e=f.get("ariaDescribedBy");if(a){c.attr("aria-label",a)}if(b){c.attr("aria-labelledby",b)}if(e){c.attr("aria-describedby",e)}}});sc_require("render_delegates/panel");SC.BaseTheme.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(g,c){var a=g.get("theme").panelRenderDelegate;a.render(g,c);var b=g.get("preferType");var f=g.get("pointerPos");var e=g.get("pointerPosY");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){c.push('<div class="sc-pointer '+f+'" style="margin-top: '+e+'px"></div>');c.addClass(f)}},update:function(h,g){var a=h.get("theme").panelRenderDelegate;a.update(h,g);var b=h.get("preferType");var f=h.get("pointerPos");var e=h.get("pointerPosY");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){var c=g.find(".sc-pointer");c.attr("class","sc-pointer "+f);c.attr("style","margin-top: "+e+"px");g.addClass(f)}}});sc_require("render_delegates/picker");SC.BaseTheme.menuRenderDelegate=SC.BaseTheme.pickerRenderDelegate.create({className:"menu",render:function(c,b,a){this.addSizeClassName(b,a);c(b,a)}.enhance(),update:function(c,b,a){this.updateSizeClassName(b,a);c(b,a)}.enhance(),itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:6,menuWidthPadding:50,minimumMenuWidth:50,submenuOffsetX:2,verticalOffset:23,"sc-tiny-size":{itemHeight:10,itemSeparatorHeight:2,menuHeightPadding:2,submenuOffsetX:0},"sc-small-size":{itemHeight:16,itemSeparatorHeight:7,menuHeightPadding:4,submenuOffsetX:2},"sc-large-size":{itemHeight:60,itemSeparatorHeight:20,menuHeightPadding:0,submenuOffsetX:4},"sc-huge-size":{itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:0,submenuOffsetX:0}});SC.BaseTheme.popupButtonRenderDelegate=SC.BaseTheme.buttonRenderDelegate.create({render:function(b,a){a.attr("aria-haspopup","true");arguments.callee.base.apply(this,arguments)},update:function(b,a){arguments.callee.base.apply(this,arguments)}});SC.BaseTheme.PROGRESS_OFFSET=0.5;SC.BaseTheme.PROGRESS_OFFSET_RANGE=42;SC.BaseTheme.progressRenderDelegate=SC.RenderDelegate.create({className:"progress",render:function(j,c){this.addSizeClassName(j,c);var a=j.get("isIndeterminate"),h=j.get("theme"),b=j.get("maximum"),f=j.get("minimum"),e=j.get("ariaValue");var g;if(a){g=1}else{g=j.get("value")}c.attr("aria-valuemax",b);c.attr("aria-valuemin",f);c.attr("aria-valuenow",e);c.attr("aria-valuetext",e);c.setClass({indeterminate:a,running:j.get("isRunning")&&a,disabled:!j.get("isEnabled"),"sc-empty":(g<=0),"sc-complete":(g>=1&&!a)});c=c.begin("div").addClass("track");this.includeSlices(j,c,SC.THREE_SLICE);c=c.end();c=c.begin("div").addClass("content");c.css("width",(g*100)+"%");this.includeSlices(j,c,SC.THREE_SLICE);c=c.end()},update:function(a,b){this.updateSizeClassName(a,b);var f=a.get("theme"),k,l=a.get("maximum"),g=a.get("minimum"),c=a.get("ariaValue"),e=a.get("isIndeterminate"),m=a.get("isRunning"),j=a.get("isEnabled"),h=a.get("isVisibleInWindow");b.attr("aria-valuemax",l);b.attr("aria-valuemin",g);b.attr("aria-valuenow",c);b.attr("aria-valuetext",c);if(e){k=1}else{k=a.get("value")}b.setClass({indeterminate:e,running:m&&e,disabled:!j,"sc-empty":(k<=0),"sc-complete":(k>=1&&!e)});b.find(".content").css("width",(k*100)+"%");if(!SC.platform.supportsCSSTransitions){if(!this._queue[b[0].id]){this._queue[b[0].id]={offset:0,element:SC.$(b).find(".content .middle"),shouldAnimate:false}}if(e&&m&&h){this._queue[b[0].id].shouldAnimate=true;this.animate(a)}else{if(!e){this._queue[b[0].id].element.css("background-position","")}else{this._queue[b[0].id].shouldAnimate=false}}}},_queue:{},_animating:false,animate:function(b){var a=this;if(this._animating){return}function c(){var j,f,g,e=a._queue,l=0,h;var k;for(k in e){if(e.hasOwnProperty(k)){h=e[k];if(h.shouldAnimate){a._animating=true;l++;f=h.offset||0;j=(f+SC.BaseTheme.PROGRESS_OFFSET)%SC.BaseTheme.PROGRESS_OFFSET_RANGE;g=Math.round(j);if(g>Math.round(f)){h.element.css("background-position",g+"px 0px")}h.offset=j}}}if(l===0){a._animating=false}else{window.requestAnimationFrame(c)}}c()}});SC.BaseTheme.radioRenderDelegate=SC.RenderDelegate.create({className:"radio",render:function(g,b){this.addSizeClassName(g,b);var f=g.get("theme");var a=g.get("isSelected"),c=g.get("width"),e=SC.guidFor(g)+"-label";b.setClass({active:g.get("isActive"),mixed:g.get("isMixed"),sel:g.get("isSelected"),disabled:!g.get("isEnabled")});b.attr("role","radio");b.attr("aria-checked",a);b.attr("aria-labelledby",e);b.attr("aria-disabled",g.get("isEnabled")?"false":"true");if(c){b.css("width",c)}b.push('<span class = "button"></span>');b=b.begin("span").addClass("sc-button-label").id(e);f.labelRenderDelegate.render(g,b);b=b.end()},update:function(g,a){this.updateSizeClassName(g,a);var f=g.get("theme");var b=g.get("isSelected"),c=g.get("width"),e=g.get("value");a.setClass({active:g.get("isActive"),mixed:g.get("isMixed"),sel:g.get("isSelected"),disabled:!g.get("isEnabled")});a.attr("aria-disabled",g.get("isEnabled")?"false":"true");a.attr("aria-checked",b);a.css("width",c?c:null);f.labelRenderDelegate.update(g,a.find(".sc-button-label"))}});SC.BaseTheme.radioGroupRenderDelegate=SC.RenderDelegate.create({className:"radio-group",render:function(j,f){this.addSizeClassName(j,f);var h=j.get("theme"),e=SC.guidFor(this),c=j.get("items"),b,a=c.length,g;f.addClass(j.get("layoutDirection"));f.attr("role","radiogroup");f.attr("aria-disabled",j.get("isEnabled")?"false":"true");for(b=0;b<a;b++){g=c[b];f=f.begin("div").addClass("radio-"+b).attr("index",b).addClass(h.classNames).addClass(h.radioRenderDelegate.className).addClass("sc-radio-button");h.radioRenderDelegate.render(g,f);f=f.end()}j.get("renderState").radioCount=b},update:function(a,e){this.updateSizeClassName(a,e);var f=a.get("theme"),b=SC.guidFor(this),h=a.get("items"),j,g=h.length,k;e.addClass(a.get("layoutDirection"));e.attr("aria-disabled",a.get("isEnabled")?"false":"true");if(a.get("renderState").radioCount!==g){var c=SC.RenderContext(e[0]);this.render(a,c);c.update();return}for(j=0;j<g;j++){k=h[j];f.radioRenderDelegate.update(k,e.find(".radio-"+j))}},updateRadioAtIndex:function(e,a,b){var c=e.get("items")[b];e.get("theme").radioRenderDelegate.update(c,a.find(".radio-"+b))},indexForEvent:function(e,b,a){var c=$(a.target).closest(".sc-radio-button").attr("index");if(isNaN(c)){return undefined}return parseInt(c,0)}});SC.BaseTheme.segmentRenderDelegate=SC.RenderDelegate.create({className:"segment",render:function(f,b){var c=f.get("theme"),e,a;a={"sc-first-segment":f.get("isFirstSegment"),"sc-middle-segment":f.get("isMiddleSegment"),"sc-last-segment":f.get("isLastSegment"),"sc-overflow-segment":f.get("isOverflowSegment"),vertical:f.get("layoutDirection")!==SC.LAYOUT_HORIZONTAL};if(!SC.none(f.get("index"))){a["sc-segment-"+f.get("index")]=YES}b.setClass(a);e=c.buttonRenderDelegate;e.render(f,b)},update:function(f,a){var c=f.get("theme"),e,b={};b={"sc-first-segment":f.get("isFirstSegment"),"sc-middle-segment":f.get("isMiddleSegment"),"sc-last-segment":f.get("isLastSegment"),"sc-overflow-segment":f.get("isOverflowSegment")||NO,vertical:f.get("layoutDirection")!==SC.LAYOUT_HORIZONTAL};if(!SC.none(f.get("index"))){b["sc-segment-"+f.get("index")]=YES}a.setClass(b);e=c.buttonRenderDelegate;e.update(f,a)}});SC.BaseTheme.segmentedRenderDelegate=SC.RenderDelegate.create({className:"segmented",render:function(b,a){this.addSizeClassName(b,a);a.addStyle("text-align",b.get("align"))},update:function(b,a){this.updateSizeClassName(b,a);a.css("text-align",b.get("align"))}});SC.BaseTheme.sliderRenderDelegate=SC.RenderDelegate.create({className:"slider",render:function(g,c){this.addSizeClassName(g,c);var b=SC.BLANK_IMAGE_URL,a=g.get("maximum"),f=g.get("minimum"),e=g.get("ariaValue");c.attr("aria-valuemax",a);c.attr("aria-valuemin",f);c.attr("aria-valuenow",e);if(f!==0||a!==100){c.attr("aria-valuetext",e)}c.attr("aria-orientation","horizontal");c=c.begin("span").addClass("track");this.includeSlices(g,c,SC.THREE_SLICE);c.push('<img src="'+b+'" class="sc-handle" style="left: '+g.get("value")+'%" /></span>');c=c.end();g.get("renderState")._cachedHandle=null},update:function(j,b){this.updateSizeClassName(j,b);var a=j.get("maximum"),e=j.get("minimum"),c=j.get("ariaValue");b.attr("aria-valuemax",a);b.attr("aria-valuemin",e);b.attr("aria-valuenow",c);if(e!==0||a!==100){b.attr("aria-valuetext",c)}b.attr("aria-orientation","horizontal");if(j.didChangeFor("sliderRenderDelegate","value")){var g=j.get("renderState")._cachedHandle;if(!g){g=j.get("renderState")._cachedHandle=b.find(".sc-handle")}var h=j.get("frame"),f=j.get("value");g.css("left",f+"%")}}});SC.BaseTheme.SourceList=SC.BaseTheme.subtheme("source-list");SC.BaseTheme.toolbarRenderDelegate=SC.RenderDelegate.create({className:"toolbar",render:function(b,a){},update:function(){}});SC.BaseTheme.wellRenderDelegate=SC.RenderDelegate.create({className:"well",render:function(b,a){this.includeSlices(b,a,SC.NINE_SLICE)},update:function(){}});SC.BaseTheme.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(){},update:function(){}});SC.DRAG_LINK=4;SC.DRAG_COPY=1;SC.DRAG_MOVE=2;SC.DRAG_NONE=0;SC.DRAG_ANY=15;SC.DRAG_DATA=8;SC.DRAG_AUTOSCROLL_ZONE_THICKNESS=20;SC.View.reopen({init:function(a){a();if(this.get("isDropTarget")){SC.Drag.addDropTarget(this)}if(this.get("isScrollable")){SC.Drag.addScrollableView(this)}}.enhance(),destroy:function(a){if(this.get("isDropTarget")){SC.Drag.removeDropTarget(this)}if(this.get("isScrollable")){SC.Drag.removeScrollableView(this)}return a()}.enhance()});SC.Drag=SC.Object.extend({source:null,ghostView:null,ghostActsLikeCursor:NO,dragView:null,ghost:YES,sourceIsDraggable:YES,slideBack:YES,ghostOffset:{x:0,y:0},location:{},dataTypes:function(){if(this.dataSource){return this.dataSource.get("dragDataTypes")||[]}var e=this.data;if(e){var a=[];for(var b in e){if(e.hasOwnProperty(b)){a.push(b)}}return a}var c=this.get("source");if(c&&c.dragDataTypes){return c.get("dragDataTypes")||[]}return[]}.property().cacheable(),hasDataType:function(a){return(this.get("dataTypes").indexOf(a)>=0)},dataForType:function(a){if(this.dataSource){return this.dataSource.dragDataForType(this,a)}else{if(this.data){return this.data[a]}else{var b=this.get("source");if(b&&SC.typeOf(b.dragDataForType)===SC.T_FUNCTION){return b.dragDataForType(this,a)}else{return null}}}},dataSource:null,data:null,allowedDragOperations:SC.DRAG_ANY,_dragInProgress:YES,_dragViewWasVisible:null,startDrag:function(){if(this.get("sourceIsDraggable")){this._createGhostView()}var j=this.event;var f={x:j.pageX,y:j.pageY};this.set("location",f);if(this.get("sourceIsDraggable")){var b=this._getDragView();var k=b.get("parentView");var h=k?k.convertFrameToView(b.get("frame"),null):b.get("frame");if(this.get("ghost")){this._dragViewWasVisible=b.get("isVisible");b.set("isVisible",NO)}if(this.ghostActsLikeCursor){this.ghostOffset={x:14,y:14}}else{this.ghostOffset={x:(f.x-h.x),y:(f.y-h.y)}}if(!this._ghostViewHidden){this._positionGhostView(j)}if(j.makeTouchResponder){var l=this;SC.Timer.schedule({target:j,action:function(){if(!j.hasEnded){j.makeTouchResponder(l,YES)}},interval:1})}else{this.ghostView.rootResponder.dragDidStart(this,j)}}var a=this.source;if(a&&a.dragDidBegin){a.dragDidBegin(this,f)}var c=this._dropTargets();for(var g=0,e=c.length;g<e;g++){c[g].tryToPerform("dragStarted",this,j)}},cancelDrag:function(){var b=this._lastTarget,c=this.get("location");if(b&&b.dragExited){b.dragExited(this,this._lastMouseDraggedEvent)}if(this.get("sourceIsDraggable")){this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)}this._dragViewWasVisible=null}}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,c,SC.DRAG_NONE)}this._lastTarget=null;this._dragInProgress=NO},touchStart:function(a){return YES},mouseDragged:function(a){var b=this._autoscroll(a);var g=this.get("location");if(!b&&(a.pageX===g.x)&&(a.pageY===g.y)){return}g={x:a.pageX,y:a.pageY};this.set("location",g);this._lastMouseDraggedEvent=a;var e=this.source;var c=this._lastTarget;var f=this._findDropTarget(a);var h=SC.DRAG_NONE;while(f&&(f!==c)&&(h===SC.DRAG_NONE)){if(f&&e&&e.dragSourceOperationMaskFor){h=e.dragSourceOperationMaskFor(this,f)}else{h=SC.DRAG_ANY}if((h!==SC.DRAG_NONE)&&f&&f.computeDragOperations){h=h&f.computeDragOperations(this,a,h)}else{h=SC.DRAG_NONE}this.allowedDragOperations=h;if(h===SC.DRAG_NONE){f=this._findNextDropTarget(f)}}if(f!==c){if(c&&c.dragExited){c.dragExited(this,a)}if(f){if(f.dragEntered){f.dragEntered(this,a)}if(f.dragUpdated){f.dragUpdated(this,a)}}this._lastTarget=f}else{if(f&&f.dragUpdated){f.dragUpdated(this,a)}}if(e&&e.dragDidMove){e.dragDidMove(this,g)}if(this.get("sourceIsDraggable")&&!this._ghostViewHidden){this._positionGhostView(a)}},touchesDragged:function(a){this.mouseDragged(a)},mouseUp:function(n){var h={x:n.pageX,y:n.pageY},j=this._lastTarget,f=this.allowedDragOperations;this.set("location",h);try{if(j&&j.acceptDragOperation&&j.acceptDragOperation(this,f)){f=j.performDragOperation?j.performDragOperation(this,f):SC.DRAG_NONE}else{f=SC.DRAG_NONE}}catch(k){SC.Logger.error("Exception in SC.Drag.mouseUp(acceptDragOperation|performDragOperation): %@".fmt(k))}try{if(j&&j.dragExited){j.dragExited(this,n)}}catch(l){SC.Logger.error("Exception in SC.Drag.mouseUp(target.dragExited): %@".fmt(l))}var c=this._dropTargets();for(var m=0,g=c.length;m<g;m++){try{c[m].tryToPerform("dragEnded",this,n)}catch(b){SC.Logger.error("Exception in SC.Drag.mouseUp(dragEnded on %@): %@".fmt(c[m],b))}}if(this.get("sourceIsDraggable")){this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)}this._dragViewWasVisible=null}}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,h,f)}this._lastTarget=null;this._dragInProgress=NO},touchEnd:function(a){this.mouseUp(a)},_getDragView:function(){if(!this.dragView){if(!this.source||!this.source.isView){throw"Source can't be used as dragView, because it's not a view."}this.dragView=this.source}return this.dragView},_createGhostView:function(){var c=this,b=this._getDragView(),e=b.get("frame"),a;a=this.ghostView=SC.Pane.create({classNames:["sc-ghost-view"],layout:{top:e.y,left:e.x,width:e.width,height:e.height},owner:this,didCreateLayer:function(){if(b){var f=b.get("layer");if(f){f=f.cloneNode(true);f.style.top="0px";f.style.left="0px";this.get("layer").appendChild(f)}}}});a.append()},_positionGhostView:function(a){var c=this.get("location");c.x-=this.ghostOffset.x;c.y-=this.ghostOffset.y;var b=this.ghostView;if(b){b.adjust({top:c.y,left:c.x});b.invokeOnce("updateLayout")}},_ghostViewHidden:NO,hideGhostView:function(){if(this.ghostView&&!this._ghostViewHidden){this.ghostView.remove();this._ghostViewHidden=YES}},unhideGhostView:function(){if(this._ghostViewHidden){this._ghostViewHidden=NO;this._createGhostView()}},_destroyGhostView:function(){if(this.ghostView){this.ghostView.remove();this.ghostView=null;this._ghostViewHidden=NO}},_dropTargets:function(){if(this._cachedDropTargets){return this._cachedDropTargets}var b=[];var e=SC.Drag._dropTargets;for(var c in e){if(e.hasOwnProperty(c)){b.push(e[c])}}var g={};var f=SC.Drag._dropTargets;var a=function(h){if(!h){return 0}var k=SC.guidFor(h);var j=g[k];if(!j){j=1;while(h=h.get("parentView")){if(f[SC.guidFor(h)]!==undefined){j=j+1}if(h.isPane&&h.isMainPane){j=j+10000}}g[k]=j}return j};b.sort(function(j,h){if(j===h){return 0}j=a(j);h=a(h);return(j>h)?-1:1});this._cachedDropTargets=b;return b},_findDropTarget:function(c){var h={x:c.pageX,y:c.pageY};var f,g;var e=this._dropTargets();for(var b=0,a=e.length;b<a;b++){f=e[b];if(!f.get("isVisibleInWindow")){continue}g=f.convertFrameToView(f.get("clippingFrame"),null);if(SC.pointInRect(h,g)){return f}}return null},_findNextDropTarget:function(a){var b=SC.Drag._dropTargets;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null},_autoscroll:function(n){if(!n){n=this._lastAutoscrollEvent}if(!this._dragInProgress){return NO}var h=n?{x:n.pageX,y:n.pageY}:this.get("location"),j=this._findScrollableView(h),o=null,m,c,e,k,b,a,g;while(j&&!o){m=j.get("canScrollVertical")?1:0;c=j.get("canScrollHorizontal")?1:0;if(m||c){a=j.get("containerView");if(a){g=j.convertFrameToView(a.get("frame"),null)}else{m=c=0}}if(m){k=SC.maxY(g);e=k-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.y>=e&&h.y<=k){m=1}else{e=SC.minY(g);k=e+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.y>=e&&h.y<=k){m=-1}else{m=0}}}if(c){k=SC.maxX(g);e=k-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.x>=e&&h.x<=k){c=1}else{e=SC.minX(g);k=e+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(h.x>=e&&h.x<=k){c=-1}else{c=0}}}if(m||c){o=j}else{j=this._findNextScrollableView(j)}}if(o&&(this._lastScrollableView===o)){if((Date.now()-this._hotzoneStartTime)>100){this._horizontalScrollAmount*=1.05;this._verticalScrollAmount*=1.05}}else{this._lastScrollableView=o;this._horizontalScrollAmount=15;this._verticalScrollAmount=15;this._hotzoneStartTime=(o)?Date.now():null;c=m=0}if(o&&(c||m)){var l={x:c*this._horizontalScrollAmount,y:m*this._verticalScrollAmount};o.scrollBy(l)}if(o){if(n){this._lastAutoscrollEvent={pageX:n.pageX,pageY:n.pageY}}this.invokeLater(this._autoscroll,100,null);return YES}else{this._lastAutoscrollEvent=null;return NO}},_scrollableViews:function(){if(this._cachedScrollableView){return this._cachedScrollableView}var a=[];var c=SC.Drag._scrollableViews;for(var b in c){if(c.hasOwnProperty(b)){a.push(c[b])}}a=a.sort(function(g,e){var f=g;while(f=f.get("parentView")){if(e===f){return -1}}return 1});this._cachedScrollableView=a;return a},_findScrollableView:function(g){var c=this._scrollableViews(),b=c?c.length:0,e,f,a;for(a=0;a<b;a++){e=c[a];if(!e.get("isVisibleInWindow")){continue}f=e.convertFrameToView(e.get("clippingFrame"),null);if(SC.pointInRect(g,f)){return e}}return null},_findNextScrollableView:function(a){var b=SC.Drag._scrollableViews;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null}});SC.Drag.mixin({start:function(b){var a=this.create(b);a.startDrag();return a},_dropTargets:{},_scrollableViews:{},addDropTarget:function(a){this._dropTargets[SC.guidFor(a)]=a},removeDropTarget:function(a){delete this._dropTargets[SC.guidFor(a)]},addScrollableView:function(a){this._scrollableViews[SC.guidFor(a)]=a},removeScrollableView:function(a){delete this._scrollableViews[SC.guidFor(a)]}});SC.UndoManager=SC.Object.extend({undoActionName:function(){return this.undoStack?this.undoStack.name:null}.property("undoStack"),redoActionName:function(){return this.redoStack?this.redoStack.name:null}.property("redoStack"),canUndo:function(){return this.undoStack!=null}.property("undoStack"),canRedo:function(){return this.redoStack!=null}.property("redoStack"),undo:function(){this._undoOrRedo("undoStack","isUndoing")},redo:function(){this._undoOrRedo("redoStack","isRedoing")},isUndoing:NO,isRedoing:NO,groupingLevel:0,registerUndo:function(b,a){this.beginUndoGroup(a);this._activeGroup.actions.push(b);this.endUndoGroup(a)},beginUndoGroup:function(b){if(this._activeGroup){this.groupingLevel++}else{var a=this.isUndoing?"redoStack":"undoStack";this._activeGroup={name:b,actions:[],prev:this.get(a)};this.set(a,this._activeGroup);this.groupingLevel=1}},endUndoGroup:function(a){if(!this._activeGroup){raise("endUndoGroup() called outside group.")}if(this.groupingLevel>1){this.groupingLevel--}else{this._activeGroup=null;this.groupingLevel=0}this.propertyDidChange(this.isUndoing?"redoStack":"undoStack")},setActionName:function(a){if(!this._activeGroup){raise("setActionName() called outside group.")}this._activeGroup.name=a},_activeGroup:null,undoStack:null,redoStack:null,_undoOrRedo:function(a,c){if(this._activeGroup){return false}if(this.get(a)==null){return true}this.set(c,true);var f=this.get(a);this.set(a,f.prev);var b;var e=f.actions.length>1;if(e){this.beginUndoGroup(f.name)}while(b=f.actions.pop()){b()}if(e){this.endUndoGroup(f.name)}this.set(c,false)}});SC.CheckboxView=SC.ButtonView.extend(SC.StaticLayout,{classNames:["sc-checkbox-view","sc-checkbox-control"],ariaRole:"checkbox",themeName:null,renderDelegateName:"checkboxRenderDelegate",needsEllipsis:NO,acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),_toggleValue:function(){var a=this.get("value")===this.get("toggleOnValue");this.set("value",a?this.get("toggleOffValue"):this.get("toggleOnValue"))},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(a&&this.get("acceptsFirstResponder")){a.allowDefault()}return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",NO);this._isMouseDown=NO;if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(a.target)){this._toggleValue();this._action(a)}}return YES},keyDown:function(b){if(!this.get("isEnabled")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this._toggleValue();if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(b.target)){this._action(b)}}return YES}b.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.LIST_ITEM_ACTION_CANCEL="sc-list-item-cancel-action";SC.LIST_ITEM_ACTION_REFRESH="sc-list-item-cancel-refresh";SC.LIST_ITEM_ACTION_EJECT="sc-list-item-cancel-eject";SC.ListItemView=SC.View.extend(SC.InlineEditable,SC.Control,{classNames:["sc-list-item-view"],displayProperties:["disclosureState","escapeHTML","isDropTarget"],content:null,contentIndex:null,hasContentIcon:NO,hasContentRightIcon:NO,hasContentBranch:NO,contentCheckboxKey:null,icon:null,isDropTarget:NO,contentIconKey:null,rightIcon:null,contentRightIconKey:null,contentValueKey:null,escapeHTML:YES,contentUnreadCountKey:null,contentIsBranchKey:null,outlineIndent:16,outlineLevel:0,disclosureState:SC.LEAF_NODE,validator:null,contentKeys:{contentValueKey:"title",contentCheckboxKey:"checkbox",contentIconKey:"icon",contentRightIconKey:"rightIcon",contentUnreadCountKey:"count",contentIsBranchKey:"branch"},contentPropertyDidChange:function(){if(this.get("contentIsEditable")!==this.contentIsEditable()){this.notifyPropertyChange("contentIsEditable")}this.displayDidChange()},contentIsEditable:function(){var a=this.get("content");return a&&(a.get?a.get("isEditable")!==NO:NO)}.property("content").cacheable(),inlineEditorDelegate:SC.InlineTextFieldDelegate,$label:function(){return this.$("label")},_isInsideElementWithClassName:function(f,a){var c=this.get("layer");if(!c){return NO}var e=SC.$(a.target);var b=NO;while(!b&&e.length>0&&(e[0]!==c)){if(e.hasClass(f)){b=YES}e=e.parent()}e=c=null;return b},_isInsideCheckbox:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentCheckboxKey",a);return c&&this._isInsideElementWithClassName("sc-checkbox-view",b)},_isInsideDisclosure:function(a){if(this.get("disclosureState")===SC.LEAF_NODE){return NO}return this._isInsideElementWithClassName("sc-disclosure-view",a)},_isInsideRightIcon:function(c){var b=this.displayDelegate;var a=this.getDelegateProperty("hasContentRightIcon",b)||!SC.none(this.rightIcon);return a&&this._isInsideElementWithClassName("right-icon",c)},mouseDown:function(a){if(!this.get("contentIsEditable")){return NO}if(this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseDownOnCheckbox=YES;this._isMouseInsideCheckbox=YES;return YES}else{if(this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseDownOnDisclosure=YES;this._isMouseInsideDisclosure=YES;return YES}else{if(this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseDownOnRightIcon=YES;this._isMouseInsideRightIcon=YES;return YES}}}return NO},mouseUp:function(j){var c=NO,k,e,b,a,h,g;if(this._isMouseDownOnCheckbox){if(this._isInsideCheckbox(j)){k=this.displayDelegate;e=this.getDelegateProperty("contentCheckboxKey",k);b=this.get("content");if(b&&b.get){var f=b.get(e);f=(f===SC.MIXED_STATE)?YES:!f;b.set(e,f);this.displayDidChange()}}this._removeCheckboxActiveState();c=YES}else{if(this._isMouseDownOnDisclosure){if(this._isInsideDisclosure(j)){a=this.get("disclosureState");h=this.get("contentIndex");g=(!SC.none(h))?SC.IndexSet.create(h):null;k=this.get("displayDelegate");if(a===SC.BRANCH_OPEN){if(g&&k&&k.collapse){k.collapse(g)}else{this.set("disclosureState",SC.BRANCH_CLOSED)}this.displayDidChange()}else{if(a===SC.BRANCH_CLOSED){if(g&&k&&k.expand){k.expand(g)}else{this.set("disclosureState",SC.BRANCH_OPEN)}this.displayDidChange()}}}this._removeDisclosureActiveState();c=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();c=YES}}}this._isMouseInsideCheckbox=this._isMouseDownOnCheckbox=NO;this._isMouseDownOnDisclosure=this._isMouseInsideDisclosure=NO;this._isMouseInsideRightIcon=this._isMouseDownOnRightIcon=NO;return c},mouseMoved:function(a){if(this._isMouseDownOnCheckbox&&this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseInsideCheckbox=YES}else{if(this._isMouseDownOnCheckbox){this._removeCheckboxActiveState();this._isMouseInsideCheckbox=NO}else{if(this._isMouseDownOnDisclosure&&this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseInsideDisclosure=YES}else{if(this._isMouseDownOnDisclosure){this._removeDisclosureActiveState();this._isMouseInsideDisclosure=NO}else{if(this._isMouseDownOnRightIcon&&this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseInsideRightIcon=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();this._isMouseInsideRightIcon=NO}}}}}}return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},_addCheckboxActiveState:function(){if(this.get("isEnabled")){if(this._checkboxRenderDelegate){var a=this._checkboxRenderSource;a.set("isActive",YES);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").addClass("active")}}},_removeCheckboxActiveState:function(){if(this._checkboxRenderer){var a=this._checkboxRenderSource;a.set("isActive",NO);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").removeClass("active")}},_addDisclosureActiveState:function(){if(this.get("isEnabled")){if(this._disclosureRenderDelegate){var a=this._disclosureRenderSource;a.set("isActive",YES);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}}},_removeDisclosureActiveState:function(){if(this._disclosureRenderer){var a=this._disclosureRenderSource;a.set("isActive",NO);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}},_addRightIconActiveState:function(){this.$("img.right-icon").setClass("active",YES)},_removeRightIconActiveState:function(){this.$("img.right-icon").removeClass("active")},contentHitTest:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentValueKey",a);if(!c){return NO}var f=this.$label()[0];if(!f){return NO}var g=b.target,e=this.get("layer");while(g&&(g!==e)&&(g!==window)){if(g===f){return YES}g=g.parentNode}return NO},beginEditing:function(e,c){var g=this.$label(),f=this.get("parentView");if(c&&this.scrollToVisible()){var b=this.get("owner"),a=this.get("contentIndex");this.invokeLast(function(){var h=b.itemViewForContentIndex(a);if(h&&h.beginEditing){h.beginEditing(NO)}});return YES}else{if(!f||!g||g.get("length")===0){return NO}else{return e()}}}.enhance(),inlineEditorWillBeginEditing:function(e,q,p){var s=this.get("content"),k=this.get("displayDelegate"),j=this.getDelegateProperty("contentValueKey",k),l=this.get("parentView"),a=this.$label(),g=this.get("validator"),u,m,h,b,n,c,o,w,t,x;m=(j&&s)?(s.get?s.get(j):s[j]):s;u=this.computeFrameWithParentFrame(null);c=this._oldLineHeight=a.css("lineHeight");b=a.css("fontSize");n=this.$().css("top");if(n){n=parseInt(n.substring(0,n.length-2),0)}else{n=0}w=0;if(b&&c){t=b*1.5;if(t<c){a.css({lineHeight:"1.5"});w=(c-t)/2}else{oldLineHeight=null}}a=a[0];h=SC.offset(a);u.x=h.x;u.y=h.y+n+w;u.height=a.offsetHeight;u.width=a.offsetWidth;o=this.get("escapeHTML");e.set({value:m,exampleFrame:u,exampleElement:a,multiline:NO,isCollection:YES,validator:g,escapeHTML:o})},inlineEditorShouldBeginEditing:function(a){return YES},inlineEditorDidBeginEditing:function(b,e,f,a){b(e,f,a);var c=this.$label();this._oldOpacity=c.css("opacity");c.css("opacity",0);if(this._oldLineHeight){c.css({lineHeight:this._oldLineHeight})}}.enhance(),inlineEditorDidCommitEditing:function(e,g,c){var f=this.get("content");var a=this.displayDelegate;var b=this.getDelegateProperty("contentValueKey",a);if(b&&f){if(f.set){f.set(b,g)}else{f[b]=g}}else{this.set("content",g)}this.displayDidChange();this._endEditing()},_endEditing:function(a){this.$label().css("opacity",this._oldOpacity);a()}.enhance(),render:function(c,a){var g=this.get("content"),o=this.displayDelegate,b=this.get("outlineLevel"),f=this.get("outlineIndent"),n,l,k,p=[];p.push((this.get("contentIndex")%2===0)?"even":"odd");c.setClass("disabled",!this.get("isEnabled"));c.setClass("drop-target",this.get("isDropTarget"));k=c.begin("div").addClass("sc-outline");if(b>=0&&f>0){k.addStyle("left",f*(b+1))}l=this.get("disclosureState");if(l!==SC.LEAF_NODE){this.renderDisclosure(k,l);p.push("has-disclosure")}n=this.getDelegateProperty("contentCheckboxKey",o);if(n){l=g?(g.get?g.get(n):g[n]):NO;if(l!==null){this.renderCheckbox(k,l);p.push("has-checkbox")}}if(this.getDelegateProperty("hasContentIcon",o)){n=this.getDelegateProperty("contentIconKey",o);l=(n&&g)?(g.get?g.get(n):g[n]):null;if(l){this.renderIcon(k,l);p.push("has-icon")}}else{if(this.get("icon")){l=this.get("icon");this.renderIcon(k,l);p.push("has-icon")}}n=this.getDelegateProperty("contentValueKey",o);l=(n&&g)?(g.get?g.get(n):g[n]):g;if(l&&SC.typeOf(l)!==SC.T_STRING){l=l.toString()}if(this.get("escapeHTML")){l=SC.RenderContext.escapeHTML(l)}this.renderLabel(k,l);if(this.getDelegateProperty("hasContentRightIcon",o)){n=this.getDelegateProperty("contentRightIconKey",o);l=(n&&g)?(g.get?g.get(n):g[n]):null;this.renderRightIcon(k,l);p.push("has-right-icon")}n=this.getDelegateProperty("contentUnreadCountKey",o);l=(n&&g)?(g.get?g.get(n):g[n]):null;if(!SC.none(l)&&(l!==0)){this.renderCount(k,l);var e=["zero","one","two","three","four","five"];var m=l.toString().length;var j=e.length;var h=(m<j)?e[m]:e[j-1];p.push("has-count "+h+"-digit")}n=this.getDelegateProperty("listItemActionProperty",o);l=(n&&g)?(g.get?g.get(n):g[n]):null;if(l){this.renderAction(k,l);p.push("has-action")}if(this.getDelegateProperty("hasContentBranch",o)){n=this.getDelegateProperty("contentIsBranchKey",o);l=(n&&g)?(g.get?g.get(n):g[n]):NO;this.renderBranch(k,l);p.push("has-branch")}c.addClass(p);c=k.end()},renderDisclosure:function(a,e){var c=this.get("theme").disclosureRenderDelegate;a=a.begin("div").addClass("sc-disclosure-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._disclosureRenderSource;if(!b){this._disclosureRenderSource=b=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",e===SC.BRANCH_OPEN).set("isEnabled",this.get("isEnabled")).set("title","");c.render(b,a);a=a.end();this._disclosureRenderDelegate=c},renderCheckbox:function(a,e){var c=this.get("theme").checkboxRenderDelegate;a=a.begin("div").addClass("sc-checkbox-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._checkboxRenderSource;if(!b){b=this._checkboxRenderSource=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",e&&(e!==SC.MIXED_STATE)).set("isEnabled",this.get("isEnabled")&&this.get("contentIsEditable")).set("isActive",this._checkboxIsActive).set("title","");c.render(b,a);a=a.end();this._checkboxRenderDelegate=c},renderIcon:function(c,f){var b=null,e=null,a=[];if(f&&SC.ImageView.valueIsUrl(f)){b=f;e=""}else{e=f;b=SC.BLANK_IMAGE_URL}a.push(e,"icon");c.begin("img").addClass(a).attr("src",b).end()},renderLabel:function(b,a){b.push("<label>",a||"","</label>")},renderRightIcon:function(c,f){var b=null,e=null,a=[];if(f&&SC.ImageView.valueIsUrl(f)){b=f;e=""}else{e=f;b=SC.BLANK_IMAGE_URL}a.push("right-icon",e);c.begin("img").addClass(a).attr("src",b).end()},renderCount:function(a,b){a.push('<span class="count"><span class="inner">',b.toString(),"</span></span>")},renderAction:function(a,b){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="action" />')},renderBranch:function(c,b){var a=[];a.push("branch",b?"branch-visible":"branch-hidden");c.begin("span").addClass(a).push("&nbsp;").end()}});SC.ListItemView._deprecatedRenderWarningHasBeenIssued=false;sc_require("mixins/collection_view_delegate");sc_require("views/list_item");SC.DRAG_REORDER=16;SC.BENCHMARK_RELOAD=NO;SC.CollectionView=SC.View.extend(SC.CollectionViewDelegate,SC.CollectionContent,{classNames:["sc-collection-view"],displayProperties:["hasFirstResponder","isEnabled","isActive"],renderDelegateName:"collectionRenderDelegate",ACTION_DELAY:200,useFastPath:NO,content:null,contentBindingDefault:SC.Binding.multiple(),length:0,nowShowing:function(){return this.computeNowShowing()}.property("length","clippingFrame").cacheable(),selection:null,isSelectable:YES,isSelectableBindingDefault:SC.Binding.bool(),isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),isEditable:YES,isEditableBindingDefault:SC.Binding.bool(),canReorderContent:NO,canReorderContentBindingDefault:SC.Binding.bool(),canDeleteContent:NO,canDeleteContentBindingDefault:SC.Binding.bool(),canEditContent:NO,canEditContentBindingDefault:SC.Binding.bool(),isDropTarget:NO,useToggleSelection:NO,actOnSelect:NO,selectOnMouseDown:YES,exampleView:SC.ListItemView,contentExampleViewKey:null,groupExampleView:null,contentGroupExampleViewKey:null,action:null,target:null,contentValueKey:null,acceptsFirstResponder:NO,isActive:NO,calculatedHeight:0,calculatedWidth:0,computeLayout:function(){return null},layoutForContentIndex:function(a){return null},allContentIndexes:function(){return SC.IndexSet.create(0,this.get("length")).freeze()}.property("length").cacheable(),contentIndexesInRect:function(a){return null},computeNowShowing:function(){var c=this.contentIndexesInRect(this.get("clippingFrame"));if(!c){c=this.get("allContentIndexes")}else{var b=this.get("length"),a=c.get("max");if(a>b){c=c.copy().remove(b,a-b).freeze()}}return c},showInsertionPoint:function(a,b){},hideInsertionPoint:function(){},delegate:null,selectionDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionViewDelegate",a,b)}.property("delegate","content").cacheable(),contentDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionContent",a,b)}.property("delegate","content").cacheable(),_contentGroupIndexes:function(){return this.get("contentDelegate").contentGroupIndexes(this,this.get("content"))}.property("contentDelegate","content").cacheable(),contentRangeDidChange:function(e,b,c,a){if(!b&&(c==="[]")){this.notifyPropertyChange("_contentGroupIndexes");this.reload(a)}else{this.contentPropertyDidChange(b,c,a)}},contentPropertyDidChange:function(c,b,a){},updateContentRangeObserver:function(){var e=this.get("nowShowing"),a=this._cv_contentRangeObserver,c=this.get("content");if(!c){return}if(a){c.updateRangeObserver(a,e)}else{var b=this.contentRangeDidChange;a=c.addRangeObserver(e,this,b,null);this._cv_contentRangeObserver=a}},removeContentRangeObserver:function(){var b=this.get("content"),a=this._cv_contentRangeObserver;if(a){if(b){b.removeRangeObserver(a)}this._cv_contentRangeObserver=null}},contentLengthDidChange:function(){var a=this.get("content");this.set("length",a?a.get("length"):0);this.computeLayout()},_cv_contentDidChange:function(){var b=this.get("content"),a=this.contentLengthDidChange;if(b===this._content){return}this.removeContentRangeObserver();if(this._content){this._content.removeObserver("length",this,a)}this._content=b;if(b){b.addObserver("length",this,a)}this.contentLengthDidChange();this.contentRangeDidChange(b,null,"[]",null)}.observes("content"),_invalidIndexes:NO,reload:function(a){var b=this._invalidIndexes;if(a&&b!==YES){if(b){b.add(a)}else{b=this._invalidIndexes=a.clone()}}else{this._invalidIndexes=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadIfNeeded)}return this},reloadIfNeeded:function(){var z=this._invalidIndexes;if(!z||!this.get("isVisibleInWindow")){return this}this._invalidIndexes=NO;var w=this.get("content"),x,y,o,B=this.computeLayout(),A=SC.BENCHMARK_RELOAD,c=this.get("nowShowing"),C=this._sc_itemViews,p=this.get("containerView")||this,a,t,v,u,m,q,j,s,f,n,l,D,e,b,h,k,g;if(z.isIndexSet&&z.contains(c)){z=YES}if(this.willReload){this.willReload(z===YES?null:z)}a=this.get("exampleView");v=a?a.isReusableInCollections:NO;t=this.get("groupExampleView");u=t?t.isReusableInCollections:NO;if(z.isIndexSet){if(A){SC.Benchmark.start(A="%@#reloadIfNeeded (Partial)".fmt(this),YES)}q=[];j=[];s=[];z.forEach(function(E){o=C?C[E]:null;if(c.contains(E)){if(o&&o.parentView===p){j.push(E)}else{s.push(E)}}else{if(o&&o.parentView===p){q.push(E)}}},this);for(x=0,y=q.length;x<y;++x){n=q[x];o=C?C[n]:null;delete C[n];h=this.get("contentDelegate");k=this.get("_contentGroupIndexes");g=k&&k.contains(n);if(g){g=h.contentIndexIsGroup(this,w,n)}m=g?u:v;if(m){b=g?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(o);o.destroyLayer()}D=o.get("layer");if(D&&D.parentNode){D.parentNode.removeChild(D)}p.removeChild(o);if(!m){o.destroy()}}for(x=0,y=j.length;x<y;++x){n=j[x];o=C?C[n]:null;l=this.itemViewForContentIndex(n,YES);o.destroyLayer();p.replaceChild(l,o)}for(x=0,y=s.length;x<y;++x){n=s[x];l=this.itemViewForContentIndex(n,YES);p.insertBefore(l,null)}if(A){SC.Benchmark.end(A)}}else{if(A){SC.Benchmark.start(A="%@#reloadIfNeeded (Full)".fmt(this),YES)}if(C){C.length=0}f=p.get("childViews");if(f){f=f.copy()}p.beginPropertyChanges();if(this.willRemoveAllChildren){this.willRemoveAllChildren()}p.destroyLayer().removeAllChildren();if(f){for(x=0,y=f.length;x<y;++x){l=f[x];g=l.get("isGroupView");m=g?u:v;if(m){b=g?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(l);l.destroyLayer()}else{l.destroy()}}}f=[];c.forEach(function(E){f.push(this.itemViewForContentIndex(E,YES))},this);p.set("childViews",f);p.replaceLayer();p.endPropertyChanges();if(A){SC.Benchmark.end(A)}}if(B){this.adjust(B)}if(this.didReload){this.didReload(z===YES?null:z)}return this},_TMP_ATTRS:{},_COLLECTION_CLASS_NAMES:["sc-collection-item"],_GROUP_COLLECTION_CLASS_NAMES:["sc-collection-item","sc-group-item"],_VIEW_POOL:null,_GROUP_VIEW_POOL:null,itemViewForContentIndex:function(n,a){var y;var x=this._sc_itemViews;if(!x){x=this._sc_itemViews=[]}else{if(!a&&(y=x[n])){return y}}var p=this.get("content"),s=p.objectAt(n),j=this.get("contentDelegate"),l=this.get("_contentGroupIndexes"),k=NO,z,m,t,g,u,e,b,c,w,h,f,q,v;k=l&&l.contains(n);if(k){k=j.contentIndexIsGroup(this,p,n)}if(k){z=this.get("contentGroupExampleViewKey");if(z&&s){m=s.get(z)}if(!m){m=this.get("groupExampleView")||this.get("exampleView")}u="_GROUP_VIEW_POOL"}else{z=this.get("contentExampleViewKey");if(z&&s){m=s.get(z)}if(!m){m=this.get("exampleView")}u="_VIEW_POOL"}c=this.get("containerView")||this;g=this.layerIdFor(n);w=j.contentIndexIsEnabled(this,p,n);h=j.contentIndexIsSelected(this,p,n);f=j.contentIndexOutlineLevel(this,p,n);q=j.contentIndexDisclosureState(this,p,n);v=this.isVisibleInWindow;t=this.layoutForContentIndex(n);if(m&&m.isReusableInCollections){e=this[u];if(!e){e=this[u]=[]}if(e.length>0){y=e.pop();b=y.prepareForReuse;if(b){b.call(y)}y.beginPropertyChanges();y.set("contentIndex",n);y.set("layerId",g);y.set("isEnabled",w);y.set("isSelected",h);y.set("outlineLevel",f);y.set("disclosureState",q);y.set("isVisibleInWindow",v);y.set("parentView",c);SC.View.views[g]=y;if(t){y.set("layout",t)}else{y.set("layout",m.prototype.layout)}y.set("content",s);y.endPropertyChanges()}}if(!y){var o=this._TMP_ATTRS;o.contentIndex=n;o.content=s;o.owner=o.displayDelegate=this;o.parentView=c;o.page=this.page;o.layerId=g;o.isEnabled=w;o.isSelected=h;o.outlineLevel=f;o.disclosureState=q;o.isGroupView=k;o.isVisibleInWindow=v;if(k){o.classNames=this._GROUP_COLLECTION_CLASS_NAMES}else{o.classNames=this._COLLECTION_CLASS_NAMES}if(t){o.layout=t}else{delete o.layout}y=this.createItemView(m,n,o)}x[n]=y;return y},itemViewForContentObject:function(a){return this.itemViewForContentIndex(this.get("content").indexOf(a))},_TMP_LAYERID:[],createItemView:function(c,a,b){return c.create(b)},layerIdFor:function(a){var b=this._TMP_LAYERID;b[0]=SC.guidFor(this);b[1]=a;return b.join("-")},contentIndexForLayerId:function(c){if(!c||!(c=c.toString())){return null}var b=this._baseLayerId;if(!b){b=this._baseLayerId=SC.guidFor(this)+"-"}if((c.length<=b.length)||(c.indexOf(b)!==0)){return null}var a=Number(c.slice(c.lastIndexOf("-")+1));return isNaN(a)?null:a},itemViewForEvent:function(l){var e=this.getPath("pane.rootResponder");if(!e){return null}var c=SC.guidFor(this)+"-",a=c.length,f=l.target,h=this.get("layer"),g=null,b,k,j;while(f&&f!==document&&f!==h){b=f?SC.$(f).attr("id"):null;if(b&&(g=this.contentIndexForLayerId(b))!==null){break}f=f.parentNode}if(g===null||(f===h)){f=h=null;return null}if(g>=this.get("length")){throw"layout for item view %@ was found when item view does not exist (%@)".fmt(b,this)}return this.itemViewForContentIndex(g)},expand:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(e){var f=a.contentIndexDisclosureState(this,c,e);if(f===SC.BRANCH_CLOSED){a.contentIndexExpand(this,c,e)}},this);return this},collapse:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(e){var f=a.contentIndexDisclosureState(this,c,e);if(f===SC.BRANCH_OPEN){a.contentIndexCollapse(this,c,e)}},this);return this},_cv_selectionDidChange:function(){var c=this.get("selection"),b=this._cv_selection,a=this._cv_selectionContentDidChange;if(c===b){return}if(b){b.removeObserver("[]",this,a)}if(c){c.addObserver("[]",this,a)}this._cv_selection=c;this._cv_selectionContentDidChange()}.observes("selection"),_cv_selectionContentDidChange:function(){var c=this.get("selection"),b=this._cv_selindexes,a=this.get("content"),e;this._cv_selindexes=c?c.frozenCopy():null;if(b){b=b.indexSetForSource(a)}if(c){c=c.indexSetForSource(a)}if(c&&b){e=c.without(b).add(b.without(c))}else{e=c||b}if(e&&e.get("length")>0){this.reloadSelectionIndexes(e)}},_invalidSelection:NO,reloadSelectionIndexes:function(a){var b=this._invalidSelection;if(a&&(b!==YES)){if(b){b.add(a)}else{b=this._invalidSelection=a.copy()}}else{this._invalidSelection=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}return this},reloadSelectionIndexesIfNeeded:function(){var f=this._invalidSelection;if(!f||!this.get("isVisibleInWindow")){return this}var e=this.get("nowShowing"),b=this._invalidIndexes,a=this.get("content"),c=this.get("selection");this._invalidSelection=NO;if(b===YES||!e){return this}if(f===YES){f=e}if(b&&b.isIndexSet){f=f.without(b)}f.forEach(function(g){if(!e.contains(g)){return}var h=this.itemViewForContentIndex(g,NO);if(h){h.set("isSelected",c?c.contains(a,g):NO)}},this);return this},select:function(c,g){var e=this.get("content"),a=this.get("selectionDelegate"),b=this.get("_contentGroupIndexes"),f;if(!this.get("isSelectable")||!this.get("isEnabled")){return this}if(SC.typeOf(c)===SC.T_NUMBER){c=SC.IndexSet.create(c,1)}if(c&&c.get("length")>0){if(b&&b.get("length")>0){c=c.copy().remove(b)}c=a.collectionViewShouldSelectIndexes(this,c,g);if(!c||c.get("length")===0){return this}}else{c=null}if(g&&(f=this.get("selection"))){f=f.copy()}else{f=SC.SelectionSet.create()}if(c&&c.get("length")>0){if(c.get("length")===1){f.addObject(e.objectAt(c.get("firstObject")))}else{f.add(e,c)}}f=a.collectionViewSelectionForProposedSelection(this,f);if(!f){f=SC.SelectionSet.create()}this._selectionAnchor=null;this.set("selection",f.freeze());return this},deselect:function(b){var e=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate");if(!this.get("isSelectable")||!this.get("isEnabled")){return this}if(!e||e.get("length")===0){return this}if(SC.typeOf(b)===SC.T_NUMBER){b=SC.IndexSet.create(b,1)}b=a.collectionViewShouldDeselectIndexes(this,b);if(!b||b.get("length")===0){return this}e=e.copy().remove(c,b);e=a.collectionViewSelectionForProposedSelection(this,e);if(!e){e=SC.SelectionSet.create()}this.set("selection",e.freeze());return this},_findNextSelectableItemFromIndex:function(j,a){var c=this.get("length"),e=SC.IndexSet.create(),f=this.get("content"),k=this.get("selectionDelegate"),h=this.get("_contentGroupIndexes"),g,b;if(!h&&(k.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return j}while(j<c){if(!h||!h.contains(j)){e.add(j);g=k.collectionViewShouldSelectIndexes(this,e);if(g&&g.get("length")>=1){return j}e.remove(j)}j++}if(a===undefined){b=this.get("selection");a=b?b.get("max"):-1}return a},_findPreviousSelectableItemFromIndex:function(b,j){var c=SC.IndexSet.create(),g=this.get("content"),a=this.get("selectionDelegate"),f=this.get("_contentGroupIndexes"),e;if(SC.none(b)){b=-1}if(!f&&(a.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return b}while(b>=0){if(!f||!f.contains(b)){c.add(b);e=a.collectionViewShouldSelectIndexes(this,c);if(e&&e.get("length")>=1){return b}c.remove(b)}b--}if(j===undefined){var h=this.get("selection");j=h?h.get("min"):-1}if(SC.none(j)){j=-1}return j},selectPreviousItem:function(j,b){if(SC.none(b)){b=1}if(SC.none(j)){j=false}var g=this.get("selection"),f=this.get("content");if(g){g=g.indexSetForSource(f)}var h=g?g.get("min"):-1,a=g?g.get("max")-1:-1,e=this._selectionAnchor;if(SC.none(e)){e=h}if(j){if(a>e){a=a-b}else{h=this._findPreviousSelectableItemFromIndex(h-b)}if(SC.none(h)||(h<0)){h=0}if(!f.objectAt(h)){h=g?g.get("min"):-1}if(a<h){a=h}}else{h=this._findPreviousSelectableItemFromIndex(h-b);if(SC.none(h)||(h<0)){h=0}if(!f.objectAt(h)){h=g?g.get("min"):-1}a=h;e=null}var c=h;g=SC.IndexSet.create(h,a+1-h);this.scrollToContentIndex(c);this.select(g);this._selectionAnchor=e;return this},selectNextItem:function(j,k){if(SC.none(k)){k=1}if(SC.none(j)){j=false}var b=this.get("selection"),h=this.get("content");if(b){b=b.indexSetForSource(h)}var a=b?b.get("min"):-1,e=b?b.get("max")-1:-1,f=this._selectionAnchor,c=this.get("length");if(SC.none(f)){f=a}if(j){if(a<f){a=a+k}else{e=this._findNextSelectableItemFromIndex(e+k,e)}if(e>=c){e=c-1}if(!h.objectAt(e)){e=b?b.get("max")-1:-1}if(a>e){a=e}}else{e=this._findNextSelectableItemFromIndex(e+k,e);if(e>=c){e=c-1}if(!h.objectAt(e)){e=b?b.get("max")-1:-1}a=e;f=null}var g=e;b=SC.IndexSet.create(a,e-a+1);this.scrollToContentIndex(g);this.select(b);this._selectionAnchor=f;return this},deleteSelection:function(){if(!this.get("canDeleteContent")){return NO}var e=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate"),b=e&&c?e.indexSetForSource(c):null;if(!c||!b||b.get("length")===0){return NO}b=a.collectionViewShouldDeleteIndexes(this,b);if(!b||b.get("length")===0){return NO}a.collectionViewDeleteContent(this,this.get("content"),b);return YES},scrollToContentIndex:function(b){var a=this.itemViewForContentIndex(b);if(a){this.scrollToItemView(a)}return this},scrollToItemView:function(a){if(a){a.scrollToVisible()}return this},keyDown:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},keyUp:function(){return true},insertText:function(b,a){if(b===" "){var c=this.get("selection");if(c&&c.get("length")>0){this.invokeLater(this._cv_action,0,null,a)}return YES}else{return NO}},selectAll:function(a){var b=this.get("content"),c=b?SC.IndexSet.create(0,b.get("length")):null;this.select(c,NO);return YES},deselectAll:function(){var a=this.get("content"),b=a?SC.IndexSet.create(0,a.get("length")):null;this.deselect(b,NO);return YES},deleteBackward:function(a){return this.deleteSelection()},deleteForward:function(a){return this.deleteSelection()},moveDown:function(b,a){this.selectNextItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUp:function(b,a){this.selectPreviousItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeft:function(m){if(m.ctrlKey||m.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(false,1);this._cv_performSelectAction(null,m,this.ACTION_DELAY)}else{var c=this.get("selection"),k=this.get("content"),h=c?c.indexSetForSource(k):null;if(h){var n=undefined,g=false,j=undefined;if(h.get("length")===1){j=h.get("firstObject");n=this.get("contentDelegate");var b=n.contentIndexDisclosureState(this,k,j);if(b!==SC.BRANCH_OPEN){g=true}}if(g){var a=n.contentIndexOutlineLevel(this,k,j)-1;if(a>=0){var f=-1;while(f<0){var e=this._findPreviousSelectableItemFromIndex(j-1);if(e<0){return false}j=e;var l=n.contentIndexOutlineLevel(this,k,j);if(l===a){f=e}}if(f!==-1){this.select(j)}}}else{this.collapse(h)}}}return true},moveRight:function(a){if(a.ctrlKey||a.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectNextItem(false,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}else{var e=this.get("selection"),c=this.get("content"),b=e?e.indexSetForSource(c):null;if(b){this.expand(b)}}return true},moveDownAndModifySelection:function(b,a){this.selectNextItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUpAndModifySelection:function(b,a){this.selectPreviousItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeftAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},moveRightAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectNextItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},insertNewline:function(e,c){var b=this.get("isEditable")&&this.get("canEditContent"),h,g,j,a,f;if(b){h=this.get("selection");g=this.get("content");if(h&&h.get("length")===1){j=h.indexSetForSource(g);a=j?j.get("min"):-1;b=a>=0}}if(b){f=this.itemViewForContentIndex(a);b=f&&SC.typeOf(f.beginEditing)===SC.T_FUNCTION}if(b){this.scrollToContentIndex(a);f=this.itemViewForContentIndex(a);f.beginEditing()}else{this.invokeLater(this._cv_action,0,f,null)}return YES},insertTab:function(b){var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertBacktab:function(b){var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},mouseDown:function(l){var h=this.get("content");if(!h){return this.get("isSelectable")}var j=this.itemViewForEvent(l),f=j?j.get("contentIndex"):-1,c,e,b,a,m,g=NO,k=h.get("allowsMultipleSelection");if(!this.get("isEnabled")){return f>-1}if(!this.get("isSelectable")){return NO}this.becomeFirstResponder();if(this.get("useToggleSelection")){if(this.get("selectOnMouseDown")){if(!j){return}b=this.get("selection");a=b&&b.containsObject(j.get("content"));if(a){this.deselect(f)}else{if(!k){this.select(f,NO);g=YES}else{this.select(f,YES);g=YES}}if(g&&this.get("actOnSelect")){this._cv_performSelectAction(j,l)}}return YES}if(!j){if(this.get("allowDeselectAll")){this.select(null,false)}return YES}b=this.get("selection");if(b){b=b.indexSetForSource(h)}c=this.mouseDownInfo={event:l,itemView:j,contentIndex:f,at:Date.now()};a=b?b.contains(f):NO;c.modifierKeyPressed=m=l.ctrlKey||l.metaKey;if(m&&a){c.shouldDeselect=f>=0}else{if(l.shiftKey&&b&&b.get("length")>0&&k){b=this._findSelectionExtendedByShift(b,f);e=this._selectionAnchor;this.select(b);this._selectionAnchor=e}else{if(!m&&a){c.shouldReselect=f>=0}else{if((l.shiftKey||m)&&!k){this.select(null,false)}if(this.get("selectOnMouseDown")){this.select(f,m)}else{c.shouldSelect=f>=0}}}}c.previousContentIndex=f;return YES},mouseUp:function(k){var l=this.itemViewForEvent(k),e=this.mouseDownInfo,g=this.get("content"),f=l?l.get("contentIndex"):-1,c,a,b,h,m,j=g.get("allowsMultipleSelection");if(!this.get("isEnabled")){return f>-1}if(!this.get("isSelectable")){return NO}if(this.get("useToggleSelection")){if(!l||this.get("selectOnMouseDown")){return NO}c=this.get("selection");a=c&&c.containsObject(l.get("content"));if(a){this.deselect(f)}else{if(!j){this.select(f,NO)}else{this.select(f,YES)}}}else{if(e){m=e.contentIndex;f=(l)?l.get("contentIndex"):-1;if(e.shouldSelect){this.select(m,e.modifierKeyPressed)}if(e.shouldDeselect){this.deselect(m)}if(e.shouldReselect){b=this.get("isEditable")&&this.get("canEditContent");if(b){c=this.get("selection");b=c&&(c.get("length")===1)}if(b){h=this.itemViewForContentIndex(m);b=h&&(!h.contentHitTest||h.contentHitTest(k));b=(b&&h.beginEditing)?h.beginEditing():NO}if(!b){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}this._cv_reselectTimer=this.invokeLater(this.select,300,m,false)}}this._cleanupMouseDown()}}this._cv_performSelectAction(l,k,0,k.clickCount);return NO},_cleanupMouseDown:function(){var b=this.mouseDownInfo,a;if(b){for(a in b){if(!b.hasOwnProperty(a)){continue}delete b[a]}}this.mouseDownInfo=null},mouseMoved:function(c){var a=this.itemViewForEvent(c),b=this._lastHoveredItem;if(a!==b){if(b&&b.mouseExited){b.mouseExited(c)}if(a&&a.mouseEntered){a.mouseEntered(c)}}this._lastHoveredItem=a;if(a&&a.mouseMoved){a.mouseMoved(c)}return YES},mouseExited:function(b){var a=this._lastHoveredItem;this._lastHoveredItem=null;if(a&&a.mouseExited){a.mouseExited(b)}return YES},touchStart:function(e,a){var b=this.itemViewForEvent(e),c=b?b.get("contentIndex"):-1;if(!this.get("isEnabled")){return c>-1}this.becomeFirstResponder();this._touchSelectedView=b;if(!this.get("useToggleSelection")){if(b&&!b.get("isSelected")){b.set("isSelected",YES)}}return YES},touchesDragged:function(a,b){b.forEach(function(c){if(Math.abs(c.pageX-c.startX)>5||Math.abs(c.pageY-c.startY)>5){c.makeTouchResponder(c.nextTouchResponder)}},this)},touchEnd:function(f){var b=this._touchSelectedView,e=b?b.get("contentIndex"):-1,a=NO,c;if(!this.get("isEnabled")){return e>-1}if(b){b.set("isSelected",NO)}if(e>-1){if(this.get("useToggleSelection")){c=this.get("selection");a=c&&c.containsObject(b.get("content"))}if(a){this.deselect(e)}else{this.select(e,NO);this._cv_performSelectAction(b,f,0)}}this._touchSelectedView=null},touchCancelled:function(a){if(this._touchSelectedView){this._touchSelectedView.set("isSelected",NO);this._touchSelectedView=null}},_findSelectionExtendedByShift:function(f,j){if(!f||f.get("length")===0){return SC.IndexSet.create(j)}var e=this.get("content"),h=e.get("length")-1,c=f.get("min"),a=f.get("max")-1,g=this.mouseDownInfo,b=this._selectionAnchor;if(SC.none(b)){b=-1}if(j<c){c=j;if(b<0){this._selectionAnchor=b=a}}else{if(j>a){a=j;if(b<0){this._selectionAnchor=b=c}}else{if(j>=c&&j<=a){if(b<0){this._selectionAnchor=b=c}if(j===b){c=a=j}else{if(j>b){c=b;a=j}else{if(j<b){c=j;a=b}}}}}}return SC.IndexSet.create(c,a-c+1)},reorderDataType:function(){return"SC.CollectionView.Reorder."+SC.guidFor(this)}.property().cacheable(),dragContent:null,proposedInsertionIndex:null,proposedDropOperation:null,mouseDragged:function(j){var k=this.get("selectionDelegate"),f=this.get("content"),a=this.get("selection"),c=this.mouseDownInfo,g=this.get("_contentGroupIndexes"),e,b,h;if(!c||c.contentIndex<0){return YES}if((Date.now()-c.at)<123){return YES}if(k.collectionViewShouldBeginDrag(this)){if(!this.get("selectOnMouseDown")){e=SC.IndexSet.create(c.contentIndex)}else{e=a?a.indexSetForSource(f):null}if(e&&g&&g.get("length")>0){e=e.copy().remove(g);if(e.get("length")===0){e=null}else{e.freeze()}}if(!e){return YES}else{e=e.frozenCopy()}e={content:f,indexes:e};this.set("dragContent",e);b=this.get("dragDataTypes");if(b&&b.get("length")>0){h=k.collectionViewDragViewFor(this,e.indexes);if(!h){h=this._cv_dragViewFor(e.indexes)}h.createLayer();SC.Drag.start({event:c.event,source:this,dragView:h,ghost:NO,ghostActsLikeCursor:k.ghostActsLikeCursor,slideBack:YES,dataSource:this});this._cleanupMouseDown();this._lastInsertionIndex=null}else{this.set("dragContent",null)}return YES}},_cv_dragViewFor:function(g){var c=this.get("nowShowing").without(g),e=this.get("layer").cloneNode(false),b=SC.View.create({layer:e,parentView:this}),a=0,f;c=this.get("nowShowing").without(c);SC.$(e).css("backgroundColor","transparent").css("border","none").css("top",0).css("left",0);c.forEach(function(k){var l=this.itemViewForContentIndex(k),h,j;if(l){h=l.get("isSelected");l.set("isSelected",NO);l.updateLayerIfNeeded();j=l.get("layer");if(j){j=j.cloneNode(true)}l.set("isSelected",h);l.updateLayerIfNeeded()}if(j){e.appendChild(j);f=l.get("layout");if(f.height+f.top>a){a=f.height+f.top}}j=null},this);b.set("layout",{height:a});e=null;return b},dragDataTypes:function(){var a=this.get("selectionDelegate"),b=a.collectionViewDragDataTypes(this),c;if(this.get("canReorderContent")){b=b?b.copy():[];c=this.get("reorderDataType");if(b.indexOf(c)<0){b.push(c)}}return b?b:[]}.property(),dragDataForType:function(c,b){if(this.get("canReorderContent")){if(b===this.get("reorderDataType")){return this.get("dragContent")}}var a=this.get("selectionDelegate");return a.collectionViewDragDataForType(this,c,b)},computeDragOperations:function(c,b){var e=SC.DRAG_NONE,a=this.get("selectionDelegate");if(this.get("canReorderContent")){if(c.get("dataTypes").indexOf(this.get("reorderDataType"))>=0){e=SC.DRAG_REORDER}}e=a.collectionViewComputeDragOperations(this,c,e);if(e&SC.DRAG_REORDER){e=SC.DRAG_MOVE}return e},_computeDropOperationState:function(c,n,f){var h=this.convertFrameFromView(c.get("location"),null),m=SC.DROP_BEFORE,o=this.get("selectionDelegate"),e=this.get("canReorderContent"),p,j,a,k,g,b;var l=this.insertionIndexForLocation(h,SC.DROP_ON);if(SC.typeOf(l)===SC.T_ARRAY){m=l[1];l=l[0]}if(m===SC.DROP_ON){this.set("proposedInsertionIndex",l);this.set("proposedDropOperation",m);b=o.collectionViewValidateDragOperation(this,c,f,l,m);l=this.get("proposedInsertionIndex");m=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;if(b!==SC.DRAG_NONE){return[l,m,b]}else{m=SC.DROP_BEFORE;l=this.insertionIndexForLocation(h,SC.DROP_BEFORE);if(SC.typeOf(l)===SC.T_ARRAY){m=l[1];l=l[0]}}}if((l>=0)&&e&&(m!==SC.DROP_ON)){p=c.dataForType(this.get("reorderDataType"));if(p){j=this.get("content");if(m===SC.DROP_BEFORE){a=p.indexes.contains(l-1);k=p.indexes.contains(l)}else{a=p.indexes.contains(l);k=p.indexes.contains(l-1)}if(a&&k){if(SC.none(this._lastInsertionIndex)){if(m===SC.DROP_BEFORE){while((l>=0)&&p.indexes.contains(l)){l--}}else{g=j?j.get("length"):0;while((l<g)&&p.indexes.contains(l)){l++}}}else{l=this._lastInsertionIndex}}if(l>=0){f=SC.DRAG_REORDER}}}this.set("proposedInsertionIndex",l);this.set("proposedDropOperation",m);f=o.collectionViewValidateDragOperation(this,c,f,l,m);l=this.get("proposedInsertionIndex");m=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;return[l,m,f]},dragUpdated:function(g,b){var j=g.get("allowedDragOperations"),h=this._computeDropOperationState(g,b,j),a=h[0],c=h[1],f=h[2];if(f!==SC.DRAG_NONE){if((this._lastInsertionIndex!==a)||(this._lastDropOperation!==c)){var e=this.itemViewForContentIndex(a);this.showInsertionPoint(e,c)}this._lastInsertionIndex=a;this._lastDropOperation=c}else{this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null}return(f&SC.DRAG_REORDER)?SC.DRAG_MOVE:f},dragExited:function(){this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null},acceptDragOperation:function(a,b){return YES},performDragOperation:function(f,h){var a=this._computeDropOperationState(f,null,h),m=a[0],l=a[1],j=a[2],n=this.get("selectionDelegate"),c,o,e,k,b,g;if(j&SC.DRAG_REORDER){h=(h&SC.DRAG_MOVE)?SC.DRAG_REORDER:SC.DRAG_NONE}else{h=h&j}if(h===SC.DRAG_NONE){return h}c=n.collectionViewPerformDragOperation(this,f,h,m,l);if((c===SC.DRAG_NONE)&&(h&SC.DRAG_REORDER)){e=f.dataForType(this.get("reorderDataType"));if(!e){return SC.DRAG_NONE}k=this.get("content");g=e.indexes;if(g.get("length")===1){if(((l===SC.DROP_BEFORE)||(l===SC.DROP_AFTER))&&(g.get("min")===m)){return SC.DRAG_MOVE}}k.beginPropertyChanges();o=[];b=0;e.indexes.forEach(function(p){o.push(k.objectAt(p-b));k.removeAt(p-b);b++;if(p<m){m--}},this);if(l===SC.DROP_AFTER){m++}k.replace(m,0,o,l);this.select(SC.IndexSet.create(m,o.length));k.endPropertyChanges();h=SC.DRAG_MOVE}return h},collectionViewShouldBeginDrag:function(a){return this.get("canReorderContent")},insertionIndexForLocation:function(a,b){return -1},_cv_isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){if(this._invalidIndexes){this.invokeOnce(this.reloadIfNeeded)}if(this._invalidSelection){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}}}.observes("isVisibleInWindow"),collectionViewShouldSelectItem:function(a,b){return this.get("isSelectable")},_TMP_DIFF1:SC.IndexSet.create(),_TMP_DIFF2:SC.IndexSet.create(),_cv_nowShowingDidChange:function(){var b=this.get("nowShowing"),a=this._sccv_lastNowShowing,e,f,c;if(a!==b){if(a&&b){f=this._TMP_DIFF1.add(a).remove(b);c=this._TMP_DIFF2.add(b).remove(a);e=f.add(c)}else{e=a||b}}if(e&&e.get("length")>0){this._sccv_lastNowShowing=b?b.frozenCopy():null;this.updateContentRangeObserver();this.reload(e)}if(f){f.clear()}if(c){c.clear()}}.observes("nowShowing"),init:function(){arguments.callee.base.apply(this,arguments);if(this.useFastPath){this.mixin(SC.CollectionFastPath)}if(this.get("canReorderContent")){this._cv_canReorderContentDidChange()}this._sccv_lastNowShowing=this.get("nowShowing").clone();if(this.content){this._cv_contentDidChange()}if(this.selection){this._cv_selectionDidChange()}},_cv_canReorderContentDidChange:function(){if(this.get("canReorderContent")){if(!this.get("isDropTarget")){this.set("isDropTarget",YES)}SC.Drag.addDropTarget(this)}}.observes("canReorderContent"),_cv_performSelectAction:function(b,e,c,a){var f;if(c===undefined){c=0}if(a===undefined){a=1}if((a>1)||this.get("actOnSelect")){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}f=this.get("selection");f=f?f.toArray():[];if(this._cv_actionTimer){this._cv_actionTimer.invalidate()}this._cv_actionTimer=this.invokeLater(this._cv_action,c,b,e,f)}},_cv_action:function(b,a,c){var e=this.get("action");var f=this.get("target")||null;this._cv_actionTimer=null;if(e){if(SC.typeOf(e)===SC.T_FUNCTION){return this.action(b,a)}var g=this.get("pane");if(g){g.rootResponder.sendAction(e,f,this,g,c)}}else{if(!b){return}else{if(SC.typeOf(b._action)==SC.T_FUNCTION){return b._action(a)}else{if(SC.typeOf(b.action)==SC.T_FUNCTION){return b.action(a)}}}}}});SC.DateFieldView=SC.TextFieldView.extend({value:null,showDate:YES,showTime:NO,formatTime:"%I:%M %p",formatDate:"%d/%m/%Y",formatDateTime:"%d/%m/%Y %I:%M %p",_dtConstants:["%a","%b","%d","%H","%I","%j","%m","%M","%p","%S","%U","%W","%y","%Y"],_wtConstants:[3,3,2,2,2,3,2,2,2,2,2,2,2,4],activeSelection:0,format:function(){var a=this.get("showTime");var b=this.get("showDate");if(a===YES&&b===YES){return this.get("formatDateTime")}if(a===YES){return this.get("formatTime")}return this.get("formatDate")}.property("showTime","showDate").cacheable(),validator:function(){return SC.Validator.DateTime.extend({format:this.get("format")})}.property("format").cacheable(),tabsSelections:function(){var g=[];var e=this.get("format");var k=this.get("_dtConstants");var b=this.get("_wtConstants");if(SC.empty(e)){throw"The format string is empty, and must be a valid string."}var h,l,c,f=0,a=0,j=0;while(f<e.length&&e.indexOf("%",f)!==-1){h=e.indexOf("%",f);l=e.substring(h,h+2);f=h+2;c=k.indexOf(l);if(c===-1){throw"SC.DateFieldView: The format's key '%@' is not supported.".fmt(l)}a=a+h-j;g.push(SC.Object.create({key:l,textSelection:SC.TextSelection.create({start:a,end:a+b[c]})}));a=a+b[c];j=f}h=l=c=null;return g}.property("format").cacheable(),updateTextSelectionObserver:function(){var a=this.get("activeSelection");var b=this.get("tabsSelections");if(this.get("isEditing")){this.selection(null,b[a].get("textSelection"))}}.observes("activeSelection","value"),updateValue:function(b,c){var f=(c===0)?-1:1;var e=this.get("value"),a;switch(b){case"%a":case"%d":case"%j":this.set("value",e.advance({day:f}));break;case"%b":case"%m":this.set("value",e.advance({month:f}));break;case"%H":case"%I":this.set("value",e.advance({hour:f}));break;case"%M":this.set("value",e.advance({minute:f}));break;case"%p":a=e.get("hour")>=12?-12:12;this.set("value",e.advance({hour:a}));break;case"%S":this.set("value",e.advance({second:f}));break;case"%U":this.set("value",e.advance({week1:f}));break;case"%W":this.set("value",e.advance({week0:f}));break;case"%y":case"%Y":this.set("value",e.advance({year:f}));break}},_selectRootElement:function(){},keyDown:function(a){if(this.interpretKeyEvents(a)){a.stop();return YES}return arguments.callee.base.apply(this,arguments)},ctrl_a:function(){return YES},moveUp:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),1);return YES},moveDown:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),0);return YES},insertText:function(a){return YES},moveRight:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b===c.length){b=0}this.set("activeSelection",b);return YES},moveLeft:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")-1;if(b===-1){b=c.length-1}this.set("activeSelection",b);return YES},insertTab:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b<c.length){this.set("activeSelection",b);return YES}return NO},insertBacktab:function(a){var b=this.get("activeSelection")-1;if(b!==-1){this.set("activeSelection",b);return YES}return NO},mouseUp:function(b){var c=arguments.callee.base.apply(this,arguments);var f=this.get("selection");if(SC.none(f)){this.set("activeSelection",0)}else{var j=f.get("start");var h=this.get("tabsSelections");var a=h.length,g;for(var e=0;e<a;e++){g=h[e].get("textSelection");if(j>=g.get("start")&&j<=g.get("end")){this.set("activeSelection",e)}}}return c},deleteBackward:function(a){return YES},deleteForward:function(a){return YES}});SC.DisclosureView=SC.ButtonView.extend({classNames:["sc-disclosure-view"],renderDelegateName:"disclosureRenderDelegate",buttonBehavior:SC.TOGGLE_BEHAVIOR,toggleOnValue:YES,toggleOffValue:NO,valueBindingDefault:SC.Binding.bool(),keyDown:function(a){if(a.which===37||a.which===38){this.set("value",this.get("toggleOffValue"));return YES}if(a.which===39||a.which===40){this.set("value",this.get("toggleOnValue"));return YES}arguments.callee.base.apply(this,arguments)}});sc_require("views/collection");sc_require("mixins/collection_row_delegate");SC.ListView=SC.CollectionView.extend(SC.CollectionRowDelegate,{classNames:["sc-list-view"],acceptsFirstResponder:YES,showAlternatingRows:NO,render:function(a,b){a.setClass("alternating",this.get("showAlternatingRows"));return arguments.callee.base.apply(this,arguments)},rowDelegate:function(){var a=this.delegate,b=this.get("content");return this.delegateFor("isCollectionRowDelegate",a,b)}.property("delegate","content").cacheable(),_sclv_rowDelegateDidChange:function(){var e=this._sclv_rowDelegate,b=this.get("rowDelegate"),c=this._sclv_rowHeightDidChange,a=this._sclv_customRowHeightIndexesDidChange;if(e===b){return this}this._sclv_rowDelegate=b;if(e){e.removeObserver("rowHeight",this,c);e.removeObserver("customRowHeightIndexes",this,a)}if(!b){throw"Internal Inconsistancy: ListView must always have CollectionRowDelegate"}b.addObserver("rowHeight",this,c);b.addObserver("customRowHeightIndexes",this,a);this._sclv_rowHeightDidChange()._sclv_customRowHeightIndexesDidChange();return this}.observes("rowDelegate"),_sclv_rowHeightDidChange:function(){var b=this.get("rowDelegate"),a=b.get("rowHeight"),c;if(a===this._sclv_rowHeight){return this}this._sclv_rowHeight=a;c=SC.IndexSet.create(0,this.get("length"));this.rowHeightDidChangeForIndexes(c);return this},_sclv_customRowHeightIndexesDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),e=this._sclv_customRowHeightIndexes,c=this._sclv_customRowHeightIndexesContentDidChange;if((b===e)||(e&&e.isEqual(b))){return this}if(e&&this._sclv_isObservingCustomRowHeightIndexes){e.removeObserver("[]",this,c)}if(this._sclv_isObservingCustomRowHeightIndexes=b&&!b.get("isFrozen")){b.addObserver("[]",this,c)}this._sclv_customRowHeightIndexesContentDidChange();return this},_sclv_customRowHeightIndexesContentDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),c=this._sclv_customRowHeightIndexes,e;if(b&&c){e=b.copy().add(c)}else{e=b||c}this._sclv_customRowHeightIndexes=b?b.frozenCopy():null;this.rowHeightDidChangeForIndexes(e);return this},rowOffsetForContentIndex:function(j){if(j===0){return 0}var l=this.get("rowDelegate"),a=l.get("rowHeight"),g,f,c,b,k,h,e;f=j*a;g=this.get("rowSpacing");if(g){f+=j*g}if(l.customRowHeightIndexes&&(c=l.get("customRowHeightIndexes"))){b=this._sclv_offsetCache;if(!b){b=[];k=h=0;c.forEach(function(m){k+=this.rowHeightForContentIndex(m)-a;b[m+1]=k;h=m},this);this._sclv_max=h+1;this._sclv_offsetCache=b}k=b[j];if(k===undefined){k=b[j]=b[j-1];if(k===undefined){h=this._sclv_max;if(j<h){h=c.indexBefore(j)+1}k=b[j]=b[h]||0}}f+=k}return f},rowHeightForContentIndex:function(a){var b=this.get("rowDelegate"),f,c,g,e;if(b.customRowHeightIndexes&&(e=b.get("customRowHeightIndexes"))){c=this._sclv_heightCache;if(!c){c=[];g=this.get("content");e.forEach(function(h){c[h]=b.contentIndexRowHeight(this,g,h)},this);this._sclv_heightCache=c}f=c[a];if(f===undefined){f=b.get("rowHeight")}}else{f=b.get("rowHeight")}return f},rowHeightDidChangeForIndexes:function(b){var a=this.get("length");this._sclv_heightCache=this._sclv_offsetCache=null;if(b&&b.isIndexSet){b=b.get("min")}this.reload(SC.IndexSet.create(b,a-b));return this},_sclv_lengthDidChange:function(){this.adjust(this.computeLayout())}.observes("length"),computeLayout:function(){var a=this._sclv_layout;if(!a){a=this._sclv_layout={}}a.minHeight=this.rowOffsetForContentIndex(this.get("length"));this.set("calculatedHeight",a.minHeight);return a},layoutForContentIndex:function(b){var a=this.get("rowDelegate");return{top:this.rowOffsetForContentIndex(b),height:this.rowHeightForContentIndex(b)-a.get("rowPadding")*2,left:0,right:0}},contentIndexesInRect:function(j){var a=this.get("rowDelegate").get("rowHeight"),h=SC.minY(j),b=SC.maxY(j),k=j.height||0,g=this.get("length"),f,c,e;c=(h-(h%a))/a;f=this.rowOffsetForContentIndex(c);while(c>0&&f>h){c--;f-=this.rowHeightForContentIndex(c)}f+=this.rowHeightForContentIndex(c);while(c<g&&f<=h){c++;f+=this.rowHeightForContentIndex(c)}if(c<0){c=0}if(c>=g){c=g}e=c+((k-(k%a))/a);if(e>g){e=g}f=this.rowOffsetForContentIndex(e);while(e>=c&&f>=b){e--;f-=this.rowHeightForContentIndex(e)}f+=this.rowHeightForContentIndex(e);while(e<g&&f<b){e++;f+=this.rowHeightForContentIndex(e)}e++;if(e<c){e=c}if(e>g){e=g}return SC.IndexSet.create(c,e-c)},insertionPointView:SC.View.extend({classNames:"sc-list-insertion-point",render:function(a,b){if(b){a.push('<div class="anchor"></div>')}}}),showInsertionPoint:function(h,g){var j=this._insertionPointView;if(!j){j=this._insertionPointView=this.get("insertionPointView").create()}var e=h.get("contentIndex"),f=this.get("length"),c=SC.clone(h.get("layout")),a=h.get("outlineLevel"),b=h.get("outlineIndent")||0,k;if((e>=f)&&e>0){k=this.itemViewForContentIndex(f-1);if(k.get("isGroupView")){a=1;b=k.get("outlineIndent")}}if(SC.none(a)){a=-1}if(g&SC.DROP_ON){if(h!==this._lastDropOnView){this.hideInsertionPoint();h.set("isDropTarget",YES);this._lastDropOnView=h}}else{if(this._lastDropOnView){this._lastDropOnView.set("isDropTarget",NO);this._lastDropOnView=null}if(g&SC.DROP_AFTER){c.top+=c.height}c.height=2;c.right=0;c.left=((a+1)*b)+12;delete c.width;j.set("layout",c);this.appendChild(j)}},hideInsertionPoint:function(){if(this._lastDropOnView){this._lastDropOnView.set("isDropTarget",NO);this._lastDropOnView=null}var a=this._insertionPointView;if(a){a.removeFromParent().destroy()}this._insertionPointView=null},insertionIndexForLocation:function(h,m){var b={x:h.x,y:h.y,width:1,height:1},g=this.contentIndexesInRect(b),j=g.get("min"),k=this.get("length"),c,n,o,f,q,e,p,l,a;if(SC.none(j)||j<0){if((k===0)||(h.y<=this.rowOffsetForContentIndex(0))){j=0}else{if(h.y>=this.rowOffsetForContentIndex(k)){j=k}}}c=this.rowOffsetForContentIndex(j);n=c+this.rowHeightForContentIndex(j);if(m==SC.DROP_ON){if(this.get("isEditable")){o=Math.min(Math.floor((n-c)*0.2),5)}else{o=0}if(h.y>=(c+o)||h.y<=(n+o)){return[j,SC.DROP_ON]}}if(j>0){l=this.itemViewForContentIndex(j-1);p=(l?l.get("outlineIndent"):0)||0;e=l?l.get("outlineLevel"):0;if(j<k){l=this.itemViewForContentIndex(j);f=l?l.get("outlineLevel"):0;q=(l?l.get("outlineIndent"):0)||0;q*=f}else{f=l.get("isGroupView")?1:0;q=p*f}p*=e;if((f!==e)&&(q!==p)){if(p>q){j--;m=SC.DROP_AFTER}}}if(m===SC.DROP_BEFORE){l=(j<k)?this.itemViewForContentIndex(j):null;if(!l||l.get("isGroupView")){if(j>0){l=this.itemViewForContentIndex(j-1);if(!l.get("isGroupView")||(l.get("disclosureState")===SC.BRANCH_OPEN)){j=j-1;m=SC.DROP_AFTER}else{j=-1}}else{j=-1}}if(j<0){m=SC.DRAG_NONE}}return[j,m]},mouseWheel:function(a){var b=SC.InlineTextFieldView.editor;if(b&&b.get("isEditing")){if(b.get("delegate").get("displayDelegate")===this){SC.InlineTextFieldView.commitEditing()}}return NO},init:function(){arguments.callee.base.apply(this,arguments);this._sclv_rowDelegateDidChange()}});sc_require("views/list");SC.GridView=SC.ListView.extend({classNames:["sc-grid-view"],layout:{left:0,right:0,top:0,bottom:0},rowHeight:48,columnWidth:64,exampleView:SC.LabelView,insertionOrientation:SC.HORIZONTAL_ORIENTATION,itemsPerRow:function(){var b=this.get("frame"),a=this.get("columnWidth")||0;return(a<=0)?1:Math.floor(b.width/a)}.property("frame","columnWidth").cacheable(),contentIndexesInRect:function(f){var e=this.get("rowHeight")||48,b=this.get("itemsPerRow"),c=Math.floor(SC.minY(f)/e)*b,a=Math.ceil(SC.maxY(f)/e)*b;return SC.IndexSet.create(c,a-c)},layoutForContentIndex:function(h){var e=this.get("rowHeight")||48,a=this.get("frame").width,b=this.get("itemsPerRow"),f=Math.floor(a/b),g=Math.floor(h/b),c=h-(b*g);return{left:c*f,top:g*e,height:e,width:f}},computeLayout:function(){var f=this.get("content"),e=(f)?f.get("length"):0,c=this.get("rowHeight")||48,a=this.get("itemsPerRow"),g=Math.ceil(e/a);var b=this._cachedLayoutHash;if(!b){b=this._cachedLayoutHash={}}b.minHeight=g*c;this.calculatedHeight=b.minHeight;return b},insertionPointClass:SC.View.extend({classNames:["grid-insertion-point"],render:function(a,b){if(b){a.push('<span class="anchor"></span>')}}}),showInsertionPoint:function(c,g){if(!c){return}if(g&SC.DROP_ON){if(c!==this._lastDropOnView){this.hideInsertionPoint();c.set("isDropTarget",YES);this._lastDropOnView=c}}else{if(this._lastDropOnView){this._lastDropOnView.set("isDropTarget",NO);this._lastDropOnView=null}if(!this._insertionPointView){this._insertionPointView=this.insertionPointClass.create()}var b=this._insertionPointView;var a=c.get("frame");var e={height:a.height-6,x:a.x,y:a.y+6,width:0};if(!SC.rectsEqual(b.get("frame"),e)){b.set("frame",e)}if(b.parentNode!==c.parentNode){c.parentNode.appendChild(b)}}},hideInsertionPoint:function(){if(this._lastDropOnView){this._lastDropOnView.set("isDropTarget",NO);this._lastDropOnView=null}var a=this._insertionPointView;if(a){a.removeFromParent().destroy()}this._insertionPointView=null},insertionIndexForLocation:function(e,l){var g=this.get("frame"),h=this.get("clippingFrame"),m=this.get("itemsPerRow"),a=Math.floor(g.width/m),o=Math.floor((e.y-g.y-h.y)/this.get("rowHeight"));var k=SC.DROP_BEFORE,c=(e.x-g.x-h.x),b=Math.floor(c/a),n=(c/a)-b;if(l===SC.DROP_ON){if(n>0.8){b++}if((n>=0.2)&&(n<=0.8)){k=SC.DROP_ON}}else{if(n>0.45){b++}}var j=(o*m)+b;return[j,k]},_gv_frameDidChange:function(){var f=this.get("frame"),c;c=f.width;if(this._lastFrameWidth&&c!==this._lastFrameWidth){this.notifyPropertyChange("itemsPerRow");var a,b,e=this.get("nowShowing");e.forEach(function(g){b=this.itemViewForContentIndex(g);b.adjust(this.layoutForContentIndex(g))},this)}this._lastFrameWidth=c}.observes("frame")});SC.ImageButtonView=SC.ButtonView.extend({classNames:["sc-image-button-view"],themeName:null,renderDelegateName:"imageButtonRenderDelegate",displayProperties:["image"],image:null});SC.ANCHOR_TOP={top:0};SC.ANCHOR_LEFT={left:0};SC.ANCHOR_TOP_LEFT={top:0,left:0};SC.ANCHOR_BOTTOM={bottom:0};SC.ANCHOR_RIGHT={right:0};SC.ANCHOR_BOTTOM_RIGHT={bottom:0,right:0};SC.ToolbarView=SC.View.extend({classNames:["sc-toolbar-view"],ariaRole:"toolbar",renderDelegateName:"toolbarRenderDelegate",anchorLocation:null,layout:{left:0,height:32,right:0},init:function(){if(this.anchorLocation){this.layout=SC.merge(this.layout,this.anchorLocation)}arguments.callee.base.apply(this,arguments)}});sc_require("views/toolbar");SC.WorkspaceView=SC.View.extend({classNames:["sc-workspace-view"],displayProperties:["hasTopToolbar","hasBottomToolbar"],renderDelegateName:"workspaceRenderDelegate",topToolbar:SC.ToolbarView.extend(),bottomToolbar:null,contentView:SC.View.extend(),autoResizeToolbars:NO,defaultToolbarSize:44,largeToolbarSize:44,smallToolbarSize:30,toolbarSize:function(){if(!this.get("autoResizeToolbars")){return this.get("defaultToolbarSize")}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return this.get("smallToolbarSize")}return this.get("largeToolbarSize")}.property("autoHideMaster","orientation"),orientation:function(){var a=this.get("frame");if(a.width>a.height){return SC.HORIZONTAL_ORIENTATION}else{return SC.VERTICAL_ORIENTATION}}.property("frame").cacheable(),masterIsHidden:NO,masterIsHiddenDidChange:function(){var a,b=this.get("masterIsHidden");if(a=this.get("topToolbar")){a.set("masterIsHidden",b)}if(a=this.get("bottomToolbar")){a.set("masterIsHidden",b)}}.observes("masterIsHidden"),_scmd_tilePropertyDidChange:function(){this.invokeOnce("_scws_tile")}.observes("toolbarSize"),createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("topToolbar");if(a){a=this.topToolbar=this.activeTopToolbar=this.createChildView(a);this.appendChild(a)}var c=this.get("bottomToolbar");if(c){c=this.bottomToolbar=this.activeBottomToolbar=this.createChildView(c);this.appendChild(c)}var b=this.get("contentView");b=this.contentView=this.activeContentView=this.createChildView(b);this.appendChild(b);this.invokeOnce("_scws_tile")},_scws_tile:function(){var b=0,f=0,a=this.get("topToolbar"),g=this.get("bottomToolbar"),e=this.get("contentView"),c=this.get("toolbarSize");if(a){a.set("layout",{left:0,right:0,top:0,height:c});b+=c}if(g){g.set("layout",{left:0,right:0,bottom:0,height:c});f+=c}this.contentView.set("layout",{left:0,right:0,top:b,bottom:f})},hasTopToolbar:function(){if(this.get("topToolbar")){return YES}return NO}.property("topToolbar").cacheable(),hasBottomToolbar:function(){if(this.get("bottomToolbar")){return YES}return NO}.property("bottomToolbar").cacheable(),childDidChange:function(){this._scws_tile()},activeTopToolbar:null,activeBottomToolbar:null,activeContentView:null,topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeTopToolbar=a;this.invokeLast("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeBottomToolbar=a;this.invokeLast("childDidChange")}.observes("bottomToolbar"),contentViewDidChange:function(){var b=this.activeContentView,a=this.get("contentView");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeContentView=a;this.invokeLast("childDidChange")}.observes("contentView")});sc_require("views/workspace");sc_require("views/toolbar");SC.MasterDetailView=SC.View.extend({classNames:["sc-master-detail-view"],renderDelegateName:"masterDetailRenderDelegate",masterView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({}),contentView:SC.View.extend({backgroundColor:"white"})}),detailView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({childViews:["showHidePicker"],showHidePicker:SC.ButtonView.extend({layout:{left:7,centerY:0,height:30,width:100},controlSize:SC.AUTO_CONTROL_SIZE,title:"Picker",action:"toggleMasterPicker",isVisible:NO,isVisibleBinding:".parentView.masterIsHidden"})})}),autoHideMaster:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),masterWidth:250,dividerWidth:SC.propertyFromRenderDelegate("dividerWidth",1),masterIsHidden:function(){if(!this.get("autoHideMaster")){return NO}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return NO}return YES}.property("autoHideMaster","orientation"),orientation:SC.VERTICAL_ORIENTATION,_scmd_frameDidChange:function(){var b=this.get("frame"),a;if(b.width>b.height){a=SC.HORIZONTAL_ORIENTATION}else{a=SC.VERTICAL_ORIENTATION}this.setIfChanged("orientation",a)}.observes("frame"),init:function(){arguments.callee.base.apply(this,arguments);this._scmd_frameDidChange();this._scmd_masterIsHiddenDidChange()},toggleMasterPicker:function(a){if(!this.get("masterIsHidden")){return}if(this._picker&&this._picker.get("isVisibleInWindow")){this.hideMasterPicker()}else{this.showMasterPicker(a)}},showMasterPicker:function(b){if(this._picker&&this._picker.get("isVisibleInWindow")){return}if(!this._picker){var a=this.get("pickerPane");this._picker=a.create({})}this._picker.set("contentView",this.get("masterView"));this._picker.set("extraRightOffset",this.get("pointerDistanceFromEdge"));this.showPicker(this._picker,b)},hideMasterPicker:function(){if(this._picker&&this._picker.get("isVisibleInWindow")){this.hidePicker(this._picker)}},showPicker:function(b,a){b.popup(a,SC.PICKER_POINTER,[3,0,1,2,3],[9,-9,-18,18])},hidePicker:function(a){a.remove()},pickerPane:SC.PickerPane.extend({layout:{width:250,height:480},themeName:"popover"}),_picker:null,pointerDistanceFromEdge:46,_scmd_masterIsHiddenDidChange:function(){var a=this.get("masterIsHidden");this.get("masterView").set("masterIsHidden",a);this.get("detailView").set("masterIsHidden",a)}.observes("masterIsHidden"),_scmd_orientationDidChange:function(){this.invokeOnce("_scmd_tile")}.observes("orientation"),_scmd_retileProperties:function(){this.invokeOnce("_scmd_tile")}.observes("masterIsHidden","masterWidth"),createChildViews:function(){var b=this.get("masterView");b=this.masterView=this.createChildView(b);var a=this.get("detailView");a=this.detailView=this.createChildView(a);this.appendChild(a);this.invokeOnce("_scmd_tile")},_masterIsDrawn:NO,_scmd_tile:function(){var b=!this.get("masterIsHidden");var f=this.get("masterWidth"),e=this.get("masterView"),c=this.get("detailView");if(b){this.hideMasterPicker();if(!this._masterIsDrawn){if(this._picker){this._picker.set("contentView",null)}this.appendChild(e);this._masterIsDrawn=YES}e.set("layout",{left:0,top:0,bottom:0,width:f});var a=this.get("dividerWidth");c.set("layout",{left:f+a,right:0,top:0,bottom:0})}else{if(this._masterIsDrawn){this.removeChild(e);this._masterIsDrawn=NO}c.set("layout",{left:0,right:0,top:0,bottom:0})}}});SC.ScrollerView=SC.View.extend({classNames:["sc-scroller-view"],displayProperties:["thumbPosition","thumbLength","isEnabled","controlsHidden"],ariaRole:"scrollbar",shouldScrollToClick:NO,_touchScrollValue:NO,value:function(a,c){var b=this.get("minimum");if(c!==undefined){this._scs_value=c}c=this._scs_value||b;return Math.max(Math.min(c,this.get("maximum")),b)}.property("maximum","minimum").cacheable(),displayValue:function(){var a;if(this.get("_touchScrollValue")){a=this.get("_touchScrollValue")}else{a=this.get("value")}return a}.property("value","_touchScrollValue").cacheable(),proportion:0,maximum:100,minimum:0,isEnabled:function(a,b){if(b!==undefined){this._scsv_isEnabled=b}if(this._scsv_isEnabled!==undefined){return this._scsv_isEnabled}return this.get("proportion")<1}.property("proportion").cacheable(),_scsv_isEnabled:undefined,layoutDirection:SC.LAYOUT_VERTICAL,hasButtons:YES,scrollbarThickness:14,capLength:18,capOverlap:14,buttonLength:41,buttonOverlap:11,minimumThumbLength:20,render:function(c,a){var k="vertical",b={},m="",s=this.get("parentView"),j=this.get("layoutDirection"),f,o,h,g,p,n,l,e,q;switch(j){case SC.LAYOUT_VERTICAL:b["sc-vertical"]=YES;break;case SC.LAYOUT_HORIZONTAL:b["sc-horizontal"]=YES;k="horizontal";break}b.disabled=!this.get("isEnabled");b["controls-hidden"]=this.get("controlsHidden");c.setClass(b);o=this.get("thumbLength");f=this.get("thumbPosition");if(a){c.push('<div class="track"></div>','<div class="cap"></div>');this.renderButtons(c,this.get("hasButtons"));this.renderThumb(c,j,o,f);c.attr("aria-orientation",k);c.attr("aria-valuemax",this.get("maximum"));c.attr("aria-valuemin",this.get("minimum"));c.attr("aria-valuenow",this.get("value"));c.attr("aria-controls",s.getPath("contentView.layerId"))}else{if(this.get("controlsHidden")){return}g=this.$(".thumb");this.adjustThumb(g,f,o);c.attr("aria-valuenow",this.get("value"))}},renderThumb:function(e,f,b,c){var a;if(f===SC.LAYOUT_HORIZONTAL){a="width: "+b+"px; left: "+c+"px;"}else{a="height: "+b+"px; top: "+c+"px;"}e.push('<div class="thumb" style="%@">'.fmt(a),'<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>')},renderButtons:function(b,a){if(a){b.push('<div class="button-bottom"></div><div class="button-top"></div>')}else{b.push('<div class="endcap"></div>')}},touchScrollDidStart:function(a){this.set("_touchScrollValue",a)},touchScrollDidEnd:function(a){this.set("_touchScrollValue",NO)},touchScrollDidChange:function(a){this.set("_touchScrollValue",a)},adjustThumb:function(b,a,c){this.adjustThumbPosition(b,a);this.adjustThumbSize(b,c)},adjustThumbPosition:function(b,a){if(this._thumbPosition===a){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.css("top",a);break;case SC.LAYOUT_HORIZONTAL:b.css("left",a);break}this._thumbPosition=a},adjustThumbSize:function(a,b){if(this._thumbSize===b){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a.css("height",Math.max(b,this.get("minimumThumbLength")));break;case SC.LAYOUT_HORIZONTAL:a.css("width",Math.max(b,this.get("minimumThumbLength")));break}this._thumbSize=b},trackLength:function(){var a=this.get("scrollerLength");a-=this.capLength-this.capOverlap;a-=this.buttonLength-this.buttonOverlap;return a}.property("scrollerLength").cacheable(),scrollerLength:function(){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:return this.get("frame").height;case SC.LAYOUT_HORIZONTAL:return this.get("frame").width}return 0}.property("frame").cacheable(),thumbLength:function(){var a;a=Math.floor(this.get("trackLength")*this.get("proportion"));a=isNaN(a)?0:a;return Math.max(a,this.get("minimumThumbLength"))}.property("trackLength","proportion").cacheable(),thumbPosition:function(){var h=this.get("displayValue"),c=this.get("maximum"),b=this.get("trackLength"),e=this.get("thumbLength"),g=this.get("capLength"),f=this.get("capOverlap"),a;a=(h/c)*(b-e);a+=g-f;return Math.floor(isNaN(a)?0:a)}.property("displayValue","maximum","trackLength","thumbLength").cacheable(),controlsHidden:function(){return this.get("proportion")>=1}.property("proportion").cacheable(),valueForPosition:function(h){var b=this.get("maximum"),a=this.get("trackLength"),c=this.get("thumbLength"),g=this.get("capLength"),e=this.get("capOverlap"),f;f=h-(g-e);f=f/(a-c);f=f*b;return f},mouseDown:function(l){if(!this.get("isEnabled")){return NO}this._altIsDown=l.altKey;this._shiftIsDown=l.shiftKey;var f=l.target,c=this.get("thumbPosition"),k,e,h,g=this.get("scrollerLength");if(f.className.indexOf("thumb")>=0){e=this.convertFrameFromView({x:l.pageX,y:l.pageY});e.x-=c;e.y-=c;this._thumbDragging=YES;this._thumbOffset=e;this._mouseDownLocation={x:l.pageX,y:l.pageY};this._thumbPositionAtDragStart=this.get("thumbPosition");this._valueAtDragStart=this.get("value")}else{if(f.className.indexOf("button-top")>=0){this.decrementProperty("value",(this._altIsDown?g:30));this.makeButtonActive(".button-top");this.startMouseDownTimer("scrollUp");this._isScrollingUp=YES}else{if(f.className.indexOf("button-bottom")>=0){this.incrementProperty("value",(this._altIsDown?g:30));this.makeButtonActive(".button-bottom");this.startMouseDownTimer("scrollDown");this._isScrollingDown=YES}else{var n=this.get("shouldScrollToClick");if(l.altKey){n=!n}var a=this.get("trackLength"),j=this.get("thumbLength"),b=this.convertFrameFromView({x:l.pageX,y:l.pageY}),m;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:this._mouseDownLocation=m=b.y;break;case SC.LAYOUT_HORIZONTAL:this._mouseDownLocation=m=b.x;break}if(n){this.set("value",this.valueForPosition(m-(j/2)));c=this.get("thumbPosition");this._thumbDragging=YES;this._thumbOffset={x:b.x-c,y:b.y-c};this._mouseDownLocation={x:l.pageX,y:l.pageY};this._thumbPositionAtDragStart=c;this._valueAtDragStart=this.get("value")}else{if(m<c){this.decrementProperty("value",g);this.startMouseDownTimer("page")}else{this.incrementProperty("value",g);this.startMouseDownTimer("page")}}}}}return YES},mouseUp:function(a){var c=this._scs_buttonActive,b=NO,e;if(c){c.removeClass("active");b=YES}e=this._mouseDownTimer;if(e){e.invalidate();this._mouseDownTimer=null}this._thumbDragging=NO;this._isScrollingDown=NO;this._isScrollingUp=NO;return b},mouseDragged:function(o){var m,b,n,c,k=o.target,f=this._thumbPositionAtDragStart,h=this._isScrollingUp,q=this._isScrollingDown,e=this._scs_buttonActive,a;if(this._thumbDragging){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:n=(o.pageY-this._mouseDownLocation.y);break;case SC.LAYOUT_HORIZONTAL:n=(o.pageX-this._mouseDownLocation.x);break}if(o.altKey){if(!this._altIsDown||(this._shiftIsDown!==o.shiftKey)){f=this._thumbPositionAtDragStart=f+n;n=0;this._mouseDownLocation={x:o.pageX,y:o.pageY};this._valueAtDragStart=this.get("value")}if(o.shiftKey){n=-n}this.set("value",Math.round(this._valueAtDragStart+n*2))}else{c=f+n;b=this.get("trackLength")-this.get("thumbLength");this.set("value",Math.round((c/b)*this.get("maximum")))}}else{if(h||q){var p=NO,g=NO;var l=this.$(".button-top")[0].getBoundingClientRect();var j=this.$(".button-bottom")[0].getBoundingClientRect();switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(o.clientY<l.bottom){p=YES}else{g=YES}break;case SC.LAYOUT_HORIZONTAL:if(o.clientX<l.right){p=YES}else{g=YES}break}if((p||g)&&p!==h){if(e){e.removeClass("active")}this._mouseDownTimerAction=p?"scrollUp":"scrollDown";if(p){this.makeButtonActive(".button-top")}else{if(g){this.makeButtonActive(".button-bottom")}}this._isScrollingUp=p;this._isScrollingDown=g}}}this._altIsDown=o.altKey;this._shiftIsDown=o.shiftKey;return YES},startMouseDownTimer:function(b,a){var c;this._mouseDownTimerAction=b;this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:a?0:300})},mouseDownTimerDidFire:function(){var e=this.get("scrollerLength"),a=SC.device.get("mouseLocation"),c=this.get("thumbPosition"),b=this.get("thumbLength"),f=50;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a=this.convertFrameFromView(a).y;break;case SC.LAYOUT_HORIZONTAL:a=this.convertFrameFromView(a).x;break}switch(this._mouseDownTimerAction){case"scrollDown":this.incrementProperty("value",this._altIsDown?e:30);break;case"scrollUp":this.decrementProperty("value",this._altIsDown?e:30);break;case"page":f=150;if(a<c){this.decrementProperty("value",e)}else{if(a>c+b){this.incrementProperty("value",e)}}}this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:f})},makeButtonActive:function(a){this._scs_buttonActive=this.$(a).addClass("active")}});SC.TouchScrollerView=SC.ScrollerView.extend({classNames:["sc-touch-scroller-view"],scrollbarThickness:12,capLength:5,capOverlap:0,hasButtons:NO,buttonOverlap:36,adjustThumb:function(e,b,g){var c=this.$(".thumb-inner");var a=this.get("scrollerLength")-this.capLength,f=this.get("minimum")+this.capLength;if(b+g>a){b=Math.min(a-20,b);g=a-b}if(b<f){g-=f-b;b=f}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(this._thumbPosition!==b){e.css("-webkit-transform","translate3d(0px,"+b+"px,0px)")}if(this._thumbSize!==g){c.css("-webkit-transform","translate3d(0px,"+Math.round(g-1044)+"px,0px)")}break;case SC.LAYOUT_HORIZONTAL:if(this._thumbPosition!==b){e.css("-webkit-transform","translate3d("+b+"px,0px,0px)")}if(this._thumbSize!==g){c.css("-webkit-transform","translate3d("+Math.round(g-1044)+"px,0px,0px)")}break}this._thumbPosition=b;this._thumbSize=g},render:function(c,a){var b=[],f,l,h,g,m,k,j,e,n;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.push("sc-vertical");break;case SC.LAYOUT_HORIZONTAL:b.push("sc-horizontal");break}if(!this.get("isEnabled")){b.push("disabled")}if(this.get("controlsHidden")){b.push("controls-hidden")}c.addClass(b);l=this.get("thumbLength");f=this.get("thumbPosition");if(a){c.push('<div class="track"></div><div class="cap"></div>');this.renderButtons(c,this.get("hasButtons"));this.renderThumb(c,this.get("layoutDirection"),l)}else{if(this.get("controlsHidden")){return}g=this.$(".thumb");this.adjustThumb(g,f,l)}},renderThumb:function(b,c,a){a-=1044;c=(c===SC.LAYOUT_HORIZONTAL?"X":"Y");b.push('<div class="thumb"><div class="thumb-top"></div><div class="thumb-clip">'+'<div class="thumb-inner" style="-webkit-transform: translate%@(%@px);">'.fmt(c,a)+'<div class="thumb-center"></div><div class="thumb-bottom"></div></div></div></div>')}});sc_require("views/scroller");SC.NORMAL_SCROLL_DECELERATION=0.95;SC.FAST_SCROLL_DECELERATION=0.85;SC.ScrollView=SC.View.extend({classNames:["sc-scroll-view"],isScrollable:YES,contentView:null,horizontalAlign:SC.ALIGN_LEFT,verticalAlign:SC.ALIGN_TOP,horizontalScrollOffset:function(b,e){if(e!==undefined){var c=this.minimumHorizontalScrollOffset(),a=this.get("maximumHorizontalScrollOffset");this._scroll_horizontalScrollOffset=Math.max(c,Math.min(a,e))}return this._scroll_horizontalScrollOffset||0}.property().cacheable(),verticalScrollOffset:function(b,e){if(e!==undefined){var c=this.get("minimumVerticalScrollOffset"),a=this.get("maximumVerticalScrollOffset");this._scroll_verticalScrollOffset=Math.max(c,Math.min(a,e))}return this._scroll_verticalScrollOffset||0}.property().cacheable(),maximumScrollOffset:function(b,a,c){if(b>=a){return b-a}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},minimumScrollOffset:function(b,a,c){if(b>a){return 0}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},maximumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=c.calculatedWidth}b*=this._scale;var e=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,e)}return this.maximumScrollOffset(b,e,this.get("horizontalAlign"))}.property(),maximumVerticalScrollOffset:function(){var a=this.get("contentView"),c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=b}c*=this._scale;var e=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,e)}return this.maximumScrollOffset(c,e,this.get("verticalAlign"))}.property(),minimumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=a}b*=this._scale;var e=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,e)}return this.minimumScrollOffset(b,e,this.get("horizontalAlign"))}.property(),minimumVerticalScrollOffset:function(){var a=this.get("contentView");var c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=a.calculatedHeight}c*=this._scale;var e=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,e)}return this.minimumScrollOffset(c,e,this.get("verticalAlign"))}.property(),verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("frame").height}.property("frame"),horizontalPageScroll:function(){return this.get("frame").width}.property("frame"),hasHorizontalScroller:YES,horizontalScrollerView:SC.ScrollerView,horizontalTouchScrollerView:SC.TouchScrollerView,isHorizontalScrollerVisible:YES,canScrollHorizontal:function(){return !!(this.get("hasHorizontalScroller")&&this.get("horizontalScrollerView")&&this.get("isHorizontalScrollerVisible"))}.property("isHorizontalScrollerVisible").cacheable(),autohidesHorizontalScroller:YES,hasVerticalScroller:YES,verticalScrollerView:SC.ScrollerView,verticalTouchScrollerView:SC.TouchScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:function(){return !!(this.get("hasVerticalScroller")&&this.get("verticalScrollerView")&&this.get("isVerticalScrollerVisible"))}.property("isVerticalScrollerVisible").cacheable(),autohidesVerticalScroller:YES,verticalScrollerBottom:0,verticalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),horizontalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),verticalScrollerLayout:null,horizontalScrollerLayout:null,containerView:SC.ContainerView.extend({}),scrollTo:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}if(!SC.none(a)){this.set("horizontalScrollOffset",a)}if(!SC.none(b)){this.set("verticalScrollOffset",b)}return this},scrollBy:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}a=(a)?this.get("horizontalScrollOffset")+a:null;b=(b)?this.get("verticalScrollOffset")+b:null;return this.scrollTo(a,b)},scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var c=this.get("contentView");if(!c){return NO}var a=b.get("frame");if(!a){return NO}a=c.convertFrameFromView(a,b.get("parentView"));return this.scrollToRect(a)},scrollToRect:function(b){var a=SC.cloneRect(this.get("containerView").get("frame"));a.x=this.get("horizontalScrollOffset");a.y=this.get("verticalScrollOffset");var e=a.x,c=a.y;a.y-=Math.max(0,SC.minY(a)-SC.minY(b));a.x-=Math.max(0,SC.minX(a)-SC.minX(b));a.y+=Math.max(0,SC.maxY(b)-SC.maxY(a));a.x+=Math.max(0,SC.maxX(b)-SC.maxX(a));if((e!==a.x)||(c!==a.y)){this.scrollTo(a.x,a.y);return YES}else{return NO}},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalLineScroll")*a)},scrollUpLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-this.get("verticalLineScroll")*a)},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo(this.get("horizontalLineScroll")*a,null)},scrollLeftLine:function(a){if(a===undefined){a=1}return this.scrollTo(0-this.get("horizontalLineScroll")*a,null)},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalPageScroll")*a)},scrollUpPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-(this.get("verticalPageScroll")*a))},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollBy(this.get("horizontalPageScroll")*a,null)},scrollLeftPage:function(a){if(a===undefined){a=1}return this.scrollBy(0-(this.get("horizontalPageScroll")*a),null)},tile:function(){var c=this.get("hasHorizontalScroller")?this.get("horizontalScrollerView"):null;var j=c&&this.get("isHorizontalScrollerVisible");var l=this.get("hasVerticalScroller")?this.get("verticalScrollerView"):null;var g=l&&this.get("isVerticalScrollerVisible");var f=this.get("containerView");var o={left:0,top:0};var n,h,b,p,e,a;var k=((j)?c.get("scrollbarThickness"):0);var m=(g)?l.get("scrollbarThickness"):0;if(j){a=this.get("horizontalScrollerLayout");h={left:(a?a.left:0),bottom:(a?a.bottom:0),right:(a?a.right+m-1:m-1),height:k};c.set("layout",h);p=this.get("horizontalOverlay");o.bottom=p?0:(h.bottom+k)}else{o.bottom=0}if(c){c.set("isVisible",j)}if(g){k=k+this.get("verticalScrollerBottom");e=this.get("verticalScrollerLayout");h={top:(e?e.top:0),bottom:(e?e.bottom+k:k),right:(e?e.right:0),width:m};l.set("layout",h);b=this.get("verticalOverlay");o.right=b?0:(h.right+m)}else{o.right=0}if(l){l.set("isVisible",g)}f.adjust(o)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible"),_scroll_wheelDeltaX:0,_scroll_wheelDeltaY:0,mouseWheel:function(a){var c=this.get("horizontalScrollOffset"),g=this.get("maximumHorizontalScrollOffset"),f=this.get("maximumVerticalScrollOffset"),b=NO,e=this.get("verticalScrollOffset");b=((this.get("canScrollHorizontal")&&(a.wheelDeltaX<0&&c>0)||(a.wheelDeltaX>0&&c<g))||(this.get("canScrollVertical")&&(a.wheelDeltaY<0&&e>0)||(a.wheelDeltaY>0&&e<f)));if(b){this._scroll_wheelDeltaX+=a.wheelDeltaX;this._scroll_wheelDeltaY+=a.wheelDeltaY;this.invokeLater(this._scroll_mouseWheel,10)}return b},_scroll_mouseWheel:function(){this.scrollBy(this._scroll_wheelDeltaX,this._scroll_wheelDeltaY);if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY>0){this._scroll_wheelDeltaY=Math.floor(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.max(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY<0){this._scroll_wheelDeltaY=Math.ceil(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.min(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{this._scroll_wheelDeltaY=0;this._scroll_wheelDeltaX=0}}},canScale:NO,_scale:1,scale:function(a,b){if(b!==undefined){this._scale=Math.min(Math.max(this.get("minimumScale"),b),this.get("maximumScale"))}return this._scale}.property().cacheable(),minimumScale:0.25,maximumScale:2,autoScaleRange:NO,_scale_css:"",updateScale:function(b){var a=this.get("contentView");if(!a){return}if(a.isScalable){this.get("contentView").applyScale(b);this._scale_css=""}else{this._scale_css="scale3d("+b+", "+b+", 1)"}},acceptsMultitouch:YES,decelerationRate:SC.NORMAL_SCROLL_DECELERATION,alwaysBounceHorizontal:NO,alwaysBounceVertical:YES,delaysContentTouches:YES,_touchScrollDidChange:function(){if(this.get("contentView").touchScrollDidChange){this.get("contentView").touchScrollDidChange(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidChange){this.verticalScrollerView.touchScrollDidChange(this._scroll_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidChange){this.horizontalScrollerView.touchScrollDidChange(this._scroll_horizontalScrollOffset)}},_touchScrollDidStart:function(){if(this.get("contentView").touchScrollDidStart){this.get("contentView").touchScrollDidStart(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidStart){this.verticalScrollerView.touchScrollDidStart(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidStart){this.horizontalScrollerView.touchScrollDidStart(this._touch_horizontalScrollOffset)}},_touchScrollDidEnd:function(){if(this.get("contentView").touchScrollDidEnd){this.get("contentView").touchScrollDidEnd(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidEnd){this.verticalScrollerView.touchScrollDidEnd(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidEnd){this.horizontalScrollerView.touchScrollDidEnd(this._touch_horizontalScrollOffset)}},_applyCSSTransforms:function(b){var a="";this.updateScale(this._scale);a+="translate3d("+-this._scroll_horizontalScrollOffset+"px, "+-Math.round(this._scroll_verticalScrollOffset)+"px,0) ";a+=this._scale_css;if(b){var c=b.style;c.webkitTransform=a;c.webkitTransformOrigin="top left"}},captureTouch:function(a){return YES},touchGeneration:0,touchStart:function(b){var a=++this.touchGeneration;if(!this.tracking&&this.get("delaysContentTouches")){this.invokeLater(this.beginTouchesInContent,150,a)}else{if(!this.tracking){this.invokeLater(this.beginTouchesInContent,1,a)}}this.beginTouchTracking(b,YES);return YES},beginTouchesInContent:function(b){if(b!==this.touchGeneration){return}var c=this.touch,a;if(c&&this.tracking&&!this.dragging&&!c.touch.scrollHasEnded&&!c.touch.hasEnded){c.touch.captureTouch(this,YES);if(!c.touch.touchResponder){c.touch.makeTouchResponder(this)}else{if(c.needsScrollEnd){this._touchScrollDidEnd()}}}},beginTouchTracking:function(g,t){var s=g.averagedTouchesForView(this,t);var l=this._scroll_verticalScrollOffset||0,a=this._scroll_horizontalScrollOffset||0,n=a,m=l,f=NO,q=0,u=0,p,k;if(this.touch&&this.touch.timeout){clearTimeout(this.touch.timeout);this.touch.timeout=null;n=this.touch.startClipOffset.x;m=this.touch.startClipOffset.y;f=YES}k=this.get("contentView");if(k){p=k.get("frame");q=p.width;u=p.height}if(k.calculatedWidth&&k.calculatedWidth!==0){q=k.calculatedWidth}if(k.calculatedHeight&&k.calculatedHeight!==0){u=k.calculatedHeight}var h=this.get("containerView").get("frame"),j=h.width,o=h.height;var b=this.convertFrameToView(this.get("frame"),null),e=(a+(s.x-b.x))/this._scale,c=(l+(s.y-b.y))/this._scale;this.touch={startTime:g.timeStamp,notCalculated:YES,enableScrolling:{x:q*this._scale>j||this.get("alwaysBounceHorizontal"),y:u*this._scale>o||this.get("alwaysBounceVertical")},scrolling:{x:NO,y:NO},enableBouncing:SC.platform.bounceOnScroll,startClipOffset:{x:n,y:m},lastScrollOffset:{x:a,y:l},startTouchOffset:{x:s.x,y:s.y},scrollVelocity:{x:0,y:0},startTouchOffsetInContent:{x:e,y:c},containerSize:{width:j,height:o},contentSize:{width:q,height:u},startScale:this._scale,startDistance:s.d,canScale:this.get("canScale")&&SC.platform.pinchToZoom,minimumScale:this.get("minimumScale"),maximumScale:this.get("maximumScale"),globalFrame:b,layer:k.get("layer"),resistanceCoefficient:0.998,resistanceAsymptote:320,decelerationFromEdge:0.05,accelerationToEdge:0.1,scrollTolerance:{x:15,y:15},scaleTolerance:5,secondaryScrollTolerance:30,scrollLock:500,decelerationRate:this.get("decelerationRate"),lastEventTime:g.timeStamp,touch:(t?g:(this.touch?this.touch.touch:null)),needsScrollEnd:f};if(!this.tracking){this.tracking=YES;this.dragging=NO}},_adjustForEdgeResistance:function(g,e,b,c,a){var f;if(g<e){f=g-e}else{if(g>b){f=b-g}else{return g}}f=Math.pow(c,Math.abs(f))*a;if(g<e){f=f-a}else{f=-f+a}return Math.min(Math.max(e,g),b)+f},touchesDragged:function(a,c){var b=a.averagedTouchesForView(this);this.updateTouchScroll(b.x,b.y,b.d,a.timeStamp)},updateTouchScroll:function(m,l,f,j){var h=this.touch,a=m-h.globalFrame.x,o=l-h.globalFrame.y,y,p,z,q,F,D,c=h.scrolling,u=this.get("horizontalAlign"),n=this.get("verticalAlign");var e=((this._scroll_horizontalScrollOffset||0)+a)/this._scale,b=((this._scroll_verticalScrollOffset||0)+o)/this._scale;var C=e-h.startTouchOffsetInContent.x,B=b-h.startTouchOffsetInContent.y;var k=h.dragging;if(!c.x&&Math.abs(C)>h.scrollTolerance.x&&h.enableScrolling.x){k=YES;c.x=YES;h.scrollTolerance.y=h.secondaryScrollTolerance;h.startTouchOffset.x=m;C=0}if(!c.y&&Math.abs(B)>h.scrollTolerance.y&&h.enableScrolling.y){k=YES;c.y=YES;h.scrollTolerance.x=h.secondaryScrollTolerance;h.startTouchOffset.y=l;B=0}if(k&&!h.dragging){h.dragging=YES;this.dragging=YES;this._touchScrollDidStart()}if(!c.x&&!c.y&&!h.canScale){return}if(c.x&&!c.y){if(C>h.scrollLock&&!c.y){h.enableScrolling.y=NO}}if(c.y&&!c.x){if(B>h.scrollLock&&!c.x){h.enableScrolling.x=NO}}if(h.canScale){var t=h.startDistance,A=f-t;if(Math.abs(A)>h.scaleTolerance){c.y=YES;c.x=YES;var E=h.startScale*(f/Math.max(t,50));var v=this._adjustForEdgeResistance(E,h.minimumScale,h.maximumScale,h.resistanceCoefficient,h.resistanceAsymptote);this.dragging=YES;this._scale=v;var x=e*this._scale,w=b*this._scale}}F=this.minimumScrollOffset(h.contentSize.width*this._scale,h.containerSize.width,u);D=this.minimumScrollOffset(h.contentSize.height*this._scale,h.containerSize.height,n);q=this.maximumScrollOffset(h.contentSize.width*this._scale,h.containerSize.width,u);p=this.maximumScrollOffset(h.contentSize.height*this._scale,h.containerSize.height,n);z=h.startTouchOffsetInContent.x*this._scale-a;y=h.startTouchOffsetInContent.y*this._scale-o;if(h.enableBouncing){z=this._adjustForEdgeResistance(z,F,q,h.resistanceCoefficient,h.resistanceAsymptote);y=this._adjustForEdgeResistance(y,D,p,h.resistanceCoefficient,h.resistanceAsymptote)}else{z=Math.max(F,Math.min(q,z));y=Math.max(D,Math.min(p,y))}if(c.x){this._scroll_horizontalScrollOffset=z}if(c.y){this._scroll_verticalScrollOffset=y}this._applyCSSTransforms(h.layer);this._touchScrollDidChange();if(j-h.lastEventTime>=1||h.notCalculated){h.notCalculated=NO;var g=this._scroll_horizontalScrollOffset;var s=this._scroll_verticalScrollOffset;h.scrollVelocity.x=((g-h.lastScrollOffset.x)/Math.max(1,j-h.lastEventTime));h.scrollVelocity.y=((s-h.lastScrollOffset.y)/Math.max(1,j-h.lastEventTime));h.lastScrollOffset.x=g;h.lastScrollOffset.y=s;h.lastEventTime=j}},touchEnd:function(c){var a=this.touch,b=c.averagedTouchesForView(this);c.scrollHasEnded=YES;if(b.touchCount>0){this.beginTouchTracking(c,NO)}else{if(this.dragging){a.dragging=NO;a.lastEventTime=c.timeStamp;this.startDecelerationAnimation()}else{if(a.needsScrollEnd){this._touchScrollDidEnd()}c.captureTouch(this,YES);if(c.touchResponder&&c.touchResponder!==this){c.end()}else{if(!c.touchResponder||c.touchResponder===this){if(c.nextTouchResponder){c.makeTouchResponder(c.nextTouchResponder)}}else{}}this.touch=null}this.tracking=NO;this.dragging=NO}},touchCancelled:function(c){var a=this.touch,b=c.averagedTouchesForView(this);if(!this.touch||!this.touch.timeout){this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges();this.tracking=NO;if(this.dragging){this._touchScrollDidEnd()}this.dragging=NO;this.touch=null}},startDecelerationAnimation:function(a){var b=this.touch;b.decelerationVelocity={x:b.scrollVelocity.x*10,y:b.scrollVelocity.y*10};this.decelerateAnimation()},bouncyBounce:function(c,f,e,g,h,b,a){if(f<e){if(c<0){c=c+((e-f)*h)}else{c=Math.min((e-f)*b+a,e-f-0.01)}}else{if(f>g){if(c>0){c=c-((f-g)*h)}else{c=-Math.min((f-g)*b+a,f-g-0.01)}}}return c},decelerateAnimation:function(){var c=this.touch,B=this._scale,p=c.contentSize,q=c.containerSize,o=this.get("horizontalAlign"),f=this.get("verticalAlign"),A=this.minimumScrollOffset(p.width*this._scale,q.width,o),z=this.minimumScrollOffset(p.height*this._scale,q.height,f),k=this.maximumScrollOffset(p.width*this._scale,q.width,o),j=this.maximumScrollOffset(p.height*this._scale,q.height,f),a=Date.now(),g=Math.max(a-c.lastEventTime,1),w=this._scroll_horizontalScrollOffset+c.decelerationVelocity.x*(g/10),u=this._scroll_verticalScrollOffset+c.decelerationVelocity.y*(g/10);var v=c.decelerationFromEdge,x=c.accelerationToEdge;var n=!c.enableBouncing,m=!c.enableBouncing;if(w>=A&&w<=k){n=YES}if(u>=z&&u<=j){m=YES}w/=this._scale;u/=this._scale;var l=0;l=this.bouncyBounce(l,B,c.minimumScale,c.maximumScale,v,x,0);this._scale=B=B+l;w*=this._scale;u*=this._scale;A=this.minimumScrollOffset(p.width*this._scale,q.width,o);z=this.minimumScrollOffset(p.height*this._scale,q.height,f);k=this.maximumScrollOffset(p.width*this._scale,q.width,o);j=this.maximumScrollOffset(p.height*this._scale,q.height,f);if(n&&(w<A||w>k)){w=Math.max(A,Math.min(w,k));c.decelerationVelocity.x=0}if(m&&(u<z||u>j)){u=Math.max(z,Math.min(u,j));c.decelerationVelocity.y=0}this._scroll_horizontalScrollOffset=w;this._scroll_verticalScrollOffset=u;this._applyCSSTransforms(c.layer);this._touchScrollDidChange();var y=c.decelerationRate,b=Math.pow(y,(g/10));c.decelerationVelocity.y*=b;c.decelerationVelocity.x*=b;c.decelerationVelocity.x=this.bouncyBounce(c.decelerationVelocity.x,w,A,k,v,x,0.3);c.decelerationVelocity.y=this.bouncyBounce(c.decelerationVelocity.y,u,z,j,v,x,0.3);var s=Math.abs(c.decelerationVelocity.x),e=Math.abs(c.decelerationVelocity.y);if(e<0.05&&s<0.05&&Math.abs(l)<0.05){c.timeout=null;this.touch=null;this._touchScrollDidEnd();this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges();return}var h=this;c.lastEventTime=Date.now();this.touch.timeout=setTimeout(function(){SC.run(h.decelerateAnimation(),h)},30)},createChildViews:function(){var b=[],a;if(SC.none(a=this.containerView)){a=SC.ContainerView}b.push(this.containerView=this.createChildView(a,{contentView:this.contentView,isScrollContainer:YES}));this.contentView=this.containerView.get("contentView");a=SC.platform.touch?this.get("horizontalTouchScrollerView"):this.get("horizontalScrollerView");if(a){if(this.get("hasHorizontalScroller")){a=this.horizontalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_HORIZONTAL,valueBinding:"*owner.horizontalScrollOffset"});b.push(a)}else{this.horizontalScrollerView=null}}a=SC.platform.touch?this.get("verticalTouchScrollerView"):this.get("verticalScrollerView");if(a){if(this.get("hasVerticalScroller")){a=this.verticalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_VERTICAL,valueBinding:"*owner.verticalScrollOffset"});b.push(a)}else{this.verticalScrollerView=null}}this.childViews=b;this.contentViewDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange);a.addObserver("calculatedWidth",this,this.contentViewFrameDidChange);a.addObserver("calculatedHeight",this,this.contentViewFrameDidChange)}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewDidChange:function(){var e=this.get("contentView"),a=this._scroll_contentView,b=this.contentViewFrameDidChange,c=this.contentViewLayerDidChange;if(e!==a){if(a){a.removeObserver("calculatedWidth",this,this.contentViewFrameDidChange);a.removeObserver("calculatedHeight",this,this.contentViewFrameDidChange);a.removeObserver("frame",this,b);a.removeObserver("layer",this,c)}this._scroll_contentView=e;if(e){e.addObserver("frame",this,b);e.addObserver("calculatedWidth",this,this.contentViewFrameDidChange);e.addObserver("calculatedHeight",this,this.contentViewFrameDidChange);e.addObserver("layer",this,c)}this.containerView.set("contentView",e);this.contentViewFrameDidChange()}}.observes("contentView"),render:function(a,b){this.invokeLast(this.adjustElementScroll);if(b){a.push('<div class="corner"></div>')}return arguments.callee.base.apply(this,arguments)},oldMaxHOffset:0,oldMaxVOffset:0,contentViewFrameDidChange:function(b){var q=this.get("contentView"),n=(q)?q.get("frame"):null,j=this._scale,c=0,t=0,l,k,o,u,p;if(!q||!n){return}c=q.get("calculatedWidth")||n.width||0;t=q.get("calculatedHeight")||n.height||0;c*=j;t*=j;if(!b&&(c===this._scroll_contentWidth)&&(t===this._scroll_contentHeight)){return}this._scroll_contentWidth=c;this._scroll_contentHeight=t;l=this.getPath("containerView.frame");k=l.width;o=l.height;if(this.get("hasHorizontalScroller")&&(q=this.get("horizontalScrollerView"))){if(this.get("autohidesHorizontalScroller")){this.set("isHorizontalScrollerVisible",c>k)}q.setIfChanged("maximum",c-k);q.setIfChanged("proportion",k/c)}if(this.get("hasVerticalScroller")&&(q=this.get("verticalScrollerView"))){if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",t>o)}q.setIfChanged("maximum",t-o);q.setIfChanged("proportion",o/t)}if(!this.get("isVerticalScrollerVisible")&&(this.get("verticalScrollOffset")!==0)&&this.get("autohidesVerticalScroller")){this.set("verticalScrollOffset",0)}if(!this.get("isHorizontalScrollerVisible")&&(this.get("horizontalScrollOffset")!==0)&&this.get("autohidesHorizontalScroller")){this.set("horizontalScrollOffset",0)}var s=this.get("maximumVerticalScrollOffset"),m=this.get("verticalScrollOffset"),h=this.get("maximumHorizontalScrollOffset"),a=this.get("horizontalScrollOffset"),g=s<m,e=h<a;if(g||e){this.forceDimensionsRecalculation(e,g,m,a)}this.notifyPropertyChange("maximumVerticalScrollOffset");this.notifyPropertyChange("maximumHorizontalScrollOffset")},frameDidChange:function(){this.contentViewFrameDidChange(YES)}.observes("frame"),contentViewLayerDidChange:function(){if(this._verticalScrollOffset!==0){this._verticalScrollOffset=-1}if(this._horizontalScrollOffset!==0){this._horizontalScrollOffset=-1}this.invokeLast(this.adjustElementScroll)},_scroll_horizontalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)}.observes("horizontalScrollOffset"),_scroll_verticalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)}.observes("verticalScrollOffset"),adjustElementScroll:function(){var a=this.get("containerView"),e=this.get("contentView"),c=this.get("verticalScrollOffset"),b=this.get("horizontalScrollOffset");if(e){if(SC.platform.touch){this._applyCSSTransforms(e.get("layer"))}if(e._viewFrameDidChange){e._viewFrameDidChange()}}if(a&&!SC.platform.touch){a=a.$()[0];if(a){if(c!==this._verticalScrollOffset){a.scrollTop=c;this._verticalScrollOffset=c}if(b!==this._horizontalScrollOffset){a.scrollLeft=b;this._horizontalScrollOffset=b}}}},forceDimensionsRecalculation:function(b,c,f,a){var g=a;var e=f;this.scrollTo(0,0);if(b&&c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),this.get("maximumVerticalScrollOffset"))}if(b&&!c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),e)}if(!b&&c){this.scrollTo(g,this.get("maximumVerticalScrollOffset"))}},_scroll_verticalScrollOffset:0,_scroll_horizontalScrollOffset:0});sc_require("views/scroll");SC.MenuScrollerView=SC.ScrollerView.extend({classNames:["sc-menu-scroller-view"],scrollDown:NO,value:function(a,c){if(c!==undefined){this._value=c}else{var b=this._value||0;return Math.min(b,this.get("maximum"))}}.property("maximum").cacheable(),maximum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,verticalLineScroll:20,ownerScrollValueKey:function(){return"verticalScrollOffset"}.property("layoutDirection").cacheable(),init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.TINY_SCROLLER_THICKNESS);break;case SC.SMALL_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS);break;case SC.REGULAR_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS);break;case SC.LARGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS);break;case SC.HUGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS);break}return arguments.callee.base.apply(this,arguments)},render:function(a,c){a.addClass("sc-vertical");a.addClass(this.get("controlSize"));if(c){var b=this.get("scrollDown")?"arrowDown":"arrowUp";a.push('<span class="scrollArrow '+b+'">&nbsp;</span>')}a.setClass("disabled",!this.get("isEnabled"))},didCreateLayer:function(){},willDestroyLayer:function(){var a=this._sc_scroller_scrollDidChange;SC.Event.remove(this.$(),"scroll",this,a)},mouseEntered:function(a){this.set("isMouseOver",YES);this._invokeScrollOnMouseOver()},mouseExited:function(a){this.set("isMouseOver",NO)},_sc_scroller_valueDidChange:function(){}.observes("value"),_sc_scroller_armScrollTimer:function(){if(!this._sc_scrollTimer){SC.RunLoop.begin();var a=this._sc_scroller_scrollDidChange;this._sc_scrollTimer=this.invokeLater(a,50);SC.RunLoop.end()}},_sc_scroller_scrollDidChange:function(){var b=Date.now(),e=this._sc_lastScroll,c=this.get("layer"),a=0;if(e&&(b-e)<50){return this._sc_scroller_armScrollTimer()}this._sc_scrollTimer=null;this._sc_lastScroll=b;SC.RunLoop.begin();if(!this.get("isEnabled")){return}this._sc_scrollValue=a=c.scrollTop;this.set("value",a);SC.RunLoop.end()},_scrollMenu:function(){var b=this.get("value"),a;if(this.get("scrollDown")){a=b+this.verticalLineScroll;if(a<=this.get("maximum")){this.set("value",a)}}else{a=b-this.verticalLineScroll;if(a>=0){this.set("value",a)}else{if(b<=this.verticalLineScroll&&b>0){this.set("value",0)}}}return YES},_invokeScrollOnMouseOver:function(){this._scrollMenu();if(this.get("isMouseOver")){this.invokeLater(this._invokeScrollOnMouseOver,50)}}});SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS=18;SC.MenuScrollerView.TINY_SCROLLER_THICKNESS=10;SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS=14;SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS=23;SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS=26;SC.MenuScrollView=SC.ScrollView.extend({classNames:["sc-menu-scroll-view"],maximumHorizontalScrollOffset:0,hasHorizontalScroller:NO,horizontalScrollerView:SC.MenuScrollerView,isHorizontalScrollerVisible:NO,canScrollHorizontal:NO,autohidesHorizontalScroller:NO,hasVerticalScroller:YES,verticalScrollerView:SC.MenuScrollerView,verticalScrollerView2:SC.MenuScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:YES,autohidesVerticalScroller:YES,verticalScrollerBottom:0,controlSize:SC.REGULAR_CONTROL_SIZE,containerView:SC.ContainerView,scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var f=this.get("contentView");if(!f){return NO}var a=b.get("frame");if(!a){return NO}a=f.convertFrameFromView(a,b.get("parentView"));var c=this.get("verticalScrollerView2");if(c&&c.get("isVisible")){a.height+=c.get("frame").height}var e=this.get("verticalScrollerView");if(e&&e.get("isVisible")){a.top-=e.get("frame").height}return this.scrollToRect(a)},tile:function(){var h,v,j,b,t,k,c;h=this.get("hasVerticalScroller");v=h?this.get("verticalScrollerView"):null;j=h?this.get("verticalScrollerView2"):null;b=v&&this.get("isVerticalScrollerVisible");t=this.get("containerView");k={left:0,top:0};if(b){c=0;var a=v.get("scrollerThickness")||j.get("scrollerThickness");var l=this.get("contentView"),q,s=(l)?l.get("frame"):null,m=(s)?s.height:0,u=this.containerView.$()[0],n=this.get("verticalScrollOffset"),g={height:0,top:0,right:0,left:0},p={height:a,top:0,right:0,left:0},e={height:a,bottom:0,right:0,left:0},o={height:0,bottom:0,right:0,left:0};if(u){c=u.offsetHeight}if(n===0){k.top=0;k.bottom=a;v.set("layout",g);j.set("layout",e)}else{if(n>=(m-c-a)){k.top=a;k.bottom=0;v.set("layout",p);j.set("layout",o)}else{k.top=a;k.bottom=a;v.set("layout",p);j.set("layout",e)}}}if(v){v.set("isVisible",b);j.set("isVisible",b)}t.set("layout",k)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible","verticalScrollOffset"),createChildViews:function(){var c=[],b,a,e=this.get("controlSize");if(SC.none(b=this.containerView)){b=SC.ContainerView}c.push(this.containerView=this.createChildView(b,{contentView:this.contentView}));this.contentView=this.containerView.get("contentView");if((b=this.verticalScrollerView)&&(a=this.verticalScrollerView2)){if(this.get("hasVerticalScroller")){b=this.verticalScrollerView=this.createChildView(b,{layout:{top:0,left:0,right:0},controlSize:e,valueBinding:"*owner.verticalScrollOffset"});c.push(b);a=this.verticalScrollerView2=this.createChildView(a,{scrollDown:YES,layout:{bottom:0,left:0,right:0},controlSize:e,valueBinding:"*owner.verticalScrollOffset"});c.push(a)}else{this.verticalScrollerView=null;this.verticalScrollerView2=null}}this.childViews=c;this.contentViewFrameDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewFrameDidChange:function(){var c=this.get("contentView"),b,j=(c)?c.get("frame"):null,g=(j)?j.width:0,a=(j)?j.height:0,k=this.get("frame"),e,h;this._scroll_contentWidth=g;this._scroll_contentHeight=a;if(this.get("hasVerticalScroller")&&(c=this.get("verticalScrollerView"))&&(b=this.get("verticalScrollerView2"))){a-=1;if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",a>k.height)}a-=this.get("verticalScrollerBottom");e=0;h=this.containerView.$()[0];if(h){e=h.offsetHeight}a=a-e;c.setIfChanged("maximum",a);b.setIfChanged("maximum",a)}},_scroll_horizontalScrollOffsetDidChange:function(){},_scroll_verticalScrollOffsetDidChange:function(){var b=this.get("verticalScrollOffset");var a=this.get("contentView");if(a){a.$().css("top",(0-b)+"px")}}.observes("verticalScrollOffset")});sc_require("views/workspace");SC.TO_LEFT="TOLEFT";SC.TO_RIGHT="TORIGHT";SC.NavigationView=SC.WorkspaceView.extend({_views:null,_current:null,navigationContentView:SC.View,init:function(){arguments.callee.base.apply(this,arguments);this._views=[]},createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("navigationContentView");if(a.isClass){a=this.createChildView(a)}this._defaultContent=this.navigationContentView=a;this.contentView.appendChild(a)},changeNavigationContent:function(a){var c=null,b=null;if(a){c=a.get("topToolbar");b=a.get("bottomToolbar")}if(c&&c.isClass){a.set("topToolbar",c=c.create())}if(b&&b.isClass){a.set("bottomToolbar",b=b.create())}this.beginPropertyChanges();this._current=a;this.set("navigationContentView",a?a:this._defaultContent);this.set("topToolbar",c);this.set("bottomToolbar",b);this.endPropertyChanges()},push:function(a){this._currentDirection=this._current?SC.TO_LEFT:null;if(this._current){this._views.push(this._current)}this.changeNavigationContent(a)},pop:function(){this._currentDirection=SC.TO_RIGHT;var a=this._views.pop();this.changeNavigationContent(a)},popToView:function(b){this._currentDirection=SC.TO_RIGHT;var e=this._views,a=e.length-1,c=e[a];while(c&&c!==b){this._views.pop();a--;c=e[a]}this.changeNavigationContent(c)},topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeTopToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeBottomToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),contentViewDidChange:function(){var b=this.activeNavigationContentView,a=this.get("navigationContentView");if(!a.isNavigationBuilder){a.mixin(SC.NavigationBuilder)}this._pendingBuildOut=b;this._pendingBuildIn=a;this.activeNavigationContentView=a;this.invokeOnce("childDidChange")}.observes("navigationContentView"),childDidChange:function(){var a=this._pendingBuildIn,b=this._pendingBuildOut;if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.contentView.buildOutChild(b)}else{this.contentView.removeChild(b)}}this._scws_tile();if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.contentView.buildInChild(a)}else{this.contentView.appendChild(a)}}}});sc_require("views/toolbar");SC.NavigationBarView=SC.ToolbarView.extend(SC.Gesturable,{init:function(){arguments.callee.base.apply(this,arguments);if(!SC.Animatable){SC.Logger.error("NavigationBarView requires SC.Animatable. Please make your app or framework require the animation framework. CRASH.")}},mixinAnimatable:function(){this.mixin(SC.Animatable);this.transitions=this.navigationTransitions},navigationTransitions:{opacity:{duration:0.25,action:"didFinishTransition"}},style:{opacity:1},gestures:["swipeGesture"],swipeGesture:SC.SwipeGesture,swipe:function(e,j,g){var f=(g===SC.SWIPE_LEFT)?"isSwipeLeft":"isSwipeRight",c=this.get("childViews"),h,b,a=c.get("length");for(b=0;b<a;b++){h=c[b];if(h.get(f)){j.makeTouchResponder(h);j.end();return}}},resetBuild:function(){if(!this.isAnimatable){this.mixinAnimatable()}},didFinishTransition:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}},preBuildIn:function(){this.disableAnimation();this.adjust("opacity",0).updateLayout();this.enableAnimation();var c=this.get("childViews"),e,b,a=c.get("length");for(b=0;b<a;b++){e=c[b];if(e.disableNavigationTransition){continue}if(!e._nv_mixedIn){this.mixinNavigationChild(e)}e.disableAnimation();e.transform(this.buildDirection===SC.TO_LEFT?100:-100);e.enableAnimation()}},buildIn:function(){this.preBuildIn();this.invokeLater("startBuildIn",10)},startBuildIn:function(){this.adjust("opacity",1);var c=this.get("childViews"),e,b,a=c.get("length");for(b=0;b<a;b++){e=c[b];if(e.disableNavigationTransition){continue}e.transform(0)}},buildOut:function(){this.adjust("opacity",0);var c=this.get("childViews"),e,b,a=c.get("length");for(b=0;b<a;b++){e=c[b];if(e.disableNavigationTransition){continue}if(!e._nv_mixedIn){this.mixinNavigationChild(e)}e.transform(this.buildDirection===SC.TO_LEFT?-100:100)}},mixinNavigationChild:function(a){if(a.isAnimatable){return}a.mixin(SC.Animatable);a.mixin({transitions:{transform:{timing:SC.Animatable.TRANSITION_EASE_IN_OUT,duration:0.25}},naturalLayout:a.get("layout"),transform:function(b){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+b+"px,0px,0px)")}else{this.adjust("transform","translate("+b+"px,0px)")}}});a._nv_mixedIn=YES}});sc_require("views/button");SC.PopupButtonView=SC.ButtonView.extend({classNames:["sc-popup-button"],renderDelegateName:"popupButtonRenderDelegate",preferMatrix:null,menu:null,shouldLoadInBackground:NO,init:function(){arguments.callee.base.apply(this,arguments);this._setupMenu();if(this.get("shouldLoadInBackground")){SC.backgroundTaskQueue.push(SC.PopupButtonMenuLoader.create({popupButton:this}))}},_setupMenu:function(){var a=this.get("instantiatedMenu");if(this.isActiveBinding){this.isActiveBinding.disconnect()}this.isActiveBinding=null;if(a&&!a.isClass){this.isActiveBinding=this.bind("isActive",a,"isVisibleInWindow")}},_popup_menuDidChange:function(){this._setupMenu()}.observes("menu"),isActive:NO,_instantiateMenu:function(){var a=this.get("menu");if(!a||!a.isClass){return}this.menu=a.create();this._setupMenu()},instantiatedMenu:function(){var a=this.get("menu");if(a&&a.isClass){this._instantiateMenu();a=this.get("menu")}return a}.property("menu").cacheable(),action:function(a){var b=this.get("instantiatedMenu");if(!b){return NO}b.popup(this,this.get("preferMatrix"));return YES},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this._isMouseDown=YES;this._action();this._menuRenderedTimestamp=0;var b=this;setTimeout(function(){SC.run(function(){b._menuRenderedTimestamp=Date.now()})},1);this.becomeFirstResponder();return YES},mouseUp:function(b){var e=new Date().getTime(),c=this._menuRenderedTimestamp,f=this.get("instantiatedMenu"),g=SC.platform.touch,a;if(c===0){c=Date.now()}if(f){a=f.getPath("rootMenu.targetMenuItem");if(a){if(!a.performAction()){f.remove()}}else{if(!g&&(e-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){f.remove()}}}this._isMouseDown=NO;arguments.callee.base.apply(this,arguments);return YES},mouseExited:function(a){return YES},performKeyEquivalent:function(b,a){if(!this.get("isEnabled")){return NO}var c=this.get("instantiatedMenu");return(!!c&&c.performKeyEquivalent(b,a,YES))}});SC.PopupButtonMenuLoader=SC.Task.extend({popupButton:null,run:function(){if(this.popupButton){this.popupButton._instantiateMenu()}}});SC.ProgressView=SC.View.extend(SC.Control,{classNames:["sc-progress-view"],displayProperties:["displayValue","ariaValue","minimum","maximum","isEnabled","isIndeterminate","isRunning","isVisibleInWindow"],renderDelegateName:"progressRenderDelegate",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),displayValue:function(){var b=this.get("minimum")||0,c=this.get("maximum")||1,a=this.get("value")||0;a=(a-b)/(c-b);if(a>1){a=1}if(isNaN(a)){a=0}if(a<b){a=0}if(a>c){a=1}return a}.property("value","maximum","minimum").cacheable(),ariaRole:"progressbar",ariaValue:function(){return this.get("value")}.property("value").cacheable(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,isIndeterminate:NO,isIndeterminateBindingDefault:SC.Binding.bool(),isRunning:NO,isRunningBindingDefault:SC.Binding.bool(),contentIsIndeterminateKey:null,contentPropertyDidChange:function(c,a){var b=this.get("content");this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()},didCreateLayer:function(){if(this.get("isIndeterminate")&&this.get("isRunning")&&this.get("isVisibleInWindow")){this.displayDidChange()}}});SC.RadioView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),classNames:["sc-radio-view"],ariaRole:"radiogroup",displayProperties:["displayItems","isEnabled","layoutDirection"],renderDelegateName:"radioGroupRenderDelegate",itemAriaLabeledByKey:null,itemAriaLabelKey:null,value:null,layoutDirection:SC.LAYOUT_VERTICAL,escapeHTML:YES,items:[],itemTitleKey:null,itemWidthKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this._renderAsFirstTime=YES;this.notifyPropertyChange("displayItems")},displayItems:function(){var m=this.get("items"),s=this.get("value"),j=SC.isArray(s),g=this.get("localize"),e=this.get("itemTitleKey"),f=this.get("itemValueKey"),q=this.get("itemWidthKey"),c=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,l=this.get("itemIsEnabledKey"),z=this.get("itemIconKey"),h=this.get("itemAriaLabeledByKey"),B=this.get("itemAriaLabelKey"),y=this._displayItems||[],t=(m)?m.get("length"):0,w,A,n,o,k,x,v,p,b,a,u;for(k=0;k<t;k++){w=m.objectAt(k);if(SC.typeOf(w)===SC.T_ARRAY){A=w[0];o=w[1]}else{if(w){if(e){A=w.get?w.get(e):w[e]}else{A=(w.toString)?w.toString():null}if(q&&c){n=w.get?w.get(q):w[q]}if(f){o=w.get?w.get(f):w[f]}else{o=w}if(l){x=w.get?w.get(l):w[l]}else{x=YES}if(z){v=w.get?w.get(z):w[z]}else{v=null}if(h){a=w.get?w.get(h):w[h]}else{a=null}if(B){u=w.get?w.get(B):w[B]}else{u=null}}else{A=o=v=null;x=NO}}x=x&&this.get("isEnabled");if(w){p=(j)?(s.indexOf(o)>=0):(s===o)}else{p=NO}if(g){A=SC.String.loc(A)}y.push(SC.Object.create({title:A,icon:v,width:n,value:o,isEnabled:x,isSelected:(j&&s.indexOf(o)>=0&&s.length===1)||(s===o),isMixed:(j&&s.indexOf(o)>=0),isActive:this._activeRadioButton===k,theme:this.get("theme"),renderState:{}}))}return y}.property("isEnabled","value","items","itemTitleKey","itemWidthKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemAriaLabeledByKey","itemAriaLabelKey").cacheable(),mouseDown:function(a){if(!this.get("isEnabled")){return YES}var e=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),g=this.$(),b=e.indexForEvent(c,g,a);this._activeRadioButton=b;if(b!==undefined){var f=this.get("displayItems")[b];if(f.get("isEnabled")){f.set("isActive",YES);e.updateRadioAtIndex(c,g,b)}}a.allowDefault();return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES}var e=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),g=this.$(),h=this.get("displayItems"),b=e.indexForEvent(c,g,a);if(this._activeRadioButton!==undefined&&b!==this._activeRadioButton){h[this._activeRadioButton].set("isActive",NO);e.updateRadioAtIndex(c,g,this._activeRadioButton)}this._activeRadioButton=undefined;if(b!==undefined){var f=this.get("displayItems")[b];if(f.get("isEnabled")){f.set("isActive",NO);e.updateRadioAtIndex(c,g,b);this.set("value",f.value)}}a.allowDefault();return YES},keyDown:function(k){if(!this.get("isEnabled")){return YES}if(k.which===9||k.keyCode===9){var j=k.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(j){j.becomeFirstResponder()}else{k.allowDefault()}return YES}if(k.which>=37&&k.which<=40){var h=this.get("renderDelegate"),g=this.get("renderDelegateProxy"),c=this.$(),f=this.get("displayItems"),b=this.get("value");for(var e=0,a=f.length;e<a;e++){if(b===f[e].value){break}}if(k.which===37||k.which===38){if(e<=0){e=f.length-1}else{e--}}if(k.which===39||k.which===40){if(e>=f.length-1){e=0}else{e++}}h.updateRadioAtIndex(g,c,e);this.set("value",f[e].value)}k.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.SceneView=SC.ContainerView.extend({scenes:["master","detail"],nowShowing:null,transitionDuration:200,_state:"NO_VIEW",replaceContent:function(a){if(a&&this._state===this.READY){this.animateScene(a)}else{this.replaceScene(a)}return this},replaceScene:function(c){var e=this._targetView,f=this.STANDARD_LAYOUT,b=this.get("scenes"),a=b?b.indexOf(this.get("nowShowing")):-1;this._targetView=c;this._targetIndex=a;if(this._timer){this._timer.invalidate()}this._leftView=this._rightView=this._start=this._end=null;this._timer=null;this.removeAllChildren();if(e){e.set("layout",f)}if(c){c.set("layout",f)}if(c){this.appendChild(c)}this._state=c?this.READY:this.NO_VIEW},animateScene:function(b){var c=this._targetView,g=this._targetIndex,a=this.get("scenes"),f=a?a.indexOf(this.get("nowShowing")):-1,e;if(g<0||f<0||g===f){return this.replaceScene(b)}this._targetView=b;this._targetIndex=f;if(f>g){this._leftView=c;this._rightView=b;this._target=-1}else{this._leftView=b;this._rightView=c;this._target=1}this.removeAllChildren();if(c){this.appendChild(c)}if(b){this.appendChild(b)}this._start=Date.now();this._end=this._start+this.get("transitionDuration");this._state=this.ANIMATING;this.tick()},tick:function(){this._timer=null;var a=Date.now(),e=(a-this._start)/(this._end-this._start),h=this._target,g=this._leftView,b=this._rightView,c,f;if(e<0){e=0}if(!this.get("isVisibleInWindow")||(e>=1)){return this.replaceScene(this._targetView)}c=SC.clone(this.get("frame"));f=Math.floor(c.width*e);if(h>0){c.left=0-(c.width-f);g.set("layout",c);c=SC.clone(c);c.left=f;b.set("layout",c)}else{c.left=0-f;g.set("layout",c);c=SC.clone(c);c.left=c.width-f;b.set("layout",c)}this._timer=this.invokeLater(this.tick,20);return this},NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",STANDARD_LAYOUT:{top:0,left:0,bottom:0,right:0}});SC.SegmentView=SC.View.extend(SC.Control,{ariaRole:"button",isSegment:YES,classNames:["sc-segment-view"],toolTip:null,isEnabled:YES,isActive:NO,isSelected:NO,layoutDirection:SC.LAYOUT_HORIZONTAL,controlSize:null,supportFocusRing:NO,displayProperties:["icon","displayTitle","value","displayToolTip","isDefault","isCancel","width","isSegment","isFirstSegment","isMiddleSegment","isLastSegment","isOverflowSegment","index","layoutDirection"],renderDelegateName:"segmentRenderDelegate",useStaticLayout:YES,title:"",value:null,icon:null,localize:NO,keyEquivalent:null,escapeHTML:YES,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");if(this.get("localize")){a=SC.String.loc(a)}return a}.property("title","localize").cacheable(),width:null,localItem:null,widthDidChange:function(){this.adjust("width",this.get("width"))}.observes("width"),updateItem:function(e,c){var h=e.get("itemKeys"),g,a=e.get("viewKeys"),f,b;for(b=h.get("length")-1;b>=0;b--){g=e.get(h.objectAt(b));f=a.objectAt(b);if(!SC.none(c.get(g))){this.set(f,c.get(g))}}this.set("localItem",c)}});sc_require("views/segment");SC.SegmentedView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled").cacheable(),ariaRole:"group",classNames:["sc-segmented-view"],theme:"square",value:null,isEnabled:YES,allowsEmptySelection:NO,allowsMultipleSelection:NO,selectSegmentWhenTriggeringAction:NO,localize:YES,align:SC.ALIGN_CENTER,layoutDirection:SC.LAYOUT_HORIZONTAL,items:null,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemActionKey:null,itemTargetKey:null,itemLayerIdKey:null,itemKeyEquivalentKey:null,shouldHandleOverflow:YES,overflowTitle:"&raquo;",overflowToolTip:"More&hellip;",overflowIcon:null,segmentViewClass:SC.SegmentView,itemKeys:["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemKeyEquivalentKey","itemLayerIdKey"],viewKeys:["title","value","isEnabled","icon","width","toolTip","keyEquivalent","layerId"],init:function(){arguments.callee.base.apply(this,arguments);var e=this.get("overflowTitle"),a=this.get("overflowToolTip"),b=this.get("overflowIcon"),c;c=this.get("segmentViewClass").create({controlSize:this.get("controlSize"),localize:this.get("localize"),title:e,toolTip:a,icon:b,isLastSegment:YES,isOverflowSegment:YES,layoutDirection:this.get("layoutDirection"),isVisible:this.get("shouldHandleOverflow")});this.set("overflowView",c);this.appendChild(c);this.itemsDidChange()},shouldHandleOverflowDidChange:function(){if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}else{this.get("overflowView").set("isVisible",NO)}}.observes("shouldHandleOverflow"),itemsDidChange:function(){var n=this.get("items")||[],t,c,k,p=this.get("childViews"),l,e=p.lastObject(),q=this.get("value"),b,s=this.get("itemKeys"),a,o=this.get("viewKeys"),g,m=this.get("segmentViewClass"),h,f;if(p.get("length")-1>n.get("length")){for(h=p.get("length")-2;h>=n.get("length");h--){l=p.objectAt(h);c=l.get("localItem");if(c instanceof SC.Object){for(f=s.get("length")-1;f>=0;f--){a=this.get(s.objectAt(f));if(a){c.removeObserver(a,this,this.itemContentDidChange)}}}if(SC.isArray(q)){q.removeObject(c)}else{if(q===c){q=null}}this.removeChild(l)}this.set("value",q)}else{if(p.get("length")-1<n.get("length")){for(h=p.get("length")-1;h<n.get("length");h++){l=m.create({controlSize:this.get("controlSize"),localize:this.get("localize"),layoutDirection:this.get("layoutDirection")});this.insertBefore(l,e)}}}p=this.get("childViews");for(h=0;h<n.get("length");h++){c=n.objectAt(h);l=p.objectAt(h);k=l.get("localItem");if(k instanceof SC.Object&&!n.contains(k)){for(f=s.get("length")-1;f>=0;f--){a=this.get(s.objectAt(f));if(a){k.removeObserver(a,this,this.itemContentDidChange)}}}if(SC.none(c)){continue}if(SC.typeOf(c)===SC.T_STRING){c=SC.Object.create({title:c.humanize().titleize(),value:c});this.set("itemTitleKey","title");this.set("itemValueKey","value")}else{if(SC.typeOf(c)===SC.T_HASH){c=SC.Object.create(c)}else{if(c instanceof SC.Object){for(f=s.get("length")-1;f>=0;f--){a=this.get(s.objectAt(f));if(a){c.removeObserver(a,this,this.itemContentDidChange);c.addObserver(a,this,this.itemContentDidChange,h)}}}else{SC.Logger.error("SC.SegmentedView items may be Strings, Objects (ie. Hashes) or SC.Objects only")}}}b=NO;if(SC.isArray(q)?q.indexOf(c.get(this.get("itemValueKey")))>=0:q===c.get(this.get("itemValueKey"))){b=YES}l.set("isSelected",b);l.set("index",h);l.set("isFirstSegment",h===0);l.set("isMiddleSegment",h<n.get("length")-1&&h>0);l.set("isLastSegment",h===n.get("length")-1);l.updateItem(this,c)}if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}}.observes("*items.[]"),itemContentDidChange:function(f,e,b,c){var a=this.get("items"),g=this.get("childViews"),h;h=g.objectAt(c);if(h){h.updateItem(this,f)}else{SC.Logger.warn("Item content change was observed on item without matching segment child view.")}if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}},viewDidResize:function(){var b=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,a=b?this.$().width():this.$().height();if(this.get("shouldHandleOverflow")&&(this.isOverflowing||a<=this.cachedMinimumDim)){this.adjustOverflow()}},isVisibleInWindowDidChange:function(){if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}}.observes("isVisibleInWindow"),remeasure:function(){if(!this.get("shouldHandleOverflow")){return}var a=this.get("renderDelegate"),e=this.get("childViews"),c;if(this.get("isVisibleInWindow")){c=e.lastObject();c.set("isVisible",YES);for(var b=e.get("length")-1;b>=0;b--){e.objectAt(b).set("isVisible",YES)}this.cachedDims=this.segmentDimensions();this.cachedOverflowDim=this.overflowSegmentDim();this.adjustOverflow()}},adjustOverflow:function(){if(!this.get("shouldHandleOverflow")){return}var g=this.get("childViews"),f,j=this.get("value"),b=g.lastObject(),h=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,l=h?this.$().width():this.$().height(),e=0,k,a,c;this.isOverflowing=NO;b.set("isSelected",NO);this.overflowItems=[];a=this.cachedDims.length;for(c=0;c<a;c++){f=g.objectAt(c);e+=this.cachedDims[c];k=(c===a-1)?e:e+this.cachedOverflowDim;if(k>l){overflowItem={};localItem=f.get("localItem");overflowItem[this.get("itemTitleKey")]=localItem.get(this.get("itemTitleKey"));overflowItem[this.get("itemIconKey")]=localItem.get(this.get("itemIconKey"));overflowItem[this.get("itemIsEnabledKey")]=localItem.get(this.get("itemIsEnabledKey"));overflowItem[this.get("itemKeyEquivalentKey")]=localItem.get(this.get("itemKeyEquivalentKey"));overflowItem[this.get("itemValueKey")]=localItem.get(this.get("itemValueKey"));this.overflowItems.pushObject(overflowItem);this.isOverflowing=YES;f.set("isVisible",NO);if(c===0){b.set("isFirstSegment",YES)}if(SC.isArray(j)?j.indexOf(f.get("value"))>=0:j===f.get("value")){b.set("isSelected",YES)}}else{f.set("isVisible",YES);if(c===0){b.set("isFirstSegment",NO)}}}if(this.isOverflowing){b.set("isVisible",YES)}else{b.set("isVisible",NO)}this.cachedMinimumDim=e+this.cachedOverflowDim},segmentDimensions:function(){var b=this.get("childViews"),a,g,j=[],h=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL;for(var c=0,e=b.length;c<e-1;c++){a=b[c];g=a.get("frame");j[c]=h?g.width:g.height}return j},overflowSegmentDim:function(){var b=this.get("childViews"),a,c,e=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL;a=b.length&&b[b.length-1];if(a){c=a.get("frame");return e?c.width:c.height}return 0},indexForClientPosition:function(b,j){var e=this.get("childViews"),h,f,c,g,a;a={x:b,y:j};for(f=0,h=e.length;f<h;f++){c=e[f];g=c.get("layer").getBoundingClientRect();g={x:g.left,y:g.top,width:(g.right-g.left),height:(g.bottom-g.top)};if(SC.pointInRect(a,g)){return f}}return -1},displayProperties:["align"],renderDelegateName:"segmentedRenderDelegate",displayItemIndexForEvent:function(b){var c=this.get("renderDelegate");var a=b.clientX;var g=b.clientY;if(a===0&&g===0){var e=b.target;if(e){var f=SC.offset(e);a=f.x+Math.round(e.offsetWidth/2);g=f.y+Math.round(e.offsetHeight/2)}}if(c&&c.indexForClientPosition){return c.indexForClientPosition(this,a,g)}return this.indexForClientPosition(b.clientX,b.clientY)},keyDown:function(c){var h,j,e,f,g,b;if(c.which===9||c.keyCode===9){var a=c.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{c.allowDefault()}return YES}if(!this.get("allowsMultipleSelection")){h=this.get("childViews");f=h.get("length");g=this.get("value");b=SC.isArray(g);if(c.which===39||c.which===40){if(g){for(e=0;e<f-2;e++){j=h.objectAt(e);if(b?(g.indexOf(j.get("value"))>=0):(j.get("value")===g)){this.triggerItemAtIndex(e+1)}}}else{this.triggerItemAtIndex(0)}return YES}else{if(c.which===37||c.which===38){if(g){for(e=1;e<f-1;e++){j=h.objectAt(e);if(b?(g.indexOf(j.get("value"))>=0):(j.get("value")===g)){this.triggerItemAtIndex(e-1)}}}else{this.triggerItemAtIndex(f-2)}return YES}}}return NO},mouseDown:function(a){var c=this.get("childViews"),f,e=c.get("length")-1,b;if(!this.get("isEnabled")){return YES}b=this.displayItemIndexForEvent(a);if(b>=0){f=c.objectAt(b);if(f.get("isEnabled")){f.set("isActive",YES)}this.activeChildView=f;if(b===e){this.showOverflowMenu()}else{this._isMouseDown=YES}}return YES},mouseUp:function(a){var c,b;b=this.displayItemIndexForEvent(a);if(this._isMouseDown&&(b>=0)){this.triggerItemAtIndex(b);c=this.activeChildView;if(c){c.set("isActive",NO);this.activeChildView=null}}this._isMouseDown=NO;return YES},mouseMoved:function(a){var e=this.get("childViews"),f=e.get("length")-1,c,g,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);c=this.activeChildView;g=e.objectAt(b);if(g&&g!==c){if(c){c.set("isActive",NO)}if(g.get("isEnabled")){g.set("isActive",YES)}this.activeChildView=g;if(b===f){this.showOverflowMenu();this._isMouseDown=NO}}}return YES},mouseEntered:function(a){var c=this.get("childViews"),f,e=c.get("length")-1,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);if(b===e){this.showOverflowMenu();this._isMouseDown=NO}else{if(b>=0){f=c.objectAt(b);if(f.get("isEnabled")){f.set("isActive",YES)}this.activeChildView=f}}}return YES},mouseExited:function(a){var b;if(this._isMouseDown){b=this.activeChildView;if(b){b.set("isActive",NO)}this.activeChildView=null}return YES},touchStart:function(f){var b=this.get("childViews"),e,c=b.get("length")-1,a;if(!this.get("isEnabled")){return YES}a=this.displayItemIndexForEvent(f);if(a>=0){e=b.objectAt(a);e.set("isActive",YES);this.activeChildView=e;if(a===c){this.showOverflowMenu()}else{this._isTouching=YES}}return YES},touchEnd:function(c){var b,a;a=this.displayItemIndexForEvent(c);if(this._isTouching&&(a>=0)){this.triggerItemAtIndex(a);b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null;this._isTouching=NO}return YES},touchesDragged:function(a,f){var j=this.touchIsInBoundary(a),e=this.get("childViews"),g=e.get("length")-1,c,h,b;if(j){if(!this._isTouching){this._touchDidEnter(a)}b=this.displayItemIndexForEvent(a);c=this.activeChildView;h=e[b];if(h&&h!==c){if(c){c.set("isActive",NO)}h.set("isActive",YES);this.activeChildView=h;if(b===g){this.showOverflowMenu();this._isMouseDown=NO}}}else{if(this._isTouching){this._touchDidExit(a)}}this._isTouching=j;return YES},_touchDidExit:function(a){var b;if(this.isTouching){b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null}return YES},_touchDidEnter:function(a){var c=this.get("childViews"),f,e=c.get("length")-1,b;b=this.displayItemIndexForEvent(a);if(b===e){this.showOverflowMenu();this._isTouching=NO}else{if(b>=0){f=c.objectAt(b);f.set("isActive",YES);this.activeChildView=f}}return YES},triggerItemAtIndex:function(k){var m=this.get("childViews"),h,b,n,c,j,g;h=m.objectAt(k);if(!h.get("isEnabled")){return this}j=this.get("allowsEmptySelection");g=this.get("allowsMultipleSelection");b=h.get("value");n=c=this.get("value");if(SC.empty(n)){n=[]}else{if(!SC.isArray(n)){n=[n]}}if(!g){if(j&&(n.get("length")===1)&&(n.objectAt(0)===b)){n=[]}else{n=[b]}}else{if(n.indexOf(b)>=0){if(n.get("length")>1||(n.objectAt(0)!==b)||j){n=n.without(b)}}else{n=n.concat([b])}}switch(n.get("length")){case 0:n=null;break;case 1:n=n.objectAt(0);break;default:break}var p=this.get("itemActionKey"),a=this.get("itemTargetKey"),f,l=null,e=this.getPath("pane.rootResponder"),o;if(p&&(o=this.get("items").objectAt(k))){f=o.get?o.get(p):o[p];if(a){l=o.get?o.get(a):o[a]}if(e){e.sendAction(f,l,this,this.get("pane"),n)}}if(c!==undefined&&(!f||this.get("selectSegmentWhenTriggeringAction"))){this.set("value",n)}f=this.get("action");if(f&&e){e.sendAction(f,this.get("target"),this,this.get("pane"),n)}},selectOverflowItem:function(b){var a=b.get("selectedItem");this.triggerItemAtIndex(a.get("index"));b.removeObserver("selectedItem",this,"selectOverflowItem");this.activeChildView.set("isActive",NO);this.activeChildView=null},showOverflowMenu:function(){var g=this.get("childViews"),b=g.get("length")-1,p=this.overflowItems,l,k,f,j;l=p.get("length");k=g.get("length")-1-l;j=this.get("value");f=SC.isArray(j);for(var c=0;c<l;c++){var o=p.objectAt(c),m=this.get("itemValueKey");if(f?j.indexOf(o[m])>=0:j===o[m]){o.isChecked=YES}else{o.isChecked=NO}o.index=k+c}var n=this;var a=SC.MenuPane.create({layout:{width:200},items:p,itemTitleKey:this.get("itemTitleKey"),itemIconKey:this.get("itemIconKey"),itemIsEnabledKey:this.get("itemIsEnabledKey"),itemKeyEquivalentKey:this.get("itemKeyEquivalentKey"),itemCheckboxKey:"isChecked",modalPaneDidClick:function(){arguments.callee.base.apply(this,arguments);this.removeObserver("selectedItem",n,"selectOverflowItem");n.activeChildView.set("isActive",NO);n.activeChildView=null}});var e=this.get("layer");var h=e.childNodes[e.childNodes.length-1];a.popup(h);a.addObserver("selectedItem",this,"selectOverflowItem")},valueDidChange:function(){var e=this.get("value"),c,g=this.get("childViews"),h=Infinity,f=g.lastObject(),j,a;if(this.overflowItems){c=this.overflowItems.get("length");h=g.get("length")-1-c;f.set("isSelected",NO)}for(var b=g.get("length")-2;b>=0;b--){j=g.objectAt(b);if(SC.isArray(e)?e.indexOf(j.get("value"))>=0:e===j.get("value")){j.set("isSelected",YES);if(b>=h){f.set("isSelected",YES)}}else{j.set("isSelected",NO)}}}.observes("value")});sc_require("views/button");SC.SelectView=SC.ButtonView.extend({acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),escapeHTML:YES,escapeHTMLBindingDefault:SC.Binding.oneWay().bool(),items:[],itemsBindingDefault:SC.Binding.multiple(),itemTitleKey:null,itemSortKey:null,itemValueKey:null,itemIconKey:null,itemSeparatorKey:"separator",itemIsEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["sc-select-view"],menu:null,_itemList:[],_itemIdx:null,value:null,checkboxEnabled:YES,showCheckbox:YES,emptyName:null,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","items","escapeHTML","emptyName"],preferMatrix:null,CUSTOM_MENU_ITEM_HEIGHT:20,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,exampleView:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,menuItemPadding:35,isContextMenuEnabled:NO,supportFocusRing:YES,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectView.TINY_OFFSET_X;case SC.SMALL_CONTROL_SIZE:return SC.SelectView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectView.REGULAR_OFFSET_X;case SC.LARGE_CONTROL_SIZE:return SC.SelectView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectView.HUGE_OFFSET_X}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("itemSortKey")||this.get("itemTitleKey");b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)})}return b},render:function(b,h){arguments.callee.base.apply(this,arguments);var t,e,n,u,w,B,j,g,z,k,q,a,p,f,m,A,v,s,x,o,l,y,c;n=this.get("items")||[];n=this.sortObjects(n);u=n.length;w=this.get("itemTitleKey");B=this.get("itemIconKey");j=this.get("itemValueKey");g=this.get("itemSeparatorKey");z=this.get("showCheckbox");l=this.get("itemIsEnabledKey");t=this.get("escapeHTML");k=this.get("value");q=this.get("localize");p=[];f=YES;m=0;y=this.get("emptyName");if(!SC.none(y)){y=q?SC.String.loc(y):y;y=t?SC.RenderContext.escapeHTML(y):y;x=SC.Object.create({separator:NO,title:y,icon:null,value:null,isEnabled:YES,checkbox:NO,target:this,action:"displaySelectedItem"});if(SC.none(k)){this.set("title",y)}p.push(x)}n.forEach(function(C){if(C||C===0){a=g?(C.get?C.get(g):C[g]):NO;if(!a){A=w?(C.get?C.get(w):C[w]):C.toString();A=q?SC.String.loc(A):A;A=t?SC.RenderContext.escapeHTML(A):A;v=B?(C.get?C.get(B):C[B]):null;if(SC.none(C[B])){v=null}s=j?(C.get?C.get(j):C[j]):C;if(!SC.none(k)&&!SC.none(s)){c=false;if(SC.kindOf(k,SC.Record)&&SC.kindOf(s,SC.Record)){c=k.get("storeKey")===s.get("storeKey")}if(k===s||c){this.set("title",A);this.set("icon",v)}}if(s===this.get("value")){this.set("_itemIdx",m);f=!z?NO:YES}else{f=NO}o=(C.get?C.get(l):C[l]);if(NO!==o){o=YES}if(SC.none(this._defaultVal)&&o){this._defaultVal=s;this._defaultTitle=A;this._defaultIcon=v}}x=SC.Object.create({separator:a,title:A,icon:v,value:s,isEnabled:o,checkbox:f,target:this,action:"displaySelectedItem"});p.push(x)}m+=1;this.set("_itemList",p)},this);if(h){this.invokeLast(function(){var C=this.get("value");if(SC.none(C)){if(SC.none(y)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);this.set("icon",this._defaultIcon)}else{this.set("title",y)}}})}this.changeSelectPreferMatrix(this.get("_itemIdx"))},_action:function(n){var k,a,l,m,t,p,B,f,A,c,o,v,q,y,g,h,b,z,j,u;k=this.$(".sc-button-label")[0];var C=SC.SelectView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:C+=SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:C+=SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:C+=SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:C+=SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:C+=SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}}a=this.get("layer").offsetWidth+C;a=this.get("layer").offsetWidth;l=k.scrollWidth;m=this.get("lastMenuWidth");if(l){t=k.offsetWidth;if(l&&t){a=a+l-t}}if(!m||(a>m)){m=a}p=this.get("_itemList");var w=this.get("customViewClassName");var s=this.get("customViewMenuOffsetWidth");var e="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";e=w?(e+" "+w):e;SC.prepareStringMeasurement("",e);for(o=0,z=p.length;o<z;++o){A=p.objectAt(o);B=SC.measureString(A.title).width;if(!f||(B>f)){f=B}}SC.teardownStringMeasurement();m=(f+this.menuItemPadding>m)?f+this.menuItemPadding:m;var x=SC.RootResponder.responder.get("currentWindowSize").width;if(m>x){m=(x-25)}this.set("lastMenuWidth",m);v=this.get("value");q=this.get("_itemList");y=this.get("controlSize");g=this.get("menuPaneHeightPadding");u=this.get("escapeHTML");h=this.get("exampleView")||SC.MenuItemView.extend({escapeHTML:u});b=SC.MenuPane.create({classNames:["select-button"],items:q,exampleView:h,isEnabled:YES,menuHeightPadding:g,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:m},controlSize:y,itemWidth:m});if(!b){return NO}b.popup(this,this.preferMatrix);this.set("menu",b);j=this._itemIdx;if(!SC.empty(j)&&j>-1){h=b.menuItemViewForContentIndex(j);if(h){h.becomeFirstResponder()}}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=a.get("selectedItem");this.set("value",b.get("value"));this.set("title",b.get("title"));this.set("_itemIdx",b.get("contentIndex"))},changeSelectPreferMatrix:function(){var c=0,h=0;switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:c=SC.SelectView.TINY_OFFSET_Y;h=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:c=SC.SelectView.SMALL_OFFSET_Y;h=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:c=SC.SelectView.REGULAR_OFFSET_Y;h=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:c=SC.SelectView.LARGE_OFFSET_Y;h=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:c=SC.SelectView.HUGE_OFFSET_Y;h=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;break}var f=c,b=this.get("_itemIdx"),a=this.get("leftAlign"),g,e;if(this.get("isDefaultPosition")){g=[1,0,3];this.set("preferMatrix",g)}else{if(b){f=b*h+c}e=[a,-f,2];this.set("preferMatrix",e)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();return YES},mouseUp:function(b){var e=this.get("menu"),a,c;if(e){a=e.getPath("rootMenu.targetMenuItem");if(a&&e.get("mouseHasEntered")){if(!a.performAction()){e.remove()}}else{if(b.timeStamp-this._mouseDownTimestamp>400){e.remove()}}}this._isMouseDown=NO;this.set("isActive",NO);return YES},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)},_button_isSelectedDidChange:function(){}.observes("isSelected")});SC.SelectView.TINY_OFFSET_X=0;SC.SelectView.TINY_OFFSET_Y=0;SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.SMALL_OFFSET_X=-18;SC.SelectView.SMALL_OFFSET_Y=3;SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;SC.SelectView.REGULAR_OFFSET_X=-17;SC.SelectView.REGULAR_OFFSET_Y=0;SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;SC.SelectView.LARGE_OFFSET_X=-17;SC.SelectView.LARGE_OFFSET_Y=6;SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;SC.SelectView.HUGE_OFFSET_X=0;SC.SelectView.HUGE_OFFSET_Y=0;SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.MENU_WIDTH_OFFSET=-2;sc_require("views/button");SC.SelectButtonView=SC.ButtonView.extend({init:function(){arguments.callee.base.apply(this,arguments)},escapeHTML:YES,objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,iconKey:null,isEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["select-button"],menu:null,itemList:[],itemIdx:null,value:null,checkboxEnabled:YES,separatorPosition:null,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","objects","objects.[]"],preferMatrix:null,SELECT_BUTTON_SPRITE_WIDTH:28,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,customView:null,customViewClassName:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,supportFocusRing:YES,isContextMenuEnabled:NO,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectButtonView.TINY_OFFSET_X;case SC.SMALL_CONTROL_SIZE:return SC.SelectButtonView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectButtonView.REGULAR_OFFSET_X;case SC.LARGE_CONTROL_SIZE:return SC.SelectButtonView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectButtonView.HUGE_OFFSET_X}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)})}return b},render:function(b,f){arguments.callee.base.apply(this,arguments);var c,a,p,s,w,g,u,h,n,v,m,e,k,x,q,o,t,l,j;c=this.layout.width;if(f&&c){this.adjust({width:c-this.SELECT_BUTTON_SPRITE_WIDTH})}a=this.get("objects");a=this.sortObjects(a);p=a.length;s=this.get("nameKey");w=this.get("iconKey");g=this.get("valueKey");j=this.get("isEnabledKey");u=this.get("checkboxEnabled");h=this.get("value");n=this.get("localize");v=this.get("separatorPosition");m=[];e=YES;k=0;a.forEach(function(y){if(y){x=s?(y.get?y.get(s):y[s]):y.toString();x=n?SC.String.loc(x):x;q=w?(y.get?y.get(w):y[w]):null;if(SC.none(y[w])){q=null}o=(g)?(y.get?y.get(g):y[g]):y;if(!SC.none(h)&&!SC.none(o)){if(this._equals(h,o)){this.set("title",x);this.set("icon",q)}}if(this._equals(o,this.get("value"))){if(v>0&&v<p&&k>=p-v){k++}this.set("itemIdx",k);e=!u?NO:YES}else{e=NO}l=(j)?(y.get?y.get(j):y[j]):y;if(NO!==l){l=YES}if(k===0){this._defaultVal=o;this._defaultTitle=x;this._defaultIcon=q}var z=SC.Object.create({title:x,icon:q,value:o,isEnabled:l,checkbox:e,target:this,action:"displaySelectedItem"});m.push(z)}k+=1;if(v&&k===(p-v)){var A=SC.Object.create({separator:YES});m.push(A)}this.set("itemList",m)},this);if(f){b.attr("aria-haspopup","true");this.invokeLast(function(){var y=this.get("value");if(SC.none(y)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this.itemIdx)},_equals:function(b,a){var c=YES;if(b&&SC.typeOf(b)===SC.T_HASH&&a&&SC.typeOf(a)===SC.T_HASH){for(var e in b){if(b[e]!==a[e]){c=NO}}}else{c=(b===a)}return c},_action:function(q){var k,a,n,o,w,t,D,f,C,c,s,x,u,A,g,h,p,b,B,j,m,E,l;k=this.$(".sc-button-label")[0];E=SC.SelectButtonView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:E+=SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:E+=SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:E+=SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:E+=SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:E+=SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}}a=this.get("layer").offsetWidth+E;n=k.scrollWidth;o=this.get("lastMenuWidth");if(n){w=k.offsetWidth;if(n&&w){a=a+n-w}}if(!o||(a>o)){o=a}t=this.get("itemList");var y=this.get("customViewClassName"),v=this.get("customViewMenuOffsetWidth"),e="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button menu sc-scroll-view sc-menu-scroll-view sc-container-view sc-menu-item menu-item value sc-regular-size";e=y?(e+" "+y):e;j=(this.get("customView")||SC.MenuItemView).create();m=j.get("escapeHTML");l=document.body;for(s=0,B=t.length;s<B;++s){C=t.objectAt(s);c=document.createElement("div");c.style.cssText="top:-10000px; left: -10000px;  position: absolute;";c.className=e;c.innerHTML=m?SC.RenderContext.escapeHTML(C.title):C.title;l.appendChild(c);D=c.offsetWidth+v;if(!f||(D>f)){f=D}l.removeChild(c)}f=(f>o)?f:o;var z=SC.RootResponder.responder.get("currentWindowSize").width;if(f>z){f=(z-25)}this.set("lastMenuWidth",o);x=this.get("value");u=this.get("itemList");A=this.get("controlSize");h=this.get("customView");p=h?h:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:u,exampleView:p,isEnabled:YES,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:f},controlSize:A,itemWidth:o,performKeyEquivalent:function(G,F){switch(G){case"tab":case"shift_tab":return YES;default:return arguments.callee.base.apply(this,arguments)}}});if(!b){return NO}b.popup(this,this.preferMatrix);this.set("menu",b);h=b.menuItemViewForContentIndex(this.get("itemIdx"));b.set("currentMenuItem",h);if(h){h.becomeFirstResponder()}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=this.getPath("menu.selectedItem");if(!b){return NO}this.set("value",b.get("value"));this.set("title",b.get("title"));this.set("itemIdx",b.get("contentIndex"));return YES},changeSelectButtonPreferMatrix:function(){var b=0,j=0,e=0,f=0,k,g;switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:b=SC.SelectButtonView.TINY_OFFSET_Y;j=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;e=SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:b=SC.SelectButtonView.SMALL_OFFSET_Y;j=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;e=SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:b=SC.SelectButtonView.REGULAR_OFFSET_Y;j=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;e=SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:b=SC.SelectButtonView.LARGE_OFFSET_Y;j=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;e=SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:b=SC.SelectButtonView.HUGE_OFFSET_Y;j=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;e=SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT;break}var h=b,a=this.get("itemIdx"),m=this.get("leftAlign"),l,c;if(this.get("isDefaultPosition")){l=[1,0,3];this.set("preferMatrix",l)}else{if(a){h=a*j+b;k=this.get("separatorPosition");g=this.get("objects").length;if(k>0&&k<g&&a>=g-k){f=j-e;h-=f}}c=[m,-h,2];this.set("preferMatrix",c)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();this._menuRenderedTimestamp=0;var b=this;setTimeout(function(){SC.run(function(){b._menuRenderedTimestamp=Date.now()})},1);return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()},mouseUp:function(b){var e=new Date().getTime(),c=this._menuRenderedTimestamp,f=this.get("menu"),g=SC.platform.touch,a;if(c===0){c=Date.now()}if(f){a=f.getPath("rootMenu.targetMenuItem");if(a&&a.get("mouseHasEntered")){if(!a.performAction()){f.remove()}}else{if(!g&&(e-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){if(!f.get("mouseHasEntered")&&!this.get("isDefaultPosition")){a=f.get("currentMenuItem");if(a&&!a.performAction()){f.remove()}}else{f.remove()}}}}this._isMouseDown=NO;this.set("isActive",NO);return YES},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),insertTab:function(b){var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertBacktab:function(b){var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},_button_isSelectedDidChange:function(){}.observes("isSelected"),didAppendToDocument:function(){}});SC.SelectButtonView.TINY_OFFSET_X=0;SC.SelectButtonView.TINY_OFFSET_Y=0;SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectButtonView.SMALL_OFFSET_X=-18;SC.SelectButtonView.SMALL_OFFSET_Y=3;SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;SC.SelectButtonView.REGULAR_OFFSET_X=-17;SC.SelectButtonView.REGULAR_OFFSET_Y=3;SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;SC.SelectButtonView.LARGE_OFFSET_X=-17;SC.SelectButtonView.LARGE_OFFSET_Y=6;SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;SC.SelectButtonView.HUGE_OFFSET_X=0;SC.SelectButtonView.HUGE_OFFSET_Y=0;SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectButtonView.MENU_WIDTH_OFFSET=-2;SC.MenuPane.TINY_MENU_ITEM_HEIGHT=10;SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT=2;SC.MenuPane.TINY_MENU_HEIGHT_PADDING=2;SC.MenuPane.TINY_SUBMENU_OFFSET_X=0;SC.MenuPane.SMALL_MENU_ITEM_HEIGHT=16;SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT=7;SC.MenuPane.SMALL_MENU_HEIGHT_PADDING=4;SC.MenuPane.SMALL_SUBMENU_OFFSET_X=2;SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT=22;SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.REGULAR_MENU_HEIGHT_PADDING=6;SC.MenuPane.REGULAR_SUBMENU_OFFSET_X=2;SC.MenuPane.LARGE_MENU_ITEM_HEIGHT=31;SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT=20;SC.MenuPane.LARGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.LARGE_SUBMENU_OFFSET_X=4;SC.MenuPane.HUGE_MENU_ITEM_HEIGHT=20;SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.HUGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.HUGE_SUBMENU_OFFSET_X=0;SC.SelectFieldView=SC.FieldView.extend({displayProperties:["objects","nameKey","valueKey","isEnabled"],acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),tagName:"select",classNames:["sc-select-field-view"],objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,emptyName:null,localize:NO,cpDidChange:YES,disableSort:NO,validateMenuItem:function(b,a){return YES},sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");if(a){b=b.sortProperty(a)}else{b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)})}}return b},render:function(c,a){if(a||this.get("cpDidChange")){this.set("cpDidChange",NO);var g=this.get("nameKey");var l=this.get("valueKey");var k=this.get("objects");var b=this.get("value");var e,h;if(!this.get("isEnabled")){c.attr("disabled","disabled")}var j=this.get("localize");if(!l&&b){b=SC.guidFor(b)}if((b===null)||(b==="")){b="***"}if(k){k=this.sortObjects(k);if(!a){h=this.$input()[0];if(!h){return}h.innerHTML=""}var f=this.get("emptyName");if(f){if(j){f=SC.String.loc(f)}if(a){c.push('<option value="***">'+f+"</option>",'<option disabled="disabled"></option>')}else{e=document.createElement("option");e.value="***";e.innerHTML=f;h.appendChild(e);e=document.createElement("option");e.disabled="disabled";h.appendChild(e)}}k.forEach(function(p,o){if(p){var n=g?(p.get?p.get(g):p[g]):p.toString();if(j){n=SC.String.loc(n)}var q=(l)?(p.get?p.get(l):p[l]):p;if(!f&&o===0&&b==="***"){this.set("value",q)}if(q!==null&&q!==undefined){q=(SC.guidFor(q))?SC.guidFor(q):q.toString()}var m=(this.validateMenuItem&&this.validateMenuItem(q,n))?"":'disabled="disabled" ';if(a){c.push("<option "+m+'value="'+q+'">'+n+"</option>")}else{e=document.createElement("option");e.value=q;e.innerHTML=n;if(m.length>0){e.disable="disabled"}h.appendChild(e)}}else{if(a){c.push('<option disabled="disabled"></option>')}else{e=document.createElement("option");e.disabled="disabled";h.appendChild(e)}}},this);this.setFieldValue(b)}else{this.set("value",null)}}else{this.$().prop("disabled",!this.get("isEnabled"))}},_objectsObserver:function(){this.set("cpDidChange",YES)}.observes("objects"),_objectArrayObserver:function(){this.set("cpDidChange",YES);this.propertyDidChange("objects")}.observes("*objects.[]"),_nameKeyObserver:function(){this.set("cpDidChange",YES)}.observes("nameKey"),_valueKeyObserver:function(){this.set("cpDidChange",YES)}.observes("valueKey"),_isEnabledObserver:function(){this.set("cpDidChange",YES)}.observes("isEnabled"),$input:function(){return this.$()},mouseDown:function(a){if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)}},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},getFieldValue:function(){var g=arguments.callee.base.apply(this,arguments);var c=this.get("valueKey");var f=this.get("objects");var e=null;var a;if(g=="***"){g=null}else{if(g&&f){var h=(SC.typeOf(f.length)===SC.T_FUNCTION)?f.length():f.length;while(!e&&(--h>=0)){a=f.objectAt?f.objectAt(h):f[h];if(a===null||a===undefined){continue}if(c){a=(a.get)?a.get(c):a[c]}var b=(a!==null&&a!==undefined)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null;if(g==b){e=a}}}}return(c||e)?e:g},setFieldValue:function(a){if(SC.none(a)){a="***"}else{a=((a!==null&&a!==undefined)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null)}this.$input().val(a);return this},fieldDidFocus:function(){var a=this.get("isFocused");if(!a){this.set("isFocused",true)}},fieldDidBlur:function(){var a=this.get("isFocused");if(a){this.set("isFocused",false)}},_isFocusedObserver:function(){this.$().setClass("focus",this.get("isFocused"))}.observes("isFocused"),didCreateLayer:function(){var a=this.$input();if(this.get("isEnabled")===false){this.$()[0].disabled=true}SC.Event.add(a,"blur",this,this.fieldDidBlur);SC.Event.add(a,"focus",this,this.fieldDidFocus);SC.Event.add(a,"change",this,this._field_fieldValueDidChange)},willDestroyLayer:function(){var a=this.$input();SC.Event.remove(a,"focus",this,this.fieldDidFocus);SC.Event.remove(a,"blur",this,this.fieldDidBlur);SC.Event.remove(a,"change",this,this._field_fieldValueDidChange)}});SC.SliderView=SC.View.extend(SC.Control,{classNames:"sc-slider-view",ariaRole:"slider",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,step:0.1,displayProperties:["displayValue","ariaValue","minimum","maximum","step","frame"],ariaValue:function(){return this.get("value")}.property("value").cacheable(),renderDelegateName:"sliderRenderDelegate",displayValue:function(){var b=this.get("minimum"),a=this.get("maximum"),e=this.get("value"),c=this.get("step");e=Math.min(Math.max(e,b),a);if(!SC.none(c)&&c!==0){e=Math.round(e/c)*c}if(e!==0){e=Math.floor((e-b)/(a-b)*100)}return e}.property("value","minimum","maximum","step").cacheable(),_isMouseDown:NO,mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;return this._triggerHandle(a,YES)},mouseDragged:function(a){return this._isMouseDown?this._triggerHandle(a):YES},mouseUp:function(a){if(this._isMouseDown){this.set("isActive",NO)}var b=this._isMouseDown?this._triggerHandle(a):YES;this._isMouseDown=NO;return b},mouseWheel:function(b){if(!this.get("isEnabled")){return YES}var e=this.get("minimum"),a=this.get("maximum"),f=this.get("step"),c=this.get("value")+((b.wheelDeltaX+b.wheelDeltaY)*f),g=Math.round(c/f)*f;if(c<e){this.setIfChanged("value",e)}else{if(c>a){this.setIfChanged("value",a)}else{this.setIfChanged("value",c)}}return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchesDragged:function(a){return this.mouseDragged(a)},_triggerHandle:function(k,f){var a=this.get("frame").width,c=this.get("minimum"),g=this.get("maximum"),b=this.get("step"),j=this.get("value"),e;if(f){e=this.convertFrameFromView({x:k.pageX}).x;this._evtDiff=k.pageX-e}else{e=k.pageX-this._evtDiff}e=Math.max(0,Math.min(e/a,1));if(f){var h=this.get("value");h=(h-c)/(g-c);if(Math.abs(h*a-e*a)<16){this._offset=h-e}else{this._offset=0}}e=Math.max(0,Math.min(e+this._offset,1));e=c+((g-c)*e);if(b!==0){e=Math.round(e/b)*b}if(Math.abs(j-e)>=0.01){this.set("value",e)}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),keyDown:function(j){if(j.which===9||j.keyCode===9){var g=j.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(g){g.becomeFirstResponder()}else{j.allowDefault()}return YES}if(j.which>=33&&j.which<=40){var e=this.get("minimum"),h=this.get("maximum"),b=this.get("step"),k=h-e,a=0,c,f=this.get("value");if(j.which===37||j.which===38||j.which===34){if(b===0){if(k<100){a=f-1}else{c=Math.abs(k/100);if(c<2){c=2}a=f-c}}else{a=f-b}}if(j.which===39||j.which===40||j.which===33){if(b===0){if(k<100){a=f+2}else{c=Math.abs(k/100);if(c<2){c=2}a=f+c}}else{a=f+b}}if(j.which===36){a=h}if(j.which===35){a=e}if(a>=e&&a<=h){this.set("value",a)}}else{j.allowDefault();return NO}return YES},contentKeys:{contentValueKey:"value",contentMinimumKey:"minimum",contentMaximumKey:"maximum",contentIsIndeterminateKey:"isIndeterminate"}});sc_require("mixins/collection_group");sc_require("views/disclosure");SC.SourceListGroupView=SC.View.extend(SC.Control,SC.CollectionGroup,{classNames:["sc-source-list-group"],content:null,isGroupVisible:YES,hasGroupTitle:YES,groupTitleKey:null,groupVisibleKey:null,render:function(a,b){a.push('<div role="button" class="sc-source-list-label sc-disclosure-view sc-button-view button disclosure no-disclosure">','<img src="'+SC.BLANK_IMAGE_URL+'" class="button" />','<span class="label"></span></div>')},createChildViews:function(){},contentPropertyDidChange:function(g,c){var f=this.get("content");var j=this.outlet("labelView");if(f===null){j.setIfChanged("isVisible",NO);this.setIfChanged("hasGroupTitle",NO);return}else{j.setIfChanged("isVisible",YES);this.setIfChanged("hasGroupTitle",YES)}var b=this.getDelegateProperty("groupTitleKey",this.displayDelegate);if((c=="*")||(b&&(c==b))){var h=(f&&f.get&&b)?f.get(b):f;if(h!=this._title){this._title=h;if(h){h=h.capitalize()}j.set("title",h)}}var e=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if((c=="*")||(e&&(c==e))){if(e){j.removeClassName("no-disclosure");var a=(f&&f.get)?!!f.get(e):YES;if(a!=this.get("isGroupVisible")){this.set("isGroupVisible",a);j.set("value",a)}}else{j.addClassName("no-disclosure")}}},disclosureValueDidChange:function(c){if(c==this.get("isGroupVisible")){return}var b=this.get("content");var a=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if(b&&b.set&&a){b.set(a,c)}this.set("isGroupVisible",c);if(this.owner&&this.owner.updateChildren){this.owner.updateChildren(true)}},labelView:SC.DisclosureView.extend({value:YES,_valueObserver:function(){if(this.owner){this.owner.disclosureValueDidChange(this.get("value"))}}.observes("value")})});sc_require("views/list");sc_require("views/source_list_group");SC.SourceListView=SC.ListView.extend({theme:"source-list",classNames:["sc-source-list"],rowHeight:32,selectOnMouseDown:NO,actOnSelect:YES});SC.SplitDividerView=SC.View.extend({classNames:["sc-split-divider-view"],mouseDown:function(a){var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)},doubleClick:function(a){var b=this.get("splitView");return(b)?b.doubleClickInThumbView(a,this):arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)}});sc_require("views/split_divider");SC.RESIZE_BOTH="resize-both";SC.RESIZE_TOP_LEFT="resize-top-left";SC.RESIZE_BOTTOM_RIGHT="resize-bottom-right";SC.SplitView=SC.View.extend({classNames:["sc-split-view"],displayProperties:["layoutDirection"],delegate:null,layoutDirection:SC.LAYOUT_HORIZONTAL,canCollapseViews:YES,autoresizeBehavior:SC.RESIZE_BOTTOM_RIGHT,defaultThickness:0.5,topLeftMinThickness:null,topLeftMaxThickness:null,bottomRightMinThickness:null,bottomRightMaxThickness:null,dividerThickness:null,isSplitView:YES,topLeftView:SC.View,dividerView:SC.SplitDividerView,bottomRightView:SC.View,topLeftThickness:function(){var a=this.get("topLeftView");return a?this.thicknessForView(a):0}.property("topLeftView").cacheable(),bottomRightThickness:function(){var a=this.get("bottomRightView");return a?this.thicknessForView(a):0}.property("bottomRightView").cacheable(),thumbViewCursor:null,canCollapseView:function(a){return this.invokeDelegateMethod(this.delegate,"splitViewCanCollapse",this,a)},thicknessForView:function(a){var c=this.get("layoutDirection"),b=a.get("frame");return(c===SC.LAYOUT_HORIZONTAL)?b.width:b.height},createChildViews:function(){var f=[],c=["topLeftView","dividerView","bottomRightView"],b=c.length,a,e;for(e=0;e<b;++e){if(a=this.get(c[e])){a=this[c[e]]=this.createChildView(a,{layoutView:this,rootElementPath:[e]});f.push(a)}}this.set("childViews",f);return this},updateChildLayout:function(){var b=this.get("topLeftView"),c=this.get("bottomRightView"),k=this.get("dividerView"),f=this.get("autoresizeBehavior"),l=this.get("layoutDirection"),a=this.get("frame"),e=this._desiredTopLeftThickness,m=this.get("dividerThickness"),j=(l===SC.LAYOUT_HORIZONTAL)?a.width:a.height,n=j-m-e,h,g;m=(!SC.none(m))?m:7;g=b.get("isCollapsed")||NO;b.setIfChanged("isVisible",!g);h=SC.clone(b.get("layout"));if(l===SC.LAYOUT_HORIZONTAL){h.top=0;h.left=0;h.bottom=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:h.right=n+m;delete h.width;break;case SC.RESIZE_BOTTOM_RIGHT:delete h.right;delete h.height;h.width=e;break}}else{h.top=0;h.left=0;h.right=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:h.bottom=n+m;delete h.height;break;case SC.RESIZE_BOTTOM_RIGHT:h.height=e;delete h.bottom;delete h.width;break}}b.set("layout",h);if(k){h=SC.clone(k.get("layout"));if(l===SC.LAYOUT_HORIZONTAL){h.width=m;h.top=0;h.bottom=0;delete h.height;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:h.right=n;delete h.left;delete h.centerX;delete h.centerY;break;case SC.RESIZE_BOTTOM_RIGHT:h.left=e;delete h.right;delete h.centerX;delete h.centerY;break}}else{h.height=m;h.left=0;h.right=0;delete h.width;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:h.bottom=n;delete h.top;delete h.centerX;delete h.centerY;break;case SC.RESIZE_BOTTOM_RIGHT:h.top=e;delete h.bottom;delete h.centerX;delete h.centerY;break}}k.set("layout",h)}g=c.get("isCollapsed")||NO;c.setIfChanged("isVisible",!g);h=SC.clone(c.get("layout"));if(l===SC.LAYOUT_HORIZONTAL){h.top=0;h.bottom=0;h.right=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:h.left=e+m;delete h.width;break;case SC.RESIZE_TOP_LEFT:h.width=n;delete h.left;break}}else{h.left=0;h.right=0;h.bottom=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:h.top=e+m;delete h.height;break;case SC.RESIZE_TOP_LEFT:delete h.top;h.height=n;break}}c.set("layout",h);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")},renderLayout:function(b,a){if(a||this._recalculateDivider){var g=this.get("layoutDirection"),c=this.get("frame"),f=this.$(),k=this.get("defaultThickness"),e=this.get("autoresizeBehavior"),j=this.get("dividerThickness"),h;if(!this.get("thumbViewCursor")){this.set("thumbViewCursor",SC.Cursor.create())}j=!SC.none(j)?j:7;if(this._recalculateDivider===undefined&&k<1){this._recalculateDivider=YES}else{if(this._recalculateDivider){this._recalculateDivider=NO}}if(f[0]){h=(g===SC.LAYOUT_HORIZONTAL)?f[0].offsetWidth:f[0].offsetHeight}else{h=(g===SC.LAYOUT_HORIZONTAL)?c.width:c.height}if(SC.none(k)||(k>0&&k<1)){k=Math.floor((h-(j))*(k||0.5))}if(e===SC.RESIZE_BOTTOM_RIGHT){this._desiredTopLeftThickness=k}else{this._desiredTopLeftThickness=h-j-k}this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");this._updateTopLeftThickness(0);this._setCursorStyle();this.updateChildLayout()}arguments.callee.base.apply(this,arguments)},render:function(a,b){arguments.callee.base.apply(this,arguments);if(this._inLiveResize){this._setCursorStyle()}if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){a.addClass("sc-horizontal")}else{a.addClass("sc-vertical")}},mouseDownInThumbView:function(a,c){var b=this.getPath("pane.rootResponder");if(!b){return NO}b.dragDidStart(this);this._mouseDownX=a.pageX;this._mouseDownY=a.pageY;this._thumbView=c;this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");this.beginLiveResize();this._inLiveResize=YES;return YES},mouseDragged:function(a){var b=(this._layoutDirection===SC.LAYOUT_HORIZONTAL)?a.pageX-this._mouseDownX:a.pageY-this._mouseDownY;this._updateTopLeftThickness(b);return YES},mouseUp:function(a){if(this._inLiveResize===YES){this._thumbView=null;this._inLiveResize=NO;this.endLiveResize();return YES}this._setCursorStyle();return NO},touchesDragged:function(a){return this.mouseDragged(a)},touchEnd:function(a){return this.mouseUp(a)},doubleClickInThumbView:function(b,e){var a=this._topLeftView,c=a.get("isCollapsed")||NO;if(!c&&!this.canCollapseView(a)){a=this._bottomRightView;c=a.get("isCollapsed")||NO;if(!c&&!this.canCollapseView(a)){return NO}}if(!c){this._uncollapsedThickness=this.thicknessForView(a);if(a===this._topLeftView){this._updateTopLeftThickness(this.topLeftThickness()*-1)}else{this._updateBottomRightThickness(this.bottomRightThickness()*-1)}if(!a.get("isCollapsed")){this._uncollapsedThickness=null}}else{if(a===this._topLeftView){this._updateTopLeftThickness(this._uncollapsedThickness)}else{this._updateBottomRightThickness(this._uncollapsedThickness)}a._uncollapsedThickness=null}this._setCursorStyle();return true},_updateTopLeftThickness:function(f){var a=this._topLeftView,c=this._bottomRightView,g=this.thicknessForView(a),h=this.thicknessForView(c),l=this._dividerThickness,k=0,b=this._topLeftViewThickness+f,o=this._layoutDirection,q=this.canCollapseView(c),n=b,m=this.get("topLeftMaxThickness"),e=this.get("topLeftMinThickness"),p,j,s;if(!a.get("isCollapsed")){k+=g}if(!c.get("isCollapsed")){k+=h}if(!SC.none(m)){n=Math.min(m,n)}if(!SC.none(e)){n=Math.max(e,n)}m=this.get("bottomRightMaxThickness");e=this.get("bottomRightMinThickness");p=k-n;if(!SC.none(m)){p=Math.min(m,p)}if(!SC.none(e)){p=Math.max(e,p)}n=k-p;n=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,n);n=Math.min(n,k);n=Math.max(0,n);j=a.get("collapseAtThickness");if(!j){j=0}s=c.get("collapseAtThickness");s=SC.none(s)?k:(k-s);if((b<=j)&&this.canCollapseView(a)){m=c.get("maxThickness");if(!m||(l+k)<=m){n=0}}else{if(b>=s&&this.canCollapseView(c)){m=a.get("maxThickness");if(!m||(l+k)<=m){n=k}}}if(n!=this.thicknessForView(a)){this._desiredTopLeftThickness=n;a.set("isCollapsed",n===0);c.set("isCollapsed",n>=k);this.updateChildLayout();this.displayDidChange()}},_updateBottomRightThickness:function(f){var a=this._topLeftView,c=this._bottomRightView,g=this.thicknessForView(a),h=this.thicknessForView(c),l=this._dividerThickness,k=0,b=this._topLeftViewThickness+f,o=this._layoutDirection,q=this.canCollapseView(c),n=b,m=this.get("topLeftMaxThickness"),e=this.get("topLeftMinThickness"),p,j,s;if(!a.get("isCollapsed")){k+=g}if(!c.get("isCollapsed")){k+=h}if(!SC.none(m)){n=Math.min(m,n)}if(!SC.none(e)){n=Math.max(e,n)}m=this.get("bottomRightMaxThickness");e=this.get("bottomRightMinThickness");p=k-n;if(!SC.none(m)){p=Math.min(m,p)}if(!SC.none(e)){p=Math.max(e,p)}n=k-p;n=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,n);n=Math.min(n,k);n=Math.max(0,n);j=a.get("collapseAtThickness");if(!j){j=0}s=c.get("collapseAtThickness");s=SC.none(s)?k:(k-s);if((b<=j)&&this.canCollapseView(a)){m=c.get("maxThickness");if(!m||(l+k)<=m){n=0}}else{if(b>=s&&this.canCollapseView(c)){m=a.get("maxThickness");if(!m||(l+k)<=m){n=k}}}if(n!=this.thicknessForView(a)){this._desiredTopLeftThickness=n;a.set("isCollapsed",n===0);c.set("isCollapsed",n>=k);this.updateChildLayout();this.displayDidChange()}},_setCursorStyle:function(){var f=this._topLeftView,g=this._bottomRightView,b=this.get("thumbViewCursor"),c=this.thicknessForView(f),e=this.thicknessForView(g),a=this.get("dividerView");this._layoutDirection=this.get("layoutDirection");if(f.get("isCollapsed")||c===this.get("topLeftMinThickness")||e==this.get("bottomRightMaxThickness")){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"s-resize")}else{if(g.get("isCollapsed")||c===this.get("topLeftMaxThickness")||e==this.get("bottomRightMinThickness")){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"w-resize":"n-resize")}else{if(SC.browser.isIE){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"n-resize")}else{b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"ew-resize":"ns-resize")}}}a.set("cursor",b);if(this._inLiveResize){this.set("cursor",b)}}.observes("layoutDirection"),splitViewCanCollapse:function(b,a){if(b.get("canCollapseViews")===NO){return NO}if(a.get("canCollapse")===NO){return NO}return YES},splitViewConstrainThickness:function(c,a,b){return b},_forceSplitCalculation:function(){this.updateLayout()}.observes("*pane.isPaneAttached"),viewDidResize:function(){arguments.callee.base.apply(this,arguments);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")}.observes("layout")});SC.mixin(SC.View.prototype,{splitView:function(){var a=this;while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable()});sc_require("views/collection");SC.StackedView=SC.CollectionView.extend({classNames:["sc-stacked-view"],layout:{top:0,left:0,right:0,height:1},computeNowShowing:function(a){return this.get("allContentIndexes")},updateHeight:function(a){if(a){this._updateHeight()}else{this.invokeLast(this._updateHeight)}return this},_updateHeight:function(){var f=this.get("childViews"),b=f.get("length"),c,e,a;if(b===0){a=1}else{c=f.objectAt(b-1);e=c?c.get("layer"):null;a=e?(e.offsetTop+e.offsetHeight):1;e=null}this.adjust("height",a)},didReload:function(a){return this.updateHeight()},didCreateLayer:function(){return this.updateHeight()}});SC.StaticContentView=SC.View.extend(SC.StaticLayout,{classNames:["sc-static-content-view"],displayProperties:["content"],content:null,contentLayoutDidChange:function(){this._viewFrameDidChange()},useStaticLayout:YES,frame:function(){var a=this.get("layer"),b;if(!a){return{x:0,y:0,width:0,height:0}}if(a.getBoundingClientRect&&!SC.browser.isIE8OrLower){b=a.getBoundingClientRect();return{x:0,y:0,width:b.width,height:b.height}}else{return{x:0,y:0,width:a.clientWidth,height:a.clientHeight}}}.property("content").cacheable(),parentViewDidResize:function(){this.contentLayoutDidChange()},didUpdateLayer:function(){this.contentLayoutDidChange()},render:function(a,c){var b=this.get("content");a.push(b||"")},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();return YES}});sc_require("views/segmented");SC.TOP_LOCATION="top";SC.TOP_TOOLBAR_LOCATION="top-toolbar";SC.BOTTOM_LOCATION="bottom";SC.TabView=SC.View.extend({classNames:["sc-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],isEnabled:YES,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,tabHeight:SC.REGULAR_BUTTON_HEIGHT,tabLocation:SC.TOP_LOCATION,userDefaultKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");this.get("containerView").set("nowShowing",a);this.get("segmentedView").set("value",a);return this}.observes("nowShowing"),_tab_saveUserDefault:function(){var a=this.get("nowShowing");var b=this.get("userDefaultKey");if(b){SC.userDefaults.set([b,"nowShowing"].join(":"),a)}}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("segmentedView").set("items",this.get("items"));return this}.observes("items"),init:function(){arguments.callee.base.apply(this,arguments);this._tab_nowShowingDidChange()._tab_itemsDidChange()},awake:function(){arguments.callee.base.apply(this,arguments);var a=this.get("userDefaultKey");if(a){a=[a,"nowShowing"].join(":");var b=SC.userDefaults.get(a);if(!SC.none(b)){this.set("nowShowing",b)}}},createChildViews:function(){var f=[],e,c,b=this.get("tabLocation"),a=this.get("tabHeight"),g=this.get("controlSize");if(b===SC.TOP_LOCATION){c={top:a/2+1,left:0,right:0,bottom:0,border:1}}else{if(b===SC.TOP_TOOLBAR_LOCATION){c={top:a+1,left:0,right:0,bottom:0,border:1}}else{c={top:0,left:0,right:0,bottom:(a/2)-1,border:1}}}e=this.containerView.extend({layout:c,ariaRole:"tabpanel"});this.containerView=this.createChildView(e);c=(b===SC.TOP_LOCATION||b===SC.TOP_TOOLBAR_LOCATION)?{height:a,left:0,right:0,top:0}:{height:a,left:0,right:0,bottom:0};this.segmentedView=this.get("segmentedView").extend({layout:c,controlSize:g,_sc_tab_segmented_valueDidChange:function(){var h=this.get("parentView");if(h){h.set("nowShowing",this.get("value"))}}.observes("value"),init:function(){var h=this.get("parentView");if(h){SC._TAB_ITEM_KEYS.forEach(function(j){this[j]=h.get(j)},this)}return arguments.callee.base.apply(this,arguments)}});this.segmentedView=this.createChildView(this.segmentedView);f.push(this.segmentedView);f.push(this.containerView);this.set("childViews",f);return this},containerView:SC.ContainerView.extend({renderDelegateName:"wellRenderDelegate"}),segmentedView:SC.SegmentedView});SC._TAB_ITEM_KEYS=["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemActionKey","itemTargetKey"];SC.ThumbView=SC.View.extend({classNames:["sc-thumb-view"],isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),prepareContext:function(a,c){var b=this.get("splitView");if(b){this.set("cursor",b.get("thumbViewCursor"))}return arguments.callee.base.apply(this,arguments)},mouseDown:function(a){if(!this.get("isEnabled")){return NO}var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)}});SC.WebView=SC.View.extend(SC.Control,{classNames:"sc-web-view",displayProperties:["value","shouldAutoResize"],shouldAutoResize:NO,render:function(a,e){var c=this.get("value"),b;if(e){a.push('<iframe src="'+c+'" style="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0px;"></iframe>')}else{if(c!==this._lastSrc){b=this.$("iframe");b.attr("src","javascript:;");b.attr("src",c)}}this._lastSrc=c},didCreateLayer:function(){var a=this.$("iframe");SC.Event.add(a,"load",this,this.iframeDidLoad)},willDestroyLayer:function(){var a=this.$("iframe");SC.Event.remove(a,"load",this,this.iframeDidLoad)},iframeDidLoad:function(){if(this.get("shouldAutoResize")===YES){var a;var c=this.$("iframe")[0];if(c&&c.contentWindow){a=c.contentWindow;if(a&&a.document&&a.document.documentElement){var b=a.document.documentElement;if(!SC.browser.isIE){this.$().width(b.scrollWidth);this.$().height(b.scrollHeight)}else{this.$().width(b.scrollWidth+12);this.$().height(b.scrollHeight+5)}}}}}});SC.WELL_CONTAINER_PADDING=15;SC.WellView=SC.ContainerView.extend({classNames:"sc-well-view",contentLayout:{top:SC.WELL_CONTAINER_PADDING,bottom:SC.WELL_CONTAINER_PADDING,left:SC.WELL_CONTAINER_PADDING,right:SC.WELL_CONTAINER_PADDING},renderDelegateName:"wellRenderDelegate",createChildViews:function(){var a=this.get("contentView");if(a){a=this.contentView=this.createChildView(a);a.set("layout",this.contentLayout);this.childViews=[a]}},contentViewDidChange:function(){var a=this.get("contentView");a.set("layout",this.contentLayout);this.replaceContent(a)}.observes("contentView")});SC.MIXED_STATE="__MIXED__";SC.DataSource=SC.Object.extend({fetch:function(a,b){return NO},retrieveRecords:function(a,c,b){return this._handleEach(a,c,this.retrieveRecord,b)},commitRecords:function(c,b,h,g,j){var f,a,e;if(b.length>0){e=this.createRecords.call(this,c,b,j)}if(h.length>0){f=this.updateRecords.call(this,c,h,j);e=SC.none(e)?f:(e===f)?e:SC.MIXED_STATE}if(g.length>0){a=this.destroyRecords.call(this,c,g,j);e=SC.none(e)?a:(e===a)?e:SC.MIXED_STATE}return e||NO},cancel:function(a,b){return NO},updateRecords:function(a,b,c){return this._handleEach(a,b,this.updateRecord,null,c)},createRecords:function(a,b,c){return this._handleEach(a,b,this.createRecord,null,c)},destroyRecords:function(a,b,c){return this._handleEach(a,b,this.destroyRecord,null,c)},_handleEach:function(j,f,c,a,b){var g=f.length,k,h,l,e;for(k=0;k<g;k++){e=a?a[k]:b;l=c.call(this,j,f[k],e);if(h===undefined){h=l}else{if(h===YES){h=(l===YES)?YES:SC.MIXED_STATE}else{if(h===NO){h=(l===NO)?NO:SC.MIXED_STATE}}}}return !SC.none(h)?h:null},updateRecord:function(a,b,c){return NO},retrieveRecord:function(a,b,c){return NO},createRecord:function(a,b,c){return NO},destroyRecord:function(a,b,c){return NO}});sc_require("data_sources/data_source");SC.CascadeDataSource=SC.DataSource.extend({dataSources:null,from:function(a){var b=this.get("dataSources");if(!b){this.set("dataSources",b=[])}b.push(a);return this},fetch:function(c,h){var f=this.get("dataSources"),b=f?f.length:0,e=NO,j,g,a;for(a=0;(e!==YES)&&a<b;a++){g=f.objectAt(a);j=g.fetch?g.fetch.apply(g,arguments):NO;e=this._handleResponse(e,j)}return e},retrieveRecords:function(j,e,b){var c=this.get("dataSources"),f=c?c.length:0,g=NO,k,a,h;for(h=0;(g!==YES)&&h<f;h++){a=c.objectAt(h);k=a.retrieveRecords.apply(a,arguments);g=this._handleResponse(g,k)}return g},commitRecords:function(l,c,j,f,e){var b=this.get("dataSources"),g=b?b.length:0,h=NO,m,a,k;for(k=0;(h!==YES)&&k<g;k++){a=b.objectAt(k);m=a.commitRecords.apply(a,arguments);h=this._handleResponse(h,m)}return h},cancel:function(c,g){var f=this.get("dataSources"),b=f?f.length:0,e=NO,j,h,a;for(a=0;(e!==YES)&&a<b;a++){h=f.objectAt(a);j=h.cancel.apply(h,arguments);e=this._handleResponse(e,j)}return e},init:function(){arguments.callee.base.apply(this,arguments);var b=this.get("dataSources"),a=b?b.get("length"):0,c;while(--a>=0){c=b[a];if(SC.typeOf(c)===SC.T_STRING){b[a]=this.get(c)}}},_handleResponse:function(b,a){if(a===YES){return YES}else{if(b===NO){return(a===NO)?NO:SC.MIXED_STATE}else{return SC.MIXED_STATE}}}});sc_require("core");sc_require("models/record");SC.Query=SC.Object.extend(SC.Copyable,SC.Freezable,{isQuery:YES,conditions:null,orderBy:null,recordType:null,recordTypes:null,expandedRecordTypes:function(){var b=SC.CoreSet.create(),a,c;if(a=this.get("recordType")){this._scq_expandRecordType(a,b)}else{if(a=this.get("recordTypes")){a.forEach(function(e){this._scq_expandRecordType(e,b)},this)}else{this._scq_expandRecordType(SC.Record,b)}}c=SC.Query._scq_queriesWithExpandedRecordTypes;if(!c){c=SC.Query._scq_queriesWithExpandedRecordTypes=SC.CoreSet.create()}c.add(this);return b.freeze()}.property("recordType","recordTypes").cacheable(),_scq_expandRecordType:function(b,a){if(a.contains(b)){return}a.add(b);if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}b.subclasses.forEach(function(c){this._scq_expandRecordType(c,a)},this)},parameters:null,location:"local",scope:null,isRemote:function(){return this.get("location")===SC.Query.REMOTE}.property("location").cacheable(),isLocal:function(){return this.get("location")===SC.Query.LOCAL}.property("location").cacheable(),isEditable:NO,contains:function(a,e){var f,b=YES;if(f=this.get("recordTypes")){b=f.find(function(g){return SC.kindOf(a,g)})}else{if(f=this.get("recordType")){b=SC.kindOf(a,f)}}if(!b){return NO}var c=this.get("scope");if(c&&!c.contains(a)){return NO}if(!this._isReady){this.parse()}if(!this._isReady){return NO}if(e===undefined){e=this.parameters||this}return this._tokenTree.evaluate(a,e)},containsRecordTypes:function(a){var b=this.get("recordType");if(b){return !!a.find(function(c){return SC.kindOf(c,b)})}else{if(b=this.get("recordTypes")){return !!b.find(function(c){return !!a.find(function(e){return SC.kindOf(e,c)})})}else{return YES}}},compare:function(h,e){var c=0,g,b,a,j,f;if(h===e){return 0}if(!this._isReady){this.parse()}if(!this._isReady){return SC.compare(h.get("storeKey"),e.get("storeKey"))}b=this._order;if(SC.typeOf(b)===SC.T_FUNCTION){c=b.call(null,h,e)}else{a=b?b.length:0;for(j=0;c===0&&(j<a);j++){g=b[j].propertyName;f=/\./.test(g)?"getPath":"get";if(SC.Query.comparisons[g]){c=SC.Query.comparisons[g](h[f](g),e[f](g))}else{c=SC.compare(h[f](g),e[f](g))}if((c!==0)&&b[j].descending){c=(-1)*c}}}if(c!==0){return c}else{return SC.compare(h.get("storeKey"),e.get("storeKey"))}},_isReady:NO,parse:function(){var c=this.get("conditions"),e=this.get("queryLanguage"),b,a;b=this._tokenList=this.tokenizeString(c,e);a=this._tokenTree=this.buildTokenTree(b,e);this._order=this.buildOrder(this.get("orderBy"));this._isReady=!!a&&!a.error;if(a&&a.error){throw a.error}return this._isReady},queryWithScope:function(c){var b=SC.keyFor("__query__",SC.guidFor(this)),a=c[b];if(!a){c[b]=a=this.copy();a.set("scope",c);a.freeze()}return a},copyKeys:["conditions","orderBy","recordType","recordTypes","parameters","location","scope"],concatenatedProperties:["copyKeys"],copy:function(){var e={},c=this.get("copyKeys"),g=c?c.length:0,b,f,a;while(--g>=0){b=c[g];f=this.get(b);if(f!==undefined){e[b]=f}}a=this.constructor.create(e);e=null;return a},queryLanguage:{UNKNOWN:{firstCharacter:/[^\s'"\w\d\(\)\{\}]/,notAllowed:/[\-\s'"\w\d\(\)\{\}]/},PROPERTY:{firstCharacter:/[a-zA-Z_]/,notAllowed:/[^a-zA-Z_0-9\.]/,evalType:"PRIMITIVE",evaluate:function(f,b){var g=this.tokenValue.split(".");var a=g.length;if(a<2){return f.get(this.tokenValue)}var c=f;for(var e=0;e<a;e++){if(!c){return}if(c.get){c=c.get(g[e])}else{c=c[g[e]]}}return c}},NUMBER:{firstCharacter:/[\d\-]/,notAllowed:/[^\d\-\.]/,format:/^-?\d+$|^-?\d+\.\d+$/,evalType:"PRIMITIVE",evaluate:function(b,a){return parseFloat(this.tokenValue)}},STRING:{firstCharacter:/['"]/,delimited:true,evalType:"PRIMITIVE",evaluate:function(b,a){return this.tokenValue}},PARAMETER:{firstCharacter:/\{/,lastCharacter:"}",delimited:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]}},"%@":{rememberCount:true,reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]}},OPEN_PAREN:{firstCharacter:/\(/,singleCharacter:true},CLOSE_PAREN:{firstCharacter:/\)/,singleCharacter:true},AND:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return e&&b}},OR:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return e||b}},NOT:{reservedWord:true,rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.rightSide.evaluate(c,a);return !b}},"=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.isEqual(e,b)}},"!=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return !SC.isEqual(e,b)}},"<":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)==-1}},"<=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)!=1}},">":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)==1}},">=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)!=-1}},BEGINS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.leftSide.evaluate(c,a);var e=this.rightSide.evaluate(c,a);return(b&&b.indexOf(e)===0)}},ENDS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,b){var c=this.leftSide.evaluate(e,b);var a=this.rightSide.evaluate(e,b);return(c&&c.length>=a.length&&c.lastIndexOf(a)===(c.length-a.length))}},CONTAINS:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(f,a){var e=this.leftSide.evaluate(f,a)||[];var h=this.rightSide.evaluate(f,a);var c=SC.typeOf(e);if(c===SC.T_STRING){return(e.indexOf(h)!==-1)}else{if(c===SC.T_ARRAY||e.toArray){if(c!==SC.T_ARRAY){e=e.toArray()}var g=false;var b=0;while(g===false&&b<e.length){if(h==e[b]){g=true}b++}return g}}}},ANY:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var g=this.leftSide.evaluate(e,a);var b=this.rightSide.evaluate(e,a);var f=false;var c=0;while(f===false&&c<b.length){if(g==b[c]){f=true}c++}return f}},MATCHES:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return b.test(e)}},TYPE_IS:{reservedWord:true,rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var c=SC.Store.recordTypeFor(e.storeKey);var b=this.rightSide.evaluate(e,a);var f=SC.objectForPropertyPath(b);return c==f}},"null":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return null}},"undefined":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return undefined}},"false":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false}},"true":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true}},YES:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true}},NO:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false}}},tokenizeString:function(w,q){var k=[],u=null,h=null,g=null,v=null,a=null,j=null,e=null,x=null,s=false,b=false,m=false,n=false,o={};function f(y,c){h=q[y];if(h.format&&!h.format.test(c)){y="UNKNOWN"}if(h.delimited){n=true}if(!h.delimited){for(var t in q){if(q[t].reservedWord&&t==c){y=t}}}h=q[y];if(h&&h.rememberCount){if(!o[y]){o[y]=0}c=o[y];o[y]+=1}k.push({tokenType:y,tokenValue:c});a=null;j=null;e=null}if(!w){return[]}var l=w.length;for(var p=0;p<l;p++){s=(p===l-1);u=w.charAt(p);n=false;if(a){h=q[a];b=h.delimited?u===x:h.notAllowed.test(u);if(!b){e+=u}if(b||s){f(a,e)}if(s&&!b){n=true}}if(!a&&!n){for(g in q){h=q[g];if(h.firstCharacter&&h.firstCharacter.test(u)){a=g}}if(a){h=q[a];e=u;if(h.delimited){e="";if(h.lastCharacter){x=h.lastCharacter}else{x=u}}if(h.singleCharacter||s){f(a,e)}}}}return k},buildTokenTree:function(m,a){var p=m.slice();var s=0;var u=[];var c=false;var q=[];if(!m||m.length===0){return{evaluate:function(){return true}}}function t(l){var y=l;if(y<0){return false}var x=a[p[y].tokenType];if(!x){q.push("logic for token '"+p[y].tokenType+"' is not defined");return false}p[y].evaluate=x.evaluate;return x}function b(y,l){var z=l;var x=t(z);if(!x){return false}if(y=="left"){return x.leftType}if(y=="right"){return x.rightType}}function o(l){var y=l;var x=t(y);if(!x){return false}else{return x.evalType}}function g(l){p.splice(l,1);if(l<=s){s--}}function v(l){var x=l||s;if(x>0){return true}else{return false}}function k(l){var x=l;if(x<0){return true}return(b("left",x)&&!p[x].leftSide)||(b("right",x)&&!p[x].rightSide)}function j(x,y){var l=(y<x)?"left":"right";if(x<0||y<0){return false}if(!b(l,x)){return false}if(!o(y)){return false}if(b(l,x)==o(y)){return true}else{return false}}function n(l){var x=l;if(!k(x)){return false}if(!v(x)){return false}if(j(x,x-1)){return true}else{return false}}function e(l){var x=l;if(k(x)){return false}if(!v(x)){return false}if(!k(x-1)){return false}if(j(x-1,x)){return true}else{return false}}function h(l){var x=l;if(x<1){return false}p[x].leftSide=p[x-1];g(x-1)}function w(l){var x=l;if(x<1){return false}p[x-1].rightSide=p[x];g(x)}function f(l){g(l);g(u.pop())}for(s=0;s<p.length;s++){c=false;if(p[s].tokenType=="UNKNOWN"){q.push("found unknown token: "+p[s].tokenValue)}if(p[s].tokenType=="OPEN_PAREN"){u.push(s)}if(p[s].tokenType=="CLOSE_PAREN"){f(s)}if(n(s)){h(s)}if(e(s)){w(s);c=true}if(c){s--}}if(p.length==1){p=p[0]}else{q.push("string did not resolve to a single tree")}if(q.length>0){return{error:q.join(",\n"),tree:p}}else{return p}},buildOrder:function(a){if(!a){return[]}else{if(SC.typeOf(a)===SC.T_FUNCTION){return a}else{var e=a.split(",");for(var b=0;b<e.length;b++){var c=e[b];c=c.replace(/^\s+|\s+$/,"");c=c.replace(/\s+/,",");c=c.split(",");e[b]={propertyName:c[0]};if(c[1]&&c[1]=="DESC"){e[b].descending=true}}return e}}}});SC.Query.mixin({LOCAL:"local",REMOTE:"remote",storeKeyFor:function(a){return a?a.get("storeKey"):null},containsRecords:function(h,f,e){var g=[];for(var b=0,a=f.get("length");b<a;b++){var c=f.objectAt(b);if(c&&h.contains(c)){g.push(c.get("storeKey"))}}g=SC.Query.orderStoreKeys(g,h,e);return g},orderStoreKeys:function(c,e,a){if(c){var b=c.sort(function(g,f){return SC.Query.compareStoreKeys(e,a,g,f)})}return c},compareStoreKeys:function(g,c,f,e){var b=c.materializeRecord(f),a=c.materializeRecord(e);return g.compare(b,a)},build:function(j,c,h,e){var a=null,g,b,k,f;if(c&&c.isQuery){if(c.get("location")===j){return c}else{return c.copy().set("location",j).freeze()}}if(typeof c===SC.T_STRING){g=SC.objectForPropertyPath(c);if(!g){throw"%@ did not resolve to a class".fmt(c)}c=g}else{if(c&&c.isEnumerable){g=[];c.forEach(function(l){if(typeof l===SC.T_STRING){l=SC.objectForPropertyPath(l)}if(!l){throw"cannot resolve record types: %@".fmt(c)}g.push(l)},this);c=g}else{if(!c){c=SC.Record}}}if(e===undefined){e=null}if(h===undefined){h=null}if(!e&&(typeof h!==SC.T_STRING)){a=h;h=null}if(!e&&!a){f=SC.Query._scq_recordTypeCache;if(!f){f=SC.Query._scq_recordTypeCache={}}b=f[j];if(!b){b=f[j]={}}if(c.isEnumerable){k=c.map(function(l){return SC.guidFor(l)});k=k.sort().join(":")}else{k=SC.guidFor(c)}if(h){k=[k,h].join("::")}g=b[k];if(!g){if(c.isEnumerable){a={recordTypes:c.copy()}}else{a={recordType:c}}a.location=j;a.conditions=h;g=b[k]=SC.Query.create(a).freeze()}}else{if(!a){a={}}if(!a.location){a.location=j}if(c&&c.isEnumerable){a.recordTypes=c}else{a.recordType=c}if(h){a.conditions=h}if(e){a.parameters=e}g=SC.Query.create(a).freeze()}return g},local:function(c,a,b){return this.build(SC.Query.LOCAL,c,a,b)},remote:function(c,a,b){return this.build(SC.Query.REMOTE,c,a,b)},_scq_didDefineRecordType:function(){var a=SC.Query._scq_queriesWithExpandedRecordTypes;if(a){a.forEach(function(b){b.notifyPropertyChange("expandedRecordTypes")},this);a.clear()}}});SC.Query.comparisons={};SC.Query.registerComparison=function(a,b){SC.Query.comparisons[a]=b};SC.Query.registerQueryExtension=function(b,a){SC.Query.prototype.queryLanguage[b]=a};SC.Q=SC.Query.from;sc_require("system/query");SC.Record=SC.Object.extend({isRecord:YES,isParentRecord:NO,primaryKey:"guid",id:function(a,b){if(b!==undefined){this.writeAttribute(this.get("primaryKey"),b);return b}else{return SC.Store.idFor(this.storeKey)}}.property("storeKey").cacheable(),status:function(){return this.store.readStatus(this.storeKey)}.property("storeKey").cacheable(),store:null,storeKey:null,isDestroyed:function(){return !!(this.get("status")&SC.Record.DESTROYED)}.property("status").cacheable(),isEditable:function(a,b){if(b!==undefined){this._screc_isEditable=b}if(this.get("status")&SC.Record.READY){return this._screc_isEditable}else{return NO}}.property("status").cacheable(),_screc_isEditable:YES,isLoaded:function(){var b=SC.Record,a=this.get("status");return !((a===b.EMPTY)||(a===b.BUSY_LOADING)||(a===b.ERROR))}.property("status").cacheable(),relationships:null,attributes:function(){var a=this.get("store"),b=this.storeKey;return a.readEditableDataHash(b)}.property(),readOnlyAttributes:function(){var a=this.get("store"),c=this.storeKey,b=a.readDataHash(c);if(b){b=SC.clone(b,YES)}return b}.property(),nestedRecordNamespace:null,isNestedRecord:function(){var c=this.get("store"),e,b=this.get("storeKey"),a=c.parentStoreKeyExists(b);e=a?YES:NO;return e}.property().cacheable(),parentRecord:function(){var a=this.storeKey,b=this.get("store");return b.materializeParentRecord(a)}.property(),refresh:function(f,h){var c=this.get("store"),g,e,b=this.get("storeKey"),a=c.parentStoreKeyExists();e=f||(SC.none(f)&&SC.none(a));if(e){c.refreshRecord(null,null,b,h)}else{if(a){g=c.materializeRecord(a);g.refresh(f,h)}}return this},destroy:function(f){var c=this.get("store"),g,e,b=this.get("storeKey"),a=c.parentStoreKeyExists();e=f||(SC.none(f)&&SC.none(a));if(e){c.destroyRecord(null,null,b);this.notifyPropertyChange("status");this.propagateToAggregates()}else{if(a){g=c.materializeRecord(a);g.destroy(f)}}return this},recordDidChange:function(a){var b=this.get("parentRecord");if(b){b.recordDidChange()}this.get("store").recordDidChange(null,null,this.get("storeKey"),a);this.notifyPropertyChange("status");this.propagateToAggregates();return this},toJSON:function(){return this.get("attributes")},_editLevel:0,beginEditing:function(){this._editLevel++;return this},endEditing:function(a){if(--this._editLevel<=0){this._editLevel=0;this.recordDidChange(a)}return this},readAttribute:function(c){var a=this.get("store"),e=this.storeKey;var b=a.readDataHash(e);return b?b[c]:undefined},writeAttribute:function(c,g,f){var a=this.get("store"),e=this.storeKey,b;b=a.readEditableDataHash(e);if(!b){throw SC.Record.BAD_STATE_ERROR}if(g!==b[c]){if(!f){this.beginEditing()}b[c]=g;if(c===this.get("primaryKey")){SC.Store.replaceIdFor(e,g);this.propertyDidChange("id")}if(!f){this.endEditing(c)}else{a.dataHashDidChange(e,null,undefined,c)}}return this},propagateToAggregates:function(){var o=this.get("storeKey"),e=SC.Store.recordTypeFor(o),g=e.__sc_aggregate_keys,m,h,n,b,c,l;if(!g){g=[];for(n in this){b=this[n];if(b&&b.isRecordAttribute&&b.aggregate===YES){g.push(n)}}e.__sc_aggregate_keys=g}var k=SC.Record,a=k.DIRTY,f=k.READY_NEW,p=k.DESTROYED,q=k.READY_CLEAN,j;j=function(w){var s,t,u,v;if(w){s=this.get("status");if((s&a)||(s&f)||(s&p)){t=w.get("store");u=w.get("storeKey");v=t.peekStatus(u);if(v===q){w.get("store").recordDidChange(w.constructor,null,w.get("storeKey"),null,YES)}}}};for(m=0,h=g.length;m<h;++m){n=g[m];c=this.get(n);l=SC.kindOf(c,SC.ManyArray)?c:[c];l.forEach(j,this)}},storeDidChangeProperties:function(a,b){if(a){this.notifyPropertyChange("status")}else{if(b){this.beginPropertyChanges();b.forEach(function(f){this.notifyPropertyChange(f)},this);this.notifyPropertyChange("status");this.endPropertyChanges()}else{this.allPropertiesDidChange()}var e=this.relationships,c=e?e.length:0;while(--c>=0){e[c].recordPropertyDidChange(b)}}},normalize:function(a){var c=this.primaryKey,b=this.get("id"),g=this.get("store"),f=this.get("storeKey"),k={},u,q,e,t,l,s,n,h,p,j,o;var m=g.readEditableDataHash(f)||{};m[c]=b;t=g.readDataHash(f);for(u in this){q=this[u];if(q){e=q.typeClass;if(e){j=q.get("key")||u;k[j]=YES;n=SC.typeOf(e.call(q))===SC.T_CLASS;h=q.isNestedRecordTransform;if(!n&&!h){l=this.get(u);if(l!==undefined&&(l!==null||a)){o=this[u];if(SC.instanceOf(o,SC.RecordAttribute)){l=o.fromType(this,u,l)}m[j]=l}else{if(!a){k[j]=NO}}}else{if(h){l=this.get(u);if(l&&l.normalize){l.normalize()}}else{if(n){l=t[j];if(l!==undefined){m[j]=l}else{p=q.get("defaultValue");if(SC.typeOf(p)===SC.T_FUNCTION){m[j]=p(this,u,p)}else{m[j]=p}}}}}}}}for(u in m){if(!k[u]){SC.debug("%@:  Deleting key from underlying data hash due to normalization:  %@",this,u);delete m[u]}}return this},unknownProperty:function(b,e){if(e!==undefined){var c=this.get("storeKey"),f=SC.Store.recordTypeFor(c);if(f.ignoreUnknownProperties===YES){this[b]=e;return e}var a=this.get("primaryKey");this.writeAttribute(b,e);if(b===a){SC.Store.replaceIdFor(c,e)}}return this.readAttribute(b)},commitRecord:function(h,f,j){var c=this.get("store"),g,e,b=this.get("storeKey"),a=c.parentStoreKeyExists();e=f||(SC.none(f)&&SC.none(a));if(e){c.commitRecord(undefined,undefined,this.get("storeKey"),h,j)}else{if(a){g=c.materializeRecord(a);g.commitRecord(h,f,j)}}return this},isError:function(){return !!(this.get("status")&SC.Record.ERROR)}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");return a.readError(this.get("storeKey"))||SC.Record.GENERIC_ERROR}else{return null}}.property("isError").cacheable(),set:function(a,c){var b=this[a];if(b&&b.isProperty&&b.get&&!b.get("isEditable")){return this}return arguments.callee.base.apply(this,arguments)},toString:function(){var a=this.get("store").readDataHash(this.get("storeKey"));return"%@(%@) %@".fmt(this.constructor.toString(),SC.inspect(a),this.statusString())},statusString:function(){var b=[],a=this.get("status");for(var c in SC.Record){if(c.match(/[A-Z_]$/)&&SC.Record[c]===a){b.push(c)}}return b.join(" ")},registerNestedRecord:function(g,f,h){var c,e=this.get("storeKey"),b,a,j;if(SC.none(h)){h=f}if(g&&g.get&&g.get("isRecord")){a=g}else{j=this._materializeNestedRecordType(g,f);a=this.createNestedRecord(j,g,e,h)}if(a){this.isParentRecord=YES;c=this.get("store");b=a.get("storeKey");c.registerChildToParent(e,b,h)}return a},unregisterNestedRecord:function(e){var b,a,c;c=this.get("store");b=this.getPath(e);a=b.get("storeKey");c.unregisterChildFromParent(a)},_materializeNestedRecordType:function(e,c){var a,f,b;if(SC.typeOf(e)===SC.T_HASH){a=this.get("nestedRecordNamespace");if(e.type&&!SC.none(a)){f=a[e.type]}}if(!f&&c&&this[c]){f=this[c].get("typeClass")}if(!f||!SC.kindOf(f,SC.Record)){throw"SC.Child: Error during transform: Invalid record type."}return f},createNestedRecord:function(b,f,h,k){var j=this.get("store"),a,c,e,g=null;f=f||{};if(SC.none(j)){throw"Error: during the creation of a child record: NO STORE ON PARENT!"}a=f[b.prototype.primaryKey];if(!a){this.generateIdForChild(g)}if(!a){a=h+"."+k}c=j.storeKeyExists(b,a);if(c){j.writeDataHash(c,f);g=j.materializeRecord(c)}else{g=j.createRecord(b,f,a)}return g},_nestedRecordKey:0,generateIdForChild:function(a){}});SC.Record.mixin({ignoreUnknownProperties:NO,CLEAN:1,DIRTY:2,EMPTY:256,ERROR:4096,READY:512,READY_CLEAN:513,READY_DIRTY:514,READY_NEW:515,DESTROYED:1024,DESTROYED_CLEAN:1025,DESTROYED_DIRTY:1026,BUSY:2048,BUSY_LOADING:2052,BUSY_CREATING:2056,BUSY_COMMITTING:2064,BUSY_REFRESH:2080,BUSY_REFRESH_CLEAN:2081,BUSY_REFRESH_DIRTY:2082,BUSY_DESTROYING:2112,BAD_STATE_ERROR:SC.$error("Internal Inconsistency"),RECORD_EXISTS_ERROR:SC.$error("Record Exists"),NOT_FOUND_ERROR:SC.$error("Not found "),BUSY_ERROR:SC.$error("Busy"),GENERIC_ERROR:SC.$error("Generic Error"),_nextChildKey:0,attr:function(a,b){return SC.RecordAttribute.attr(a,b)},fetch:function(b,a){return SC.FetchedAttribute.attr(b,a)},toMany:function(e,b){b=b||{};var c=b.nested||b.isNested;var a;this._throwUnlessRecordTypeDefined(e,"toMany");if(c){a=SC.ChildrenAttribute.attr(e,b)}else{a=SC.ManyAttribute.attr(e,b)}return a},toOne:function(e,b){b=b||{};var c=b.nested||b.isNested;var a;this._throwUnlessRecordTypeDefined(e,"toOne");if(c){a=SC.ChildAttribute.attr(e,b)}else{a=SC.SingleAttribute.attr(e,b)}return a},_throwUnlessRecordTypeDefined:function(b,a){if(!b){throw"Attempted to create "+a+" attribute with undefined recordType. Did you forget to sc_require a dependency?"}},storeKeysById:function(){var b=SC.keyFor("storeKey",SC.guidFor(this)),a=this[b];if(!a){a=this[b]={}}return a},storeKeyFor:function(c){var b=this.storeKeysById(),a=b[c];if(!a){a=SC.Store.generateStoreKey();SC.Store.idsByStoreKey[a]=c;SC.Store.recordTypesByStoreKey[a]=this;b[c]=a}return a},storeKeyExists:function(c){var b=this.storeKeysById(),a=b[c];return a},find:function(a,b){return a.find(this,b)},extend:function(){var a=SC.Object.extend.apply(this,arguments);if(SC.Query){SC.Query._scq_didDefineRecordType(a)}return a}});sc_require("data_sources/data_source");sc_require("models/record");SC.FixturesDataSource=SC.DataSource.extend({simulateRemoteResponse:NO,latency:50,cancel:function(a,b){return NO},fetch:function(a,b){if(b.get("location")!==SC.Query.LOCAL){throw SC.$error("SC.Fixture data source can only fetch local queries")}if(!b.get("recordType")&&!b.get("recordTypes")){throw SC.$error("SC.Fixture data source can only fetch queries with one or more record types")}if(this.get("simulateRemoteResponse")){this.invokeLater(this._fetch,this.get("latency"),a,b)}else{this._fetch(a,b)}},_fetch:function(a,c){var e=c.get("recordType"),b=c.get("recordTypes")||[e];b.forEach(function(f){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f)}if(f){this.loadFixturesFor(a,f)}},this);a.dataSourceDidFetchQuery(c)},retrieveRecords:function(a,c){var e=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._retrieveRecords,e,a,c)}else{this._retrieveRecords(a,c)}return b},_retrieveRecords:function(a,b){b.forEach(function(e){var c=[],h=SC.Store.recordTypeFor(e),g=a.idFor(e),f=this.fixtureForStoreKey(a,e);c.push(e);a.dataSourceDidComplete(e,f,g)},this)},updateRecords:function(a,c,f){var e=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._updateRecords,e,a,c)}else{this._updateRecords(a,c)}return b},_updateRecords:function(a,b){b.forEach(function(c){var e=a.readDataHash(c);this.setFixtureForStoreKey(a,c,e);a.dataSourceDidComplete(c)},this)},createRecords:function(a,b,e){var c=this.get("latency");if(this.get("simulateRemoteResponse")){this.invokeLater(this._createRecords,c,a,b)}else{this._createRecords(a,b)}return YES},_createRecords:function(a,b){b.forEach(function(f){var h=a.idFor(f),g=a.recordTypeFor(f),e=a.readDataHash(f),c=this.fixturesFor(g);if(!h){h=this.generateIdFor(g,e,a,f)}this._invalidateCachesFor(g,f,h);c[h]=e;a.dataSourceDidComplete(f,null,h)},this)},destroyRecords:function(a,c,f){var e=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._destroyRecords,e,a,c)}else{this._destroyRecords(a,c)}return b},_destroyRecords:function(a,b){b.forEach(function(e){var g=a.idFor(e),f=a.recordTypeFor(e),c=this.fixturesFor(f);this._invalidateCachesFor(f,e,g);if(g){delete c[g]}a.dataSourceDidDestroy(e)},this)},loadFixturesFor:function(a,h,c){var b=[],f,e,g;f=this.fixturesFor(h);for(e in f){g=h.storeKeyFor(e);if(a.peekStatus(g)===SC.Record.EMPTY){b.push(f[e])}if(c){c.push(g)}}if(b&&b.length>0){a.loadRecords(h,b)}return this},generateIdFor:function(e,b,a,c){return"@id%@".fmt(SC.Store.generateStoreKey())},fixtureForStoreKey:function(a,c){var f=a.idFor(c),e=a.recordTypeFor(c),b=this.fixturesFor(e);return b?b[f]:null},setFixtureForStoreKey:function(a,e,c){var g=a.idFor(e),f=a.recordTypeFor(e),b=this.fixturesFor(f);this._invalidateCachesFor(f,e,g);b[g]=c;return this},fixturesFor:function(j){if(!this._fixtures){this._fixtures={}}var g=this._fixtures[SC.guidFor(j)];if(g){return g}var f=j?j.FIXTURES:null,b=f?f.length:0,c=j?j.prototype.primaryKey:"guid",a,e,h;this._fixtures[SC.guidFor(j)]=g={};for(a=0;a<b;a++){e=f[a];h=e[c];if(!h){h=this.generateIdFor(j,e)}g[h]=e}return g},fixturesLoadedFor:function(c){if(!this._fixtures){return NO}var a=[],b=this._fixtures[SC.guidFor(c)];return b?YES:NO},reset:function(){this._fixtures=null;return this},hasFixturesFor:function(b){var a=NO;b.forEach(function(e){if(a!==SC.MIXED_STATE){var f=SC.Store.recordTypeFor(e),c=f?f.FIXTURES:null;if(c&&c.length&&c.length>0){if(a===NO){a=YES}}else{if(a===YES){a=SC.MIXED_STATE}}}},this);return a},_invalidateCachesFor:function(e,b,c){var a=this._storeKeyCache;if(a){delete a[SC.guidFor(e)]}return this}});SC.Record.fixtures=SC.FixturesDataSource.create();SC.RelationshipSupport={_srs_inverseDidRelinquishRelationships:function(e,c,a,b){c.forEach(function(f){this._srs_inverseDidRelinquishRelationship(e,f,a,b)},this)},_srs_inverseDidRelinquishRelationship:function(j,h,g,b){var f=j.storeKeyFor(h),c=this.readDataHash(f),a=g.inverse,e=j.prototype;if(!c||!a){return}if(SC.instanceOf(e[a],SC.SingleAttribute)){delete c[a]}else{if(SC.instanceOf(e[a],SC.ManyAttribute)&&SC.typeOf(c[a])===SC.T_ARRAY){c[a].removeObject(b)}}this.pushRetrieve(j,h,c,undefined,true)},_srs_inverseDidAddRelationships:function(e,c,a,b){c.forEach(function(f){this._srs_inverseDidAddRelationship(e,f,a,b)},this)},_srs_inverseDidAddRelationship:function(b,a,k,m){var l=b.storeKeyFor(a),h=this.readDataHash(l),e=this.peekStatus(l),g=b.prototype,j=k.inverse,n=g[j],c=g[g.primaryKey],f=false;n=(n&&n.get&&n.get("key")||n.key)||j;if((e===SC.Record.EMPTY)&&(SC.typeOf(k.lazilyInstantiate)===SC.T_FUNCTION&&k.lazilyInstantiate()||SC.typeOf(k.lazilyInstantiate)!==SC.T_FUNCTION&&k.lazilyInstantiate)){if(!SC.none(c)&&c.typeClass&&SC.typeOf(c.typeClass())===SC.T_CLASS){f=true}h={};h[g.primaryKey]=a}if(!h||!j){return}if(SC.instanceOf(g[j],SC.SingleAttribute)){h[n]=m}else{if(SC.instanceOf(g[j],SC.ManyAttribute)){h[n]=h[n]||[];if(h[n].indexOf(m)<0){h[n].push(m)}}}this.pushRetrieve(b,a,h,undefined,!f)},_srs_pushIterator:function(e,b,k,g){var f=e.prototype,h,c,j,a;if(typeof k==="undefined"){k=e.storeKeyFor(b)}c=this.readDataHash(k)||{};for(j in f){h=f[j];if(h&&h.typeClass&&h.inverse&&h.isMaster){a=h.typeClass();if(SC.typeOf(a)!==SC.T_CLASS){continue}g.apply(this,[a,c,h,h.get&&h.get("key")||j])}}},pushDestroy:function(a,f,e,c){var b;this._srs_pushIterator(f,e,c,function(g,h,k,j){b=[h[j]||null].flatten().compact().uniq();this._srs_inverseDidRelinquishRelationships(g,b,k,e)});return a(f,e,c)}.enhance(),pushRetrieve:function(b,j,h,c,f,g){if(!g){var e,a;this._srs_pushIterator(j,h,f,function(k,l,n,m){e=[l[m]||null].flatten().compact().uniq();a=[c[m]||null].flatten().compact().uniq();this._srs_inverseDidRelinquishRelationships(k,e.filter(function(o){return a.indexOf(o)===-1}),n,h);this._srs_inverseDidAddRelationships(k,a,n,h)})}f=f||j.storeKeyFor(h);return b(j,h,c,f)}.enhance()};sc_require("models/record");SC.RecordAttribute=SC.Object.extend({isRecordAttribute:YES,defaultValue:null,type:String,key:null,isRequired:NO,isEditable:YES,useIsoDate:YES,aggregate:NO,lazilyInstantiate:NO,typeClass:function(){var a=this.get("type");if(SC.typeOf(a)===SC.T_STRING){a=SC.requiredObjectForPropertyPath(a)}return a}.property("type").cacheable(),transform:function(){var a=this.get("typeClass")||String,c=SC.RecordAttribute.transforms,b;while(a&&!(b=c[SC.guidFor(a)])){if(a.superclass.hasOwnProperty("create")){a=a.superclass}else{a=SC.T_FUNCTION}}return b}.property("typeClass").cacheable(),toType:function(f,k,j){var c=this.get("transform"),h=this.get("typeClass"),b;if(c&&c.to){j=c.to(j,this,h,f,k);if(!SC.none(j)&&(b=c.observesChildren)){var e,g=b.length,a={record:f,key:k};for(e=0;e<g;e++){j.addObserver(b[e],this,this._SCRA_childObserver,a)}}}return j},_SCRA_childObserver:function(e,b,c,a){this.call(a.record,a.key,e);a.record.notifyPropertyChange(a.key)},fromType:function(a,c,f){var b=this.get("transform"),e=this.get("typeClass");if(b&&b.from){f=b.from(f,this,e,a,c)}return f},call:function(a,b,c){var e=this.get("key")||b,f;if((c!==undefined)&&this.get("isEditable")){f=this.fromType(a,b,c);a.writeAttribute(e,f)}c=a.readAttribute(e);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=c(a,b,this)}}c=this.toType(a,b,c);return c},apply:function(b,a){return this.call.apply(b,a)},isProperty:YES,isCacheable:YES,dependentKeys:[],init:function(){arguments.callee.base.apply(this,arguments);this.cacheKey="__cache__recattr__"+SC.guidFor(this);this.lastSetValueKey="__lastValue__recattr__"+SC.guidFor(this)}});SC.RecordAttribute.mixin({attr:function(a,b){if(!b){b={}}if(!b.type){b.type=a||String}return this.create(b)},transforms:{},registerTransform:function(a,b){SC.RecordAttribute.transforms[SC.guidFor(a)]=b}});SC.RecordAttribute.registerTransform(Boolean,{to:function(a){return SC.none(a)?null:!!a}});SC.RecordAttribute.registerTransform(Number,{to:function(a){return SC.none(a)?null:Number(a)}});SC.RecordAttribute.registerTransform(String,{to:function(a){if(!(typeof a===SC.T_STRING)&&!SC.none(a)&&a.toString){a=a.toString()}return a}});SC.RecordAttribute.registerTransform(Array,{to:function(a){if(!SC.isArray(a)&&!SC.none(a)){a=[]}return a},observesChildren:["[]"]});SC.RecordAttribute.registerTransform(Object,{to:function(a){if(!(typeof a==="object")&&!SC.none(a)){a={}}return a}});SC.RecordAttribute.registerTransform(SC.Record,{to:function(f,a,e,c){var b=c.get("store");if(SC.none(f)||(f==="")){return null}else{return b.find(e,f)}},from:function(a){return a?a.get("id"):null}});SC.RecordAttribute.registerTransform(SC.T_FUNCTION,{to:function(f,a,e,c){e=e.apply(c);var b=c.get("store");return b.find(e,f)},from:function(a){return a.get("id")}});SC.RecordAttribute.registerTransform(Date,{to:function(j,a){if(SC.none(j)){return j}var c;j=j.toString()||"";if(a.get("useIsoDate")){var e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",h=j.match(new RegExp(e)),g=0,b=new Date(h[1],0,1),f;if(h[3]){b.setMonth(h[3]-1)}if(h[5]){b.setDate(h[5])}if(h[7]){b.setHours(h[7])}if(h[8]){b.setMinutes(h[8])}if(h[10]){b.setSeconds(h[10])}if(h[12]){b.setMilliseconds(Number("0."+h[12])*1000)}if(h[14]){g=(Number(h[16])*60)+Number(h[17]);g*=((h[15]==="-")?1:-1)}g-=b.getTimezoneOffset();f=(Number(b)+(g*60*1000));c=new Date();c.setTime(Number(f))}else{c=new Date(Date.parse(j))}return c},_dates:{},_zeropad:function(a){return((a<0)?"-":"")+((a<10)?"0":"")+Math.abs(a)},from:function(b){if(SC.none(b)){return null}var a=this._dates[b.getTime()];if(a){return a}var e=this._zeropad,c=0-b.getTimezoneOffset()/60;c=(c===0)?"Z":"%@:00".fmt(e(c));this._dates[b.getTime()]=a="%@-%@-%@T%@:%@:%@%@".fmt(e(b.getFullYear()),e(b.getMonth()+1),e(b.getDate()),e(b.getHours()),e(b.getMinutes()),e(b.getSeconds()),c);return a}});if(SC.DateTime&&!SC.RecordAttribute.transforms[SC.guidFor(SC.DateTime)]){SC.RecordAttribute.registerTransform(SC.DateTime,{to:function(c,a){if(a.get("useUnixTime")){if(SC.typeOf(c)===SC.T_STRING){c=parseInt(c)}if(isNaN(c)||SC.typeOf(c)!==SC.T_NUMBER){c=0}return SC.DateTime.create({milliseconds:c*1000,timezone:0})}if(SC.none(c)||SC.instanceOf(c,SC.DateTime)){return c}if(SC.none(c)||SC.instanceOf(c,Date)){return SC.DateTime.create(c.getTime())}var b=a.get("format");return SC.DateTime.parse(c,b?b:SC.DateTime.recordFormat)},from:function(b,a){if(SC.none(b)){return b}if(a.get("useUnixTime")){return b.get("milliseconds")/1000}var c=a.get("format");return b.toFormattedString(c?c:SC.DateTime.recordFormat)}})}SC.RecordAttribute.registerTransform(SC.Set,{to:function(f,a,e,b,c){return SC.Set.create(f)},from:function(f,a,e,b,c){return f.toArray()},observesChildren:["[]"]});sc_require("models/record");sc_require("models/record_attribute");SC.ChildAttribute=SC.RecordAttribute.extend({isNestedRecordTransform:YES,toType:function(b,e,f){var c=null,a,g=this.get("typeClass");if(!b){throw"SC.Child: Error during transform: Unable to retrieve parent record."}if(!SC.none(f)){c=b.registerNestedRecord(f,e)}return c},fromType:function(b,f,g){var a,c,e;if(b){if(b.readAttribute(f)){b.unregisterNestedRecord(f)}if(SC.none(g)){b.writeAttribute(f,g);e=g}else{e=b.registerNestedRecord(g,f);if(e){a=e.get("storeKey");c=e.get("store");b.writeAttribute(f,c.readDataHash(a))}else{if(g){b.writeAttribute(f,g)}}}}return e},call:function(a,b,c){var e=this.get("key")||b;if(c!==undefined){c=this.fromType(a,b,c)}else{c=a.readAttribute(e);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=this.defaultValue(a,b,this);if(a.attributes()){a.writeAttribute(e,c,true)}}}else{c=this.toType(a,b,c)}}return c}});sc_require("models/record");SC.ChildRecord=SC.Record.extend({});SC.ChildRecord.extend=function(){return SC.Record.extend.apply(this,arguments)};SC.ChildArray=SC.Object.extend(SC.Enumerable,SC.Array,{defaultRecordType:null,record:null,propertyName:null,children:null,store:function(){return this.getPath("record.store")}.property("record").cacheable(),storeKey:function(){return this.getPath("record.storeKey")}.property("record").cacheable(),readOnlyChildren:function(){return this.get("record").readAttribute(this.get("propertyName"))}.property(),editableChildren:function(){var a=this.get("store"),e=this.get("storeKey"),c=this.get("propertyName"),b,f;b=a.readEditableProperty(e,c);if(!b){f=a.readEditableDataHash(e);b=f[c]=[]}return b}.property(),length:function(){var a=this.get("readOnlyChildren");return a?a.length:0}.property("readOnlyChildren"),objectAt:function(b){var h=this._records,f=this.get("readOnlyChildren"),j,c,e=this.get("propertyName"),g=this.get("record");var a=f?f.length:0;if(!f){return undefined}if(h&&(c=h[b])){return c}if(!h){this._records=h=[]}if(b>=a){return undefined}j=f.objectAt(b);if(!j){return undefined}h[b]=c=g.registerNestedRecord(j,e,e+"."+b);return c},replace:function(l,a,k){var b=this.get("editableChildren"),h=k?(k.get?k.get("length"):k.length):0,g=this.get("record"),e,f=this.get("propertyName"),j,c;e=this._processRecordsToHashes(k);if(e!==this._prevChildren){this._performRecordPropertyChange(null,false)}b.replace(l,a,e);g.recordDidChange(f);return this},_processRecordsToHashes:function(c){var b,a;c=c||[];c.forEach(function(f,e){if(f.isNestedRecord){b=f.get("store");a=f.storeKey;c[e]=b.readDataHash(a)}});return c},normalize:function(){this.forEach(function(b,a){if(b.normalize){b.normalize()}})},recordPropertyDidChange:function(a){this._performRecordPropertyChange(a,true);return this},_performRecordPropertyChange:function(g,j){if(g&&!g.contains(this.get("propertyName"))){return this}var b=this.get("readOnlyChildren"),a=0,c=0;var e=this._prevChildren,h=this._childrenContentDidChange;j=SC.none(j)?true:j;if(b===e){return this}if(e){e.removeArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:h});a=e.get("length")}if(b){b.addArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:h});c=b.get("length")}this._prevChildren=b;if(j){this.arrayContentWillChange(0,a,c);this._childrenContentDidChange(0,a,c)}return this},_childrenContentDidChange:function(c,a,b){this._records=null;this.arrayContentDidChange(c,a,b)},init:function(){arguments.callee.base.apply(this,arguments);this.recordPropertyDidChange()}});sc_require("models/record");sc_require("models/record_attribute");sc_require("models/child_attribute");sc_require("system/child_array");SC.ChildrenAttribute=SC.ChildAttribute.extend({toType:function(b,e,f){var h=this.get("key")||e,g=SC.keyFor("__kidsArray__",SC.guidFor(this)),c=b[g],j=this.get("typeClass"),a;if(!c){c=SC.ChildArray.create({record:b,propertyName:h,defaultRecordType:j});b[g]=c;a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c},fromType:function(b,f,g){var a,c,h=SC.keyFor("__kidsArray__",SC.guidFor(this)),e=b[h];if(b){b.writeAttribute(f,g);if(e){e=e.recordPropertyDidChange()}}return e},call:function(a,c,e){var f=this.get("key")||c,b,g=SC.keyFor("__kid__",SC.guidFor(this));if(e!==undefined){e=this.fromType(a,c,e)}else{e=a.readAttribute(f);if(SC.none(e)&&(e=this.get("defaultValue"))){if(typeof e===SC.T_FUNCTION){e=this.defaultValue(a,c,this);if(a.attributes()){if(e instanceof Array){e=this.toType(a,c,e).replace(0,e.length,e)}else{a.writeAttribute(f,e,true)}}}}else{e=this.toType(a,c,e)}}return e}});sc_require("models/record");sc_require("models/record_attribute");SC.FetchedAttribute=SC.RecordAttribute.extend({paramValueKey:"link",paramOwnerKey:"owner",paramRelKey:"rel",queryKey:null,isEditable:NO,toType:function(e,k,h){var j=e.get("store");if(!j){return null}var b=this.get("paramValueKey"),a=this.get("paramOwnerKey"),g=this.get("paramRelKey"),f=this.get("queryKey")||this.get("typeClass"),c={};if(b){c[b]=h}if(a){c[a]=e}if(g){c[g]=this.get("key")||k}return j.findAll(f,c)},fromType:function(a,b,c){return c}});SC.ManyArray=SC.Object.extend(SC.Enumerable,SC.Array,{recordType:null,record:null,propertyName:null,manyAttribute:null,store:function(){return this.get("record").get("store")}.property("record").cacheable(),storeKey:function(){return this.get("record").get("storeKey")}.property("record").cacheable(),readOnlyStoreIds:function(){return this.get("record").readAttribute(this.get("propertyName"))}.property(),editableStoreIds:function(){var a=this.get("store"),e=this.get("storeKey"),c=this.get("propertyName"),b,f;b=a.readEditableProperty(e,c);if(!b){f=a.readEditableDataHash(e);b=f[c]=[]}if(b!==this._prevStoreIds){this.recordPropertyDidChange()}return b}.property(),isEditable:function(){var a=this.manyAttribute;return a?a.get("isEditable"):NO}.property("manyAttribute").cacheable(),inverse:function(){var a=this.manyAttribute;return a?a.get("inverse"):null}.property("manyAttribute").cacheable(),isMaster:function(){var a=this.manyAttribute;return a?a.get("isMaster"):null}.property("manyAttribute").cacheable(),orderBy:function(){var a=this.manyAttribute;return a?a.get("orderBy"):null}.property("manyAttribute").cacheable(),length:function(){var a=this.get("readOnlyStoreIds");return a?a.get("length"):0}.property("readOnlyStoreIds"),objectAt:function(a){var h=this._records,g=this.get("readOnlyStoreIds"),c=this.get("store"),j=this.get("recordType"),f,e,b;if(!g||!c){return undefined}if(h&&(e=h[a])){return e}if(!h){this._records=h=[]}b=g.objectAt(a);if(b){f=c.storeKeyFor(j,b);if(c.readStatus(f)===SC.Record.EMPTY){c.retrieveRecord(j,null,f)}h[a]=e=c.materializeRecord(f)}return e},replace:function(o,e,n){if(!this.get("isEditable")){throw"%@.%@[] is not editable".fmt(this.get("record"),this.get("propertyName"))}var c=this.get("editableStoreIds"),l=n?(n.get?n.get("length"):n.length):0,j=this.get("record"),f=this.get("propertyName"),h,a,b,g,m,k;a=[];for(h=0;h<l;h++){a[h]=n.objectAt(h).get("id")}g=this.get("inverse");if(g&&e>0){b=SC.ManyArray._toRemove;if(b){SC.ManyArray._toRemove=null}else{b=[]}for(h=0;h<e;h++){b[h]=this.objectAt(o+h)}}c.replace(o,e,a);if(g){for(h=0;h<e;h++){k=b[h];m=k?k[g]:null;if(m&&m.inverseDidRemoveRecord){m.inverseDidRemoveRecord(k,g,j,f)}}if(b){b.length=0;if(!SC.ManyArray._toRemove){SC.ManyArray._toRemove=b}}for(h=0;h<l;h++){k=n.objectAt(h);m=k?k[g]:null;if(m&&m.inverseDidAddRecord){m.inverseDidAddRecord(k,g,j,f)}}}if(j&&(!g||this.get("isMaster"))){j.recordDidChange(f)}this.enumerableContentDidChange(o,e,l-e);return this},removeInverseRecord:function(c){if(!c){return this}var f=c.get("id"),e=this.get("editableStoreIds"),a=(e&&f)?e.indexOf(f):-1,b;if(a>=0){e.removeAt(a);if(this.get("isMaster")&&(b=this.get("record"))){b.recordDidChange(this.get("propertyName"))}}return this},addInverseRecord:function(e){if(!e){return this}var f=this.get("editableStoreIds"),g=this.get("orderBy"),b=f.get("length"),a,c;if(g){a=this._findInsertionLocation(e,0,b,g)}else{a=b}f.insertAt(a,e.get("id"));if(this.get("isMaster")&&(c=this.get("record"))){c.recordDidChange(this.get("propertyName"))}return this},_findInsertionLocation:function(h,e,c,g){var b=e+Math.floor((c-e)/2),f=this.objectAt(b),a=this._compare(h,f,g);if(a<0){if(b===0){return b}else{return this._findInsertionLocation(h,0,b-1,g)}}else{if(a>0){if(b>=c){return b+1}else{return this._findInsertionLocation(h,b+1,c,g)}}else{return b}}},_compare:function(g,f,k){var j=SC.typeOf(k),h,e,c;if(j===SC.T_FUNCTION){h=k(g,f)}else{if(j===SC.T_STRING){h=SC.compare(g,f)}else{c=k.get("length");h=0;for(e=0;(h===0)&&(e<c);e++){h=SC.compare(g,f)}}}return h},recordPropertyDidChange:function(e){if(e&&!e.contains(this.get("propertyName"))){return this}var h=this.get("readOnlyStoreIds"),a,b;var c=this._prevStoreIds,g=this._storeIdsContentDidChange;if(h===c){return this}if(c){c.removeArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:g});a=c.get("length")}else{a=0}if(h){h.addArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:g});b=h.get("length")}else{b=0}this.arrayContentWillChange(0,a,b);this._prevStoreIds=h;this._storeIdsContentDidChange(0,a,b)},_storeIdsContentDidChange:function(c,a,b){this._records=null;this.arrayContentDidChange(c,a,b)},unknownProperty:function(b,c){var a;if(SC.typeOf(b)===SC.T_STRING){a=this.reducedProperty(b,c)}return a===undefined?arguments.callee.base.apply(this,arguments):a},init:function(){arguments.callee.base.apply(this,arguments);this.recordPropertyDidChange()}});sc_require("models/record");sc_require("models/record_attribute");sc_require("system/many_array");SC.ManyAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,orderBy:null,toType:function(b,e,g){var f=this.get("typeClass"),j=this.get("key")||e,h=SC.keyFor("__manyArray__",SC.guidFor(this)),c=b[h],a;if(!c){c=SC.ManyArray.create({recordType:f,record:b,propertyName:j,manyAttribute:this});b[h]=c;a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c},fromType:function(b,f,g){var c=[];if(!SC.isArray(g)){throw"Expects toMany attribute to be an array"}var a=g.get("length");for(var e=0;e<a;e++){c[e]=g.objectAt(e).get("id")}return c},inverseDidRemoveRecord:function(a,b,c,e){var f=a.get(b);if(f){f.removeInverseRecord(c)}},inverseDidAddRecord:function(a,b,c,e){var f=a.get(b);if(f){f.addInverseRecord(c)}}});sc_require("models/record");sc_require("models/record_attribute");SC.SingleAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,call:function(c,k,b){var a=this.get("key")||k,j,h,l,g,f,e;if(b!==undefined&&this.get("isEditable")){if(b&&!SC.kindOf(b,SC.Record)){throw"%@ is not an instance of SC.Record".fmt(b)}j=this.get("inverse");if(j){l=this._scsa_call(c,k)}e=this.fromType(c,k,b);c.writeAttribute(a,e,!this.get("isMaster"));f=b;if(j&&(l!==b)){if(l&&(g=l[j])){g.inverseDidRemoveRecord(l,j,c,k)}if(b&&(g=b[j])){g.inverseDidAddRecord(b,j,c,k)}}}else{f=this._scsa_call(c,k,b)}return f},_scsa_call:SC.RecordAttribute.prototype.call,inverseDidRemoveRecord:function(c,g,h,j){var b=this.get("inverse"),f=this._scsa_call(c,g),e=this.get("isMaster"),a;c.writeAttribute(this.get("key")||g,null,!e);c.notifyPropertyChange(g);if((f!==h)||(j!==b)){if(f&&(a=f[b])){a.inverseDidRemoveRecord(f,b,c,g)}}},inverseDidAddRecord:function(a,j,c,h){var f=this.get("inverse"),k=this._scsa_call(a,j),g=this.get("isMaster"),e,b;b=this.fromType(a,j,c);a.writeAttribute(this.get("key")||j,b,!g);a.notifyPropertyChange(j);if((k!==c)||(h!==f)){if(k&&(e=k[f])){e.inverseDidRemoveRecord(k,f,a,j)}}}});sc_require("models/record");SC.Store=SC.Object.extend({name:null,nestedStores:null,dataSource:null,isNested:NO,commitRecordsAutomatically:NO,from:function(a){this.set("dataSource",a);return this},_getDataSource:function(){var a=this.get("dataSource");if(typeof a===SC.T_STRING){a=SC.requiredObjectForPropertyPath(a);if(a.isClass){a=a.create()}this.set("dataSource",a)}return a},cascade:function(a){var b=SC.A(arguments);a=SC.CascadeDataSource.create({dataSources:b});return this.from(a)},chain:function(b,c){if(!b){b={}}b.parentStore=this;if(c){if(SC.typeOf(c)!=="class"){throw new Error("%@ is not a valid class".fmt(c))}if(!SC.kindOf(c,SC.NestedStore)){throw new Error("%@ is not a type of SC.NestedStore".fmt(c))}}else{c=SC.NestedStore}b.childRecords=this.childRecords?SC.clone(this.childRecords):{};b.parentRecords=this.parentRecords?SC.clone(this.parentRecords):{};var a=c.create(b),e=this.nestedStores;if(!e){e=this.nestedStores=[]}e.push(a);return a},willDestroyNestedStore:function(a){if(this.nestedStores){this.nestedStores.removeObject(a)}return this},hasNestedStore:function(a){while(a&&(a!==this)){a=a.get("parentStore")}return a===this},dataHashes:null,statuses:null,revisions:null,editables:null,changelog:null,recordErrors:null,queryErrors:null,childRecords:null,parentRecords:null,storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:SC.Store.LOCKED},readDataHash:function(a){return this.dataHashes[a]},readEditableDataHash:function(b){var a=this.dataHashes[b];if(!a){return a}var c=this.editables;if(!c){c=this.editables=[]}if(!c[b]){c[b]=1;a=this.dataHashes[b]=SC.clone(a,YES)}return a},readEditableProperty:function(c,a){var f=this.readEditableDataHash(c),e=this.editables[c],b=f[a];if(e===1){e=this.editables[c]={}}if(!e[a]){b=f[a];if(b&&b.isCopyable){b=f[a]=b.copy(YES)}e[a]=YES}return b},writeDataHash:function(c,f,a){if(f){this.dataHashes[c]=f}if(a){this.statuses[c]=a}var e=this.editables;if(!e){e=this.editables=[]}e[c]=1;var b=this;this._propagateToChildren(c,function(g){b.writeDataHash(g,null,a)});return this},removeDataHash:function(b,a){this.dataHashes[b]=null;this.statuses[b]=a||SC.Record.EMPTY;var c=this.editables;if(c){c[b]=0}return this},readStatus:function(a){this.readDataHash(a);return this.statuses[a]||SC.Record.EMPTY},peekStatus:function(a){return this.statuses[a]||SC.Record.EMPTY},writeStatus:function(b,a){return this.writeDataHash(b,null,a)},dataHashDidChange:function(f,b,a,j){if(!b){b=SC.Store.generateStoreKey()}var c,g,h,k;c=SC.typeOf(f)===SC.T_ARRAY;if(c){g=f.length}else{g=1;k=f}var e=this;for(h=0;h<g;h++){if(c){k=f[h]}this.revisions[k]=b;this._notifyRecordPropertyChange(k,a,j);this._propagateToChildren(k,function(l){e.dataHashDidChange(l,null,a,j)})}return this},_notifyRecordPropertyChange:function(o,f,n){var a=this.records,h=this.get("nestedStores"),j=SC.Store,c,b,g,m,l,e,p;g=h?h.length:0;for(m=0;m<g;m++){l=h[m];e=l.peekStatus(o);b=l.storeKeyEditState(o);if(b===j.INHERITED){l._notifyRecordPropertyChange(o,f,n)}else{if(e&SC.Record.BUSY){if(l.get("hasChanges")){throw j.CHAIN_CONFLICT_ERROR}l.reset()}}}var k=this.recordPropertyChanges;if(!k){k=this.recordPropertyChanges={storeKeys:SC.CoreSet.create(),records:SC.CoreSet.create(),hasDataChanges:SC.CoreSet.create(),propertyForStoreKeys:{}}}k.storeKeys.add(o);if(a&&(c=a[o])){k.records.push(o);if(!f){k.hasDataChanges.push(o)}if(n){if(!(p=k.propertyForStoreKeys[o])){p=k.propertyForStoreKeys[o]=SC.CoreSet.create()}if(p!=="*"){p.add(n)}}else{k.propertyForStoreKeys[o]="*"}}this.invokeOnce(this.flush);return this},flush:function(){if(!this.recordPropertyChanges){return this}var k=this.recordPropertyChanges,j=k.storeKeys,n=k.hasDataChanges,a=k.records,g=k.propertyForStoreKeys,e=SC.CoreSet.create(),c,b,f,l,h,m,o;j.forEach(function(p){if(a.contains(p)){f=n.contains(p)?NO:YES;c=this.records[p];o=g?g[p]:null;if(o==="*"){o=null}a.remove(p);if(c){c.storeDidChangeProperties(f,o)}}b=SC.Store.recordTypeFor(p);e.add(b)},this);if(j.get("length")>0){this._notifyRecordArrays(j,e)}j.clear();n.clear();a.clear();this.recordPropertyChanges.propertyForStoreKeys={};return this},reset:function(){this.dataHashes={};this.revisions={};this.statuses={};this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.recordErrors=null;this.queryErrors=null;var c=this.get("dataSource");if(c&&c.reset){c.reset()}var a=this.records,b;if(a){for(b in a){if(!a.hasOwnProperty(b)){continue}this._notifyRecordPropertyChange(parseInt(b,10),NO)}}this.set("hasChanges",NO)},commitChangesFromNestedStore:function(k,v,e){if(!e){this._verifyLockRevisions(v,k.locks)}var q=v.length,p,g,c,m,f,b,j,a,s,t,h,n,l;b=this.revisions;c=this.dataHashes;m=this.statuses;f=this.editables;j=this.parentRecords?this.parentRecords:this.parentRecords={};a=this.childRecords?this.childRecords:this.childRecords={};if(!f){f=this.editables=[]}s=k.dataHashes;h=k.revisions;t=k.statuses;n=k.parentRecords||{};l=k.childRecords||{};for(p=0;p<q;p++){g=v[p];c[g]=s[g];m[g]=t[g];b[g]=h[g];j[g]=n[g];a[g]=l[g];f[g]=0;this._notifyRecordPropertyChange(g,NO)}var o=this.changelog,u=k.changelog;if(u){if(!o){o=this.changelog=SC.CoreSet.create()}o.addEach(u)}this.changelog=o;if(!this.get("parentStore")){this.flush()}return this},_verifyLockRevisions:function(g,j){var a=g.length,c=this.revisions,f,h,e,b;if(j&&c){for(f=0;f<a;f++){h=g[f];e=j[h]||1;b=c[h]||1;if(e<b){throw SC.Store.CHAIN_CONFLICT_ERROR}}}return this},find:function(b,a){if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}if((arguments.length===1)&&!(b&&b.get&&b.get("isRecord"))){if(!b){throw new Error("SC.Store#find() must pass recordType or query")}if(!b.isQuery){b=SC.Query.local(b)}return this._findQuery(b,YES,YES)}else{return this._findRecord(b,a)}},findAll:function(c,a,b){SC.Logger.warn("SC.Store#findAll() will be removed in a future version of SproutCore.  Use SC.Store#find() instead");if(!c||!c.isQuery){c=SC.Query.local(c,a,b)}return this._findQuery(c,YES,YES)},_findQuery:function(g,a,f){var b=this._scst_recordArraysByQuery,e=SC.guidFor(g),c,h;if(!b){b=this._scst_recordArraysByQuery={}}c=b[e];if(!c&&a){b[e]=c=SC.RecordArray.create({store:this,query:g});h=this.get("recordArrays");if(!h){this.set("recordArrays",h=SC.Set.create())}h.add(c);if(f){this.refreshQuery(g)}}this.flush();return c},_findRecord:function(c,b){var a;if(c&&c.get&&c.get("isRecord")){a=c.get("storeKey")}else{a=b?c.storeKeyFor(b):null}if(a&&(this.readStatus(a)===SC.Record.EMPTY)){a=this.retrieveRecord(c,b)}return a?this.materializeRecord(a):null},recordArrayWillDestroy:function(b){var a=this._scst_recordArraysByQuery,c=this.get("recordArrays");if(a){delete a[SC.guidFor(b.get("query"))]}if(c){c.remove(b)}return this},refreshQuery:function(e){if(!e){throw new Error("refreshQuery() requires a query")}var a=this._scst_recordArraysByQuery,c=a?a[SC.guidFor(e)]:null,b=this._getDataSource();if(b&&b.fetch){if(c){c.storeWillFetchQuery(e)}b.fetch.call(b,this,e)}return this},_notifyRecordArrays:function(b,a){var c=this.get("recordArrays");if(!c){return this}c.forEach(function(e){if(e){e.storeDidChangeStoreKeys(b,a)}},this);return this},recordsFor:function(g){var e=[],a=g.storeKeysById(),f,c,b;for(f in a){c=a[f];if(this.readStatus(c)!==SC.RECORD_EMPTY){e.push(c)}}if(e.length>0){b=SC.RecordArray.create({store:this,storeKeys:e})}else{b=e}return b},_TMP_REC_ATTRS:{},materializeRecord:function(e){var a=this.records,c,f,b;if(!a){a=this.records={}}c=a[e];if(c){return c}f=SC.Store.recordTypeFor(e);if(!f){return null}b=this._TMP_REC_ATTRS;b.storeKey=e;b.store=this;c=a[e]=f.create(b);return c},createRecord:function(e,g,b){var o,n,p,f,m=SC.Record,j,l,k;g=(g?g:{});if(!b&&(o=e.prototype.primaryKey)){b=g[o];l=e.prototype[o]?e.prototype[o].defaultValue:null;if(!b&&SC.typeOf(l)===SC.T_FUNCTION){b=g[o]=l()}}p=b?e.storeKeyFor(b):SC.Store.generateStoreKey();f=this.readStatus(p);if((f&m.BUSY)||(f&m.READY)||(f===m.DESTROYED_DIRTY)){throw b?m.RECORD_EXISTS_ERROR:m.BAD_STATE_ERROR}else{if(!b&&(f===SC.DESTROYED_CLEAN||f===SC.ERROR)){throw m.BAD_STATE_ERROR}}this.writeDataHash(p,g,m.READY_NEW);SC.Store.replaceRecordTypeFor(p,e);this.dataHashDidChange(p);k=this.materializeRecord(p);n=e.prototype;for(var a in n){var h=n[a];if(h&&h.isRecordAttribute){var c=h.key||a;if(!g.hasOwnProperty(c)){if(g.hasOwnProperty(a)){g[c]=g[a];delete g[a]}else{l=h.defaultValue;if(l){if(SC.typeOf(l)===SC.T_FUNCTION){g[c]=SC.copy(l(k,c),YES)}else{g[c]=SC.copy(l,YES)}}}}else{if(c!==a&&g.hasOwnProperty(a)){delete g[a]}}}}j=this.changelog;if(!j){j=SC.Set.create()}j.add(p);this.changelog=j;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}if(k){k.propagateToAggregates()}return k},createRecords:function(e,k,a){var h=[],c,b,f,g=k.length,j;f=SC.typeOf(e)===SC.T_ARRAY;if(!f){c=e}for(j=0;j<g;j++){if(f){c=e[j]||SC.Record}b=a?a[j]:undefined;h.push(this.createRecord(c,k[j],b))}return h},unloadRecord:function(h,g,f,c){if(f===undefined){f=h.storeKeyFor(g)}var b=this.readStatus(f),a=SC.Record;c=c||a.EMPTY;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{b=c}}this.removeDataHash(f,b);this.dataHashDidChange(f);var e=this;this._propagateToChildren(f,function(j){e.unloadRecord(null,null,j,c)});return this},unloadRecords:function(e,a,h,f){var j,g,k,b,c,l;if(h===undefined){g=SC.typeOf(e)===SC.T_ARRAY;if(!g){c=e}if(a===undefined){j=g?e.length:1;for(k=0;k<j;k++){if(g){c=e[k]}h=this.storeKeysFor(c);this.unloadRecords(undefined,undefined,h,f)}}else{j=a.length;for(k=0;k<j;k++){if(g){c=e[k]||SC.Record}b=a?a[k]:undefined;this.unloadRecord(c,b,undefined,f)}}}else{j=h.length;for(k=0;k<j;k++){l=h?h[k]:undefined;this.unloadRecord(undefined,undefined,l,f)}}return this},destroyRecord:function(h,g,f){if(f===undefined){f=h.storeKeyFor(g)}var b=this.readStatus(f),c,a=SC.Record;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b===a.EMPTY){throw a.NOT_FOUND_ERROR}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{if(b===a.READY_NEW){b=a.DESTROYED_CLEAN}else{b=a.DESTROYED_DIRTY}}}}this.writeStatus(f,b);this.dataHashDidChange(f);c=this.changelog;if(!c){c=this.changelog=SC.Set.create()}((b&a.DIRTY)?c.add(f):c.remove(f));this.changelog=c;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}var e=this;this._propagateToChildren(f,function(j){e.destroyRecord(null,null,j)});return this},destroyRecords:function(e,a,g){var h,f,j,b,c,k;if(g===undefined){h=a.length;f=SC.typeOf(e)===SC.T_ARRAY;if(!f){c=e}for(j=0;j<h;j++){if(f){c=e[j]||SC.Record}b=a?a[j]:undefined;this.destroyRecord(c,b,undefined)}}else{h=g.length;for(j=0;j<h;j++){k=g?g[j]:undefined;this.destroyRecord(undefined,undefined,k)}}return this},registerChildToParent:function(c,h,g){var f,b,e,j,a;b=this.childRecords||{};f=this.parentRecords||{};e=b[h];if(e){j=f[e];delete j[h]}a=f[c]||{};a[h]=g||YES;f[c]=a;b[h]=c;this.writeStatus(h,this.statuses[c]);this.childRecords=b;this.parentRecords=f},unregisterChildFromParent:function(c){var a,b;a=this.childRecords;b=a[c];if(b){delete this.parentRecords[b][c]}this.removeDataHash(c);delete this.records[c];delete a[c]},materializeParentRecord:function(c){var b,a;if(SC.none(c)){return null}a=this.childRecords;b=a?this.childRecords[c]:null;if(SC.none(b)){return null}return this.materializeRecord(b)},parentStoreKeyExists:function(b){if(SC.none(b)){return}var a=this.childRecords||{};return a[b]},_propagateToChildren:function(e,c){if(SC.none(this.parentRecords)){return}var b=this.parentRecords[e]||{};if(SC.none(c)){return}for(var a in b){if(b.hasOwnProperty(a)){c(parseInt(a,10))}}},recordDidChange:function(j,h,g,e,c){if(g===undefined){g=j.storeKeyFor(h)}var b=this.readStatus(g),f,a=SC.Record;if(b&a.BUSY){throw a.BUSY_ERROR}else{if(!(b&a.READY)){throw a.NOT_FOUND_ERROR}else{if(b!=a.READY_NEW){this.writeStatus(g,a.READY_DIRTY)}}}this.dataHashDidChange(g,null,c,e);f=this.changelog;if(!f){f=this.changelog=SC.Set.create()}f.add(g);this.changelog=f;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}return this},recordsDidChange:function(e,a,g){var h,f,j,b,c,k;if(g===undefined){h=a.length;f=SC.typeOf(e)===SC.T_ARRAY;if(!f){c=e}for(j=0;j<h;j++){if(f){c=e[j]||SC.Record}b=a?a[j]:undefined;k=g?g[j]:undefined;this.recordDidChange(c,b,k)}}else{h=g.length;for(j=0;j<h;j++){k=g?g[j]:undefined;this.recordDidChange(undefined,undefined,k)}}return this},retrieveRecords:function(g,o,b,c,t){var n=this._getDataSource(),j=SC.typeOf(g)===SC.T_ARRAY,m=SC.typeOf(t)===SC.T_ARRAY,q=(!b)?o.length:b.length,u=[],s=SC.Store.generateStoreKey(),h=SC.Record,a,l,f,p,k,e;if(!j){a=g}for(l=0;l<q;l++){if(b){f=b[l]}else{if(j){a=g[l]}f=a.storeKeyFor(o[l])}e=m?t[l]:t;p=this.readStatus(f);if((p==h.EMPTY)||(p==h.ERROR)||(p==h.DESTROYED_CLEAN)){this.writeStatus(f,h.BUSY_LOADING);this.dataHashDidChange(f,s,YES);u.push(f);this._setCallbackForStoreKey(f,e,m,b)}else{if(c){if(p&h.READY){this.writeStatus(f,h.BUSY_REFRESH|(p&3));this.dataHashDidChange(f,s,YES);u.push(f);this._setCallbackForStoreKey(f,e,m,b)}else{if((p==h.BUSY_DESTROYING)||(p==h.BUSY_CREATING)||(p==h.BUSY_COMMITTING)){throw h.BUSY_ERROR}else{if(p==h.DESTROYED_DIRTY){throw h.BAD_STATE_ERROR}}}}}}k=NO;if(n){k=n.retrieveRecords.call(n,this,u,o)}if(!k){q=u.length;s=SC.Store.generateStoreKey();for(l=0;l<q;l++){f=u[l];p=this.readStatus(f);if(p===h.BUSY_LOADING){this.writeStatus(f,h.ERROR);this.dataHashDidChange(f,s,YES)}else{if(p&h.BUSY_REFRESH){this.writeStatus(f,h.READY|(p&3));this.dataHashDidChange(f,s,YES)}}}u.length=0}return u},_TMP_RETRIEVE_ARRAY:[],_callback_queue:{},_setCallbackForStoreKey:function(e,f,b,c){var a=this._callback_queue;if(b){a[e]={callback:f,otherKeys:c}}else{a[e]=f}},_retreiveCallbackForStoreKey:function(c){var a=this._callback_queue,f=a[c],e,b;if(f){if(SC.typeOf(f)===SC.T_FUNCTION){f.call();delete a[c]}else{if(SC.typeOf(f)==SC.T_HASH){f.completed=YES;b=f.storeKeys;b.forEach(function(g){if(!a[g].completed){e=YES}});if(e){f.callback.call();b.forEach(function(g){delete a[g]})}}}}},_cancelCallback:function(b){var a=this._callback_queue;if(a[b]){delete a[b]}},retrieveRecord:function(h,g,b,c,f){var e=this._TMP_RETRIEVE_ARRAY,a;if(b){e[0]=b;b=e;g=null}else{e[0]=g;g=e}a=this.retrieveRecords(h,g,b,c,f);e.length=0;return a[0]},refreshRecord:function(e,c,a,b){return !!this.retrieveRecord(e,c,a,YES,b)},refreshRecords:function(b,c,e,f){var a=this.retrieveRecords(b,c,e,YES,f);return a&&a.length>0},commitRecords:function(g,p,b,t,w){var o=this._getDataSource(),j=SC.typeOf(g)===SC.T_ARRAY,m=SC.typeOf(w)===SC.T_ARRAY,c=[],l=[],n=[],u=SC.Store.generateStoreKey(),h=SC.Record,a,k,f,q,x,v,s,e;if(!g&&!p&&!b){b=this.changelog}s=b?b.get("length"):(p?p.get("length"):0);for(k=0;k<s;k++){if(b){f=b[k]}else{if(j){a=g[k]||SC.Record}else{a=g}f=a.storeKeyFor(p[k])}e=m?w[k]:w;q=this.readStatus(f);if(q==h.ERROR){throw h.NOT_FOUND_ERROR}else{if(q==h.READY_NEW){this.writeStatus(f,h.BUSY_CREATING);this.dataHashDidChange(f,u,YES);c.push(f);this._setCallbackForStoreKey(f,e,m,b)}else{if(q==h.READY_DIRTY){this.writeStatus(f,h.BUSY_COMMITTING);this.dataHashDidChange(f,u,YES);l.push(f);this._setCallbackForStoreKey(f,e,m,b)}else{if(q==h.DESTROYED_DIRTY){this.writeStatus(f,h.BUSY_DESTROYING);this.dataHashDidChange(f,u,YES);n.push(f);this._setCallbackForStoreKey(f,e,m,b)}else{if(q==h.DESTROYED_CLEAN){this.dataHashDidChange(f,u,YES)}}}}}}if(o&&(s>0||t)){v=o.commitRecords.call(o,this,c,l,n,t)}if(v&&!g&&!p){if(b===this.changelog){this.changelog=null}else{this.changelog.removeEach(b)}}return v},commitRecord:function(h,g,b,c,f){var e=this._TMP_RETRIEVE_ARRAY,a;if(g===undefined&&b===undefined){return NO}if(b!==undefined){e[0]=b;b=e;g=null}else{e[0]=g;g=e}a=this.commitRecords(h,g,b,c,f);e.length=0;return a},cancelRecords:function(f,b,k){var a=this._getDataSource(),h=SC.typeOf(f)===SC.T_ARRAY,m=SC.Record,l=[],g,j,n,c,e,o;j=(k===undefined)?b.length:k.length;for(n=0;n<j;n++){if(h){e=f[n]||SC.Record}else{e=f||SC.Record}c=b?b[n]:undefined;if(k===undefined){o=e.storeKeyFor(c)}else{o=k?k[n]:undefined}if(o){g=this.readStatus(o);if((g==m.EMPTY)||(g==m.ERROR)){throw m.NOT_FOUND_ERROR}l.push(o);this._cancelCallback(o)}}if(a){a.cancel.call(a,this,l)}return this},cancelRecord:function(f,e,b){var c=this._TMP_RETRIEVE_ARRAY,a;if(b!==undefined){c[0]=b;b=c;e=null}else{c[0]=e;e=c}a=this.cancelRecords(f,e,b);c.length=0;return this},loadRecord:function(h,e,g){var a=SC.Record,c,b,f;h=h||SC.Record;b=h.prototype.primaryKey;g=g||e[b];c=f=h.storeKeyFor(g);if(this.readStatus(f)&a.BUSY){this.dataSourceDidComplete(f,e,g)}else{this.pushRetrieve(h,g,e,f)}return c},loadRecords:function(e,o,a){var g=SC.typeOf(e)===SC.T_ARRAY,h=o.get("length"),j=[],k=SC.Record,c,b,m,l,f,n;if(!g){c=e||SC.Record;m=c.prototype.primaryKey}for(l=0;l<h;l++){f=o.objectAt(l);if(g){c=e.objectAt(l)||SC.Record;m=c.prototype.primaryKey}b=(a)?a.objectAt(l):f[m];j[l]=this.loadRecord(c,f,b)}return j},readError:function(a){var b=this.recordErrors;return b?b[a]:undefined},readQueryError:function(a){var b=this.queryErrors;return b?b[SC.guidFor(a)]:undefined},dataSourceDidCancel:function(c){var b=this.readStatus(c),a=SC.Record;if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}switch(b){case a.BUSY_LOADING:b=a.EMPTY;break;case a.BUSY_CREATING:b=a.READY_NEW;break;case a.BUSY_COMMITTING:b=a.READY_DIRTY;break;case a.BUSY_REFRESH_CLEAN:b=a.READY_CLEAN;break;case a.BUSY_REFRESH_DIRTY:b=a.READY_DIRTY;break;case a.BUSY_DESTROYING:b=a.DESTROYED_DIRTY;break;default:throw a.BAD_STATE_ERROR}this.writeStatus(c,b);this.dataHashDidChange(c,null,YES);this._cancelCallback(c);return this},dataSourceDidComplete:function(h,g,f){var c=this.readStatus(h),b=SC.Record,e;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}if(c===b.BUSY_DESTROYING){throw b.BAD_STATE_ERROR}else{c=b.READY_CLEAN}this.writeStatus(h,c);if(g){this.writeDataHash(h,g,c)}if(f){SC.Store.replaceIdFor(h,f)}e=g||f?NO:YES;this.dataHashDidChange(h,null,e);var a=this.materializeRecord(h);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(h);return this},dataSourceDidDestroy:function(e){var c=this.readStatus(e),b=SC.Record;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}else{c=b.DESTROYED_CLEAN}this.removeDataHash(e,c);this.dataHashDidChange(e);var a=this.materializeRecord(e);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(e);return this},dataSourceDidError:function(f,e){var c=this.readStatus(f),g=this.recordErrors,b=SC.Record;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}else{c=b.ERROR}if(e&&e.isError){if(!g){g=this.recordErrors=[]}g[f]=e}this.writeStatus(f,c);this.dataHashDidChange(f,null,YES);var a=this.materializeRecord(f);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(f);return this},pushRetrieve:function(g,f,c,e){var b=SC.Record,a;if(e===undefined){e=g.storeKeyFor(f)}a=this.readStatus(e);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.READY_CLEAN;if(c===undefined){this.writeStatus(e,a)}else{this.writeDataHash(e,c,a)}if(f&&this.idFor(e)!==f){SC.Store.replaceIdFor(e,f)}this.dataHashDidChange(e);return e}return NO},pushDestroy:function(f,e,c){var b=SC.Record,a;if(c===undefined){c=f.storeKeyFor(e)}a=this.readStatus(c);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.DESTROYED_CLEAN;this.removeDataHash(c,a);this.dataHashDidChange(c);return c}return NO},pushError:function(h,g,c,e){var b=SC.Record,a,f=this.recordErrors;if(e===undefined){e=h.storeKeyFor(g)}a=this.readStatus(e);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.ERROR;if(c&&c.isError){if(!f){f=this.recordErrors=[]}f[e]=c}this.writeStatus(e,a);this.dataHashDidChange(e,null,YES);return e}return NO},loadQueryResults:function(c,a){if(c.get("location")===SC.Query.LOCAL){throw new Error("Cannot load query results for a local query")}var b=this._findQuery(c,YES,NO);if(b){b.set("storeKeys",a)}this.dataSourceDidFetchQuery(c);return this},dataSourceDidFetchQuery:function(a){return this._scstore_dataSourceDidFetchQuery(a,YES)},_scstore_dataSourceDidFetchQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;if(c){c.storeDidFetchQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidFetchQuery(e,NO)}return this},dataSourceDidCancelQuery:function(a){return this._scstore_dataSourceDidCancelQuery(a,YES)},_scstore_dataSourceDidCancelQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;if(c){c.storeDidCancelQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidCancelQuery(e,NO)}return this},dataSourceDidErrorQuery:function(b,a){var c=this.queryErrors;if(a&&a.isError){if(!c){c=this.queryErrors={}}c[SC.guidFor(b)]=a}return this._scstore_dataSourceDidErrorQuery(b,YES)},_scstore_dataSourceDidErrorQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;if(c){c.storeDidErrorQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidErrorQuery(e,NO)}return this},init:function(){arguments.callee.base.apply(this,arguments);this.reset()},toString:function(){var b=this.get("name");if(!b){return arguments.callee.base.apply(this,arguments)}else{var a=arguments.callee.base.apply(this,arguments);return"%@ (%@)".fmt(b,a)}},idFor:function(a){return SC.Store.idFor(a)},recordTypeFor:function(a){return SC.Store.recordTypeFor(a)},storeKeyFor:function(b,a){return b.storeKeyFor(a)},storeKeyExists:function(b,a){return b.storeKeyExists(a)},storeKeysFor:function(g){var a=[],f=g&&g.isEnumerable,c,e,b;if(!this.statuses){return a}for(e in SC.Store.recordTypesByStoreKey){c=SC.Store.recordTypesByStoreKey[e];if(f){b=g.contains(c)}else{b=c===g}if(b&&this.statuses[e]){a.push(parseInt(e,10))}}return a},storeKeys:function(){var a=[],b;if(!this.statuses){return a}for(b in this.statuses){if(this.statuses[b]!=SC.Record.EMPTY){a.push(parseInt(b,10))}}return a},statusString:function(a){var b=this.materializeRecord(a);return b.statusString()}});SC.Store.mixin({CHAIN_CONFLICT_ERROR:new Error("Nested Store Conflict"),NO_PARENT_STORE_ERROR:new Error("Parent Store Required"),NESTED_STORE_UNSUPPORTED_ERROR:new Error("Unsupported In Nested Store"),NESTED_STORE_RETRIEVE_DIRTY_ERROR:new Error("Cannot Retrieve Dirty Record in Nested Store"),EDITABLE:"editable",LOCKED:"locked",INHERITED:"inherited",idsByStoreKey:[],recordTypesByStoreKey:{},queriesByStoreKey:[],nextStoreKey:1,generateStoreKey:function(){return this.nextStoreKey++},idFor:function(a){return this.idsByStoreKey[a]},queryFor:function(a){return this.queriesByStoreKey[a]},recordTypeFor:function(a){return this.recordTypesByStoreKey[a]},replaceIdFor:function(c,a){var e=this.idsByStoreKey[c],f,b;if(e!==a){f=this.recordTypeFor(c);if(!f){throw new Error("replaceIdFor: storeKey %@ does not exist".fmt(c))}this.idsByStoreKey[c]=a;b=f.storeKeysById();delete b[e];b[a]=c}return this},replaceRecordTypeFor:function(a,b){this.recordTypesByStoreKey[a]=b;return this}});SC.Store.prototype.nextStoreIndex=1;SC.Store._getDefaultStore=function(){var a=this._store;if(!a){this._store=a=SC.Store.create()}return a};SC.Store.updateRecords=function(g,h,j,c){SC.Logger.warn("SC.Store.updateRecords() is deprecated.  Use loadRecords() instead");var e=this._getDefaultStore(),b=g.length,a,f;if(!j){j=[];for(a=0;a<b;a++){j[a]=g[a].recordType}}f=e.loadRecords(j,g);b=f.length;for(a=0;a<b;a++){f[a]=e.materializeRecord(f[a])}return f};SC.Store.find=function(a,b){return this._getDefaultStore().find(b,a)};SC.Store.findAll=function(a,b){return this._getDefaultStore().findAll(a,b)};sc_require("system/store");SC.NestedStore=SC.Store.extend({hasChanges:NO,parentStore:null,isNested:YES,lockOnRead:YES,locks:null,chainedChanges:null,find:function(a){if(a&&a.isQuery&&a.get("location")!==SC.Query.LOCAL){throw"SC.Store#find() can only accept LOCAL queries in nested stores"}return arguments.callee.base.apply(this,arguments)},commitChanges:function(b){if(this.get("hasChanges")){var a=this.get("parentStore");a.commitChangesFromNestedStore(this,this.chainedChanges,b)}this.reset();return this},discardChanges:function(){var c,g;if((c=this.records)&&(g=this.locks)){var b=this.get("parentStore"),j=b.revisions;var h=this.revisions,f,e,a;for(f in c){if(!c.hasOwnProperty(f)){continue}if(!(e=g[f])){continue}a=j[f];if((a!==e)||(h[f]>a)){this._notifyRecordPropertyChange(parseInt(f,10))}}}this.reset();this.flush();return this},destroy:function(){this.discardChanges();var a=this.get("parentStore");if(a){a.willDestroyNestedStore(this)}arguments.callee.base.apply(this,arguments);return this},reset:function(){var c,e,a;var b=this.get("parentStore");if(!b){throw SC.Store.NO_PARENT_STORE_ERROR}this.dataHashes=SC.beget(b.dataHashes);this.revisions=SC.beget(b.revisions);this.statuses=SC.beget(b.statuses);this.childRecords=b.childRecords?SC.beget(b.childRecords):{};this.parentRecords=b.parentRecords?SC.beget(b.parentRecords):{};this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.set("hasChanges",NO)},refreshQuery:function(b){var a=this.get("parentStore");if(a){a.refreshQuery(b)}return this},readError:function(b){var a=this.get("parentStore");return a?a.readError(b):null},readQueryError:function(b){var a=this.get("parentStore");return a?a.readQueryError(b):null},storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:(a&&a[b])?SC.Store.LOCKED:SC.Store.INHERITED},_lock:function(l){var m=this.locks,g,j,e,a,n,h,f,k;if(m&&m[l]){return this}if(!m){m=this.locks=[]}j=this.editables;if(j){j[l]=0}var b=this.get("parentStore"),c;while(b&&(c=b.storeKeyEditState(l))===SC.Store.INHERITED){b=b.get("parentStore")}if(b&&c===SC.Store.EDITABLE){e=this.childRecords[l];if(e){this._lock(e);a=this.parentRecords[e];if(a){n=a[l];h=n?SC.tupleForPropertyPath(n,this.dataHashes[e]):null;if(h){f=h[0];k=h[1]}this.dataHashes[l]=f&&k?f[k]:null}}else{this.dataHashes[l]=SC.clone(b.dataHashes[l],YES)}if(!j){j=this.editables=[]}j[l]=1}else{this.dataHashes[l]=b.dataHashes[l]}this.statuses[l]=this.statuses[l];g=this.revisions[l]=this.revisions[l];m[l]=g||1;return this},readDataHash:function(a){if(this.get("lockOnRead")){this._lock(a)}return this.dataHashes[a]},readEditableDataHash:function(a){this._lock(a);return arguments.callee.base.apply(this,arguments)},writeDataHash:function(e,g,b){var c=this.locks,h=NO,a;if(g){this.dataHashes[e]=g}else{this._lock(e);h=YES}if(b){this.statuses[e]=b}else{if(!h){this.statuses[e]=(this.statuses[e]||SC.Record.READY_NEW)}}if(!h){a=this.revisions[e]=this.revisions[e];if(!c){c=this.locks=[]}if(!c[e]){c[e]=a||1}}var f=this.editables;if(!f){f=this.editables=[]}f[e]=1;return this},removeDataHash:function(c,a){var b=this.locks;if(!b){b=this.locks=[]}if(!b[c]){b[c]=this.revisions[c]||1}return arguments.callee.base.apply(this,arguments)},dataHashDidChange:function(e,b,a,j){if(!b){b=SC.Store.generateStoreKey()}var c,f,h,k;c=SC.typeOf(e)===SC.T_ARRAY;if(c){f=e.length}else{f=1;k=e}var g=this.chainedChanges;if(!g){g=this.chainedChanges=SC.Set.create()}for(h=0;h<f;h++){if(c){k=e[h]}this._lock(k);this.revisions[k]=b;g.add(k);this._notifyRecordPropertyChange(k,a,j)}this.setIfChanged("hasChanges",YES);return this},commitChangesFromNestedStore:function(f,g,a){arguments.callee.base.apply(this,arguments);var b=this.get("parentStore"),j=b.revisions,c;var l=this.locks,h=this.chainedChanges,e,k;if(!l){l=this.locks=[]}if(!h){h=this.chainedChanges=SC.Set.create()}e=g.length;for(c=0;c<e;c++){k=g[c];if(!l[k]){l[k]=j[k]||1}h.add(k)}this.setIfChanged("hasChanges",h.get("length")>0);this.flush();return this},queryFor:function(c,a,b){return this.get("parentStore").queryFor(c,a,b)},findAll:function(f,b,e,c,a){if(!a){a=this}return this.get("parentStore").findAll(f,b,e,c,a)},retrieveRecords:function(g,o,b,c){var a=this.get("parentStore"),m,e,s,q=(!b)?o.length:b.length,k=SC.Record,p;if(c){for(m=0;m<q;m++){e=!b?a.storeKeyFor(g,o[m]):b[m];p=this.peekStatus(e);if(p&k.DIRTY){throw SC.Store.NESTED_STORE_RETRIEVE_DIRTY_ERROR}else{var h=this.dataHashes,l=this.revisions,j=this.statuses,n=this.editables,u=this.locks;var f=NO;var t=NO;if(h&&h.hasOwnProperty(e)){delete h[e];f=YES}if(l&&l.hasOwnProperty(e)){delete l[e];f=YES}if(n){delete n[e]}if(u){delete u[e]}if(j&&j.hasOwnProperty(e)){delete j[e];if(!f){t=YES}f=YES}if(f){this._notifyRecordPropertyChange(e,t)}}}}return a.retrieveRecords(g,o,b,c)},commitRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},commitRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},cancelRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},cancelRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidCancel:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidComplete:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidDestroy:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidError:function(b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushRetrieve:function(e,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushDestroy:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushError:function(e,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}});sc_require("models/record");SC.RecordArray=SC.Object.extend(SC.Enumerable,SC.Array,{store:null,query:null,storeKeys:null,status:SC.Record.EMPTY,isEditable:function(){var a=this.get("query");return a?a.get("isEditable"):YES}.property("query").cacheable(),length:function(){this.flush();var a=this.get("storeKeys");return a?a.get("length"):0}.property("storeKeys").cacheable(),_scra_records:null,objectAt:function(a){this.flush();var g=this._scra_records,f=this.get("storeKeys"),b=this.get("store"),e,c;if(!f||!b){return undefined}if(g&&(c=g[a])){return c}if(!g){this._scra_records=g=[]}e=f.objectAt(a);if(e){if(b.peekStatus(e)===SC.Record.EMPTY){b.retrieveRecord(null,null,e)}g[a]=c=b.materializeRecord(e)}return c},forEach:function(j,e){this.flush();var f=this._scra_records,b=this.get("storeKeys"),g=this.get("store"),c=b?b.get("length"):0,h,k,a;if(!b||!g){return this}if(!f){f=this._scra_records=[]}if(!e){e=this}for(h=0;h<c;h++){a=f[h];if(!a){a=f[h]=g.materializeRecord(b.objectAt(h))}j.call(e,a,h,this)}return this},replace:function(b,h,g){this.flush();var f=this.get("storeKeys"),a=g?(g.get?g.get("length"):g.length):0,c,e;if(!f){throw"Unable to edit an SC.RecordArray that does not have its storeKeys property set."}if(!this.get("isEditable")){throw SC.RecordArray.NOT_EDITABLE}e=[];for(c=0;c<a;c++){e[c]=g.objectAt(c).get("storeKey")}f.replace(b,h,e);return this},contains:function(a){return this.indexOf(a)>=0},indexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using indexOf on %@ with an object that is not an SC.Record".fmt(b));return -1}this.flush();var e=b.get("storeKey"),c=this.get("storeKeys");return c?c.indexOf(e,a):-1},lastIndexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using lastIndexOf on %@ with an object that is not an SC.Record".fmt(b));return -1}this.flush();var e=b.get("storeKey"),c=this.get("storeKeys");return c?c.lastIndexOf(e,a):-1},add:function(a){if(!SC.kindOf(a,SC.Record)){return this}if(this.indexOf(a)<0){this.pushObject(a)}return this},remove:function(a){if(!SC.kindOf(a,SC.Record)){return this}this.removeObject(a);return this},find:function(a,b,c){if(b&&b.isQuery){return this.get("store").find(b.queryWithScope(this))}else{return a.apply(this,SC.$A(arguments).slice(1))}}.enhance(),refresh:function(){this.get("store").refreshQuery(this.get("query"));return this},reload:function(){this.flush(YES);return this},destroy:function(){if(!this.get("isDestroyed")){this.get("store").recordArrayWillDestroy(this)}arguments.callee.base.apply(this,arguments)},storeWillFetchQuery:function(c){var b=this.get("status"),a=SC.Record;if((b===a.EMPTY)||(b===a.ERROR)){b=a.BUSY_LOADING}if(b&a.READY){b=a.BUSY_REFRESH}this.setIfChanged("status",b);return this},storeDidFetchQuery:function(a){this.setIfChanged("status",SC.Record.READY_CLEAN);return this},storeDidCancelQuery:function(c){var b=this.get("status"),a=SC.Record;if(b===a.BUSY_LOADING){b=a.EMPTY}else{if(b===a.BUSY_REFRESH){b=a.READY_CLEAN}}this.setIfChanged("status",b);return this},storeDidErrorQuery:function(a){this.setIfChanged("status",SC.Record.ERROR);return this},storeDidChangeStoreKeys:function(b,a){var c=this.get("query");if(c.get("location")!==SC.Query.LOCAL){return this}if(!c.containsRecordTypes(a)){return this}var e=this._scq_changedStoreKeys;if(!e){e=this._scq_changedStoreKeys=SC.IndexSet.create()}e.addEach(b);this.set("needsFlush",YES);if(this.get("storeKeys")){this.flush()}return this},flush:function(a){if(this._insideFlush){this.set("needsFlush",YES);return this}if(!this.get("needsFlush")&&!a){return this}this.set("needsFlush",NO);var l=this.get("query"),o=this.get("store");if(!o||!l||l.get("location")!==SC.Query.LOCAL){return this}this._insideFlush=YES;var j=this.get("storeKeys"),g=this._scq_changedStoreKeys,h=NO,m=SC.Record,s=[],b=new Date(),e,f,c,t,q,k;var n=j;if(j&&!a){if(g){g.forEach(function(u){if(s.length>0||new Date()-b>SC.RecordArray.QUERY_MATCHING_THRESHOLD){s.push(u);return}f=o.peekStatus(u);if(!(f&m.EMPTY)&&!((f&m.DESTROYED)||(f===m.BUSY_DESTROYING))){e=o.materializeRecord(u);k=!!(e&&l.contains(e))}else{k=NO}if(k){if(j.indexOf(u)<0){if(!h){j=j.copy()}j.pushObject(u)}}else{if(j.indexOf(u)>=0){if(!h){j=j.copy()}j.removeObject(u)}}},this);h=YES}}else{if(q=l.get("scope")){t=q.flush().get("storeKeys")}else{if(c=l.get("expandedRecordTypes")){t=SC.IndexSet.create();c.forEach(function(u){t.addEach(o.storeKeysFor(u))})}}j=[];t.forEach(function(u){if(s.length>0||new Date()-b>SC.RecordArray.QUERY_MATCHING_THRESHOLD){s.push(u);return}f=o.peekStatus(u);if(!(f&m.EMPTY)&&!((f&m.DESTROYED)||(f===m.BUSY_DESTROYING))){e=o.materializeRecord(u);if(e&&l.contains(e)){j.push(u)}}});h=YES}if(s.length>0){var p=this;window.setTimeout(function(){SC.run(function(){if(!p||p.get("isDestroyed")){return}p.set("needsFlush",YES);p._scq_changedStoreKeys=SC.IndexSet.create().addEach(s);p.flush()})},1)}if(g){g.clear()}if(h){if(j&&(j===n)){j=j.copy()}j=SC.Query.orderStoreKeys(j,l,o);if(SC.compare(n,j)!==0){this.set("storeKeys",SC.clone(j))}}this._insideFlush=NO;return this},needsFlush:YES,isError:function(){return !!(this.get("status")&SC.Record.ERROR)}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");return a.readQueryError(this.get("query"))||SC.Record.GENERIC_ERROR}else{return null}}.property("isError").cacheable(),propertyWillChange:function(b){if(b==="storeKeys"){var c=this.get("storeKeys");var a=c?c.get("length"):0;this.arrayContentWillChange(0,a,0)}return arguments.callee.base.apply(this,arguments)},_storeKeysDidChange:function(){var g=this.get("storeKeys");var e=this._prevStoreKeys,b,c,h=this._storeKeysContentDidChange,a=this._storeKeysStateDidChange;if(g===e){return}if(e){e.removeArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:this._storeKeysContentDidChange});b=e.get("length")}else{b=0}this._prevStoreKeys=g;if(g){g.addArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:this._storeKeysContentDidChange});c=g.get("length")}else{c=0}this._storeKeysContentDidChange(0,b,c)}.observes("storeKeys"),addArrayObservers:function(){this.flush();return SC.Array.addArrayObservers.apply(this,arguments)},_storeKeysContentDidChange:function(c,a,b){if(this._scra_records){this._scra_records.length=0}this.arrayContentDidChange(c,a,b)},init:function(){arguments.callee.base.apply(this,arguments);this._storeKeysDidChange()}});SC.RecordArray.mixin({NOT_EDITABLE:SC.Error.desc("SC.RecordArray is not editable"),QUERY_MATCHING_THRESHOLD:100});var Handlebars={};Handlebars.VERSION="1.0.beta.2";Handlebars.helpers={};Handlebars.partials={};Handlebars.registerHelper=function(b,c,a){if(a){c.not=a}this.helpers[b]=c};Handlebars.registerPartial=function(a,b){this.partials[a]=b};Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+a+"'")}});Handlebars.registerHelper("blockHelperMissing",function(g,e){var a=e.inverse||function(){},k=e.fn;var c="";var h=Object.prototype.toString.call(g);if(h==="[object Function]"){g=g()}if(g===true){return k(this)}else{if(g===false||g==null){return a(this)}else{if(h==="[object Array]"){if(g.length>0){for(var f=0,b=g.length;f<b;f++){c=c+k(g[f])}}else{c=a(this)}return c}else{return k(g)}}}});Handlebars.registerHelper("each",function(g,e){var h=e.fn,a=e.inverse;var c="";if(g&&g.length>0){for(var f=0,b=g.length;f<b;f++){c=c+h(g[f])}}else{c=a(this)}return c});Handlebars.registerHelper("if",function(b,a){if(!b||Handlebars.Utils.isEmpty(b)){return a.inverse(this)}else{return a.fn(this)}});Handlebars.registerHelper("unless",function(c,b){var e=b.fn,a=b.inverse;b.fn=a;b.inverse=e;return Handlebars.helpers["if"].call(this,c,b)});Handlebars.registerHelper("with",function(b,a){return a.fn(b)});Handlebars.registerHelper("log",function(a){Handlebars.log(a)});var handlebars=(function(){var g={trace:function c(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function b(h,l,m,p,o,k,n){var j=k.length-1;switch(o){case 1:return k[j-1];break;case 2:this.$=new p.ProgramNode(k[j-2],k[j]);break;case 3:this.$=new p.ProgramNode(k[j]);break;case 4:this.$=new p.ProgramNode([]);break;case 5:this.$=[k[j]];break;case 6:k[j-1].push(k[j]);this.$=k[j-1];break;case 7:this.$=new p.InverseNode(k[j-2],k[j-1],k[j]);break;case 8:this.$=new p.BlockNode(k[j-2],k[j-1],k[j]);break;case 9:this.$=k[j];break;case 10:this.$=k[j];break;case 11:this.$=new p.ContentNode(k[j]);break;case 12:this.$=new p.CommentNode(k[j]);break;case 13:this.$=new p.MustacheNode(k[j-1][0],k[j-1][1]);break;case 14:this.$=new p.MustacheNode(k[j-1][0],k[j-1][1]);break;case 15:this.$=k[j-1];break;case 16:this.$=new p.MustacheNode(k[j-1][0],k[j-1][1]);break;case 17:this.$=new p.MustacheNode(k[j-1][0],k[j-1][1],true);break;case 18:this.$=new p.PartialNode(k[j-1]);break;case 19:this.$=new p.PartialNode(k[j-2],k[j-1]);break;case 20:break;case 21:this.$=[[k[j-2]].concat(k[j-1]),k[j]];break;case 22:this.$=[[k[j-1]].concat(k[j]),null];break;case 23:this.$=[[k[j-1]],k[j]];break;case 24:this.$=[[k[j]],null];break;case 25:k[j-1].push(k[j]);this.$=k[j-1];break;case 26:this.$=[k[j]];break;case 27:this.$=k[j];break;case 28:this.$=new p.StringNode(k[j]);break;case 29:this.$=new p.IntegerNode(k[j]);break;case 30:this.$=new p.BooleanNode(k[j]);break;case 31:this.$=new p.HashNode(k[j]);break;case 32:k[j-1].push(k[j]);this.$=k[j-1];break;case 33:this.$=[k[j]];break;case 34:this.$=[k[j-2],k[j]];break;case 35:this.$=[k[j-2],new p.StringNode(k[j])];break;case 36:this.$=[k[j-2],new p.IntegerNode(k[j])];break;case 37:this.$=[k[j-2],new p.BooleanNode(k[j])];break;case 38:this.$=new p.IdNode(k[j]);break;case 39:k[j-2].push(k[j]);this.$=k[j-2];break;case 40:this.$=[k[j]];break}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function e(j,h){throw new Error(j)},parse:function f(s){var z=this,n=[0],I=[null],u=[],J=this.table,j="",t=0,G=0,l=0,q=2,w=1;this.lexer.setInput(s);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var k=this.lexer.yylloc;u.push(k);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function y(p){n.length=n.length-2*p;I.length=I.length-p;u.length=u.length-p}function x(){var p;p=z.lexer.lex()||1;if(typeof p!=="number"){p=z.symbols_[p]||p}return p}var F,B,m,E,K,v,D={},A,H,h,o;while(true){m=n[n.length-1];if(this.defaultActions[m]){E=this.defaultActions[m]}else{if(F==null){F=x()}E=J[m]&&J[m][F]}if(typeof E==="undefined"||!E.length||!E[0]){if(!l){o=[];for(A in J[m]){if(this.terminals_[A]&&A>2){o.push("'"+this.terminals_[A]+"'")}}var C="";if(this.lexer.showPosition){C="Parse error on line "+(t+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+o.join(", ")}else{C="Parse error on line "+(t+1)+": Unexpected "+(F==1?"end of input":("'"+(this.terminals_[F]||F)+"'"))}this.parseError(C,{text:this.lexer.match,token:this.terminals_[F]||F,line:this.lexer.yylineno,loc:k,expected:o})}if(l==3){if(F==w){throw new Error(C||"Parsing halted.")}G=this.lexer.yyleng;j=this.lexer.yytext;t=this.lexer.yylineno;k=this.lexer.yylloc;F=x()}while(1){if((q.toString()) in J[m]){break}if(m==0){throw new Error(C||"Parsing halted.")}y(1);m=n[n.length-1]}B=F;F=q;m=n[n.length-1];E=J[m]&&J[m][q];l=3}if(E[0] instanceof Array&&E.length>1){throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+F)}switch(E[0]){case 1:n.push(F);I.push(this.lexer.yytext);u.push(this.lexer.yylloc);n.push(E[1]);F=null;if(!B){G=this.lexer.yyleng;j=this.lexer.yytext;t=this.lexer.yylineno;k=this.lexer.yylloc;if(l>0){l--}}else{F=B;B=null}break;case 2:H=this.productions_[E[1]][1];D.$=I[I.length-H];D._$={first_line:u[u.length-(H||1)].first_line,last_line:u[u.length-1].last_line,first_column:u[u.length-(H||1)].first_column,last_column:u[u.length-1].last_column};v=this.performAction.call(D,j,G,t,this.yy,E[1],I,u);if(typeof v!=="undefined"){return v}if(H){n=n.slice(0,-1*H*2);I=I.slice(0,-1*H);u=u.slice(0,-1*H)}n.push(this.productions_[E[1]][0]);I.push(D.$);u.push(D._$);h=J[n[n.length-2]][n[n.length-1]];n.push(h);break;case 3:return true}}return true}};var a=(function(){var l=({EOF:1,parseError:function n(q,p){if(this.yy.parseError){this.yy.parseError(q,p)}else{throw new Error(q)}},setInput:function(p){this._input=p;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var q=this._input[0];this.yytext+=q;this.yyleng++;this.match+=q;this.matched+=q;var p=q.match(/\n/);if(p){this.yylineno++}this._input=this._input.slice(1);return q},unput:function(p){this._input=p+this._input;return this},more:function(){this._more=true;return this},pastInput:function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var p=this.match;if(p.length<20){p+=this._input.substr(0,20-p.length)}return(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var p=this.pastInput();var q=new Array(p.length+1).join("-");return p+this.upcomingInput()+"\n"+q+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var u,s,q,p;if(!this._more){this.yytext="";this.match=""}var v=this._currentRules();for(var t=0;t<v.length;t++){s=this._input.match(this.rules[v[t]]);if(s){p=s[0].match(/\n.*/g);if(p){this.yylineno+=p.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:p?p[p.length-1].length-1:this.yylloc.last_column+s[0].length};this.yytext+=s[0];this.match+=s[0];this.matches=s;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(s[0].length);this.matched+=s[0];u=this.performAction.call(this,this.yy,this,v[t],this.conditionStack[this.conditionStack.length-1]);if(u){return u}else{return}}}if(this._input===""){return this.EOF}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function h(){var p=this.next();if(typeof p!=="undefined"){return p}else{return this.lex()}},begin:function j(p){this.conditionStack.push(p)},popState:function o(){return this.conditionStack.pop()},_currentRules:function m(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}});l.performAction=function k(u,q,t,p){var s=p;switch(t){case 0:this.begin("mu");if(q.yytext){return 14}break;case 1:return 14;break;case 2:return 24;break;case 3:return 16;break;case 4:return 20;break;case 5:return 19;break;case 6:return 19;break;case 7:return 23;break;case 8:return 23;break;case 9:q.yytext=q.yytext.substr(3,q.yyleng-5);this.begin("INITIAL");return 15;break;case 10:return 22;break;case 11:return 34;break;case 12:return 33;break;case 13:return 33;break;case 14:return 36;break;case 15:break;case 16:this.begin("INITIAL");return 18;break;case 17:this.begin("INITIAL");return 18;break;case 18:q.yytext=q.yytext.substr(1,q.yyleng-2).replace(/\\"/g,'"');return 28;break;case 19:return 30;break;case 20:return 30;break;case 21:return 29;break;case 22:return 33;break;case 23:q.yytext=q.yytext.substr(1,q.yyleng-2);return 33;break;case 24:return"INVALID";break;case 25:return 5;break}};l.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s/.])/,/^\[.*\]/,/^./,/^$/];l.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:false},INITIAL:{rules:[0,1,25],inclusive:true}};return l})();g.lexer=a;return g})();Handlebars.Parser=handlebars;Handlebars.parse=function(a){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(a)};Handlebars.print=function(a){return new Handlebars.PrintVisitor().accept(a)};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,a){}};Handlebars.log=function(b,a){Handlebars.logger.log(b,a)};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(c,b){this.type="program";this.statements=c;if(b){this.inverse=new Handlebars.AST.ProgramNode(b)}};Handlebars.AST.MustacheNode=function(e,c,b){this.type="mustache";this.id=e[0];this.params=e.slice(1);this.hash=c;this.escaped=!b};Handlebars.AST.PartialNode=function(c,b){this.type="partial";this.id=c;this.context=b};var a=function(b,c){if(b.original!==c.original){throw new Handlebars.Exception(b.original+" doesn't match "+c.original)}};Handlebars.AST.BlockNode=function(c,b,e){a(c.id,e);this.type="block";this.mustache=c;this.program=b};Handlebars.AST.InverseNode=function(c,b,e){a(c.id,e);this.type="inverse";this.mustache=c;this.program=b};Handlebars.AST.ContentNode=function(b){this.type="content";this.string=b};Handlebars.AST.HashNode=function(b){this.type="hash";this.pairs=b};Handlebars.AST.IdNode=function(g){this.type="ID";this.original=g.join(".");var e=[],h=0;for(var f=0,b=g.length;f<b;f++){var c=g[f];if(c===".."){h++}else{if(c==="."||c==="this"){this.isScoped=true}else{e.push(c)}}}this.parts=e;this.string=e.join(".");this.depth=h;this.isSimple=(e.length===1)&&(h===0)};Handlebars.AST.StringNode=function(b){this.type="STRING";this.string=b};Handlebars.AST.IntegerNode=function(b){this.type="INTEGER";this.integer=b};Handlebars.AST.BooleanNode=function(b){this.type="BOOLEAN";this.bool=b};Handlebars.AST.CommentNode=function(b){this.type="comment";this.comment=b}})();Handlebars.Exception=function(b){var a=Error.prototype.constructor.apply(this,arguments);for(var c in a){if(a.hasOwnProperty(c)){this[c]=a[c]}}};Handlebars.Exception.prototype=new Error;Handlebars.SafeString=function(a){this.string=a};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var c={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var e=/&(?!\w+;)|[<>"'`]/g;var b=/[&<>"'`]/;var a=function(f){return c[f]||"&amp;"};Handlebars.Utils={escapeExpression:function(f){if(f instanceof Handlebars.SafeString){return f.toString()}else{if(f==null||f===false){return""}}if(!b.test(f)){return f}return f.replace(e,a)},isEmpty:function(f){if(typeof f==="undefined"){return true}else{if(f===null){return true}else{if(f===false){return true}else{if(Object.prototype.toString.call(f)==="[object Array]"&&f.length===0){return true}else{return false}}}}}}})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(g,f){g.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16};g.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1};g.DISASSEMBLE_MAP={};for(var j in g.OPCODE_MAP){var h=g.OPCODE_MAP[j];g.DISASSEMBLE_MAP[h]=j}g.multiParamSize=function(k){return g.MULTI_PARAM_OPCODES[g.DISASSEMBLE_MAP[k]]};g.prototype={compiler:g,disassemble:function(){var u=this.opcodes,s,n;var q=[],w,m,x;for(var t=0,o=u.length;t<o;t++){s=u[t];if(s==="DECLARE"){m=u[++t];x=u[++t];q.push("DECLARE "+m+" = "+x)}else{w=g.DISASSEMBLE_MAP[s];var v=g.multiParamSize(s);var k=[];for(var p=0;p<v;p++){n=u[++t];if(typeof n==="string"){n='"'+n.replace("\n","\\n")+'"'}k.push(n)}w=w+" "+k.join(" ");q.push(w)}}return q.join("\n")},guid:0,compile:function(k,m){this.children=[];this.depths={list:[]};this.options=m;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(n){for(var l in n){this.options.knownHelpers[l]=n[l]}}return this.program(k)},accept:function(k){return this[k.type](k)},program:function(n){var m=n.statements,p;this.opcodes=[];for(var o=0,k=m.length;o<k;o++){p=m[o];this[p.type](p)}this.isSimple=k===1;this.depths.list=this.depths.list.sort(function(q,l){return q-l});return this},compileProgram:function(n){var k=new this.compiler().compile(n,this.options);var o=this.guid++;this.usePartial=this.usePartial||k.usePartial;this.children[o]=k;for(var p=0,m=k.depths.list.length;p<m;p++){depth=k.depths.list[p];if(depth<2){continue}else{this.addDepth(depth-1)}}return o},block:function(q){var n=q.mustache;var p,s,l,m;var o=this.setupStackForMustache(n);var k=this.compileProgram(q.program);if(q.program.inverse){m=this.compileProgram(q.program.inverse);this.declare("inverse",m)}this.opcode("invokeProgram",k,o.length,!!n.hash);this.declare("inverse",null);this.opcode("append")},inverse:function(m){var l=this.setupStackForMustache(m.mustache);var k=this.compileProgram(m.program);this.declare("inverse",k);this.opcode("invokeProgram",null,l.length,!!m.mustache.hash);this.opcode("append")},hash:function(o){var n=o.pairs,q,p;this.opcode("push","{}");for(var m=0,k=n.length;m<k;m++){q=n[m];p=q[1];this.accept(p);this.opcode("assignToHash",q[0])}},partial:function(k){var l=k.id;this.usePartial=true;if(k.context){this.ID(k.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",l.original);this.opcode("append")},content:function(k){this.opcode("appendContent",k.string)},mustache:function(k){var l=this.setupStackForMustache(k);this.opcode("invokeMustache",l.length,k.id.original,!!k.hash);if(k.escaped){this.opcode("appendEscaped")}else{this.opcode("append")}},ID:function(n){this.addDepth(n.depth);this.opcode("getContext",n.depth);this.opcode("lookupWithHelpers",n.parts[0]||null,n.isScoped||false);for(var m=1,k=n.parts.length;m<k;m++){this.opcode("lookup",n.parts[m])}},STRING:function(k){this.opcode("pushString",k.string)},INTEGER:function(k){this.opcode("push",k.integer)},BOOLEAN:function(k){this.opcode("push",k.bool)},comment:function(){},pushParams:function(m){var k=m.length,l;while(k--){l=m[k];if(this.options.stringParams){if(l.depth){this.addDepth(l.depth)}this.opcode("getContext",l.depth||0);this.opcode("pushStringParam",l.string)}else{this[l.type](l)}}},opcode:function(k,n,m,l){this.opcodes.push(g.OPCODE_MAP[k]);if(n!==undefined){this.opcodes.push(n)}if(m!==undefined){this.opcodes.push(m)}if(l!==undefined){this.opcodes.push(l)}},declare:function(k,l){this.opcodes.push("DECLARE");this.opcodes.push(k);this.opcodes.push(l)},addDepth:function(k){if(k===0){return}if(!this.depths[k]){this.depths[k]=true;this.depths.list.push(k)}},setupStackForMustache:function(k){var l=k.params;this.pushParams(l);if(k.hash){this.hash(k.hash)}this.ID(k.id);return l}};f.prototype={nameLookup:function(m,k,l){if(/^[0-9]+$/.test(k)){return m+"["+k+"]"}else{if(f.isValidJavaScriptVariableName(k)){return m+"."+k}else{return m+"['"+k+"']"}}},appendToBuffer:function(k){if(this.environment.isSimple){return"return "+k+";"}else{return"buffer += "+k+";"}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(k,l,n,m){this.environment=k;this.options=l||{};this.name=this.environment.name;this.isChild=!!n;this.context=n||{programs:[],aliases:{self:"this"},registers:{list:[]}};this.preamble();this.stackSlot=0;this.stackVars=[];this.compileChildren(k,l);var p=k.opcodes,o;this.i=0;for(b=p.length;this.i<b;this.i++){o=this.nextOpcode(0);if(o[0]==="DECLARE"){this.i=this.i+2;this[o[1]]=o[2]}else{this.i=this.i+o[1].length;this[o[0]].apply(this,o[1])}}return this.createFunctionContext(m)},nextOpcode:function(t){var p=this.environment.opcodes,o=p[this.i+t],m,q;var s,k;if(o==="DECLARE"){m=p[this.i+1];q=p[this.i+2];return["DECLARE",m,q]}else{m=g.DISASSEMBLE_MAP[o];s=g.multiParamSize(o);k=[];for(var l=0;l<s;l++){k.push(p[this.i+l+1+t])}return[m,k]}},eat:function(k){this.i=this.i+k.length},preamble:function(){var k=[];if(!this.isChild){var l=this.namespace;var m="helpers = helpers || "+l+".helpers;";if(this.environment.usePartial){m=m+" partials = partials || "+l+".partials;"}k.push(m)}else{k.push("")}if(!this.environment.isSimple){k.push(", buffer = "+this.initializeBuffer())}else{k.push("")}this.lastContext=0;this.source=k},createFunctionContext:function(q){var s=this.stackVars;if(!this.isChild){s=s.concat(this.context.registers.list)}if(s.length>0){this.source[1]=this.source[1]+", "+s.join(", ")}if(!this.isChild){var m=[];for(var p in this.context.aliases){this.source[1]=this.source[1]+", "+p+"="+this.context.aliases[p]}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.source.push("return buffer;")}var t=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var o=0,k=this.environment.depths.list.length;o<k;o++){t.push("depth"+this.environment.depths.list[o])}if(q){t.push(this.source.join("\n  "));return Function.apply(this,t)}else{var n="function "+(this.name||"")+"("+t.join(",")+") {\n  "+this.source.join("\n  ")+"}";Handlebars.log(Handlebars.logger.DEBUG,n+"\n\n");return n}},appendContent:function(k){this.source.push(this.appendToBuffer(this.quotedString(k)))},append:function(){var k=this.popStack();this.source.push("if("+k+" || "+k+" === 0) { "+this.appendToBuffer(k)+" }");if(this.environment.isSimple){this.source.push("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){var l=this.nextOpcode(1),k="";this.context.aliases.escapeExpression="this.escapeExpression";if(l[0]==="appendContent"){k=" + "+this.quotedString(l[1][0]);this.eat(l)}this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+k))},getContext:function(k){if(this.lastContext!==k){this.lastContext=k}},lookupWithHelpers:function(m,n){if(m){var k=this.nextStack();this.usingKnownHelper=false;var l;if(!n&&this.options.knownHelpers[m]){l=k+" = "+this.nameLookup("helpers",m,"helper");this.usingKnownHelper=true}else{if(n||this.options.knownHelpersOnly){l=k+" = "+this.nameLookup("depth"+this.lastContext,m,"context")}else{l=k+" = "+this.nameLookup("helpers",m,"helper")+" || "+this.nameLookup("depth"+this.lastContext,m,"context")}}l+=";";this.source.push(l)}else{this.pushStack("depth"+this.lastContext)}},lookup:function(l){var k=this.topStack();this.source.push(k+" = ("+k+" === null || "+k+" === undefined || "+k+" === false ? "+k+" : "+this.nameLookup(k,l,"context")+");")},pushStringParam:function(k){this.pushStack("depth"+this.lastContext);this.pushString(k)},pushString:function(k){this.pushStack(this.quotedString(k))},push:function(k){this.pushStack(k)},invokeMustache:function(m,l,k){this.populateParams(m,this.quotedString(l),"{}",null,k,function(n,p,o){if(!this.usingKnownHelper){this.context.aliases.helperMissing="helpers.helperMissing";this.context.aliases.undef="void 0";this.source.push("else if("+o+"=== undef) { "+n+" = helperMissing.call("+p+"); }");if(n!==o){this.source.push("else { "+n+" = "+o+"; }")}}})},invokeProgram:function(m,n,l){var k=this.programExpression(this.inverse);var o=this.programExpression(m);this.populateParams(n,null,o,k,l,function(p,s,q){if(!this.usingKnownHelper){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";this.source.push("else { "+p+" = blockHelperMissing.call("+s+"); }")}})},populateParams:function(q,l,v,s,z,y){var m=z||this.options.stringParams||s||this.options.data;var k=this.popStack(),x;var o=[],n,p,w;if(m){this.register("tmp1",v);w="tmp1"}else{w="{ hash: {} }"}if(m){var u=(z?this.popStack():"{}");this.source.push("tmp1.hash = "+u+";")}if(this.options.stringParams){this.source.push("tmp1.contexts = [];")}for(var t=0;t<q;t++){n=this.popStack();o.push(n);if(this.options.stringParams){this.source.push("tmp1.contexts.push("+this.popStack()+");")}}if(s){this.source.push("tmp1.fn = tmp1;");this.source.push("tmp1.inverse = "+s+";")}if(this.options.data){this.source.push("tmp1.data = data;")}o.push(w);this.populateCall(o,k,l||k,y)},populateCall:function(n,q,p,k){var m=["depth0"].concat(n).join(", ");var o=["depth0"].concat(p).concat(n).join(", ");var l=this.nextStack();if(this.usingKnownHelper){this.source.push(l+" = "+q+".call("+m+");")}else{this.context.aliases.functionType='"function"';this.source.push("if(typeof "+q+" === functionType) { "+l+" = "+q+".call("+m+"); }")}k.call(this,l,o,q);this.usingKnownHelper=false},invokePartial:function(k){this.pushStack("self.invokePartial("+this.nameLookup("partials",k,"partial")+", '"+k+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(k){var l=this.popStack();var m=this.topStack();this.source.push(m+"['"+k+"'] = "+l+";")},compiler:f,compileChildren:function(k,o){var q=k.children,t,s;for(var p=0,m=q.length;p<m;p++){t=q[p];s=new this.compiler();this.context.programs.push("");var n=this.context.programs.length;t.index=n;t.name="program"+n;this.context.programs[n]=s.compile(t,o,this.context)}},programExpression:function(m){if(m==null){return"self.noop"}var q=this.environment.children[m],p=q.depths.list;var o=[q.index,q.name,"data"];for(var n=0,k=p.length;n<k;n++){depth=p[n];if(depth===1){o.push("depth0")}else{o.push("depth"+(depth-1))}}if(p.length===0){return"self.program("+o.join(", ")+")"}else{o.shift();return"self.programWithDepth("+o.join(", ")+")"}},register:function(k,l){this.useRegister(k);this.source.push(k+" = "+l+";")},useRegister:function(k){if(!this.context.registers[k]){this.context.registers[k]=true;this.context.registers.list.push(k)}},pushStack:function(k){this.source.push(this.nextStack()+" = "+k+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(k){return'"'+k.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var a=("break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false").split(" ");var e=f.RESERVED_WORDS={};for(var c=0,b=a.length;c<b;c++){e[a[c]]=true}f.isValidJavaScriptVariableName=function(k){if(!f.RESERVED_WORDS[k]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(k)){return true}return false}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.precompile=function(e,c){c=c||{};var b=Handlebars.parse(e);var a=new Handlebars.Compiler().compile(b,c);return new Handlebars.JavaScriptCompiler().compile(a,c)};Handlebars.compile=function(b,a){a=a||{};var e;function c(){var h=Handlebars.parse(b);var g=new Handlebars.Compiler().compile(h,a);var f=new Handlebars.JavaScriptCompiler().compile(g,a,undefined,true);return Handlebars.template(f)}return function(g,f){if(!e){e=c()}return e.call(this,g,f)}};Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,f,g){var c=this.programs[e];if(g){return Handlebars.VM.program(f,g)}else{if(c){return c}else{c=this.programs[e]=Handlebars.VM.program(f);return c}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(e,c){c=c||{};return a.call(b,Handlebars,e,c.helpers,c.partials,c.data)}},programWithDepth:function(b,e,c){var a=Array.prototype.slice.call(arguments,2);return function(g,f){f=f||{};return b.apply(this,[g,f.data||e].concat(a))}},program:function(a,b){return function(e,c){c=c||{};return a(e,c.data||b)}},noop:function(){return""},invokePartial:function(a,b,e,f,c){if(a===undefined){throw new Handlebars.Exception("The partial "+b+" could not be found")}else{if(a instanceof Function){return a(e,{helpers:f,partials:c})}else{if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in vm mode")}else{c[b]=Handlebars.compile(a);return c[b](e,{helpers:f,partials:c})}}}}};Handlebars.template=Handlebars.VM.template;sc_require("handlebars");SC.Handlebars={};SC.Handlebars.Compiler=function(){};SC.Handlebars.Compiler.prototype=SC.beget(Handlebars.Compiler.prototype);SC.Handlebars.Compiler.prototype.compiler=SC.Handlebars.Compiler;SC.Handlebars.JavaScriptCompiler=function(){};SC.Handlebars.JavaScriptCompiler.prototype=SC.beget(Handlebars.JavaScriptCompiler.prototype);SC.Handlebars.JavaScriptCompiler.prototype.compiler=SC.Handlebars.JavaScriptCompiler;SC.Handlebars.JavaScriptCompiler.prototype.nameLookup=function(c,a,b){if(b==="context"){return"SC.get("+c+", "+this.quotedString(a)+")"}else{return Handlebars.JavaScriptCompiler.prototype.nameLookup.call(this,c,a,b)}};SC.Handlebars.Compiler.prototype.mustache=function(a){if(a.params.length||a.hash){return Handlebars.Compiler.prototype.mustache.call(this,a)}else{var b=new Handlebars.AST.IdNode(["bind"]);if(a.escaped){a.hash=a.hash||new Handlebars.AST.HashNode([]);a.hash.pairs.push(["escaped",new Handlebars.AST.StringNode("true")])}a=new Handlebars.AST.MustacheNode([b].concat([a.id]),a.hash,!a.escaped);return Handlebars.Compiler.prototype.mustache.call(this,a)}};SC.Handlebars.compile=function(f){var c=Handlebars.parse(f);var e={data:true,stringParams:true};var b=new SC.Handlebars.Compiler().compile(c,e);var a=new SC.Handlebars.JavaScriptCompiler().compile(b,e,undefined,true);return Handlebars.template(a)};Handlebars.registerHelper("helperMissing",function(c,b){var a;a="%@ Handlebars error: Could not find property '%@' on object %@.";throw a.fmt(b.data.view,c,this)});sc_require("ext/handlebars");(function(){var a=function(n,o,k,b){var f=o.data,l=o.fn,e=o.inverse,m=f.view;if(this.isObservable){var g=m.createChildView(SC._BindableSpan,{preserveContext:k,shouldDisplayFunc:b,displayTemplate:l,inverseTemplate:e,property:n,previousContext:this,tagName:(o.hash.tagName||"span"),isEscaped:o.hash.escaped});var j,h;m.get("childViews").push(g);j=function(){if(g.get("layer")){g.rerender()}else{this.removeObserver(n,h)}};h=function(){this.invokeOnce(j)};this.addObserver(n,h);var c=g.renderContext(g.get("tagName"));g.renderToContext(c);return new Handlebars.SafeString(c.join())}else{return SC.getPath(this,n)}};Handlebars.registerHelper("bind",function(c,b){return a.call(this,c,b,false,function(e){return !SC.none(e)})});Handlebars.registerHelper("boundIf",function(c,b){if(b){return a.call(this,c,b,true,function(e){if(SC.typeOf(e)===SC.T_ARRAY){if(e.length!==0){return true}return false}else{return !!e}})}else{throw"Cannot use boundIf helper without a block."}})})();Handlebars.registerHelper("with",function(b,a){return Handlebars.helpers.bind.call(a.contexts[0],b,a)});Handlebars.registerHelper("if",function(b,a){return Handlebars.helpers.boundIf.call(a.contexts[0],b,a)});Handlebars.registerHelper("unless",function(c,b){var e=b.fn,a=b.inverse;b.fn=a;b.inverse=e;return Handlebars.helpers.boundIf.call(b.contexts[0],c,b)});Handlebars.registerHelper("bindAttr",function(g){var f=g.hash;var b=g.data.view;var e=[];var c=jQuery.uuid++;var j=f["class"];if(j!=null){var a=SC.Handlebars.bindClasses(this,j,b,c);e.push('class="'+a.join(" ")+'"');delete f["class"]}var h=SC.keys(f);h.forEach(function(k){var o=f[k];var n=this.getPath(o);var m,l;m=function m(){var p=this.getPath(o);var s=b.$("[data-handlebars-id='"+c+"']");if(s.length===0){this.removeObserver(o,l);return}var q=s.attr(k);if(p===NO&&q){s.removeAttr(k)}else{if(p===YES&&q!==k){s.attr(k,k)}else{if(q!==p){s.attr(k,p)}}}};l=function(){this.invokeOnce(m)};this.addObserver(o,l);if(n===YES){n=k}if(n!==NO){if(SC.typeOf(n)===SC.T_STRING){n=n.replace(/"/g,"&quot;")}e.push(k+'="'+n+'"')}},this);e.push('data-handlebars-id="'+c+'"');return new Handlebars.SafeString(e.join(" "))});SC.Handlebars.bindClasses=function(b,j,h,a){var g=[],f,k,c;var e=function(l){var m=b.getPath(l);if(m===YES){return SC.String.dasherize(l.split(".").get("lastObject"))}else{if(m!==NO&&m!==undefined&&m!==null){return m}else{return null}}};j.split(" ").forEach(function(o){var n;var m,l;m=function(){f=e(o);c=a?h.$("[data-handlebars-id='"+a+"']"):h.$();if(c.length===0){b.removeObserver(o,l)}else{if(n){c.removeClass(n)}if(f){c.addClass(f);n=f}else{n=null}}};l=function(){this.invokeOnce(m)};b.addObserver(o,l);k=e(o);if(k){g.push(k);n=k}});return g};sc_require("ext/handlebars");Handlebars.registerHelper("collection",function(m,n){var l=n.fn;var g=n.data;var e=n.inverse;var f=n.hash;var h,a;h=m?SC.getPath(this,m)||SC.getPath(m):SC.TemplateCollectionView;var k={};if(f){var c={},j;for(var b in f){if(f.hasOwnProperty(b)){j=b.match(/^item(.)(.*)$/);if(j){c[j[1].toLowerCase()+j[2]]=f[b];delete f[b]}}}k=SC.clone(f);k.itemViewOptions=c}if(l){k.itemViewTemplate=l}if(e){k.inverseTemplate=e}if(h.isClass){a=h.extend(k)}else{a=SC.mixin(h,k)}n.fn=function(){return""};return Handlebars.helpers.view.call(this,a,n)});Handlebars.registerHelper("each",function(b,a){a.hash.contentBinding=SC.Binding.from("*"+b,this).oneWay();a.hash.itemContextProperty="content";return Handlebars.helpers.collection.call(this,null,a)});sc_require("ext/handlebars");Handlebars.registerHelper("loc",function(a){return SC.String.loc(a)});sc_require("ext/handlebars");SC.Handlebars.ViewHelper=SC.Object.create({helper:function(n,o,p){var c=p.inverse;var f=p.data;var l=f.view;var k=p.fn;var e=p.hash;var b;if(o.isClass||o.isObject){b=o;if(!b){throw"Null or undefined object was passed to the #view helper. Did you mean to pass a property path string?"}}else{if(o.charAt(0)==="."){b=SC.objectForPropertyPath(o.slice(1),l)}else{b=SC.getPath(n,o);if(!b){b=SC.getPath(o)}}if(!b){throw"Unable to find view at path '"+o+"'"}}if(e.id){e.layerId=e.id}var m={id:e.id,"class":e["class"],classBinding:e.classBinding};delete e.id;delete e["class"];delete e.classBinding;if(b.isClass){b=b.extend(e)}else{SC.mixin(b,e)}var h=f.view;var j=h.get("childViews");var g=h.createChildView(b);if(k){g.template=k}j.pushObject(g);var a=SC.RenderContext(g.get("tagName"));this.applyAttributes(m,g,a);g.applyAttributesToContext(a);g.render(a,YES);return new Handlebars.SafeString(a.join())},applyAttributes:function(a,g,b){var f=a.id;var e=a["class"];if(e){b.addClass(e.split(" "))}if(f){g.set("layerId",f);b.id(f)}var c=a.classBinding;if(c){SC.Handlebars.bindClasses(g,c,g).forEach(function(h){b.setClass(h,YES)})}}});Handlebars.registerHelper("view",function(b,a){return SC.Handlebars.ViewHelper.helper(this,b,a)});sc_require("handlebars");sc_require("ext/handlebars");sc_require("ext/handlebars/bind");sc_require("ext/handlebars/collection");sc_require("ext/handlebars/localization");sc_require("ext/handlebars/view");SC.TEMPLATES=SC.Object.create();SC.TemplateView=SC.CoreView.extend({acceptsFirstResponder:YES,templateName:null,templates:SC.TEMPLATES,template:function(b,e){if(e!==undefined){return e}var a=this.get("templateName"),c=this.get("templates").get(a);if(!c){return function(){return""}}return c}.property("templateName").cacheable(),context:function(a,b){if(b!==undefined){return b}return this}.property().cacheable(),render:function(b){var f,a,c=this.get("template"),e=this.get("context");this._didRenderChildViews=YES;f={view:this,isRenderData:true};a=c(e,{data:f});b.push(a)},update:function(){},mouseDown:function(){if(this.mouseUp){return YES}return NO}});sc_require("views/template");SC.Button=SC.TemplateView.extend(SC.ActionSupport,{classNames:["sc-button"],mouseDown:function(){this.set("isActive",true);this._isMouseDown=YES},mouseExited:function(){this.set("isActive",false)},mouseEntered:function(){if(this._isMouseDown){this.set("isActive",true)}},rootResponder:function(){var a=this.get("pane");return a.get("rootResponder")}.property("pane").cacheable(),mouseUp:function(a){if(this.get("isActive")){this.fireAction();this.set("isActive",false)}this._isMouseDown=NO},touchStart:function(a){this.mouseDown(a)},touchEnd:function(a){this.mouseUp(a)}});sc_require("views/template");SC.Checkbox=SC.TemplateView.extend({title:null,value:null,displayTitle:function(){var a=this.get("title");return a?SC.String.loc(a):null}.property("title").cacheable(),classNames:["sc-checkbox"],template:SC.Handlebars.compile('<label><input type="checkbox">{{displayTitle}}</label>'),didCreateLayer:function(){var a=this;this.$("input").bind("change",function(){a.domValueDidChange(this)})},domValueDidChange:function(a){this.set("value",$(a).prop("checked"))},value:function(a,b){if(b!==undefined){this.$("input").prop("checked",b)}else{b=this.$("input").prop("checked")}return b}.property()});SC.CheckboxSupport={didCreateLayer:function(){this.$("input").change(jQuery.proxy(function(){SC.RunLoop.begin();this.notifyPropertyChange("value");SC.RunLoop.end()},this))},value:function(a,b){if(b!==undefined){this.$("input").prop("checked",b)}else{b=this.$("input").prop("checked")}return b}.property().idempotent()};sc_require("views/template");SC.TextFieldSupport={$input:function(){return this.$("input")},_value:null,value:function(b,c){var a=this.$input();if(c!==undefined){if(this._value!==c){this._value=c}if(a.val()!==c){a.val(c)}}else{if(a.length>0){c=this._value=a.val()}else{c=this._value}}return c}.property().idempotent(),didCreateLayer:function(){var b=this.$input(),a=this;b.val(this._value);if(SC.browser.isIE){SC.Event.add(b,"focusin",this,this.focusIn);SC.Event.add(b,"focusout",this,this.focusOut)}else{SC.Event.add(b,"focus",this,this.focusIn);SC.Event.add(b,"blur",this,this.focusOut)}},willDestroyLayerMixin:function(){var a=this.$input();if(SC.browser.isIE){SC.Event.remove(a,"focusin",this,this.focusIn);SC.Event.remove(a,"focusout",this,this.focusOut)}else{SC.Event.remove(a,"focus",this,this.focusIn);SC.Event.remove(a,"blur",this,this.focusOut)}},focusIn:function(a){this.becomeFirstResponder();this.tryToPerform("focus",a)},focusOut:function(a){this.resignFirstResponder();this.tryToPerform("blur",a)},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();return YES},willLoseFirstResponder:function(){this.notifyPropertyChange("value")},domValueDidChange:function(a){this.set("value",a.val())},keyUp:function(a){this.domValueDidChange(this.$input());if(a.keyCode===SC.Event.KEY_RETURN){return this.tryToPerform("insertNewline",a)}else{if(a.keyCode===SC.Event.KEY_ESC){return this.tryToPerform("cancel",a)}}},selectStart:function(){return true}};SC.TextField=SC.TemplateView.extend(SC.TextFieldSupport,{classNames:["sc-text-field"],isMultiline:NO,template:function(){return SC.Handlebars.compile(this.get("isMultiline")?"<textarea></textarea>":'<input type="text">')}.property("isMultiline").cacheable(),$input:function(){var a=this.get("isMultiline")?"textarea":"input";return this.$(a)}});SC.TemplatePane=SC.Object.extend({});SC.TemplatePane.mixin({append:function(a){var b=SC.MainPane.extend({childViews:["contentView"],contentView:SC.TemplateView.design(a),touchStart:function(c){c.allowDefault()},touchesDragged:function(c,e){c.allowDefault()},touchEnd:function(c){c.allowDefault()}});b=b.create().append();b.awake();return b}});sc_require("views/template");SC._BindableSpan=SC.TemplateView.extend({tagName:"span",shouldDisplayFunc:null,preserveContext:NO,displayTemplate:null,inverseTemplate:null,property:null,render:function(e){var j=this.get("isEscaped");var a=this.get("shouldDisplayFunc"),g=this.get("property"),f=this.get("preserveContext"),b=this.get("previousContext");var c=this.get("inverseTemplate"),h=this.get("displayTemplate");var k;if(g===""){k=b}else{k=b.getPath(g)}if(a(k)){this.set("template",h);if(f){this.set("context",b)}else{if(h){this.set("context",k)}else{if(k==null){k=""}else{k=String(k)}if(j){k=Handlebars.Utils.escapeExpression(k)}e.push(k);return}}}else{if(c){this.set("template",c);if(f){this.set("context",b)}else{this.set("context",k)}}else{this.set("template",function(){return""})}}return arguments.callee.base.apply(this,arguments)},rerender:function(){var b,a,f,g;f=this.get("childViews");a=f.get("length");for(b=a-1;b>=0;b--){g=f[b];g.$().remove();g.removeFromParent();g.destroy()}var c=this.renderContext(this.get("tagName"));var e;this.renderToContext(c);e=c.element();this.$().replaceWith(e);this.set("layer",e);this._notifyDidCreateLayer()}});sc_require("views/template");SC.TemplateCollectionView=SC.TemplateView.extend({tagName:"ul",content:null,template:SC.Handlebars.compile(""),emptyView:null,init:function(){var a=arguments.callee.base.apply(this,arguments);this._sctcv_contentDidChange();return a},didCreateLayer:function(){if(this._sctcv_layerCreated){return}this._sctcv_layerCreated=true;var a=this.get("content");if(a){this.arrayContentDidChange(0,0,a.get("length"))}},itemView:"SC.TemplateView",itemViewTemplate:null,itemViewTemplateName:null,inverseTemplate:function(b,e){if(e!==undefined){return e}var a=this.get("inverseTemplateName"),c=this.get("templates").get(a);if(!c){return function(){return""}}return c}.property("inverseTemplateName").cacheable(),inverseTemplateName:null,itemContext:null,itemViewClass:function(){var c=this.get("itemView");var a=this.get("itemViewTemplate");var e=this.get("itemViewTemplateName");var b={};if(SC.typeOf(c)===SC.T_STRING){c=SC.objectForPropertyPath(c)}if(!a&&e){a=this.get("templates").get(e)}if(a){b.template=a}if(c.prototype.tagName===SC.TemplateView.prototype.tagName){b.tagName=this.get("itemTagName")}return c.extend(b)}.property("itemView").cacheable(),_sctcv_contentDidChange:function(){this.$().empty();var c=this._content,a=0;var e=this.get("content"),b=0;if(c){c.removeArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"});a=c.get("length")}if(e){e.addArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"});b=e.get("length")}this.arrayContentWillChange(0,a,b);this._content=this.get("content");this.arrayContentDidChange(0,a,b)}.observes("content"),arrayContentWillChange:function(j,e,g){var c=this.get("emptyView");if(c){c.$().remove();c.removeFromParent()}var f=this.get("childViews"),h,b,a;a=f.get("length");for(b=j+e-1;b>=j;b--){h=f[b];if(h){h.$().remove();h.removeFromParent();h.destroy()}}},arrayContentDidChange:function(f,n,w){if(!this.get("layer")){return}var o=this.get("content"),g=this.get("itemViewClass"),q=this.get("childViews"),a=[],u,v,j,s,h,t,m,l,p;if(o){var k=o.slice(f,f+w);j=this.get("itemViewOptions")||{};s=this.$();h=s.find("li")[f-1]||null;p=k.get("length");var e={id:j.id,"class":j["class"],classBinding:j.classBinding};u=function(x){arguments.callee.base.apply(this,arguments);SC.Handlebars.ViewHelper.applyAttributes(e,this,x)};j=SC.clone(j);delete j.id;delete j["class"];delete j.classBinding;for(l=0;l<p;l++){t=k.objectAt(l);v=this.createChildView(g.extend(j,{content:t,render:u,tagName:j.tagName||g.prototype.tagName}));var c=v.get("contextProperty");if(c){v.set("context",v.get(c))}m=v.createLayer().$();if(!h){s.append(m)}else{m.insertAfter(h)}h=m;a.push(v)}q.replace(f,0,a)}var b=this.get("inverseTemplate");if(q.get("length")===0&&b){v=this.createChildView(SC.TemplateView.extend({template:b,content:this}));this.set("emptyView",v);v.createLayer().$().appendTo(s);this.childViews=[v]}this.invokeLast("invalidateFrame")},itemTagName:function(){switch(this.get("tagName")){case"dl":return"dt";case"ul":case"ol":return"li";case"table":case"thead":case"tbody":case"tfoot":return"tr";case"select":return"option";default:return SC.TemplateView.prototype.tagName}}.property("tagName"),invalidateFrame:function(){this.notifyPropertyChange("frame")}});
/*!
 * ==========================================================================
 * SproutCore -- JavaScript Application Framework
 * Copyright ©2008-2011 Apple Inc. All rights reserved.
 * Copyright 2006-2011, Strobe Inc. and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a 
 * copy of this software and associated documentation files (the "Software"), 
 * to deal in the Software without restriction, including without limitation 
 * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
 * and/or sell copies of the Software, and to permit persons to whom the 
 * Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 * SproutCore and the SproutCore logo are trademarks of Strobe Inc.
 * 
 * For more information about SproutCore, visit http://www.sproutcore.com
 * 
 * ==========================================================================
 */
/*!
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
(function(){function aJ(){if(aJ.is(arguments[0],a8)){var b=arguments[0],e=G[bC](aJ,b.splice(0,3+aJ.is(b[0],aG))),S=e.set();for(var R=0,bI=b[t];R<bI;R++){var E=b[R]||{};bq[ah](E.type)&&S[k](e[E.type]().attr(E))}return S}return G[bC](aJ,arguments)}aJ.version="1.5.2";var a=/[, ]+/,bq={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},bo=/\{(\d+)\}/g,bF="prototype",ah="hasOwnProperty",ab=document,aR=window,s={was:Object[bF][ah].call(aR,"Raphael"),is:aR.Raphael},bA=function(){this.customAttributes={}},a0,bl="appendChild",bC="apply",bx="concat",X="createTouch" in ab,aQ="",aI=" ",bD=String,J="split",T="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[J](aI),br={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},aX="join",t="length",bH=bD[bF].toLowerCase,ap=Math,m=ap.max,bj=ap.min,ar=ap.abs,bm=ap.pow,aN=ap.PI,aG="number",ag="string",a8="array",a1="toString",a5="fill",aU=Object[bF][a1],bu={},k="push",h=/^url\(['"]?([^\)]+?)['"]?\)$/i,H=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,aq={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ae=ap.round,F="setAttribute",ak=parseFloat,U=parseInt,a6=" progid:DXImageTransform.Microsoft",bp=bD[bF].toUpperCase,q={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},an={along:"along",blur:aG,"clip-rect":"csv",cx:aG,cy:aG,fill:"colour","fill-opacity":aG,"font-size":aG,height:aG,opacity:aG,path:"path",r:aG,rotation:"csv",rx:aG,ry:aG,scale:"csv",stroke:"colour","stroke-opacity":aG,"stroke-width":aG,translation:"csv",width:aG,x:aG,y:aG},bt="replace",bg=/^(from|to|\d+%?)$/,be=/\s*,\s*/,n={hs:1,rg:1},bb=/,?([achlmqrstvxz]),?/gi,aS=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,aH=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,aP=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,bn=function(E,e){return E.key-e.key};aJ.type=(aR.SVGAngle||ab.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(aJ.type=="VML"){var ay=ab.createElement("div"),aC;ay.innerHTML='<v:shape adj="1"/>';aC=ay.firstChild;aC.style.behavior="url(#default#VML)";if(!(aC&&typeof aC.adj=="object")){return aJ.type=null}ay=null}aJ.svg=!(aJ.vml=aJ.type=="VML");bA[bF]=aJ[bF];a0=bA[bF];aJ._id=0;aJ._oid=0;aJ.fn={};aJ.is=function(e,b){b=bH.call(b);if(b=="finite"){return !aq[ah](+e)}return(b=="null"&&e===null)||(b==typeof e)||(b=="object"&&e===Object(e))||(b=="array"&&Array.isArray&&Array.isArray(e))||aU.call(e).slice(8,-1).toLowerCase()==b};aJ.angle=function(S,bJ,E,bI,e,R){if(e==null){var b=S-E,bK=bJ-bI;if(!b&&!bK){return 0}return((b<0)*180+ap.atan(-bK/-b)*180/aN+360)%360}else{return aJ.angle(S,bJ,e,R)-aJ.angle(E,bI,e,R)}};aJ.rad=function(b){return b%360*aN/180};aJ.deg=function(b){return b*180/aN%360};aJ.snapTo=function(e,R,b){b=aJ.is(b,"finite")?b:10;if(aJ.is(e,a8)){var E=e.length;while(E--){if(ar(e[E]-R)<=b){return e[E]}}}else{e=+e;var S=R%e;if(S<b){return R-S}if(S>e-b){return R-S+e}}return R};function j(){var e=[],b=0;for(;b<32;b++){e[b]=(~~(ap.random()*16))[a1](16)}e[12]=4;e[16]=((e[16]&3)|8)[a1](16);return"r-"+e[aX]("")}aJ.setWindow=function(b){aR=b;ab=aR.document};var ba=function(R){if(aJ.vml){var b=/^\s+|\s+$/g;var bI;try{var bJ=new ActiveXObject("htmlfile");bJ.write("<body>");bJ.close();bI=bJ.body}catch(bK){bI=createPopup().document.body}var E=bI.createTextRange();ba=aB(function(bL){try{bI.style.color=bD(bL)[bt](b,aQ);var bM=E.queryCommandValue("ForeColor");bM=((bM&255)<<16)|(bM&65280)|((bM&16711680)>>>16);return"#"+("000000"+bM[a1](16)).slice(-6)}catch(bN){return"none"}})}else{var S=ab.createElement("i");S.title="Rapha\xebl Colour Picker";S.style.display="none";ab.body[bl](S);ba=aB(function(e){S.style.color=e;return ab.defaultView.getComputedStyle(S,aQ).getPropertyValue("color")})}return ba(R)},aD=function(){return"hsb("+[this.h,this.s,this.b]+")"},N=function(){return"hsl("+[this.h,this.s,this.l]+")"},C=function(){return this.hex};aJ.hsb2rgb=function(R,E,e,S){if(aJ.is(R,"object")&&"h" in R&&"s" in R&&"b" in R){e=R.b;E=R.s;R=R.h;S=R.o}return aJ.hsl2rgb(R,E,e/2,S)};aJ.hsl2rgb=function(bJ,bQ,R,E){if(aJ.is(bJ,"object")&&"h" in bJ&&"s" in bJ&&"l" in bJ){R=bJ.l;bQ=bJ.s;bJ=bJ.h}if(bJ>1||bQ>1||R>1){bJ/=360;bQ/=100;R/=100}var bO={},bL=["r","g","b"],bK,bN,bI,e,bM,bP;if(!bQ){bO={r:R,g:R,b:R}}else{if(R<0.5){bK=R*(1+bQ)}else{bK=R+bQ-R*bQ}bN=2*R-bK;for(var S=0;S<3;S++){bI=bJ+1/3*-(S-1);bI<0&&bI++;bI>1&&bI--;if(bI*6<1){bO[bL[S]]=bN+(bK-bN)*6*bI}else{if(bI*2<1){bO[bL[S]]=bK}else{if(bI*3<2){bO[bL[S]]=bN+(bK-bN)*(2/3-bI)*6}else{bO[bL[S]]=bN}}}}}bO.r*=255;bO.g*=255;bO.b*=255;bO.hex="#"+(16777216|bO.b|(bO.g<<8)|(bO.r<<16)).toString(16).slice(1);aJ.is(E,"finite")&&(bO.opacity=E);bO.toString=C;return bO};aJ.rgb2hsb=function(b,e,bK){if(e==null&&aJ.is(b,"object")&&"r" in b&&"g" in b&&"b" in b){bK=b.b;e=b.g;b=b.r}if(e==null&&aJ.is(b,ag)){var bM=aJ.getRGB(b);b=bM.r;e=bM.g;bK=bM.b}if(b>1||e>1||bK>1){b/=255;e/=255;bK/=255}var bJ=m(b,e,bK),E=bj(b,e,bK),S,R,bI=bJ;if(E==bJ){return{h:0,s:0,b:bJ,toString:aD}}else{var bL=(bJ-E);R=bL/bJ;if(b==bJ){S=(e-bK)/bL}else{if(e==bJ){S=2+((bK-b)/bL)}else{S=4+((b-e)/bL)}}S/=6;S<0&&S++;S>1&&S--}return{h:S,s:R,b:bI,toString:aD}};aJ.rgb2hsl=function(e,E,bJ){if(E==null&&aJ.is(e,"object")&&"r" in e&&"g" in e&&"b" in e){bJ=e.b;E=e.g;e=e.r}if(E==null&&aJ.is(e,ag)){var bN=aJ.getRGB(e);e=bN.r;E=bN.g;bJ=bN.b}if(e>1||E>1||bJ>1){e/=255;E/=255;bJ/=255}var bI=m(e,E,bJ),R=bj(e,E,bJ),S,bM,b=(bI+R)/2,bL;if(R==bI){bL={h:0,s:0,l:b}}else{var bK=bI-R;bM=b<0.5?bK/(bI+R):bK/(2-bI-R);if(e==bI){S=(E-bJ)/bK}else{if(E==bI){S=2+(bJ-e)/bK}else{S=4+(e-E)/bK}}S/=6;S<0&&S++;S>1&&S--;bL={h:S,s:bM,l:b}}bL.toString=N;return bL};aJ._path2string=function(){return this.join(",")[bt](bb,"$1")};function aB(R,e,b){function E(){var S=Array[bF].slice.call(arguments,0),bJ=S[aX]("\u25ba"),bI=E.cache=E.cache||{},bK=E.count=E.count||[];if(bI[ah](bJ)){return b?b(bI[bJ]):bI[bJ]}bK[t]>=1000&&delete bI[bK.shift()];bK[k](bJ);bI[bJ]=R[bC](e,S);return b?b(bI[bJ]):bI[bJ]}return E}aJ.getRGB=aB(function(b){if(!b||!!((b=bD(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1}}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none"}}!(n[ah](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=ba(b));var S,e,E,bJ,R,bL,bK,bI=b.match(H);if(bI){if(bI[2]){bJ=U(bI[2].substring(5),16);E=U(bI[2].substring(3,5),16);e=U(bI[2].substring(1,3),16)}if(bI[3]){bJ=U((bL=bI[3].charAt(3))+bL,16);E=U((bL=bI[3].charAt(2))+bL,16);e=U((bL=bI[3].charAt(1))+bL,16)}if(bI[4]){bK=bI[4][J](be);e=ak(bK[0]);bK[0].slice(-1)=="%"&&(e*=2.55);E=ak(bK[1]);bK[1].slice(-1)=="%"&&(E*=2.55);bJ=ak(bK[2]);bK[2].slice(-1)=="%"&&(bJ*=2.55);bI[1].toLowerCase().slice(0,4)=="rgba"&&(R=ak(bK[3]));bK[3]&&bK[3].slice(-1)=="%"&&(R/=100)}if(bI[5]){bK=bI[5][J](be);e=ak(bK[0]);bK[0].slice(-1)=="%"&&(e*=2.55);E=ak(bK[1]);bK[1].slice(-1)=="%"&&(E*=2.55);bJ=ak(bK[2]);bK[2].slice(-1)=="%"&&(bJ*=2.55);(bK[0].slice(-3)=="deg"||bK[0].slice(-1)=="\xb0")&&(e/=360);bI[1].toLowerCase().slice(0,4)=="hsba"&&(R=ak(bK[3]));bK[3]&&bK[3].slice(-1)=="%"&&(R/=100);return aJ.hsb2rgb(e,E,bJ,R)}if(bI[6]){bK=bI[6][J](be);e=ak(bK[0]);bK[0].slice(-1)=="%"&&(e*=2.55);E=ak(bK[1]);bK[1].slice(-1)=="%"&&(E*=2.55);bJ=ak(bK[2]);bK[2].slice(-1)=="%"&&(bJ*=2.55);(bK[0].slice(-3)=="deg"||bK[0].slice(-1)=="\xb0")&&(e/=360);bI[1].toLowerCase().slice(0,4)=="hsla"&&(R=ak(bK[3]));bK[3]&&bK[3].slice(-1)=="%"&&(R/=100);return aJ.hsl2rgb(e,E,bJ,R)}bI={r:e,g:E,b:bJ};bI.hex="#"+(16777216|bJ|(E<<8)|(e<<16)).toString(16).slice(1);aJ.is(R,"finite")&&(bI.opacity=R);return bI}return{r:-1,g:-1,b:-1,hex:"none",error:1}},aJ);aJ.getColor=function(e){var E=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||0.75},b=this.hsb2rgb(E.h,E.s,E.b);E.h+=0.075;if(E.h>1){E.h=0;E.s-=0.2;E.s<=0&&(this.getColor.start={h:0,s:1,b:E.b})}return b.hex};aJ.getColor.reset=function(){delete this.start};aJ.parsePathString=aB(function(b){if(!b){return null}var E={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=[];if(aJ.is(b,a8)&&aJ.is(b[0],a8)){e=aT(b)}if(!e[t]){bD(b)[bt](aS,function(S,R,bK){var bJ=[],bI=bH.call(R);bK[bt](aH,function(bM,bL){bL&&bJ[k](+bL)});if(bI=="m"&&bJ[t]>2){e[k]([R][bx](bJ.splice(0,2)));bI="l";R=R=="m"?"l":"L"}while(bJ[t]>=E[bI]){e[k]([R][bx](bJ.splice(0,E[bI])));if(!E[bI]){break}}})}e[a1]=aJ._path2string;return e});aJ.findDotsAtSegment=function(e,b,bX,bV,bJ,S,bL,bK,bR){var bP=1-bR,bO=bm(bP,3)*e+bm(bP,2)*3*bR*bX+bP*3*bR*bR*bJ+bm(bR,3)*bL,bM=bm(bP,3)*b+bm(bP,2)*3*bR*bV+bP*3*bR*bR*S+bm(bR,3)*bK,bT=e+2*bR*(bX-e)+bR*bR*(bJ-2*bX+e),bS=b+2*bR*(bV-b)+bR*bR*(S-2*bV+b),bW=bX+2*bR*(bJ-bX)+bR*bR*(bL-2*bJ+bX),bU=bV+2*bR*(S-bV)+bR*bR*(bK-2*S+bV),bQ=(1-bR)*e+bR*bX,bN=(1-bR)*b+bR*bV,R=(1-bR)*bJ+bR*bL,E=(1-bR)*S+bR*bK,bI=(90-ap.atan((bT-bW)/(bS-bU))*180/aN);(bT>bW||bS<bU)&&(bI+=180);return{x:bO,y:bM,m:{x:bT,y:bS},n:{x:bW,y:bU},start:{x:bQ,y:bN},end:{x:R,y:E},alpha:bI}};var aj=aB(function(bN){if(!bN){return{x:0,y:0,width:0,height:0}}bN=W(bN);var bK=0,bJ=0,R=[],e=[],E;for(var S=0,bM=bN[t];S<bM;S++){E=bN[S];if(E[0]=="M"){bK=E[1];bJ=E[2];R[k](bK);e[k](bJ)}else{var bI=a7(bK,bJ,E[1],E[2],E[3],E[4],E[5],E[6]);R=R[bx](bI.min.x,bI.max.x);e=e[bx](bI.min.y,bI.max.y);bK=E[5];bJ=E[6]}}var b=bj[bC](0,R),bL=bj[bC](0,e);return{x:b,y:bL,width:m[bC](0,R)-b,height:m[bC](0,e)-bL}}),aT=function(bI){var E=[];if(!aJ.is(bI,a8)||!aJ.is(bI&&bI[0],a8)){bI=aJ.parsePathString(bI)}for(var e=0,R=bI[t];e<R;e++){E[e]=[];for(var b=0,S=bI[e][t];b<S;b++){E[e][b]=bI[e][b]}}E[a1]=aJ._path2string;return E},av=aB(function(R){if(!aJ.is(R,a8)||!aJ.is(R&&R[0],a8)){R=aJ.parsePathString(R)}var bM=[],bO=0,bN=0,bR=0,bQ=0,E=0;if(R[0][0]=="M"){bO=R[0][1];bN=R[0][2];bR=bO;bQ=bN;E++;bM[k](["M",bO,bN])}for(var bJ=E,bS=R[t];bJ<bS;bJ++){var b=bM[bJ]=[],bP=R[bJ];if(bP[0]!=bH.call(bP[0])){b[0]=bH.call(bP[0]);switch(b[0]){case"a":b[1]=bP[1];b[2]=bP[2];b[3]=bP[3];b[4]=bP[4];b[5]=bP[5];b[6]=+(bP[6]-bO).toFixed(3);b[7]=+(bP[7]-bN).toFixed(3);break;case"v":b[1]=+(bP[1]-bN).toFixed(3);break;case"m":bR=bP[1];bQ=bP[2];default:for(var bI=1,bK=bP[t];bI<bK;bI++){b[bI]=+(bP[bI]-((bI%2)?bO:bN)).toFixed(3)}}}else{b=bM[bJ]=[];if(bP[0]=="m"){bR=bP[1]+bO;bQ=bP[2]+bN}for(var S=0,e=bP[t];S<e;S++){bM[bJ][S]=bP[S]}}var bL=bM[bJ][t];switch(bM[bJ][0]){case"z":bO=bR;bN=bQ;break;case"h":bO+=+bM[bJ][bL-1];break;case"v":bN+=+bM[bJ][bL-1];break;default:bO+=+bM[bJ][bL-2];bN+=+bM[bJ][bL-1]}}bM[a1]=aJ._path2string;return bM},0,aT),z=aB(function(R){if(!aJ.is(R,a8)||!aJ.is(R&&R[0],a8)){R=aJ.parsePathString(R)}var bL=[],bN=0,bM=0,bQ=0,bP=0,E=0;if(R[0][0]=="M"){bN=+R[0][1];bM=+R[0][2];bQ=bN;bP=bM;E++;bL[0]=["M",bN,bM]}for(var bJ=E,bR=R[t];bJ<bR;bJ++){var b=bL[bJ]=[],bO=R[bJ];if(bO[0]!=bp.call(bO[0])){b[0]=bp.call(bO[0]);switch(b[0]){case"A":b[1]=bO[1];b[2]=bO[2];b[3]=bO[3];b[4]=bO[4];b[5]=bO[5];b[6]=+(bO[6]+bN);b[7]=+(bO[7]+bM);break;case"V":b[1]=+bO[1]+bM;break;case"H":b[1]=+bO[1]+bN;break;case"M":bQ=+bO[1]+bN;bP=+bO[2]+bM;default:for(var bI=1,bK=bO[t];bI<bK;bI++){b[bI]=+bO[bI]+((bI%2)?bN:bM)}}}else{for(var S=0,e=bO[t];S<e;S++){bL[bJ][S]=bO[S]}}switch(b[0]){case"Z":bN=bQ;bM=bP;break;case"H":bN=b[1];break;case"V":bM=b[1];break;case"M":bQ=bL[bJ][bL[bJ][t]-2];bP=bL[bJ][bL[bJ][t]-1];default:bN=bL[bJ][bL[bJ][t]-2];bM=bL[bJ][bL[bJ][t]-1]}}bL[a1]=aJ._path2string;return bL},null,aT),bE=function(e,R,b,E){return[e,R,b,E,b,E]},bk=function(e,R,bJ,S,b,E){var bI=1/3,bK=2/3;return[bI*e+bK*bJ,bI*R+bK*S,bI*b+bK*bJ,bI*E+bK*S,b,E]},aa=function(bQ,cl,bZ,bX,bR,bL,R,bP,ck,bS){var bW=aN*120/180,b=aN/180*(+bR||0),b3=[],b0,ch=aB(function(cn,cq,cm){var cp=cn*ap.cos(cm)-cq*ap.sin(cm),co=cn*ap.sin(cm)+cq*ap.cos(cm);return{x:cp,y:co}});if(!bS){b0=ch(bQ,cl,-b);bQ=b0.x;cl=b0.y;b0=ch(bP,ck,-b);bP=b0.x;ck=b0.y;var e=ap.cos(aN/180*bR),bN=ap.sin(aN/180*bR),b5=(bQ-bP)/2,b4=(cl-ck)/2;var cf=(b5*b5)/(bZ*bZ)+(b4*b4)/(bX*bX);if(cf>1){cf=ap.sqrt(cf);bZ=cf*bZ;bX=cf*bX}var E=bZ*bZ,b8=bX*bX,ca=(bL==R?-1:1)*ap.sqrt(ar((E*b8-E*b4*b4-b8*b5*b5)/(E*b4*b4+b8*b5*b5))),bU=ca*bZ*b4/bX+(bQ+bP)/2,bT=ca*-bX*b5/bZ+(cl+ck)/2,bK=ap.asin(((cl-bT)/bX).toFixed(9)),bJ=ap.asin(((ck-bT)/bX).toFixed(9));bK=bQ<bU?aN-bK:bK;bJ=bP<bU?aN-bJ:bJ;bK<0&&(bK=aN*2+bK);bJ<0&&(bJ=aN*2+bJ);if(R&&bK>bJ){bK=bK-aN*2}if(!R&&bJ>bK){bJ=bJ-aN*2}}else{bK=bS[0];bJ=bS[1];bU=bS[2];bT=bS[3]}var bO=bJ-bK;if(ar(bO)>bW){var bV=bJ,bY=bP,bM=ck;bJ=bK+bW*(R&&bJ>bK?1:-1);bP=bU+bZ*ap.cos(bJ);ck=bT+bX*ap.sin(bJ);b3=aa(bP,ck,bZ,bX,bR,0,R,bY,bM,[bJ,bV,bU,bT])}bO=bJ-bK;var bI=ap.cos(bK),cj=ap.sin(bK),S=ap.cos(bJ),ci=ap.sin(bJ),b6=ap.tan(bO/4),b9=4/3*bZ*b6,b7=4/3*bX*b6,cg=[bQ,cl],ce=[bQ+b9*cj,cl-b7*bI],cd=[bP+b9*ci,ck-b7*S],cb=[bP,ck];ce[0]=2*cg[0]-ce[0];ce[1]=2*cg[1]-ce[1];if(bS){return[ce,cd,cb][bx](b3)}else{b3=[ce,cd,cb][bx](b3)[aX]()[J](",");var b1=[];for(var cc=0,b2=b3[t];cc<b2;cc++){b1[cc]=cc%2?ch(b3[cc-1],b3[cc],b).y:ch(b3[cc],b3[cc+1],b).x}return b1}},ad=function(e,b,R,E,bL,bK,bJ,bI,bM){var S=1-bM;return{x:bm(S,3)*e+bm(S,2)*3*bM*R+S*3*bM*bM*bL+bm(bM,3)*bJ,y:bm(S,3)*b+bm(S,2)*3*bM*E+S*3*bM*bM*bK+bm(bM,3)*bI}},a7=aB(function(R,e,bI,S,bT,bS,bP,bM){var bR=(bT-2*bI+R)-(bP-2*bT+bI),bO=2*(bI-R)-2*(bT-bI),bL=R-bI,bK=(-bO+ap.sqrt(bO*bO-4*bR*bL))/2/bR,bJ=(-bO-ap.sqrt(bO*bO-4*bR*bL))/2/bR,bN=[e,bM],bQ=[R,bP],E;ar(bK)>"1e12"&&(bK=0.5);ar(bJ)>"1e12"&&(bJ=0.5);if(bK>0&&bK<1){E=ad(R,e,bI,S,bT,bS,bP,bM,bK);bQ[k](E.x);bN[k](E.y)}if(bJ>0&&bJ<1){E=ad(R,e,bI,S,bT,bS,bP,bM,bJ);bQ[k](E.x);bN[k](E.y)}bR=(bS-2*S+e)-(bM-2*bS+S);bO=2*(S-e)-2*(bS-S);bL=e-S;bK=(-bO+ap.sqrt(bO*bO-4*bR*bL))/2/bR;bJ=(-bO-ap.sqrt(bO*bO-4*bR*bL))/2/bR;ar(bK)>"1e12"&&(bK=0.5);ar(bJ)>"1e12"&&(bJ=0.5);if(bK>0&&bK<1){E=ad(R,e,bI,S,bT,bS,bP,bM,bK);bQ[k](E.x);bN[k](E.y)}if(bJ>0&&bJ<1){E=ad(R,e,bI,S,bT,bS,bP,bM,bJ);bQ[k](E.x);bN[k](E.y)}return{min:{x:bj[bC](0,bQ),y:bj[bC](0,bN)},max:{x:m[bC](0,bQ),y:m[bC](0,bN)}}}),W=aB(function(bR,bM){var R=z(bR),bN=bM&&z(bM),bO={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},bI=function(bT,bU){var bS,bV;if(!bT){return["C",bU.x,bU.y,bU.x,bU.y,bU.x,bU.y]}!(bT[0] in {T:1,Q:1})&&(bU.qx=bU.qy=null);switch(bT[0]){case"M":bU.X=bT[1];bU.Y=bT[2];break;case"A":bT=["C"][bx](aa[bC](0,[bU.x,bU.y][bx](bT.slice(1))));break;case"S":bS=bU.x+(bU.x-(bU.bx||bU.x));bV=bU.y+(bU.y-(bU.by||bU.y));bT=["C",bS,bV][bx](bT.slice(1));break;case"T":bU.qx=bU.x+(bU.x-(bU.qx||bU.x));bU.qy=bU.y+(bU.y-(bU.qy||bU.y));bT=["C"][bx](bk(bU.x,bU.y,bU.qx,bU.qy,bT[1],bT[2]));break;case"Q":bU.qx=bT[1];bU.qy=bT[2];bT=["C"][bx](bk(bU.x,bU.y,bT[1],bT[2],bT[3],bT[4]));break;case"L":bT=["C"][bx](bE(bU.x,bU.y,bT[1],bT[2]));break;case"H":bT=["C"][bx](bE(bU.x,bU.y,bT[1],bU.y));break;case"V":bT=["C"][bx](bE(bU.x,bU.y,bU.x,bT[1]));break;case"Z":bT=["C"][bx](bE(bU.x,bU.y,bU.X,bU.Y));break}return bT},e=function(bS,bT){if(bS[bT][t]>7){bS[bT].shift();var bU=bS[bT];while(bU[t]){bS.splice(bT++,0,["C"][bx](bU.splice(0,6)))}bS.splice(bT,1);bP=m(R[t],bN&&bN[t]||0)}},E=function(bW,bV,bT,bS,bU){if(bW&&bV&&bW[bU][0]=="M"&&bV[bU][0]!="M"){bV.splice(bU,0,["M",bS.x,bS.y]);bT.bx=0;bT.by=0;bT.x=bW[bU][1];bT.y=bW[bU][2];bP=m(R[t],bN&&bN[t]||0)}};for(var bK=0,bP=m(R[t],bN&&bN[t]||0);bK<bP;bK++){R[bK]=bI(R[bK],bO);e(R,bK);bN&&(bN[bK]=bI(bN[bK],b));bN&&e(bN,bK);E(R,bN,bO,b,bK);E(bN,R,b,bO,bK);var bJ=R[bK],bQ=bN&&bN[bK],S=bJ[t],bL=bN&&bQ[t];bO.x=bJ[S-2];bO.y=bJ[S-1];bO.bx=ak(bJ[S-4])||bO.x;bO.by=ak(bJ[S-3])||bO.y;b.bx=bN&&(ak(bQ[bL-4])||b.x);b.by=bN&&(ak(bQ[bL-3])||b.y);b.x=bN&&bQ[bL-2];b.y=bN&&bQ[bL-1]}return bN?[R,bN]:R},null,aT),x=aB(function(bL){var bK=[];for(var S=0,bM=bL[t];S<bM;S++){var b={},bJ=bL[S].match(/^([^:]*):?([\d\.]*)/);b.color=aJ.getRGB(bJ[1]);if(b.color.error){return null}b.color=b.color.hex;bJ[2]&&(b.offset=bJ[2]+"%");bK[k](b)}for(S=1,bM=bK[t]-1;S<bM;S++){if(!bK[S].offset){var e=ak(bK[S-1].offset||0),E=0;for(var R=S+1;R<bM;R++){if(bK[R].offset){E=bK[R].offset;break}}if(!E){E=100;R=bM}E=ak(E);var bI=(E-e)/(R-S+1);for(;S<R;S++){e+=bI;bK[S].offset=e+"%"}}}return bK}),aK=function(b,S,E,R){var e;if(aJ.is(b,ag)||aJ.is(b,"object")){e=aJ.is(b,ag)?ab.getElementById(b):b;if(e.tagName){if(S==null){return{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}}else{return{container:e,width:S,height:E}}}}else{return{container:1,x:b,y:S,width:E,height:R}}},bf=function(b,E){var e=this;for(var R in E){if(E[ah](R)&&!(R in b)){switch(typeof E[R]){case"function":(function(S){b[R]=b===e?S:function(){return S[bC](e,arguments)}})(E[R]);break;case"object":b[R]=b[R]||{};bf.call(this,b[R],E[R]);break;default:b[R]=E[R];break}}}},aF=function(b,e){b==e.top&&(e.top=b.prev);b==e.bottom&&(e.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},am=function(b,e){if(e.top===b){return}aF(b,e);b.next=null;b.prev=e.top;e.top.next=b;e.top=b},p=function(b,e){if(e.bottom===b){return}aF(b,e);b.next=e.bottom;b.prev=null;e.bottom.prev=b;e.bottom=b},K=function(e,b,E){aF(e,E);b==E.top&&(E.top=e);b.next&&(b.next.prev=e);e.next=b.next;e.prev=b;b.next=e},aM=function(e,b,E){aF(e,E);b==E.bottom&&(E.bottom=e);b.prev&&(b.prev.next=e);e.prev=b.prev;b.prev=e;e.next=b},A=function(b){return function(){throw new Error("Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object")}};aJ.pathToRelative=av;if(aJ.svg){a0.svgns="http://www.w3.org/2000/svg";a0.xlink="http://www.w3.org/1999/xlink";ae=function(b){return +b+(~~b===b)*0.5};var bi=function(E,b){if(b){for(var e in b){if(b[ah](e)){E[F](e,bD(b[e]))}}}else{E=ab.createElementNS(a0.svgns,E);E.style.webkitTapHighlightColor="rgba(0,0,0,0)";return E}};aJ[a1]=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var y=function(b,R){var e=bi("path");R.canvas&&R.canvas[bl](e);var E=new aV(e,R);E.type="path";ao(E,{fill:"none",stroke:"#000",path:b});return E};var g=function(R,bQ,b){var bN="linear",bK=0.5,bI=0.5,bS=R.style;bQ=bD(bQ)[bt](aP,function(bV,bT,bW){bN="radial";if(bT&&bW){bK=ak(bT);bI=ak(bW);var bU=((bI>0.5)*2-1);bm(bK-0.5,2)+bm(bI-0.5,2)>0.25&&(bI=ap.sqrt(0.25-bm(bK-0.5,2))*bU+0.5)&&bI!=0.5&&(bI=bI.toFixed(5)-0.00001*bU)}return aQ});bQ=bQ[J](/\s*\-\s*/);if(bN=="linear"){var bJ=bQ.shift();bJ=-ak(bJ);if(isNaN(bJ)){return null}var S=[0,0,ap.cos(bJ*aN/180),ap.sin(bJ*aN/180)],bP=1/(m(ar(S[2]),ar(S[3]))||1);S[2]*=bP;S[3]*=bP;if(S[2]<0){S[0]=-S[2];S[2]=0}if(S[3]<0){S[1]=-S[3];S[3]=0}}var bM=x(bQ);if(!bM){return null}var e=R.getAttribute(a5);e=e.match(/^url\(#(.*)\)$/);e&&b.defs.removeChild(ab.getElementById(e[1]));var E=bi(bN+"Gradient");E.id=j();bi(E,bN=="radial"?{fx:bK,fy:bI}:{x1:S[0],y1:S[1],x2:S[2],y2:S[3]});b.defs[bl](E);for(var bL=0,bR=bM[t];bL<bR;bL++){var bO=bi("stop");bi(bO,{offset:bM[bL].offset?bM[bL].offset:!bL?"0%":"100%","stop-color":bM[bL].color||"#fff"});E[bl](bO)}bi(R,{fill:"url(#"+E.id+")",opacity:1,"fill-opacity":1});bS.fill=aQ;bS.opacity=1;bS.fillOpacity=1;return 1};var ac=function(e){var b=e.getBBox();bi(e.pattern,{patternTransform:aJ.format("translate({0},{1})",b.x,b.y)})};var ao=function(bQ,bZ){var bT={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},bV=bQ.node,bR=bQ.attrs,bN=bQ.rotate(),bJ=function(b6,b5){b5=bT[bH.call(b5)];if(b5){var b3=b6.attrs["stroke-width"]||"1",b1={round:b3,square:b3,butt:0}[b6.attrs["stroke-linecap"]||bZ["stroke-linecap"]]||0,b4=[];var b2=b5[t];while(b2--){b4[b2]=b5[b2]*b3+((b2%2)?1:-1)*b1}bi(bV,{"stroke-dasharray":b4[aX](",")})}};bZ[ah]("rotation")&&(bN=bZ.rotation);var bM=bD(bN)[J](a);if(!(bM.length-1)){bM=null}else{bM[1]=+bM[1];bM[2]=+bM[2]}ak(bN)&&bQ.rotate(0,true);for(var bU in bZ){if(bZ[ah](bU)){if(!q[ah](bU)){continue}var bS=bZ[bU];bR[bU]=bS;switch(bU){case"blur":bQ.blur(bS);break;case"rotation":bQ.rotate(bS,true);break;case"href":case"title":case"target":var bX=bV.parentNode;if(bH.call(bX.tagName)!="a"){var S=bi("a");bX.insertBefore(S,bV);S[bl](bV);bX=S}if(bU=="target"&&bS=="blank"){bX.setAttributeNS(bQ.paper.xlink,"show","new")}else{bX.setAttributeNS(bQ.paper.xlink,bU,bS)}break;case"cursor":bV.style.cursor=bS;break;case"clip-rect":var e=bD(bS)[J](a);if(e[t]==4){bQ.clip&&bQ.clip.parentNode.parentNode.removeChild(bQ.clip.parentNode);var E=bi("clipPath"),bW=bi("rect");E.id=j();bi(bW,{x:e[0],y:e[1],width:e[2],height:e[3]});E[bl](bW);bQ.paper.defs[bl](E);bi(bV,{"clip-path":"url(#"+E.id+")"});bQ.clip=bW}if(!bS){var bY=ab.getElementById(bV.getAttribute("clip-path")[bt](/(^url\(#|\)$)/g,aQ));bY&&bY.parentNode.removeChild(bY);bi(bV,{"clip-path":aQ});delete bQ.clip}break;case"path":if(bQ.type=="path"){bi(bV,{d:bS?bR.path=z(bS):"M0,0"})}break;case"width":bV[F](bU,bS);if(bR.fx){bU="x";bS=bR.x}else{break}case"x":if(bR.fx){bS=-bR.x-(bR.width||0)}case"rx":if(bU=="rx"&&bQ.type=="rect"){break}case"cx":bM&&(bU=="x"||bU=="cx")&&(bM[1]+=bS-bR[bU]);bV[F](bU,bS);bQ.pattern&&ac(bQ);break;case"height":bV[F](bU,bS);if(bR.fy){bU="y";bS=bR.y}else{break}case"y":if(bR.fy){bS=-bR.y-(bR.height||0)}case"ry":if(bU=="ry"&&bQ.type=="rect"){break}case"cy":bM&&(bU=="y"||bU=="cy")&&(bM[2]+=bS-bR[bU]);bV[F](bU,bS);bQ.pattern&&ac(bQ);break;case"r":if(bQ.type=="rect"){bi(bV,{rx:bS,ry:bS})}else{bV[F](bU,bS)}break;case"src":if(bQ.type=="image"){bV.setAttributeNS(bQ.paper.xlink,"href",bS)}break;case"stroke-width":bV.style.strokeWidth=bS;bV[F](bU,bS);if(bR["stroke-dasharray"]){bJ(bQ,bR["stroke-dasharray"])}break;case"stroke-dasharray":bJ(bQ,bS);break;case"translation":var bK=bD(bS)[J](a);bK[0]=+bK[0]||0;bK[1]=+bK[1]||0;if(bM){bM[1]+=bK[0];bM[2]+=bK[1]}B.call(bQ,bK[0],bK[1]);break;case"scale":bK=bD(bS)[J](a);bQ.scale(+bK[0]||1,+bK[1]||+bK[0]||1,isNaN(ak(bK[2]))?null:+bK[2],isNaN(ak(bK[3]))?null:+bK[3]);break;case a5:var bI=bD(bS).match(h);if(bI){E=bi("pattern");var bP=bi("image");E.id=j();bi(E,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});bi(bP,{x:0,y:0});bP.setAttributeNS(bQ.paper.xlink,"href",bI[1]);E[bl](bP);var b0=ab.createElement("img");b0.style.cssText="position:absolute;left:-9999em;top-9999em";b0.onload=function(){bi(E,{width:this.offsetWidth,height:this.offsetHeight});bi(bP,{width:this.offsetWidth,height:this.offsetHeight});ab.body.removeChild(this);bQ.paper.safari()};ab.body[bl](b0);b0.src=bI[1];bQ.paper.defs[bl](E);bV.style.fill="url(#"+E.id+")";bi(bV,{fill:"url(#"+E.id+")"});bQ.pattern=E;bQ.pattern&&ac(bQ);break}var R=aJ.getRGB(bS);if(!R.error){delete bZ.gradient;delete bR.gradient;!aJ.is(bR.opacity,"undefined")&&aJ.is(bZ.opacity,"undefined")&&bi(bV,{opacity:bR.opacity});!aJ.is(bR["fill-opacity"],"undefined")&&aJ.is(bZ["fill-opacity"],"undefined")&&bi(bV,{"fill-opacity":bR["fill-opacity"]})}else{if((({circle:1,ellipse:1})[ah](bQ.type)||bD(bS).charAt()!="r")&&g(bV,bS,bQ.paper)){bR.gradient=bS;bR.fill="none";break}}R[ah]("opacity")&&bi(bV,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=aJ.getRGB(bS);bV[F](bU,R.hex);bU=="stroke"&&R[ah]("opacity")&&bi(bV,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity});break;case"gradient":(({circle:1,ellipse:1})[ah](bQ.type)||bD(bS).charAt()!="r")&&g(bV,bS,bQ.paper);break;case"opacity":if(bR.gradient&&!bR[ah]("stroke-opacity")){bi(bV,{"stroke-opacity":bS>1?bS/100:bS})}case"fill-opacity":if(bR.gradient){var b=ab.getElementById(bV.getAttribute(a5)[bt](/^url\(#|\)$/g,aQ));if(b){var bL=b.getElementsByTagName("stop");bL[bL[t]-1][F]("stop-opacity",bS)}break}default:bU=="font-size"&&(bS=U(bS,10)+"px");var bO=bU[bt](/(\-.)/g,function(b1){return bp.call(b1.substring(1))});bV.style[bO]=bS;bV[F](bU,bS);break}}}Q(bQ,bZ);if(bM){bQ.rotate(bM.join(aI))}else{ak(bN)&&bQ.rotate(bN,true)}};var o=1.2,Q=function(b,R){if(b.type!="text"||!(R[ah]("text")||R[ah]("font")||R[ah]("font-size")||R[ah]("x")||R[ah]("y"))){return}var bL=b.attrs,e=b.node,bN=e.firstChild?U(ab.defaultView.getComputedStyle(e.firstChild,aQ).getPropertyValue("font-size"),10):10;if(R[ah]("text")){bL.text=R.text;while(e.firstChild){e.removeChild(e.firstChild)}var E=bD(R.text)[J]("\n");for(var S=0,bM=E[t];S<bM;S++){if(E[S]){var bJ=bi("tspan");S&&bi(bJ,{dy:bN*o,x:bL.x});bJ[bl](ab.createTextNode(E[S]));e[bl](bJ)}}}else{E=e.getElementsByTagName("tspan");for(S=0,bM=E[t];S<bM;S++){S&&bi(E[S],{dy:bN*o,x:bL.x})}}bi(e,{y:bL.y});var bI=b.getBBox(),bK=bL.y-(bI.y+bI.height/2);bK&&aJ.is(bK,"finite")&&bi(e,{y:bL.y+bK})},aV=function(e,b){var R=0,E=0;this[0]=e;this.id=aJ._oid++;this.node=e;e.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};var bd=aV[bF];aV[bF].rotate=function(e,b,R){if(this.removed){return this}if(e==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)}return this._.rt.deg}var E=this.getBBox();e=bD(e)[J](a);if(e[t]-1){b=ak(e[1]);R=ak(e[2])}e=ak(e[0]);if(b!=null&&b!==false){this._.rt.deg=e}else{this._.rt.deg+=e}(R==null)&&(b=null);this._.rt.cx=b;this._.rt.cy=R;b=b==null?E.x+E.width/2:b;R=R==null?E.y+E.height/2:R;if(this._.rt.deg){this.transformations[0]=aJ.format("rotate({0} {1} {2})",this._.rt.deg,b,R);this.clip&&bi(this.clip,{transform:aJ.format("rotate({0} {1} {2})",-this._.rt.deg,b,R)})}else{this.transformations[0]=aQ;this.clip&&bi(this.clip,{transform:aQ})}bi(this.node,{transform:this.transformations[aX](aI)});return this};aV[bF].hide=function(){!this.removed&&(this.node.style.display="none");return this};aV[bF].show=function(){!this.removed&&(this.node.style.display="");return this};aV[bF].remove=function(){if(this.removed){return}aF(this,this.paper);this.node.parentNode.removeChild(this.node);for(var b in this){delete this[b]}this.removed=true};aV[bF].getBBox=function(){if(this.removed){return this}if(this.type=="path"){return aj(this.attrs.path)}if(this.node.style.display=="none"){this.show();var E=true}var bJ={};try{bJ=this.node.getBBox()}catch(S){}finally{bJ=bJ||{}}if(this.type=="text"){bJ={x:bJ.x,y:Infinity,width:0,height:0};for(var b=0,R=this.node.getNumberOfChars();b<R;b++){var bI=this.node.getExtentOfChar(b);(bI.y<bJ.y)&&(bJ.y=bI.y);(bI.y+bI.height-bJ.y>bJ.height)&&(bJ.height=bI.y+bI.height-bJ.y);(bI.x+bI.width-bJ.x>bJ.width)&&(bJ.width=bI.x+bI.width-bJ.x)}}E&&this.hide();return bJ};aV[bF].attr=function(b,bL){if(this.removed){return this}if(b==null){var bK={};for(var S in this.attrs){if(this.attrs[ah](S)){bK[S]=this.attrs[S]}}this._.rt.deg&&(bK.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bK.scale=this.scale());bK.gradient&&bK.fill=="none"&&(bK.fill=bK.gradient)&&delete bK.gradient;return bK}if(bL==null&&aJ.is(b,ag)){if(b=="translation"){return B.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(bL==null&&aJ.is(b,a8)){var bN={};for(var R=0,bI=b.length;R<bI;R++){bN[b[R]]=this.attr(b[R])}return bN}if(bL!=null){var e={};e[b]=bL}else{if(b!=null&&aJ.is(b,"object")){e=b}}for(var bM in this.paper.customAttributes){if(this.paper.customAttributes[ah](bM)&&e[ah](bM)&&aJ.is(this.paper.customAttributes[bM],"function")){var bJ=this.paper.customAttributes[bM].apply(this,[][bx](e[bM]));this.attrs[bM]=e[bM];for(var E in bJ){if(bJ[ah](E)){e[E]=bJ[E]}}}}ao(this,e);return this};aV[bF].toFront=function(){if(this.removed){return this}this.node.parentNode[bl](this.node);var b=this.paper;b.top!=this&&am(this,b);return this};aV[bF].toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);p(this,this.paper);var b=this.paper}return this};aV[bF].insertAfter=function(b){if(this.removed){return this}var e=b.node||b[b.length-1].node;if(e.nextSibling){e.parentNode.insertBefore(this.node,e.nextSibling)}else{e.parentNode[bl](this.node)}K(this,b,this.paper);return this};aV[bF].insertBefore=function(b){if(this.removed){return this}var e=b.node||b[0].node;e.parentNode.insertBefore(this.node,e);aM(this,b,this.paper);return this};aV[bF].blur=function(e){var b=this;if(+e!==0){var E=bi("filter"),R=bi("feGaussianBlur");b.attrs.blur=e;E.id=j();bi(R,{stdDeviation:+e||1.5});E.appendChild(R);b.paper.defs.appendChild(E);b._blur=E;bi(b.node,{filter:"url(#"+E.id+")"})}else{if(b._blur){b._blur.parentNode.removeChild(b._blur);delete b._blur;delete b.attrs.blur}b.node.removeAttribute("filter")}};var af=function(e,b,bI,S){var R=bi("circle");e.canvas&&e.canvas[bl](R);var E=new aV(R,e);E.attrs={cx:b,cy:bI,r:S,fill:"none",stroke:"#000"};E.type="circle";bi(R,E.attrs);return E},bc=function(E,b,bK,e,bI,bJ){var S=bi("rect");E.canvas&&E.canvas[bl](S);var R=new aV(S,E);R.attrs={x:b,y:bK,width:e,height:bI,r:bJ||0,rx:bJ||0,ry:bJ||0,fill:"none",stroke:"#000"};R.type="rect";bi(S,R.attrs);return R},aA=function(e,b,bJ,bI,S){var R=bi("ellipse");e.canvas&&e.canvas[bl](R);var E=new aV(R,e);E.attrs={cx:b,cy:bJ,rx:bI,ry:S,fill:"none",stroke:"#000"};E.type="ellipse";bi(R,E.attrs);return E},w=function(E,bJ,b,bK,e,bI){var S=bi("image");bi(S,{x:b,y:bK,width:e,height:bI,preserveAspectRatio:"none"});S.setAttributeNS(E.xlink,"href",bJ);E.canvas&&E.canvas[bl](S);var R=new aV(S,E);R.attrs={x:b,y:bK,width:e,height:bI,src:bJ};R.type="image";return R},al=function(e,b,bI,S){var R=bi("text");bi(R,{x:b,y:bI,"text-anchor":"middle"});e.canvas&&e.canvas[bl](R);var E=new aV(R,e);E.attrs={x:b,y:bI,"text-anchor":"middle",text:S,font:q.font,stroke:"none",fill:"#000"};E.type="text";ao(E,E.attrs);return E},bB=function(e,b){this.width=e||this.width;this.height=b||this.height;this.canvas[F]("width",this.width);this.canvas[F]("height",this.height);return this},G=function(){var R=aK[bC](0,arguments),E=R&&R.container,e=R.x,bJ=R.y,S=R.width,b=R.height;if(!E){throw new Error("SVG container not found.")}var bI=bi("svg");e=e||0;bJ=bJ||0;S=S||512;b=b||342;bi(bI,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:S,height:b});if(E==1){bI.style.cssText="position:absolute;left:"+e+"px;top:"+bJ+"px";ab.body[bl](bI)}else{if(E.firstChild){E.insertBefore(bI,E.firstChild)}else{E[bl](bI)}}E=new bA;E.width=S;E.height=b;E.canvas=bI;bf.call(E,E,aJ.fn);E.clear();return E};a0.clear=function(){var b=this.canvas;while(b.firstChild){b.removeChild(b.firstChild)}this.bottom=this.top=null;(this.desc=bi("desc"))[bl](ab.createTextNode("Created with Rapha\xebl"));b[bl](this.desc);b[bl](this.defs=bi("defs"))};a0.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=A(b)}}}if(aJ.vml){var O={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},aO=/([clmz]),?([^clmz]*)/gi,by=/ progid:\S+Blur\([^\)]+\)/g,bG=/-?[^,\s-]+/g,aY=1000+aI+1000,v=10,u={path:1,rect:1},bh=function(bN){var bK=/[ahqstv]/ig,E=z;bD(bN).match(bK)&&(E=W);bK=/[clmz]/g;if(E==z&&!bD(bN).match(bK)){var bJ=bD(bN)[bt](aO,function(bR,bT,bP){var bS=[],bO=bH.call(bT)=="m",bQ=O[bT];bP[bt](bG,function(bU){if(bO&&bS[t]==2){bQ+=bS+O[bT=="m"?"l":"L"];bS=[]}bS[k](ae(bU*v))});return bQ+bS});return bJ}var bL=E(bN),e,b;bJ=[];for(var S=0,bM=bL[t];S<bM;S++){e=bL[S];b=bH.call(bL[S][0]);b=="z"&&(b="x");for(var R=1,bI=e[t];R<bI;R++){b+=ae(e[R]*v)+(R!=bI-1?",":aQ)}bJ[k](b)}return bJ[aX](aI)};aJ[a1]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};y=function(E,e){var bI=az("group");bI.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";bI.coordsize=e.coordsize;bI.coordorigin=e.coordorigin;var S=az("shape"),R=S.style;R.width=e.width+"px";R.height=e.height+"px";S.coordsize=aY;S.coordorigin=e.coordorigin;bI[bl](S);var bJ=new aV(S,bI,e),b={fill:"none",stroke:"#000"};E&&(b.path=E);bJ.type="path";bJ.path=[];bJ.Path=aQ;ao(bJ,b);e.canvas[bl](bI);return bJ};ao=function(bM,bT){bM.attrs=bM.attrs||{};var bQ=bM.node,bU=bM.attrs,bJ=bQ.style,R,bS=(bT.x!=bU.x||bT.y!=bU.y||bT.width!=bU.width||bT.height!=bU.height||bT.r!=bU.r)&&bM.type=="rect",bY=bM;for(var bK in bT){if(bT[ah](bK)){bU[bK]=bT[bK]}}if(bS){bU.path=au(bU.x,bU.y,bU.width,bU.height,bU.r);bM.X=bU.x;bM.Y=bU.y;bM.W=bU.width;bM.H=bU.height}bT.href&&(bQ.href=bT.href);bT.title&&(bQ.title=bT.title);bT.target&&(bQ.target=bT.target);bT.cursor&&(bJ.cursor=bT.cursor);"blur" in bT&&bM.blur(bT.blur);if(bT.path&&bM.type=="path"||bS){bQ.path=bh(bU.path)}if(bT.rotation!=null){bM.rotate(bT.rotation,true)}if(bT.translation){R=bD(bT.translation)[J](a);B.call(bM,R[0],R[1]);if(bM._.rt.cx!=null){bM._.rt.cx+=+R[0];bM._.rt.cy+=+R[1];bM.setBox(bM.attrs,R[0],R[1])}}if(bT.scale){R=bD(bT.scale)[J](a);bM.scale(+R[0]||1,+R[1]||+R[0]||1,+R[2]||null,+R[3]||null)}if("clip-rect" in bT){var b=bD(bT["clip-rect"])[J](a);if(b[t]==4){b[2]=+b[2]+(+b[0]);b[3]=+b[3]+(+b[1]);var bL=bQ.clipRect||ab.createElement("div"),bX=bL.style,bI=bQ.parentNode;bX.clip=aJ.format("rect({1}px {2}px {3}px {0}px)",b);if(!bQ.clipRect){bX.position="absolute";bX.top=0;bX.left=0;bX.width=bM.paper.width+"px";bX.height=bM.paper.height+"px";bI.parentNode.insertBefore(bL,bI);bL[bl](bI);bQ.clipRect=bL}}if(!bT["clip-rect"]){bQ.clipRect&&(bQ.clipRect.style.clip=aQ)}}if(bM.type=="image"&&bT.src){bQ.src=bT.src}if(bM.type=="image"&&bT.opacity){bQ.filterOpacity=a6+".Alpha(opacity="+(bT.opacity*100)+")";bJ.filter=(bQ.filterMatrix||aQ)+(bQ.filterOpacity||aQ)}bT.font&&(bJ.font=bT.font);bT["font-family"]&&(bJ.fontFamily='"'+bT["font-family"][J](",")[0][bt](/^['"]+|['"]+$/g,aQ)+'"');bT["font-size"]&&(bJ.fontSize=bT["font-size"]);bT["font-weight"]&&(bJ.fontWeight=bT["font-weight"]);bT["font-style"]&&(bJ.fontStyle=bT["font-style"]);if(bT.opacity!=null||bT["stroke-width"]!=null||bT.fill!=null||bT.stroke!=null||bT["stroke-width"]!=null||bT["stroke-opacity"]!=null||bT["fill-opacity"]!=null||bT["stroke-dasharray"]!=null||bT["stroke-miterlimit"]!=null||bT["stroke-linejoin"]!=null||bT["stroke-linecap"]!=null){bQ=bM.shape||bQ;var bR=(bQ.getElementsByTagName(a5)&&bQ.getElementsByTagName(a5)[0]),bV=false;!bR&&(bV=bR=az(a5));if("fill-opacity" in bT||"opacity" in bT){var e=((+bU["fill-opacity"]+1||2)-1)*((+bU.opacity+1||2)-1)*((+aJ.getRGB(bT.fill).o+1||2)-1);e=bj(m(e,0),1);bR.opacity=e}bT.fill&&(bR.on=true);if(bR.on==null||bT.fill=="none"){bR.on=false}if(bR.on&&bT.fill){var E=bT.fill.match(h);if(E){bR.src=E[1];bR.type="tile"}else{bR.color=aJ.getRGB(bT.fill).hex;bR.src=aQ;bR.type="solid";if(aJ.getRGB(bT.fill).error&&(bY.type in {circle:1,ellipse:1}||bD(bT.fill).charAt()!="r")&&g(bY,bT.fill)){bU.fill="none";bU.gradient=bT.fill}}}bV&&bQ[bl](bR);var S=(bQ.getElementsByTagName("stroke")&&bQ.getElementsByTagName("stroke")[0]),bW=false;!S&&(bW=S=az("stroke"));if((bT.stroke&&bT.stroke!="none")||bT["stroke-width"]||bT["stroke-opacity"]!=null||bT["stroke-dasharray"]||bT["stroke-miterlimit"]||bT["stroke-linejoin"]||bT["stroke-linecap"]){S.on=true}(bT.stroke=="none"||S.on==null||bT.stroke==0||bT["stroke-width"]==0)&&(S.on=false);var bP=aJ.getRGB(bT.stroke);S.on&&bT.stroke&&(S.color=bP.hex);e=((+bU["stroke-opacity"]+1||2)-1)*((+bU.opacity+1||2)-1)*((+bP.o+1||2)-1);var bN=(ak(bT["stroke-width"])||1)*0.75;e=bj(m(e,0),1);bT["stroke-width"]==null&&(bN=bU["stroke-width"]);bT["stroke-width"]&&(S.weight=bN);bN&&bN<1&&(e*=bN)&&(S.weight=1);S.opacity=e;bT["stroke-linejoin"]&&(S.joinstyle=bT["stroke-linejoin"]||"miter");S.miterlimit=bT["stroke-miterlimit"]||8;bT["stroke-linecap"]&&(S.endcap=bT["stroke-linecap"]=="butt"?"flat":bT["stroke-linecap"]=="square"?"square":"round");if(bT["stroke-dasharray"]){var bO={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};S.dashstyle=bO[ah](bT["stroke-dasharray"])?bO[bT["stroke-dasharray"]]:aQ}bW&&bQ[bl](S)}if(bY.type=="text"){bJ=bY.paper.span.style;bU.font&&(bJ.font=bU.font);bU["font-family"]&&(bJ.fontFamily=bU["font-family"]);bU["font-size"]&&(bJ.fontSize=bU["font-size"]);bU["font-weight"]&&(bJ.fontWeight=bU["font-weight"]);bU["font-style"]&&(bJ.fontStyle=bU["font-style"]);bY.node.string&&(bY.paper.span.innerHTML=bD(bY.node.string)[bt](/</g,"&#60;")[bt](/&/g,"&#38;")[bt](/\n/g,"<br>"));bY.W=bU.w=bY.paper.span.offsetWidth;bY.H=bU.h=bY.paper.span.offsetHeight;bY.X=bU.x;bY.Y=bU.y+ae(bY.H/2);switch(bU["text-anchor"]){case"start":bY.node.style["v-text-align"]="left";bY.bbx=ae(bY.W/2);break;case"end":bY.node.style["v-text-align"]="right";bY.bbx=-ae(bY.W/2);break;default:bY.node.style["v-text-align"]="center";break}}};g=function(b,bJ){b.attrs=b.attrs||{};var bK=b.attrs,bM,S="linear",bI=".5 .5";b.attrs.gradient=bJ;bJ=bD(bJ)[bt](aP,function(bP,bQ,bO){S="radial";if(bQ&&bO){bQ=ak(bQ);bO=ak(bO);bm(bQ-0.5,2)+bm(bO-0.5,2)>0.25&&(bO=ap.sqrt(0.25-bm(bQ-0.5,2))*((bO>0.5)*2-1)+0.5);bI=bQ+aI+bO}return aQ});bJ=bJ[J](/\s*\-\s*/);if(S=="linear"){var e=bJ.shift();e=-ak(e);if(isNaN(e)){return null}}var R=x(bJ);if(!R){return null}b=b.shape||b.node;bM=b.getElementsByTagName(a5)[0]||az(a5);!bM.parentNode&&b.appendChild(bM);if(R[t]){bM.on=true;bM.method="none";bM.color=R[0].color;bM.color2=R[R[t]-1].color;var bN=[];for(var E=0,bL=R[t];E<bL;E++){R[E].offset&&bN[k](R[E].offset+aI+R[E].color)}bM.colors&&(bM.colors.value=bN[t]?bN[aX]():"0% "+bM.color);if(S=="radial"){bM.type="gradientradial";bM.focus="100%";bM.focussize=bI;bM.focusposition=bI}else{bM.type="gradient";bM.angle=(270-e)%360}}return 1};aV=function(S,bJ,b){var bI=0,E=0,e=0,R=1;this[0]=S;this.id=aJ._oid++;this.node=S;S.raphael=this;this.X=0;this.Y=0;this.attrs={};this.Group=bJ;this.paper=b;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};bd=aV[bF];bd.rotate=function(e,b,E){if(this.removed){return this}if(e==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)}return this._.rt.deg}e=bD(e)[J](a);if(e[t]-1){b=ak(e[1]);E=ak(e[2])}e=ak(e[0]);if(b!=null){this._.rt.deg=e}else{this._.rt.deg+=e}E==null&&(b=null);this._.rt.cx=b;this._.rt.cy=E;this.setBox(this.attrs,b,E);this.Group.style.rotation=this._.rt.deg;return this};bd.setBox=function(R,S,E){if(this.removed){return this}var b=this.Group.style,bI=(this.shape&&this.shape.style)||this.node.style;R=R||{};for(var bJ in R){if(R[ah](bJ)){this.attrs[bJ]=R[bJ]}}S=S||this._.rt.cx;E=E||this._.rt.cy;var bM=this.attrs,bP,bO,bQ,bL;switch(this.type){case"circle":bP=bM.cx-bM.r;bO=bM.cy-bM.r;bQ=bL=bM.r*2;break;case"ellipse":bP=bM.cx-bM.rx;bO=bM.cy-bM.ry;bQ=bM.rx*2;bL=bM.ry*2;break;case"image":bP=+bM.x;bO=+bM.y;bQ=bM.width||0;bL=bM.height||0;break;case"text":this.textpath.v=["m",ae(bM.x),", ",ae(bM.y-2),"l",ae(bM.x)+1,", ",ae(bM.y-2)][aX](aQ);bP=bM.x-ae(this.W/2);bO=bM.y-this.H/2;bQ=this.W;bL=this.H;break;case"rect":case"path":if(!this.attrs.path){bP=0;bO=0;bQ=this.paper.width;bL=this.paper.height}else{var bK=aj(this.attrs.path);bP=bK.x;bO=bK.y;bQ=bK.width;bL=bK.height}break;default:bP=0;bO=0;bQ=this.paper.width;bL=this.paper.height;break}S=(S==null)?bP+bQ/2:S;E=(E==null)?bO+bL/2:E;var e=S-this.paper.width/2,bN=E-this.paper.height/2,bR;b.left!=(bR=e+"px")&&(b.left=bR);b.top!=(bR=bN+"px")&&(b.top=bR);this.X=u[ah](this.type)?-e:bP;this.Y=u[ah](this.type)?-bN:bO;this.W=bQ;this.H=bL;if(u[ah](this.type)){bI.left!=(bR=-e*v+"px")&&(bI.left=bR);bI.top!=(bR=-bN*v+"px")&&(bI.top=bR)}else{if(this.type=="text"){bI.left!=(bR=-e+"px")&&(bI.left=bR);bI.top!=(bR=-bN+"px")&&(bI.top=bR)}else{b.width!=(bR=this.paper.width+"px")&&(b.width=bR);b.height!=(bR=this.paper.height+"px")&&(b.height=bR);bI.left!=(bR=bP-e+"px")&&(bI.left=bR);bI.top!=(bR=bO-bN+"px")&&(bI.top=bR);bI.width!=(bR=bQ+"px")&&(bI.width=bR);bI.height!=(bR=bL+"px")&&(bI.height=bR)}}};bd.hide=function(){!this.removed&&(this.Group.style.display="none");return this};bd.show=function(){!this.removed&&(this.Group.style.display="block");return this};bd.getBBox=function(){if(this.removed){return this}if(u[ah](this.type)){return aj(this.attrs.path)}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};bd.remove=function(){if(this.removed){return}aF(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this){delete this[b]}this.removed=true};bd.attr=function(b,bJ){if(this.removed){return this}if(b==null){var bI={};for(var R in this.attrs){if(this.attrs[ah](R)){bI[R]=this.attrs[R]}}this._.rt.deg&&(bI.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bI.scale=this.scale());bI.gradient&&bI.fill=="none"&&(bI.fill=bI.gradient)&&delete bI.gradient;return bI}if(bJ==null&&aJ.is(b,"string")){if(b=="translation"){return B.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(this.attrs&&bJ==null&&aJ.is(b,a8)){var bM,bL={};for(R=0,bM=b[t];R<bM;R++){bL[b[R]]=this.attr(b[R])}return bL}var e;if(bJ!=null){e={};e[b]=bJ}bJ==null&&aJ.is(b,"object")&&(e=b);if(e){for(var bK in this.paper.customAttributes){if(this.paper.customAttributes[ah](bK)&&e[ah](bK)&&aJ.is(this.paper.customAttributes[bK],"function")){var S=this.paper.customAttributes[bK].apply(this,[][bx](e[bK]));this.attrs[bK]=e[bK];for(var E in S){if(S[ah](E)){e[E]=S[E]}}}}if(e.text&&this.type=="text"){this.node.string=e.text}ao(this,e);if(e.gradient&&(({circle:1,ellipse:1})[ah](this.type)||bD(e.gradient).charAt()!="r")){g(this,e.gradient)}(!u[ah](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};bd.toFront=function(){!this.removed&&this.Group.parentNode[bl](this.Group);this.paper.top!=this&&am(this,this.paper);return this};bd.toBack=function(){if(this.removed){return this}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);p(this,this.paper)}return this};bd.insertAfter=function(b){if(this.removed){return this}if(b.constructor==ai){b=b[b.length-1]}if(b.Group.nextSibling){b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling)}else{b.Group.parentNode[bl](this.Group)}K(this,b,this.paper);return this};bd.insertBefore=function(b){if(this.removed){return this}if(b.constructor==ai){b=b[0]}b.Group.parentNode.insertBefore(this.Group,b.Group);aM(this,b,this.paper);return this};bd.blur=function(b){var e=this.node.runtimeStyle,E=e.filter;E=E.replace(by,aQ);if(+b!==0){this.attrs.blur=b;e.filter=E+aI+a6+".Blur(pixelradius="+(+b||1.5)+")";e.margin=aJ.format("-{0}px 0 0 -{0}px",ae(+b||1.5))}else{e.filter=E;e.margin=0;delete this.attrs.blur}};af=function(e,b,bK,bI){var S=az("group"),bJ=az("oval"),E=bJ.style;S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";S.coordsize=aY;S.coordorigin=e.coordorigin;S[bl](bJ);var R=new aV(bJ,S,e);R.type="circle";ao(R,{stroke:"#000",fill:"none"});R.attrs.cx=b;R.attrs.cy=bK;R.attrs.r=bI;R.setBox({x:b-bI,y:bK-bI,width:bI*2,height:bI*2});e.canvas[bl](S);return R};function au(b,S,e,E,R){if(R){return aJ.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+R,S,e-R*2,R,-R,E-R*2,R*2-e,R*2-E)}else{return aJ.format("M{0},{1}l{2},0,0,{3},{4},0z",b,S,e,E,-e)}}bc=function(e,bJ,S,bK,E,b){var bL=au(bJ,S,bK,E,b),R=e.path(bL),bI=R.attrs;R.X=bI.x=bJ;R.Y=bI.y=S;R.W=bI.width=bK;R.H=bI.height=E;bI.r=b;bI.path=bL;R.type="rect";return R};aA=function(b,bL,bK,E,e){var S=az("group"),R=az("oval"),bJ=R.style;S.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";S.coordsize=aY;S.coordorigin=b.coordorigin;S[bl](R);var bI=new aV(R,S,b);bI.type="ellipse";ao(bI,{stroke:"#000"});bI.attrs.cx=bL;bI.attrs.cy=bK;bI.attrs.rx=E;bI.attrs.ry=e;bI.setBox({x:bL-E,y:bK-e,width:E*2,height:e*2});b.canvas[bl](S);return bI};w=function(e,b,bK,bJ,bL,R){var S=az("group"),E=az("image");S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";S.coordsize=aY;S.coordorigin=e.coordorigin;E.src=b;S[bl](E);var bI=new aV(E,S,e);bI.type="image";bI.attrs.src=b;bI.attrs.x=bK;bI.attrs.y=bJ;bI.attrs.w=bL;bI.attrs.h=R;bI.setBox({x:bK,y:bJ,width:bL,height:R});e.canvas[bl](S);return bI};al=function(e,bL,bK,bM){var S=az("group"),R=az("shape"),bJ=R.style,bN=az("path"),b=bN.style,E=az("textpath");S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";S.coordsize=aY;S.coordorigin=e.coordorigin;bN.v=aJ.format("m{0},{1}l{2},{1}",ae(bL*10),ae(bK*10),ae(bL*10)+1);bN.textpathok=true;bJ.width=e.width;bJ.height=e.height;E.string=bD(bM);E.on=true;R[bl](E);R[bl](bN);S[bl](R);var bI=new aV(E,S,e);bI.shape=R;bI.textpath=bN;bI.type="text";bI.attrs.text=bM;bI.attrs.x=bL;bI.attrs.y=bK;bI.attrs.w=1;bI.attrs.h=1;ao(bI,{font:q.font,stroke:"none",fill:"#000"});bI.setBox();e.canvas[bl](S);return bI};bB=function(E,b){var e=this.canvas.style;E==+E&&(E+="px");b==+b&&(b+="px");e.width=E;e.height=b;e.clip="rect(0 "+E+" "+b+" 0)";return this};var az;ab.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!ab.namespaces.rvml&&ab.namespaces.add("rvml","urn:schemas-microsoft-com:vml");az=function(b){return ab.createElement("<rvml:"+b+' class="rvml">')}}catch(ax){az=function(b){return ab.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}G=function(){var E=aK[bC](0,arguments),b=E.container,bL=E.height,bM,e=E.width,bK=E.x,bJ=E.y;if(!b){throw new Error("VML container not found.")}var S=new bA,bI=S.canvas=ab.createElement("div"),R=bI.style;bK=bK||0;bJ=bJ||0;e=e||512;bL=bL||342;e==+e&&(e+="px");bL==+bL&&(bL+="px");S.width=1000;S.height=1000;S.coordsize=v*1000+aI+v*1000;S.coordorigin="0 0";S.span=ab.createElement("span");S.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";bI[bl](S.span);R.cssText=aJ.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,bL);if(b==1){ab.body[bl](bI);R.left=bK+"px";R.top=bJ+"px";R.position="absolute"}else{if(b.firstChild){b.insertBefore(bI,b.firstChild)}else{b[bl](bI)}}bf.call(S,S,aJ.fn);return S};a0.clear=function(){this.canvas.innerHTML=aQ;this.span=ab.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[bl](this.span);this.bottom=this.top=null};a0.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=A(b)}return true}}var V=navigator.userAgent.match(/Version\/(.*?)\s/);if((navigator.vendor=="Apple Computer, Inc.")&&(V&&V[1]<4||navigator.platform.slice(0,2)=="iP")){a0.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});aR.setTimeout(function(){b.remove()})}}else{a0.safari=function(){}}var P=function(){this.returnValue=false},bw=function(){return this.originalEvent.preventDefault()},a4=function(){this.cancelBubble=true},aE=function(){return this.originalEvent.stopPropagation()},aw=(function(){if(ab.addEventListener){return function(bI,R,E,e){var b=X&&br[R]?br[R]:R;var S=function(bM){if(X&&br[ah](R)){for(var bK=0,bL=bM.targetTouches&&bM.targetTouches.length;bK<bL;bK++){if(bM.targetTouches[bK].target==bI){var bJ=bM;bM=bM.targetTouches[bK];bM.originalEvent=bJ;bM.preventDefault=bw;bM.stopPropagation=aE;break}}}return E.call(e,bM)};bI.addEventListener(b,S,false);return function(){bI.removeEventListener(b,S,false);return true}}}else{if(ab.attachEvent){return function(bI,R,E,e){var S=function(bJ){bJ=bJ||aR.event;bJ.preventDefault=bJ.preventDefault||P;bJ.stopPropagation=bJ.stopPropagation||a4;return E.call(e,bJ)};bI.attachEvent("on"+R,S);var b=function(){bI.detachEvent("on"+R,S);return true};return b}}}})(),a9=[],bs=function(bI){var bK=bI.clientX,bJ=bI.clientY,bL=ab.documentElement.scrollTop||ab.body.scrollTop,bM=ab.documentElement.scrollLeft||ab.body.scrollLeft,b,E=a9.length;while(E--){b=a9[E];if(X){var S=bI.touches.length,R;while(S--){R=bI.touches[S];if(R.identifier==b.el._drag.id){bK=R.clientX;bJ=R.clientY;(bI.originalEvent?bI.originalEvent:bI).preventDefault();break}}}else{bI.preventDefault()}bK+=bM;bJ+=bL;b.move&&b.move.call(b.move_scope||b.el,bK-b.el._drag.x,bJ-b.el._drag.y,bK,bJ,bI)}},f=function(R){aJ.unmousemove(bs).unmouseup(f);var E=a9.length,b;while(E--){b=a9[E];b.el._drag={};b.end&&b.end.call(b.end_scope||b.start_scope||b.move_scope||b.el,R)}a9=[]};for(var at=T[t];at--;){(function(b){aJ[b]=aV[bF][b]=function(E,e){if(aJ.is(E,"function")){this.events=this.events||[];this.events.push({name:b,f:E,unbind:aw(this.shape||this.node||ab,b,E,e||this)})}return this};aJ["un"+b]=aV[bF]["un"+b]=function(R){var E=this.events,e=E[t];while(e--){if(E[e].name==b&&E[e].f==R){E[e].unbind();E.splice(e,1);!E.length&&delete this.events;return this}}return this}})(T[at])}bd.hover=function(R,b,E,e){return this.mouseover(R,E).mouseout(b,e||E)};bd.unhover=function(e,b){return this.unmouseover(e).unmouseout(b)};bd.drag=function(e,bI,S,b,E,R){this._drag={};this.mousedown(function(bK){(bK.originalEvent||bK).preventDefault();var bJ=ab.documentElement.scrollTop||ab.body.scrollTop,bL=ab.documentElement.scrollLeft||ab.body.scrollLeft;this._drag.x=bK.clientX+bL;this._drag.y=bK.clientY+bJ;this._drag.id=bK.identifier;bI&&bI.call(E||b||this,bK.clientX+bL,bK.clientY+bJ,bK);!a9.length&&aJ.mousemove(bs).mouseup(f);a9.push({el:this,move:e,end:S,move_scope:b,start_scope:E,end_scope:R})});return this};bd.undrag=function(b,R,E){var e=a9.length;while(e--){a9[e].el==this&&(a9[e].move==b&&a9[e].end==E)&&a9.splice(e++,1)}!a9.length&&aJ.unmousemove(bs).unmouseup(f)};a0.circle=function(b,E,e){return af(this,b||0,E||0,e||0)};a0.rect=function(b,S,e,E,R){return bc(this,b||0,S||0,e||0,E||0,R||0)};a0.ellipse=function(b,R,E,e){return aA(this,b||0,R||0,E||0,e||0)};a0.path=function(b){b&&!aJ.is(b,ag)&&!aJ.is(b[0],a8)&&(b+=aQ);return y(aJ.format[bC](aJ,arguments),this)};a0.image=function(R,b,S,e,E){return w(this,R||"about:blank",b||0,S||0,e||0,E||0)};a0.text=function(b,E,e){return al(this,b||0,E||0,bD(e))};a0.set=function(b){arguments[t]>1&&(b=Array[bF].splice.call(arguments,0,arguments[t]));return new ai(b)};a0.setSize=bB;a0.top=a0.bottom=null;a0.raphael=aJ;function D(){return this.x+aI+this.y}bd.resetScale=function(){if(this.removed){return this}this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};bd.scale=function(b1,b0,bS,bQ){if(this.removed){return this}if(b1==null&&b0==null){return{x:this._.sx,y:this._.sy,toString:D}}b0=b0||b1;!+b0&&(b0=b1);var e,b,b9,b8,cc=this.attrs;if(b1!=0){var cd=this.getBBox(),R=cd.x+cd.width/2,E=cd.y+cd.height/2,b6=ar(b1/this._.sx),b5=ar(b0/this._.sy);bS=(+bS||bS==0)?bS:R;bQ=(+bQ||bQ==0)?bQ:E;var bL=this._.sx>0,bK=this._.sy>0,bR=~~(b1/ar(b1)),bP=~~(b0/ar(b0)),bI=b6*bR,S=b5*bP,b2=this.node.style,bZ=bS+ar(R-bS)*bI*(R>bS==bL?1:-1),bY=bQ+ar(E-bQ)*S*(E>bQ==bK?1:-1),bV=(b1*bR>b0*bP?b5:b6);switch(this.type){case"rect":case"image":var bN=cc.width*b6,bW=cc.height*b5;this.attr({height:bW,r:cc.r*bV,width:bN,x:bZ-bN/2,y:bY-bW/2});break;case"circle":case"ellipse":this.attr({rx:cc.rx*b6,ry:cc.ry*b5,r:cc.r*bV,cx:bZ,cy:bY});break;case"text":this.attr({x:bZ,y:bY});break;case"path":var b4=av(cc.path),bM=true,bU=bL?bI:b6,bT=bK?S:b5;for(var cb=0,bX=b4[t];cb<bX;cb++){var b7=b4[cb],bO=bp.call(b7[0]);if(bO=="M"&&bM){continue}else{bM=false}if(bO=="A"){b7[b4[cb][t]-2]*=bU;b7[b4[cb][t]-1]*=bT;b7[1]*=b6;b7[2]*=b5;b7[5]=+(bR+bP?!!+b7[5]:!+b7[5])}else{if(bO=="H"){for(var ca=1,bJ=b7[t];ca<bJ;ca++){b7[ca]*=bU}}else{if(bO=="V"){for(ca=1,bJ=b7[t];ca<bJ;ca++){b7[ca]*=bT}}else{for(ca=1,bJ=b7[t];ca<bJ;ca++){b7[ca]*=(ca%2)?bU:bT}}}}}var b3=aj(b4);e=bZ-b3.x-b3.width/2;b=bY-b3.y-b3.height/2;b4[0][1]+=e;b4[0][2]+=b;this.attr({path:b4});break}if(this.type in {text:1,image:1}&&(bR!=1||bP!=1)){if(this.transformations){this.transformations[2]="scale("[bx](bR,",",bP,")");this.node[F]("transform",this.transformations[aX](aI));e=(bR==-1)?-cc.x-(bN||0):cc.x;b=(bP==-1)?-cc.y-(bW||0):cc.y;this.attr({x:e,y:b});cc.fx=bR-1;cc.fy=bP-1}else{this.node.filterMatrix=a6+".Matrix(M11="[bx](bR,", M12=0, M21=0, M22=",bP,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");b2.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}else{if(this.transformations){this.transformations[2]=aQ;this.node[F]("transform",this.transformations[aX](aI));cc.fx=0;cc.fy=0}else{this.node.filterMatrix=aQ;b2.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}cc.scale=[b1,b0,bS,bQ][aX](aI);this._.sx=b1;this._.sy=b0}return this};bd.clone=function(){if(this.removed){return null}var b=this.attr();delete b.scale;delete b.translation;return this.paper[this.type]().attr(b)};var a3={},l=function(S,e,bL,bK,bT,bS,bR,bP,bI){var bO=0,bN=100,R=[S,e,bL,bK,bT,bS,bR,bP].join(),b=a3[R],bJ,E;!b&&(a3[R]=b={data:[]});b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){delete a3[R]},2000);if(bI!=null){var bQ=l(S,e,bL,bK,bT,bS,bR,bP);bN=~~bQ*10}for(var bM=0;bM<bN+1;bM++){if(b.data[bI]>bM){E=b.data[bM*bN]}else{E=aJ.findDotsAtSegment(S,e,bL,bK,bT,bS,bR,bP,bM/bN);b.data[bM]=E}bM&&(bO+=bm(bm(bJ.x-E.x,2)+bm(bJ.y-E.y,2),0.5));if(bI!=null&&bO>=bI){return E}bJ=E}if(bI==null){return bO}},a2=function(b,e){return function(bR,S,bI){bR=W(bR);var bN,bM,E,bJ,R="",bQ={},bO,bL=0;for(var bK=0,bP=bR.length;bK<bP;bK++){E=bR[bK];if(E[0]=="M"){bN=+E[1];bM=+E[2]}else{bJ=l(bN,bM,E[1],E[2],E[3],E[4],E[5],E[6]);if(bL+bJ>S){if(e&&!bQ.start){bO=l(bN,bM,E[1],E[2],E[3],E[4],E[5],E[6],S-bL);R+=["C",bO.start.x,bO.start.y,bO.m.x,bO.m.y,bO.x,bO.y];if(bI){return R}bQ.start=R;R=["M",bO.x,bO.y+"C",bO.n.x,bO.n.y,bO.end.x,bO.end.y,E[5],E[6]][aX]();bL+=bJ;bN=+E[5];bM=+E[6];continue}if(!b&&!e){bO=l(bN,bM,E[1],E[2],E[3],E[4],E[5],E[6],S-bL);return{x:bO.x,y:bO.y,alpha:bO.alpha}}}bL+=bJ;bN=+E[5];bM=+E[6]}R+=E}bQ.end=R;bO=b?bL:e?bQ:aJ.findDotsAtSegment(bN,bM,E[1],E[2],E[3],E[4],E[5],E[6],1);bO.alpha&&(bO={x:bO.x,y:bO.y,alpha:bO.alpha});return bO}};var aL=a2(1),M=a2(),Z=a2(0,1);bd.getTotalLength=function(){if(this.type!="path"){return}if(this.node.getTotalLength){return this.node.getTotalLength()}return aL(this.attrs.path)};bd.getPointAtLength=function(b){if(this.type!="path"){return}return M(this.attrs.path,b)};bd.getSubpath=function(E,e){if(this.type!="path"){return}if(ar(this.getTotalLength()-e)<"1e-6"){return Z(this.attrs.path,E).end}var b=Z(this.attrs.path,e,1);return E?Z(b,E).end:b};aJ.easing_formulas={linear:function(b){return b},"<":function(b){return bm(b,3)},">":function(b){return bm(b-1,3)+1},"<>":function(b){b=b*2;if(b<1){return bm(b,3)/2}b-=2;return(bm(b,3)+2)/2},backIn:function(e){var b=1.70158;return e*e*((b+1)*e-b)},backOut:function(e){e=e-1;var b=1.70158;return e*e*((b+1)*e+b)+1},elastic:function(E){if(E==0||E==1){return E}var e=0.3,b=e/4;return bm(2,-10*E)*ap.sin((E-b)*(2*aN)/e)+1},bounce:function(R){var e=7.5625,E=2.75,b;if(R<(1/E)){b=e*R*R}else{if(R<(2/E)){R-=(1.5/E);b=e*R*R+0.75}else{if(R<(2.5/E)){R-=(2.25/E);b=e*R*R+0.9375}else{R-=(2.625/E);b=e*R*R+0.984375}}}return b}};var Y=[],bv=function(){var bK=+new Date;for(var bV=0;bV<Y[t];bV++){var b0=Y[bV];if(b0.stop||b0.el.removed){continue}var S=bK-b0.start,bS=b0.ms,bR=b0.easing,bW=b0.from,bP=b0.diff,E=b0.to,bO=b0.t,bJ=b0.el,bQ={},b;if(S<bS){var R=bR(S/bS);for(var bT in bW){if(bW[ah](bT)){switch(an[bT]){case"along":b=R*bS*bP[bT];E.back&&(b=E.len-b);var bU=M(E[bT],b);bJ.translate(bP.sx-bP.x||0,bP.sy-bP.y||0);bP.x=bU.x;bP.y=bU.y;bJ.translate(bU.x-bP.sx,bU.y-bP.sy);E.rot&&bJ.rotate(bP.r+bU.alpha,bU.x,bU.y);break;case aG:b=+bW[bT]+R*bS*bP[bT];break;case"colour":b="rgb("+[L(ae(bW[bT].r+R*bS*bP[bT].r)),L(ae(bW[bT].g+R*bS*bP[bT].g)),L(ae(bW[bT].b+R*bS*bP[bT].b))][aX](",")+")";break;case"path":b=[];for(var bY=0,bN=bW[bT][t];bY<bN;bY++){b[bY]=[bW[bT][bY][0]];for(var bX=1,bZ=bW[bT][bY][t];bX<bZ;bX++){b[bY][bX]=+bW[bT][bY][bX]+R*bS*bP[bT][bY][bX]}b[bY]=b[bY][aX](aI)}b=b[aX](aI);break;case"csv":switch(bT){case"translation":var bM=R*bS*bP[bT][0]-bO.x,bL=R*bS*bP[bT][1]-bO.y;bO.x+=bM;bO.y+=bL;b=bM+aI+bL;break;case"rotation":b=+bW[bT][0]+R*bS*bP[bT][0];bW[bT][1]&&(b+=","+bW[bT][1]+","+bW[bT][2]);break;case"scale":b=[+bW[bT][0]+R*bS*bP[bT][0],+bW[bT][1]+R*bS*bP[bT][1],(2 in E[bT]?E[bT][2]:aQ),(3 in E[bT]?E[bT][3]:aQ)][aX](aI);break;case"clip-rect":b=[];bY=4;while(bY--){b[bY]=+bW[bT][bY]+R*bS*bP[bT][bY]}break}break;default:var bI=[].concat(bW[bT]);b=[];bY=bJ.paper.customAttributes[bT].length;while(bY--){b[bY]=+bI[bY]+R*bS*bP[bT][bY]}break}bQ[bT]=b}}bJ.attr(bQ);bJ._run&&bJ._run.call(bJ)}else{if(E.along){bU=M(E.along,E.len*!E.back);bJ.translate(bP.sx-(bP.x||0)+bU.x-bP.sx,bP.sy-(bP.y||0)+bU.y-bP.sy);E.rot&&bJ.rotate(bP.r+bU.alpha,bU.x,bU.y)}(bO.x||bO.y)&&bJ.translate(-bO.x,-bO.y);E.scale&&(E.scale+=aQ);bJ.attr(E);Y.splice(bV--,1)}}aJ.svg&&bJ&&bJ.paper&&bJ.paper.safari();Y[t]&&setTimeout(bv)},bz=function(b,E,bI,S,R){var e=bI-S;E.timeouts.push(setTimeout(function(){aJ.is(R,"function")&&R.call(E);E.animate(b,e,b.easing)},S))},L=function(b){return m(bj(b,255),0)},B=function(b,E){if(b==null){return{x:this._.tx,y:this._.ty,toString:D}}this._.tx+=+b;this._.ty+=+E;switch(this.type){case"circle":case"ellipse":this.attr({cx:+b+this.attrs.cx,cy:+E+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+b+this.attrs.x,y:+E+this.attrs.y});break;case"path":var e=av(this.attrs.path);e[0][1]+=+b;e[0][2]+=+E;this.attr({path:e});break}return this};bd.animateWith=function(E,S,b,bJ,bI){for(var e=0,R=Y.length;e<R;e++){if(Y[e].el.id==E.id){S.start=Y[e].start}}return this.animate(S,b,bJ,bI)};bd.animateAlong=aW();bd.animateAlongBack=aW(1);function aW(b){return function(R,E,e,bI){var S={back:b};aJ.is(e,"function")?(bI=e):(S.rot=e);R&&R.constructor==aV&&(R=R.attrs.path);R&&(S.along=R);return this.animate(S,E,bI)}}function aZ(bQ,R,e,bP,bO,bK){var bL=3*R,bN=3*(bP-R)-bL,b=1-bL-bN,bJ=3*e,bM=3*(bO-e)-bJ,bR=1-bJ-bM;function bI(bS){return((b*bS+bN)*bS+bL)*bS}function E(bS,bU){var bT=S(bS,bU);return((bR*bT+bM)*bT+bJ)*bT}function S(bS,bZ){var bY,bX,bV,bT,bW,bU;for(bV=bS,bU=0;bU<8;bU++){bT=bI(bV)-bS;if(ar(bT)<bZ){return bV}bW=(3*b*bV+2*bN)*bV+bL;if(ar(bW)<0.000001){break}bV=bV-bT/bW}bY=0;bX=1;bV=bS;if(bV<bY){return bY}if(bV>bX){return bX}while(bY<bX){bT=bI(bV);if(ar(bT-bS)<bZ){return bV}if(bS>bT){bY=bV}else{bX=bV}bV=(bX-bY)/2+bY}return bV}return E(bQ,1/(200*bK))}bd.onAnimation=function(b){this._run=b||0;return this};bd.animate=function(b2,bS,bR,S){var e=this;e.timeouts=e.timeouts||[];if(aJ.is(bR,"function")||!bR){S=bR||null}if(e.removed){S&&S.call(e);return e}var bW={},E={},bI=false,bN={};for(var bT in b2){if(b2[ah](bT)){if(an[ah](bT)||e.paper.customAttributes[ah](bT)){bI=true;bW[bT]=e.attr(bT);(bW[bT]==null)&&(bW[bT]=q[bT]);E[bT]=b2[bT];switch(an[bT]){case"along":var b0=aL(b2[bT]);var bU=M(b2[bT],b0*!!b2.back);var bJ=e.getBBox();bN[bT]=b0/bS;bN.tx=bJ.x;bN.ty=bJ.y;bN.sx=bU.x;bN.sy=bU.y;E.rot=b2.rot;E.back=b2.back;E.len=b0;b2.rot&&(bN.r=ak(e.rotate())||0);break;case aG:bN[bT]=(E[bT]-bW[bT])/bS;break;case"colour":bW[bT]=aJ.getRGB(bW[bT]);var bV=aJ.getRGB(E[bT]);bN[bT]={r:(bV.r-bW[bT].r)/bS,g:(bV.g-bW[bT].g)/bS,b:(bV.b-bW[bT].b)/bS};break;case"path":var bK=W(bW[bT],E[bT]);bW[bT]=bK[0];var bP=bK[1];bN[bT]=[];for(var bZ=0,bM=bW[bT][t];bZ<bM;bZ++){bN[bT][bZ]=[0];for(var bY=1,b1=bW[bT][bZ][t];bY<b1;bY++){bN[bT][bZ][bY]=(bP[bZ][bY]-bW[bT][bZ][bY])/bS}}break;case"csv":var b=bD(b2[bT])[J](a),bL=bD(bW[bT])[J](a);switch(bT){case"translation":bW[bT]=[0,0];bN[bT]=[b[0]/bS,b[1]/bS];break;case"rotation":bW[bT]=(bL[1]==b[1]&&bL[2]==b[2])?bL:[0,b[1],b[2]];bN[bT]=[(b[0]-bW[bT][0])/bS,0,0];break;case"scale":b2[bT]=b;bW[bT]=bD(bW[bT])[J](a);bN[bT]=[(b[0]-bW[bT][0])/bS,(b[1]-bW[bT][1])/bS,0,0];break;case"clip-rect":bW[bT]=bD(bW[bT])[J](a);bN[bT]=[];bZ=4;while(bZ--){bN[bT][bZ]=(b[bZ]-bW[bT][bZ])/bS}break}E[bT]=b;break;default:b=[].concat(b2[bT]);bL=[].concat(bW[bT]);bN[bT]=[];bZ=e.paper.customAttributes[bT][t];while(bZ--){bN[bT][bZ]=((b[bZ]||0)-(bL[bZ]||0))/bS}break}}}}if(!bI){var bQ=[],R;for(var b3 in b2){if(b2[ah](b3)&&bg.test(b3)){bT={value:b2[b3]};b3=="from"&&(b3=0);b3=="to"&&(b3=100);bT.key=U(b3,10);bQ.push(bT)}}bQ.sort(bn);if(bQ[0].key){bQ.unshift({key:0,value:e.attrs})}for(bZ=0,bM=bQ[t];bZ<bM;bZ++){bz(bQ[bZ].value,e,bS/100*bQ[bZ].key,bS/100*(bQ[bZ-1]&&bQ[bZ-1].key||0),bQ[bZ-1]&&bQ[bZ-1].value.callback)}R=bQ[bQ[t]-1].value.callback;if(R){e.timeouts.push(setTimeout(function(){R.call(e)},bS))}}else{var bX=aJ.easing_formulas[bR];if(!bX){bX=bD(bR).match(c);if(bX&&bX[t]==5){var bO=bX;bX=function(b4){return aZ(b4,+bO[1],+bO[2],+bO[3],+bO[4],bS)}}else{bX=function(b4){return b4}}}Y.push({start:b2.start||+new Date,ms:bS,easing:bX,from:bW,diff:bN,to:E,el:e,t:{x:0,y:0}});aJ.is(S,"function")&&(e._ac=setTimeout(function(){S.call(e)},bS));Y[t]==1&&setTimeout(bv)}return this};bd.stop=function(){for(var b=0;b<Y.length;b++){Y[b].el.id==this.id&&Y.splice(b--,1)}for(b=0,ii=this.timeouts&&this.timeouts.length;b<ii;b++){clearTimeout(this.timeouts[b])}this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};bd.translate=function(b,e){return this.attr({translation:b+" "+e})};bd[a1]=function(){return"Rapha\xebl\u2019s object"};aJ.ae=Y;var ai=function(b){this.items=[];this[t]=0;this.type="set";if(b){for(var e=0,E=b[t];e<E;e++){if(b[e]&&(b[e].constructor==aV||b[e].constructor==ai)){this[this.items[t]]=this.items[this.items[t]]=b[e];this[t]++}}}};ai[bF][k]=function(){var R,b;for(var e=0,E=arguments[t];e<E;e++){R=arguments[e];if(R&&(R.constructor==aV||R.constructor==ai)){b=this.items[t];this[b]=this.items[b]=R;this[t]++}}return this};ai[bF].pop=function(){delete this[this[t]--];return this.items.pop()};for(var I in bd){if(bd[ah](I)){ai[bF][I]=(function(b){return function(){for(var e=0,E=this.items[t];e<E;e++){this.items[e][b][bC](this.items[e],arguments)}return this}})(I)}}ai[bF].attr=function(e,bI){if(e&&aJ.is(e,a8)&&aJ.is(e[0],"object")){for(var b=0,S=e[t];b<S;b++){this.items[b].attr(e[b])}}else{for(var E=0,R=this.items[t];E<R;E++){this.items[E].attr(e,bI)}}return this};ai[bF].animate=function(e,b,bI,bK){(aJ.is(bI,"function")||!bI)&&(bK=bI||null);var S=this.items[t],E=S,bL,bJ=this,R;bK&&(R=function(){!--S&&bK.call(bJ)});bI=aJ.is(bI,ag)?bI:R;bL=this.items[--E].animate(e,b,bI,R);while(E--){this.items[E]&&!this.items[E].removed&&this.items[E].animateWith(bL,e,b,bI,R)}return this};ai[bF].insertAfter=function(e){var b=this.items[t];while(b--){this.items[b].insertAfter(e)}return this};ai[bF].getBBox=function(){var b=[],bI=[],e=[],R=[];for(var E=this.items[t];E--;){var S=this.items[E].getBBox();b[k](S.x);bI[k](S.y);e[k](S.x+S.width);R[k](S.y+S.height)}b=bj[bC](0,b);bI=bj[bC](0,bI);return{x:b,y:bI,width:m[bC](0,e)-b,height:m[bC](0,R)-bI}};ai[bF].clone=function(E){E=new ai;for(var b=0,e=this.items[t];b<e;b++){E[k](this.items[b].clone())}return E};aJ.registerFont=function(e){if(!e.face){return e}this.fonts=this.fonts||{};var R={w:e.w,face:{},glyphs:{}},E=e.face["font-family"];for(var bJ in e.face){if(e.face[ah](bJ)){R.face[bJ]=e.face[bJ]}}if(this.fonts[E]){this.fonts[E][k](R)}else{this.fonts[E]=[R]}if(!e.svg){R.face["units-per-em"]=U(e.face["units-per-em"],10);for(var S in e.glyphs){if(e.glyphs[ah](S)){var bI=e.glyphs[S];R.glyphs[S]={w:bI.w,k:{},d:bI.d&&"M"+bI.d[bt](/[mlcxtrv]/g,function(bK){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bK]||"M"})+"z"};if(bI.k){for(var b in bI.k){if(bI[ah](b)){R.glyphs[S].k[b]=bI.k[b]}}}}}}return e};a0.getFont=function(bK,bL,e,R){R=R||"normal";e=e||"normal";bL=+bL||{normal:400,bold:700,lighter:300,bolder:800}[bL]||400;if(!aJ.fonts){return}var S=aJ.fonts[bK];if(!S){var E=new RegExp("(^|\\s)"+bK[bt](/[^\w\d\s+!~.:_-]/g,aQ)+"(\\s|$)","i");for(var b in aJ.fonts){if(aJ.fonts[ah](b)){if(E.test(b)){S=aJ.fonts[b];break}}}}var bI;if(S){for(var bJ=0,bM=S[t];bJ<bM;bJ++){bI=S[bJ];if(bI.face["font-weight"]==bL&&(bI.face["font-style"]==e||!bI.face["font-style"])&&bI.face["font-stretch"]==R){break}}}return bI};a0.print=function(S,R,b,bK,bL,bU,e){bU=bU||"middle";e=m(bj(e||0,1),-1);var bQ=this.set(),bT=bD(b)[J](aQ),bR=0,bO=aQ,bV;aJ.is(bK,b)&&(bK=this.getFont(bK));if(bK){bV=(bL||16)/bK.face["units-per-em"];var E=bK.face.bbox.split(a),bJ=+E[0],bM=+E[1]+(bU=="baseline"?E[3]-E[1]+(+bK.face.descent):(E[3]-E[1])/2);for(var bP=0,bI=bT[t];bP<bI;bP++){var bN=bP&&bK.glyphs[bT[bP-1]]||{},bS=bK.glyphs[bT[bP]];bR+=bP?(bN.w||bK.w)+(bN.k&&bN.k[bT[bP]]||0)+(bK.w*e):0;bS&&bS.d&&bQ[k](this.path(bS.d).attr({fill:"#000",stroke:"none",translation:[bR,0]}))}bQ.scale(bV,bV,bJ,bM).translate(S-bJ,R-bM)}return bQ};aJ.format=function(e,E){var b=aJ.is(E,a8)?[0][bx](E):arguments;e&&aJ.is(e,ag)&&b[t]-1&&(e=e[bt](bo,function(S,R){return b[++R]==null?aQ:b[R]}));return e||aQ};aJ.ninja=function(){s.was?(aR.Raphael=s.is):delete Raphael;return aJ};aJ.el=bd;aJ.st=ai[bF];s.was?(aR.Raphael=aJ):(Raphael=aJ)})();var RaphaelViews=SC.Object.create();RaphaelViews.RaphaelContext=SC.Builder.create({isRaphaelContext:YES,init:function(b,a){this._node=b;this.prevObject=a;this.isTopLevel=!a;this.children=[];this._groupNode=NO;return this},begin:function(b){var a=RaphaelViews.RaphaelContext(b,this);this.children.push(a);return a},end:function(){return this.prevObject||this},callback:function(a,b){this._thisArg=a;this._callback=b;this._arguments=Array.prototype.slice.call(arguments,2);return this},id:function(a){this._id=a;return this},visible:function(a){this._isVisible=a;return this},populateCanvas:function(e){var j=[],a,l=[],h,b=[],g,c;if(this._callback){g=this._callback.apply(this._thisArg,[e].concat(this._arguments));if(g){j=this.flattenRaphaelSets(g);b=b.concat(j.map(this.nodeForRaphaelObject))}}for(var f=0,k=this.children.length;f<k;f++){a=this.children[f].populateCanvas(e);if(a){l.push(a)}}if(b.length===0&&l.length===0){c=this.generateGroupNode(e);SC.$(e.canvas).append(SC.$(c));b.push(c)}if(b.length===1&&l.length===0){h=b[0]}else{if(!this.isTopLevel){h=this.wrap(b.concat(l),e)}}if(h){if(!h.raphael){h.raphael=g}this.update(h)}return h},update:function(a){if(a===undefined){a=this._node}a.id=this._id;a.style.display=this._isVisible?"":"none"},raphael:function(){return this._node&&this._node.raphael},generateGroupNode:function(a){return a.constructor.vml?document.createElement("group"):document.createElementNS("http://www.w3.org/2000/svg","g")},wrap:function(a,g){var f=this.generateGroupNode(g);var e=SC.$(f);e.insertBefore(SC.$(a[0]));for(var b=0,c=a.length;b<c;b++){e.append(a[b])}return e[0]},flattenRaphaelSets:function(c){var e=[];if(c.type==="set"){for(var a=0,b=c.items.length;a<b;a++){e=e.concat(this.flattenRaphaelSets(c.items[a]))}return e}else{return[c]}},nodeForRaphaelObject:function(b){var a=b.paper.constructor.vml;if(!(a||b.paper.constructor.svg)){throw"RaphaelContext can't figure out from raphaelObj whether mode is SVG or VML"}return a?b.Group:b.node}});RaphaelViews.RenderSupport={render:function(a,b){if(b){this.renderChildViews(a,b)}},layerIdDidChange:function(){var a=this.get("layer");if(a&&this.get("layerId")!==this._lastLayerId){if(this._lastLayerId&&SC.View.views[this._lastLayerId]===this){delete SC.View.views[this._lastLayerId]}this._lastLayerId=this.get("layerId");SC.View.views[this.get("layerId")]=this;a.id=this.get("layerId")}}.observes("layerId"),createLayer:function(){if(this.get("layer")){return}var a=RaphaelViews.RaphaelContext();a.isTopLevel=NO;this.prepareRaphaelContext(a,YES);this.set("layer",a.populateCanvas(this.get("raphaelCanvas")));this._notifyDidCreateLayer()},raphaelCanvas:function(){var a=this.get("parentView");return a.get("raphaelCanvas")}.property(),raphaelObject:function(){var a=this.get("layer");return a&&a.raphael}.property(),updateLayer:function(){var a=RaphaelViews.RaphaelContext(this.get("layer"));this.prepareRaphaelContext(a,NO);a.update()},prepareRaphaelContext:function(a,b){a.id(this.get("layerId"));a.visible(this.get("isVisible"));this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);this.render(a,b);this.endPropertyChanges()},renderChildViews:function(e,g){var b=this.get("childViews");var a;for(var c=0,f=b.length;c<f;++c){a=b[c];if(!a){continue}e=e.begin(a.get("layer"));a.prepareRaphaelContext(e,g);e=e.end()}return e},renderLayout:function(a,b){},_notifyDidCreateLayer:function(){arguments.callee.base.apply(this,arguments);if(this._isSleeping){this.get("raphaelObject").hide()}this._view_layer=null;this.notifyPropertyChange("layer");this._view_layer=this.get("layer")},_notifyWillDestroyLayer:function(){this._view_layer=null;arguments.callee.base.apply(this,arguments)},sleepInDOMPool:function(){this._isSleeping=YES;this._wasVisibleBeforeSleep=this.get("isVisible");var a=this.get("layer");if(a&&a.raphael&&this._wasVisibleBeforeSleep){a.raphael.hide()}},wakeFromDOMPool:function(){this.wakeFromPool()},awakeFromPool:function(){this.wakeFromPool()},wakeFromPool:function(){this._isSleeping=NO;var a=this.get("layer");if(this._wasVisibleBeforeSleep&&a&&a.raphael){a.raphael.show()}}};RaphaelViews.RaphaelView=SC.View.extend(RaphaelViews.RenderSupport,{});sc_require("context/raphael_context");RaphaelViews.RaphaelCanvasView=SC.View.extend({_notifyDidCreateLayer:function(){this.notifyPropertyChange("layer");this.didCreateLayer();var a=this.didCreateLayerMixin;if(a){for(var b=0,c=a.length;b<c;++b){a[b].call(this)}}},_notifyDidCreateChildViewLayers:function(){var a=this.get("childViews");for(var b=0,c=a.length;b<c;++b){if(!a[b]){continue}a[b]._notifyDidCreateLayer()}},didCreateLayer:function(){var a=this.get("layer");var b=Raphael(a,"100%","100%");this.set("raphaelCanvas",b);if(this._preparedRaphaelContext){this._preparedRaphaelContext.populateCanvas(b);this._notifyDidCreateChildViewLayers()}},containerLayer:function(){return this.get("raphaelCanvas").canvas}.property(),render:function(a,b){if(b){this.renderChildViews(a,b)}},renderChildViews:function(f,h){var c=this.get("childViews");var a;var b=this.raphaelContext();b.isTopLevel=YES;for(var e=0,g=c.length;e<g;++e){a=c[e];if(!a){continue}b=b.begin(a.get("layer"));a.prepareRaphaelContext(b,h);b=b.end()}this._preparedRaphaelContext=b;return f},raphaelContext:function(){return RaphaelViews.RaphaelContext()}});RaphaelViews.RaphaelCollectionView=SC.CollectionView.extend(RaphaelViews.RenderSupport,{});
/*!
 * g.Raphael 0.4.1 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){var a=Math.max,c=Math.min;Raphael.fn.g=Raphael.fn.g||{};Raphael.fn.g.markers={disc:"disc",o:"disc",flower:"flower",f:"flower",diamond:"diamond",d:"diamond",square:"square",s:"square",triangle:"triangle",t:"triangle",star:"star","*":"star",cross:"cross",x:"cross",plus:"plus","+":"plus",arrow:"arrow","->":"arrow"};Raphael.fn.g.shim={stroke:"none",fill:"#000","fill-opacity":0};Raphael.fn.g.txtattr={font:"12px Arial, sans-serif"};Raphael.fn.g.colors=[];var e=[0.6,0.2,0.05,0.1333,0.75,0];for(var b=0;b<10;b++){if(b<e.length){Raphael.fn.g.colors.push("hsb("+e[b]+", .75, .75)")}else{Raphael.fn.g.colors.push("hsb("+e[b-e.length]+", 1, .5)")}}Raphael.fn.g.text=function(f,h,g){return this.text(f,h,g).attr(this.g.txtattr)};Raphael.fn.g.labelise=function(f,h,g){if(f){return(f+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(j,l,k){if(l){return(+h).toFixed(l.replace(/^#+\.?/g,"").length)}if(k){return(h*100/g).toFixed(k.replace(/^%+\.?/g,"").length)+"%"}})}else{return(+h).toFixed(0)}};Raphael.fn.g.finger=function(m,l,g,n,h,j,k){if((h&&!n)||(!h&&!g)){return k?"":this.path()}j={square:"square",sharp:"sharp",soft:"soft"}[j]||"round";var p;n=Math.round(n);g=Math.round(g);m=Math.round(m);l=Math.round(l);switch(j){case"round":if(!h){var f=~~(n/2);if(g<f){f=g;p=["M",m+0.5,l+0.5-~~(n/2),"l",0,0,"a",f,~~(n/2),0,0,1,0,n,"l",0,0,"z"]}else{p=["M",m+0.5,l+0.5-f,"l",g-f,0,"a",f,f,0,1,1,0,n,"l",f-g,0,"z"]}}else{f=~~(g/2);if(n<f){f=n;p=["M",m-~~(g/2),l,"l",0,0,"a",~~(g/2),f,0,0,1,g,0,"l",0,0,"z"]}else{p=["M",m-f,l,"l",0,f-n,"a",f,f,0,1,1,g,0,"l",0,n-f,"z"]}}break;case"sharp":if(!h){var o=~~(n/2);p=["M",m,l+o,"l",0,-n,a(g-o,0),0,c(o,g),o,-c(o,g),o+(o*2<n),"z"]}else{o=~~(g/2);p=["M",m+o,l,"l",-g,0,0,-a(n-o,0),o,-c(o,n),o,c(o,n),o,"z"]}break;case"square":if(!h){p=["M",m,l+~~(n/2),"l",0,-n,g,0,0,n,"z"]}else{p=["M",m+~~(g/2),l,"l",1-g,0,0,-n,g-1,0,"z"]}break;case"soft":if(!h){f=c(g,Math.round(n/5));p=["M",m+0.5,l+0.5-~~(n/2),"l",g-f,0,"a",f,f,0,0,1,f,f,"l",0,n-f*2,"a",f,f,0,0,1,-f,f,"l",f-g,0,"z"]}else{f=c(Math.round(g/5),n);p=["M",m-~~(g/2),l,"l",0,f-n,"a",f,f,0,0,1,f,-f,"l",g-2*f,0,"a",f,f,0,0,1,f,f,"l",0,n-f,"z"]}}if(k){return p.join(",")}else{return this.path(p)}};Raphael.fn.g.disc=function(f,h,g){return this.circle(f,h,g)};Raphael.fn.g.line=function(f,h,g){return this.rect(f-g,h-g/5,2*g,2*g/5)};Raphael.fn.g.square=function(f,h,g){g=g*0.7;return this.rect(f-g,h-g,2*g,2*g)};Raphael.fn.g.triangle=function(f,h,g){g*=1.75;return this.path("M".concat(f,",",h,"m0-",g*0.58,"l",g*0.5,",",g*0.87,"-",g,",0z"))};Raphael.fn.g.diamond=function(f,h,g){return this.path(["M",f,h-g,"l",g,g,-g,g,-g,-g,g,-g,"z"])};Raphael.fn.g.flower=function(j,h,f,g){f=f*1.25;var o=f,m=o*0.5;g=+g<3||!g?5:g;var p=["M",j,h+m,"Q"],l;for(var k=1;k<g*2+1;k++){l=k%2?o:m;p=p.concat([+(j+l*Math.sin(k*Math.PI/g)).toFixed(3),+(h+l*Math.cos(k*Math.PI/g)).toFixed(3)])}p.push("z");return this.path(p.join(","))};Raphael.fn.g.star=function(f,n,m,h,g){h=h||m*0.382;g=g||5;var l=["M",f,n+h,"L"],k;for(var j=1;j<g*2;j++){k=j%2?m:h;l=l.concat([(f+k*Math.sin(j*Math.PI/g)),(n+k*Math.cos(j*Math.PI/g))])}l.push("z");return this.path(l.join(","))};Raphael.fn.g.cross=function(f,h,g){g=g/2.5;return this.path("M".concat(f-g,",",h,"l",[-g,-g,g,-g,g,g,g,-g,g,g,-g,g,g,g,-g,g,-g,-g,-g,g,-g,-g,"z"]))};Raphael.fn.g.plus=function(f,h,g){g=g/2;return this.path("M".concat(f-g/2,",",h-g/2,"l",[0,-g,g,0,0,g,g,0,0,g,-g,0,0,g,-g,0,0,-g,-g,0,0,-g,"z"]))};Raphael.fn.g.arrow=function(f,h,g){return this.path("M".concat(f-g*0.7,",",h-g*0.4,"l",[g*0.6,0,0,-g*0.4,g,g*0.8,-g,g*0.8,0,-g*0.4,-g*0.6,0],"z"))};Raphael.fn.g.tag=function(f,n,m,l,j){l=l||0;j=j==null?5:j;m=m==null?"$9.99":m;var h=0.5522*j,g=this.set(),k=3;g.push(this.path().attr({fill:"#000",stroke:"#000"}));g.push(this.text(f,n,m).attr(this.g.txtattr).attr({fill:"#fff","font-family":"Helvetica, Arial"}));g.update=function(){this.rotate(0,f,n);var p=this[1].getBBox();if(p.height>=j*2){this[0].attr({path:["M",f,n+j,"a",j,j,0,1,1,0,-j*2,j,j,0,1,1,0,j*2,"m",0,-j*2-k,"a",j+k,j+k,0,1,0,0,(j+k)*2,"L",f+j+k,n+p.height/2+k,"l",p.width+2*k,0,0,-p.height-2*k,-p.width-2*k,0,"L",f,n-j-k].join(",")})}else{var o=Math.sqrt(Math.pow(j+k,2)-Math.pow(p.height/2+k,2));this[0].attr({path:["M",f,n+j,"c",-h,0,-j,h-j,-j,-j,0,-h,j-h,-j,j,-j,h,0,j,j-h,j,j,0,h,h-j,j,-j,j,"M",f+o,n-p.height/2-k,"a",j+k,j+k,0,1,0,0,p.height+2*k,"l",j+k-o+p.width+2*k,0,0,-p.height-2*k,"L",f+o,n-p.height/2-k].join(",")})}this[1].attr({x:f+j+k+p.width/2,y:n});l=(360-l)%360;this.rotate(l,f,n);l>90&&l<270&&this[1].attr({x:f-j-k-p.width/2,y:n,rotation:[180+l,f,n]});return this};g.update();return g};Raphael.fn.g.popupit=function(m,l,n,g,u){g=g==null?2:g;u=u||5;m=Math.round(m);l=Math.round(l);var k=n.getBBox(),o=Math.round(k.width/2),j=Math.round(k.height/2),t=[0,o+u*2,0,-o-u*2],q=[-j*2-u*3,-j-u,0,-j-u],f=["M",m-t[g],l-q[g],"l",-u,(g==2)*-u,-a(o-u,0),0,"a",u,u,0,0,1,-u,-u,"l",0,-a(j-u,0),(g==3)*-u,-u,(g==3)*u,-u,0,-a(j-u,0),"a",u,u,0,0,1,u,-u,"l",a(o-u,0),0,u,!g*-u,u,!g*u,a(o-u,0),0,"a",u,u,0,0,1,u,u,"l",0,a(j-u,0),(g==1)*u,u,(g==1)*-u,u,0,a(j-u,0),"a",u,u,0,0,1,-u,u,"l",-a(o-u,0),0,"z"].join(","),s=[{x:m,y:l+u*2+j},{x:m-u*2-o,y:l},{x:m,y:l-u*2-j},{x:m+u*2+o,y:l}][g];n.translate(s.x-o-k.x,s.y-j-k.y);return this.path(f).attr({fill:"#000",stroke:"none"}).insertBefore(n.node?n:n[0])};Raphael.fn.g.popup=function(f,m,l,g,j){g=g==null?2:g>3?3:g;j=j||5;l=l||"$9.99";var h=this.set(),k=3;h.push(this.path().attr({fill:"#000",stroke:"#000"}));h.push(this.text(f,m,l).attr(this.g.txtattr).attr({fill:"#fff","font-family":"Helvetica, Arial"}));h.update=function(q,o,s){q=q||f;o=o||m;var u=this[1].getBBox(),v=u.width/2,t=u.height/2,z=[0,v+j*2,0,-v-j*2],x=[-t*2-j*3,-t-j,0,-t-j],n=["M",q-z[g],o-x[g],"l",-j,(g==2)*-j,-a(v-j,0),0,"a",j,j,0,0,1,-j,-j,"l",0,-a(t-j,0),(g==3)*-j,-j,(g==3)*j,-j,0,-a(t-j,0),"a",j,j,0,0,1,j,-j,"l",a(v-j,0),0,j,!g*-j,j,!g*j,a(v-j,0),0,"a",j,j,0,0,1,j,j,"l",0,a(t-j,0),(g==1)*j,j,(g==1)*-j,j,0,a(t-j,0),"a",j,j,0,0,1,-j,j,"l",-a(v-j,0),0,"z"].join(","),y=[{x:q,y:o+j*2+t},{x:q-j*2-v,y:o},{x:q,y:o-j*2-t},{x:q+j*2+v,y:o}][g];y.path=n;if(s){this.animate(y,500,">")}else{this.attr(y)}return this};return h.update(f,m)};Raphael.fn.g.flag=function(f,l,k,j){j=j||0;k=k||"$9.99";var g=this.set(),h=3;g.push(this.path().attr({fill:"#000",stroke:"#000"}));g.push(this.text(f,l,k).attr(this.g.txtattr).attr({fill:"#fff","font-family":"Helvetica, Arial"}));g.update=function(m,p){this.rotate(0,m,p);var o=this[1].getBBox(),n=o.height/2;this[0].attr({path:["M",m,p,"l",n+h,-n-h,o.width+2*h,0,0,o.height+2*h,-o.width-2*h,0,"z"].join(",")});this[1].attr({x:m+n+h+o.width/2,y:p});j=360-j;this.rotate(j,m,p);j>90&&j<270&&this[1].attr({x:m-r-h-o.width/2,y:p,rotation:[180+j,m,p]});return this};return g.update(f,l)};Raphael.fn.g.label=function(f,j,h){var g=this.set();g.push(this.rect(f,j,10,10).attr({stroke:"none",fill:"#000"}));g.push(this.text(f,j,h).attr(this.g.txtattr).attr({fill:"#fff"}));g.update=function(){var l=this[1].getBBox(),k=c(l.width+10,l.height+10)/2;this[0].attr({x:l.x-k/2,y:l.y-k/2,width:l.width+k,height:l.height+k,r:k})};g.update();return g};Raphael.fn.g.labelit=function(h){var g=h.getBBox(),f=c(20,g.width+10,g.height+10)/2;return this.rect(g.x-f/2,g.y-f/2,g.width+f,g.height+f,f).attr({stroke:"none",fill:"#000"}).insertBefore(h.node?h:h[0])};Raphael.fn.g.drop=function(f,l,k,h,j){h=h||30;j=j||0;var g=this.set();g.push(this.path(["M",f,l,"l",h,0,"A",h*0.4,h*0.4,0,1,0,f+h*0.7,l-h*0.7,"z"]).attr({fill:"#000",stroke:"none",rotation:[22.5-j,f,l]}));j=(j+90)*Math.PI/180;g.push(this.text(f+h*Math.sin(j),l+h*Math.cos(j),k).attr(this.g.txtattr).attr({"font-size":h*12/30,fill:"#fff"}));g.drop=g[0];g.text=g[1];return g};Raphael.fn.g.blob=function(g,n,m,l,j){l=(+l+1?l:45)+90;j=j||12;var f=Math.PI/180,k=j*12/12;var h=this.set();h.push(this.path().attr({fill:"#000",stroke:"none"}));h.push(this.text(g+j*Math.sin((l)*f),n+j*Math.cos((l)*f)-k/2,m).attr(this.g.txtattr).attr({"font-size":k,fill:"#fff"}));h.update=function(u,t,z){u=u||g;t=t||n;var B=this[1].getBBox(),E=a(B.width+k,j*25/12),A=a(B.height+k,j*25/12),p=u+j*Math.sin((l-22.5)*f),C=t+j*Math.cos((l-22.5)*f),s=u+j*Math.sin((l+22.5)*f),D=t+j*Math.cos((l+22.5)*f),G=(s-p)/2,F=(D-C)/2,q=E/2,o=A/2,y=-Math.sqrt(Math.abs(q*q*o*o-q*q*F*F-o*o*G*G)/(q*q*F*F+o*o*G*G)),x=y*q*F/o+(s+p)/2,v=y*-o*G/q+(D+C)/2;if(z){this.animate({x:x,y:v,path:["M",g,n,"L",s,D,"A",q,o,0,1,1,p,C,"z"].join(",")},500,">")}else{this.attr({x:x,y:v,path:["M",g,n,"L",s,D,"A",q,o,0,1,1,p,C,"z"].join(",")})}return this};h.update(g,n);return h};Raphael.fn.g.colorValue=function(j,h,g,f){return"hsb("+[c((1-j/h)*0.4,1),g||0.75,f||0.75]+")"};Raphael.fn.g.snapEnds=function(n,o,m){var k=n,p=o;if(k==p){return{from:k,to:p,power:0}}function q(f){return Math.abs(f-0.5)<0.25?~~(f)+0.5:Math.round(f)}var l=(p-k)/m,g=~~(l),j=g,h=0;if(g){while(j){h--;j=~~(l*Math.pow(10,h))/Math.pow(10,h)}h++}else{while(!g){h=h||1;g=~~(l*Math.pow(10,h))/Math.pow(10,h);h++}h&&h--}p=q(o*Math.pow(10,h))/Math.pow(10,h);if(p<o){p=q((o+0.5)*Math.pow(10,h))/Math.pow(10,h)}k=q((n-(h>0?0:0.5))*Math.pow(10,h))/Math.pow(10,h);return{from:k,to:p,power:h}};Raphael.fn.g.axis=function(v,u,o,G,l,J,m,L,n,g){g=g==null?2:g;n=n||"t";J=J||10;var F=n=="|"||n==" "?["M",v+0.5,u,"l",0,0.001]:m==1||m==3?["M",v+0.5,u,"l",0,-o]:["M",v,u+0.5,"l",o,0],z=this.g.snapEnds(G,l,J),K=z.from,B=z.to,I=z.power,H=0,C=this.set();d=(B-K)/J;var s=K,q=I>0?I:0;w=o/J;if(+m==1||+m==3){var h=u,A=(m-1?1:-1)*(g+3+!!(m-1));while(h>=u-o){n!="-"&&n!=" "&&(F=F.concat(["M",v-(n=="+"||n=="|"?g:!(m-1)*g*2),h+0.5,"l",g*2+1,0]));C.push(this.text(v+A,h,(L&&L[H++])||(Math.round(s)==s?s:+s.toFixed(q))).attr(this.g.txtattr).attr({"text-anchor":m-1?"start":"end"}));s+=d;h-=w}if(Math.round(h+w-(u-o))){n!="-"&&n!=" "&&(F=F.concat(["M",v-(n=="+"||n=="|"?g:!(m-1)*g*2),u-o+0.5,"l",g*2+1,0]));C.push(this.text(v+A,u-o,(L&&L[H])||(Math.round(s)==s?s:+s.toFixed(q))).attr(this.g.txtattr).attr({"text-anchor":m-1?"start":"end"}))}}else{s=K;q=(I>0)*I;A=(m?-1:1)*(g+9+!m);var k=v,w=o/J,D=0,E=0;while(k<=v+o){n!="-"&&n!=" "&&(F=F.concat(["M",k+0.5,u-(n=="+"?g:!!m*g*2),"l",0,g*2+1]));C.push(D=this.text(k,u+A,(L&&L[H++])||(Math.round(s)==s?s:+s.toFixed(q))).attr(this.g.txtattr));var p=D.getBBox();if(E>=p.x-5){C.pop(C.length-1).remove()}else{E=p.x+p.width}s+=d;k+=w}if(Math.round(k-w-v-o)){n!="-"&&n!=" "&&(F=F.concat(["M",v+o+0.5,u-(n=="+"?g:!!m*g*2),"l",0,g*2+1]));C.push(this.text(v+o,u+A,(L&&L[H])||(Math.round(s)==s?s:+s.toFixed(q))).attr(this.g.txtattr))}}var M=this.path(F);M.text=C;M.all=this.set([M,C]);M.remove=function(){this.text.remove();this.constructor.prototype.remove.call(this)};return M};Raphael.el.lighter=function(g){g=g||2;var f=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[f[0],f[1]];f[0]=Raphael.rgb2hsb(Raphael.getRGB(f[0]).hex);f[1]=Raphael.rgb2hsb(Raphael.getRGB(f[1]).hex);f[0].b=c(f[0].b*g,1);f[0].s=f[0].s/g;f[1].b=c(f[1].b*g,1);f[1].s=f[1].s/g;this.attr({fill:"hsb("+[f[0].h,f[0].s,f[0].b]+")",stroke:"hsb("+[f[1].h,f[1].s,f[1].b]+")"})};Raphael.el.darker=function(g){g=g||2;var f=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[f[0],f[1]];f[0]=Raphael.rgb2hsb(Raphael.getRGB(f[0]).hex);f[1]=Raphael.rgb2hsb(Raphael.getRGB(f[1]).hex);f[0].s=c(f[0].s*g,1);f[0].b=f[0].b/g;f[1].s=c(f[1].s*g,1);f[1].b=f[1].b/g;this.attr({fill:"hsb("+[f[0].h,f[0].s,f[0].b]+")",stroke:"hsb("+[f[1].h,f[1].s,f[1].b]+")"})};Raphael.el.original=function(){if(this.fs){this.attr({fill:this.fs[0],stroke:this.fs[1]});delete this.fs}}})();
/*!
 * g.Raphael 0.4.1 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.fn.g.barchart=function(E,C,a,e,Q,w){w=w||{};var R={round:"round",sharp:"sharp",soft:"soft"}[w.type]||"square",o=parseFloat(w.gutter||"20%"),O=this.set(),z=this.set(),f=this.set(),u=this.set(),A=Math.max.apply(Math,Q),P=[],c=this,D=0,H=w.colors||this.g.colors,t=Q.length;if(this.raphael.is(Q[0],"array")){A=[];D=t;t=0;for(var M=Q.length;M--;){z.push(this.set());A.push(Math.max.apply(Math,Q[M]));t=Math.max(t,Q[M].length)}if(w.stacked){for(var M=t;M--;){var m=0;for(var L=Q.length;L--;){m+=+Q[L][M]||0}P.push(m)}}for(var M=Q.length;M--;){if(Q[M].length<t){for(var L=t;L--;){Q[M].push(0)}}}A=Math.max.apply(Math,w.stacked?P:A)}A=(w.to)||A;var F=a/(t*(100+o)+o)*100,b=F*o/100,k=w.vgutter==null?20:w.vgutter,v=[],l=E+b,g=(e-2*k)/A;if(!w.stretch){b=Math.round(b);F=Math.floor(F)}!w.stacked&&(F/=D||1);for(var M=0;M<t;M++){v=[];for(var L=0;L<(D||1);L++){var N=Math.round((D?Q[L][M]:Q[M])*g),n=C+e-k-N,J=this.g.finger(Math.round(l+F/2),n+N,F,N,true,R).attr({stroke:"none",fill:H[D?L:M]});if(D){z[L].push(J)}else{z.push(J)}J.y=n;J.x=Math.round(l+F/2);J.w=F;J.h=N;J.value=D?Q[L][M]:Q[M];if(!w.stacked){l+=F}else{v.push(J)}}if(w.stacked){var K;u.push(K=this.rect(v[0].x-v[0].w/2,C,F,e).attr(this.g.shim));K.bars=this.set();var p=0;for(var G=v.length;G--;){v[G].toFront()}for(var G=0,q=v.length;G<q;G++){var J=v[G],B,N=(p+J.value)*g,I=this.g.finger(J.x,C+e-k-!!p*0.5,F,N,true,R,1);K.bars.push(J);p&&J.attr({path:I});J.h=N;J.y=C+e-k-!!p*0.5-N;f.push(B=this.rect(J.x-J.w/2,J.y,F,J.value*g).attr(this.g.shim));B.bar=J;B.value=J.value;p+=J.value}l+=F}l+=b}u.toFront();l=E+b;if(!w.stacked){for(var M=0;M<t;M++){for(var L=0;L<(D||1);L++){var B;f.push(B=this.rect(Math.round(l),C+k,F,e-k).attr(this.g.shim));B.bar=D?z[L][M]:z[M];B.value=B.bar.value;l+=F}l+=b}}O.label=function(y,U){y=y||[];this.labels=c.set();var V,h=-Infinity;if(w.stacked){for(var x=0;x<t;x++){var S=0;for(var s=0;s<(D||1);s++){S+=D?Q[s][x]:Q[x];if(s==D-1){var W=c.g.labelise(y[x],S,A);V=c.g.text(z[x*(D||1)+s].x,C+e-k/2,W).insertBefore(f[x*(D||1)+s]);var T=V.getBBox();if(T.x-7<h){V.remove()}else{this.labels.push(V);h=T.x+T.width}}}}}else{for(var x=0;x<t;x++){for(var s=0;s<(D||1);s++){var W=c.g.labelise(D?y[s]&&y[s][x]:y[x],D?Q[s][x]:Q[x],A);V=c.g.text(z[x*(D||1)+s].x,U?C+e-k/2:z[x*(D||1)+s].y-10,W).insertBefore(f[x*(D||1)+s]);var T=V.getBBox();if(T.x-7<h){V.remove()}else{this.labels.push(V);h=T.x+T.width}}}}return this};O.hover=function(j,h){u.hide();f.show();f.mouseover(j).mouseout(h);return this};O.hoverColumn=function(j,h){f.hide();u.show();h=h||function(){};u.mouseover(j).mouseout(h);return this};O.click=function(h){u.hide();f.show();f.click(h);return this};O.each=function(j){if(!Raphael.is(j,"function")){return this}for(var h=f.length;h--;){j.call(f[h])}return this};O.eachColumn=function(j){if(!Raphael.is(j,"function")){return this}for(var h=u.length;h--;){j.call(u[h])}return this};O.clickColumn=function(h){f.hide();u.show();u.click(h);return this};O.push(z,f,u);O.bars=z;O.covers=f;return O};Raphael.fn.g.hbarchart=function(o,m,D,A,c,u){u=u||{};var f={round:"round",sharp:"sharp",soft:"soft"}[u.type]||"square",g=parseFloat(u.gutter||"20%"),w=this.set(),C=this.set(),k=this.set(),G=this.set(),O=Math.max.apply(Math,c),a=[],p=this,E=0,n=u.colors||this.g.colors,J=c.length;if(this.raphael.is(c[0],"array")){O=[];E=J;J=0;for(var I=c.length;I--;){C.push(this.set());O.push(Math.max.apply(Math,c[I]));J=Math.max(J,c[I].length)}if(u.stacked){for(var I=J;I--;){var q=0;for(var H=c.length;H--;){q+=+c[H][I]||0}a.push(q)}}for(var I=c.length;I--;){if(c[I].length<J){for(var H=J;H--;){c[I].push(0)}}}O=Math.max.apply(Math,u.stacked?a:O)}O=(u.to)||O;var L=Math.floor(A/(J*(100+g)+g)*100),l=Math.floor(L*g/100),h=[],b=m+l,e=(D-1)/O;!u.stacked&&(L/=E||1);for(var I=0;I<J;I++){h=[];for(var H=0;H<(E||1);H++){var N=E?c[H][I]:c[I],K=this.g.finger(o,b+L/2,Math.round(N*e),L-1,false,f).attr({stroke:"none",fill:n[E?H:I]});if(E){C[H].push(K)}else{C.push(K)}K.x=o+Math.round(N*e);K.y=b+L/2;K.w=Math.round(N*e);K.h=L;K.value=+N;if(!u.stacked){b+=L}else{h.push(K)}}if(u.stacked){var t=this.rect(o,h[0].y-h[0].h/2,D,L).attr(this.g.shim);G.push(t);t.bars=this.set();var z=0;for(var v=h.length;v--;){h[v].toFront()}for(var v=0,F=h.length;v<F;v++){var K=h[v],M,N=Math.round((z+K.value)*e),B=this.g.finger(o,K.y,N,L-1,false,f,1);t.bars.push(K);z&&K.attr({path:B});K.w=N;K.x=o+N;k.push(M=this.rect(o+z*e,K.y-K.h/2,K.value*e,L).attr(this.g.shim));M.bar=K;z+=K.value}b+=L}b+=l}G.toFront();b=m+l;if(!u.stacked){for(var I=0;I<J;I++){for(var H=0;H<(E||1);H++){var M=this.rect(o,b,D,L).attr(this.g.shim);k.push(M);M.bar=E?C[H][I]:C[I];M.value=M.bar.value;b+=L}b+=l}}w.label=function(T,R){T=T||[];this.labels=p.set();for(var Q=0;Q<J;Q++){for(var P=0;P<E;P++){var y=p.g.labelise(E?T[P]&&T[P][Q]:T[Q],E?c[P][Q]:c[Q],O);var S=R?C[Q*(E||1)+P].x-L/2+3:o+5,x=R?"end":"start",s;this.labels.push(s=p.g.text(S,C[Q*(E||1)+P].y,y).attr({"text-anchor":x}).insertBefore(k[0]));if(s.getBBox().x<o+5){s.attr({x:o+5,"text-anchor":"start"})}else{C[Q*(E||1)+P].label=s}}}return this};w.hover=function(s,j){G.hide();k.show();j=j||function(){};k.mouseover(s).mouseout(j);return this};w.hoverColumn=function(s,j){k.hide();G.show();j=j||function(){};G.mouseover(s).mouseout(j);return this};w.each=function(s){if(!Raphael.is(s,"function")){return this}for(var j=k.length;j--;){s.call(k[j])}return this};w.eachColumn=function(s){if(!Raphael.is(s,"function")){return this}for(var j=G.length;j--;){s.call(G[j])}return this};w.click=function(j){G.hide();k.show();k.click(j);return this};w.clickColumn=function(j){k.hide();G.show();G.click(j);return this};w.push(C,k,G);w.bars=C;w.covers=k;return w};
/*!
 * g.Raphael 0.4.1 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.fn.g.dotchart=function(M,L,a,h,A,z,t,H){function T(b){+b[0]&&(b[0]=c.g.axis(M+s,L+s,a-2*s,D,o,H.axisxstep||Math.floor((a-2*s)/20),2,H.axisxlabels||null,H.axisxtype||"t"));+b[1]&&(b[1]=c.g.axis(M+a-s,L+h-s,h-2*s,C,n,H.axisystep||Math.floor((h-2*s)/20),3,H.axisylabels||null,H.axisytype||"t"));+b[2]&&(b[2]=c.g.axis(M+s,L+h-s+G,a-2*s,D,o,H.axisxstep||Math.floor((a-2*s)/20),0,H.axisxlabels||null,H.axisxtype||"t"));+b[3]&&(b[3]=c.g.axis(M+s-G,L+h-s,h-2*s,C,n,H.axisystep||Math.floor((h-2*s)/20),1,H.axisylabels||null,H.axisytype||"t"))}H=H||{};var w=this.g.snapEnds(Math.min.apply(Math,A),Math.max.apply(Math,A),A.length-1),D=w.from,o=w.to,s=H.gutter||10,K=this.g.snapEnds(Math.min.apply(Math,z),Math.max.apply(Math,z),z.length-1),C=K.from,n=K.to,B=Math.max(A.length,z.length,t.length),v=this.g.markers[H.symbol]||"disc",I=this.set(),u=this.set(),F=H.max||100,q=Math.max.apply(Math,t),p=[],c=this,P=Math.sqrt(q/Math.PI)*2/F;for(var Q=0;Q<B;Q++){p[Q]=Math.min(Math.sqrt(t[Q]/Math.PI)*2/P,F)}s=Math.max.apply(Math,p.concat(s));var E=this.set(),G=Math.max.apply(Math,p);if(H.axis){var m=(H.axis+"").split(/[,\s]+/);T(m);var S=[],U=[];for(var Q=0,J=m.length;Q<J;Q++){var V=m[Q].all?m[Q].all.getBBox()[["height","width"][Q%2]]:0;S[Q]=V+s;U[Q]=V}s=Math.max.apply(Math,S.concat(s));for(var Q=0,J=m.length;Q<J;Q++){if(m[Q].all){m[Q].remove();m[Q]=1}}T(m);for(var Q=0,J=m.length;Q<J;Q++){if(m[Q].all){E.push(m[Q].all)}}I.axis=E}var O=(a-s*2)/((o-D)||1),N=(h-s*2)/((n-C)||1);for(var Q=0,J=z.length;Q<J;Q++){var f=this.raphael.is(v,"array")?v[Q]:v,l=M+s+(A[Q]-D)*O,j=L+h-s-(z[Q]-C)*N;f&&p[Q]&&u.push(this.g[f](l,j,p[Q]).attr({fill:H.heat?this.g.colorValue(p[Q],G):Raphael.fn.g.colors[0],"fill-opacity":H.opacity?p[Q]/F:1,stroke:"none"}))}var e=this.set();for(var Q=0,J=z.length;Q<J;Q++){var l=M+s+(A[Q]-D)*O,j=L+h-s-(z[Q]-C)*N;e.push(this.circle(l,j,G).attr(this.g.shim));H.href&&H.href[Q]&&e[Q].attr({href:H.href[Q]});e[Q].r=+p[Q].toFixed(3);e[Q].x=+l.toFixed(3);e[Q].y=+j.toFixed(3);e[Q].X=A[Q];e[Q].Y=z[Q];e[Q].value=t[Q]||0;e[Q].dot=u[Q]}I.covers=e;I.series=u;I.push(u,E,e);I.hover=function(g,b){e.mouseover(g).mouseout(b);return this};I.click=function(b){e.click(b);return this};I.each=function(g){if(!Raphael.is(g,"function")){return this}for(var b=e.length;b--;){g.call(e[b])}return this};I.href=function(k){var g;for(var b=e.length;b--;){g=e[b];if(g.X==k.x&&g.Y==k.y&&g.value==k.value){g.attr({href:k.href})}}};return I};
/*!
 * g.Raphael 0.4.2 - Charting library, based on Raphaël
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
Raphael.fn.g.linechart=function(O,N,b,e,v,u,H){function G(y,ah){var x=y.length/ah,X=0,a=x,ag=0,Y=[];while(X<y.length){a--;if(a<0){ag+=y[X]*(1+a);Y.push(ag/x);ag=y[X++]*-a;a+=x}else{ag+=y[X++]}}return Y}function R(x,j,am,ak,ah,ag){var X=(am-x)/2,y=(ah-am)/2,an=Math.atan((am-x)/Math.abs(ak-j)),al=Math.atan((ah-am)/Math.abs(ak-ag));an=j<ak?Math.PI-an:an;al=ag<ak?Math.PI-al:al;var Y=Math.PI/2-((an+al)%(Math.PI*2))/2,ap=X*Math.sin(Y+an),aj=X*Math.cos(Y+an),ao=y*Math.sin(Y+al),ai=y*Math.cos(Y+al);return{x1:am-ap,y1:ak+aj,x2:am+ao,y2:ak+ai}}H=H||{};if(!this.raphael.is(v[0],"array")){v=[v]}if(!this.raphael.is(u[0],"array")){u=[u]}var n=H.gutter||10,w=Math.max(v[0].length,u[0].length),p=H.symbol||"",S=H.colors||Raphael.fn.g.colors,M=this,s=null,m=null,ad=this.set(),T=[];for(var ac=0,J=u.length;ac<J;ac++){w=Math.max(w,u[ac].length)}var ae=this.set();for(ac=0,J=u.length;ac<J;ac++){if(H.shade){ae.push(this.path().attr({stroke:"none",fill:S[ac],opacity:H.nostroke?1:0.3}))}if(u[ac].length>b-2*n){u[ac]=G(u[ac],b-2*n);w=b-2*n}if(v[ac]&&v[ac].length>b-2*n){v[ac]=G(v[ac],b-2*n)}}var W=Array.prototype.concat.apply([],v),U=Array.prototype.concat.apply([],u),q=this.g.snapEnds(Math.min.apply(Math,W),Math.max.apply(Math,W),v[0].length-1),B=q.from,l=q.to,L=this.g.snapEnds(Math.min.apply(Math,U),Math.max.apply(Math,U),u[0].length-1),z=L.from,k=L.to,Z=(b-n*2)/((l-B)||1),V=(e-n*2)/((k-z)||1);var D=this.set();if(H.axis){var h=(H.axis+"").split(/[,\s]+/);+h[0]&&D.push(this.g.axis(O+n,N+n,b-2*n,B,l,H.axisxstep||Math.floor((b-2*n)/20),2));+h[1]&&D.push(this.g.axis(O+b-n,N+e-n,e-2*n,z,k,H.axisystep||Math.floor((e-2*n)/20),3));+h[2]&&D.push(this.g.axis(O+n,N+e-n,b-2*n,B,l,H.axisxstep||Math.floor((b-2*n)/20),0));+h[3]&&D.push(this.g.axis(O+n,N+e-n,e-2*n,z,k,H.axisystep||Math.floor((e-2*n)/20),1))}var K=this.set(),aa=this.set(),o;for(ac=0,J=u.length;ac<J;ac++){if(!H.nostroke){K.push(o=this.path().attr({stroke:S[ac],"stroke-width":H.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":H.dash||""}))}var c=this.raphael.is(p,"array")?p[ac]:p,E=this.set();T=[];for(var ab=0,t=u[ac].length;ab<t;ab++){var g=O+n+((v[ac]||v[0])[ab]-B)*Z,f=N+e-n-(u[ac][ab]-z)*V;(Raphael.is(c,"array")?c[ab]:c)&&E.push(this.g[Raphael.fn.g.markers[this.raphael.is(c,"array")?c[ab]:c]](g,f,(H.width||2)*3).attr({fill:S[ac],stroke:"none"}));if(H.smooth){if(ab&&ab!=t-1){var Q=O+n+((v[ac]||v[0])[ab-1]-B)*Z,C=N+e-n-(u[ac][ab-1]-z)*V,P=O+n+((v[ac]||v[0])[ab+1]-B)*Z,A=N+e-n-(u[ac][ab+1]-z)*V;var af=R(Q,C,g,f,P,A);T=T.concat([af.x1,af.y1,g,f,af.x2,af.y2])}if(!ab){T=["M",g,f,"C",g,f]}}else{T=T.concat([ab?"L":"M",g,f])}}if(H.smooth){T=T.concat([g,f,g,f])}aa.push(E);if(H.shade){ae[ac].attr({path:T.concat(["L",g,N+e-n,"L",O+n+((v[ac]||v[0])[0]-B)*Z,N+e-n,"z"]).join(",")})}!H.nostroke&&o.attr({path:T.join(",")})}function I(am){var aj=[];for(var ak=0,ao=v.length;ak<ao;ak++){aj=aj.concat(v[ak])}aj.sort();var ap=[],ag=[];for(ak=0,ao=aj.length;ak<ao;ak++){aj[ak]!=aj[ak-1]&&ap.push(aj[ak])&&ag.push(O+n+(aj[ak]-B)*Z)}aj=ap;ao=aj.length;var Y=am||M.set();for(ak=0;ak<ao;ak++){var y=ag[ak]-(ag[ak]-(ag[ak-1]||O))/2,an=((ag[ak+1]||O+b)-ag[ak])/2+(ag[ak]-(ag[ak-1]||O))/2,a;am?(a={}):Y.push(a=M.rect(y-1,N,Math.max(an+1,1),e).attr({stroke:"none",fill:"#000",opacity:0}));a.values=[];a.symbols=M.set();a.y=[];a.x=ag[ak];a.axis=aj[ak];for(var ai=0,al=u.length;ai<al;ai++){ap=v[ai]||v[0];for(var ah=0,x=ap.length;ah<x;ah++){if(ap[ah]==aj[ak]){a.values.push(u[ai][ah]);a.y.push(N+e-n-(u[ai][ah]-z)*V);a.symbols.push(ad.symbols[ai][ah])}}}am&&am.call(a)}!am&&(s=Y)}function F(ak){var ag=ak||M.set(),a;for(var ai=0,am=u.length;ai<am;ai++){for(var ah=0,aj=u[ai].length;ah<aj;ah++){var y=O+n+((v[ai]||v[0])[ah]-B)*Z,al=O+n+((v[ai]||v[0])[ah?ah-1:1]-B)*Z,x=N+e-n-(u[ai][ah]-z)*V;ak?(a={}):ag.push(a=M.circle(y,x,Math.abs(al-y)/2).attr({stroke:"none",fill:"#000",opacity:0}));a.x=y;a.y=x;a.value=u[ai][ah];a.line=ad.lines[ai];a.shade=ad.shades[ai];a.symbol=ad.symbols[ai][ah];a.symbols=ad.symbols[ai];a.axis=(v[ai]||v[0])[ah];ak&&ak.call(a)}}!ak&&(m=ag)}ad.push(K,ae,aa,D,s,m);ad.lines=K;ad.shades=ae;ad.symbols=aa;ad.axis=D;ad.hoverColumn=function(j,a){!s&&I();s.mouseover(j).mouseout(a);return this};ad.clickColumn=function(a){!s&&I();s.click(a);return this};ad.hrefColumn=function(X){var Y=M.raphael.is(arguments[0],"array")?arguments[0]:arguments;if(!(arguments.length-1)&&typeof X=="object"){for(var a in X){for(var j=0,y=s.length;j<y;j++){if(s[j].axis==a){s[j].attr("href",X[a])}}}}!s&&I();for(j=0,y=Y.length;j<y;j++){s[j]&&s[j].attr("href",Y[j])}return this};ad.hover=function(j,a){!m&&F();m.mouseover(j).mouseout(a);return this};ad.click=function(a){!m&&F();m.click(a);return this};ad.each=function(a){F(a);return this};ad.eachColumn=function(a){I(a);return this};return ad};Raphael.fn.g.piechart=function(f,e,q,b,m){m=m||{};var l=this,n=[],h=this.set(),o=this.set(),k=this.set(),v=[],x=b.length,y=0,B=0,A=0,c=9,z=true;o.covers=h;if(x==1){k.push(this.circle(f,e,q).attr({fill:this.g.colors[0],stroke:m.stroke||"#fff","stroke-width":m.strokewidth==null?1:m.strokewidth}));h.push(this.circle(f,e,q).attr(this.g.shim));B=b[0];b[0]={value:b[0],order:0,valueOf:function(){return this.value}};k[0].middle={x:f,y:e};k[0].mangle=180}else{function u(H,G,p,J,F,O){var L=Math.PI/180,D=H+p*Math.cos(-J*L),C=H+p*Math.cos(-F*L),I=H+p/2*Math.cos(-(J+(F-J)/2)*L),N=G+p*Math.sin(-J*L),M=G+p*Math.sin(-F*L),E=G+p/2*Math.sin(-(J+(F-J)/2)*L),K=["M",H,G,"L",D,N,"A",p,p,0,+(Math.abs(F-J)>180),1,C,M,"z"];K.middle={x:I,y:E};return K}for(var w=0;w<x;w++){B+=b[w];b[w]={value:b[w],order:w,valueOf:function(){return this.value}}}b.sort(function(C,p){return p.value-C.value});for(w=0;w<x;w++){if(z&&b[w]*360/B<=1.5){c=w;z=false}if(w>c){z=false;b[c].value+=b[w];b[c].others=true;A=b[c].value}}x=Math.min(c+1,b.length);A&&b.splice(x)&&(b[c].others=true);for(w=0;w<x;w++){var g=y-360*b[w]/B/2;if(!w){y=90-g;g=y-360*b[w]/B/2}if(m.init){var j=u(f,e,1,y,y-360*b[w]/B).join(",")}var t=u(f,e,q,y,y-=360*b[w]/B);var s=this.path(m.init?j:t).attr({fill:m.colors&&m.colors[w]||this.g.colors[w]||"#666",stroke:m.stroke||"#fff","stroke-width":(m.strokewidth==null?1:m.strokewidth),"stroke-linejoin":"round"});s.value=b[w];s.middle=t.middle;s.mangle=g;n.push(s);k.push(s);m.init&&s.animate({path:t.join(",")},(+m.init-1)||1000,">")}for(w=0;w<x;w++){s=l.path(n[w].attr("path")).attr(this.g.shim);m.href&&m.href[w]&&s.attr({href:m.href[w]});s.attr=function(){};h.push(s);k.push(s)}}o.hover=function(E,C){C=C||function(){};var D=this;for(var p=0;p<x;p++){(function(G,H,F){var I={sector:G,cover:H,cx:f,cy:e,mx:G.middle.x,my:G.middle.y,mangle:G.mangle,r:q,value:b[F],total:B,label:D.labels&&D.labels[F]};H.mouseover(function(){E.call(I)}).mouseout(function(){C.call(I)})})(k[p],h[p],p)}return this};o.each=function(D){var C=this;for(var p=0;p<x;p++){(function(F,G,E){var H={sector:F,cover:G,cx:f,cy:e,x:F.middle.x,y:F.middle.y,mangle:F.mangle,r:q,value:b[E],total:B,label:C.labels&&C.labels[E]};D.call(H)})(k[p],h[p],p)}return this};o.click=function(D){var C=this;for(var p=0;p<x;p++){(function(F,G,E){var H={sector:F,cover:G,cx:f,cy:e,mx:F.middle.x,my:F.middle.y,mangle:F.mangle,r:q,value:b[E],total:B,label:C.labels&&C.labels[E]};G.click(function(){D.call(H)})})(k[p],h[p],p)}return this};o.inject=function(p){p.insertBefore(h[0])};var a=function(I,D,C,p){var M=f+q+q/5,L=e,H=L+10;I=I||[];p=(p&&p.toLowerCase&&p.toLowerCase())||"east";C=l.g.markers[C&&C.toLowerCase()]||"disc";o.labels=l.set();for(var G=0;G<x;G++){var N=k[G].attr("fill"),E=b[G].order,F;b[G].others&&(I[E]=D||"Others");I[E]=l.g.labelise(I[E],b[G],B);o.labels.push(l.set());o.labels[G].push(l.g[C](M+5,H,5).attr({fill:N,stroke:"none"}));o.labels[G].push(F=l.text(M+20,H,I[E]||b[E]).attr(l.g.txtattr).attr({fill:m.legendcolor||"#000","text-anchor":"start"}));h[G].label=o.labels[G];H+=F.getBBox().height*1.2}var J=o.labels.getBBox(),K={east:[0,-J.height/2],west:[-J.width-2*q-20,-J.height/2],north:[-q-J.width/2,-q-J.height-10],south:[-q-J.width/2,q+10]}[p];o.labels.translate.apply(o.labels,K);o.push(o.labels)};if(m.legend){a(m.legend,m.legendothers,m.legendmark,m.legendpos)}o.push(k,h);o.series=k;o.covers=h;return o};document.createElement("video");document.createElement("audio");document.createElement("track");var vjs=function(e,b,c){var a;if(typeof e==="string"){if(e.indexOf("#")===0){e=e.slice(1)}if(vjs.players[e]){return vjs.players[e]}else{a=vjs.el(e)}}else{a=e}if(!a||!a.nodeName){throw new TypeError("The element or ID supplied is not valid. (videojs)")}return a.player||new vjs.Player(a,b,c)};var videojs=vjs;window.videojs=window.vjs=vjs;vjs.CDN_VERSION="4.2";vjs.ACCESS_PROTOCOL=("https:"==document.location.protocol?"https://":"http://");vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}},notSupportedMessage:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'};if(vjs.CDN_VERSION!=="GENERATED_CDN_VSN"){videojs.options.flash["swf"]=vjs.ACCESS_PROTOCOL+"vjs.zencdn.net/"+vjs.CDN_VERSION+"/video-js.swf"}vjs.players={};vjs.CoreObject=vjs.CoreObject=function(){};vjs.CoreObject.extend=function(c){var e,a;c=c||{};e=c.init||c.init||this.prototype.init||this.prototype.init||function(){};a=function(){e.apply(this,arguments)};a.prototype=vjs.obj.create(this.prototype);a.prototype.constructor=a;a.extend=vjs.CoreObject.extend;a.create=vjs.CoreObject.create;for(var b in c){if(c.hasOwnProperty(b)){a.prototype[b]=c[b]}}return a};vjs.CoreObject.create=function(){var a=vjs.obj.create(this.prototype);this.apply(a,arguments);return a};vjs.on=function(c,b,a){var e=vjs.getData(c);if(!e.handlers){e.handlers={}}if(!e.handlers[b]){e.handlers[b]=[]}if(!a.guid){a.guid=vjs.guid++}e.handlers[b].push(a);if(!e.dispatcher){e.disabled=false;e.dispatcher=function(h){if(e.disabled){return}h=vjs.fixEvent(h);var g=e.handlers[h.type];if(g){var j=g.slice(0);for(var f=0,k=j.length;f<k;f++){if(h.isImmediatePropagationStopped()){break}else{j[f].call(c,h)}}}}}if(e.handlers[b].length==1){if(document.addEventListener){c.addEventListener(b,e.dispatcher,false)}else{if(document.attachEvent){c.attachEvent("on"+b,e.dispatcher)}}}};vjs.off=function(f,e,c){if(!vjs.hasData(f)){return}var g=vjs.getData(f);if(!g.handlers){return}var h=function(k){g.handlers[k]=[];vjs.cleanUpEvents(f,k)};if(!e){for(var b in g.handlers){h(b)}return}var a=g.handlers[e];if(!a){return}if(!c){h(e);return}if(c.guid){for(var j=0;j<a.length;j++){if(a[j].guid===c.guid){a.splice(j--,1)}}}vjs.cleanUpEvents(f,e)};vjs.cleanUpEvents=function(b,a){var c=vjs.getData(b);if(c.handlers[a].length===0){delete c.handlers[a];if(document.removeEventListener){b.removeEventListener(a,c.dispatcher,false)}else{if(document.detachEvent){b.detachEvent("on"+a,c.dispatcher)}}}if(vjs.isEmpty(c.handlers)){delete c.handlers;delete c.dispatcher;delete c.disabled}if(vjs.isEmpty(c)){vjs.removeData(b)}};vjs.fixEvent=function(f){function h(){return true}function e(){return false}if(!f||!f.isPropagationStopped){var b=f||window.event;f={};for(var c in b){if(c!=="layerX"&&c!=="layerY"){f[c]=b[c]}}if(!f.target){f.target=f.srcElement||document}f.relatedTarget=f.fromElement===f.target?f.toElement:f.fromElement;f.preventDefault=function(){if(b.preventDefault){b.preventDefault()}f.returnValue=false;f.isDefaultPrevented=h};f.isDefaultPrevented=e;f.stopPropagation=function(){if(b.stopPropagation){b.stopPropagation()}f.cancelBubble=true;f.isPropagationStopped=h};f.isPropagationStopped=e;f.stopImmediatePropagation=function(){if(b.stopImmediatePropagation){b.stopImmediatePropagation()}f.isImmediatePropagationStopped=h;f.stopPropagation()};f.isImmediatePropagationStopped=e;if(f.clientX!=null){var g=document.documentElement,a=document.body;f.pageX=f.clientX+(g&&g.scrollLeft||a&&a.scrollLeft||0)-(g&&g.clientLeft||a&&a.clientLeft||0);f.pageY=f.clientY+(g&&g.scrollTop||a&&a.scrollTop||0)-(g&&g.clientTop||a&&a.clientTop||0)}f.which=f.charCode||f.keyCode;if(f.button!=null){f.button=(f.button&1?0:(f.button&4?1:(f.button&2?2:0)))}}return f};vjs.trigger=function(e,c){var a=(vjs.hasData(e))?vjs.getData(e):{};var b=e.parentNode||e.ownerDocument;if(typeof c==="string"){c={type:c,target:e}}c=vjs.fixEvent(c);if(a.dispatcher){a.dispatcher.call(e,c)}if(b&&!c.isPropagationStopped()&&c.bubbles!==false){vjs.trigger(b,c)}else{if(!b&&!c.isDefaultPrevented()){var f=vjs.getData(c.target);if(c.target[c.type]){f.disabled=true;if(typeof c.target[c.type]==="function"){c.target[c.type]()}f.disabled=false}}}return !c.isDefaultPrevented()};vjs.one=function(e,b,a){var c=function(){vjs.off(e,b,c);a.apply(this,arguments)};c.guid=a.guid=a.guid||vjs.guid++;vjs.on(e,b,c)};var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(b,a){var c,e;c=document.createElement(b||"div");for(e in a){if(hasOwnProp.call(a,e)){if(e.indexOf("aria-")!==-1||e=="role"){c.setAttribute(e,a[e])}else{c[e]=a[e]}}}return c};vjs.capitalize=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};vjs.obj={};vjs.obj.create=Object.create||function(b){function a(){}a.prototype=b;return new a()};vjs.obj.each=function(e,c,b){for(var a in e){if(hasOwnProp.call(e,a)){c.call(b||this,a,e[a])}}};vjs.obj.merge=function(c,b){if(!b){return c}for(var a in b){if(hasOwnProp.call(b,a)){c[a]=b[a]}}return c};vjs.obj.deepMerge=function(f,e){var a,c,b;f=vjs.obj.copy(f);for(a in e){if(hasOwnProp.call(e,a)){c=f[a];b=e[a];if(vjs.obj.isPlain(c)&&vjs.obj.isPlain(b)){f[a]=vjs.obj.deepMerge(c,b)}else{f[a]=e[a]}}}return f};vjs.obj.copy=function(a){return vjs.obj.merge({},a)};vjs.obj.isPlain=function(a){return !!a&&typeof a==="object"&&a.toString()==="[object Object]"&&a.constructor===Object};vjs.bind=function(c,e,b){if(!e.guid){e.guid=vjs.guid++}var a=function(){return e.apply(c,arguments)};a.guid=(b)?b+"_"+e.guid:e.guid;return a};vjs.cache={};vjs.guid=1;vjs.expando="vdata"+(new Date()).getTime();vjs.getData=function(a){var b=a[vjs.expando];if(!b){b=a[vjs.expando]=vjs.guid++;vjs.cache[b]={}}return vjs.cache[b]};vjs.hasData=function(a){var b=a[vjs.expando];return !(!b||vjs.isEmpty(vjs.cache[b]))};vjs.removeData=function(a){var c=a[vjs.expando];if(!c){return}delete vjs.cache[c];try{delete a[vjs.expando]}catch(b){if(a.removeAttribute){a.removeAttribute(vjs.expando)}else{a[vjs.expando]=null}}};vjs.isEmpty=function(a){for(var b in a){if(a[b]!==null){return false}}return true};vjs.addClass=function(a,b){if((" "+a.className+" ").indexOf(" "+b+" ")==-1){a.className=a.className===""?b:a.className+" "+b}};vjs.removeClass=function(c,a){var e,b;if(c.className.indexOf(a)==-1){return}e=c.className.split(" ");for(b=e.length-1;b>=0;b--){if(e[b]===a){e.splice(b,1)}}c.className=e.join(" ")};vjs.TEST_VID=vjs.createEl("video");vjs.USER_AGENT=navigator.userAgent;vjs.IS_IPHONE=(/iPhone/i).test(vjs.USER_AGENT);vjs.IS_IPAD=(/iPad/i).test(vjs.USER_AGENT);vjs.IS_IPOD=(/iPod/i).test(vjs.USER_AGENT);vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD;vjs.IOS_VERSION=(function(){var a=vjs.USER_AGENT.match(/OS (\d+)_/i);if(a&&a[1]){return a[1]}})();vjs.IS_ANDROID=(/Android/i).test(vjs.USER_AGENT);vjs.ANDROID_VERSION=(function(){var b=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),a,c;if(!b){return null}a=b[1]&&parseFloat(b[1]);c=b[2]&&parseFloat(b[2]);if(a&&c){return parseFloat(b[1]+"."+b[2])}else{if(a){return a}else{return null}}})();vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&(/webkit/i).test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3;vjs.IS_FIREFOX=(/Firefox/i).test(vjs.USER_AGENT);vjs.IS_CHROME=(/Chrome/i).test(vjs.USER_AGENT);vjs.TOUCH_ENABLED=("ontouchstart" in window);vjs.getAttributeValues=function(a){var h,b,e,g,c;h={};b=",autoplay,controls,loop,muted,default,";if(a&&a.attributes&&a.attributes.length>0){e=a.attributes;for(var f=e.length-1;f>=0;f--){g=e[f].name;c=e[f].value;if(typeof a[g]==="boolean"||b.indexOf(","+g+",")!==-1){c=(c!==null)?true:false}h[g]=c}}return h};vjs.getComputedDimension=function(a,b){var c="";if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)}else{if(a.currentStyle){c=a["client"+b.substr(0,1).toUpperCase()+b.substr(1)]+"px"}}return c};vjs.insertFirst=function(b,a){if(a.firstChild){a.insertBefore(b,a.firstChild)}else{a.appendChild(b)}};vjs.support={};vjs.el=function(a){if(a.indexOf("#")===0){a=a.slice(1)}return document.getElementById(a)};vjs.formatTime=function(j,b){b=b||j;var f=Math.floor(j%60),a=Math.floor(j/60%60),e=Math.floor(j/3600),g=Math.floor(b/60%60),c=Math.floor(b/3600);if(isNaN(j)||j===Infinity){e=a=f="-"}e=(e>0||c>0)?e+":":"";a=(((e||g>=10)&&a<10)?"0"+a:a)+":";f=(f<10)?"0"+f:f;return e+a+f};vjs.blockTextSelection=function(){document.body.focus();document.onselectstart=function(){return false}};vjs.unblockTextSelection=function(){document.onselectstart=function(){return true}};vjs.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")};vjs.round=function(a,b){if(!b){b=0}return Math.round(a*Math.pow(10,b))/Math.pow(10,b)};vjs.createTimeRange=function(b,a){return{length:1,start:function(){return b},end:function(){return a}}};vjs.get=function(a,h,f){var b,c;if(typeof XMLHttpRequest==="undefined"){window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(l){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(k){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(j){}throw new Error("This browser does not support XMLHttpRequest.")}}c=new XMLHttpRequest();try{c.open("GET",a)}catch(g){f(g)}b=(a.indexOf("file:")===0||(window.location.href.indexOf("file:")===0&&a.indexOf("http")===-1));c.onreadystatechange=function(){if(c.readyState===4){if(c.status===200||b&&c.status===0){h(c.responseText)}else{if(f){f()}}}};try{c.send()}catch(g){if(f){f(g)}}};vjs.setLocalStorage=function(b,c){try{var a=window.localStorage||false;if(!a){return}a[b]=c}catch(f){if(f.code==22||f.code==1014){vjs.log("LocalStorage Full (VideoJS)",f)}else{if(f.code==18){vjs.log("LocalStorage not allowed (VideoJS)",f)}else{vjs.log("LocalStorage Error (VideoJS)",f)}}}};vjs.getAbsoluteURL=function(a){if(!a.match(/^https?:\/\//)){a=vjs.createEl("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href}return a};vjs.log=function(){vjs.log.history=vjs.log.history||[];vjs.log.history.push(arguments);if(window.console){window.console.log(Array.prototype.slice.call(arguments))}};vjs.findPosition=function(c){var h,b,j,k,f,e,g,a,l;if(c.getBoundingClientRect&&c.parentNode){h=c.getBoundingClientRect()}if(!h){return{left:0,top:0}}b=document.documentElement;j=document.body;k=b.clientLeft||j.clientLeft||0;f=window.pageXOffset||j.scrollLeft;e=h.left+f-k;g=b.clientTop||j.clientTop||0;a=window.pageYOffset||j.scrollTop;l=h.top+a-g;return{left:e,top:l}};vjs.Component=vjs.CoreObject.extend({init:function(b,a,c){this.player_=b;this.options_=vjs.obj.copy(this.options_);a=this.options(a);this.id_=a.id||((a.el&&a.el["id"])?a.el["id"]:b.id()+"_component_"+vjs.guid++);this.name_=a.name||null;this.el_=a.el||this.createEl();this.children_=[];this.childIndex_={};this.childNameIndex_={};this.initChildren();this.ready(c)}});vjs.Component.prototype.dispose=function(){this.trigger("dispose");if(this.children_){for(var a=this.children_.length-1;a>=0;a--){if(this.children_[a].dispose){this.children_[a].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.off();if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}vjs.removeData(this.el_);this.el_=null};vjs.Component.prototype.player_;vjs.Component.prototype.player=function(){return this.player_};vjs.Component.prototype.options_;vjs.Component.prototype.options=function(a){if(a===undefined){return this.options_}return this.options_=vjs.obj.deepMerge(this.options_,a)};vjs.Component.prototype.el_;vjs.Component.prototype.createEl=function(b,a){return vjs.createEl(b,a)};vjs.Component.prototype.el=function(){return this.el_};vjs.Component.prototype.contentEl_;vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_};vjs.Component.prototype.id_;vjs.Component.prototype.id=function(){return this.id_};vjs.Component.prototype.name_;vjs.Component.prototype.name=function(){return this.name_};vjs.Component.prototype.children_;vjs.Component.prototype.children=function(){return this.children_};vjs.Component.prototype.childIndex_;vjs.Component.prototype.getChildById=function(a){return this.childIndex_[a]};vjs.Component.prototype.childNameIndex_;vjs.Component.prototype.getChild=function(a){return this.childNameIndex_[a]};vjs.Component.prototype.addChild=function(g,e){var c,f,a,b;if(typeof g==="string"){a=g;e=e||{};f=e.componentClass||vjs.capitalize(a);e.name=a;c=new window.videojs[f](this.player_||this,e)}else{c=g}this.children_.push(c);if(typeof c.id==="function"){this.childIndex_[c.id()]=c}a=a||(c.name&&c.name());if(a){this.childNameIndex_[a]=c}if(typeof c.el==="function"&&c.el()){this.contentEl().appendChild(c.el())}return c};vjs.Component.prototype.removeChild=function(b){if(typeof b==="string"){b=this.getChild(b)}if(!b||!this.children_){return}var a=false;for(var c=this.children_.length-1;c>=0;c--){if(this.children_[c]===b){a=true;this.children_.splice(c,1);break}}if(!a){return}this.childIndex_[b.id]=null;this.childNameIndex_[b.name]=null;var e=b.el();if(e&&e.parentNode===this.contentEl()){this.contentEl().removeChild(b.el())}};vjs.Component.prototype.initChildren=function(){var b=this.options_;if(b&&b.children){var a=this;vjs.obj.each(b.children,function(e,f){if(f===false){return}var c=function(){a[e]=a.addChild(e,f)};if(f.loadEvent){}else{c()}})}};vjs.Component.prototype.buildCSSClass=function(){return""};vjs.Component.prototype.on=function(b,a){vjs.on(this.el_,b,vjs.bind(this,a));return this};vjs.Component.prototype.off=function(b,a){vjs.off(this.el_,b,a);return this};vjs.Component.prototype.one=function(b,a){vjs.one(this.el_,b,vjs.bind(this,a));return this};vjs.Component.prototype.trigger=function(a,b){vjs.trigger(this.el_,a,b);return this};vjs.Component.prototype.isReady_;vjs.Component.prototype.isReadyOnInitFinish_=true;vjs.Component.prototype.readyQueue_;vjs.Component.prototype.ready=function(a){if(a){if(this.isReady_){a.call(this)}else{if(this.readyQueue_===undefined){this.readyQueue_=[]}this.readyQueue_.push(a)}}return this};vjs.Component.prototype.triggerReady=function(){this.isReady_=true;var c=this.readyQueue_;if(c&&c.length>0){for(var b=0,a=c.length;b<a;b++){c[b].call(this)}this.readyQueue_=[];this.trigger("ready")}};vjs.Component.prototype.addClass=function(a){vjs.addClass(this.el_,a);return this};vjs.Component.prototype.removeClass=function(a){vjs.removeClass(this.el_,a);return this};vjs.Component.prototype.show=function(){this.el_.style.display="block";return this};vjs.Component.prototype.hide=function(){this.el_.style.display="none";return this};vjs.Component.prototype.lockShowing=function(){this.addClass("vjs-lock-showing");return this};vjs.Component.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing");return this};vjs.Component.prototype.disable=function(){this.hide();this.show=function(){}};vjs.Component.prototype.width=function(a,b){return this.dimension("width",a,b)};vjs.Component.prototype.height=function(a,b){return this.dimension("height",a,b)};vjs.Component.prototype.dimensions=function(b,a){return this.width(b,true).height(a)};vjs.Component.prototype.dimension=function(f,a,e){if(a!==undefined){if((""+a).indexOf("%")!==-1||(""+a).indexOf("px")!==-1){this.el_.style[f]=a}else{if(a==="auto"){this.el_.style[f]=""}else{this.el_.style[f]=a+"px"}}if(!e){this.trigger("resize")}return this}if(!this.el_){return 0}var c=this.el_.style[f];var b=c.indexOf("px");if(b!==-1){return parseInt(c.slice(0,b),10)}else{return parseInt(this.el_["offset"+vjs.capitalize(f)],10)}};vjs.Component.prototype.emitTapEvents=function(){var a,b,e,c;a=0;this.on("touchstart",function(f){a=new Date().getTime();e=true});c=function(){e=false};this.on("touchmove",c);this.on("touchleave",c);this.on("touchcancel",c);this.on("touchend",function(){if(e===true){b=new Date().getTime()-a;if(b<250){this.trigger("tap")}}})};vjs.Button=vjs.Component.extend({init:function(c,b){vjs.Component.call(this,c,b);var e=false;this.on("touchstart",function(f){f.preventDefault();e=true});this.on("touchmove",function(){e=false});var a=this;this.on("touchend",function(f){if(e){a.onClick(f)}f.preventDefault()});this.on("click",this.onClick);this.on("focus",this.onFocus);this.on("blur",this.onBlur)}});vjs.Button.prototype.createEl=function(b,a){a=vjs.obj.merge({className:this.buildCSSClass(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"</span></div>",role:"button","aria-live":"polite",tabIndex:0},a);return vjs.Component.prototype.createEl.call(this,b,a)};vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)};vjs.Button.prototype.onClick=function(){};vjs.Button.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Button.prototype.onKeyPress=function(a){if(a.which==32||a.which==13){a.preventDefault();this.onClick()}};vjs.Button.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Slider=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);this.bar=this.getChild(this.options_.barName);this.handle=this.getChild(this.options_.handleName);b.on(this.playerEvent,vjs.bind(this,this.update));this.on("mousedown",this.onMouseDown);this.on("touchstart",this.onMouseDown);this.on("focus",this.onFocus);this.on("blur",this.onBlur);this.on("click",this.onClick);this.player_.on("controlsvisible",vjs.bind(this,this.update));b.ready(vjs.bind(this,this.update));this.boundEvents={}}});vjs.Slider.prototype.createEl=function(b,a){a=a||{};a.className=a.className+" vjs-slider";a=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a);return vjs.Component.prototype.createEl.call(this,b,a)};vjs.Slider.prototype.onMouseDown=function(a){a.preventDefault();vjs.blockTextSelection();this.boundEvents.move=vjs.bind(this,this.onMouseMove);this.boundEvents.end=vjs.bind(this,this.onMouseUp);vjs.on(document,"mousemove",this.boundEvents.move);vjs.on(document,"mouseup",this.boundEvents.end);vjs.on(document,"touchmove",this.boundEvents.move);vjs.on(document,"touchend",this.boundEvents.end);this.onMouseMove(a)};vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection();vjs.off(document,"mousemove",this.boundEvents.move,false);vjs.off(document,"mouseup",this.boundEvents.end,false);vjs.off(document,"touchmove",this.boundEvents.move,false);vjs.off(document,"touchend",this.boundEvents.end,false);this.update()};vjs.Slider.prototype.update=function(){if(!this.el_){return}var b,a=this.getPercent(),g=this.handle,h=this.bar;if(isNaN(a)){a=0}b=a;if(g){var e=this.el_,f=e.offsetWidth,k=g.el().offsetWidth,l=(k)?k/f:0,c=1-l,j=a*c;b=j+(l/2);g.el().style.left=vjs.round(j*100,2)+"%"}h.el().style.width=vjs.round(b*100,2)+"%"};vjs.Slider.prototype.calculateDistance=function(b){var e,h,n,m,a,k,j,g,f;e=this.el_;h=vjs.findPosition(e);a=k=e.offsetWidth;j=this.handle;if(this.options_.vertical){m=h.top;if(b.changedTouches){f=b.changedTouches[0].pageY}else{f=b.pageY}if(j){var l=j.el().offsetHeight;m=m+(l/2);k=k-l}return Math.max(0,Math.min(1,((m-f)+k)/k))}else{n=h.left;if(b.changedTouches){g=b.changedTouches[0].pageX}else{g=b.pageX}if(j){var c=j.el().offsetWidth;n=n+(c/2);a=a-c}return Math.max(0,Math.min(1,(g-n)/a))}};vjs.Slider.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Slider.prototype.onKeyPress=function(a){if(a.which==37){a.preventDefault();this.stepBack()}else{if(a.which==39){a.preventDefault();this.stepForward()}}};vjs.Slider.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))};vjs.Slider.prototype.onClick=function(a){a.stopImmediatePropagation();a.preventDefault()};vjs.SliderHandle=vjs.Component.extend();vjs.SliderHandle.prototype.defaultValue=0;vjs.SliderHandle.prototype.createEl=function(b,a){a=a||{};a.className=a.className+" vjs-slider-handle";a=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},a);return vjs.Component.prototype.createEl.call(this,"div",a)};vjs.Menu=vjs.Component.extend();vjs.Menu.prototype.addItem=function(a){this.addChild(a);a.on("click",vjs.bind(this,function(){this.unlockShowing()}))};vjs.Menu.prototype.createEl=function(){var b=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(b,{className:"vjs-menu-content"});var a=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});a.appendChild(this.contentEl_);vjs.on(a,"click",function(c){c.preventDefault();c.stopImmediatePropagation()});return a};vjs.MenuItem=vjs.Button.extend({init:function(b,a){vjs.Button.call(this,b,a);this.selected(a.selected)}});vjs.MenuItem.prototype.createEl=function(b,a){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.options_.label},a))};vjs.MenuItem.prototype.onClick=function(){this.selected(true)};vjs.MenuItem.prototype.selected=function(a){if(a){this.addClass("vjs-selected");this.el_.setAttribute("aria-selected",true)}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-selected",false)}};vjs.MenuButton=vjs.Button.extend({init:function(b,a){vjs.Button.call(this,b,a);this.menu=this.createMenu();this.addChild(this.menu);if(this.items&&this.items.length===0){this.hide()}this.on("keyup",this.onKeyPress);this.el_.setAttribute("aria-haspopup",true);this.el_.setAttribute("role","button")}});vjs.MenuButton.prototype.buttonPressed_=false;vjs.MenuButton.prototype.createMenu=function(){var b=new vjs.Menu(this.player_);if(this.options().title){b.el().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}))}this.items=this["createItems"]();if(this.items){for(var a=0;a<this.items.length;a++){b.addItem(this.items[a])}}return b};vjs.MenuButton.prototype.createItems=function(){};vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.MenuButton.prototype.onFocus=function(){};vjs.MenuButton.prototype.onBlur=function(){};vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing();this.el_.blur()}));if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};vjs.MenuButton.prototype.onKeyPress=function(a){a.preventDefault();if(a.which==32||a.which==13){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}}else{if(a.which==27){if(this.buttonPressed_){this.unpressButton()}}}};vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=true;this.menu.lockShowing();this.el_.setAttribute("aria-pressed",true);if(this.items&&this.items.length>0){this.items[0].el().focus()}};vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=false;this.menu.unlockShowing();this.el_.setAttribute("aria-pressed",false)};vjs.Player=vjs.Component.extend({init:function(a,b,c){this.tag=a;b=vjs.obj.merge(this.getTagSettings(a),b);this.cache_={};this.poster_=b.poster;this.controls_=b.controls;a.controls=false;vjs.Component.call(this,this,b,c);if(this.controls()){this.addClass("vjs-controls-enabled")}else{this.addClass("vjs-controls-disabled")}this.one("play",function(h){var f={type:"firstplay",target:this.el_};var g=vjs.trigger(this.el_,f);if(!g){h.preventDefault();h.stopPropagation();h.stopImmediatePropagation()}});this.on("ended",this.onEnded);this.on("play",this.onPlay);this.on("firstplay",this.onFirstPlay);this.on("pause",this.onPause);this.on("progress",this.onProgress);this.on("durationchange",this.onDurationChange);this.on("error",this.onError);this.on("fullscreenchange",this.onFullscreenChange);vjs.players[this.id_]=this;if(b.plugins){vjs.obj.each(b.plugins,function(e,f){this[e](f)},this)}this.listenForUserActivity()}});vjs.Player.prototype.options_=vjs.options;vjs.Player.prototype.dispose=function(){this.trigger("dispose");this.off("dispose");vjs.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}this.stopTrackingProgress();this.stopTrackingCurrentTime();if(this.tech){this.tech.dispose()}vjs.Component.prototype.dispose.call(this)};vjs.Player.prototype.getTagSettings=function(a){var e={sources:[],tracks:[]};vjs.obj.merge(e,vjs.getAttributeValues(a));if(a.hasChildNodes()){var g,h,b,f,c;g=a.childNodes;for(f=0,c=g.length;f<c;f++){h=g[f];b=h.nodeName.toLowerCase();if(b==="source"){e.sources.push(vjs.getAttributeValues(h))}else{if(b==="track"){e.tracks.push(vjs.getAttributeValues(h))}}}}return e};vjs.Player.prototype.createEl=function(){var f=this.el_=vjs.Component.prototype.createEl.call(this,"div");var a=this.tag;a.removeAttribute("width");a.removeAttribute("height");if(a.hasChildNodes()){var b,h,e,g,j,c;b=a.childNodes;h=b.length;c=[];while(h--){g=b[h];j=g.nodeName.toLowerCase();if(j==="source"||j==="track"){c.push(g)}}for(e=0;e<c.length;e++){a.removeChild(c[e])}}a.id=a.id||"vjs_video_"+vjs.guid++;f.id=a.id;f.className=a.className;a.id+="_html5_api";a.className="vjs-tech";a.player=f.player=this;this.addClass("vjs-paused");this.width(this.options_.width,true);this.height(this.options_.height,true);if(a.parentNode){a.parentNode.insertBefore(f,a)}vjs.insertFirst(a,f);return f};vjs.Player.prototype.loadTech=function(e,b){if(this.tech){this.unloadTech()}else{if(e!=="Html5"&&this.tag){this.el_.removeChild(this.tag);this.tag.player=null;this.tag=null}}this.techName=e;this.isReady_=false;var a=function(){this.player_.triggerReady();if(!this.features.progressEvents){this.player_.manualProgressOn()}if(!this.features.timeupdateEvents){this.player_.manualTimeUpdatesOn()}};var c=vjs.obj.merge({source:b,parentEl:this.el_},this.options_[e.toLowerCase()]);if(b){if(b.src==this.cache_.src&&this.cache_.currentTime>0){c.startTime=this.cache_.currentTime}this.cache_.src=b.src}this.tech=new window.videojs[e](this,c);this.tech.ready(a)};vjs.Player.prototype.unloadTech=function(){this.isReady_=false;this.tech.dispose();if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}this.tech=false};vjs.Player.prototype.manualProgressOn=function(){this.manualProgress=true;this.trackProgress();this.tech.one("progress",function(){this.features.progressEvents=true;this.player_.manualProgressOff()})};vjs.Player.prototype.manualProgressOff=function(){this.manualProgress=false;this.stopTrackingProgress()};vjs.Player.prototype.trackProgress=function(){this.progressInterval=setInterval(vjs.bind(this,function(){if(this.cache_.bufferEnd<this.buffered().end(0)){this.trigger("progress")}else{if(this.bufferedPercent()==1){this.stopTrackingProgress();this.trigger("progress")}}}),500)};vjs.Player.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)};vjs.Player.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime);this.tech.one("timeupdate",function(){this.features.timeupdateEvents=true;this.player_.manualTimeUpdatesOff()})};vjs.Player.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};vjs.Player.prototype.trackCurrentTime=function(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=setInterval(vjs.bind(this,function(){this.trigger("timeupdate")}),250)};vjs.Player.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval)};vjs.Player.prototype.onEnded=function(){if(this.options_.loop){this.currentTime(0);this.play()}};vjs.Player.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused");vjs.addClass(this.el_,"vjs-playing")};vjs.Player.prototype.onFirstPlay=function(){if(this.options_.starttime){this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started")};vjs.Player.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing");vjs.addClass(this.el_,"vjs-paused")};vjs.Player.prototype.onProgress=function(){if(this.bufferedPercent()==1){this.trigger("loadedalldata")}};vjs.Player.prototype.onDurationChange=function(){this.duration(this.techGet("duration"))};vjs.Player.prototype.onError=function(a){vjs.log("Video Error",a)};vjs.Player.prototype.onFullscreenChange=function(){if(this.isFullScreen){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};vjs.Player.prototype.cache_;vjs.Player.prototype.getCache=function(){return this.cache_};vjs.Player.prototype.techCall=function(c,a){if(this.tech&&!this.tech.isReady_){this.tech.ready(function(){this[c](a)})}else{try{this.tech[c](a)}catch(b){vjs.log(b);throw b}}};vjs.Player.prototype.techGet=function(b){if(this.tech&&this.tech.isReady_){try{return this.tech[b]()}catch(a){if(this.tech[b]===undefined){vjs.log("Video.js: "+b+" method not defined for "+this.techName+" playback technology.",a)}else{if(a.name=="TypeError"){vjs.log("Video.js: "+b+" unavailable on "+this.techName+" playback technology element.",a);this.tech.isReady_=false}else{vjs.log(a)}}throw a}}return};vjs.Player.prototype.play=function(){this.techCall("play");return this};vjs.Player.prototype.pause=function(){this.techCall("pause");return this};vjs.Player.prototype.paused=function(){return(this.techGet("paused")===false)?false:true};vjs.Player.prototype.currentTime=function(a){if(a!==undefined){this.cache_.lastSetCurrentTime=a;this.techCall("setCurrentTime",a);if(this.manualTimeUpdates){this.trigger("timeupdate")}return this}return this.cache_.currentTime=(this.techGet("currentTime")||0)};vjs.Player.prototype.duration=function(a){if(a!==undefined){this.cache_.duration=parseFloat(a);return this}return this.cache_.duration};vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()};vjs.Player.prototype.buffered=function(){var c=this.techGet("buffered"),e=0,a=c.length-1,b=this.cache_.bufferEnd=this.cache_.bufferEnd||0;if(c&&a>=0&&c.end(a)!==b){b=c.end(a);this.cache_.bufferEnd=b}return vjs.createTimeRange(e,b)};vjs.Player.prototype.bufferedPercent=function(){return(this.duration())?this.buffered().end(0)/this.duration():0};vjs.Player.prototype.volume=function(a){var b;if(a!==undefined){b=Math.max(0,Math.min(1,parseFloat(a)));this.cache_.volume=b;this.techCall("setVolume",b);vjs.setLocalStorage("volume",b);return this}b=parseFloat(this.techGet("volume"));return(isNaN(b))?1:b};vjs.Player.prototype.muted=function(a){if(a!==undefined){this.techCall("setMuted",a);return this}return this.techGet("muted")||false};vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||false};vjs.Player.prototype.requestFullScreen=function(){var a=vjs.support.requestFullScreen;this.isFullScreen=true;if(a){vjs.on(document,a.eventName,vjs.bind(this,function(b){this.isFullScreen=document[a.isFullScreen];if(this.isFullScreen===false){vjs.off(document,a.eventName,arguments.callee)}this.trigger("fullscreenchange")}));this.el_[a.requestFn]()}else{if(this.tech.supportsFullScreen()){this.techCall("enterFullScreen")}else{this.enterFullWindow();this.trigger("fullscreenchange")}}return this};vjs.Player.prototype.cancelFullScreen=function(){var a=vjs.support.requestFullScreen;this.isFullScreen=false;if(a){document[a.cancelFn]()}else{if(this.tech.supportsFullScreen()){this.techCall("exitFullScreen")}else{this.exitFullWindow();this.trigger("fullscreenchange")}}return this};vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=true;this.docOrigOverflow=document.documentElement.style.overflow;vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey));document.documentElement.style.overflow="hidden";vjs.addClass(document.body,"vjs-full-window");this.trigger("enterFullWindow")};vjs.Player.prototype.fullWindowOnEscKey=function(a){if(a.keyCode===27){if(this.isFullScreen===true){this.cancelFullScreen()}else{this.exitFullWindow()}}};vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=false;vjs.off(document,"keydown",this.fullWindowOnEscKey);document.documentElement.style.overflow=this.docOrigOverflow;vjs.removeClass(document.body,"vjs-full-window");this.trigger("exitFullWindow")};vjs.Player.prototype.selectSource=function(h){for(var k=0,g=this.options_.techOrder;k<g.length;k++){var m=vjs.capitalize(g[k]),f=window.videojs[m];if(f.isSupported()){for(var e=0,c=h;e<c.length;e++){var l=c[e];if(f.canPlaySource(l)){return{source:l,tech:m}}}}}return false};vjs.Player.prototype.src=function(b){if(b instanceof Array){var a=this.selectSource(b),c;if(a){b=a.source;c=a.tech;if(c==this.techName){this.src(b)}else{this.loadTech(c,b)}}else{this.el_.appendChild(vjs.createEl("p",{innerHTML:this.options()["notSupportedMessage"]}))}}else{if(b instanceof Object){if(window.videojs[this.techName]["canPlaySource"](b)){this.src(b.src)}else{this.src([b])}}else{this.cache_.src=b;if(!this.isReady_){this.ready(function(){this.src(b)})}else{this.techCall("src",b);if(this.options_.preload=="auto"){this.load()}if(this.options_.autoplay){this.play()}}}}return this};vjs.Player.prototype.load=function(){this.techCall("load");return this};vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""};vjs.Player.prototype.preload=function(a){if(a!==undefined){this.techCall("setPreload",a);this.options_.preload=a;return this}return this.techGet("preload")};vjs.Player.prototype.autoplay=function(a){if(a!==undefined){this.techCall("setAutoplay",a);this.options_.autoplay=a;return this}return this.techGet("autoplay",a)};vjs.Player.prototype.loop=function(a){if(a!==undefined){this.techCall("setLoop",a);this.options_.loop=a;return this}return this.techGet("loop")};vjs.Player.prototype.poster_;vjs.Player.prototype.poster=function(a){if(a!==undefined){this.poster_=a}return this.poster_};vjs.Player.prototype.controls_;vjs.Player.prototype.controls=function(a){if(a!==undefined){a=!!a;if(this.controls_!==a){this.controls_=a;if(a){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled")}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled")}}return this}return this.controls_};vjs.Player.prototype.usingNativeControls_;vjs.Player.prototype.usingNativeControls=function(a){if(a!==undefined){a=!!a;if(this.usingNativeControls_!==a){this.usingNativeControls_=a;if(a){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}}return this}return this.usingNativeControls_};vjs.Player.prototype.error=function(){return this.techGet("error")};vjs.Player.prototype.ended=function(){return this.techGet("ended")};vjs.Player.prototype.seeking=function(){return this.techGet("seeking")};vjs.Player.prototype.userActivity_=true;vjs.Player.prototype.reportUserActivity=function(a){this.userActivity_=true};vjs.Player.prototype.userActive_=true;vjs.Player.prototype.userActive=function(a){if(a!==undefined){a=!!a;if(a!==this.userActive_){this.userActive_=a;if(a){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive")}else{this.userActivity_=false;this.tech.one("mousemove",function(b){b.stopPropagation();b.preventDefault()});this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}}return this}return this.userActive_};vjs.Player.prototype.listenForUserActivity=function(){var c,f,g,b,a,e;c=this.reportUserActivity;f=function(){c();clearInterval(g);g=setInterval(vjs.bind(this,c),250)};b=function(h){c();clearInterval(g)};this.on("mousedown",f);this.on("mousemove",c);this.on("mouseup",b);this.on("keydown",c);this.on("keyup",c);this.on("touchstart",f);this.on("touchmove",c);this.on("touchend",b);this.on("touchcancel",b);a=setInterval(vjs.bind(this,function(){if(this.userActivity_){this.userActivity_=false;this.userActive(true);clearTimeout(e);e=setTimeout(vjs.bind(this,function(){if(!this.userActivity_){this.userActive(false)}}),2000)}}),250);this.on("dispose",function(){clearInterval(a);clearTimeout(e)})};(function(){var a,b,c;c=document.createElement("div");b={};if(c.cancelFullscreen!==undefined){b.requestFn="requestFullscreen";b.cancelFn="exitFullscreen";b.eventName="fullscreenchange";b.isFullScreen="fullScreen"}else{if(document.mozCancelFullScreen){a="moz";b.isFullScreen=a+"FullScreen"}else{a="webkit";b.isFullScreen=a+"IsFullScreen"}if(c[a+"RequestFullScreen"]){b.requestFn=a+"RequestFullScreen";b.cancelFn=a+"CancelFullScreen"}b.eventName=a+"fullscreenchange"}if(document[b.cancelFn]){vjs.support.requestFullScreen=b}})();vjs.ControlBar=vjs.Component.extend();vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}};vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})};vjs.PlayToggle=vjs.Button.extend({init:function(b,a){vjs.Button.call(this,b,a);b.on("play",vjs.bind(this,this.onPlay));b.on("pause",vjs.bind(this,this.onPause))}});vjs.PlayToggle.prototype.buttonText="Play";vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.PlayToggle.prototype.onClick=function(){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};vjs.PlayToggle.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused");vjs.addClass(this.el_,"vjs-playing");this.el_.children[0].children[0].innerHTML="Pause"};vjs.PlayToggle.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing");vjs.addClass(this.el_,"vjs-paused");this.el_.children[0].children[0].innerHTML="Play"};vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);b.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.CurrentTimeDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"});a.appendChild(vjs.createEl("div").appendChild(this.content));return a};vjs.CurrentTimeDisplay.prototype.updateContent=function(){var a=(this.player_.scrubbing)?this.player_.getCache().currentTime:this.player_.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+vjs.formatTime(a,this.player_.duration())};vjs.DurationDisplay=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);b.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.DurationDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>0:00',"aria-live":"off"});a.appendChild(vjs.createEl("div").appendChild(this.content));return a};vjs.DurationDisplay.prototype.updateContent=function(){var a=this.player_.duration();if(a){this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+vjs.formatTime(a)}};vjs.TimeDivider=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a)}});vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);b.on("timeupdate",vjs.bind(this,this.updateContent))}});vjs.RemainingTimeDisplay.prototype.createEl=function(){var a=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>-0:00',"aria-live":"off"});a.appendChild(vjs.createEl("div").appendChild(this.content));return a};vjs.RemainingTimeDisplay.prototype.updateContent=function(){if(this.player_.duration()){this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>-'+vjs.formatTime(this.player_.remainingTime())}};vjs.FullscreenToggle=vjs.Button.extend({init:function(b,a){vjs.Button.call(this,b,a)}});vjs.FullscreenToggle.prototype.buttonText="Fullscreen";vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)};vjs.FullscreenToggle.prototype.onClick=function(){if(!this.player_.isFullScreen){this.player_.requestFullScreen();this.el_.children[0].children[0].innerHTML="Non-Fullscreen"}else{this.player_.cancelFullScreen();this.el_.children[0].children[0].innerHTML="Fullscreen"}};vjs.ProgressControl=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a)}});vjs.ProgressControl.prototype.options_={children:{seekBar:{}}};vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};vjs.SeekBar=vjs.Slider.extend({init:function(b,a){vjs.Slider.call(this,b,a);b.on("timeupdate",vjs.bind(this,this.updateARIAAttributes));b.ready(vjs.bind(this,this.updateARIAAttributes))}});vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"};vjs.SeekBar.prototype.playerEvent="timeupdate";vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})};vjs.SeekBar.prototype.updateARIAAttributes=function(){var a=(this.player_.scrubbing)?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(this.getPercent()*100,2));this.el_.setAttribute("aria-valuetext",vjs.formatTime(a,this.player_.duration()))};vjs.SeekBar.prototype.getPercent=function(){var b;if(this.player_.techName==="Flash"&&this.player_.seeking()){var a=this.player_.getCache();if(a.lastSetCurrentTime){b=a.lastSetCurrentTime}else{b=this.player_.currentTime()}}else{b=this.player_.currentTime()}return b/this.player_.duration()};vjs.SeekBar.prototype.onMouseDown=function(a){vjs.Slider.prototype.onMouseDown.call(this,a);this.player_.scrubbing=true;this.videoWasPlaying=!this.player_.paused();this.player_.pause()};vjs.SeekBar.prototype.onMouseMove=function(b){var a=this.calculateDistance(b)*this.player_.duration();if(a==this.player_.duration()){a=a-0.1}this.player_.currentTime(a)};vjs.SeekBar.prototype.onMouseUp=function(a){vjs.Slider.prototype.onMouseUp.call(this,a);this.player_.scrubbing=false;if(this.videoWasPlaying){this.player_.play()}};vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};vjs.LoadProgressBar=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);b.on("progress",vjs.bind(this,this.update))}});vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})};vjs.LoadProgressBar.prototype.update=function(){if(this.el_.style){this.el_.style.width=vjs.round(this.player_.bufferedPercent()*100,2)+"%"}};vjs.PlayProgressBar=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a)}});vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})};vjs.SeekHandle=vjs.SliderHandle.extend();vjs.SeekHandle.prototype.defaultValue="00:00";vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle"})};vjs.VolumeControl=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);if(b.tech&&b.tech.features&&b.tech.features.volumeControl===false){this.addClass("vjs-hidden")}b.on("loadstart",vjs.bind(this,function(){if(b.tech.features&&b.tech.features.volumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}}))}});vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}};vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})};vjs.VolumeBar=vjs.Slider.extend({init:function(b,a){vjs.Slider.call(this,b,a);b.on("volumechange",vjs.bind(this,this.updateARIAAttributes));b.ready(vjs.bind(this,this.updateARIAAttributes));setTimeout(vjs.bind(this,this.update),0)}});vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(this.player_.volume()*100,2));this.el_.setAttribute("aria-valuetext",vjs.round(this.player_.volume()*100,2)+"%")};vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"};vjs.VolumeBar.prototype.playerEvent="volumechange";vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})};vjs.VolumeBar.prototype.onMouseMove=function(a){this.player_.volume(this.calculateDistance(a))};vjs.VolumeBar.prototype.getPercent=function(){if(this.player_.muted()){return 0}else{return this.player_.volume()}};vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+0.1)};vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-0.1)};vjs.VolumeLevel=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a)}});vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};vjs.VolumeHandle=vjs.SliderHandle.extend();vjs.VolumeHandle.prototype.defaultValue="00:00";vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})};vjs.MuteToggle=vjs.Button.extend({init:function(b,a){vjs.Button.call(this,b,a);b.on("volumechange",vjs.bind(this,this.update));if(b.tech&&b.tech.features&&b.tech.features.volumeControl===false){this.addClass("vjs-hidden")}b.on("loadstart",vjs.bind(this,function(){if(b.tech.features&&b.tech.features.volumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}}))}});vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(this.player_.muted()?false:true)};vjs.MuteToggle.prototype.update=function(){var b=this.player_.volume(),c=3;if(b===0||this.player_.muted()){c=0}else{if(b<0.33){c=1}else{if(b<0.67){c=2}}}if(this.player_.muted()){if(this.el_.children[0].children[0].innerHTML!="Unmute"){this.el_.children[0].children[0].innerHTML="Unmute"}}else{if(this.el_.children[0].children[0].innerHTML!="Mute"){this.el_.children[0].children[0].innerHTML="Mute"}}for(var a=0;a<4;a++){vjs.removeClass(this.el_,"vjs-vol-"+a)}vjs.addClass(this.el_,"vjs-vol-"+c)};vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(b,a){vjs.MenuButton.call(this,b,a);b.on("volumechange",vjs.bind(this,this.update));if(b.tech&&b.tech.features&&b.tech.features.volumeControl===false){this.addClass("vjs-hidden")}b.on("loadstart",vjs.bind(this,function(){if(b.tech.features&&b.tech.features.volumeControl===false){this.addClass("vjs-hidden")}else{this.removeClass("vjs-hidden")}}));this.addClass("vjs-menu-button")}});vjs.VolumeMenuButton.prototype.createMenu=function(){var b=new vjs.Menu(this.player_,{contentElType:"div"});var a=new vjs.VolumeBar(this.player_,vjs.obj.merge({vertical:true},this.options_.volumeBar));b.addChild(a);return b};vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this);vjs.MenuButton.prototype.onClick.call(this)};vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};vjs.VolumeMenuButton.prototype.update=vjs.MuteToggle.prototype.update;vjs.PosterImage=vjs.Button.extend({init:function(b,a){vjs.Button.call(this,b,a);if(!b.poster()||!b.controls()){this.hide()}b.on("play",vjs.bind(this,this.hide))}});vjs.PosterImage.prototype.createEl=function(){var a=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1}),b=this.player_.poster();if(b){if("backgroundSize" in a.style){a.style.backgroundImage='url("'+b+'")'}else{a.appendChild(vjs.createEl("img",{src:b}))}}return a};vjs.PosterImage.prototype.onClick=function(){if(this.player().controls()){this.player_.play()}};vjs.LoadingSpinner=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);b.on("canplay",vjs.bind(this,this.hide));b.on("canplaythrough",vjs.bind(this,this.hide));b.on("playing",vjs.bind(this,this.hide));b.on("seeked",vjs.bind(this,this.hide));b.on("seeking",vjs.bind(this,this.show));b.on("seeked",vjs.bind(this,this.hide));b.on("error",vjs.bind(this,this.show));b.on("waiting",vjs.bind(this,this.show))}});vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})};vjs.BigPlayButton=vjs.Button.extend();vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:"<span></span>","aria-label":"play video"})};vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()};vjs.MediaTechController=vjs.Component.extend({init:function(b,a,c){vjs.Component.call(this,b,a,c);this.initControlsListeners()}});vjs.MediaTechController.prototype.initControlsListeners=function(){var c,b,a,e;b=this;c=this.player();var a=function(){if(c.controls()&&!c.usingNativeControls()){b.addControlsListeners()}};e=vjs.bind(b,b.removeControlsListeners);this.ready(a);c.on("controlsenabled",a);c.on("controlsdisabled",e)};vjs.MediaTechController.prototype.addControlsListeners=function(){var a,b;this.on("mousedown",this.onClick);this.on("touchstart",function(c){c.preventDefault();c.stopPropagation();b=this.player_.userActive()});a=function(c){c.stopPropagation();if(b){this.player_.reportUserActivity()}};this.on("touchmove",a);this.on("touchleave",a);this.on("touchcancel",a);this.on("touchend",a);this.emitTapEvents();this.on("tap",this.onTap)};vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap");this.off("touchstart");this.off("touchmove");this.off("touchleave");this.off("touchcancel");this.off("touchend");this.off("click");this.off("mousedown")};vjs.MediaTechController.prototype.onClick=function(a){if(a.button!==0){return}if(this.player().controls()){if(this.player().paused()){this.player().play()}else{this.player().pause()}}};vjs.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())};vjs.MediaTechController.prototype.features={volumeControl:true,fullscreenResize:false,progressEvents:false,timeupdateEvents:false};vjs.media={};vjs.media.ApiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");function createMethod(a){return function(){throw new Error('The "'+a+"\" method is not available on the playback technology's API")}}for(var i=vjs.media.ApiMethods.length-1;i>=0;i--){var methodName=vjs.media.ApiMethods[i];vjs.MediaTechController.prototype[vjs.media.ApiMethods[i]]=createMethod(methodName)}vjs.Html5=vjs.MediaTechController.extend({init:function(b,a,c){this.features.volumeControl=vjs.Html5.canControlVolume();this.features.movingMediaElementInDOM=!vjs.IS_IOS;this.features.fullscreenResize=true;vjs.MediaTechController.call(this,b,a,c);var e=a.source;if(e&&this.el_.currentSrc==e.src){b.trigger("loadstart")}else{if(e){this.el_.src=e.src}}if(vjs.TOUCH_ENABLED&&b.options()["nativeControlsForTouch"]!==false){this.useNativeControls()}b.ready(function(){if(this.tag&&this.options_.autoplay&&this.paused()){delete this.tag.poster;this.play()}});this.setupTriggers();this.triggerReady()}});vjs.Html5.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)};vjs.Html5.prototype.createEl=function(){var e=this.player_,f=e.tag,g;if(!f||this.features.movingMediaElementInDOM===false){if(f){f.player=null;e.tag=null;e.el().removeChild(f);f=f.cloneNode(false)}else{f=vjs.createEl("video",{id:e.id()+"_html5_api",className:"vjs-tech"})}f.player=e;vjs.insertFirst(f,e.el())}var b=["autoplay","preload","loop","muted"];for(var c=b.length-1;c>=0;c--){var a=b[c];if(e.options_[a]!==null){f[a]=e.options_[a]}}return f};vjs.Html5.prototype.setupTriggers=function(){for(var a=vjs.Html5.Events.length-1;a>=0;a--){vjs.on(this.el_,vjs.Html5.Events[a],vjs.bind(this.player_,this.eventHandler))}};vjs.Html5.prototype.eventHandler=function(a){this.trigger(a);a.stopPropagation()};vjs.Html5.prototype.useNativeControls=function(){var a,b,f,e,c;a=this;b=this.player();a.setControls(b.controls());f=function(){a.setControls(true)};e=function(){a.setControls(false)};b.on("controlsenabled",f);b.on("controlsdisabled",e);c=function(){b.off("controlsenabled",f);b.off("controlsdisabled",e)};a.on("dispose",c);b.on("usingcustomcontrols",c);b.usingNativeControls(true)};vjs.Html5.prototype.play=function(){this.el_.play()};vjs.Html5.prototype.pause=function(){this.el_.pause()};vjs.Html5.prototype.paused=function(){return this.el_.paused};vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime};vjs.Html5.prototype.setCurrentTime=function(b){try{this.el_.currentTime=b}catch(a){vjs.log(a,"Video is not ready. (Video.js)")}};vjs.Html5.prototype.duration=function(){return this.el_.duration||0};vjs.Html5.prototype.buffered=function(){return this.el_.buffered};vjs.Html5.prototype.volume=function(){return this.el_.volume};vjs.Html5.prototype.setVolume=function(a){this.el_.volume=a};vjs.Html5.prototype.muted=function(){return this.el_.muted};vjs.Html5.prototype.setMuted=function(a){this.el_.muted=a};vjs.Html5.prototype.width=function(){return this.el_.offsetWidth};vjs.Html5.prototype.height=function(){return this.el_.offsetHeight};vjs.Html5.prototype.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){if(/Android/.test(vjs.USER_AGENT)||!/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)){return true}}return false};vjs.Html5.prototype.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA){this.el_.play();setTimeout(function(){a.pause();a.webkitEnterFullScreen()},0)}else{a.webkitEnterFullScreen()}};vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()};vjs.Html5.prototype.src=function(a){this.el_.src=a};vjs.Html5.prototype.load=function(){this.el_.load()};vjs.Html5.prototype.currentSrc=function(){return this.el_.currentSrc};vjs.Html5.prototype.preload=function(){return this.el_.preload};vjs.Html5.prototype.setPreload=function(a){this.el_.preload=a};vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay};vjs.Html5.prototype.setAutoplay=function(a){this.el_.autoplay=a};vjs.Html5.prototype.controls=function(){return this.el_.controls};vjs.Html5.prototype.setControls=function(a){this.el_.controls=!!a};vjs.Html5.prototype.loop=function(){return this.el_.loop};vjs.Html5.prototype.setLoop=function(a){this.el_.loop=a};vjs.Html5.prototype.error=function(){return this.el_.error};vjs.Html5.prototype.seeking=function(){return this.el_.seeking};vjs.Html5.prototype.ended=function(){return this.el_.ended};vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted};vjs.Html5.isSupported=function(){return !!vjs.TEST_VID.canPlayType};vjs.Html5.canPlaySource=function(a){try{return !!vjs.TEST_VID.canPlayType(a.type)}catch(b){return""}};vjs.Html5.canControlVolume=function(){var a=vjs.TEST_VID.volume;vjs.TEST_VID.volume=(a/2)+0.1;return a!==vjs.TEST_VID.volume};vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(",");if(vjs.IS_OLD_ANDROID){document.createElement("video").constructor.prototype.canPlayType=function(a){return(a&&a.toLowerCase().indexOf("video/mp4")!=-1)?"maybe":""}}vjs.Flash=vjs.MediaTechController.extend({init:function(n,o,l){vjs.MediaTechController.call(this,n,o,l);var a=o.source,j=o.parentEl,m=this.el_=vjs.createEl("div",{id:n.id()+"_temp_flash"}),b=n.id()+"_flash_api",c=n.options_,k=vjs.obj.merge({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:c.autoplay,preload:c.preload,loop:c.loop,muted:c.muted},o.flashVars),e=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},o.params),g=vjs.obj.merge({id:b,name:b,"class":"vjs-tech"},o.attributes);if(a){if(a.type&&vjs.Flash.isStreamingType(a.type)){var f=vjs.Flash.streamToParts(a.src);k.rtmpConnection=encodeURIComponent(f.connection);k.rtmpStream=encodeURIComponent(f.stream)}else{k.src=encodeURIComponent(vjs.getAbsoluteURL(a.src))}}vjs.insertFirst(m,j);if(o.startTime){this.ready(function(){this.load();this.play();this.currentTime(o.startTime)})}if(o.iFrameMode===true&&!vjs.IS_FIREFOX){var h=vjs.createEl("iframe",{id:b+"_iframe",name:b+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});k.readyFunction="ready";k.eventProxyFunction="events";k.errorEventProxyFunction="errors";vjs.on(h,"load",vjs.bind(this,function(){var q,p=h.contentWindow;q=h.contentDocument?h.contentDocument:h.contentWindow.document;q.write(vjs.Flash.getEmbedCode(o.swf,k,e,g));p.player=this.player_;p.ready=vjs.bind(this.player_,function(t){var v=q.getElementById(t),u=this,s=u.tech;s.el_=v;vjs.Flash.checkReady(s)});p.events=vjs.bind(this.player_,function(t,s){var u=this;if(u&&u.techName==="flash"){u.trigger(s)}});p.errors=vjs.bind(this.player_,function(t,s){vjs.log("Flash Error",s)})}));m.parentNode.replaceChild(h,m)}else{vjs.Flash.embed(o.swf,m,k,e,g)}}});vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)};vjs.Flash.prototype.play=function(){this.el_.vjs_play()};vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()};vjs.Flash.prototype.src=function(b){if(vjs.Flash.isStreamingSrc(b)){b=vjs.Flash.streamToParts(b);this.setRtmpConnection(b.connection);this.setRtmpStream(b.stream)}else{b=vjs.getAbsoluteURL(b);this.el_.vjs_src(b)}if(this.player_.autoplay()){var a=this;setTimeout(function(){a.play()},0)}};vjs.Flash.prototype.currentSrc=function(){var c=this.el_.vjs_getProperty("currentSrc");if(c==null){var a=this.rtmpConnection(),b=this.rtmpStream();if(a&&b){c=vjs.Flash.streamFromParts(a,b)}}return c};vjs.Flash.prototype.load=function(){this.el_.vjs_load()};vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")};vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))};vjs.Flash.prototype.supportsFullScreen=function(){return false};vjs.Flash.prototype.enterFullScreen=function(){return false};var api=vjs.Flash.prototype,readWrite="rtmpConnection,rtmpStream,preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),readOnly="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(",");var createSetter=function(a){var b=a.charAt(0).toUpperCase()+a.slice(1);api["set"+b]=function(c){return this.el_.vjs_setProperty(a,c)}};var createGetter=function(a){api[a]=function(){return this.el_.vjs_getProperty(a)}};(function(){var a;for(a=0;a<readWrite.length;a++){createGetter(readWrite[a]);createSetter(readWrite[a])}for(a=0;a<readOnly.length;a++){createGetter(readOnly[a])}})();vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10};vjs.Flash.canPlaySource=function(a){if(a.type in vjs.Flash.formats||a.type in vjs.Flash.streamingFormats){return"maybe"}};vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};vjs.Flash.onReady=function(b){var e=vjs.el(b);var c=e.player||e.parentNode.player,a=c.tech;e.player=c;a.el_=e;vjs.Flash.checkReady(a)};vjs.Flash.checkReady=function(a){if(a.el().vjs_getProperty){a.triggerReady()}else{setTimeout(function(){vjs.Flash.checkReady(a)},50)}};vjs.Flash.onEvent=function(b,a){var c=vjs.el(b)["player"];c.trigger(a)};vjs.Flash.onError=function(a,c){var b=vjs.el(a)["player"];b.trigger("error");vjs.log("Flash Error",c,a)};vjs.Flash.version=function(){var a="0,0,0";try{a=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(c){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(b){}}return a.split(",")};vjs.Flash.embed=function(b,k,h,c,f){var a=vjs.Flash.getEmbedCode(b,h,c,f),g=vjs.createEl("div",{innerHTML:a}).childNodes[0],j=k.parentNode;k.parentNode.replaceChild(g,k);var e=j.childNodes[0];setTimeout(function(){e.style.display="block"},1000);return g};vjs.Flash.getEmbedCode=function(f,j,h,b){var c='<object type="application/x-shockwave-flash"',a="",g="",e="";if(j){vjs.obj.each(j,function(k,l){a+=(k+"="+l+"&amp;")})}h=vjs.obj.merge({movie:f,flashvars:a,allowScriptAccess:"always",allowNetworking:"all"},h);vjs.obj.each(h,function(k,l){g+='<param name="'+k+'" value="'+l+'" />'});b=vjs.obj.merge({data:f,width:"100%",height:"100%"},b);vjs.obj.each(b,function(k,l){e+=(k+'="'+l+'" ')});return c+e+">"+g+"</object>"};vjs.Flash.streamFromParts=function(a,b){return a+"&"+b};vjs.Flash.streamToParts=function(e){var c={connection:"",stream:""};if(!e){return c}var b=e.indexOf("&");var a;if(b!==-1){a=b+1}else{b=a=e.lastIndexOf("/")+1;if(b===0){b=a=e.length}}c.connection=e.substring(0,b);c.stream=e.substring(a,e.length);return c};vjs.Flash.isStreamingType=function(a){return a in vjs.Flash.streamingFormats};vjs.Flash.RTMP_RE=/^rtmp[set]?:\/\//i;vjs.Flash.isStreamingSrc=function(a){return vjs.Flash.RTMP_RE.test(a)};vjs.MediaLoader=vjs.Component.extend({init:function(f,c,g){vjs.Component.call(this,f,c,g);if(!f.options_.sources||f.options_.sources.length===0){for(var e=0,b=f.options_.techOrder;e<b.length;e++){var h=vjs.capitalize(b[e]),a=window.videojs[h];if(a&&a.isSupported()){f.loadTech(h);break}}}else{f.src(f.options_.sources)}}});vjs.Player.prototype.textTracks_;vjs.Player.prototype.textTracks=function(){this.textTracks_=this.textTracks_||[];return this.textTracks_};vjs.Player.prototype.addTextTrack=function(g,f,h,e){var c=this.textTracks_=this.textTracks_||[];e=e||{};e.kind=g;e.label=f;e.language=h;var b=vjs.capitalize(g||"subtitles");var a=new window.videojs[b+"Track"](this,e);c.push(a);return a};vjs.Player.prototype.addTextTracks=function(b){var c;for(var a=0;a<b.length;a++){c=b[a];this.addTextTrack(c.kind,c.label,c.language,c)}return this};vjs.Player.prototype.showTextTrack=function(k,g){var c=this.textTracks_,e=0,b=c.length,a,h,f;for(;e<b;e++){a=c[e];if(a.id()===k){a.show();h=a}else{if(g&&a.kind()==g&&a.mode()>0){a.disable()}}}f=(h)?h.kind():((g)?g:false);if(f){this.trigger(f+"trackchange")}return this};vjs.TextTrack=vjs.Component.extend({init:function(b,a){vjs.Component.call(this,b,a);this.id_=a.id||("vjs_"+a.kind+"_"+a.language+"_"+vjs.guid++);this.src_=a.src;this.dflt_=a["default"]||a.dflt;this.title_=a.title;this.language_=a.srclang;this.label_=a.label;this.cues_=[];this.activeCues_=[];this.readyState_=0;this.mode_=0;this.player_.on("fullscreenchange",vjs.bind(this,this.adjustFontSize))}});vjs.TextTrack.prototype.kind_;vjs.TextTrack.prototype.kind=function(){return this.kind_};vjs.TextTrack.prototype.src_;vjs.TextTrack.prototype.src=function(){return this.src_};vjs.TextTrack.prototype.dflt_;vjs.TextTrack.prototype.dflt=function(){return this.dflt_};vjs.TextTrack.prototype.title_;vjs.TextTrack.prototype.title=function(){return this.title_};vjs.TextTrack.prototype.language_;vjs.TextTrack.prototype.language=function(){return this.language_};vjs.TextTrack.prototype.label_;vjs.TextTrack.prototype.label=function(){return this.label_};vjs.TextTrack.prototype.cues_;vjs.TextTrack.prototype.cues=function(){return this.cues_};vjs.TextTrack.prototype.activeCues_;vjs.TextTrack.prototype.activeCues=function(){return this.activeCues_};vjs.TextTrack.prototype.readyState_;vjs.TextTrack.prototype.readyState=function(){return this.readyState_};vjs.TextTrack.prototype.mode_;vjs.TextTrack.prototype.mode=function(){return this.mode_};vjs.TextTrack.prototype.adjustFontSize=function(){if(this.player_.isFullScreen){this.el_.style.fontSize=screen.width/this.player_.width()*1.4*100+"%"}else{this.el_.style.fontSize=""}};vjs.TextTrack.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-"+this.kind_+" vjs-text-track"})};vjs.TextTrack.prototype.show=function(){this.activate();this.mode_=2;vjs.Component.prototype.show.call(this)};vjs.TextTrack.prototype.hide=function(){this.activate();this.mode_=1;vjs.Component.prototype.hide.call(this)};vjs.TextTrack.prototype.disable=function(){if(this.mode_==2){this.hide()}this.deactivate();this.mode_=0};vjs.TextTrack.prototype.activate=function(){if(this.readyState_===0){this.load()}if(this.mode_===0){this.player_.on("timeupdate",vjs.bind(this,this.update,this.id_));this.player_.on("ended",vjs.bind(this,this.reset,this.id_));if(this.kind_==="captions"||this.kind_==="subtitles"){this.player_.getChild("textTrackDisplay").addChild(this)}}};vjs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",vjs.bind(this,this.update,this.id_));this.player_.off("ended",vjs.bind(this,this.reset,this.id_));this.reset();this.player_.getChild("textTrackDisplay").removeChild(this)};vjs.TextTrack.prototype.load=function(){if(this.readyState_===0){this.readyState_=1;vjs.get(this.src_,vjs.bind(this,this.parseCues),vjs.bind(this,this.onError))}};vjs.TextTrack.prototype.onError=function(a){this.error=a;this.readyState_=3;this.trigger("error")};vjs.TextTrack.prototype.parseCues=function(b){var g,c,h,k=b.split("\n"),l="",a;for(var f=1,e=k.length;f<e;f++){l=vjs.trim(k[f]);if(l){if(l.indexOf("-->")==-1){a=l;l=vjs.trim(k[++f])}else{a=this.cues_.length}g={id:a,index:this.cues_.length};c=l.split(" --> ");g.startTime=this.parseCueTime(c[0]);g.endTime=this.parseCueTime(c[1]);h=[];while(k[++f]&&(l=vjs.trim(k[f]))){h.push(l)}g.text=h.join("<br/>");this.cues_.push(g)}}this.readyState_=2;this.trigger("loaded")};vjs.TextTrack.prototype.parseCueTime=function(b){var h=b.split(":"),g=0,c,f,a,j,e;if(h.length==3){c=h[0];f=h[1];a=h[2]}else{c=0;f=h[0];a=h[1]}a=a.split(/\s+/);j=a.splice(0,1)[0];j=j.split(/\.|,/);e=parseFloat(j[1]);j=j[0];g+=parseFloat(c)*3600;g+=parseFloat(f)*60;g+=parseFloat(j);if(e){g+=e/1000}return g};vjs.TextTrack.prototype.update=function(){if(this.cues_.length>0){var b=this.player_.currentTime();if(this.prevChange===undefined||b<this.prevChange||this.nextChange<=b){var g=this.cues_,l=this.player_.duration(),k=0,h=false,a=[],j,f,e,c;if(b>=this.nextChange||this.nextChange===undefined){c=(this.firstActiveIndex!==undefined)?this.firstActiveIndex:0}else{h=true;c=(this.lastActiveIndex!==undefined)?this.lastActiveIndex:g.length-1}while(true){e=g[c];if(e.endTime<=b){k=Math.max(k,e.endTime);if(e.active){e.active=false}}else{if(b<e.startTime){l=Math.min(l,e.startTime);if(e.active){e.active=false}if(!h){break}}else{if(h){a.splice(0,0,e);if(f===undefined){f=c}j=c}else{a.push(e);if(j===undefined){j=c}f=c}l=Math.min(l,e.endTime);k=Math.max(k,e.startTime);e.active=true}}if(h){if(c===0){break}else{c--}}else{if(c===g.length-1){break}else{c++}}}this.activeCues_=a;this.nextChange=l;this.prevChange=k;this.firstActiveIndex=j;this.lastActiveIndex=f;this.updateDisplay();this.trigger("cuechange")}}};vjs.TextTrack.prototype.updateDisplay=function(){var b=this.activeCues_,e="",c=0,a=b.length;for(;c<a;c++){e+='<span class="vjs-tt-cue">'+b[c].text+"</span>"}this.el_.innerHTML=e};vjs.TextTrack.prototype.reset=function(){this.nextChange=0;this.prevChange=this.player_.duration();this.firstActiveIndex=0;this.lastActiveIndex=0};vjs.CaptionsTrack=vjs.TextTrack.extend();vjs.CaptionsTrack.prototype.kind_="captions";vjs.SubtitlesTrack=vjs.TextTrack.extend();vjs.SubtitlesTrack.prototype.kind_="subtitles";vjs.ChaptersTrack=vjs.TextTrack.extend();vjs.ChaptersTrack.prototype.kind_="chapters";vjs.TextTrackDisplay=vjs.Component.extend({init:function(b,a,c){vjs.Component.call(this,b,a,c);if(b.options_.tracks&&b.options_.tracks.length>0){this.player_.addTextTracks(b.options_.tracks)}}});vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})};vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(c,b){var a=this.track=b.track;b.label=a.label();b.selected=a.dflt();vjs.MenuItem.call(this,c,b);this.player_.on(a.kind()+"trackchange",vjs.bind(this,this.update))}});vjs.TextTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this);this.player_.showTextTrack(this.track.id_,this.track.kind())};vjs.TextTrackMenuItem.prototype.update=function(){this.selected(this.track.mode()==2)};vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(b,a){a.track={kind:function(){return a.kind},player:b,label:function(){return a.kind+" off"},dflt:function(){return false},mode:function(){return false}};vjs.TextTrackMenuItem.call(this,b,a);this.selected(true)}});vjs.OffTextTrackMenuItem.prototype.onClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this);this.player_.showTextTrack(this.track.id_,this.track.kind())};vjs.OffTextTrackMenuItem.prototype.update=function(){var c=this.player_.textTracks(),e=0,b=c.length,a,f=true;for(;e<b;e++){a=c[e];if(a.kind()==this.track.kind()&&a.mode()==2){f=false}}this.selected(f)};vjs.TextTrackButton=vjs.MenuButton.extend({init:function(b,a){vjs.MenuButton.call(this,b,a);if(this.items.length<=1){this.hide()}}});vjs.TextTrackButton.prototype.createItems=function(){var b=[],a;b.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_}));for(var c=0;c<this.player_.textTracks().length;c++){a=this.player_.textTracks()[c];if(a.kind()===this.kind_){b.push(new vjs.TextTrackMenuItem(this.player_,{track:a}))}}return b};vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(b,a,c){vjs.TextTrackButton.call(this,b,a,c);this.el_.setAttribute("aria-label","Captions Menu")}});vjs.CaptionsButton.prototype.kind_="captions";vjs.CaptionsButton.prototype.buttonText="Captions";vjs.CaptionsButton.prototype.className="vjs-captions-button";vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(b,a,c){vjs.TextTrackButton.call(this,b,a,c);this.el_.setAttribute("aria-label","Subtitles Menu")}});vjs.SubtitlesButton.prototype.kind_="subtitles";vjs.SubtitlesButton.prototype.buttonText="Subtitles";vjs.SubtitlesButton.prototype.className="vjs-subtitles-button";vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(b,a,c){vjs.TextTrackButton.call(this,b,a,c);this.el_.setAttribute("aria-label","Chapters Menu")}});vjs.ChaptersButton.prototype.kind_="chapters";vjs.ChaptersButton.prototype.buttonText="Chapters";vjs.ChaptersButton.prototype.className="vjs-chapters-button";vjs.ChaptersButton.prototype.createItems=function(){var b=[],a;for(var c=0;c<this.player_.textTracks().length;c++){a=this.player_.textTracks()[c];if(a.kind()===this.kind_){b.push(new vjs.TextTrackMenuItem(this.player_,{track:a}))}}return b};vjs.ChaptersButton.prototype.createMenu=function(){var k=this.player_.textTracks(),f=0,c=k.length,b,m,l=this.items=[];for(;f<c;f++){b=k[f];if(b.kind()==this.kind_&&b.dflt()){if(b.readyState()<2){this.chaptersTrack=b;b.on("loaded",vjs.bind(this,this.createMenu));return}else{m=b;break}}}var a=this.menu=new vjs.Menu(this.player_);a.el_.appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1}));if(m){var g=m.cues_,e,h;f=0;c=g.length;for(;f<c;f++){e=g[f];h=new vjs.ChaptersTrackMenuItem(this.player_,{track:m,cue:e});l.push(h);a.addChild(h)}}if(this.items.length>0){this.show()}return a};vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(e,c){var b=this.track=c.track,a=this.cue=c.cue,f=e.currentTime();c.label=a.text;c.selected=(a.startTime<=f&&f<a.endTime);vjs.MenuItem.call(this,e,c);b.on("cuechange",vjs.bind(this,this.update))}});vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};vjs.ChaptersTrackMenuItem.prototype.update=function(){var a=this.cue,b=this.player_.currentTime();this.selected(a.startTime<=b&&b<a.endTime)};vjs.obj.merge(vjs.ControlBar.prototype.options_.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}});vjs.JSON;if(typeof window.JSON!=="undefined"&&window.JSON.parse==="function"){vjs.JSON=window.JSON}else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var e,a,g,c=document.getElementsByTagName("video");if(c&&c.length>0){for(var f=0,b=c.length;f<b;f++){a=c[f];if(a&&a.getAttribute){if(a.player===undefined){e=a.getAttribute("data-setup");if(e!==null){e=vjs.JSON.parse(e||"{}");g=videojs(a,e)}}}else{vjs.autoSetupTimeout(1);break}}}else{if(!vjs.windowLoaded){vjs.autoSetupTimeout(1)}}};vjs.autoSetupTimeout=function(a){setTimeout(vjs.autoSetup,a)};if(document.readyState==="complete"){vjs.windowLoaded=true}else{vjs.one(window,"load",function(){vjs.windowLoaded=true})}vjs.autoSetupTimeout(1);vjs.plugin=function(a,b){vjs.Player.prototype[a]=b};
/*! Video.js v4.2.1 Copyright 2013 Brightcove, Inc. https://github.com/videojs/video.js/blob/master/LICENSE */
(function(){var b=void 0,f=!0,j=null,l=!1;function m(){return function(){}}function p(a){return function(){return this[a]}}function q(a){return function(){return a}}var t;document.createElement("video");document.createElement("audio");document.createElement("track");function u(a,c,d){if("string"===typeof a){0===a.indexOf("#")&&(a=a.slice(1));if(u.wa[a]){return u.wa[a]}a=u.v(a)}if(!a||!a.nodeName){throw new TypeError("The element or ID supplied is not valid. (videojs)")}return a.player||new u.w(a,c,d)}var v=u;window.Qd=window.Rd=u;u.Rb="4.2";u.Bc="https:"==document.location.protocol?"https://":"http://";u.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}},notSupportedMessage:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'};"GENERATED_CDN_VSN"!==u.Rb&&(v.options.flash.swf=u.Bc+"vjs.zencdn.net/"+u.Rb+"/video-js.swf");u.wa={};u.ka=u.CoreObject=m();u.ka.extend=function(a){var c,d;a=a||{};c=a.init||a.i||this.prototype.init||this.prototype.i||m();d=function(){c.apply(this,arguments)};d.prototype=u.k.create(this.prototype);d.prototype.constructor=d;d.extend=u.ka.extend;d.create=u.ka.create;for(var e in a){a.hasOwnProperty(e)&&(d.prototype[e]=a[e])}return d};u.ka.create=function(){var a=u.k.create(this.prototype);this.apply(a,arguments);return a};u.d=function(a,c,d){var e=u.getData(a);e.z||(e.z={});e.z[c]||(e.z[c]=[]);d.s||(d.s=u.s++);e.z[c].push(d);e.W||(e.disabled=l,e.W=function(c){if(!e.disabled){c=u.gc(c);var d=e.z[c.type];if(d){for(var d=d.slice(0),k=0,r=d.length;k<r&&!c.lc();k++){d[k].call(a,c)}}}});1==e.z[c].length&&(document.addEventListener?a.addEventListener(c,e.W,l):document.attachEvent&&a.attachEvent("on"+c,e.W))};u.n=function(a,c,d){if(u.kc(a)){var e=u.getData(a);if(e.z){if(c){var g=e.z[c];if(g){if(d){if(d.s){for(e=0;e<g.length;e++){g[e].s===d.s&&g.splice(e--,1)}}}else{e.z[c]=[]}u.dc(a,c)}}else{for(g in e.z){c=g,e.z[c]=[],u.dc(a,c)}}}}};u.dc=function(a,c){var d=u.getData(a);0===d.z[c].length&&(delete d.z[c],document.removeEventListener?a.removeEventListener(c,d.W,l):document.detachEvent&&a.detachEvent("on"+c,d.W));u.Ab(d.z)&&(delete d.z,delete d.W,delete d.disabled);u.Ab(d)&&u.qc(a)};u.gc=function(a){function c(){return f}function d(){return l}if(!a||!a.Bb){var e=a||window.event;a={};for(var g in e){"layerX"!==g&&"layerY"!==g&&(a[g]=e[g])}a.target||(a.target=a.srcElement||document);a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;a.preventDefault=function(){e.preventDefault&&e.preventDefault();a.returnValue=l;a.zb=c};a.zb=d;a.stopPropagation=function(){e.stopPropagation&&e.stopPropagation();a.cancelBubble=f;a.Bb=c};a.Bb=d;a.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation();a.lc=c;a.stopPropagation()};a.lc=d;if(a.clientX!=j){g=document.documentElement;var h=document.body;a.pageX=a.clientX+(g&&g.scrollLeft||h&&h.scrollLeft||0)-(g&&g.clientLeft||h&&h.clientLeft||0);a.pageY=a.clientY+(g&&g.scrollTop||h&&h.scrollTop||0)-(g&&g.clientTop||h&&h.clientTop||0)}a.which=a.charCode||a.keyCode;a.button!=j&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a};u.j=function(a,c){var d=u.kc(a)?u.getData(a):{},e=a.parentNode||a.ownerDocument;"string"===typeof c&&(c={type:c,target:a});c=u.gc(c);d.W&&d.W.call(a,c);if(e&&!c.Bb()&&c.bubbles!==l){u.j(e,c)}else{if(!e&&!c.zb()&&(d=u.getData(c.target),c.target[c.type])){d.disabled=f;if("function"===typeof c.target[c.type]){c.target[c.type]()}d.disabled=l}}return !c.zb()};u.U=function(a,c,d){function e(){u.n(a,c,e);d.apply(this,arguments)}e.s=d.s=d.s||u.s++;u.d(a,c,e)};var w=Object.prototype.hasOwnProperty;u.e=function(a,c){var d,e;d=document.createElement(a||"div");for(e in c){w.call(c,e)&&(-1!==e.indexOf("aria-")||"role"==e?d.setAttribute(e,c[e]):d[e]=c[e])}return d};u.$=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};u.k={};u.k.create=Object.create||function(a){function c(){}c.prototype=a;return new c};u.k.ta=function(a,c,d){for(var e in a){w.call(a,e)&&c.call(d||this,e,a[e])}};u.k.B=function(a,c){if(!c){return a}for(var d in c){w.call(c,d)&&(a[d]=c[d])}return a};u.k.fc=function(a,c){var d,e,g;a=u.k.copy(a);for(d in c){w.call(c,d)&&(e=a[d],g=c[d],a[d]=u.k.mc(e)&&u.k.mc(g)?u.k.fc(e,g):c[d])}return a};u.k.copy=function(a){return u.k.B({},a)};u.k.mc=function(a){return !!a&&"object"===typeof a&&"[object Object]"===a.toString()&&a.constructor===Object};u.bind=function(a,c,d){function e(){return c.apply(a,arguments)}c.s||(c.s=u.s++);e.s=d?d+"_"+c.s:c.s;return e};u.qa={};u.s=1;u.expando="vdata"+(new Date).getTime();u.getData=function(a){var c=a[u.expando];c||(c=a[u.expando]=u.s++,u.qa[c]={});return u.qa[c]};u.kc=function(a){a=a[u.expando];return !(!a||u.Ab(u.qa[a]))};u.qc=function(a){var c=a[u.expando];if(c){delete u.qa[c];try{delete a[u.expando]}catch(d){a.removeAttribute?a.removeAttribute(u.expando):a[u.expando]=j}}};u.Ab=function(a){for(var c in a){if(a[c]!==j){return l}}return f};u.m=function(a,c){-1==(" "+a.className+" ").indexOf(" "+c+" ")&&(a.className=""===a.className?c:a.className+" "+c)};u.t=function(a,c){var d,e;if(-1!=a.className.indexOf(c)){d=a.className.split(" ");for(e=d.length-1;0<=e;e--){d[e]===c&&d.splice(e,1)}a.className=d.join(" ")}};u.ma=u.e("video");u.G=navigator.userAgent;u.Hc=/iPhone/i.test(u.G);u.Gc=/iPad/i.test(u.G);u.Ic=/iPod/i.test(u.G);u.Fc=u.Hc||u.Gc||u.Ic;var aa=u,x;var y=u.G.match(/OS (\d+)_/i);x=y&&y[1]?y[1]:b;aa.Cd=x;u.Dc=/Android/i.test(u.G);var ba=u,z;var A=u.G.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),B,C;A?(B=A[1]&&parseFloat(A[1]),C=A[2]&&parseFloat(A[2]),z=B&&C?parseFloat(A[1]+"."+A[2]):B?B:j):z=j;ba.Cc=z;u.Jc=u.Dc&&/webkit/i.test(u.G)&&2.3>u.Cc;u.Ec=/Firefox/i.test(u.G);u.Dd=/Chrome/i.test(u.G);u.Mc="ontouchstart" in window;u.wb=function(a){var c,d,e,g;c={};if(a&&a.attributes&&0<a.attributes.length){d=a.attributes;for(var h=d.length-1;0<=h;h--){e=d[h].name;g=d[h].value;if("boolean"===typeof a[e]||-1!==",autoplay,controls,loop,muted,default,".indexOf(","+e+",")){g=g!==j?f:l}c[e]=g}}return c};u.Hd=function(a,c){var d="";document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,"").getPropertyValue(c):a.currentStyle&&(d=a["client"+c.substr(0,1).toUpperCase()+c.substr(1)]+"px");return d};u.yb=function(a,c){c.firstChild?c.insertBefore(a,c.firstChild):c.appendChild(a)};u.Nb={};u.v=function(a){0===a.indexOf("#")&&(a=a.slice(1));return document.getElementById(a)};u.Ka=function(a,c){c=c||a;var d=Math.floor(a%60),e=Math.floor(a/60%60),g=Math.floor(a/3600),h=Math.floor(c/60%60),k=Math.floor(c/3600);if(isNaN(a)||Infinity===a){g=e=d="-"}g=0<g||0<k?g+":":"";return g+(((g||10<=h)&&10>e?"0"+e:e)+":")+(10>d?"0"+d:d)};u.Pc=function(){document.body.focus();document.onselectstart=q(l)};u.yd=function(){document.onselectstart=q(f)};u.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")};u.round=function(a,c){c||(c=0);return Math.round(a*Math.pow(10,c))/Math.pow(10,c)};u.sb=function(a,c){return{length:1,start:function(){return a},end:function(){return c}}};u.get=function(a,c,d){var e,g;"undefined"===typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(d){}throw Error("This browser does not support XMLHttpRequest.")});g=new XMLHttpRequest;try{g.open("GET",a)}catch(h){d(h)}e=0===a.indexOf("file:")||0===window.location.href.indexOf("file:")&&-1===a.indexOf("http");g.onreadystatechange=function(){4===g.readyState&&(200===g.status||e&&0===g.status?c(g.responseText):d&&d())};try{g.send()}catch(k){d&&d(k)}};u.qd=function(a){try{var c=window.localStorage||l;c&&(c.volume=a)}catch(d){22==d.code||1014==d.code?u.log("LocalStorage Full (VideoJS)",d):18==d.code?u.log("LocalStorage not allowed (VideoJS)",d):u.log("LocalStorage Error (VideoJS)",d)}};u.ic=function(a){a.match(/^https?:\/\//)||(a=u.e("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href);return a};u.log=function(){u.log.history=u.log.history||[];u.log.history.push(arguments);window.console&&window.console.log(Array.prototype.slice.call(arguments))};u.Xc=function(a){var c,d;a.getBoundingClientRect&&a.parentNode&&(c=a.getBoundingClientRect());if(!c){return{left:0,top:0}}a=document.documentElement;d=document.body;return{left:c.left+(window.pageXOffset||d.scrollLeft)-(a.clientLeft||d.clientLeft||0),top:c.top+(window.pageYOffset||d.scrollTop)-(a.clientTop||d.clientTop||0)}};u.c=u.ka.extend({i:function(a,c,d){this.b=a;this.g=u.k.copy(this.g);c=this.options(c);this.Q=c.id||(c.el&&c.el.id?c.el.id:a.id()+"_component_"+u.s++);this.cd=c.name||j;this.a=c.el||this.e();this.H=[];this.pb={};this.V={};if((a=this.g)&&a.children){var e=this;u.k.ta(a.children,function(a,c){c!==l&&!c.loadEvent&&(e[a]=e.Z(a,c))})}this.M(d)}});t=u.c.prototype;t.D=function(){this.j("dispose");if(this.H){for(var a=this.H.length-1;0<=a;a--){this.H[a].D&&this.H[a].D()}}this.V=this.pb=this.H=j;this.n();this.a.parentNode&&this.a.parentNode.removeChild(this.a);u.qc(this.a);this.a=j};t.L=p("b");t.options=function(a){return a===b?this.g:this.g=u.k.fc(this.g,a)};t.e=function(a,c){return u.e(a,c)};t.v=p("a");t.id=p("Q");t.name=p("cd");t.children=p("H");t.Z=function(a,c){var d,e;"string"===typeof a?(e=a,c=c||{},d=c.componentClass||u.$(e),c.name=e,d=new window.videojs[d](this.b||this,c)):d=a;this.H.push(d);"function"===typeof d.id&&(this.pb[d.id()]=d);(e=e||d.name&&d.name())&&(this.V[e]=d);"function"===typeof d.el&&d.el()&&(this.ra||this.a).appendChild(d.el());return d};t.removeChild=function(a){"string"===typeof a&&(a=this.V[a]);if(a&&this.H){for(var c=l,d=this.H.length-1;0<=d;d--){if(this.H[d]===a){c=f;this.H.splice(d,1);break}}c&&(this.pb[a.id]=j,this.V[a.name]=j,(c=a.v())&&c.parentNode===(this.ra||this.a)&&(this.ra||this.a).removeChild(a.v()))}};t.T=q("");t.d=function(a,c){u.d(this.a,a,u.bind(this,c));return this};t.n=function(a,c){u.n(this.a,a,c);return this};t.U=function(a,c){u.U(this.a,a,u.bind(this,c));return this};t.j=function(a,c){u.j(this.a,a,c);return this};t.M=function(a){a&&(this.aa?a.call(this):(this.Ra===b&&(this.Ra=[]),this.Ra.push(a)));return this};t.Ta=function(){this.aa=f;var a=this.Ra;if(a&&0<a.length){for(var c=0,d=a.length;c<d;c++){a[c].call(this)}this.Ra=[];this.j("ready")}};t.m=function(a){u.m(this.a,a);return this};t.t=function(a){u.t(this.a,a);return this};t.show=function(){this.a.style.display="block";return this};t.C=function(){this.a.style.display="none";return this};function D(a){a.t("vjs-lock-showing")}t.disable=function(){this.C();this.show=m()};t.width=function(a,c){return E(this,"width",a,c)};t.height=function(a,c){return E(this,"height",a,c)};t.Tc=function(a,c){return this.width(a,f).height(c)};function E(a,c,d,e){if(d!==b){return a.a.style[c]=-1!==(""+d).indexOf("%")||-1!==(""+d).indexOf("px")?d:"auto"===d?"":d+"px",e||a.j("resize"),a}if(!a.a){return 0}d=a.a.style[c];e=d.indexOf("px");return -1!==e?parseInt(d.slice(0,e),10):parseInt(a.a["offset"+u.$(c)],10)}u.q=u.c.extend({i:function(a,c){u.c.call(this,a,c);var d=l;this.d("touchstart",function(a){a.preventDefault();d=f});this.d("touchmove",function(){d=l});var e=this;this.d("touchend",function(a){d&&e.p(a);a.preventDefault()});this.d("click",this.p);this.d("focus",this.Na);this.d("blur",this.Ma)}});t=u.q.prototype;t.e=function(a,c){c=u.k.B({className:this.T(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.pa||"Need Text")+"</span></div>",nd:"button","aria-live":"polite",tabIndex:0},c);return u.c.prototype.e.call(this,a,c)};t.T=function(){return"vjs-control "+u.c.prototype.T.call(this)};t.p=m();t.Na=function(){u.d(document,"keyup",u.bind(this,this.ba))};t.ba=function(a){if(32==a.which||13==a.which){a.preventDefault(),this.p()}};t.Ma=function(){u.n(document,"keyup",u.bind(this,this.ba))};u.O=u.c.extend({i:function(a,c){u.c.call(this,a,c);this.Oc=this.V[this.g.barName];this.handle=this.V[this.g.handleName];a.d(this.oc,u.bind(this,this.update));this.d("mousedown",this.Oa);this.d("touchstart",this.Oa);this.d("focus",this.Na);this.d("blur",this.Ma);this.d("click",this.p);this.b.d("controlsvisible",u.bind(this,this.update));a.M(u.bind(this,this.update));this.P={}}});t=u.O.prototype;t.e=function(a,c){c=c||{};c.className+=" vjs-slider";c=u.k.B({nd:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},c);return u.c.prototype.e.call(this,a,c)};t.Oa=function(a){a.preventDefault();u.Pc();this.P.move=u.bind(this,this.Gb);this.P.end=u.bind(this,this.Hb);u.d(document,"mousemove",this.P.move);u.d(document,"mouseup",this.P.end);u.d(document,"touchmove",this.P.move);u.d(document,"touchend",this.P.end);this.Gb(a)};t.Hb=function(){u.yd();u.n(document,"mousemove",this.P.move,l);u.n(document,"mouseup",this.P.end,l);u.n(document,"touchmove",this.P.move,l);u.n(document,"touchend",this.P.end,l);this.update()};t.update=function(){if(this.a){var a,c=this.xb(),d=this.handle,e=this.Oc;isNaN(c)&&(c=0);a=c;if(d){a=this.a.offsetWidth;var g=d.v().offsetWidth;a=g?g/a:0;c*=1-a;a=c+a/2;d.v().style.left=u.round(100*c,2)+"%"}e.v().style.width=u.round(100*a,2)+"%"}};function F(a,c){var d,e,g,h;d=a.a;e=u.Xc(d);h=g=d.offsetWidth;d=a.handle;if(a.g.zd){return h=e.top,e=c.changedTouches?c.changedTouches[0].pageY:c.pageY,d&&(d=d.v().offsetHeight,h+=d/2,g-=d),Math.max(0,Math.min(1,(h-e+g)/g))}g=e.left;e=c.changedTouches?c.changedTouches[0].pageX:c.pageX;d&&(d=d.v().offsetWidth,g+=d/2,h-=d);return Math.max(0,Math.min(1,(e-g)/h))}t.Na=function(){u.d(document,"keyup",u.bind(this,this.ba))};t.ba=function(a){37==a.which?(a.preventDefault(),this.uc()):39==a.which&&(a.preventDefault(),this.vc())};t.Ma=function(){u.n(document,"keyup",u.bind(this,this.ba))};t.p=function(a){a.stopImmediatePropagation();a.preventDefault()};u.ea=u.c.extend();u.ea.prototype.defaultValue=0;u.ea.prototype.e=function(a,c){c=c||{};c.className+=" vjs-slider-handle";c=u.k.B({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},c);return u.c.prototype.e.call(this,"div",c)};u.la=u.c.extend();function ca(a,c){a.Z(c);c.d("click",u.bind(a,function(){D(this)}))}u.la.prototype.e=function(){var a=this.options().Rc||"ul";this.ra=u.e(a,{className:"vjs-menu-content"});a=u.c.prototype.e.call(this,"div",{append:this.ra,className:"vjs-menu"});a.appendChild(this.ra);u.d(a,"click",function(a){a.preventDefault();a.stopImmediatePropagation()});return a};u.N=u.q.extend({i:function(a,c){u.q.call(this,a,c);this.selected(c.selected)}});u.N.prototype.e=function(a,c){return u.q.prototype.e.call(this,"li",u.k.B({className:"vjs-menu-item",innerHTML:this.g.label},c))};u.N.prototype.p=function(){this.selected(f)};u.N.prototype.selected=function(a){a?(this.m("vjs-selected"),this.a.setAttribute("aria-selected",f)):(this.t("vjs-selected"),this.a.setAttribute("aria-selected",l))};u.R=u.q.extend({i:function(a,c){u.q.call(this,a,c);this.va=this.Ja();this.Z(this.va);this.J&&0===this.J.length&&this.C();this.d("keyup",this.ba);this.a.setAttribute("aria-haspopup",f);this.a.setAttribute("role","button")}});t=u.R.prototype;t.oa=l;t.Ja=function(){var a=new u.la(this.b);this.options().title&&a.v().appendChild(u.e("li",{className:"vjs-menu-title",innerHTML:u.$(this.A),wd:-1}));if(this.J=this.createItems()){for(var c=0;c<this.J.length;c++){ca(a,this.J[c])}}return a};t.sa=m();t.T=function(){return this.className+" vjs-menu-button "+u.q.prototype.T.call(this)};t.Na=m();t.Ma=m();t.p=function(){this.U("mouseout",u.bind(this,function(){D(this.va);this.a.blur()}));this.oa?G(this):H(this)};t.ba=function(a){a.preventDefault();32==a.which||13==a.which?this.oa?G(this):H(this):27==a.which&&this.oa&&G(this)};function H(a){a.oa=f;a.va.m("vjs-lock-showing");a.a.setAttribute("aria-pressed",f);a.J&&0<a.J.length&&a.J[0].v().focus()}function G(a){a.oa=l;D(a.va);a.a.setAttribute("aria-pressed",l)}u.w=u.c.extend({i:function(a,c,d){this.F=a;c=u.k.B(da(a),c);this.u={};this.pc=c.poster;this.rb=c.controls;a.controls=l;u.c.call(this,this,c,d);this.controls()?this.m("vjs-controls-enabled"):this.m("vjs-controls-disabled");this.U("play",function(a){u.j(this.a,{type:"firstplay",target:this.a})||(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())});this.d("ended",this.ed);this.d("play",this.Jb);this.d("firstplay",this.fd);this.d("pause",this.Ib);this.d("progress",this.hd);this.d("durationchange",this.dd);this.d("error",this.Fb);this.d("fullscreenchange",this.gd);u.wa[this.Q]=this;c.plugins&&u.k.ta(c.plugins,function(a,c){this[a](c)},this);var e,g,h,k;e=this.rc;a=function(){e();clearInterval(g);g=setInterval(u.bind(this,e),250)};c=function(){e();clearInterval(g)};this.d("mousedown",a);this.d("mousemove",e);this.d("mouseup",c);this.d("keydown",e);this.d("keyup",e);this.d("touchstart",a);this.d("touchmove",e);this.d("touchend",c);this.d("touchcancel",c);h=setInterval(u.bind(this,function(){this.ja&&(this.ja=l,I(this,f),clearTimeout(k),k=setTimeout(u.bind(this,function(){this.ja||I(this,l)}),2000))}),250);this.d("dispose",function(){clearInterval(h);clearTimeout(k)})}});t=u.w.prototype;t.g=u.options;t.D=function(){this.j("dispose");this.n("dispose");u.wa[this.Q]=j;this.F&&this.F.player&&(this.F.player=j);this.a&&this.a.player&&(this.a.player=j);clearInterval(this.Qa);this.ya();this.h&&this.h.D();u.c.prototype.D.call(this)};function da(a){var c={sources:[],tracks:[]};u.k.B(c,u.wb(a));if(a.hasChildNodes()){var d,e,g,h;a=a.childNodes;g=0;for(h=a.length;g<h;g++){d=a[g],e=d.nodeName.toLowerCase(),"source"===e?c.sources.push(u.wb(d)):"track"===e&&c.tracks.push(u.wb(d))}}return c}t.e=function(){var a=this.a=u.c.prototype.e.call(this,"div"),c=this.F;c.removeAttribute("width");c.removeAttribute("height");if(c.hasChildNodes()){var d,e,g,h,k;d=c.childNodes;e=d.length;for(k=[];e--;){g=d[e],h=g.nodeName.toLowerCase(),("source"===h||"track"===h)&&k.push(g)}for(d=0;d<k.length;d++){c.removeChild(k[d])}}c.id=c.id||"vjs_video_"+u.s++;a.id=c.id;a.className=c.className;c.id+="_html5_api";c.className="vjs-tech";c.player=a.player=this;this.m("vjs-paused");this.width(this.g.width,f);this.height(this.g.height,f);c.parentNode&&c.parentNode.insertBefore(a,c);u.yb(c,a);return a};function J(a,c,d){a.h?(a.aa=l,a.h.D(),a.Db&&(a.Db=l,clearInterval(a.Qa)),a.Eb&&K(a),a.h=l):"Html5"!==c&&a.F&&(a.a.removeChild(a.F),a.F.player=j,a.F=j);a.ia=c;a.aa=l;var e=u.k.B({source:d,parentEl:a.a},a.g[c.toLowerCase()]);d&&(d.src==a.u.src&&0<a.u.currentTime&&(e.startTime=a.u.currentTime),a.u.src=d.src);a.h=new window.videojs[c](a,e);a.h.M(function(){this.b.Ta();if(!this.l.progressEvents){var a=this.b;a.Db=f;a.Qa=setInterval(u.bind(a,function(){this.u.kb<this.buffered().end(0)?this.j("progress"):1==this.Ia()&&(clearInterval(this.Qa),this.j("progress"))}),500);a.h.U("progress",function(){this.l.progressEvents=f;var a=this.b;a.Db=l;clearInterval(a.Qa)})}this.l.timeupdateEvents||(a=this.b,a.Eb=f,a.d("play",a.yc),a.d("pause",a.ya),a.h.U("timeupdate",function(){this.l.timeupdateEvents=f;K(this.b)}))})}function K(a){a.Eb=l;a.ya();a.n("play",a.yc);a.n("pause",a.ya)}t.yc=function(){this.ec&&this.ya();this.ec=setInterval(u.bind(this,function(){this.j("timeupdate")}),250)};t.ya=function(){clearInterval(this.ec)};t.ed=function(){this.g.loop&&(this.currentTime(0),this.play())};t.Jb=function(){u.t(this.a,"vjs-paused");u.m(this.a,"vjs-playing")};t.fd=function(){this.g.starttime&&this.currentTime(this.g.starttime);this.m("vjs-has-started")};t.Ib=function(){u.t(this.a,"vjs-playing");u.m(this.a,"vjs-paused")};t.hd=function(){1==this.Ia()&&this.j("loadedalldata")};t.dd=function(){this.duration(L(this,"duration"))};t.Fb=function(a){u.log("Video Error",a)};t.gd=function(){this.I?this.m("vjs-fullscreen"):this.t("vjs-fullscreen")};function M(a,c,d){if(a.h&&!a.h.aa){a.h.M(function(){this[c](d)})}else{try{a.h[c](d)}catch(e){throw u.log(e),e}}}function L(a,c){if(a.h&&a.h.aa){try{return a.h[c]()}catch(d){throw a.h[c]===b?u.log("Video.js: "+c+" method not defined for "+a.ia+" playback technology.",d):"TypeError"==d.name?(u.log("Video.js: "+c+" unavailable on "+a.ia+" playback technology element.",d),a.h.aa=l):u.log(d),d}}}t.play=function(){M(this,"play");return this};t.pause=function(){M(this,"pause");return this};t.paused=function(){return L(this,"paused")===l?l:f};t.currentTime=function(a){return a!==b?(this.u.nc=a,M(this,"setCurrentTime",a),this.Eb&&this.j("timeupdate"),this):this.u.currentTime=L(this,"currentTime")||0};t.duration=function(a){return a!==b?(this.u.duration=parseFloat(a),this):this.u.duration};t.buffered=function(){var a=L(this,"buffered"),c=a.length-1,d=this.u.kb=this.u.kb||0;a&&(0<=c&&a.end(c)!==d)&&(d=a.end(c),this.u.kb=d);return u.sb(0,d)};t.Ia=function(){return this.duration()?this.buffered().end(0)/this.duration():0};t.volume=function(a){if(a!==b){return a=Math.max(0,Math.min(1,parseFloat(a))),this.u.volume=a,M(this,"setVolume",a),u.qd(a),this}a=parseFloat(L(this,"volume"));return isNaN(a)?1:a};t.muted=function(a){return a!==b?(M(this,"setMuted",a),this):L(this,"muted")||l};t.Sa=function(){return L(this,"supportsFullScreen")||l};t.xa=function(){var a=u.Nb.xa;this.I=f;a?(u.d(document,a.ub,u.bind(this,function(c){this.I=document[a.I];this.I===l&&u.n(document,a.ub,arguments.callee);this.j("fullscreenchange")})),this.a[a.sc]()):this.h.Sa()?M(this,"enterFullScreen"):(this.Zc=f,this.Uc=document.documentElement.style.overflow,u.d(document,"keydown",u.bind(this,this.hc)),document.documentElement.style.overflow="hidden",u.m(document.body,"vjs-full-window"),this.j("enterFullWindow"),this.j("fullscreenchange"));return this};t.nb=function(){var a=u.Nb.xa;this.I=l;if(a){document[a.mb]()}else{this.h.Sa()?M(this,"exitFullScreen"):(N(this),this.j("fullscreenchange"))}return this};t.hc=function(a){27===a.keyCode&&(this.I===f?this.nb():N(this))};function N(a){a.Zc=l;u.n(document,"keydown",a.hc);document.documentElement.style.overflow=a.Uc;u.t(document.body,"vjs-full-window");a.j("exitFullWindow")}t.src=function(a){if(a instanceof Array){var c;a:{c=a;for(var d=0,e=this.g.techOrder;d<e.length;d++){var g=u.$(e[d]),h=window.videojs[g];if(h.isSupported()){for(var k=0,r=c;k<r.length;k++){var n=r[k];if(h.canPlaySource(n)){c={source:n,h:g};break a}}}}c=l}c?(a=c.source,c=c.h,c==this.ia?this.src(a):J(this,c,a)):this.a.appendChild(u.e("p",{innerHTML:this.options().notSupportedMessage}))}else{a instanceof Object?window.videojs[this.ia].canPlaySource(a)?this.src(a.src):this.src([a]):(this.u.src=a,this.aa?(M(this,"src",a),"auto"==this.g.preload&&this.load(),this.g.autoplay&&this.play()):this.M(function(){this.src(a)}))}return this};t.load=function(){M(this,"load");return this};t.currentSrc=function(){return L(this,"currentSrc")||this.u.src||""};t.Pa=function(a){return a!==b?(M(this,"setPreload",a),this.g.preload=a,this):L(this,"preload")};t.autoplay=function(a){return a!==b?(M(this,"setAutoplay",a),this.g.autoplay=a,this):L(this,"autoplay")};t.loop=function(a){return a!==b?(M(this,"setLoop",a),this.g.loop=a,this):L(this,"loop")};t.poster=function(a){a!==b&&(this.pc=a);return this.pc};t.controls=function(a){return a!==b?(a=!!a,this.rb!==a&&((this.rb=a)?(this.t("vjs-controls-disabled"),this.m("vjs-controls-enabled"),this.j("controlsenabled")):(this.t("vjs-controls-enabled"),this.m("vjs-controls-disabled"),this.j("controlsdisabled"))),this):this.rb};u.w.prototype.Qb;t=u.w.prototype;t.Pb=function(a){return a!==b?(a=!!a,this.Qb!==a&&((this.Qb=a)?(this.m("vjs-using-native-controls"),this.j("usingnativecontrols")):(this.t("vjs-using-native-controls"),this.j("usingcustomcontrols"))),this):this.Qb};t.error=function(){return L(this,"error")};t.seeking=function(){return L(this,"seeking")};t.ja=f;t.rc=function(){this.ja=f};t.Ob=f;function I(a,c){return c!==b?(c=!!c,c!==a.Ob&&((a.Ob=c)?(a.ja=f,a.t("vjs-user-inactive"),a.m("vjs-user-active"),a.j("useractive")):(a.ja=l,a.h.U("mousemove",function(a){a.stopPropagation();a.preventDefault()}),a.t("vjs-user-active"),a.m("vjs-user-inactive"),a.j("userinactive"))),a):a.Ob}var O,P,Q;Q=document.createElement("div");P={};Q.Ed!==b?(P.sc="requestFullscreen",P.mb="exitFullscreen",P.ub="fullscreenchange",P.I="fullScreen"):(document.mozCancelFullScreen?(O="moz",P.I=O+"FullScreen"):(O="webkit",P.I=O+"IsFullScreen"),Q[O+"RequestFullScreen"]&&(P.sc=O+"RequestFullScreen",P.mb=O+"CancelFullScreen"),P.ub=O+"fullscreenchange");document[P.mb]&&(u.Nb.xa=P);u.Ea=u.c.extend();u.Ea.prototype.g={Jd:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}};u.Ea.prototype.e=function(){return u.e("div",{className:"vjs-control-bar"})};u.Wb=u.q.extend({i:function(a,c){u.q.call(this,a,c);a.d("play",u.bind(this,this.Jb));a.d("pause",u.bind(this,this.Ib))}});t=u.Wb.prototype;t.pa="Play";t.T=function(){return"vjs-play-control "+u.q.prototype.T.call(this)};t.p=function(){this.b.paused()?this.b.play():this.b.pause()};t.Jb=function(){u.t(this.a,"vjs-paused");u.m(this.a,"vjs-playing");this.a.children[0].children[0].innerHTML="Pause"};t.Ib=function(){u.t(this.a,"vjs-playing");u.m(this.a,"vjs-paused");this.a.children[0].children[0].innerHTML="Play"};u.Xa=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("timeupdate",u.bind(this,this.Ba))}});u.Xa.prototype.e=function(){var a=u.c.prototype.e.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=u.e("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"});a.appendChild(u.e("div").appendChild(this.content));return a};u.Xa.prototype.Ba=function(){var a=this.b.Lb?this.b.u.currentTime:this.b.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+u.Ka(a,this.b.duration())};u.Ya=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("timeupdate",u.bind(this,this.Ba))}});u.Ya.prototype.e=function(){var a=u.c.prototype.e.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=u.e("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>0:00',"aria-live":"off"});a.appendChild(u.e("div").appendChild(this.content));return a};u.Ya.prototype.Ba=function(){var a=this.b.duration();a&&(this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+u.Ka(a))};u.$b=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.$b.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};u.eb=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("timeupdate",u.bind(this,this.Ba))}});u.eb.prototype.e=function(){var a=u.c.prototype.e.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=u.e("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>-0:00',"aria-live":"off"});a.appendChild(u.e("div").appendChild(this.content));return a};u.eb.prototype.Ba=function(){this.b.duration()&&(this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>-'+u.Ka(this.b.duration()-this.b.currentTime()))};u.Fa=u.q.extend({i:function(a,c){u.q.call(this,a,c)}});u.Fa.prototype.pa="Fullscreen";u.Fa.prototype.T=function(){return"vjs-fullscreen-control "+u.q.prototype.T.call(this)};u.Fa.prototype.p=function(){this.b.I?(this.b.nb(),this.a.children[0].children[0].innerHTML="Fullscreen"):(this.b.xa(),this.a.children[0].children[0].innerHTML="Non-Fullscreen")};u.cb=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.cb.prototype.g={children:{seekBar:{}}};u.cb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-progress-control vjs-control"})};u.Xb=u.O.extend({i:function(a,c){u.O.call(this,a,c);a.d("timeupdate",u.bind(this,this.Aa));a.M(u.bind(this,this.Aa))}});t=u.Xb.prototype;t.g={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"};t.oc="timeupdate";t.e=function(){return u.O.prototype.e.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})};t.Aa=function(){var a=this.b.Lb?this.b.u.currentTime:this.b.currentTime();this.a.setAttribute("aria-valuenow",u.round(100*this.xb(),2));this.a.setAttribute("aria-valuetext",u.Ka(a,this.b.duration()))};t.xb=function(){var a;"Flash"===this.b.ia&&this.b.seeking()?(a=this.b.u,a=a.nc?a.nc:this.b.currentTime()):a=this.b.currentTime();return a/this.b.duration()};t.Oa=function(a){u.O.prototype.Oa.call(this,a);this.b.Lb=f;this.Ad=!this.b.paused();this.b.pause()};t.Gb=function(a){a=F(this,a)*this.b.duration();a==this.b.duration()&&(a-=0.1);this.b.currentTime(a)};t.Hb=function(a){u.O.prototype.Hb.call(this,a);this.b.Lb=l;this.Ad&&this.b.play()};t.vc=function(){this.b.currentTime(this.b.currentTime()+5)};t.uc=function(){this.b.currentTime(this.b.currentTime()-5)};u.$a=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("progress",u.bind(this,this.update))}});u.$a.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})};u.$a.prototype.update=function(){this.a.style&&(this.a.style.width=u.round(100*this.b.Ia(),2)+"%")};u.Vb=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.Vb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})};u.fb=u.ea.extend();u.fb.prototype.defaultValue="00:00";u.fb.prototype.e=function(){return u.ea.prototype.e.call(this,"div",{className:"vjs-seek-handle"})};u.hb=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.h&&(a.h.l&&a.h.l.volumeControl===l)&&this.m("vjs-hidden");a.d("loadstart",u.bind(this,function(){a.h.l&&a.h.l.volumeControl===l?this.m("vjs-hidden"):this.t("vjs-hidden")}))}});u.hb.prototype.g={children:{volumeBar:{}}};u.hb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-volume-control vjs-control"})};u.gb=u.O.extend({i:function(a,c){u.O.call(this,a,c);a.d("volumechange",u.bind(this,this.Aa));a.M(u.bind(this,this.Aa));setTimeout(u.bind(this,this.update),0)}});t=u.gb.prototype;t.Aa=function(){this.a.setAttribute("aria-valuenow",u.round(100*this.b.volume(),2));this.a.setAttribute("aria-valuetext",u.round(100*this.b.volume(),2)+"%")};t.g={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"};t.oc="volumechange";t.e=function(){return u.O.prototype.e.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})};t.Gb=function(a){this.b.volume(F(this,a))};t.xb=function(){return this.b.muted()?0:this.b.volume()};t.vc=function(){this.b.volume(this.b.volume()+0.1)};t.uc=function(){this.b.volume(this.b.volume()-0.1)};u.ac=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.ac.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};u.ib=u.ea.extend();u.ib.prototype.defaultValue="00:00";u.ib.prototype.e=function(){return u.ea.prototype.e.call(this,"div",{className:"vjs-volume-handle"})};u.da=u.q.extend({i:function(a,c){u.q.call(this,a,c);a.d("volumechange",u.bind(this,this.update));a.h&&(a.h.l&&a.h.l.volumeControl===l)&&this.m("vjs-hidden");a.d("loadstart",u.bind(this,function(){a.h.l&&a.h.l.volumeControl===l?this.m("vjs-hidden"):this.t("vjs-hidden")}))}});u.da.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};u.da.prototype.p=function(){this.b.muted(this.b.muted()?l:f)};u.da.prototype.update=function(){var a=this.b.volume(),c=3;0===a||this.b.muted()?c=0:0.33>a?c=1:0.67>a&&(c=2);this.b.muted()?"Unmute"!=this.a.children[0].children[0].innerHTML&&(this.a.children[0].children[0].innerHTML="Unmute"):"Mute"!=this.a.children[0].children[0].innerHTML&&(this.a.children[0].children[0].innerHTML="Mute");for(a=0;4>a;a++){u.t(this.a,"vjs-vol-"+a)}u.m(this.a,"vjs-vol-"+c)};u.na=u.R.extend({i:function(a,c){u.R.call(this,a,c);a.d("volumechange",u.bind(this,this.update));a.h&&(a.h.l&&a.h.l.zc===l)&&this.m("vjs-hidden");a.d("loadstart",u.bind(this,function(){a.h.l&&a.h.l.zc===l?this.m("vjs-hidden"):this.t("vjs-hidden")}));this.m("vjs-menu-button")}});u.na.prototype.Ja=function(){var a=new u.la(this.b,{Rc:"div"}),c=new u.gb(this.b,u.k.B({zd:f},this.g.Sd));a.Z(c);return a};u.na.prototype.p=function(){u.da.prototype.p.call(this);u.R.prototype.p.call(this)};u.na.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};u.na.prototype.update=u.da.prototype.update;u.bb=u.q.extend({i:function(a,c){u.q.call(this,a,c);(!a.poster()||!a.controls())&&this.C();a.d("play",u.bind(this,this.C))}});u.bb.prototype.e=function(){var a=u.e("div",{className:"vjs-poster",tabIndex:-1}),c=this.b.poster();c&&("backgroundSize" in a.style?a.style.backgroundImage='url("'+c+'")':a.appendChild(u.e("img",{src:c})));return a};u.bb.prototype.p=function(){this.L().controls()&&this.b.play()};u.Ub=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("canplay",u.bind(this,this.C));a.d("canplaythrough",u.bind(this,this.C));a.d("playing",u.bind(this,this.C));a.d("seeked",u.bind(this,this.C));a.d("seeking",u.bind(this,this.show));a.d("seeked",u.bind(this,this.C));a.d("error",u.bind(this,this.show));a.d("waiting",u.bind(this,this.show))}});u.Ub.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-loading-spinner"})};u.Va=u.q.extend();u.Va.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-big-play-button",innerHTML:"<span></span>","aria-label":"play video"})};u.Va.prototype.p=function(){this.b.play()};u.r=u.c.extend({i:function(a,c,d){u.c.call(this,a,c,d);var e,g;g=this;e=this.L();a=function(){if(e.controls()&&!e.Pb()){var a,c;g.d("mousedown",g.p);g.d("touchstart",function(a){a.preventDefault();a.stopPropagation();c=I(this.b)});a=function(a){a.stopPropagation();c&&this.b.rc()};g.d("touchmove",a);g.d("touchleave",a);g.d("touchcancel",a);g.d("touchend",a);var d,n,s;d=0;g.d("touchstart",function(){d=(new Date).getTime();s=f});a=function(){s=l};g.d("touchmove",a);g.d("touchleave",a);g.d("touchcancel",a);g.d("touchend",function(){s===f&&(n=(new Date).getTime()-d,250>n&&this.j("tap"))});g.d("tap",g.jd)}};c=u.bind(g,g.md);this.M(a);e.d("controlsenabled",a);e.d("controlsdisabled",c)}});u.r.prototype.md=function(){this.n("tap");this.n("touchstart");this.n("touchmove");this.n("touchleave");this.n("touchcancel");this.n("touchend");this.n("click");this.n("mousedown")};u.r.prototype.p=function(a){0===a.button&&this.L().controls()&&(this.L().paused()?this.L().play():this.L().pause())};u.r.prototype.jd=function(){I(this.L(),!I(this.L()))};u.r.prototype.l={volumeControl:f,fullscreenResize:l,progressEvents:l,timeupdateEvents:l};u.media={};u.media.Ua="play pause paused currentTime setCurrentTime duration buffered volume setVolume muted setMuted width height supportsFullScreen enterFullScreen src load currentSrc preload setPreload autoplay setAutoplay loop setLoop error networkState readyState seeking initialTime startOffsetTime played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks defaultPlaybackRate playbackRate mediaGroup controller controls defaultMuted".split(" ");function ea(){var a=u.media.Ua[i];return function(){throw Error('The "'+a+"\" method is not available on the playback technology's API")}}for(var i=u.media.Ua.length-1;0<=i;i--){u.r.prototype[u.media.Ua[i]]=ea()}u.o=u.r.extend({i:function(a,c,d){this.l.volumeControl=u.o.Qc();this.l.movingMediaElementInDOM=!u.Fc;this.l.fullscreenResize=f;u.r.call(this,a,c,d);(c=c.source)&&this.a.currentSrc==c.src?a.j("loadstart"):c&&(this.a.src=c.src);if(u.Mc&&a.options().nativeControlsForTouch!==l){var e,g,h,k;e=this;g=this.L();c=g.controls();e.a.controls=!!c;h=function(){e.a.controls=f};k=function(){e.a.controls=l};g.d("controlsenabled",h);g.d("controlsdisabled",k);c=function(){g.n("controlsenabled",h);g.n("controlsdisabled",k)};e.d("dispose",c);g.d("usingcustomcontrols",c);g.Pb(f)}a.M(function(){this.F&&(this.g.autoplay&&this.paused())&&(delete this.F.poster,this.play())});for(a=u.o.Za.length-1;0<=a;a--){u.d(this.a,u.o.Za[a],u.bind(this.b,this.Wc))}this.Ta()}});t=u.o.prototype;t.D=function(){u.r.prototype.D.call(this)};t.e=function(){var a=this.b,c=a.F;if(!c||this.l.movingMediaElementInDOM===l){c?(c.player=j,a.F=j,a.v().removeChild(c),c=c.cloneNode(l)):c=u.e("video",{id:a.id()+"_html5_api",className:"vjs-tech"}),c.player=a,u.yb(c,a.v())}for(var d=["autoplay","preload","loop","muted"],e=d.length-1;0<=e;e--){var g=d[e];a.g[g]!==j&&(c[g]=a.g[g])}return c};t.Wc=function(a){this.j(a);a.stopPropagation()};t.play=function(){this.a.play()};t.pause=function(){this.a.pause()};t.paused=function(){return this.a.paused};t.currentTime=function(){return this.a.currentTime};t.pd=function(a){try{this.a.currentTime=a}catch(c){u.log(c,"Video is not ready. (Video.js)")}};t.duration=function(){return this.a.duration||0};t.buffered=function(){return this.a.buffered};t.volume=function(){return this.a.volume};t.ud=function(a){this.a.volume=a};t.muted=function(){return this.a.muted};t.sd=function(a){this.a.muted=a};t.width=function(){return this.a.offsetWidth};t.height=function(){return this.a.offsetHeight};t.Sa=function(){return"function"==typeof this.a.webkitEnterFullScreen&&(/Android/.test(u.G)||!/Chrome|Mac OS X 10.5/.test(u.G))?f:l};t.src=function(a){this.a.src=a};t.load=function(){this.a.load()};t.currentSrc=function(){return this.a.currentSrc};t.Pa=function(){return this.a.Pa};t.td=function(a){this.a.Pa=a};t.autoplay=function(){return this.a.autoplay};t.od=function(a){this.a.autoplay=a};t.controls=function(){return this.a.controls};t.loop=function(){return this.a.loop};t.rd=function(a){this.a.loop=a};t.error=function(){return this.a.error};t.seeking=function(){return this.a.seeking};u.o.isSupported=function(){return !!u.ma.canPlayType};u.o.lb=function(a){try{return !!u.ma.canPlayType(a.type)}catch(c){return""}};u.o.Qc=function(){var a=u.ma.volume;u.ma.volume=a/2+0.1;return a!==u.ma.volume};u.o.Za="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ");u.Jc&&(document.createElement("video").constructor.prototype.canPlayType=function(a){return a&&-1!=a.toLowerCase().indexOf("video/mp4")?"maybe":""});u.f=u.r.extend({i:function(a,c,d){u.r.call(this,a,c,d);var e=c.source;d=c.parentEl;var g=this.a=u.e("div",{id:a.id()+"_temp_flash"}),h=a.id()+"_flash_api";a=a.g;var k=u.k.B({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:a.autoplay,preload:a.Pa,loop:a.loop,muted:a.muted},c.flashVars),r=u.k.B({wmode:"opaque",bgcolor:"#000000"},c.params),n=u.k.B({id:h,name:h,"class":"vjs-tech"},c.attributes);e&&(e.type&&u.f.ad(e.type)?(a=u.f.wc(e.src),k.rtmpConnection=encodeURIComponent(a.qb),k.rtmpStream=encodeURIComponent(a.Mb)):k.src=encodeURIComponent(u.ic(e.src)));u.yb(g,d);c.startTime&&this.M(function(){this.load();this.play();this.currentTime(c.startTime)});if(c.iFrameMode===f&&!u.Ec){var s=u.e("iframe",{id:h+"_iframe",name:h+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});k.readyFunction="ready";k.eventProxyFunction="events";k.errorEventProxyFunction="errors";u.d(s,"load",u.bind(this,function(){var a,d=s.contentWindow;a=s.contentDocument?s.contentDocument:s.contentWindow.document;a.write(u.f.jc(c.swf,k,r,n));d.player=this.b;d.ready=u.bind(this.b,function(c){var d=this.h;d.a=a.getElementById(c);u.f.ob(d)});d.events=u.bind(this.b,function(a,c){this&&"flash"===this.ia&&this.j(c)});d.errors=u.bind(this.b,function(a,c){u.log("Flash Error",c)})}));g.parentNode.replaceChild(s,g)}else{u.f.Vc(c.swf,g,k,r,n)}}});t=u.f.prototype;t.D=function(){u.r.prototype.D.call(this)};t.play=function(){this.a.vjs_play()};t.pause=function(){this.a.vjs_pause()};t.src=function(a){u.f.$c(a)?(a=u.f.wc(a),this.Nd(a.qb),this.Od(a.Mb)):(a=u.ic(a),this.a.vjs_src(a));if(this.b.autoplay()){var c=this;setTimeout(function(){c.play()},0)}};t.currentSrc=function(){var a=this.a.vjs_getProperty("currentSrc");if(a==j){var c=this.Ld(),d=this.Md();c&&d&&(a=u.f.vd(c,d))}return a};t.load=function(){this.a.vjs_load()};t.poster=function(){this.a.vjs_getProperty("poster")};t.buffered=function(){return u.sb(0,this.a.vjs_getProperty("buffered"))};t.Sa=q(l);var R=u.f.prototype,S="rtmpConnection rtmpStream preload currentTime defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" "),T="error currentSrc networkState readyState seeking initialTime duration startOffsetTime paused played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks".split(" ");function fa(){var a=S[U],c=a.charAt(0).toUpperCase()+a.slice(1);R["set"+c]=function(c){return this.a.vjs_setProperty(a,c)}}function V(a){R[a]=function(){return this.a.vjs_getProperty(a)}}var U;for(U=0;U<S.length;U++){V(S[U]),fa()}for(U=0;U<T.length;U++){V(T[U])}u.f.isSupported=function(){return 10<=u.f.version()[0]};u.f.lb=function(a){if(a.type in u.f.Yc||a.type in u.f.xc){return"maybe"}};u.f.Yc={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};u.f.xc={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};u.f.onReady=function(a){a=u.v(a);var c=a.player||a.parentNode.player,d=c.h;a.player=c;d.a=a;u.f.ob(d)};u.f.ob=function(a){a.v().vjs_getProperty?a.Ta():setTimeout(function(){u.f.ob(a)},50)};u.f.onEvent=function(a,c){u.v(a).player.j(c)};u.f.onError=function(a,c){u.v(a).player.j("error");u.log("Flash Error",c,a)};u.f.version=function(){var a="0,0,0";try{a=(new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(c){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(d){}}return a.split(",")};u.f.Vc=function(a,c,d,e,g){a=u.f.jc(a,d,e,g);a=u.e("div",{innerHTML:a}).childNodes[0];d=c.parentNode;c.parentNode.replaceChild(a,c);var h=d.childNodes[0];setTimeout(function(){h.style.display="block"},1000)};u.f.jc=function(a,c,d,e){var g="",h="",k="";c&&u.k.ta(c,function(a,c){g+=a+"="+c+"&amp;"});d=u.k.B({movie:a,flashvars:g,allowScriptAccess:"always",allowNetworking:"all"},d);u.k.ta(d,function(a,c){h+='<param name="'+a+'" value="'+c+'" />'});e=u.k.B({data:a,width:"100%",height:"100%"},e);u.k.ta(e,function(a,c){k+=a+'="'+c+'" '});return'<object type="application/x-shockwave-flash"'+k+">"+h+"</object>"};u.f.vd=function(a,c){return a+"&"+c};u.f.wc=function(a){var c={qb:"",Mb:""};if(!a){return c}var d=a.indexOf("&"),e;-1!==d?e=d+1:(d=e=a.lastIndexOf("/")+1,0===d&&(d=e=a.length));c.qb=a.substring(0,d);c.Mb=a.substring(e,a.length);return c};u.f.ad=function(a){return a in u.f.xc};u.f.Lc=/^rtmp[set]?:\/\//i;u.f.$c=function(a){return u.f.Lc.test(a)};u.Kc=u.c.extend({i:function(a,c,d){u.c.call(this,a,c,d);if(!a.g.sources||0===a.g.sources.length){c=0;for(d=a.g.techOrder;c<d.length;c++){var e=u.$(d[c]),g=window.videojs[e];if(g&&g.isSupported()){J(a,e);break}}}else{a.src(a.g.sources)}}});function W(a){a.za=a.za||[];return a.za}function X(a,c,d){for(var e=a.za,g=0,h=e.length,k,r;g<h;g++){k=e[g],k.id()===c?(k.show(),r=k):d&&(k.K()==d&&0<k.mode())&&k.disable()}(c=r?r.K():d?d:l)&&a.j(c+"trackchange")}u.X=u.c.extend({i:function(a,c){u.c.call(this,a,c);this.Q=c.id||"vjs_"+c.kind+"_"+c.language+"_"+u.s++;this.tc=c.src;this.Sc=c["default"]||c.dflt;this.xd=c.title;this.Id=c.srclang;this.bd=c.label;this.fa=[];this.bc=[];this.ga=this.ha=0;this.b.d("fullscreenchange",u.bind(this,this.Nc))}});t=u.X.prototype;t.K=p("A");t.src=p("tc");t.tb=p("Sc");t.title=p("xd");t.label=p("bd");t.readyState=p("ha");t.mode=p("ga");t.Nc=function(){this.a.style.fontSize=this.b.I?140*(screen.width/this.b.width())+"%":""};t.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-"+this.A+" vjs-text-track"})};t.show=function(){Y(this);this.ga=2;u.c.prototype.show.call(this)};t.C=function(){Y(this);this.ga=1;u.c.prototype.C.call(this)};t.disable=function(){2==this.ga&&this.C();this.b.n("timeupdate",u.bind(this,this.update,this.Q));this.b.n("ended",u.bind(this,this.reset,this.Q));this.reset();this.b.V.textTrackDisplay.removeChild(this);this.ga=0};function Y(a){0===a.ha&&a.load();0===a.ga&&(a.b.d("timeupdate",u.bind(a,a.update,a.Q)),a.b.d("ended",u.bind(a,a.reset,a.Q)),("captions"===a.A||"subtitles"===a.A)&&a.b.V.textTrackDisplay.Z(a))}t.load=function(){0===this.ha&&(this.ha=1,u.get(this.tc,u.bind(this,this.kd),u.bind(this,this.Fb)))};t.Fb=function(a){this.error=a;this.ha=3;this.j("error")};t.kd=function(a){var c,d;a=a.split("\n");for(var e="",g=1,h=a.length;g<h;g++){if(e=u.trim(a[g])){-1==e.indexOf("--\x3e")?(c=e,e=u.trim(a[++g])):c=this.fa.length;c={id:c,index:this.fa.length};d=e.split(" --\x3e ");c.startTime=ga(d[0]);c.ua=ga(d[1]);for(d=[];a[++g]&&(e=u.trim(a[g]));){d.push(e)}c.text=d.join("<br/>");this.fa.push(c)}}this.ha=2;this.j("loaded")};function ga(a){var c=a.split(":");a=0;var d,e,g;3==c.length?(d=c[0],e=c[1],c=c[2]):(d=0,e=c[0],c=c[1]);c=c.split(/\s+/);c=c.splice(0,1)[0];c=c.split(/\.|,/);g=parseFloat(c[1]);c=c[0];a+=3600*parseFloat(d);a+=60*parseFloat(e);a+=parseFloat(c);g&&(a+=g/1000);return a}t.update=function(){if(0<this.fa.length){var a=this.b.currentTime();if(this.Kb===b||a<this.Kb||this.La<=a){var c=this.fa,d=this.b.duration(),e=0,g=l,h=[],k,r,n,s;a>=this.La||this.La===b?s=this.vb!==b?this.vb:0:(g=f,s=this.Cb!==b?this.Cb:c.length-1);for(;;){n=c[s];if(n.ua<=a){e=Math.max(e,n.ua),n.Ha&&(n.Ha=l)}else{if(a<n.startTime){if(d=Math.min(d,n.startTime),n.Ha&&(n.Ha=l),!g){break}}else{g?(h.splice(0,0,n),r===b&&(r=s),k=s):(h.push(n),k===b&&(k=s),r=s),d=Math.min(d,n.ua),e=Math.max(e,n.startTime),n.Ha=f}}if(g){if(0===s){break}else{s--}}else{if(s===c.length-1){break}else{s++}}}this.bc=h;this.La=d;this.Kb=e;this.vb=k;this.Cb=r;a=this.bc;c="";d=0;for(e=a.length;d<e;d++){c+='<span class="vjs-tt-cue">'+a[d].text+"</span>"}this.a.innerHTML=c;this.j("cuechange")}}};t.reset=function(){this.La=0;this.Kb=this.b.duration();this.Cb=this.vb=0};u.Sb=u.X.extend();u.Sb.prototype.A="captions";u.Yb=u.X.extend();u.Yb.prototype.A="subtitles";u.Tb=u.X.extend();u.Tb.prototype.A="chapters";u.Zb=u.c.extend({i:function(a,c,d){u.c.call(this,a,c,d);if(a.g.tracks&&0<a.g.tracks.length){c=this.b;a=a.g.tracks;var e;for(d=0;d<a.length;d++){e=a[d];var g=c,h=e.kind,k=e.label,r=e.language,n=e;e=g.za=g.za||[];n=n||{};n.kind=h;n.label=k;n.language=r;h=u.$(h||"subtitles");g=new window.videojs[h+"Track"](g,n);e.push(g)}}}});u.Zb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-text-track-display"})};u.Y=u.N.extend({i:function(a,c){var d=this.ca=c.track;c.label=d.label();c.selected=d.tb();u.N.call(this,a,c);this.b.d(d.K()+"trackchange",u.bind(this,this.update))}});u.Y.prototype.p=function(){u.N.prototype.p.call(this);X(this.b,this.ca.Q,this.ca.K())};u.Y.prototype.update=function(){this.selected(2==this.ca.mode())};u.ab=u.Y.extend({i:function(a,c){c.track={K:function(){return c.kind},L:a,label:function(){return c.kind+" off"},tb:q(l),mode:q(l)};u.Y.call(this,a,c);this.selected(f)}});u.ab.prototype.p=function(){u.Y.prototype.p.call(this);X(this.b,this.ca.Q,this.ca.K())};u.ab.prototype.update=function(){for(var a=W(this.b),c=0,d=a.length,e,g=f;c<d;c++){e=a[c],e.K()==this.ca.K()&&2==e.mode()&&(g=l)}this.selected(g)};u.S=u.R.extend({i:function(a,c){u.R.call(this,a,c);1>=this.J.length&&this.C()}});u.S.prototype.sa=function(){var a=[],c;a.push(new u.ab(this.b,{kind:this.A}));for(var d=0;d<W(this.b).length;d++){c=W(this.b)[d],c.K()===this.A&&a.push(new u.Y(this.b,{track:c}))}return a};u.Ca=u.S.extend({i:function(a,c,d){u.S.call(this,a,c,d);this.a.setAttribute("aria-label","Captions Menu")}});u.Ca.prototype.A="captions";u.Ca.prototype.pa="Captions";u.Ca.prototype.className="vjs-captions-button";u.Ga=u.S.extend({i:function(a,c,d){u.S.call(this,a,c,d);this.a.setAttribute("aria-label","Subtitles Menu")}});u.Ga.prototype.A="subtitles";u.Ga.prototype.pa="Subtitles";u.Ga.prototype.className="vjs-subtitles-button";u.Da=u.S.extend({i:function(a,c,d){u.S.call(this,a,c,d);this.a.setAttribute("aria-label","Chapters Menu")}});t=u.Da.prototype;t.A="chapters";t.pa="Chapters";t.className="vjs-chapters-button";t.sa=function(){for(var a=[],c,d=0;d<W(this.b).length;d++){c=W(this.b)[d],c.K()===this.A&&a.push(new u.Y(this.b,{track:c}))}return a};t.Ja=function(){for(var a=W(this.b),c=0,d=a.length,e,g,h=this.J=[];c<d;c++){if(e=a[c],e.K()==this.A&&e.tb()){if(2>e.readyState()){this.Fd=e;e.d("loaded",u.bind(this,this.Ja));return}g=e;break}}a=this.va=new u.la(this.b);a.a.appendChild(u.e("li",{className:"vjs-menu-title",innerHTML:u.$(this.A),wd:-1}));if(g){e=g.fa;for(var k,c=0,d=e.length;c<d;c++){k=e[c],k=new u.Wa(this.b,{track:g,cue:k}),h.push(k),a.Z(k)}}0<this.J.length&&this.show();return a};u.Wa=u.N.extend({i:function(a,c){var d=this.ca=c.track,e=this.cue=c.cue,g=a.currentTime();c.label=e.text;c.selected=e.startTime<=g&&g<e.ua;u.N.call(this,a,c);d.d("cuechange",u.bind(this,this.update))}});u.Wa.prototype.p=function(){u.N.prototype.p.call(this);this.b.currentTime(this.cue.startTime);this.update(this.cue.startTime)};u.Wa.prototype.update=function(){var a=this.cue,c=this.b.currentTime();this.selected(a.startTime<=c&&c<a.ua)};u.k.B(u.Ea.prototype.g.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}});if("undefined"!==typeof window.JSON&&"function"===window.JSON.parse){u.JSON=window.JSON}else{u.JSON={};var Z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;u.JSON.parse=function(a,c){function d(a,e){var k,r,n=a[e];if(n&&"object"===typeof n){for(k in n){Object.prototype.hasOwnProperty.call(n,k)&&(r=d(n,k),r!==b?n[k]=r:delete n[k])}}return c.call(a,e,n)}var e;a=String(a);Z.lastIndex=0;Z.test(a)&&(a=a.replace(Z,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return e=eval("("+a+")"),"function"===typeof c?d({"":e},""):e}throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}u.cc=function(){var a,c,d=document.getElementsByTagName("video");if(d&&0<d.length){for(var e=0,g=d.length;e<g;e++){if((c=d[e])&&c.getAttribute){c.player===b&&(a=c.getAttribute("data-setup"),a!==j&&(a=u.JSON.parse(a||"{}"),v(c,a)))}else{u.jb();break}}}else{u.Ac||u.jb()}};u.jb=function(){setTimeout(u.cc,1)};"complete"===document.readyState?u.Ac=f:u.U(window,"load",function(){u.Ac=f});u.jb();u.ld=function(a,c){u.w.prototype[a]=c};var ha=this;ha.Bd=f;function $(a,c){var d=a.split("."),e=ha;!(d[0] in e)&&e.execScript&&e.execScript("var "+d[0]);for(var g;d.length&&(g=d.shift());){!d.length&&c!==b?e[g]=c:e=e[g]?e[g]:e[g]={}}}$("videojs",u);$("_V_",u);$("videojs.options",u.options);$("videojs.players",u.wa);$("videojs.cache",u.qa);$("videojs.Component",u.c);u.c.prototype.player=u.c.prototype.L;u.c.prototype.dispose=u.c.prototype.D;u.c.prototype.createEl=u.c.prototype.e;u.c.prototype.el=u.c.prototype.v;u.c.prototype.addChild=u.c.prototype.Z;u.c.prototype.children=u.c.prototype.children;u.c.prototype.on=u.c.prototype.d;u.c.prototype.off=u.c.prototype.n;u.c.prototype.one=u.c.prototype.U;u.c.prototype.trigger=u.c.prototype.j;u.c.prototype.triggerReady=u.c.prototype.Ta;u.c.prototype.show=u.c.prototype.show;u.c.prototype.hide=u.c.prototype.C;u.c.prototype.width=u.c.prototype.width;u.c.prototype.height=u.c.prototype.height;u.c.prototype.dimensions=u.c.prototype.Tc;u.c.prototype.ready=u.c.prototype.M;u.c.prototype.addClass=u.c.prototype.m;u.c.prototype.removeClass=u.c.prototype.t;$("videojs.Player",u.w);u.w.prototype.dispose=u.w.prototype.D;u.w.prototype.requestFullScreen=u.w.prototype.xa;u.w.prototype.cancelFullScreen=u.w.prototype.nb;u.w.prototype.bufferedPercent=u.w.prototype.Ia;u.w.prototype.usingNativeControls=u.w.prototype.Pb;$("videojs.MediaLoader",u.Kc);$("videojs.TextTrackDisplay",u.Zb);$("videojs.ControlBar",u.Ea);$("videojs.Button",u.q);$("videojs.PlayToggle",u.Wb);$("videojs.FullscreenToggle",u.Fa);$("videojs.BigPlayButton",u.Va);$("videojs.LoadingSpinner",u.Ub);$("videojs.CurrentTimeDisplay",u.Xa);$("videojs.DurationDisplay",u.Ya);$("videojs.TimeDivider",u.$b);$("videojs.RemainingTimeDisplay",u.eb);$("videojs.Slider",u.O);$("videojs.ProgressControl",u.cb);$("videojs.SeekBar",u.Xb);$("videojs.LoadProgressBar",u.$a);$("videojs.PlayProgressBar",u.Vb);$("videojs.SeekHandle",u.fb);$("videojs.VolumeControl",u.hb);$("videojs.VolumeBar",u.gb);$("videojs.VolumeLevel",u.ac);$("videojs.VolumeMenuButton",u.na);$("videojs.VolumeHandle",u.ib);$("videojs.MuteToggle",u.da);$("videojs.PosterImage",u.bb);$("videojs.Menu",u.la);$("videojs.MenuItem",u.N);$("videojs.MenuButton",u.R);u.R.prototype.createItems=u.R.prototype.sa;u.S.prototype.createItems=u.S.prototype.sa;u.Da.prototype.createItems=u.Da.prototype.sa;$("videojs.SubtitlesButton",u.Ga);$("videojs.CaptionsButton",u.Ca);$("videojs.ChaptersButton",u.Da);$("videojs.MediaTechController",u.r);u.r.prototype.features=u.r.prototype.l;u.r.prototype.l.volumeControl=u.r.prototype.l.zc;u.r.prototype.l.fullscreenResize=u.r.prototype.l.Gd;u.r.prototype.l.progressEvents=u.r.prototype.l.Kd;u.r.prototype.l.timeupdateEvents=u.r.prototype.l.Pd;$("videojs.Html5",u.o);u.o.Events=u.o.Za;u.o.isSupported=u.o.isSupported;u.o.canPlaySource=u.o.lb;u.o.prototype.setCurrentTime=u.o.prototype.pd;u.o.prototype.setVolume=u.o.prototype.ud;u.o.prototype.setMuted=u.o.prototype.sd;u.o.prototype.setPreload=u.o.prototype.td;u.o.prototype.setAutoplay=u.o.prototype.od;u.o.prototype.setLoop=u.o.prototype.rd;$("videojs.Flash",u.f);u.f.isSupported=u.f.isSupported;u.f.canPlaySource=u.f.lb;u.f.onReady=u.f.onReady;$("videojs.TextTrack",u.X);u.X.prototype.label=u.X.prototype.label;$("videojs.CaptionsTrack",u.Sb);$("videojs.SubtitlesTrack",u.Yb);$("videojs.ChaptersTrack",u.Tb);$("videojs.autoSetup",u.cc);$("videojs.plugin",u.ld);$("videojs.createTimeRange",u.sb)})();SC.EmptyTheme=SC.BaseTheme.create({name:"sc-empty"});SC.Theme.addTheme(SC.EmptyTheme);if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat(["__s39_0","__s39_1","__s39_2","__s39_3","__s39_4","__s39_5","__s39_6","__s39_7","__s39_8","__s39_9","__s39_10","__s39_11","__s40_12","__s40_13","__s40_14","__s40_15","__s40_16","__s40_17","__s40_18","__s40_19","__s40_20","__s40_21","__s40_22","__s40_23","__s40_24","__s40_25","__s40_26","__s40_27","__s40_28","__s40_29","__s40_30","__s40_31","__s40_32","__s40_33","__s40_34","__s40_35","__s40_36","__s40_37","__s40_38","__s40_39","__s40_40","__s40_41","__s40_42","__s40_43","__s40_44","__s40_45","__s40_46","__s40_47","__s41_48","__s41_49","__s41_50","__s41_51","__s41_52","__s41_53","__s41_54","__s41_55","__s41_56","__s41_57","__s41_58","__s41_59","__s41_60","__s41_61","__s41_62","__s41_63","__s41_64","__s41_65","__s41_66","__s41_67","__s41_68","__s41_69","__s41_70","__s41_71","__s42_72","__s42_73","__s42_74","__s42_75","__s42_76","__s42_77","__s42_78","__s42_79","__s42_80","__s42_81","__s42_82","__s42_83","__s44_84","__s44_85","__s44_86","__s44_87","__s44_88","__s44_89","__s44_90","__s44_91","__s44_92","__s44_93","__s44_94","__s44_95","__s44_96","__s44_97","__s44_98","__s44_99","__s44_100","__s44_101","__s44_102","__s44_103","__s44_104","__s44_105","__s44_106","__s44_107","__s44_108","__s44_109","__s44_110","__s44_111","__s44_112","__s44_113","__s44_114","__s44_115","__s44_116","__s44_117","__s44_118","__s44_119","__s45_120","__s45_121","__s45_122","__s45_123","__s45_124","__s45_125","__s45_126","__s45_127","__s45_128","__s45_129","__s45_130","__s45_131","__s45_132","__s45_133","__s45_134","__s45_135","__s45_136","__s45_137","__s45_138","__s45_139","__s45_140","__s45_141","__s45_142","__s45_143","__s49_144","__s49_145","__s49_146","__s49_147","__s49_148","__s49_149","__s50_150","__s50_151","__s50_152","__s50_153","__s50_154","__s50_155","__s51_156","__s51_157","__s51_158","__s51_159","__s51_160","__s51_161","__s55_162","__s56_163","__s56_164","__s56_165","__s56_166","__s61_167","__s61_168","__s61_169","__s61_170","__s61_171","__s61_172","__s61_173","__s61_174","__s61_175","__s61_176","__s61_177","__s61_178","__s61_179","__s61_180","__s62_181","__s62_182","__s62_183","__s62_184","__s62_185","__s62_186","__s62_187","__s62_188","__s62_189","__s63_190","__s63_191","__s63_192","__s63_193","__s63_194","__s63_195","__s63_196","__s63_197","__s63_198","__s63_199","__s63_200","__s63_201","__s63_202","__s64_203","__s64_204","__s64_205","__s64_206","__s64_207","__s64_208","__s64_209","__s64_210","__s64_211","__s64_212","__s64_213","__s64_214","__s64_215","__s64_216","__s64_217","__s64_218","__s64_219","__s64_220","__s64_221","__s64_222","__s64_223","__s64_224","__s64_225","__s64_226","__s64_227","__s64_228","__s64_229","__s64_230","__s64_231","__s64_232","__s64_233","__s64_234","__s64_235","__s64_236","__s64_237","__s64_238","__s64_239","__s64_240","__s64_241","__s64_242","__s64_243","__s65_244","__s65_245","__s65_246","__s65_247","__s65_248","__s65_249","__s66_250","__s66_251","__s66_252","__s66_253","__s66_254","__s66_255","__s67_256","__s67_257","__s67_258","__s67_259","__s67_260","__s67_261","__s67_262","__s67_263","__s67_264","__s69_265","__s69_266","__s69_267","__s69_268","__s69_269","__s69_270","__s69_271","__s69_272","__s69_273","__s71_274","__s71_275","__s71_276","__s71_277","__s71_278","__s71_279","__s71_280","__s71_281","__s71_282","__s71_283","__s71_284","__s71_285","__s71_286","__s71_287","__s71_288","__s71_289","__s71_290","__s71_291","__s71_292","__s71_293","__s72_294","__s72_295","__s72_296","__s72_297","__s72_298","__s72_299","__s72_300","__s72_301","__s72_302","__s72_303","__s72_304","__s72_305","__s72_306","__s72_307","__s72_308","__s72_309","__s72_310","__s72_311","__s72_312","__s72_313","__s72_314","__s72_315","__s72_316","__s72_317","__s72_318","__s72_319","__s72_320","__s72_321","__s72_322","__s72_323","__s72_324","__s72_325","__s72_326","__s72_327","__s72_328","__s72_329","__s72_330","__s72_331","__s72_332","__s72_333","__s72_334","__s72_335","__s72_336","__s72_337","__s72_338","__s72_339","__s72_340","__s72_341","__s72_342","__s72_343","__s72_344","__s72_345","__s72_346","__s72_347","__s72_348","__s72_349","__s73_350","__s73_351","__s73_352","__s73_353","__s73_354","__s73_355","__s73_356","__s73_357","__s73_358","__s73_359","__s73_360","__s73_361","__s73_362","__s73_363","__s73_364","__s73_365","__s73_366","__s73_367","__s73_368","__s73_369","__s73_370","__s73_371","__s73_372","__s73_373","__s73_374","__s73_375","__s73_376","__s73_377","__s73_378","__s73_379","__s73_380","__s73_381","__s73_382","__s73_383","__s73_384","__s73_385","__s73_386","__s73_387","__s73_388","__s73_389","__s73_390","__s73_391","__s73_392","__s73_393","__s73_394","__s73_395","__s73_396","__s73_397","__s73_398","__s73_399","__s73_400","__s73_401","__s73_402","__s73_403","__s73_404","__s73_405","__s74_406","__s74_407","__s74_408","__s74_409","__s74_410","__s74_411","__s74_412","__s74_413","__s74_414","__s74_415","__s74_416","__s74_417","__s74_418","__s74_419","__s74_420","__s74_421","__s74_422","__s74_423","__s74_424","__s74_425","__s76_426","__s76_427","__s76_428","__s76_429","__s76_430","__s77_431","__s77_432","__s78_433","__s78_434","__s78_435","__s78_436","__s78_437","__s82_438"]);SC.AceTheme=SC.BaseTheme.create({name:"ace",description:"A SproutCore built-in theme by Alex Iskander and contributors. Only supports browsers that implement CSS3."});SC.Theme.addTheme(SC.AceTheme);SC.AceTheme.PointLeft=SC.AceTheme.subtheme("point-left","point-left");SC.AceTheme.PointRight=SC.AceTheme.subtheme("point-right","point-right");SC.AceTheme.Capsule=SC.AceTheme.subtheme("capsule","capsule");SC.AceTheme.Dark=SC.AceTheme.subtheme("dark");SC.defaultTheme="ace";sc_require("theme");SC.AceTheme.Dark.PointLeft=SC.AceTheme.Dark.subtheme("point-left","point-left");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("point-right","point-right");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("capsule","capsule");SC.AceTheme.SourceList=SC.AceTheme.subtheme("source-list");sc_require("theme");SC.AceTheme.Popover=SC.AceTheme.Dark.subtheme("popover");SC.AceTheme.addTheme(SC.AceTheme.Popover);SC.AceTheme.SolidPopover=SC.AceTheme.Popover.subtheme("solid");SC.AceTheme.addTheme(SC.AceTheme.SolidPopover.create({name:"solid-popover"}));sc_require("resources/picker/popover/popover");SC.AceTheme.Popover.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(f,b){var a=f.get("preferType");var e=f.get("pointerPos");var c=f.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){b.addClass(e)}},update:function(f,e){var a=f.get("preferType");var c=f.get("pointerPos");var b=f.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){e.addClass(c)}}});SC.AceTheme.Popover.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")});a=a.begin("div").addClass("popover-background");this.includeSlices(b,a,SC.NINE_SLICE);a.push("<div class = 'sc-pointer'></div>");a=a.end()},update:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")})}});window.isProduction=NO;Smartgraphs=SC.Application.create({NAMESPACE:"Smartgraphs",VERSION:"0.1.0",DATA_FORMAT_VERSION:6,rootStore:function(){var a=Smartgraphs.store;while(a.get("parentStore")){a=a.get("parentStore")}return a}.property(),_nextGuid:1000,getNextGuid:function(){return this._nextGuid++},sendActionToGraphControllers:function(e,c,b){var a=[];a.push(Smartgraphs.firstGraphController.sendAction.apply(Smartgraphs.firstGraphController,arguments));a.push(Smartgraphs.secondGraphController.sendAction.apply(Smartgraphs.secondGraphController,arguments));return a},sendActionToTableControllers:function(e,c,b){var a=[];a.push(Smartgraphs.firstTableController.sendAction.apply(Smartgraphs.firstTableController,arguments));a.push(Smartgraphs.secondTableController.sendAction.apply(Smartgraphs.secondTableController,arguments));return a},trace:!window.isProduction,logDataSource:!window.isProduction,showOutline:typeof window.showOutline==="undefined"?(!window.isProduction):window.showOutline,showEditButton:typeof window.showEditButton==="undefined"?(!window.isProduction):window.showEditButton});SC.CONTEXT_MENU_ENABLED=YES;if(!window.isProduction){SC.ExceptionHandler=null}Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/animation-example"]={_id:"animation-example.df6",_rev:"1",data_format_version:6,activity:{title:"Animation Tool Example",url:"/shared/animation-example",owner:"shared",pages:["/shared/animation-example/page/1"],axes:["/shared/animation-example/axes/12s","/shared/animation-example/axes/10m"]},pages:[{name:"Position and Velocity Graphs",url:"/shared/animation-example/page/1",activity:"/shared/animation-example",index:1,introText:"<h1>Labeling Calculated Data</h1>",steps:["/shared/animation-example/page/1/step/1"],firstStep:"/shared/animation-example/page/1/step/1"}],steps:[{url:"/shared/animation-example/page/1/step/1",activityPage:"/shared/animation-example/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/animation-example/axes/12s",yAxis:"/shared/animation-example/axes/10m",data:[["position-data",{"point-type":"none","line-type":"connected"}],["position-data2",{"point-type":"none","line-type":"connected"}]],annotations:[]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/animation-example/axes/12s",yAxis:"/shared/animation-example/axes/2mps",data:["velocity-calculated"],annotations:[],activeDatadefs:["velocity-calculated"]}},beforeText:"<p>Click Start, Reset, and Stop to see the animation in the top graph. Note that you can also label one point bottom graph.</p>",hideSubmitButton:true,tools:[{name:"label",setup:{pane:"bottom",labelName:"test-label"}},{name:"animation",setup:{pane:"top",duration:3000,channelWidth:70,backgroundImage:"road.png",loop:true,animations:[{data:"position-data2",image:"car.png",width:70,height:30,xOffset:0,yOffset:0},{data:"position-data",image:"circle.png",xOffset:-10,yOffset:0}]}}]}],units:[],axes:[{url:"/shared/animation-example/axes/12s",units:"/builtins/units/seconds",min:0,max:12,nSteps:12,label:"Time"},{url:"/shared/animation-example/axes/10m",units:"/builtins/units/meters",min:0,max:10,nSteps:10,label:"Position"},{url:"/shared/animation-example/axes/2mps",units:"/builtins/units/meters-per-second",min:0,max:2,nSteps:10,label:"Velocity"}],responseTemplates:[],tags:[],variables:[],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/animation-example/datadefs/position-data",name:"position-data",activity:"/shared/animation-example",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,0],[0.25,0.025],[0.5,0.05],[0.75,0.075],[1,0.1],[1.25,0.125],[1.5,0.15],[1.75,0.175],[2,0.2],[2.25,0.225],[2.5,0.25],[2.75,0.276],[3,0.303],[3.25,0.34],[3.5,0.404],[3.75,0.515],[4,0.653],[4.25,0.801],[4.5,0.95],[4.75,1.1],[5,1.25],[5.25,1.4],[5.5,1.55],[5.75,1.7],[6,1.85],[6.25,2],[6.5,2.15],[6.75,2.3],[7,2.45],[7.25,2.6],[7.5,2.75],[7.75,2.901],[8,3.057],[8.25,3.23],[8.5,3.459],[8.75,3.78],[9,4.157],[9.25,4.551],[9.5,4.95],[9.75,5.35],[10,5.75],[10.25,6.15],[10.5,6.55],[10.75,6.95],[11,7.35],[11.25,7.75],[11.5,8.15],[11.75,8.55],[12,8.95]]},{url:"/shared/animation-example/datadefs/position-data2",name:"position-data2",activity:"/shared/animation-example",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,5],[0.25,5.025],[0.5,5.05],[0.75,5.075],[1,5.1],[1.25,5.125],[1.5,5.15],[1.75,5.175],[2,5.2],[2.25,5.225],[2.5,5.25],[2.75,5.276],[3,5.303],[3.25,5.34],[3.5,5.404],[3.75,5.515],[4,5.653],[4.25,5.801],[4.5,5.95],[4.75,5.1],[5,5.25],[5.25,5.4],[5.5,5.55],[5.75,5.7],[6,5.85],[6.25,5],[6.5,5.15],[6.75,5.3],[7,5.45],[7.25,5.6],[7.5,5.75],[7.75,5.901],[8,5.057],[8.25,5.23],[8.5,5.459],[8.75,3.78],[9,4.157],[9.25,5.551],[9.5,5.95],[9.75,5.35],[10,5.75],[10.25,4.15],[10.5,4.55],[10.75,6.95],[11,3.35],[11.25,3.75],[11.5,2.15],[11.75,2.55],[12,1.95]]}]},{type:"FirstOrderDifference",records:[{url:"/shared/animation-example/datadefs/velocity-calculated",name:"velocity-calculated",activity:"/shared/animation-example",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters-per-second",yLabel:"Velocity",yShortLabel:"Velocity",source:"/shared/animation-example/datadefs/position-data"}]}],annotations:[{type:"Label",records:[{url:"/shared/animation-example/annotation/test-label",name:"test-label",activity:"/shared/animation-example",text:"a label"},{url:"/shared/animation-example/annotation/test-label-2",name:"test-label-2",activity:"/shared/animation-example",text:"a second label"}]},{type:"LabelSet",records:[{url:"/shared/animation-example/annotation/test-label-set",name:"test-label-set",activity:"/shared/animation-example"}]}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/describing-velocity-animations"]={_id:"describing-velocity-animations.df6",_rev:1,data_format_version:6,activity:{title:"Describing Velocity Animations",url:"/shared/describing-velocity-animations",owner:"shared",pages:["/shared/describing-velocity-animations/page/1-1-discovery-question","/shared/describing-velocity-animations/page/2-2-label-the-position_time-graph"],axes:["/shared/describing-velocity-animations/axes/1","/shared/describing-velocity-animations/axes/2","/shared/describing-velocity-animations/axes/3","/shared/describing-velocity-animations/axes/4"],authorName:"Richard Klancer"},pages:[{name:"1 Discovery Question",url:"/shared/describing-velocity-animations/page/1-1-discovery-question",activity:"/shared/describing-velocity-animations",index:1,introText:"<h1>Discovery Question</h1>",steps:["/shared/describing-velocity-animations/page/1-1-discovery-question/step/1"],firstStep:"/shared/describing-velocity-animations/page/1-1-discovery-question/step/1",contextVars:[]},{name:"2 Label the Position-Time Graph",url:"/shared/describing-velocity-animations/page/2-2-label-the-position_time-graph",activity:"/shared/describing-velocity-animations",index:2,introText:"<h1>Label the Position-Time Graph</h1>",steps:["/shared/describing-velocity-animations/page/2-2-label-the-position_time-graph/step/1"],firstStep:"/shared/describing-velocity-animations/page/2-2-label-the-position_time-graph/step/1",contextVars:[]}],steps:[{url:"/shared/describing-velocity-animations/page/1-1-discovery-question/step/1",activityPage:"/shared/describing-velocity-animations/page/1-1-discovery-question",beforeText:"<p><strong>How can you describe velocity?</strong></p>\r\n<p>Let’s start by examining the motion of a car traveling from one point to another.</p>\r\n<p><b>Click</b> the Start button to the right to watch the car’s journey. Click the Stop, Reset, and Start buttons to pause and replay the motion multiple times.</p>\r\n<p>In the area below, <strong>describe</strong> the motion of the car. Try to use as many key words from the word bank as possible.</p>\r\n<p><strong>Word bank:</strong> start, position, time, forward, backward, moving, stopping, velocity, constant, steady, changing, slow, fast, end, meters, seconds<p>",paneConfig:"split",panes:{top:{type:"graph",title:"dummy",xAxis:"/shared/describing-velocity-animations/axes/1",yAxis:"/shared/describing-velocity-animations/axes/2",annotations:[],highlightedAnnotations:[],data:["position-data"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["position-data"]}},tools:[{name:"animation",setup:{pane:"top",hideGraph:true,duration:9000,channelWidth:70,staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],backgroundImage:"road-dashed.png",animations:[{data:"position-data",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}]}}],responseTemplate:"/shared/describing-velocity-animations/response-templates/open-1",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/describing-velocity-animations/page/2-2-label-the-position_time-graph/step/1",activityPage:"/shared/describing-velocity-animations/page/2-2-label-the-position_time-graph",beforeText:"<p><b>Start</b> the animation again and <b>observe</b> the resulting position-time graph for the car's motion.</p><p>Using key words from your descriptions, <b>label</b> the motions that occurred during each segment of the position-time graph. You should have three labels, one for each motion.</p>\r\n<p><b>Click</b> or tap where you want a label. <b>Double-click</b> (or double-tap) in the label to add text and click outside the label when you are done. You can also click and drag to rearrange the labels.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity-animations/axes/3",yAxis:"/shared/describing-velocity-animations/axes/4",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:[],highlightedAnnotations:[],data:["position-data"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["position-data"]}},tools:[{name:"animation",setup:{pane:"top",hideGraph:false,duration:9000,channelWidth:70,staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],backgroundImage:"road-dashed.png",animations:[{data:"position-data",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}]}}],isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[{url:"/shared/describing-velocity-animations/response-templates/open-1",templateString:"",fieldChoicesList:[null],initialValues:[""],fieldTypes:["textarea"]}],axes:[{url:"/shared/describing-velocity-animations/axes/1",units:"/shared/describing-velocity-animations/units/seconds",min:0,max:9,nSteps:1,label:"dummy"},{url:"/shared/describing-velocity-animations/axes/2",units:"/shared/describing-velocity-animations/units/meters",min:0,max:40,nSteps:1,label:"dummy"},{url:"/shared/describing-velocity-animations/axes/3",units:"/shared/describing-velocity-animations/units/seconds",min:0,max:9,nSteps:9,label:"Distance"},{url:"/shared/describing-velocity-animations/axes/4",units:"/shared/describing-velocity-animations/units/meters",min:0,max:40,nSteps:8,label:"Position"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/describing-velocity-animations/datadefs/position-data",name:"position-data",activity:"/shared/describing-velocity-animations",xUnits:"/shared/describing-velocity-animations/units/seconds",yUnits:"/shared/describing-velocity-animations/units/meters",points:[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1.25,0],[1.5,0],[1.75,0],[2,0],[2.25,0],[2.5,0],[2.75,0],[3,0],[3.25,0.5],[3.5,1],[3.75,1.5],[4,2],[4.25,2.5],[4.5,3],[4.75,3.5],[5,4],[5.25,4.5],[5.5,5],[5.75,5.5],[6,6],[6.25,8.5],[6.5,11],[6.75,13.5],[7,16],[7.25,18.5],[7.5,21],[7.75,23.5],[8,26],[8.25,28.5],[8.5,31],[8.75,33.5],[9,36]],pointType:"none",lineType:"connected",lineSnapDistance:0.1}]}],tags:[],annotations:[],variables:[],units:[{url:"/shared/describing-velocity-animations/units/Time",activity:"/shared/describing-velocity-animations",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/describing-velocity-animations/units/Distance",activity:"/shared/describing-velocity-animations",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/describing-velocity-animations/units/degrees Celsius",activity:"/shared/describing-velocity-animations",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/describing-velocity-animations/units/minutes",activity:"/shared/describing-velocity-animations",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/describing-velocity-animations/units/meters",activity:"/shared/describing-velocity-animations",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/describing-velocity-animations/units/seconds",activity:"/shared/describing-velocity-animations",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/describing-velocity-animations/units/centimeters",activity:"/shared/describing-velocity-animations",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/describing-velocity-animations/units/grams",activity:"/shared/describing-velocity-animations",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/describing-velocity-animations/units/miles",activity:"/shared/describing-velocity-animations",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/describing-velocity-animations/units/hours",activity:"/shared/describing-velocity-animations",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/describing-velocity-animations/units/Celsius",activity:"/shared/describing-velocity-animations",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/describing-velocity-animations/units/dollars",activity:"/shared/describing-velocity-animations",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/describing-velocity-animations/units/inches",activity:"/shared/describing-velocity-animations",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/describing-velocity-animations/units/years",activity:"/shared/describing-velocity-animations",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/describing-velocity-animations/units/millimeters",activity:"/shared/describing-velocity-animations",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/describing-velocity-animations/units/parts per million",activity:"/shared/describing-velocity-animations",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"},{url:"/shared/describing-velocity-animations/units/meters per second",activity:"/shared/describing-velocity-animations",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/authoring-demo"]={_id:"authoring-demo.df6",_rev:1,data_format_version:6,activity:{title:"Authoring Demo",url:"/shared/authoring-demo",owner:"shared",pages:["/shared/authoring-demo/page/7-7-construct-a-line","/shared/authoring-demo/page/10-10-line-of-best-fit",],axes:["/shared/authoring-demo/axes/1","/shared/authoring-demo/axes/2","/shared/authoring-demo/axes/3","/shared/authoring-demo/axes/4","/shared/authoring-demo/axes/5","/shared/authoring-demo/axes/6","/shared/authoring-demo/axes/7","/shared/authoring-demo/axes/8","/shared/authoring-demo/axes/9","/shared/authoring-demo/axes/10","/shared/authoring-demo/axes/11","/shared/authoring-demo/axes/12","/shared/authoring-demo/axes/13","/shared/authoring-demo/axes/14","/shared/authoring-demo/axes/15","/shared/authoring-demo/axes/16","/shared/authoring-demo/axes/17","/shared/authoring-demo/axes/18","/shared/authoring-demo/axes/19","/shared/authoring-demo/axes/20","/shared/authoring-demo/axes/21","/shared/authoring-demo/axes/22"],authorName:"Andy Zucker"},pages:[{name:"1 Introduction",url:"/shared/authoring-demo/page/1-1-introduction",activity:"/shared/authoring-demo",index:1,introText:'This demo was created in about three-and-one-half hours using the SmartGraphs authoring system, which does not require authors to have programming skills. The demo includes features authors can combine as they choose to create a new activity. <br> </br>\r\n\r\nThe gray column on the left makes it easier for authors to move from page to page, by first clicking the Edit button in the title bar, highlighting a new page or step at the left, and then clicking Run.  Students using the activity will not have access to the Edit button or the gray column. (The student view of this activity has a different URL: <a href="http://smartgraphs-authoring.concord.org/activities/146-authoring-demo/student_preview" TARGET="_Blank">http://smartgraphs-authoring.concord.org/activities/146-authoring-demo/student_preview</a>.)<br> </br>\r\n\r\nTo get rid of the the gray column, drag its right edge all the way to the left, which will make the navigation column invisible. However, you will still see the navigation bar at the bottom of the activity.<br> </br>\r\n\r\nClick the <b> Next </b> button at bottom right to move on.',steps:["/shared/authoring-demo/page/1-1-introduction/step/1"],firstStep:"/shared/authoring-demo/page/1-1-introduction/step/1",contextVars:[]},{name:"2 Prediction graph",url:"/shared/authoring-demo/page/2-2-prediction-graph",activity:"/shared/authoring-demo",index:2,introText:"Water is being heated on a stove. A thermometer placed in the water reads 90 degrees Celsius. After 5 minutes, the water begins to boil and the thermometer reads 100 degrees Celsius. The water continues boiling for five more minutes. <br> <br>\r\n\r\nAt the top right use your mouse to sketch a graph of the temperature for a period of ten minutes, starting when the temperature measured 90 degrees. (Click a point, release, move your mouse, and click another point to connect the two points.) <br> <br>\r\n\r\nWhen you are done with your prediction click the <b> Next </b> button.",steps:["/shared/authoring-demo/page/2-2-prediction-graph/step/1"],firstStep:"/shared/authoring-demo/page/2-2-prediction-graph/step/1",contextVars:[]},{name:"3 How well did you predict?",url:"/shared/authoring-demo/page/3-3-how-well-did-you-predict",activity:"/shared/authoring-demo",index:3,introText:"The graph in red shows your prediction. The blue points represent the measured temperature of the water each minute for ten minutes.",steps:["/shared/authoring-demo/page/3-3-how-well-did-you-predict/step/1"],firstStep:"/shared/authoring-demo/page/3-3-how-well-did-you-predict/step/1",contextVars:[]},{name:"4 Pick-a-point",url:"/shared/authoring-demo/page/4-4-pick_a_point",activity:"/shared/authoring-demo",index:4,introText:"Click on the graph or in the table, at a point <b>one minute or more after the water started to boil</b>. <br> <br>\r\n\r\nWhen you are done click the <b> Check My Answer </b> button.<br> <br>\r\n\r\n(Note: Authors can create as many different hints as they want.)",steps:["/shared/authoring-demo/page/4-4-pick_a_point/step/1","/shared/authoring-demo/page/4-4-pick_a_point/step/2","/shared/authoring-demo/page/4-4-pick_a_point/step/3","/shared/authoring-demo/page/4-4-pick_a_point/step/4"],firstStep:"/shared/authoring-demo/page/4-4-pick_a_point/step/1",contextVars:[]},{name:"5 How long?",url:"/shared/authoring-demo/page/5-5-how-long",activity:"/shared/authoring-demo",index:5,introText:"How long did it take the water to heat from 90 degrees until it began to boil?",steps:["/shared/authoring-demo/page/5-5-how-long/step/1","/shared/authoring-demo/page/5-5-how-long/step/2","/shared/authoring-demo/page/5-5-how-long/step/3","/shared/authoring-demo/page/5-5-how-long/step/4"],firstStep:"/shared/authoring-demo/page/5-5-how-long/step/1",contextVars:[]},{name:"6 Rate of heating (slope)",url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",activity:"/shared/authoring-demo",index:6,introText:"On this graph, slope represents the rate of change in temperature over time.",steps:["/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/1","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/2","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/3","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/4","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/5","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/6","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/7","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/8","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/9","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/10","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/11","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/12","/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/13"],firstStep:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/1",contextVars:[{name:"start-y",value:["coord","y",["listItem",1,["slopeToolOrder","tag-2","tag-3"]]]},{name:"start-y_str",value:["toFixedString",["get","start-y"],2]},{name:"end-y",value:["coord","y",["listItem",2,["slopeToolOrder","tag-2","tag-3"]]]},{name:"end-y_str",value:["toFixedString",["get","end-y"],2]},{name:"change-y",value:["-",["get","end-y"],["get","start-y"]]},{name:"change-y_str",value:["toFixedString",["get","change-y"],2]},{name:"start-x",value:["coord","x",["listItem",1,["slopeToolOrder","tag-2","tag-3"]]]},{name:"start-x_str",value:["toFixedString",["get","start-x"],2]},{name:"end-x",value:["coord","x",["listItem",2,["slopeToolOrder","tag-2","tag-3"]]]},{name:"end-x_str",value:["toFixedString",["get","end-x"],2]},{name:"change-x",value:["-",["get","end-x"],["get","start-x"]]},{name:"change-x_str",value:["toFixedString",["get","change-x"],2]},{name:"slope",value:["/",["get","change-y"],["get","change-x"]]},{name:"slope_str",value:["toFixedString",["get","slope"],2]}]},{name:"7 Construct a line",url:"/shared/authoring-demo/page/7-7-construct-a-line",activity:"/shared/authoring-demo",index:7,introText:"Students can be asked to create a line with a given slope and y-intercept. When they click Check My Answer, the software provides appropriate feedback. ",steps:["/shared/authoring-demo/page/7-7-construct-a-line/step/1","/shared/authoring-demo/page/7-7-construct-a-line/step/2","/shared/authoring-demo/page/7-7-construct-a-line/step/3","/shared/authoring-demo/page/7-7-construct-a-line/step/4","/shared/authoring-demo/page/7-7-construct-a-line/step/5","/shared/authoring-demo/page/7-7-construct-a-line/step/6","/shared/authoring-demo/page/7-7-construct-a-line/step/7","/shared/authoring-demo/page/7-7-construct-a-line/step/8","/shared/authoring-demo/page/7-7-construct-a-line/step/9"],firstStep:"/shared/authoring-demo/page/7-7-construct-a-line/step/1",contextVars:[]},{name:"8 Multiple choice",url:"/shared/authoring-demo/page/8-8-multiple-choice",activity:"/shared/authoring-demo",index:8,introText:"SmartGraphs supports two kinds of multiple choice questions. In this example, incorrect answers result in a series of hints (hint 1, hint 2, etc.), regardless of which wrong answer was selected.<br><br>\r\n\r\n<b>Students have a variety of misconceptions about position-time graphs, including, for example, the graph shown to the right. </b>",steps:["/shared/authoring-demo/page/8-8-multiple-choice/step/1","/shared/authoring-demo/page/8-8-multiple-choice/step/2","/shared/authoring-demo/page/8-8-multiple-choice/step/3","/shared/authoring-demo/page/8-8-multiple-choice/step/4","/shared/authoring-demo/page/8-8-multiple-choice/step/5"],firstStep:"/shared/authoring-demo/page/8-8-multiple-choice/step/1",contextVars:[]},{name:"9 Multiple functions",url:"/shared/authoring-demo/page/9-9-multiple-functions",activity:"/shared/authoring-demo",index:9,introText:"Authors can display graphs showing multiple data sets, including functions. Legends can be used to distinguish one data set from another. Notice that the legend can be moved, in case it obscures an important part of the graph. <br><br>\r\n\r\nQuestions can be posed about a data set or function that is selected by the author, as in the example below.",steps:["/shared/authoring-demo/page/9-9-multiple-functions/step/1","/shared/authoring-demo/page/9-9-multiple-functions/step/2","/shared/authoring-demo/page/9-9-multiple-functions/step/3","/shared/authoring-demo/page/9-9-multiple-functions/step/4"],firstStep:"/shared/authoring-demo/page/9-9-multiple-functions/step/1",contextVars:[]},{name:"10 Line of best fit",url:"/shared/authoring-demo/page/10-10-line-of-best-fit",activity:"/shared/authoring-demo",index:10,introText:"When people are asked to walk faster, it turns out that the length of their step or pace also increases. <br><br>\r\n\r\nSome data are shown on the graph that illustrate this phenomenon. Walking speed is shown on the x-axis, and the length of each step is shown on the y-axis.<br><br>\r\n\r\nClick two points to create a line, and move the points until your line fits the data as well as you can. Try to minimize the number shown in the legend (which is the sum of squares of the deviations of the points from the line). Then click Check My Answer. \r\n\r\n",steps:["/shared/authoring-demo/page/10-10-line-of-best-fit/step/1","/shared/authoring-demo/page/10-10-line-of-best-fit/step/2","/shared/authoring-demo/page/10-10-line-of-best-fit/step/3","/shared/authoring-demo/page/10-10-line-of-best-fit/step/4","/shared/authoring-demo/page/10-10-line-of-best-fit/step/5","/shared/authoring-demo/page/10-10-line-of-best-fit/step/6","/shared/authoring-demo/page/10-10-line-of-best-fit/step/7"],firstStep:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/1",contextVars:[]},{name:"11 Animations and labels",url:"/shared/authoring-demo/page/11-11-animations-and-labels",activity:"/shared/authoring-demo",index:11,introText:"Authors can animate icons that move in synch with a function. The animation can be displayed with a graph pane, as shown here, or without the graph (so students focus only on the moving icon).<br><br> \r\n\r\nNotice that authors can place labels on a graph pane. Activities can also ask that students label points on the graph.<br><br>\r\n\r\nClick the Start button to see the animation.",steps:["/shared/authoring-demo/page/11-11-animations-and-labels/step/1"],firstStep:"/shared/authoring-demo/page/11-11-animations-and-labels/step/1",contextVars:[]},{name:"12 Embedded video and html",url:"/shared/authoring-demo/page/12-12-embedded-video-and-html",activity:"/shared/authoring-demo",index:12,introText:'<p style="font-size:18px;"> <font color=red> Text on the left side of each page is interpreted as HTML, so the usual HTML codes can be used by an author to change font size, color, <b>bold,</b> etc. (Note the larger font size in this paragraph.) Using an iframe (created via html code), authors can insert videos, or other web pages, into a SmartGraphs activity. Below, for example, is a Khan Academy video about understanding and calculating the slope of a line. Author-constructed videos could be inserted instead. Click the video to play it.<br><br>\r\n\r\n<object style="height: 390px; width: 640px"><param name="movie" value="http://www.youtube.com/v/R948Tsyq4vA?version=3&feature=player_embedded"><param name="allowFullScreen" value="true"><param name="allowScriptAccess" value="always"><embed src="http://www.youtube.com/v/R948Tsyq4vA?version=3&feature=player_embedded" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="640" height="360"></object>',steps:["/shared/authoring-demo/page/12-12-embedded-video-and-html/step/1"],firstStep:"/shared/authoring-demo/page/12-12-embedded-video-and-html/step/1",contextVars:[]},{name:"13 Motion sensor graph",url:"/shared/authoring-demo/page/13-13-motion-sensor-graph",activity:"/shared/authoring-demo",index:13,introText:'And now for something completely different! If your school has a Vernier GoMotion! sensor, you can plug it in to a USB port, click the <b> Start </b> button, and obtain a graph of the position versus time of an object moving in one dimension toward and away from the sensor. <br><br>\r\n\r\nIf you don\'t have a sensor, after you Allow a Java applet to download (which is used to "talk to" the sensor), you can click Next to move to the next page.',steps:["/shared/authoring-demo/page/13-13-motion-sensor-graph/step/1"],firstStep:"/shared/authoring-demo/page/13-13-motion-sensor-graph/step/1",contextVars:[]},{name:"14 Available features",url:"/shared/authoring-demo/page/14-14-available-features",activity:"/shared/authoring-demo",index:14,introText:"<b> Congratulations. </b> You have seen and used the following features available to use in a SmartGraphs activity: <br> </br>\r\n\r\n- An image pane (p. 1)<br>\r\n- A prediction graph (p. 2)<br> \r\n- An open-ended (i.e. constructed response) question (p. 3)<br> \r\n- Recall and display of a prediction graph (p. 3)<br> \r\n- Pick-a-point question (p. 4) <br> \r\n- Table linked to a graph (p. 4 and others)<br> \r\n- Visual highlights of various kinds (p. 4 and others)<br> \r\n- Numeric response question (p. 5)<br> \r\n- Sequential hints and scaffolds to help students calculate slope (p. 6)<br>\r\n- A line construction sequence (students construct a line with given slope and y-intercept) (p. 7) <br>\r\n- A multiple-choice question with sequential hints (p. 8) <br>\r\n- Interaction with the graph of a function (p. 9)<br>\r\n- Estimating a line of best fit (p. 10)<br>\r\n- An animation (p. 11)<br>\r\n- Text labels on a graph (p. 11)<br>\r\n- Video embedded in an iframe (p. 12)<br>\r\n- Graph generated by a motion sensor (p. 13)<br><br>\r\n\r\nOther features will be available soon. Go to the next page to see a list.\r\n\r\n\r\n\r\n\r\n ",steps:["/shared/authoring-demo/page/14-14-available-features/step/1"],firstStep:"/shared/authoring-demo/page/14-14-available-features/step/1",contextVars:[]},{name:"15 Coming attractions",url:"/shared/authoring-demo/page/15-15-coming-attractions",activity:"/shared/authoring-demo",index:15,introText:'SmartGraphs includes another feature already used in some of our activities but for which authoring is still being developed: <br>\r\n- Velocity graphs derived from position-time graphs <br><br>\r\n\r\nWe are also developing new features and the capability to author them. <br><br>\r\n\r\nPlease check back from time to time to see what is new in SmartGraphs (<a href="http://smartgraphs.org" TARGET="_Blank">http://smartgraphs.org</a>). Remember that the activities are free of charge. <br><br>\r\n\r\nInstructions on how to use the Authoring system can be found here:  \r\n<a href="https://docs.google.com/document/d/1-T8AOLteF6gwo-7grUY8vsCu3txH74-QHC-RBg-kwcY/edit?usp=sharing" TARGET="_Blank">Authoring Manual</a>\r\n\r\n',steps:["/shared/authoring-demo/page/15-15-coming-attractions/step/1"],firstStep:"/shared/authoring-demo/page/15-15-coming-attractions/step/1",contextVars:[]}],steps:[{url:"/shared/authoring-demo/page/1-1-introduction/step/1",activityPage:"/shared/authoring-demo/page/1-1-introduction",paneConfig:"single",panes:{single:{type:"image",path:"https://dl.dropbox.com/u/13712300/CC-logo-2013.png",caption:" The Concord Consortium"}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/2-2-prediction-graph/step/1",activityPage:"/shared/authoring-demo/page/2-2-prediction-graph",paneConfig:"single",panes:{single:{type:"graph",title:"Boiling Water: Temperature Prediction",xAxis:"/shared/authoring-demo/axes/1",yAxis:"/shared/authoring-demo/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:[]}},tools:[{name:"prediction",setup:{pane:"single",uiBehavior:"extend",annotationName:"freehand-sketch-1"}}],submissibilityCriterion:[">=",["sketchLength","freehand-sketch-1"],0.2],submissibilityDependsOn:["annotation","freehand-sketch-1"],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/3-3-how-well-did-you-predict/step/1",activityPage:"/shared/authoring-demo/page/3-3-how-well-did-you-predict",beforeText:"How well did your prediction match the data?",paneConfig:"single",panes:{single:{type:"graph",title:"Comparing Measured to Predicted Temperature",xAxis:"/shared/authoring-demo/axes/3",yAxis:"/shared/authoring-demo/axes/4",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]}},responseTemplate:"/shared/authoring-demo/response-templates/open-1",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/4-4-pick_a_point/step/1",activityPage:"/shared/authoring-demo/page/4-4-pick_a_point",beforeText:"For this demonstration, try clicking a point in the highlighted section of the graph (a wrong answer).",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/5",yAxis:"/shared/authoring-demo/axes/6",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["segment-overlay-1","highlighted-point-1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"Measured water temperature"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/4-4-pick_a_point/step/2",responseBranches:[{criterion:["coordinatesInRange","tag-1",6,100,10,100],step:"/shared/authoring-demo/page/4-4-pick_a_point/step/4"}],isFinalStep:false},{url:"/shared/authoring-demo/page/4-4-pick_a_point/step/2",activityPage:"/shared/authoring-demo/page/4-4-pick_a_point",beforeText:"<b>Incorrect. Look at the circled point, which shows when the water began to boil. Try again.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/5",yAxis:"/shared/authoring-demo/axes/6",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["circled-point-1","highlighted-point-1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"Measured water temperature"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/4-4-pick_a_point/step/3",responseBranches:[{criterion:["coordinatesInRange","tag-1",6,100,10,100],step:"/shared/authoring-demo/page/4-4-pick_a_point/step/4"}],isFinalStep:false},{url:"/shared/authoring-demo/page/4-4-pick_a_point/step/3",activityPage:"/shared/authoring-demo/page/4-4-pick_a_point",beforeText:"<b>That is not correct.</b> The region in blue shows points when the water was still increasing in temperature. The circled point shows when the water began to boil, the red line to the y-axis helps you see that the boiling point is 100 degrees Celsius. The region in red shows points one minute or more after boiling. Go on to the Next page.",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/5",yAxis:"/shared/authoring-demo/axes/6",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["segment-overlay-2","circled-point-2","line-to-axis-1","segment-overlay-3"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/4-4-pick_a_point/step/4",activityPage:"/shared/authoring-demo/page/4-4-pick_a_point",beforeText:"<b>Correct.</b> The region in red shows points one minute or more after boiling. The circled point shows when the water began to boil. The red line to the y-axis helps you see that the boiling point is 100 degrees Celsius.",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/5",yAxis:"/shared/authoring-demo/axes/6",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["segment-overlay-4","circled-point-3","line-to-axis-2","segment-overlay-5"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/5-5-how-long/step/1",activityPage:"/shared/authoring-demo/page/5-5-how-long",beforeText:"Enter a number in minutes.",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/7",yAxis:"/shared/authoring-demo/axes/8",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/5-5-how-long/step/2",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],5,0.01],step:"/shared/authoring-demo/page/5-5-how-long/step/4"}],isFinalStep:false},{url:"/shared/authoring-demo/page/5-5-how-long/step/2",activityPage:"/shared/authoring-demo/page/5-5-how-long",beforeText:"Hint 1. That's not correct. Look at the x-axis. The vertical lines provide a hint. <b> Try again. </b>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/7",yAxis:"/shared/authoring-demo/axes/8",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["line-to-axis-3","line-to-axis-4"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/5-5-how-long/step/3",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],5,0.01],step:"/shared/authoring-demo/page/5-5-how-long/step/4"}],isFinalStep:false},{url:"/shared/authoring-demo/page/5-5-how-long/step/3",activityPage:"/shared/authoring-demo/page/5-5-how-long",beforeText:"<b>That's not correct. As you can see by looking at the x-axis, it took five minutes from time zero until the water boiled.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/7",yAxis:"/shared/authoring-demo/axes/8",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["line-to-axis-5","line-to-axis-6"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/5-5-how-long/step/4",activityPage:"/shared/authoring-demo/page/5-5-how-long",beforeText:"<b>That's correct. As you can see by looking at the x-axis, it took five minutes from time zero until the water boiled.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/7",yAxis:"/shared/authoring-demo/axes/8",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["line-to-axis-7","line-to-axis-8"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/1",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"What was the average increase in temperature during the first 5 minutes (in degrees Celsius per minute)?",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/2",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],2,0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/2",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p> Here is the line connecting the two points. </p>\n<p> What was the average increase in temperature during the first 5 minutes (in degrees Celsius per minute)? </p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/3",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-2","tag-3"],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/3",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p> What was the average increase in temperature during the first 5 minutes (in degrees Celsius per minute)? </p>\n<p>Hint: Recall that the rate of heating is \nthe change in  temperature\ndivided by the change in time.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/4",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-2","tag-3"],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/4",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ntemperature between the two points?</p>\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/5",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","tag-2","tag-3"]],["responseField",1],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/7"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/5",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ntemperature between the two points?</p>\n<p>Hint: Look at the table and the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:["rise-bracket1"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/6",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","tag-2","tag-3"]],["responseField",1],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/7"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/6",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>The change is\n<b>%@</b> - <b>%@</b>, \nor <b>%@</b>.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:["rise-bracket1"]}},submitButtonTitle:"Continue",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/7",isFinalStep:false,substitutedExpressions:["end-y","start-y","change-y"]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/7",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p>What was the change in\ntime between the two points?</p>\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/8",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","tag-2","tag-3"]],["responseField",1],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/10"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/8",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ntime between the two points?</p>\n<p>Hint: Look at the graph and the table.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:["run-bracket1"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/9",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","tag-2","tag-3"]],["responseField",1],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/10"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/9",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>The change \nbetween the points is <b>%@</b> - <b>%@</b>, \nor <b>%@</b>.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:["run-bracket1"]}},submitButtonTitle:"Continue",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/10",isFinalStep:false,substitutedExpressions:["end-x","start-x","change-x"]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/10",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p>\n  If the change in temperature is %@\n  and the change in time is %@\n  then what is the rate of heating in deg C/min.?\n</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/11",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-2","tag-3"],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:["change-y","change-x"]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/11",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>\n  If the change in temperature is %@\n  and the change in time is %@\n  then what is the rate of heating in deg C/min.?\n</p>\n<p>\n  Hint: Remember that it is \n  the change in temperature \n  <b>divided by</b> \n  the change in time.\n</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/12",responseTemplate:"/shared/authoring-demo/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-2","tag-3"],0.1],step:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:["change-y","change-x"]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/12",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>\nIf the change in temperature is %@\nand the change in time is %@,\nthe rate of heating is \n<b>%@</b> divided by <b>%@</b>, \nor <b>%@</b> deg C/min..</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:["highlighted-point-2","highlighted-point-3"],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true,substitutedExpressions:["change-y","change-x","change-y","change-x","slope_str"]},{url:"/shared/authoring-demo/page/6-6-rate-of-heating-slope/step/13",activityPage:"/shared/authoring-demo/page/6-6-rate-of-heating-slope",beforeText:"<p><b>Correct!</b></p>\n<p>The rate of heating is <b>2.00</b> deg C/min..</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Measured Water Temperature",xAxis:"/shared/authoring-demo/axes/9",yAxis:"/shared/authoring-demo/axes/10",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-2","highlighted-point-3","line-throughpoints1"],highlightedAnnotations:[],data:["Measured water temperature"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Measured water temperature"]},bottom:{type:"table",data:"Measured water temperature",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/1",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"Suppose the pot on the stove holds another liquid, with a much higher boiling point. Draw a line showing the temperature for the first 10 minutes if the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. <br>\r\nDraw your prediction by clicking two points on the graph. Then move the points until you are satisfied, and click Check My Answer.",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-2",data:"Predicted temperature line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/7-7-construct-a-line/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["and",["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4]],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/9"},{criterion:["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/4"},{criterion:["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/2",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b><b>Sorry, that is not correct. Try again. Remember the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. </b></b><p>Suppose the pot on the stove holds another liquid, with a much higher boiling point. Draw a line showing the temperature for the first 10 minutes if the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. <br>\r\nDraw your prediction by clicking two points on the graph. Then move the points until you are satisfied, and click Check My Answer.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-2",data:"Predicted temperature line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/7-7-construct-a-line/step/5",submissibilityCriterion:["or",["pointMoved","Predicted temperature line (empty data set)",1],["pointMoved","Predicted temperature line (empty data set)",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4]],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/9"},{criterion:["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/7"},{criterion:["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/6"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/3",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b><b>The slope of your line is not correct. Try again. Remember that the temperature increases 2 degrees each minute.</b></b><p>Suppose the pot on the stove holds another liquid, with a much higher boiling point. Draw a line showing the temperature for the first 10 minutes if the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. <br>\r\nDraw your prediction by clicking two points on the graph. Then move the points until you are satisfied, and click Check My Answer.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-2",data:"Predicted temperature line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/7-7-construct-a-line/step/5",submissibilityCriterion:["or",["pointMoved","Predicted temperature line (empty data set)",1],["pointMoved","Predicted temperature line (empty data set)",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4]],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/9"},{criterion:["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/7"},{criterion:["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/6"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/4",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b><b>The y-intercept of your line is not correct. Try again. Remember the initial temperature is 90 degrees Celsius.</b></b><p>Suppose the pot on the stove holds another liquid, with a much higher boiling point. Draw a line showing the temperature for the first 10 minutes if the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. <br>\r\nDraw your prediction by clicking two points on the graph. Then move the points until you are satisfied, and click Check My Answer.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-2",data:"Predicted temperature line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/7-7-construct-a-line/step/5",submissibilityCriterion:["or",["pointMoved","Predicted temperature line (empty data set)",1],["pointMoved","Predicted temperature line (empty data set)",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4]],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/9"},{criterion:["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/7"},{criterion:["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/6"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/5",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b><b>Sorry, that is not correct. Try again. Remember the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. </b></b><p>Suppose the pot on the stove holds another liquid, with a much higher boiling point. Draw a line showing the temperature for the first 10 minutes if the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. <br>\r\nDraw your prediction by clicking two points on the graph. Then move the points until you are satisfied, and click Check My Answer.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-2",data:"Predicted temperature line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/7-7-construct-a-line/step/8",submissibilityCriterion:["or",["pointMoved","Predicted temperature line (empty data set)",1],["pointMoved","Predicted temperature line (empty data set)",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4]],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/6",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b><b>The slope of your line is not correct. Try again. Remember that the temperature increases 2 degrees each minute.</b></b><p>Suppose the pot on the stove holds another liquid, with a much higher boiling point. Draw a line showing the temperature for the first 10 minutes if the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. <br>\r\nDraw your prediction by clicking two points on the graph. Then move the points until you are satisfied, and click Check My Answer.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-2",data:"Predicted temperature line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/7-7-construct-a-line/step/8",submissibilityCriterion:["or",["pointMoved","Predicted temperature line (empty data set)",1],["pointMoved","Predicted temperature line (empty data set)",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4]],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/7",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b><b>The y-intercept of your line is not correct. Try again. Remember the initial temperature is 90 degrees Celsius.</b></b><p>Suppose the pot on the stove holds another liquid, with a much higher boiling point. Draw a line showing the temperature for the first 10 minutes if the initial temperature is 90 degrees Celsius, and the temperature of the liquid increases 2 degrees each minute. <br>\r\nDraw your prediction by clicking two points on the graph. Then move the points until you are satisfied, and click Check My Answer.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-2",data:"Predicted temperature line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/7-7-construct-a-line/step/8",submissibilityCriterion:["or",["pointMoved","Predicted temperature line (empty data set)",1],["pointMoved","Predicted temperature line (empty data set)",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",2,["lineSlope","freehand-sketch-2",1],0.25],["withinAbsTolerance",90,["yIntercept","freehand-sketch-2",1],0.4]],step:"/shared/authoring-demo/page/7-7-construct-a-line/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/8",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b><b>Sorry, that is still not correct. The correct line is shown in blue on the graph. Please go on to the next page.</b></b>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)","Correct Line (Page 7)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Correct Line (Page 7)"]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/7-7-construct-a-line/step/9",activityPage:"/shared/authoring-demo/page/7-7-construct-a-line",beforeText:"<b>Yes, that's right.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Water Temperature",xAxis:"/shared/authoring-demo/axes/11",yAxis:"/shared/authoring-demo/axes/12",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-2"],highlightedAnnotations:[],data:["Predicted temperature line (empty data set)","Correct Line (Page 7)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Correct Line (Page 7)"]},activeDatadefs:["Predicted temperature line (empty data set)"]},bottom:{type:"table",data:"Predicted temperature line (empty data set)",xLabel:"Time",yLabel:"Temp.",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/8-8-multiple-choice/step/1",activityPage:"/shared/authoring-demo/page/8-8-multiple-choice",beforeText:"Which of these is a common misconception about the graph shown at the right?",paneConfig:"split",panes:{top:{type:"graph",title:"How Far Maria Ran",xAxis:"/shared/authoring-demo/axes/13",yAxis:"/shared/authoring-demo/axes/14",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Maria's distance traveled"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Maria's distance traveled"]},bottom:{type:"table",data:"Maria's distance traveled",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/8-8-multiple-choice/step/2",responseTemplate:"/shared/authoring-demo/response-templates/multiple-choice-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],1],step:"/shared/authoring-demo/page/8-8-multiple-choice/step/5"}],isFinalStep:false},{url:"/shared/authoring-demo/page/8-8-multiple-choice/step/2",activityPage:"/shared/authoring-demo/page/8-8-multiple-choice",beforeText:"<b>Hint 1: That choice is not correct. Please try again.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"How Far Maria Ran",xAxis:"/shared/authoring-demo/axes/13",yAxis:"/shared/authoring-demo/axes/14",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Maria's distance traveled"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Maria's distance traveled"]},bottom:{type:"table",data:"Maria's distance traveled",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/8-8-multiple-choice/step/3",responseTemplate:"/shared/authoring-demo/response-templates/multiple-choice-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],1],step:"/shared/authoring-demo/page/8-8-multiple-choice/step/5"}],isFinalStep:false},{url:"/shared/authoring-demo/page/8-8-multiple-choice/step/3",activityPage:"/shared/authoring-demo/page/8-8-multiple-choice",beforeText:"<b>Hint 2: Students often believe that a graph is a picture.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"How Far Maria Ran",xAxis:"/shared/authoring-demo/axes/13",yAxis:"/shared/authoring-demo/axes/14",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Maria's distance traveled"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Maria's distance traveled"]},bottom:{type:"table",data:"Maria's distance traveled",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/8-8-multiple-choice/step/4",responseTemplate:"/shared/authoring-demo/response-templates/multiple-choice-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],1],step:"/shared/authoring-demo/page/8-8-multiple-choice/step/5"}],isFinalStep:false},{url:"/shared/authoring-demo/page/8-8-multiple-choice/step/4",activityPage:"/shared/authoring-demo/page/8-8-multiple-choice",beforeText:"<b>Because students often believe a graph is a picture, they may frequently have the misconception that this graph shows Maria climbing a hill. (Click the Next button to move to the next page.)</b>",paneConfig:"split",panes:{top:{type:"graph",title:"How Far Maria Ran",xAxis:"/shared/authoring-demo/axes/13",yAxis:"/shared/authoring-demo/axes/14",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Maria's distance traveled"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Maria's distance traveled"]},bottom:{type:"table",data:"Maria's distance traveled",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/8-8-multiple-choice/step/5",activityPage:"/shared/authoring-demo/page/8-8-multiple-choice",beforeText:"<b>Yes, that is correct.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"How Far Maria Ran",xAxis:"/shared/authoring-demo/axes/13",yAxis:"/shared/authoring-demo/axes/14",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Maria's distance traveled"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Maria's distance traveled"]},bottom:{type:"table",data:"Maria's distance traveled",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/9-9-multiple-functions/step/1",activityPage:"/shared/authoring-demo/page/9-9-multiple-functions",beforeText:"Click a point on the sine function where x is between pi/2 and pi.",paneConfig:"single",panes:{single:{type:"graph",title:"Two Trigonometric Functions",xAxis:"/shared/authoring-demo/axes/15",yAxis:"/shared/authoring-demo/axes/16",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-4"],highlightedAnnotations:[],data:["Sine function","Cosine function"],datarefs:["dataref-2","dataref-3"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Sine function","Cosine function"]},activeDatadefs:["Sine function"]}},tools:[{name:"tagging",setup:{tag:"tag-4",data:"Sine function"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/9-9-multiple-functions/step/2",responseBranches:[{criterion:["coordinatesInRange","tag-4",1.57,null,3.14,null],step:"/shared/authoring-demo/page/9-9-multiple-functions/step/4"}],isFinalStep:false},{url:"/shared/authoring-demo/page/9-9-multiple-functions/step/2",activityPage:"/shared/authoring-demo/page/9-9-multiple-functions",beforeText:"<b>Pi equals approximately 3.14, so what is pi/2? Try again.</b>",paneConfig:"single",panes:{single:{type:"graph",title:"Two Trigonometric Functions",xAxis:"/shared/authoring-demo/axes/15",yAxis:"/shared/authoring-demo/axes/16",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-4"],highlightedAnnotations:[],data:["Sine function","Cosine function"],datarefs:["dataref-2","dataref-3"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Sine function","Cosine function"]},activeDatadefs:["Sine function"]}},tools:[{name:"tagging",setup:{tag:"tag-4",data:"Sine function"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/9-9-multiple-functions/step/3",responseBranches:[{criterion:["coordinatesInRange","tag-4",1.57,null,3.14,null],step:"/shared/authoring-demo/page/9-9-multiple-functions/step/4"}],isFinalStep:false},{url:"/shared/authoring-demo/page/9-9-multiple-functions/step/3",activityPage:"/shared/authoring-demo/page/9-9-multiple-functions",beforeText:"<b>Here is the correct region.</b>",paneConfig:"single",panes:{single:{type:"graph",title:"Two Trigonometric Functions",xAxis:"/shared/authoring-demo/axes/15",yAxis:"/shared/authoring-demo/axes/16",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["segment-overlay-6"],highlightedAnnotations:[],data:["Sine function","Cosine function"],datarefs:["dataref-2","dataref-3"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Sine function","Cosine function"]},activeDatadefs:["Sine function"]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/9-9-multiple-functions/step/4",activityPage:"/shared/authoring-demo/page/9-9-multiple-functions",beforeText:"Yes, that is correct. All of the correct points are in the highlighted region of the curve.",paneConfig:"single",panes:{single:{type:"graph",title:"Two Trigonometric Functions",xAxis:"/shared/authoring-demo/axes/15",yAxis:"/shared/authoring-demo/axes/16",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["segment-overlay-7"],highlightedAnnotations:[],data:["Sine function","Cosine function"],datarefs:["dataref-2","dataref-3"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Sine function","Cosine function"]},activeDatadefs:["Sine function"]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/1",activityPage:"/shared/authoring-demo/page/10-10-line-of-best-fit",beforeText:"Please create an estimated line of best fit.",paneConfig:"split",panes:{top:{type:"graph",title:"Walking Speed vs. Step Length",xAxis:"/shared/authoring-demo/axes/17",yAxis:"/shared/authoring-demo/axes/18",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-3"],highlightedAnnotations:[],data:["Walking speed vs step length","Student best fit line (empty data set)"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"Walking speed vs step length",datadefs:["Student best fit line (empty data set)"]},activeDatadefs:["Student best fit line (empty data set)"]},bottom:{type:"table",data:"Student best fit line (empty data set)",xLabel:"Speed",yLabel:"Step",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-3",data:"Student best fit line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.009551100518715829],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/7"},{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.014326650778073742],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/2",activityPage:"/shared/authoring-demo/page/10-10-line-of-best-fit",beforeText:"<b>That is not very close. Try again.</b><p>Please create an estimated line of best fit.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Walking Speed vs. Step Length",xAxis:"/shared/authoring-demo/axes/17",yAxis:"/shared/authoring-demo/axes/18",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-3"],highlightedAnnotations:[],data:["Walking speed vs step length","Student best fit line (empty data set)"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"Walking speed vs step length",datadefs:["Student best fit line (empty data set)"]},activeDatadefs:["Student best fit line (empty data set)"]},bottom:{type:"table",data:"Student best fit line (empty data set)",xLabel:"Speed",yLabel:"Step",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-3",data:"Student best fit line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/4",submissibilityCriterion:["or",["pointMoved","Student best fit line (empty data set)",1],["pointMoved","Student best fit line (empty data set)",2]],responseBranches:[{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.009551100518715829],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/7"},{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.014326650778073742],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/5"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/3",activityPage:"/shared/authoring-demo/page/10-10-line-of-best-fit",beforeText:"<b>You are close but you can do better.</b><p>Please create an estimated line of best fit.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Walking Speed vs. Step Length",xAxis:"/shared/authoring-demo/axes/17",yAxis:"/shared/authoring-demo/axes/18",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-3"],highlightedAnnotations:[],data:["Walking speed vs step length","Student best fit line (empty data set)"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"Walking speed vs step length",datadefs:["Student best fit line (empty data set)"]},activeDatadefs:["Student best fit line (empty data set)"]},bottom:{type:"table",data:"Student best fit line (empty data set)",xLabel:"Speed",yLabel:"Step",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-3",data:"Student best fit line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/4",submissibilityCriterion:["or",["pointMoved","Student best fit line (empty data set)",1],["pointMoved","Student best fit line (empty data set)",2]],responseBranches:[{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.009551100518715829],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/7"},{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.014326650778073742],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/5"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/4",activityPage:"/shared/authoring-demo/page/10-10-line-of-best-fit",beforeText:"<b>That is not very close. Try again.</b><p>Please create an estimated line of best fit.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Walking Speed vs. Step Length",xAxis:"/shared/authoring-demo/axes/17",yAxis:"/shared/authoring-demo/axes/18",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-3"],highlightedAnnotations:[],data:["Walking speed vs step length","Student best fit line (empty data set)"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"Walking speed vs step length",datadefs:["Student best fit line (empty data set)"]},activeDatadefs:["Student best fit line (empty data set)"]},bottom:{type:"table",data:"Student best fit line (empty data set)",xLabel:"Speed",yLabel:"Step",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-3",data:"Student best fit line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/6",submissibilityCriterion:["or",["pointMoved","Student best fit line (empty data set)",1],["pointMoved","Student best fit line (empty data set)",2]],responseBranches:[{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.009551100518715829],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/7"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/5",activityPage:"/shared/authoring-demo/page/10-10-line-of-best-fit",beforeText:"<b>You are close but you can do better.</b><p>Please create an estimated line of best fit.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Walking Speed vs. Step Length",xAxis:"/shared/authoring-demo/axes/17",yAxis:"/shared/authoring-demo/axes/18",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-3"],highlightedAnnotations:[],data:["Walking speed vs step length","Student best fit line (empty data set)"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"Walking speed vs step length",datadefs:["Student best fit line (empty data set)"]},activeDatadefs:["Student best fit line (empty data set)"]},bottom:{type:"table",data:"Student best fit line (empty data set)",xLabel:"Speed",yLabel:"Step",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-3",data:"Student best fit line (empty data set)"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/6",submissibilityCriterion:["or",["pointMoved","Student best fit line (empty data set)",1],["pointMoved","Student best fit line (empty data set)",2]],responseBranches:[{criterion:["withinAbsTolerance",0.02387775129678957,["deviationValue","Student best fit line (empty data set)"],0.009551100518715829],step:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/7"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/6",activityPage:"/shared/authoring-demo/page/10-10-line-of-best-fit",beforeText:"<b>Look at the new line on the graph, which is the calculated line of best fit.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Walking Speed vs. Step Length",xAxis:"/shared/authoring-demo/axes/17",yAxis:"/shared/authoring-demo/axes/18",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-3"],highlightedAnnotations:[],data:["Walking speed vs step length","Student best fit line (empty data set)","CorrectLine-10"],datarefs:["dataref-4"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"Walking speed vs step length",datadefs:["Student best fit line (empty data set)","CorrectLine-10"]},activeDatadefs:["Student best fit line (empty data set)"]},bottom:{type:"table",data:"Student best fit line (empty data set)",xLabel:"Speed",yLabel:"Step",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/10-10-line-of-best-fit/step/7",activityPage:"/shared/authoring-demo/page/10-10-line-of-best-fit",beforeText:"<b>Yes, that is a good estimate. The blue line shows the calculated line of best fit.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Walking Speed vs. Step Length",xAxis:"/shared/authoring-demo/axes/17",yAxis:"/shared/authoring-demo/axes/18",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-3"],highlightedAnnotations:[],data:["Walking speed vs step length","Student best fit line (empty data set)","CorrectLine-10"],datarefs:["dataref-4"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"Walking speed vs step length",datadefs:["Student best fit line (empty data set)","CorrectLine-10"]},activeDatadefs:["Student best fit line (empty data set)"]},bottom:{type:"table",data:"Student best fit line (empty data set)",xLabel:"Speed",yLabel:"Step",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/11-11-animations-and-labels/step/1",activityPage:"/shared/authoring-demo/page/11-11-animations-and-labels",paneConfig:"single",panes:{single:{type:"graph",title:"The Sine Function",xAxis:"/shared/authoring-demo/axes/19",yAxis:"/shared/authoring-demo/axes/20",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["Notice these points"],highlightedAnnotations:[],data:["Sine function"],datarefs:["dataref-2"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Sine function"]}},tools:[{name:"animation",setup:{pane:"single",hideGraph:false,duration:9000,channelWidth:70,staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[]}],backgroundImage:"road-dashed.png",animations:[{data:"Sine function",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}]}}],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/12-12-embedded-video-and-html/step/1",activityPage:"/shared/authoring-demo/page/12-12-embedded-video-and-html",paneConfig:"single",panes:null,isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/13-13-motion-sensor-graph/step/1",activityPage:"/shared/authoring-demo/page/13-13-motion-sensor-graph",paneConfig:"split",panes:{top:{type:"graph",title:"Motion Sensor Graph",xAxis:"/shared/authoring-demo/axes/21",yAxis:"/shared/authoring-demo/axes/22",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:[],highlightedAnnotations:[],data:["Sensor data (empty)"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["Sensor data (empty)"]},bottom:{type:"table",data:"Sensor data (empty)",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},tools:[{name:"sensor",setup:{controlsPane:"top",data:"Sensor data (empty)"}}],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/14-14-available-features/step/1",activityPage:"/shared/authoring-demo/page/14-14-available-features",paneConfig:"single",panes:null,isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/authoring-demo/page/15-15-coming-attractions/step/1",activityPage:"/shared/authoring-demo/page/15-15-coming-attractions",paneConfig:"single",panes:{single:{type:"image",path:"https://dl.dropbox.com/u/13712300/CC-logo-2013.png",caption:" The Concord Consortium"}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[{url:"/shared/authoring-demo/response-templates/open-1",templateString:"",fieldChoicesList:[null],initialValues:[""],fieldTypes:["textarea"]},{url:"/shared/authoring-demo/response-templates/numeric-1",templateString:"",fieldChoicesList:[null],initialValues:[""],fieldTypes:["numeric"]},{url:"/shared/authoring-demo/response-templates/multiple-choice-1",templateString:"",fieldChoicesList:[["The graph shows a hill that Maria climbed as she ran.","No graph should pass through the origin (0,0).","Time should always be shown on the y-axis"]],initialValues:[""],fieldTypes:["multiplechoice"]}],axes:[{url:"/shared/authoring-demo/axes/1",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/authoring-demo/axes/2",min:80,max:120,nSteps:8,label:"Temperature"},{url:"/shared/authoring-demo/axes/3",units:"/shared/authoring-demo/units/minutes",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/authoring-demo/axes/4",units:"/shared/authoring-demo/units/degrees Celsius",min:80,max:120,nSteps:8,label:"Temperature"},{url:"/shared/authoring-demo/axes/5",units:"/shared/authoring-demo/units/minutes",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/authoring-demo/axes/6",units:"/shared/authoring-demo/units/degrees Celsius",min:80,max:120,nSteps:8,label:"Temperature"},{url:"/shared/authoring-demo/axes/7",units:"/shared/authoring-demo/units/minutes",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/authoring-demo/axes/8",units:"/shared/authoring-demo/units/degrees Celsius",min:80,max:120,nSteps:8,label:"Temperature"},{url:"/shared/authoring-demo/axes/9",units:"/shared/authoring-demo/units/minutes",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/authoring-demo/axes/10",units:"/shared/authoring-demo/units/degrees Celsius",min:80,max:120,nSteps:8,label:"Temperature"},{url:"/shared/authoring-demo/axes/11",units:"/shared/authoring-demo/units/minutes",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/authoring-demo/axes/12",units:"/shared/authoring-demo/units/degrees Celsius",min:80,max:120,nSteps:8,label:"Temperature"},{url:"/shared/authoring-demo/axes/13",units:"/shared/authoring-demo/units/minutes",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/authoring-demo/axes/14",units:"/shared/authoring-demo/units/meters",min:0,max:2000,nSteps:10,label:"Distance"},{url:"/shared/authoring-demo/axes/15",min:-5,max:5,nSteps:10,label:"X"},{url:"/shared/authoring-demo/axes/16",min:-5,max:5,nSteps:10,label:"Y"},{url:"/shared/authoring-demo/axes/17",units:"/shared/authoring-demo/units/meters per second",min:0,max:4,nSteps:20,label:"Speed"},{url:"/shared/authoring-demo/axes/18",units:"/shared/authoring-demo/units/meters",min:0,max:1.5,nSteps:15,label:"Step Length"},{url:"/shared/authoring-demo/axes/19",min:-10,max:10,nSteps:20,label:"X"},{url:"/shared/authoring-demo/axes/20",min:-1.5,max:1.5,nSteps:6,label:"Y"},{url:"/shared/authoring-demo/axes/21",min:0,max:20,nSteps:20,label:"Time"},{url:"/shared/authoring-demo/axes/22",min:0,max:4,nSteps:4,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/authoring-demo/datadefs/Measured water temperature",name:"Measured water temperature",activity:"/shared/authoring-demo",xUnits:"/shared/authoring-demo/units/minutes",yUnits:"/shared/authoring-demo/units/degrees Celsius",points:[[0,90],[1,92],[2,94],[3,96],[4,98],[5,100],[6,100],[7,100],[8,100],[9,100],[10,100]],pointType:"dot",lineType:"none",lineSnapDistance:0.1},{url:"/shared/authoring-demo/datadefs/Predicted temperature line (empty data set)",name:"Predicted temperature line (empty data set)",activity:"/shared/authoring-demo",xUnits:"/shared/authoring-demo/units/minutes",yUnits:"/shared/authoring-demo/units/degrees Celsius",points:[],pointType:"dot",lineType:"none",lineSnapDistance:0.1},{url:"/shared/authoring-demo/datadefs/Correct Line (Page 7)",name:"Correct Line (Page 7)",activity:"/shared/authoring-demo",xUnits:"/shared/authoring-demo/units/minutes",yUnits:"/shared/authoring-demo/units/degrees Celsius",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.1,color:"#17becf"},{url:"/shared/authoring-demo/datadefs/Maria's distance traveled",name:"Maria's distance traveled",activity:"/shared/authoring-demo",xUnits:"/shared/authoring-demo/units/minutes",yUnits:"/shared/authoring-demo/units/meters",points:[[0,0],[1,200],[2,400],[3,600],[4,800],[5,800],[6,800],[7,1050],[8,1300],[9,1550],[10,1800]],pointType:"dot",lineType:"connected",lineSnapDistance:0.1},{url:"/shared/authoring-demo/datadefs/Sine function",name:"Sine function",activity:"/shared/authoring-demo",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.1},{url:"/shared/authoring-demo/datadefs/Cosine function",name:"Cosine function",activity:"/shared/authoring-demo",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.1},{url:"/shared/authoring-demo/datadefs/Walking speed vs step length",name:"Walking speed vs step length",activity:"/shared/authoring-demo",xUnits:"/shared/authoring-demo/units/meters per second",yUnits:"/shared/authoring-demo/units/meters",points:[[0.8,0.5],[0.85,0.6],[0.9,0.6],[1.3,0.7],[1.4,0.7],[1.6,0.8],[1.75,0.8],[1.9,0.9],[2.15,0.9],[2.5,1],[2.8,1.05],[3,1.15],[3.1,1.25],[3.3,1.15],[3.35,1.2],[3.4,1.2]],pointType:"dot",lineType:"none",lineSnapDistance:0.1,color:"#17becf"},{url:"/shared/authoring-demo/datadefs/Student best fit line (empty data set)",name:"Student best fit line (empty data set)",activity:"/shared/authoring-demo",xUnits:"/shared/authoring-demo/units/meters per second",yUnits:"/shared/authoring-demo/units/meters",points:[],pointType:"dot",lineType:"none",lineSnapDistance:0.1,color:"#cc0000"},{url:"/shared/authoring-demo/datadefs/CorrectLine-10",name:"CorrectLine-10",activity:"/shared/authoring-demo",xUnits:"/shared/authoring-demo/units/meters per second",yUnits:"/shared/authoring-demo/units/meters",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.1,color:"#17becf"},{url:"/shared/authoring-demo/datadefs/Sensor data (empty)",name:"Sensor data (empty)",activity:"/shared/authoring-demo",points:[],pointType:"dot",lineType:"none",lineSnapDistance:0.1}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/authoring-demo/datarefs/dataref-1",name:"dataref-1",activity:"/shared/authoring-demo",datadefName:"Correct Line (Page 7)",expressionForm:"slope-intercept",xInterval:0.1,params:{slope:2,yIntercept:90}},{url:"/shared/authoring-demo/datarefs/dataref-4",name:"dataref-4",activity:"/shared/authoring-demo",datadefName:"CorrectLine-10",expressionForm:"slope-intercept",xInterval:0.1,params:{slope:0.25585307724660034,yIntercept:0.36096312911818307}}]},{type:"SinusoidalEquation",records:[{url:"/shared/authoring-demo/datarefs/dataref-2",name:"dataref-2",activity:"/shared/authoring-demo",datadefName:"Sine function",expressionForm:"sine-cosine",angularFunction:"sine",xInterval:0.1,params:{amplitude:1,frequency:1,phase:0,centerAmplitude:0}}]},{type:"CompositeEquation",records:[{url:"/shared/authoring-demo/datarefs/dataref-3",name:"dataref-3",activity:"/shared/authoring-demo",datadefName:"Cosine function",expression:"y = cos(x)",xInterval:0.1,params:{}}]}],tags:[{url:"/shared/authoring-demo/tags/tag-1",activity:"/shared/authoring-demo",name:"tag-1"},{url:"/shared/authoring-demo/tags/tag-2",activity:"/shared/authoring-demo",name:"tag-2",x:0,y:90},{url:"/shared/authoring-demo/tags/tag-3",activity:"/shared/authoring-demo",name:"tag-3",x:5,y:100},{url:"/shared/authoring-demo/tags/tag-4",activity:"/shared/authoring-demo",name:"tag-4"}],annotations:[{type:"Label",records:[{url:"/shared/authoring-demo/annotations/Notice these points-1",name:"Notice these points-1",activity:"/shared/authoring-demo",text:"Authors and students can label points of interest",x:0,y:1},{url:"/shared/authoring-demo/annotations/Notice these points-2",name:"Notice these points-2",activity:"/shared/authoring-demo",text:"Such as the max and min for the sine",x:0,y:-1}]},{type:"LabelSet",records:[{url:"/shared/authoring-demo/annotations/Notice these points",name:"Notice these points",activity:"/shared/authoring-demo",labels:["/shared/authoring-demo/annotations/Notice these points-1","/shared/authoring-demo/annotations/Notice these points-2"]}]},{type:"FreehandSketch",records:[{url:"/shared/authoring-demo/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/authoring-demo",color:"#CC0000",points:[]},{url:"/shared/authoring-demo/annotations/freehand-sketch-2",name:"freehand-sketch-2",activity:"/shared/authoring-demo",color:"#CC0000",points:[]},{url:"/shared/authoring-demo/annotations/freehand-sketch-3",name:"freehand-sketch-3",activity:"/shared/authoring-demo",color:"#CC0000",points:[]}]},{type:"HighlightedPoint",records:[{url:"/shared/authoring-demo/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",tag:"/shared/authoring-demo/tags/tag-1",color:"#1f77b4"},{url:"/shared/authoring-demo/annotations/highlighted-point-2",name:"highlighted-point-2",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",tag:"/shared/authoring-demo/tags/tag-2",color:"#1f77b4"},{url:"/shared/authoring-demo/annotations/highlighted-point-3",name:"highlighted-point-3",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",tag:"/shared/authoring-demo/tags/tag-3",color:"#ff7f0e"},{url:"/shared/authoring-demo/annotations/highlighted-point-4",name:"highlighted-point-4",activity:"/shared/authoring-demo",datadefName:"Sine function",tag:"/shared/authoring-demo/tags/tag-4",color:"#1f77b4"}]},{type:"SegmentOverlay",records:[{url:"/shared/authoring-demo/annotations/segment-overlay-1",name:"segment-overlay-1",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"blue",x1Record:0,x2Record:4},{url:"/shared/authoring-demo/annotations/segment-overlay-2",name:"segment-overlay-2",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"blue",x1Record:0,x2Record:4},{url:"/shared/authoring-demo/annotations/segment-overlay-3",name:"segment-overlay-3",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",x1Record:6,x2Record:10},{url:"/shared/authoring-demo/annotations/segment-overlay-4",name:"segment-overlay-4",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"blue",x1Record:0,x2Record:4},{url:"/shared/authoring-demo/annotations/segment-overlay-5",name:"segment-overlay-5",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",x1Record:6,x2Record:10},{url:"/shared/authoring-demo/annotations/segment-overlay-6",name:"segment-overlay-6",activity:"/shared/authoring-demo",datadefName:"Sine function",color:"green",x1Record:1.57,x2Record:3.14},{url:"/shared/authoring-demo/annotations/segment-overlay-7",name:"segment-overlay-7",activity:"/shared/authoring-demo",datadefName:"Sine function",color:"green",x1Record:1.57,x2Record:3.14}]},{type:"CircledPoint",records:[{url:"/shared/authoring-demo/annotations/circled-point-1",name:"circled-point-1",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:5,yRecord:100},{url:"/shared/authoring-demo/annotations/circled-point-2",name:"circled-point-2",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:5,yRecord:100},{url:"/shared/authoring-demo/annotations/circled-point-3",name:"circled-point-3",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:5,yRecord:100}]},{type:"LineToAxis",records:[{url:"/shared/authoring-demo/annotations/line-to-axis-1",name:"line-to-axis-1",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:5,yRecord:100,axis:"y"},{url:"/shared/authoring-demo/annotations/line-to-axis-2",name:"line-to-axis-2",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:5,yRecord:100,axis:"y"},{url:"/shared/authoring-demo/annotations/line-to-axis-3",name:"line-to-axis-3",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"green",xRecord:0,yRecord:90,axis:"x"},{url:"/shared/authoring-demo/annotations/line-to-axis-4",name:"line-to-axis-4",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"green",xRecord:5,yRecord:100,axis:"x"},{url:"/shared/authoring-demo/annotations/line-to-axis-5",name:"line-to-axis-5",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:0,yRecord:90,axis:"x"},{url:"/shared/authoring-demo/annotations/line-to-axis-6",name:"line-to-axis-6",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:5,yRecord:100,axis:"x"},{url:"/shared/authoring-demo/annotations/line-to-axis-7",name:"line-to-axis-7",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:0,yRecord:90,axis:"x"},{url:"/shared/authoring-demo/annotations/line-to-axis-8",name:"line-to-axis-8",activity:"/shared/authoring-demo",datadefName:"Measured water temperature",color:"red",xRecord:5,yRecord:100,axis:"x"}]},{type:"RunArrow",records:[{url:"/shared/authoring-demo/annotations/run-arrow1",name:"run-arrow1",activity:"/shared/authoring-demo",color:"#cccccc",datadefName:"Measured water temperature",p1Tag:"/shared/authoring-demo/tags/tag-2",p2Tag:"/shared/authoring-demo/tags/tag-3"}]},{type:"RiseArrow",records:[{url:"/shared/authoring-demo/annotations/rise-arrow1",name:"rise-arrow1",activity:"/shared/authoring-demo",color:"#cccccc",datadefName:"Measured water temperature",p1Tag:"/shared/authoring-demo/tags/tag-2",p2Tag:"/shared/authoring-demo/tags/tag-3"}]},{type:"RunBracket",records:[{url:"/shared/authoring-demo/annotations/run-bracket1",name:"run-bracket1",activity:"/shared/authoring-demo",color:"#cccccc",datadefName:"Measured water temperature",p1Tag:"/shared/authoring-demo/tags/tag-2",p2Tag:"/shared/authoring-demo/tags/tag-3"}]},{type:"RiseBracket",records:[{url:"/shared/authoring-demo/annotations/rise-bracket1",name:"rise-bracket1",activity:"/shared/authoring-demo",color:"#cccccc",datadefName:"Measured water temperature",p1Tag:"/shared/authoring-demo/tags/tag-2",p2Tag:"/shared/authoring-demo/tags/tag-3"}]},{type:"LineThroughPoints",records:[{url:"/shared/authoring-demo/annotations/line-throughpoints1",name:"line-throughpoints1",activity:"/shared/authoring-demo",color:"#1f77b4",datadefName:"Measured water temperature",p1Tag:"/shared/authoring-demo/tags/tag-2",p2Tag:"/shared/authoring-demo/tags/tag-3"}]}],variables:[],units:[{url:"/shared/authoring-demo/units/Time",activity:"/shared/authoring-demo",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/authoring-demo/units/Distance",activity:"/shared/authoring-demo",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/authoring-demo/units/degrees Celsius",activity:"/shared/authoring-demo",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/authoring-demo/units/minutes",activity:"/shared/authoring-demo",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/authoring-demo/units/meters",activity:"/shared/authoring-demo",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/authoring-demo/units/seconds",activity:"/shared/authoring-demo",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/authoring-demo/units/centimeters",activity:"/shared/authoring-demo",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/authoring-demo/units/grams",activity:"/shared/authoring-demo",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/authoring-demo/units/miles",activity:"/shared/authoring-demo",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/authoring-demo/units/hours",activity:"/shared/authoring-demo",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/authoring-demo/units/Celsius",activity:"/shared/authoring-demo",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/authoring-demo/units/dollars",activity:"/shared/authoring-demo",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/authoring-demo/units/inches",activity:"/shared/authoring-demo",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/authoring-demo/units/years",activity:"/shared/authoring-demo",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/authoring-demo/units/millimeters",activity:"/shared/authoring-demo",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/authoring-demo/units/parts per million",activity:"/shared/authoring-demo",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"},{url:"/shared/authoring-demo/units/meters per second",activity:"/shared/authoring-demo",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/best-fit-sequence"]={_id:"best-fit-sequence.df6",_rev:1,data_format_version:6,activity:{title:"Best Fit Sequence",url:"/shared/best-fit-sequence",owner:"shared",pages:["/shared/best-fit-sequence/page/1-best-fit-sequence-page-1"],axes:["/shared/best-fit-sequence/axes/1","/shared/best-fit-sequence/axes/2"],authorName:"Noah"},pages:[{name:"Best Fit Sequence Page 1",url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",activity:"/shared/best-fit-sequence",index:1,introText:"On this page, students will be asked to find the line of best fit for a series of points.",steps:["/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/1","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/2","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/3","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/4","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/5","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/6","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/7","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/8","/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"],firstStep:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/1",contextVars:[]}],steps:[{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/1",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"Find the line of best fit for this scatter plot.",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],14.827236000448885],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"},{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],29.65447200089777],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/2",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>Your estimate can be better; try again.</b><p>Find the line of best fit for this scatter plot.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/4",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],14.827236000448885],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"},{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],29.65447200089777],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/5"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/3",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>Your estimate is close; try again</b><p>Find the line of best fit for this scatter plot.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/4",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],14.827236000448885],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"},{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],29.65447200089777],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/5"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/4",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>Your estimate can be better; try again.</b><p>Find the line of best fit for this scatter plot.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/6",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],14.827236000448885],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"},{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],29.65447200089777],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/7"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/5",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>Your estimate is close; try again</b><p>Find the line of best fit for this scatter plot.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/6",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],14.827236000448885],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"},{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],29.65447200089777],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/7"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/6",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>Your estimate can be better; try again.</b><p>Find the line of best fit for this scatter plot.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/8",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],14.827236000448885],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/7",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>Your estimate is close; try again</b><p>Find the line of best fit for this scatter plot.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/8",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["withinAbsTolerance",14.827236000448883,["deviationValue","datadef-1"],14.827236000448885],step:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/8",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>Your estimate is incorrect.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1","CorrectLine-1"],datarefs:["dataref-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1","CorrectLine-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1/step/9",activityPage:"/shared/best-fit-sequence/page/1-best-fit-sequence-page-1",beforeText:"<b>You made an excellent estimate.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/best-fit-sequence/axes/1",yAxis:"/shared/best-fit-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["scatter-points","datadef-1","CorrectLine-1"],datarefs:["dataref-1"],legends:{title:"Sum of squares",type:"AvgSumOfDeviation",referenceDatadef:"scatter-points",datadefs:["datadef-1","CorrectLine-1"]},activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/best-fit-sequence/axes/1",min:0,max:10,nSteps:10,label:"x"},{url:"/shared/best-fit-sequence/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/best-fit-sequence/datadefs/scatter-points",name:"scatter-points",activity:"/shared/best-fit-sequence",points:[[0.4,0.5],[1,1],[1.5,1.5],[0.6,2.5],[2,2],[1.2,3],[2.4,3],[1.6,3.5],[3.5,4],[2.4,4.5],[4,5],[3.7,6],[3,5.5],[2.5,4],[5,6.5],[5,7],[6.5,7],[6.5,8.5],[8,8]],pointType:"dot",lineType:"none",lineSnapDistance:0,color:"#17becf"},{url:"/shared/best-fit-sequence/datadefs/datadef-1",name:"datadef-1",activity:"/shared/best-fit-sequence",points:[],pointType:"dot",lineType:"none",lineSnapDistance:0,color:"#cc0000"},{url:"/shared/best-fit-sequence/datadefs/CorrectLine-1",name:"CorrectLine-1",activity:"/shared/best-fit-sequence",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0,color:"#17becf"}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/best-fit-sequence/datarefs/dataref-1",name:"dataref-1",activity:"/shared/best-fit-sequence",datadefName:"CorrectLine-1",expressionForm:"slope-intercept",xInterval:0.1,params:{slope:1.0127931769722816,yIntercept:1.1274828863202777}}]}],tags:[],annotations:[{type:"FreehandSketch",records:[{url:"/shared/best-fit-sequence/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/best-fit-sequence",color:"#CC0000",points:[]}]}],variables:[],units:[]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/calculated-velocity"]={_id:"calculated-velocity.df6",_rev:"1",data_format_version:6,activity:{title:"Example of Calculated Velocity",url:"/shared/calculated-velocity",owner:"shared",pages:["/shared/calculated-velocity/page/1"],axes:["/shared/calculated-velocity/axes/12s","/shared/calculated-velocity/axes/10m"]},pages:[{name:"Position and Velocity Graphs",url:"/shared/calculated-velocity/page/1",activity:"/shared/calculated-velocity",index:1,introText:"<h1>Labeling Calculated Data</h1>",steps:["/shared/calculated-velocity/page/1/step/1"],firstStep:"/shared/calculated-velocity/page/1/step/1"}],steps:[{url:"/shared/calculated-velocity/page/1/step/1",activityPage:"/shared/calculated-velocity/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/calculated-velocity/axes/12s",yAxis:"/shared/calculated-velocity/axes/10m",data:[["position-data",{"point-type":"none","line-type":"connected"}]],annotations:[]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/calculated-velocity/axes/12s",yAxis:"/shared/calculated-velocity/axes/2mps",data:["velocity-calculated"],annotations:[],activeDatadefs:["velocity-calculated"]}},tools:[{name:"label",setup:{pane:"bottom",labelName:"test-label"}},{name:"label",setup:{pane:"top",labelSetName:"test-label-set"}}],beforeText:"<p>Try creating several labels in the upper pane and one label in the lower pane. Note that the velocity-time data are derived from the position-time data.</p>",hideSubmitButton:true}],units:[],axes:[{url:"/shared/calculated-velocity/axes/12s",units:"/builtins/units/seconds",min:0,max:12,nSteps:12,label:"Time"},{url:"/shared/calculated-velocity/axes/10m",units:"/builtins/units/meters",min:0,max:10,nSteps:10,label:"Position"},{url:"/shared/calculated-velocity/axes/2mps",units:"/builtins/units/meters-per-second",min:0,max:2,nSteps:10,label:"Velocity"}],responseTemplates:[],tags:[],variables:[],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/calculated-velocity/datadefs/position-data",name:"position-data",activity:"/shared/calculated-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,0],[0.25,0.025],[0.5,0.05],[0.75,0.075],[1,0.1],[1.25,0.125],[1.5,0.15],[1.75,0.175],[2,0.2],[2.25,0.225],[2.5,0.25],[2.75,0.276],[3,0.303],[3.25,0.34],[3.5,0.404],[3.75,0.515],[4,0.653],[4.25,0.801],[4.5,0.95],[4.75,1.1],[5,1.25],[5.25,1.4],[5.5,1.55],[5.75,1.7],[6,1.85],[6.25,2],[6.5,2.15],[6.75,2.3],[7,2.45],[7.25,2.6],[7.5,2.75],[7.75,2.901],[8,3.057],[8.25,3.23],[8.5,3.459],[8.75,3.78],[9,4.157],[9.25,4.551],[9.5,4.95],[9.75,5.35],[10,5.75],[10.25,6.15],[10.5,6.55],[10.75,6.95],[11,7.35],[11.25,7.75],[11.5,8.15],[11.75,8.55],[12,8.95]]}]},{type:"FirstOrderDifference",records:[{url:"/shared/calculated-velocity/datadefs/velocity-calculated",name:"velocity-calculated",activity:"/shared/calculated-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters-per-second",yLabel:"Velocity",yShortLabel:"Velocity",source:"/shared/calculated-velocity/datadefs/position-data"}]}],annotations:[{type:"Label",records:[{url:"/shared/calculated-velocity/annotation/test-label",name:"test-label",activity:"/shared/calculated-velocity",text:"a label"},{url:"/shared/calculated-velocity/annotation/test-label-2",name:"test-label-2",activity:"/shared/calculated-velocity",text:"a second label"}]},{type:"LabelSet",records:[{url:"/shared/calculated-velocity/annotation/test-label-set",name:"test-label-set",activity:"/shared/calculated-velocity"}]}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/describing-velocity"]={_id:"describing-velocity.df6",_rev:"1",data_format_version:6,activity:{title:"Describing Velocity",url:"/shared/describing-velocity",owner:"shared",pages:["/shared/describing-velocity/page/1","/shared/describing-velocity/page/2","/shared/describing-velocity/page/3","/shared/describing-velocity/page/4","/shared/describing-velocity/page/5","/shared/describing-velocity/page/6","/shared/describing-velocity/page/7","/shared/describing-velocity/page/8","/shared/describing-velocity/page/9","/shared/describing-velocity/page/10","/shared/describing-velocity/page/11","/shared/describing-velocity/page/12","/shared/describing-velocity/page/13"],axes:["/shared/describing-velocity/axes/9s","/shared/describing-velocity/axes/40m","/shared/describing-velocity/axes/car-mps","/shared/describing-velocity/axes/identify-the-motion-time","/shared/describing-velocity/axes/identify-the-motion-velocity"]},pages:[{name:"Introduction",url:"/shared/describing-velocity/page/1",activity:"/shared/describing-velocity",index:1,introText:"<h1>Introduction</h1>",steps:["/shared/describing-velocity/page/1/step/1"],firstStep:"/shared/describing-velocity/page/1/step/1"},{name:"Discovery Question",url:"/shared/describing-velocity/page/2",activity:"/shared/describing-velocity",index:2,introText:"<h1>Discovery Question</h1>",steps:["/shared/describing-velocity/page/2/step/1"],firstStep:"/shared/describing-velocity/page/2/step/1"},{name:"Label the Position-Time Graph",url:"/shared/describing-velocity/page/3",activity:"/shared/describing-velocity",index:3,introText:"<h1>Label the Position-Time Graph</h1>",steps:["/shared/describing-velocity/page/3/step/1"],firstStep:"/shared/describing-velocity/page/3/step/1"},{name:"Analyze the Position-Time Graph ",url:"/shared/describing-velocity/page/4",activity:"/shared/describing-velocity",index:4,introText:"<h1>Analyze the Position-Time Graph</h1>",steps:["/shared/describing-velocity/page/4/step/1","/shared/describing-velocity/page/4/step/2","/shared/describing-velocity/page/4/step/3","/shared/describing-velocity/page/4/step/4","/shared/describing-velocity/page/4/step/5","/shared/describing-velocity/page/4/step/6","/shared/describing-velocity/page/4/step/7","/shared/describing-velocity/page/4/step/8","/shared/describing-velocity/page/4/step/9","/shared/describing-velocity/page/4/step/10","/shared/describing-velocity/page/4/step/11","/shared/describing-velocity/page/4/step/12","/shared/describing-velocity/page/4/step/13","/shared/describing-velocity/page/4/step/14","/shared/describing-velocity/page/4/step/15","/shared/describing-velocity/page/4/step/16","/shared/describing-velocity/page/4/step/17","/shared/describing-velocity/page/4/step/18","/shared/describing-velocity/page/4/step/19"],contextVars:[{name:"start-position",value:["coord","y",["listItem",1,["slopeToolOrder","first-point","second-point"]]]},{name:"start-position_str",value:["toFixedString",["get","start-position"],2]},{name:"end-position",value:["coord","y",["listItem",2,["slopeToolOrder","first-point","second-point"]]]},{name:"end-position_str",value:["toFixedString",["get","end-position"],2]},{name:"change-position",value:["-",["get","end-position"],["get","start-position"]]},{name:"change-position_str",value:["toFixedString",["get","change-position"],2]},{name:"start-time",value:["coord","x",["listItem",1,["slopeToolOrder","first-point","second-point"]]]},{name:"start-time_str",value:["toFixedString",["get","start-time"],2]},{name:"end-time",value:["coord","x",["listItem",2,["slopeToolOrder","first-point","second-point"]]]},{name:"end-time_str",value:["toFixedString",["get","end-time"],2]},{name:"change-time",value:["-",["get","end-time"],["get","start-time"]]},{name:"change-time_str",value:["toFixedString",["get","change-time"],2]},{name:"velocity",value:["/",["get","change-position"],["get","change-time"]]},{name:"velocity_str",value:["toFixedString",["get","velocity"],2]},{name:"change-position-units",value:["pluralizeUnits","/builtins/units/meters",["get","change-position"]]},{name:"change-time-units",value:["pluralizeUnits","/builtins/units/seconds",["get","change-time"]]},{name:"velocity-units",value:["pluralizeUnits","/builtins/units/meters-per-second",["get","velocity"]]}],firstStep:"/shared/describing-velocity/page/4/step/1"},{name:"Analyze the Position-Time Graph (2)",url:"/shared/describing-velocity/page/5",activity:"/shared/describing-velocity",index:5,introText:"<h1>Analyze the Position-Time Graph 2</h1>",steps:["/shared/describing-velocity/page/5/step/1","/shared/describing-velocity/page/5/step/2","/shared/describing-velocity/page/5/step/3","/shared/describing-velocity/page/5/step/4","/shared/describing-velocity/page/5/step/5","/shared/describing-velocity/page/5/step/6","/shared/describing-velocity/page/5/step/7","/shared/describing-velocity/page/5/step/8","/shared/describing-velocity/page/5/step/9","/shared/describing-velocity/page/5/step/10","/shared/describing-velocity/page/5/step/11","/shared/describing-velocity/page/5/step/12","/shared/describing-velocity/page/5/step/13","/shared/describing-velocity/page/5/step/14","/shared/describing-velocity/page/5/step/15","/shared/describing-velocity/page/5/step/16","/shared/describing-velocity/page/5/step/17","/shared/describing-velocity/page/5/step/18","/shared/describing-velocity/page/5/step/19"],contextVars:[{name:"start-position",value:["coord","y",["listItem",1,["slopeToolOrder","first-point","second-point"]]]},{name:"start-position_str",value:["toFixedString",["get","start-position"],2]},{name:"end-position",value:["coord","y",["listItem",2,["slopeToolOrder","first-point","second-point"]]]},{name:"end-position_str",value:["toFixedString",["get","end-position"],2]},{name:"change-position",value:["-",["get","end-position"],["get","start-position"]]},{name:"change-position_str",value:["toFixedString",["get","change-position"],2]},{name:"start-time",value:["coord","x",["listItem",1,["slopeToolOrder","first-point","second-point"]]]},{name:"start-time_str",value:["toFixedString",["get","start-time"],2]},{name:"end-time",value:["coord","x",["listItem",2,["slopeToolOrder","first-point","second-point"]]]},{name:"end-time_str",value:["toFixedString",["get","end-time"],2]},{name:"change-time",value:["-",["get","end-time"],["get","start-time"]]},{name:"change-time_str",value:["toFixedString",["get","change-time"],2]},{name:"velocity",value:["/",["get","change-position"],["get","change-time"]]},{name:"velocity_str",value:["toFixedString",["get","velocity"],2]},{name:"change-position-units",value:["pluralizeUnits","/builtins/units/meters",["get","change-position"]]},{name:"change-time-units",value:["pluralizeUnits","/builtins/units/seconds",["get","change-time"]]},{name:"velocity-units",value:["pluralizeUnits","/builtins/units/meters-per-second",["get","velocity"]]}],firstStep:"/shared/describing-velocity/page/5/step/1"},{name:"Analyze the Position-Time Graph (3)",url:"/shared/describing-velocity/page/6",activity:"/shared/describing-velocity",index:6,introText:"<h1>Analyze the Position-Time Graph 3</h1>",steps:["/shared/describing-velocity/page/6/step/1","/shared/describing-velocity/page/6/step/2","/shared/describing-velocity/page/6/step/3","/shared/describing-velocity/page/6/step/4","/shared/describing-velocity/page/6/step/5","/shared/describing-velocity/page/6/step/6","/shared/describing-velocity/page/6/step/7","/shared/describing-velocity/page/6/step/8","/shared/describing-velocity/page/6/step/9","/shared/describing-velocity/page/6/step/10","/shared/describing-velocity/page/6/step/11","/shared/describing-velocity/page/6/step/12","/shared/describing-velocity/page/6/step/13","/shared/describing-velocity/page/6/step/14","/shared/describing-velocity/page/6/step/15","/shared/describing-velocity/page/6/step/16","/shared/describing-velocity/page/6/step/17","/shared/describing-velocity/page/6/step/18","/shared/describing-velocity/page/6/step/19"],contextVars:[{name:"start-position",value:["coord","y",["listItem",1,["slopeToolOrder","first-point","second-point"]]]},{name:"start-position_str",value:["toFixedString",["get","start-position"],2]},{name:"end-position",value:["coord","y",["listItem",2,["slopeToolOrder","first-point","second-point"]]]},{name:"end-position_str",value:["toFixedString",["get","end-position"],2]},{name:"change-position",value:["-",["get","end-position"],["get","start-position"]]},{name:"change-position_str",value:["toFixedString",["get","change-position"],2]},{name:"start-time",value:["coord","x",["listItem",1,["slopeToolOrder","first-point","second-point"]]]},{name:"start-time_str",value:["toFixedString",["get","start-time"],2]},{name:"end-time",value:["coord","x",["listItem",2,["slopeToolOrder","first-point","second-point"]]]},{name:"end-time_str",value:["toFixedString",["get","end-time"],2]},{name:"change-time",value:["-",["get","end-time"],["get","start-time"]]},{name:"change-time_str",value:["toFixedString",["get","change-time"],2]},{name:"velocity",value:["/",["get","change-position"],["get","change-time"]]},{name:"velocity_str",value:["toFixedString",["get","velocity"],2]},{name:"change-position-units",value:["pluralizeUnits","/builtins/units/meters",["get","change-position"]]},{name:"change-time-units",value:["pluralizeUnits","/builtins/units/seconds",["get","change-time"]]},{name:"velocity-units",value:["pluralizeUnits","/builtins/units/meters-per-second",["get","velocity"]]}],firstStep:"/shared/describing-velocity/page/6/step/1"},{name:"Label the Position-Time Graph (2)",url:"/shared/describing-velocity/page/7",activity:"/shared/describing-velocity",index:7,introText:"<h1>Label the Position-Time Graph</h1>",steps:["/shared/describing-velocity/page/7/step/1"],firstStep:"/shared/describing-velocity/page/7/step/1"},{name:"Compare the Graphs",url:"/shared/describing-velocity/page/8",activity:"/shared/describing-velocity",index:8,introText:"<h1>Compare the Graphs</h1>",steps:["/shared/describing-velocity/page/8/step/1","/shared/describing-velocity/page/8/step/2"],firstStep:"/shared/describing-velocity/page/8/step/1"},{name:"Analyze the Velocity-Time Graph",url:"/shared/describing-velocity/page/9",activity:"/shared/describing-velocity",index:9,introText:"<h1>Analyze the Velocity-Time Graph</h1>",steps:["/shared/describing-velocity/page/9/step/1","/shared/describing-velocity/page/9/step/2","/shared/describing-velocity/page/9/step/3","/shared/describing-velocity/page/9/step/4","/shared/describing-velocity/page/9/step/5","/shared/describing-velocity/page/9/step/6"],firstStep:"/shared/describing-velocity/page/9/step/1"},{name:"Compare Your Descriptions",url:"/shared/describing-velocity/page/10",activity:"/shared/describing-velocity",index:10,introText:"<h1>Compare the Graphs</h1>",steps:["/shared/describing-velocity/page/10/step/1"],firstStep:"/shared/describing-velocity/page/10/step/1"},{name:"Explore Other Motions",url:"/shared/describing-velocity/page/11",activity:"/shared/describing-velocity",index:11,introText:"<h1>Explore Other Motions</h1>",steps:["/shared/describing-velocity/page/11/step/1","/shared/describing-velocity/page/11/step/2","/shared/describing-velocity/page/11/step/3","/shared/describing-velocity/page/11/step/4","/shared/describing-velocity/page/11/step/5","/shared/describing-velocity/page/11/step/6","/shared/describing-velocity/page/11/step/7","/shared/describing-velocity/page/11/step/8","/shared/describing-velocity/page/11/step/9"],firstStep:"/shared/describing-velocity/page/11/step/1"},{name:"Identify the Motion",url:"/shared/describing-velocity/page/12",activity:"/shared/describing-velocity",index:12,introText:"<h1>Identify the Motion</h1>",steps:["/shared/describing-velocity/page/12/step/1","/shared/describing-velocity/page/12/step/2","/shared/describing-velocity/page/12/step/3","/shared/describing-velocity/page/12/step/4","/shared/describing-velocity/page/12/step/5","/shared/describing-velocity/page/12/step/6","/shared/describing-velocity/page/12/step/7","/shared/describing-velocity/page/12/step/8","/shared/describing-velocity/page/12/step/9","/shared/describing-velocity/page/12/step/10","/shared/describing-velocity/page/12/step/11","/shared/describing-velocity/page/12/step/12","/shared/describing-velocity/page/12/step/13","/shared/describing-velocity/page/12/step/14","/shared/describing-velocity/page/12/step/15","/shared/describing-velocity/page/12/step/16","/shared/describing-velocity/page/12/step/17","/shared/describing-velocity/page/12/step/18"],firstStep:"/shared/describing-velocity/page/12/step/1"},{name:"Conclusion",url:"/shared/describing-velocity/page/13",activity:"/shared/describing-velocity",index:13,introText:"<h1>Conclusion</h1><p><b>How can you describe velocity?</b></p>",steps:["/shared/describing-velocity/page/13/step/1","/shared/describing-velocity/page/13/step/2","/shared/describing-velocity/page/13/step/3","/shared/describing-velocity/page/13/step/4","/shared/describing-velocity/page/13/step/5","/shared/describing-velocity/page/13/step/6"],firstStep:"/shared/describing-velocity/page/13/step/1"}],steps:[{url:"/shared/describing-velocity/page/1/step/1",activityPage:"/shared/describing-velocity/page/1",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/NASCAR_practice_modified.jpg",caption:"Modified from a public domain U.S. Air Force photo by Larry McTighe"}},beforeText:"<p>Imagine you are a TV sports commentator for a major car race. What techniques could you use to <b>describe</b> the action to your audience?</p>",responseTemplate:"/shared/describing-velocity/response-template/open",afterText:"<p>In this activity, you will explore different ways to communicate how fast an object is moving.</p>",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],hideSubmitButton:true,nextButtonShouldSubmit:true,isFinalStep:true},{url:"/shared/describing-velocity/page/2/step/1",activityPage:"/shared/describing-velocity/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"point-type":"none","line-type":"connected",color:"#F7F8FA"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",hideGraph:true,duration:9000,channelWidth:70,staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],backgroundImage:"road-dashed.png",animations:[{data:"position-data",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}]}}],beforeText:" <p><strong>How can you describe velocity?</strong></p> <p>Let’s start by examining the motion of a car traveling from one point to another.</p> <p><b>Click</b> the Start button to the right to watch the car’s journey. Click the Stop, Reset, and Start buttons to pause and replay the motion multiple times.</p> <p>In the area below, <strong>describe</strong> the motion of the car. Try to use as many key words from the word bank as possible.</p>",responseTemplate:"/shared/describing-velocity/response-template/open",afterText:"<p><strong>Word bank:</strong> start, position, time, forward, backward, moving, stopping, velocity, constant, steady, changing, slow, fast, end, meters, seconds<p>",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],hideSubmitButton:true,nextButtonShouldSubmit:true,variableAssignments:[{name:"student-description",value:["responseField",1]}],isFinalStep:true},{url:"/shared/describing-velocity/page/3/step/1",activityPage:"/shared/describing-velocity/page/3",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"point-type":"none","line-type":"connected"}]],annotations:[]}},beforeText:"<p>Here is your earlier description of the car's journey:</p><p>&quot;%@&quot;</p><p><b>Start</b> the animation again and <b>observe</b> the resulting position-time graph for the car's motion.</p><p>Using key words from your descriptions, <b>label</b> the motions that occurred during each segment of the position-time graph. You should have three labels, one for each motion.</p><p><b>Click</b> or tap where you want a label. <b>Double-click</b> (or double-tap) in the label to add text and click outside the label when you are done. You can also click and drag to rearrange the labels.</p>",substitutedExpressions:["student-description"],submissibilityDependsOn:["annotation","students-segment-labels"],submissibilityCriterion:[">",["numberOfLabels","students-segment-labels"],0],hideSubmitButton:true,nextButtonShouldSubmit:true,isFinalStep:true,tools:[{name:"label",setup:{pane:"top",labelSetName:"students-segment-labels",maxNoOfLabels:3}},{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"position-data",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}]}}]},{url:"/shared/describing-velocity/page/4/step/1",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:[],xLabel:"Time",yLabel:"Position"}},tools:[],beforeText:"<p>Use the position-time data to answer the following question:</p><p>What was the car’s velocity from 0-3 seconds, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p><b>Hint:</b> Recall that velocity is the slope of a position-time graph.<p>",submissibilityCriterion:["isNumeric",["responseField",1]],variableAssignments:[{name:"student-velocity",value:["responseField",1]}],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],0,0.1],step:"/shared/describing-velocity/page/4/step/19"}],defaultBranch:"/shared/describing-velocity/page/4/step/2",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/2",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>Select a point in the first interval (between 0 and 3 seconds) on the graph. Then <b>click OK</b>.</p>",substitutedExpressions:["student-velocity"],tools:[{name:"tagging",setup:{tag:"first-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","first-point"],0],["<=",["coord","x","first-point"],3]],step:"/shared/describing-velocity/page/4/step/4"}],defaultBranch:"/shared/describing-velocity/page/4/step/3",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/4/step/3",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","students-segment-labels","segment-0-3s"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Your point was not within the first three seconds.</p> <p>Select a point in the <b>first interval (between 0 and 3 seconds)</b>. Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"first-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","first-point"],0],["<=",["coord","x","first-point"],3]],step:"/shared/describing-velocity/page/4/step/4"}],defaultBranch:"/shared/describing-velocity/page/4/step/3",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/4/step/4",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Select a second point in the first interval (between 0 and 3 seconds). Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","second-point"],0],["<=",["coord","x","second-point"],3],["!=",["coord","x","first-point"],["coord","x","second-point"]]],step:"/shared/describing-velocity/page/4/step/6"}],defaultBranch:"/shared/describing-velocity/page/4/step/5",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/4/step/5",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","segment-0-3s"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Your point was not within the first three seconds. </p> <p> Select a point in the <b>first interval (between 0 and 3 seconds)</b>. Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","second-point"],0],["<=",["coord","x","second-point"],3],["!=",["coord","x","first-point"],["coord","x","second-point"]]],step:"/shared/describing-velocity/page/4/step/6"}],defaultBranch:"/shared/describing-velocity/page/4/step/5",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/4/step/6",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Here is the line connecting the two points you selected. The car's velocity during the first interval is the slope of this line.</p><p>What was the car's velocity between the two points, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/19"}],defaultBranch:"/shared/describing-velocity/page/4/step/7",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/7",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the car's the velocity between the two points, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/19"}],defaultBranch:"/shared/describing-velocity/page/4/step/8",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/8",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the change in the car's position between the two points, in meters?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/12"}],defaultBranch:"/shared/describing-velocity/page/4/step/9",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/9",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],highlightedAnnotations:["rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the change in the car's position between the two points, in meters?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the table and the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/12"}],defaultBranch:"/shared/describing-velocity/page/4/step/10",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/10",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],highlightedAnnotations:["rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b> <p>The change in the car's position was <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-position","start-position","change-position","change-position-units"],defaultBranch:"/shared/describing-velocity/page/4/step/11",submitButtonTitle:"Continue"},{url:"/shared/describing-velocity/page/4/step/11",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/16"}],defaultBranch:"/shared/describing-velocity/page/4/step/13",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/12",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p><p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/16"}],defaultBranch:"/shared/describing-velocity/page/4/step/13",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/13",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],highlightedAnnotations:["run-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the table and graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/16"}],defaultBranch:"/shared/describing-velocity/page/4/step/14",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/14",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],highlightedAnnotations:["run-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>The change in time between the points is <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-time","start-time","change-time","change-time-units"],defaultBranch:"/shared/describing-velocity/page/4/step/15",submitButtonTitle:"Continue"},{url:"/shared/describing-velocity/page/4/step/15",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/19"}],defaultBranch:"/shared/describing-velocity/page/4/step/17",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/16",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p> <p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/19"}],defaultBranch:"/shared/describing-velocity/page/4/step/17",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/17",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p> <p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/4/step/19"}],defaultBranch:"/shared/describing-velocity/page/4/step/18",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/4/step/18",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, the velocity is <b>%@</b> divided by <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units","change-position","change-time","velocity","velocity-units"],shouldFinishImmediately:true,isFinalStep:true,hideSubmitButton:true},{url:"/shared/describing-velocity/page/4/step/19",activityPage:"/shared/describing-velocity/page/4",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p> <p>The velocity was <b>0 m/s</b> in the first segment.</p>",isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/describing-velocity/page/5/step/1",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:[],xLabel:"Time",yLabel:"Position"}},tools:[],beforeText:"<p>Use the position-time data to answer the following question:</p><p>What was the car’s velocity from 3-6 seconds, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p><b>Hint:</b> Recall that velocity is the slope of a position-time graph.<p>",submissibilityCriterion:["isNumeric",["responseField",1]],variableAssignments:[{name:"student-velocity",value:["responseField",1]}],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],2,0.1],step:"/shared/describing-velocity/page/5/step/19"}],defaultBranch:"/shared/describing-velocity/page/5/step/2",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/2",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>Select a point in the second interval (between 3 and 6 seconds) on the graph. Then <b>click OK</b>.</p>",substitutedExpressions:["student-velocity"],tools:[{name:"tagging",setup:{tag:"first-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","first-point"],3],["<=",["coord","x","first-point"],6]],step:"/shared/describing-velocity/page/5/step/4"}],defaultBranch:"/shared/describing-velocity/page/5/step/3",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/5/step/3",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","students-segment-labels","segment-3-6s"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Your point was not within the second three seconds.</p> <p>Select a point in the <b>second interval (between 3 and 6 seconds)</b>. Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"first-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","first-point"],3],["<=",["coord","x","first-point"],6]],step:"/shared/describing-velocity/page/5/step/4"}],defaultBranch:"/shared/describing-velocity/page/5/step/3",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/5/step/4",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Select a second point in the second interval (between 3 and 6 seconds). Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","second-point"],3],["<=",["coord","x","second-point"],6],["!=",["coord","x","first-point"],["coord","x","second-point"]]],step:"/shared/describing-velocity/page/5/step/6"}],defaultBranch:"/shared/describing-velocity/page/5/step/5",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/5/step/5",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","segment-3-6s"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Your point was not within the second three seconds. </p> <p> Select a point in the <b>second interval (between 3 and 6 seconds)</b>. Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","second-point"],3],["<=",["coord","x","second-point"],6],["!=",["coord","x","first-point"],["coord","x","second-point"]]],step:"/shared/describing-velocity/page/5/step/6"}],defaultBranch:"/shared/describing-velocity/page/5/step/5",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/5/step/6",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Here is the line connecting the two points you selected. The car's velocity during the second interval is the slope of this line.</p><p>What was the car's velocity between the two points, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/19"}],defaultBranch:"/shared/describing-velocity/page/5/step/7",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/7",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the car's the velocity between the two points, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/19"}],defaultBranch:"/shared/describing-velocity/page/5/step/8",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/8",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the change in the car's position between the two points, in meters?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/12"}],defaultBranch:"/shared/describing-velocity/page/5/step/9",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/9",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],highlightedAnnotations:["rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the change in the car's position between the two points, in meters?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the table and the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/12"}],defaultBranch:"/shared/describing-velocity/page/5/step/10",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/10",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],highlightedAnnotations:["rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b> <p>The change in the car's position was <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-position","start-position","change-position","change-position-units"],defaultBranch:"/shared/describing-velocity/page/5/step/11",submitButtonTitle:"Continue"},{url:"/shared/describing-velocity/page/5/step/11",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/16"}],defaultBranch:"/shared/describing-velocity/page/5/step/13",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/12",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p><p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/16"}],defaultBranch:"/shared/describing-velocity/page/5/step/13",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/13",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],highlightedAnnotations:["run-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the table and graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/16"}],defaultBranch:"/shared/describing-velocity/page/5/step/14",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/14",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],highlightedAnnotations:["run-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>The change in time between the points is <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-time","start-time","change-time","change-time-units"],defaultBranch:"/shared/describing-velocity/page/5/step/15",submitButtonTitle:"Continue"},{url:"/shared/describing-velocity/page/5/step/15",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/19"}],defaultBranch:"/shared/describing-velocity/page/5/step/17",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/16",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p> <p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/19"}],defaultBranch:"/shared/describing-velocity/page/5/step/17",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/17",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p> <p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/5/step/19"}],defaultBranch:"/shared/describing-velocity/page/5/step/18",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/5/step/18",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, the velocity is <b>%@</b> divided by <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units","change-position","change-time","velocity","velocity-units"],shouldFinishImmediately:true,isFinalStep:true,hideSubmitButton:true},{url:"/shared/describing-velocity/page/5/step/19",activityPage:"/shared/describing-velocity/page/5",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p> <p>The velocity was <b>2 m/s</b> in the second segment.</p>",isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/describing-velocity/page/6/step/1",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:[],xLabel:"Time",yLabel:"Position"}},tools:[],beforeText:"<p>Use the position-time data to answer the following question:</p><p>What was the car’s velocity from 6-9 seconds, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p><b>Hint:</b> Recall that velocity is the slope of a position-time graph.<p>",submissibilityCriterion:["isNumeric",["responseField",1]],variableAssignments:[{name:"student-velocity",value:["responseField",1]}],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],10,0.1],step:"/shared/describing-velocity/page/6/step/19"}],defaultBranch:"/shared/describing-velocity/page/6/step/2",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/2",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>Select a point in the third interval (between 6 and 9 seconds) on the graph. Then <b>click OK</b>.</p>",substitutedExpressions:["student-velocity"],tools:[{name:"tagging",setup:{tag:"first-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","first-point"],6],["<=",["coord","x","first-point"],9]],step:"/shared/describing-velocity/page/6/step/4"}],defaultBranch:"/shared/describing-velocity/page/6/step/3",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/6/step/3",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","students-segment-labels","segment-6-9s"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Your point was not within the third three seconds.</p> <p>Select a point in the <b>third interval (between 6 and 9 seconds)</b>. Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"first-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","first-point"],6],["<=",["coord","x","first-point"],9]],step:"/shared/describing-velocity/page/6/step/4"}],defaultBranch:"/shared/describing-velocity/page/6/step/3",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/6/step/4",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Select a second point in the third interval (between 6 and 9 seconds). Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","second-point"],6],["<=",["coord","x","second-point"],9],["!=",["coord","x","first-point"],["coord","x","second-point"]]],step:"/shared/describing-velocity/page/6/step/6"}],defaultBranch:"/shared/describing-velocity/page/6/step/5",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/6/step/5",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","segment-6-9s"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Your point was not within the third three seconds. </p> <p>Select a point in the <b>third interval (between 6 and 9 seconds)</b>. Then <b>click OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point",data:"position-data"}}],responseBranches:[{criterion:["and",[">=",["coord","x","second-point"],6],["<=",["coord","x","second-point"],9],["!=",["coord","x","first-point"],["coord","x","second-point"]]],step:"/shared/describing-velocity/page/6/step/6"}],defaultBranch:"/shared/describing-velocity/page/6/step/5",submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/6/step/6",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Here is the line connecting the two points you selected. The car's velocity during the third interval is the slope of this line.</p><p>What was the car's velocity between the two points, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/19"}],defaultBranch:"/shared/describing-velocity/page/6/step/7",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/7",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the car's the velocity between the two points, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/19"}],defaultBranch:"/shared/describing-velocity/page/6/step/8",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/8",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the change in the car's position between the two points, in meters?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/12"}],defaultBranch:"/shared/describing-velocity/page/6/step/9",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/9",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],highlightedAnnotations:["rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What was the change in the car's position between the two points, in meters?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the table and the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/12"}],defaultBranch:"/shared/describing-velocity/page/6/step/10",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/10",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],highlightedAnnotations:["rise-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],highlightedAnnotations:["rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b> <p>The change in the car's position was <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-position","start-position","change-position","change-position-units"],defaultBranch:"/shared/describing-velocity/page/6/step/11",submitButtonTitle:"Continue"},{url:"/shared/describing-velocity/page/6/step/11",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/16"}],defaultBranch:"/shared/describing-velocity/page/6/step/13",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/12",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p><p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/16"}],defaultBranch:"/shared/describing-velocity/page/6/step/13",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/13",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],highlightedAnnotations:["run-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>What is the change in time between the points, in seconds?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Look at the table and graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point","second-point"]],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/16"}],defaultBranch:"/shared/describing-velocity/page/6/step/14",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/14",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line","rise-arrow"],highlightedAnnotations:["run-arrow"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight","rise-bracket"],highlightedAnnotations:["run-bracket"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>The change in time between the points is <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-time","start-time","change-time","change-time-units"],defaultBranch:"/shared/describing-velocity/page/6/step/15",submitButtonTitle:"Continue"},{url:"/shared/describing-velocity/page/6/step/15",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/19"}],defaultBranch:"/shared/describing-velocity/page/6/step/17",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/16",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p> <p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/19"}],defaultBranch:"/shared/describing-velocity/page/6/step/17",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/17",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p> <p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, then what is the velocity, in meters per second?</p>",responseTemplate:"/shared/describing-velocity/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point","second-point"],["responseField",1],0.1],step:"/shared/describing-velocity/page/6/step/19"}],defaultBranch:"/shared/describing-velocity/page/6/step/18",submitButtonTitle:"Check My Answer"},{url:"/shared/describing-velocity/page/6/step/18",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["p1-highlight","p2-highlight","students-segment-labels","slope-line"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",annotations:["p1-highlight","p2-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Incorrect.</b></p><p>If the change in position is <b>%@</b> %@ during a change in time of <b>%@</b> %@, the velocity is <b>%@</b> divided by <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units","change-position","change-time","velocity","velocity-units"],shouldFinishImmediately:true,isFinalStep:true,hideSubmitButton:true},{url:"/shared/describing-velocity/page/6/step/19",activityPage:"/shared/describing-velocity/page/6",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"table",data:"position-data",xLabel:"Time",yLabel:"Position"}},beforeText:"<p><b>Correct!</b></p> <p>The velocity was <b>10 m/s</b> in the third segment.</p>",isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/describing-velocity/page/7/step/1",activityPage:"/shared/describing-velocity/page/7",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"point-type":"none","line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]}},beforeText:"<p>Here are the correct velocities: </p><p>Velocity from 0-3 seconds: <b>0 m/s</b></p><p>Velocity from 3-6 seconds: <b>2 m/s</b></p><p>Velocity from 6-9 seconds: <b>10 m/s</b></p><p><b>Insert</b> these values into your labels by <b>double-clicking</b> inside the labels and <b>typing</b>.</p>",hideSubmitButton:true,nextButtonShouldSubmit:true,isFinalStep:true},{url:"/shared/describing-velocity/page/8/step/1",activityPage:"/shared/describing-velocity/page/8",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data-hacky-fix",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["position-data-hacky-fix"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"position-data-hacky-fix",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-velocity"}]}]}}],beforeText:" <p>A <i>velocity-time</i> graph shows the car's <b>velocity</b> over time.</p><p><b>Click</b> the Start button to play the animation again.</p><p>This time, the velocity-time graph of the car's motion displays below the position-time graph.</p>",defaultBranch:"/shared/describing-velocity/page/8/step/2",submissibilityCriterion:[">",["playCount"],0],submitButtonTitle:"OK"},{url:"/shared/describing-velocity/page/8/step/2",activityPage:"/shared/describing-velocity/page/8",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data-hacky-fix",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["position-data-hacky-fix"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:["velocity-labels"]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"position-data-hacky-fix",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-velocity"}]}]}}],beforeText:" <p>Both graphs provide information about the same motion.</p><p><b>Describe</b> how constant velocity is represented on a position-time graph and on a velocity-time graph. (<b>Click Start</b> if you need to see the motion and graphs again.)</p><p><b>Word bank</b>: constant velocity, flat, straight, tilted, up, down, right, left, segment, horizontal, steep, slope</p>",responseTemplate:"/shared/describing-velocity/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],nextButtonShouldSubmit:true,hideSubmitButton:true,isFinalStep:true},{url:"/shared/describing-velocity/page/9/step/1",activityPage:"/shared/describing-velocity/page/9",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-velocity"]}},responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/9/step/6"}],defaultBranch:"/shared/describing-velocity/page/9/step/2",beforeText:"<p>On a velocity-time graph, how can you tell if a car is stopped?</p>",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],hideSubmitButton:false},{url:"/shared/describing-velocity/page/9/step/2",activityPage:"/shared/describing-velocity/page/9",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-velocity"]}},responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/9/step/6"}],defaultBranch:"/shared/describing-velocity/page/9/step/3",beforeText:"<p><b>Incorrect.</b> Hint: When a car is stopped, what is its change in position? Try again:</p><p>On a velocity-time graph, how can you tell if a car is stopped?</p>",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],hideSubmitButton:false},{url:"/shared/describing-velocity/page/9/step/3",activityPage:"/shared/describing-velocity/page/9",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-velocity"]}},responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/9/step/6"}],defaultBranch:"/shared/describing-velocity/page/9/step/4",beforeText:"<p><b>Incorrect.</b> Hint: What is the velocity when the car is stopped? Try again:</p><p>On a velocity-time graph, how can you tell if a car is stopped?</p>",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],hideSubmitButton:false},{url:"/shared/describing-velocity/page/9/step/4",activityPage:"/shared/describing-velocity/page/9",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-velocity"]}},responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/9/step/6"}],defaultBranch:"/shared/describing-velocity/page/9/step/5",beforeText:"<p><b>Incorrect.</b> Hint: The velocity of the car is 0 m/s when the car is stopped. Try again:</p><p>On a velocity-time graph, how can you tell if a car is stopped?</p>",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],hideSubmitButton:false},{url:"/shared/describing-velocity/page/9/step/5",activityPage:"/shared/describing-velocity/page/9",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-velocity"]}},beforeText:"<p><b>Incorrect.</b> The graph is a horizontal segment in which the velocity is 0.</p>",nextButtonShouldSubmit:true,hideSubmitButton:true,isFinalStep:true},{url:"/shared/describing-velocity/page/9/step/6",activityPage:"/shared/describing-velocity/page/9",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-velocity"]}},beforeText:"<p><b>Correct!</b> The graph is a horizontal segment in which the velocity is 0.</p>",nextButtonShouldSubmit:true,hideSubmitButton:true,isFinalStep:true},{url:"/shared/describing-velocity/page/10/step/1",activityPage:"/shared/describing-velocity/page/10",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["position-data",{"point-type":"none","line-type":"connected"}]],annotations:["students-segment-labels"],activeDatadefs:["position-data"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-velocity",{"point-type":"none","line-type":"connected"}]],annotations:["velocity-labels"]}},beforeText:" <p>The position-time graph of the car's motion displays in the top window and the velocity time graph displays in the bottom.</p><p>How do the labels describing the motion compare in the two graphs?</p>",responseTemplate:"/shared/describing-velocity/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],hideSubmitButton:true,nextButtonShouldSubmit:true,isFinalStep:true},{url:"/shared/describing-velocity/page/11/step/1",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}]}}],beforeText:"<p>Let's look at another type of motion that you have experienced.</p><p><b>Click</b> the Start button to see the motion and corresponding position-time graph. Watch the motion multiple times.",submissibilityCriterion:[">",["playCount"],0],submitButtonTitle:"OK",defaultBranch:"/shared/describing-velocity/page/11/step/2"},{url:"/shared/describing-velocity/page/11/step/2",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[]}]}},{name:"prediction",setup:{pane:"bottom",annotationName:"student-velocity-prediction"}}],beforeText:"<p><b>Click Start</b> to see the motion and position-time graph again. <b>Use</b> the position-time graph to find the car's velocity</p><p><b>Sketch</b> the velocity-time graph for the motion in the bottom area.</p><p><b>Click</b> the point where you want your sketch to start.</p><p>To continue your sketch, <b>click</b> on each point at which you want the sketch to continue.</p><p><b>Click Reset</b> under the bottom graph if you want to erase your sketch and start over.</p>",submitButtonTitle:"OK",submissibilityDependsOn:["annotation","student-velocity-prediction"],submissibilityCriterion:[">=",["sketchLength","student-velocity-prediction"],0],defaultBranch:"/shared/describing-velocity/page/11/step/3"},{url:"/shared/describing-velocity/page/11/step/3",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-in-reverse-velocity",{"point-type":"none","line-type":"connected"}]],annotations:["student-velocity-prediction"]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-in-reverse-velocity"}]}]}}],beforeText:"<p><b>Click</b> the Start button. <b>Observe</b> the motion and graphs multiple times.</p><p>In the top area, the position-time graph displays. In the bottom area, the actual velocity-time graph displays along with your sketch.</p><p>How does your predicted velocity compare with the actual velocity?</p>",responseTemplate:"/shared/describing-velocity/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],submitButtonTitle:"OK",defaultBranch:"/shared/describing-velocity/page/11/step/4"},{url:"/shared/describing-velocity/page/11/step/4",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-in-reverse-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-in-reverse-velocity"}]}]}}],beforeText:"<p>Based on your observations, which of the following statements is true?",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question-2",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/describing-velocity/page/11/step/9"}],defaultBranch:"/shared/describing-velocity/page/11/step/5"},{url:"/shared/describing-velocity/page/11/step/5",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-in-reverse-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-in-reverse-velocity"}]}]}}],beforeText:"<p><b>Incorrect.</b> Hint 1: Recall that velocity is the change in position divided by the change in time. Try again: </p><p>Based on your observations, which of the following statements is true?",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question-2",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/describing-velocity/page/11/step/9"}],defaultBranch:"/shared/describing-velocity/page/11/step/6"},{url:"/shared/describing-velocity/page/11/step/6",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-in-reverse-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-in-reverse-velocity"}]}]}}],beforeText:"<p><b>Incorrect.</b> Hint 2: The change in position is 0 m - 36 m = -36 m. The change in time is 9 s - 0 s = 9 s. Try again: </p><p>Based on your observations, which of the following statements is true?",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question-2",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/describing-velocity/page/11/step/9"}],defaultBranch:"/shared/describing-velocity/page/11/step/7"},{url:"/shared/describing-velocity/page/11/step/7",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-in-reverse-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-in-reverse-velocity"}]}]}}],beforeText:"<p><b>Incorrect.</b> Hint 3: The change in the car's position between the end point and the beginning point, divided by the change in the times of the end point and beginning point, is -36 m / 9 s. Try again: </p><p>Based on your observations, which of the following statements is true?",responseTemplate:"/shared/describing-velocity/response-template/velocity-time-question-2",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/describing-velocity/page/11/step/9"}],defaultBranch:"/shared/describing-velocity/page/11/step/8"},{url:"/shared/describing-velocity/page/11/step/8",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-in-reverse-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{name:"finish",image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-in-reverse-velocity"}]}]}}],beforeText:"<p><b>Incorrect.</b> Velocity = change in position / change in time = -36 m / 9 s = -4 m/s. The velocity is negative.",hideSubmitButton:true,shouldFinishImmediately:true,isFinalStep:true},{url:"/shared/describing-velocity/page/11/step/9",activityPage:"/shared/describing-velocity/page/11",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/40m",data:[["car-in-reverse-position",{"point-type":"none","line-type":"connected"}]],annotations:[],activeDatadefs:["car-in-reverse-position"]},bottom:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/9s",yAxis:"/shared/describing-velocity/axes/car-mps",data:[["car-in-reverse-velocity",{"point-type":"none","line-type":"connected"}]],annotations:[]}},tools:[{name:"animation",setup:{pane:"top",duration:9000,channelWidth:70,backgroundImage:"road-dashed.png",staticImages:[{image:"finish.png",width:70,height:10,xOffset:0,yOffset:5,instances:[{y:0}]}],animations:[{data:"car-in-reverse-position",image:"carWhite2.png",width:30,height:61,xOffset:40,yOffset:0}],linkedAnimations:[{pane:"bottom",animations:[{data:"car-in-reverse-velocity"}]}]}}],beforeText:"<p><b>Correct!</b> Velocity = change in position / change in time = -36 m / 9 s = -4 m/s. The velocity is negative.",hideSubmitButton:true,shouldFinishImmediately:true,isFinalStep:true},{url:"/shared/describing-velocity/page/12/step/1",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p>Choose the segment in the velocity-time graph that describes where the object was moving forward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/12/step/6"}],defaultBranch:"/shared/describing-velocity/page/12/step/2"},{url:"/shared/describing-velocity/page/12/step/2",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 1: If an object is moving forward with constant velocity, what are some possible velocity values? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was moving forward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/12/step/6"}],defaultBranch:"/shared/describing-velocity/page/12/step/3"},{url:"/shared/describing-velocity/page/12/step/3",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 2: While an object is moving forward with constant velocity, is its velocity 0, positive, or negative? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was moving forward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/12/step/6"}],defaultBranch:"/shared/describing-velocity/page/12/step/4"},{url:"/shared/describing-velocity/page/12/step/4",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 3: Which segment shows positive velocity? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was moving forward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],3],step:"/shared/describing-velocity/page/12/step/6"}],defaultBranch:"/shared/describing-velocity/page/12/step/5"},{url:"/shared/describing-velocity/page/12/step/5",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> From 5 to 11 seconds, the velocity was 3 m/s, which means that the object was moving at a steady rate forward. This corresponds to Segment C.</p>",submitButtonTitle:"OK",defaultBranch:"/shared/describing-velocity/page/12/step/7"},{url:"/shared/describing-velocity/page/12/step/6",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Correct!</b> From 5 to 11 seconds, the velocity was 3 m/s, which means that the object was moving at a steady rate forward. This corresponds to Segment C.</p>",submitButtonTitle:"OK",defaultBranch:"/shared/describing-velocity/page/12/step/7"},{url:"/shared/describing-velocity/page/12/step/7",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p>Choose the segment in the velocity-time graph that describes where the object was stopped.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],1],step:"/shared/describing-velocity/page/12/step/12"}],defaultBranch:"/shared/describing-velocity/page/12/step/8"},{url:"/shared/describing-velocity/page/12/step/8",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 1: If an object is stopped, what are some possible velocity values? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was stopped.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],1],step:"/shared/describing-velocity/page/12/step/12"}],defaultBranch:"/shared/describing-velocity/page/12/step/9"},{url:"/shared/describing-velocity/page/12/step/9",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 2: While an object is stopped, is its velocity 0, positive, or negative? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was stopped.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],1],step:"/shared/describing-velocity/page/12/step/12"}],defaultBranch:"/shared/describing-velocity/page/12/step/10"},{url:"/shared/describing-velocity/page/12/step/10",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 3: Which segment shows 0 velocity? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was stopped.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],1],step:"/shared/describing-velocity/page/12/step/12"}],defaultBranch:"/shared/describing-velocity/page/12/step/11"},{url:"/shared/describing-velocity/page/12/step/11",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> From 0 to 5 seconds, the velocity was 0, which means that the object was not moving. This corresponds to Segment A.</p>",submitButtonTitle:"OK",defaultBranch:"/shared/describing-velocity/page/12/step/13"},{url:"/shared/describing-velocity/page/12/step/12",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Correct!</b> From 0 to 5 seconds, the velocity was 0, which means that the object was not moving. This corresponds to Segment A.</p>",submitButtonTitle:"OK",defaultBranch:"/shared/describing-velocity/page/12/step/13"},{url:"/shared/describing-velocity/page/12/step/13",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p>Choose the segment in the velocity-time graph that describes where the object was moving backward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/12/step/18"}],defaultBranch:"/shared/describing-velocity/page/12/step/14"},{url:"/shared/describing-velocity/page/12/step/14",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 1: If an object is moving backward, what are some possible velocity values? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was moving backward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/12/step/18"}],defaultBranch:"/shared/describing-velocity/page/12/step/15"},{url:"/shared/describing-velocity/page/12/step/15",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 2: While an object is moving backward, is its velocity 0, positive, or negative? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was moving backward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/12/step/18"}],defaultBranch:"/shared/describing-velocity/page/12/step/16"},{url:"/shared/describing-velocity/page/12/step/16",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> Hint 3: Which segment shows negative velocity? Try again:</p><p>Choose the segment in the velocity-time graph that describes where the object was moving backward with a constant velocity.</p>",responseTemplate:"/shared/describing-velocity/response-template/identify-the-motion-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/12/step/18"}],defaultBranch:"/shared/describing-velocity/page/12/step/17"},{url:"/shared/describing-velocity/page/12/step/17",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Incorrect.</b> From 11 to 20 seconds, the velocity was -5 m/s, which means that the object was moving at a steady rate backward. This corresponds to Segment E.</p>",hideSubmitButton:true,nextButtonShouldSubmit:true,isFinalStep:true},{url:"/shared/describing-velocity/page/12/step/18",activityPage:"/shared/describing-velocity/page/12",paneConfig:"single",panes:{single:{type:"graph",title:"Velocity vs. Time",xAxis:"/shared/describing-velocity/axes/identify-the-motion-time",yAxis:"/shared/describing-velocity/axes/identify-the-motion-velocity",data:[["identify-the-motion-data",{"line-type":"connected"}]],annotations:["identify-the-motion-labels"]}},beforeText:"<p><b>Correct!</b> From 11 to 20 seconds, the velocity was -5 m/s, which means that the object was moving at a steady rate backward. This corresponds to Segment E.</p>",hideSubmitButton:true,nextButtonShouldSubmit:true,isFinalStep:true},{url:"/shared/describing-velocity/page/13/step/1",activityPage:"/shared/describing-velocity/page/13",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/NASCAR_practice_modified.jpg",caption:"Modified from a public domain U.S. Air Force photo by Larry McTighe"}},beforeText:"<p>Which of these representations can you use to describe the velocity of an object? Choose the best answer.</p>",responseTemplate:"/shared/describing-velocity/response-template/concluding-question-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/13/step/6"}],defaultBranch:"/shared/describing-velocity/page/13/step/2"},{url:"/shared/describing-velocity/page/13/step/2",activityPage:"/shared/describing-velocity/page/13",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/NASCAR_practice_modified.jpg",caption:"Modified from a public domain U.S. Air Force photo by Larry McTighe"}},beforeText:"<p><b>Incorrect.</b></p><p>Hint: What data and words can you use to describe velocity? Try again: </p> <p>Which of these representations can you use to describe the velocity of an object? Choose the best answer.</p>",responseTemplate:"/shared/describing-velocity/response-template/concluding-question-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/13/step/6"}],defaultBranch:"/shared/describing-velocity/page/13/step/3"},{url:"/shared/describing-velocity/page/13/step/3",activityPage:"/shared/describing-velocity/page/13",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/NASCAR_practice_modified.jpg",caption:"Modified from a public domain U.S. Air Force photo by Larry McTighe"}},beforeText:"<p><b>Incorrect.</b></p><p>Hint: Think back on the data you collected and the types of words you used to describe velocity. Try again: </p> <p>Which of these representations can you use to describe the velocity of an object? Choose the best answer.</p>",responseTemplate:"/shared/describing-velocity/response-template/concluding-question-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/13/step/6"}],defaultBranch:"/shared/describing-velocity/page/13/step/4"},{url:"/shared/describing-velocity/page/13/step/4",activityPage:"/shared/describing-velocity/page/13",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/NASCAR_practice_modified.jpg",caption:"Modified from a public domain U.S. Air Force photo by Larry McTighe"}},beforeText:"<p><b>Incorrect.</b></p><p>Hint: In this activity, you used position-time data, velocity time-data, and words to describe velocity. Try again: </p> <p>Which of these representations can you use to describe the velocity of an object? Choose the best answer.</p>",responseTemplate:"/shared/describing-velocity/response-template/concluding-question-responses",submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],5],step:"/shared/describing-velocity/page/13/step/6"}],defaultBranch:"/shared/describing-velocity/page/13/step/5"},{url:"/shared/describing-velocity/page/13/step/5",activityPage:"/shared/describing-velocity/page/13",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/NASCAR_practice_modified.jpg",caption:"Modified from a public domain U.S. Air Force photo by Larry McTighe"}},beforeText:"<p><b>Incorrect.</b></p><p>To describe velocity, you can use a position-time table or graph, a velocity-time table or graph, or descriptive words.</p>",afterText:"<p>This is the end of the activity.</p>",hideSubmitButton:true},{url:"/shared/describing-velocity/page/13/step/6",activityPage:"/shared/describing-velocity/page/13",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/NASCAR_practice_modified.jpg",caption:"Modified from a public domain U.S. Air Force photo by Larry McTighe"}},beforeText:"<p><b>Correct!</b></p><p>To describe velocity, you can use a position-time table or graph, a velocity-time table or graph, or descriptive words.</p>",afterText:"<p>This is the end of the activity.</p>",hideSubmitButton:true}],units:[],axes:[{url:"/shared/describing-velocity/axes/9s",units:"/builtins/units/seconds",min:0,max:9,nSteps:9,label:"Time"},{url:"/shared/describing-velocity/axes/40m",units:"/builtins/units/meters",min:0,max:40,nSteps:8,label:"Position"},{url:"/shared/describing-velocity/axes/car-mps",units:"/builtins/units/meters-per-second",min:-12,max:12,nSteps:12,label:"Velocity"},{url:"/shared/describing-velocity/axes/identify-the-motion-time",units:"/builtins/units/seconds",min:0,max:20,nSteps:20,label:"Time"},{url:"/shared/describing-velocity/axes/identify-the-motion-velocity",units:"/builtins/units/meters-per-second",min:-5,max:5,nSteps:10,label:"Velocity"}],responseTemplates:[{url:"/shared/describing-velocity/response-template/open",activity:"/shared/describing-velocity/",templateString:"",fieldTypes:["textarea"],fieldChoicesList:[null],initialValues:[""]},{url:"/shared/describing-velocity/response-template/numeric",activity:"/shared/describing-velocity/",templateString:"",fieldTypes:["numeric"],fieldChoicesList:[null],initialValues:[]},{url:"/shared/describing-velocity/response-template/velocity-time-question",templateString:"",fieldTypes:["multiplechoice"],fieldChoicesList:[["The resulting segment tilts up and to the right","The resulting segment tilts down and to the left","The resulting segment is horizontal and the velocity is 0","The resulting segment is horizontal and the velocity is positive","The resulting segment is horizontal and the velocity is negative"]],initialValues:[""]},{url:"/shared/describing-velocity/response-template/velocity-time-question-2",templateString:"",fieldTypes:["multiplechoice"],fieldChoicesList:[["When the car moves toward the start line, its velocity is positive","When the car moves toward the start line, its velocity is negative","When the car moves toward the start line, its velocity is 0","When the car moves toward the start line, the velocity is positive then becomes negative","When the car moves toward the start line, the velocity is negative then becomes positive"]],initialValues:[""]},{url:"/shared/describing-velocity/response-template/identify-the-motion-responses",templateString:"",fieldTypes:["multiplechoice"],fieldChoicesList:[["Segment A","Segment B","Segment C","Segment D","Segment E"]],initialValues:[""]},{url:"/shared/describing-velocity/response-template/concluding-question-responses",templateString:"",fieldTypes:["multiplechoice"],fieldChoicesList:[["A position-time table or graph","A velocity-time table or graph","Words such as constant, fast slow, stopped, forward, backward, or changing","Two of the above choices","More than two of the above choices"]],initialValues:[""]}],tags:[{url:"/shared/describing-velocity/tag/first-point",activity:"/shared/describing-velocity",name:"first-point"},{url:"/shared/describing-velocity/tag/second-point",activity:"/shared/describing-velocity",name:"second-point"}],variables:[],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/describing-velocity/datadefs/position-data",name:"position-data",activity:"/shared/describing-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1.25,0],[1.5,0],[1.75,0],[2,0],[2.25,0],[2.5,0],[2.75,0],[3,0],[3.25,0.5],[3.5,1],[3.75,1.5],[4,2],[4.25,2.5],[4.5,3],[4.75,3.5],[5,4],[5.25,4.5],[5.5,5],[5.75,5.5],[6,6],[6.25,8.5],[6.5,11],[6.75,13.5],[7,16],[7.25,18.5],[7.5,21],[7.75,23.5],[8,26],[8.25,28.5],[8.5,31],[8.75,33.5],[9,36]]},{url:"/shared/describing-velocity/datadefs/position-data-hacky-fix",name:"position-data-hacky-fix",activity:"/shared/describing-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,0],[0.001,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1.25,0],[1.5,0],[1.75,0],[2,0],[2.25,0],[2.5,0],[2.75,0],[3,0],[3.25,0.5],[3.5,1],[3.75,1.5],[4,2],[4.25,2.5],[4.5,3],[4.75,3.5],[5,4],[5.25,4.5],[5.5,5],[5.75,5.5],[6,6],[6.25,8.5],[6.5,11],[6.75,13.5],[7,16],[7.25,18.5],[7.5,21],[7.75,23.5],[8,26],[8.25,28.5],[8.5,31],[8.75,33.5],[9,36]]},{url:"/shared/describing-velocity/datadefs/car-in-reverse-position",name:"car-in-reverse-position",activity:"/shared/describing-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,36],[0.1,35.6],[1,32],[2,28],[3,24],[4,20],[5,16],[6,12],[7,8],[8,4],[9,0]]},{url:"/shared/describing-velocity/datadefs/identify-the-motion-data",name:"identify-the-motion-data",activity:"/shared/describing-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters-per-second",yLabel:"Velocity",yShortLabel:"Velocity",points:[[0,0],[4.8,0],[5.2,3],[10.6,3],[11.4,-3],[20,-3]]}]},{type:"FirstOrderDifference",records:[{url:"/shared/describing-velocity/datadefs/car-velocity",name:"car-velocity",activity:"/shared/describing-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters-per-second",yLabel:"Velocity",yShortLabel:"Velocity",source:"/shared/describing-velocity/datadefs/position-data-hacky-fix"},{url:"/shared/describing-velocity/datadefs/car-in-reverse-velocity",name:"car-in-reverse-velocity",activity:"/shared/describing-velocity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters-per-second",yLabel:"Velocity",yShortLabel:"Velocity",source:"/shared/describing-velocity/datadefs/car-in-reverse-position"}]}],annotations:[{type:"Label",records:[{url:"/shared/describing-velocity/annotation/velocity-label-1",name:"velocity-label-1",activity:"/shared/calculated-velocity",text:"Stopped for 3 secs.\nVelocity = 0 m/s",x:1.5,y:0,xOffset:-73,yOffset:-26},{url:"/shared/describing-velocity/annotation/velocity-label-2",name:"velocity-label-2",activity:"/shared/calculated-velocity",text:"Slow, steady for 3 secs.\nVelocity = 2 m/s",x:4.5,y:2,xOffset:-86,yOffset:116},{url:"/shared/describing-velocity/annotation/velocity-label-3",name:"velocity-label-3",activity:"/shared/calculated-velocity",text:"Fast, steady for 3 secs.\nVelocity = 10 m/s",x:7.5,y:10,xOffset:-87,yOffset:79},{url:"/shared/describing-velocity/annotation/segment-a-label",name:"segment-a-label",activity:"/shared/calculated-velocity",text:"Segment A",x:2.5,y:0,xOffset:-50,yOffset:114},{url:"/shared/describing-velocity/annotation/segment-b-label",name:"segment-b-label",activity:"/shared/calculated-velocity",text:"Segment B",x:5,y:1.5,xOffset:-110,yOffset:-62},{url:"/shared/describing-velocity/annotation/segment-c-label",name:"segment-c-label",activity:"/shared/calculated-velocity",text:"Segment C",x:8,y:3,xOffset:-53,yOffset:-20},{url:"/shared/describing-velocity/annotation/segment-d-label",name:"segment-d-label",activity:"/shared/calculated-velocity",text:"Segment D",x:11,y:0,xOffset:23,yOffset:-71},{url:"/shared/describing-velocity/annotation/segment-e-label",name:"segment-e-label",activity:"/shared/calculated-velocity",text:"Segment E",x:15.5,y:-3,xOffset:-51,yOffset:-61}]},{type:"LabelSet",records:[{url:"/shared/describing-velocity/annotation/students-segment-labels",name:"students-segment-labels",activity:"/shared/describing-velocity"},{url:"/shared/describing-velocity/annotation/velocity-labels",name:"velocity-labels",activity:"/shared/describing-velocity",labels:["/shared/describing-velocity/annotation/velocity-label-1","/shared/describing-velocity/annotation/velocity-label-2","/shared/describing-velocity/annotation/velocity-label-3"]},{url:"/shared/describing-velocity/annotation/identify-the-motion-labels",name:"identify-the-motion-labels",activity:"/shared/describing-velocity",labels:["/shared/describing-velocity/annotation/segment-a-label","/shared/describing-velocity/annotation/segment-b-label","/shared/describing-velocity/annotation/segment-c-label","/shared/describing-velocity/annotation/segment-d-label","/shared/describing-velocity/annotation/segment-e-label"]}]},{type:"LineThroughPoints",records:[{url:"/shared/describing-velocity/annotation/slope-line",name:"slope-line",activity:"/shared/describing-velocity",p1Tag:"/shared/describing-velocity/tag/first-point",p2Tag:"/shared/describing-velocity/tag/second-point",color:"#1f77b4"}]},{type:"RiseArrow",records:[{url:"/shared/describing-velocity/annotation/rise-arrow",name:"rise-arrow",activity:"/shared/describing-velocity",color:"#cccccc",p1Tag:"/shared/describing-velocity/tag/first-point",p2Tag:"/shared/describing-velocity/tag/second-point"}]},{type:"RunArrow",records:[{url:"/shared/describing-velocity/annotation/run-arrow",name:"run-arrow",activity:"/shared/describing-velocity",color:"#cccccc",p1Tag:"/shared/describing-velocity/tag/first-point",p2Tag:"/shared/describing-velocity/tag/second-point"}]},{type:"RiseBracket",records:[{url:"/shared/describing-velocity/annotation/rise-bracket",name:"rise-bracket",activity:"/shared/describing-velocity",color:"#cccccc",datadefName:"position-data",p1Tag:"/shared/describing-velocity/tag/first-point",p2Tag:"/shared/describing-velocity/tag/second-point"}]},{type:"RunBracket",records:[{url:"/shared/describing-velocity/annotation/run-bracket",name:"run-bracket",activity:"/shared/describing-velocity",color:"#cccccc",datadefName:"position-data",p1Tag:"/shared/describing-velocity/tag/first-point",p2Tag:"/shared/describing-velocity/tag/second-point"}]},{type:"HighlightedPoint",records:[{url:"/shared/describing-velocity/annotation/p1-highlight",name:"p1-highlight",activity:"/shared/describing-velocity",datadefName:"position-data",tag:"/shared/describing-velocity/tag/first-point",color:"#1f77b4"},{url:"/shared/describing-velocity/annotation/p2-highlight",name:"p2-highlight",activity:"/shared/describing-velocity",datadefName:"position-data",tag:"/shared/describing-velocity/tag/second-point",color:"#ff7f0e"}]},{type:"FreehandSketch",records:[{url:"/shared/describing-velocity/annotation/student-velocity-prediction",name:"student-velocity-prediction",activity:"/shared/describing-velocity",color:"#FF00FF",points:[]}]},{type:"SegmentOverlay",records:[{url:"/shared/describing-velocity/annotation/segment-0-3s",name:"segment-0-3s",activity:"/shared/describing-velocity",datadefName:"position-data",x1Record:0,x2Record:3},{url:"/shared/describing-velocity/annotation/segment-3-6s",name:"segment-3-6s",activity:"/shared/describing-velocity",datadefName:"position-data",x1Record:3,x2Record:6},{url:"/shared/describing-velocity/annotation/segment-6-9s",name:"segment-6-9s",activity:"/shared/describing-velocity",datadefName:"position-data",x1Record:6,x2Record:9}]}]};(function(){Smartgraphs.activityDocs||(Smartgraphs.activityDocs={});Smartgraphs.activityDocs["/shared/gravity"]={_id:"gravity.df6",_rev:1,data_format_version:6,activity:{title:"Was Galileo Right?",url:"/shared/gravity",owner:"shared",pages:["/shared/gravity/page/1","/shared/gravity/page/2","/shared/gravity/page/3","/shared/gravity/page/4","/shared/gravity/page/5","/shared/gravity/page/6","/shared/gravity/page/7","/shared/gravity/page/8","/shared/gravity/page/9","/shared/gravity/page/10","/shared/gravity/page/11","/shared/gravity/page/12","/shared/gravity/page/13","/shared/gravity/page/14"]},pages:[{name:"Introduction",url:"/shared/gravity/page/1",activity:"/shared/gravity",index:1,introText:"<h1>Introduction</h1>\n\n<p>In the 1600s, Galileo Galilei (1564-1642) hypothesized that objects of different masses would fall at the\nsame rate when they were dropped from the same height and allowed to fall freely. According to legend, Galileo\ndropped an iron cannon ball and a wooden ball from the Leaning Tower of Pisa to test his hypothesis.</p>",steps:["/shared/gravity/page/1/step/1"],firstStep:"/shared/gravity/page/1/step/1"},{name:"Predict the Graphs (Light Ball)",url:"/shared/gravity/page/2",activity:"/shared/gravity",index:2,introText:"<h1>Predict the Graphs (Light Ball)</h1>\n\n<p>To test Galileo’s hypothesis, you are going to examine data collected when same-sized balls of different\nmasses were dropped from a fixed height.</p>\n\n<p>To help you predict the motions, find a light ball and heavy ball that are the same size. (The heavy ball\nshould be at least five times heavier than the light ball.)</p>",steps:["/shared/gravity/page/2/step/1","/shared/gravity/page/2/step/2","/shared/gravity/page/2/step/3"],firstStep:"/shared/gravity/page/2/step/1"},{name:"Look at the Data (Light Ball)",url:"/shared/gravity/page/3",activity:"/shared/gravity",index:3,introText:"<h1>Look at the Data (Light Ball)</h1>\n\n<p>The data to the right was collected when a light softball was dropped from a height of about 2 meters.\nEvery second, 20 data samples were collected.</p>",steps:["/shared/gravity/page/3/step/1"],firstStep:"/shared/gravity/page/3/step/1"},{name:"Reflect on Predictions (Light Ball)",url:"/shared/gravity/page/4",activity:"/shared/gravity",index:4,introText:"<h1>Reflect on Predictions (Light Ball)</h1>\n\n<p>To the right is your predicted (red) and actual (blue) position-time and velocity-time data for the light\nball.</p>",steps:["/shared/gravity/page/4/step/1"],firstStep:"/shared/gravity/page/4/step/1"},{name:"Predict the Graphs (Heavy Ball)",url:"/shared/gravity/page/5",activity:"/shared/gravity",index:5,introText:"<h1>Predict the Graphs (Heavy Ball)</h1>",steps:["/shared/gravity/page/5/step/1","/shared/gravity/page/5/step/2"],firstStep:"/shared/gravity/page/5/step/1"},{name:"Look at the Data (Heavy Ball)",url:"/shared/gravity/page/6",activity:"/shared/gravity",index:6,introText:"<h1>Look at the Data (Heavy Ball)</h1>\n\n<p>The data to the right was collected when a heavier softball was dropped from a height of about 2 meters.\nEvery second, 20 data samples were collected.</p>",steps:["/shared/gravity/page/6/step/1"],firstStep:"/shared/gravity/page/6/step/1"},{name:"Reflect on Prediction (Heavy Ball)",url:"/shared/gravity/page/7",activity:"/shared/gravity",index:7,introText:"<h1>Reflect on Prediction (Heavy Ball)</h1>\n\n<p>To the right is your predicted (red) and actual (blue) position-time and velocity-time data for the heavy\nball.</p>",steps:["/shared/gravity/page/7/step/1"],firstStep:"/shared/gravity/page/7/step/1"},{name:"Compare the Data",url:"/shared/gravity/page/8",activity:"/shared/gravity",index:8,introText:"<h1>Compare the Data I</h1>\n\n<p>Look at the actual data for the light ball and the heavy ball.</p>",steps:["/shared/gravity/page/8/step/1","/shared/gravity/page/8/step/2"],firstStep:"/shared/gravity/page/8/step/1"},{name:"Identify the Interval (Light Ball)",url:"/shared/gravity/page/9",activity:"/shared/gravity",index:9,introText:"<h1>Identify the Interval (Light Ball)</h1>\n\n<p>To the right is the actual velocity-time data for the light ball. You will identify the interval where the\nball was falling.</p>",steps:["/shared/gravity/page/9/step/p1","/shared/gravity/page/9/step/p1-incorrect-left","/shared/gravity/page/9/step/p1-incorrect-right","/shared/gravity/page/9/step/p2","/shared/gravity/page/9/step/p2-incorrect-left","/shared/gravity/page/9/step/p2-incorrect-right","/shared/gravity/page/9/step/done"],firstStep:"/shared/gravity/page/9/step/p1"},{name:"Find the Slope (Light Ball)",url:"/shared/gravity/page/10",activity:"/shared/gravity",index:10,introText:"<h1>Find the Slope (Light Ball)</h1>\n\n<p>The slope of a velocity-time graph tells us how the velocity of an object changed over time.</p>\n\n<p>You are going to find the slope of a line that you think best represents the data when the ball was\nfalling.</p>",contextVars:[{name:"initial-velocity",value:["coord","y",["listItem",1,["slopeToolOrder","light-ball-point-1","light-ball-point-2"]]]},{name:"initial-velocity-as-string",value:["toFixedString",["get","initial-velocity"],2]},{name:"final-velocity",value:["coord","y",["listItem",2,["slopeToolOrder","light-ball-point-1","light-ball-point-2"]]]},{name:"final-velocity-as-string",value:["toFixedString",["get","final-velocity"],2]},{name:"delta-velocity",value:["-",["get","final-velocity"],["get","initial-velocity"]]},{name:"delta-velocity-as-string",value:["toFixedString",["get","delta-velocity"],2]},{name:"initial-time",value:["coord","x",["listItem",1,["slopeToolOrder","light-ball-point-1","light-ball-point-2"]]]},{name:"initial-time-as-string",value:["toFixedString",["get","initial-time"],2]},{name:"final-time",value:["coord","x",["listItem",2,["slopeToolOrder","light-ball-point-1","light-ball-point-2"]]]},{name:"final-time-as-string",value:["toFixedString",["get","final-time"],2]},{name:"delta-time",value:["-",["get","final-time"],["get","initial-time"]]},{name:"delta-time-as-string",value:["toFixedString",["get","delta-time"],2]},{name:"slope",value:["/",["get","delta-velocity"],["get","delta-time"]]},{name:"slope-as-string",value:["toFixedString",["get","slope"],2]}],steps:["/shared/gravity/page/10/step/p1","/shared/gravity/page/10/step/p1-incorrect","/shared/gravity/page/10/step/p2","/shared/gravity/page/10/step/p2-incorrect","/shared/gravity/page/10/step/p2-same-as-p1","/shared/gravity/page/10/step/slope-initial","/shared/gravity/page/10/step/slope-initial-hint","/shared/gravity/page/10/step/velocity","/shared/gravity/page/10/step/velocity-hint","/shared/gravity/page/10/step/velocity-giveaway","/shared/gravity/page/10/step/time-velocity-incorrect","/shared/gravity/page/10/step/time-velocity-correct","/shared/gravity/page/10/step/time-hint","/shared/gravity/page/10/step/time-giveaway","/shared/gravity/page/10/step/slope-final-time-incorrect","/shared/gravity/page/10/step/slope-final-time-correct","/shared/gravity/page/10/step/slope-final-giveaway","/shared/gravity/page/10/step/slope-correct"],firstStep:"/shared/gravity/page/10/step/p1"},{name:"Identify the Interval (Heavy Ball)",url:"/shared/gravity/page/11",activity:"/shared/gravity",index:11,introText:"<h1>Identify the Interval (Heavy Ball)</h1>\n\n<p>To the right is the actual velocity-time data for the heavy ball. You will identify the interval where the\nball was falling.</p>",steps:["/shared/gravity/page/11/step/p1","/shared/gravity/page/11/step/p1-incorrect-left","/shared/gravity/page/11/step/p1-incorrect-right","/shared/gravity/page/11/step/p2","/shared/gravity/page/11/step/p2-incorrect-left","/shared/gravity/page/11/step/p2-incorrect-right","/shared/gravity/page/11/step/done"],firstStep:"/shared/gravity/page/11/step/p1"},{name:"Find the Slope (Heavy Ball)",url:"/shared/gravity/page/12",activity:"/shared/gravity",index:12,introText:"<h1>Find the Slope (Heavy Ball)</h1>\n\n<p>The slope of a velocity-time graph tells us how the velocity of an object changed over time.</p>\n\n<p>You are going to find the slope of a line that you think best represents the data when the ball was\nfalling.</p>",contextVars:[{name:"initial-velocity",value:["coord","y",["listItem",1,["slopeToolOrder","heavy-ball-point-1","heavy-ball-point-2"]]]},{name:"initial-velocity-as-string",value:["toFixedString",["get","initial-velocity"],2]},{name:"final-velocity",value:["coord","y",["listItem",2,["slopeToolOrder","heavy-ball-point-1","heavy-ball-point-2"]]]},{name:"final-velocity-as-string",value:["toFixedString",["get","final-velocity"],2]},{name:"delta-velocity",value:["-",["get","final-velocity"],["get","initial-velocity"]]},{name:"delta-velocity-as-string",value:["toFixedString",["get","delta-velocity"],2]},{name:"initial-time",value:["coord","x",["listItem",1,["slopeToolOrder","heavy-ball-point-1","heavy-ball-point-2"]]]},{name:"initial-time-as-string",value:["toFixedString",["get","initial-time"],2]},{name:"final-time",value:["coord","x",["listItem",2,["slopeToolOrder","heavy-ball-point-1","heavy-ball-point-2"]]]},{name:"final-time-as-string",value:["toFixedString",["get","final-time"],2]},{name:"delta-time",value:["-",["get","final-time"],["get","initial-time"]]},{name:"delta-time-as-string",value:["toFixedString",["get","delta-time"],2]},{name:"slope",value:["/",["get","delta-velocity"],["get","delta-time"]]},{name:"slope-as-string",value:["toFixedString",["get","slope"],2]}],steps:["/shared/gravity/page/12/step/p1","/shared/gravity/page/12/step/p1-incorrect","/shared/gravity/page/12/step/p2","/shared/gravity/page/12/step/p2-incorrect","/shared/gravity/page/12/step/p2-same-as-p1","/shared/gravity/page/12/step/slope-initial","/shared/gravity/page/12/step/slope-initial-hint","/shared/gravity/page/12/step/velocity","/shared/gravity/page/12/step/velocity-hint","/shared/gravity/page/12/step/velocity-giveaway","/shared/gravity/page/12/step/time-velocity-incorrect","/shared/gravity/page/12/step/time-velocity-correct","/shared/gravity/page/12/step/time-hint","/shared/gravity/page/12/step/time-giveaway","/shared/gravity/page/12/step/slope-final-time-incorrect","/shared/gravity/page/12/step/slope-final-time-correct","/shared/gravity/page/12/step/slope-final-giveaway","/shared/gravity/page/12/step/slope-correct"],firstStep:"/shared/gravity/page/12/step/p1"},{name:"Compare the Accelerations",url:"/shared/gravity/page/13",activity:"/shared/gravity",index:13,introText:"<h1>Compare the Accelerations</h1>\n\n<p>The slope of a velocity-time graph is commonly called the acceleration. The acceleration of an object due to\ngravity is a constant, called <i>g</i>. The accepted value of <i>g</i> for objects near the surface of the\nEarth is 9.8 m/s<sup>2</sup>.<p>",steps:["/shared/gravity/page/13/step/1","/shared/gravity/page/13/step/2"],firstStep:"/shared/gravity/page/13/step/1"},{name:"Conclusion",url:"/shared/gravity/page/14",activity:"/shared/gravity",index:14,introText:"<h1>Conclusion</h1>\n\n<p>Do heavier objects fall faster?</p>\n\n<p>In this activity, you predicted and confirmed whether a light ball would fall faster than a heavier ball,\njust as Galileo likely did.</p>\n\n<p>According to legend, Galileo observed that the two balls fell at the same rate. He explained that this\nphenomenon was due to the effects of gravity acting on the two balls in a similar way.</p>",steps:["/shared/gravity/page/14/step/1","/shared/gravity/page/14/step/2"],firstStep:"/shared/gravity/page/14/step/1"}],steps:[{url:"/shared/gravity/page/1/step/1",activityPage:"/shared/gravity/page/1",beforeText:"<p>Do heavier objects fall at the same rate as lighter objects?</p>\n\n<p>What do you think Galileo observed? Explain your reasoning.<p>",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/leaning-tower-of-pisa-wide.jpg",caption:'Creative Commons BY-NC-SA 2.0 photo courtesy flickr user **Mary** (<a href="http://www.flickr.com/photos/virgomerry/315412804/">link</a>)'}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/2/step/1",activityPage:"/shared/gravity/page/2",beforeText:"<p>Try dropping each ball from a height of 2 meters.</p>\n\n<p>To the right, predict what you think the <b>position-time</b> graph for the light ball will look like.</p>\n\n<p>(Assume that the ground is at 0 meters.)</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Position vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:[],annotations:["light-ball-position"]},bottom:{type:"graph",title:"Predicted Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:[],annotations:[]}},tools:[{name:"prediction",setup:{pane:"top",uiBehavior:"freehand",annotationName:"light-ball-position"}}],submissibilityDependsOn:["annotation","light-ball-position"],submissibilityCriterion:[">=",["sketchLength","light-ball-position"],0.2],submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/2/step/2"},{url:"/shared/gravity/page/2/step/2",activityPage:"/shared/gravity/page/2",beforeText:"<p>To the right, predict what you think the <b>velocity-time</b> graph for the light ball will look like.</p>\n\n<p>(Assume that the ground is at 0 meters.)</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Position vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:[],annotations:["light-ball-position"]},bottom:{type:"graph",title:"Predicted Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:[],annotations:["light-ball-velocity"]}},tools:[{name:"prediction",setup:{pane:"bottom",uiBehavior:"freehand",annotationName:"light-ball-velocity"}}],submissibilityDependsOn:["annotation","light-ball-velocity"],submissibilityCriterion:[">=",["sketchLength","light-ball-velocity"],0.2],submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/2/step/3"},{url:"/shared/gravity/page/2/step/3",activityPage:"/shared/gravity/page/2",beforeText:"<p>Describe how the ball’s motions are represented on your graphs. Try to use as many words from the word bank\nas possible.</p>\n\n<p><b>Word Bank</b>: ball, released, seconds, meters, position, velocity, increased, decreased, stayed the\nsame, fast, slow, stopped, ground.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Position vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:[],annotations:["light-ball-position"]},bottom:{type:"graph",title:"Predicted Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:[],annotations:["light-ball-velocity"]}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/3/step/1",activityPage:"/shared/gravity/page/3",beforeText:"",paneConfig:"split",panes:{top:{type:"graph",title:"Actual Position vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:["light-ball-position"],annotations:[]},bottom:{type:"graph",title:"Actual Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:[]}},hideSubmitButton:true,isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/4/step/1",activityPage:"/shared/gravity/page/4",beforeText:"<p>How does the actual data for the light ball differ from your predicted data?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:["light-ball-position"],annotations:["light-ball-position"]},bottom:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-velocity"]}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/5/step/1",activityPage:"/shared/gravity/page/5",beforeText:"<p>To the right, predict what you think the <b>position-time</b> graph will look like when the heavy ball is\ndropped from the same height.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Position vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:[],annotations:["heavy-ball-position"]},bottom:{type:"graph",title:"Predicted Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:[],annotations:[]}},tools:[{name:"prediction",setup:{pane:"top",uiBehavior:"freehand",annotationName:"heavy-ball-position"}}],submitButtonTitle:"OK",submissibilityDependsOn:["annotation","heavy-ball-position"],submissibilityCriterion:[">=",["sketchLength","heavy-ball-position"],0.2],defaultBranch:"/shared/gravity/page/5/step/2"},{url:"/shared/gravity/page/5/step/2",activityPage:"/shared/gravity/page/5",beforeText:"<p>To the right, predict what you think the <b>velocity-time</b> graph will look like when the heavy ball is\ndropped from the same height.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Predicted Position vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:[],annotations:["heavy-ball-position"]},bottom:{type:"graph",title:"Predicted Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:[],annotations:["heavy-ball-velocity"]}},tools:[{name:"prediction",setup:{pane:"bottom",uiBehavior:"freehand",annotationName:"heavy-ball-velocity"}}],submissibilityDependsOn:["annotation","heavy-ball-velocity"],submissibilityCriterion:[">=",["sketchLength","heavy-ball-velocity"],0.2],nextButtonShouldSubmit:true,isFinalStep:true},{url:"/shared/gravity/page/6/step/1",activityPage:"/shared/gravity/page/6",beforeText:"",paneConfig:"split",panes:{top:{type:"graph",title:"Actual Position vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:["heavy-ball-position"],annotations:[]},bottom:{type:"graph",title:"Actual Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:[]}},hideSubmitButton:true,isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/7/step/1",activityPage:"/shared/gravity/page/7",beforeText:"<p>What happened to the ball's velocity as it approached the ground? Is this what you expected?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/position",data:["heavy-ball-position"],annotations:["heavy-ball-position"]},bottom:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-velocity"]}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/8/step/1",activityPage:"/shared/gravity/page/8",beforeText:"<p>How does the velocity-time graph of the light ball compare to the velocity-time graph of the heavy ball?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Actual Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:[]},bottom:{type:"graph",title:"Actual Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:[]}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/8/step/2"},{url:"/shared/gravity/page/8/step/2",activityPage:"/shared/gravity/page/8",beforeText:"<p>On each graph, click to label the point where the ball's velocity was fastest.</p>\n",paneConfig:"split",panes:{top:{type:"graph",title:"Actual Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:[]},bottom:{type:"graph",title:"Actual Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:[]}},tools:[{name:"label",setup:{pane:"top",labelName:"light-ball-label"}},{name:"label",setup:{pane:"bottom",labelName:"heavy-ball-label"}}],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/9/step/p1",activityPage:"/shared/gravity/page/9",beforeText:"<p>Click the earliest point at which the ball was in motion.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-label","light-ball-point-1"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-1",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/9/step/p2"},{criterion:[">",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/9/step/p1-incorrect-right"}],defaultBranch:"/shared/gravity/page/9/step/p1-incorrect-left"},{url:"/shared/gravity/page/9/step/p1-incorrect-left",activityPage:"/shared/gravity/page/9",beforeText:"<p>Incorrect. At this point, the ball's velocity was (approximately) 0. Therefore, the ball was not moving. Try\nagain.</p>\n\n<p>Click the earliest point at which the ball was in motion.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-label","light-ball-point-1"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-1",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/9/step/p2"},{criterion:[">",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/9/step/p1-incorrect-right"}],defaultBranch:"/shared/gravity/page/9/step/p1-incorrect-left"},{url:"/shared/gravity/page/9/step/p1-incorrect-right",activityPage:"/shared/gravity/page/9",beforeText:"<p>Incorrect. This point does not represent the beginning of the ball's motion. Try again.</p>\n\n<p>Click the earliest point at which the ball was in motion.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-label","light-ball-point-1"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-1",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/9/step/p2"},{criterion:[">",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/9/step/p1-incorrect-right"}],defaultBranch:"/shared/gravity/page/9/step/p1-incorrect-left"},{url:"/shared/gravity/page/9/step/p2",activityPage:"/shared/gravity/page/9",beforeText:"<p>Correct!</p>\n\n<p>Now, click the point that best represents the ball's velocity when it was closest to the ground.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-label","light-ball-point-1","light-ball-point-2"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-2",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-2"],0.85],step:"/shared/gravity/page/9/step/done"},{criterion:[">=",["coord","x","light-ball-point-2"],0.45],step:"/shared/gravity/page/9/step/p2-incorrect-right"}],defaultBranch:"/shared/gravity/page/9/step/p2-incorrect-left"},{url:"/shared/gravity/page/9/step/p2-incorrect-left",activityPage:"/shared/gravity/page/9",beforeText:"<p>Incorrect. The ball had not yet started to fall at this point. Try again.</p>\n<p>Click the point that best represents the ball's velocity when it was closest to the ground.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-label","light-ball-point-1","light-ball-point-2"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-2",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-2"],0.85],step:"/shared/gravity/page/9/step/done"},{criterion:[">=",["coord","x","light-ball-point-2"],0.45],step:"/shared/gravity/page/9/step/p2-incorrect-right"}],defaultBranch:"/shared/gravity/page/9/step/p2-incorrect-left"},{url:"/shared/gravity/page/9/step/p2-incorrect-right",activityPage:"/shared/gravity/page/9",beforeText:"<p>Incorrect. The ball continued to move closer the ground after this point. Try again.</p>\n\n<p>Click the point that best represents the ball's velocity when it was closest to the ground.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-label","light-ball-point-1","light-ball-point-2"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-2",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-2"],0.85],step:"/shared/gravity/page/9/step/done"},{criterion:[">=",["coord","x","light-ball-point-2"],0.45],step:"/shared/gravity/page/9/step/p2-incorrect-right"}],defaultBranch:"/shared/gravity/page/9/step/p2-incorrect-left"},{url:"/shared/gravity/page/9/step/done",activityPage:"/shared/gravity/page/9",beforeText:"<p>Correct! Here is the interval defined by the points you selected. The ball was falling in this interval.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-label","light-ball-motion-segment","light-ball-point-1","light-ball-point-2"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/10/step/p1",activityPage:"/shared/gravity/page/10",beforeText:"<p>Select a representative point in the highlighted interval. Then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-motion-segment"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-1",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:[">=",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/10/step/p2"}],defaultBranch:"/shared/gravity/page/10/step/p1-incorrect"},{url:"/shared/gravity/page/10/step/p1-incorrect",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. Select a point when the ball was falling (between 0.45 and 0.85 seconds). Then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-motion-segment"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-1",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:[">=",["coord","x","light-ball-point-1"],0.45],step:"/shared/gravity/page/10/step/p2"}],defaultBranch:"/shared/gravity/page/10/step/p1-incorrect"},{url:"/shared/gravity/page/10/step/p2",activityPage:"/shared/gravity/page/10",beforeText:"<p>Select another point in the highlighted interval and then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-motion-segment"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-2",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-2"],["coord","x","light-ball-point-1"]],step:"/shared/gravity/page/10/step/p2-same-as-p1"},{criterion:[">=",["coord","x","light-ball-point-2"],0.45],step:"/shared/gravity/page/10/step/slope-initial"}],defaultBranch:"/shared/gravity/page/10/step/p2-incorrect"},{url:"/shared/gravity/page/10/step/p2-incorrect",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. Select a point when the ball was falling (between 0.45 and 0.85 seconds). Then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-motion-segment"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-2",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-2"],["coord","x","light-ball-point-1"]],step:"/shared/gravity/page/10/step/p2-same-as-p1"},{criterion:[">=",["coord","x","light-ball-point-2"],0.45],step:"/shared/gravity/page/10/step/slope-initial"}],defaultBranch:"/shared/gravity/page/10/step/p2-incorrect"},{url:"/shared/gravity/page/10/step/p2-same-as-p1",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. The point you selected is the same as the first point you selected. You need two different points\nin order to calculate the slope of the line between them. Try again.</p>\n\n<p>Select another point in the highlighted interval and then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-motion-segment"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"light-ball-point-2",data:"light-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","light-ball-point-2"],["coord","x","light-ball-point-1"]],step:"/shared/gravity/page/10/step/p2-same-as-p1"},{criterion:[">=",["coord","x","light-ball-point-2"],0.45],step:"/shared/gravity/page/10/step/slope-initial"}],defaultBranch:"/shared/gravity/page/10/step/p2-incorrect"},{url:"/shared/gravity/page/10/step/slope-initial",activityPage:"/shared/gravity/page/10",beforeText:"<p>To the right, a line has been drawn between the points you selected.</p>\n\n<p>What is the slope of the line between the points you selected, in m/s<sup>2</sup>?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",variableAssignments:[{name:"light-ball-slope-as-string",value:["get","slope-as-string"]}],responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/slope-correct"}],defaultBranch:"/shared/gravity/page/10/step/slope-initial-hint"},{url:"/shared/gravity/page/10/step/slope-initial-hint",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. Hint: Recall that the slope is the change in the velocity at the two points, divided by the\nchange in the time.</p>\n\n<p>What is the slope of the line between the points you selected, in m/s<sup>2</sup>?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/slope-correct"}],defaultBranch:"/shared/gravity/page/10/step/velocity"},{url:"/shared/gravity/page/10/step/velocity",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. What was the change in the velocity of the ball, in m/s?</p>\n\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line"],highlightedAnnotations:["light-ball-rise-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-velocity"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/time-velocity-correct"}],defaultBranch:"/shared/gravity/page/10/step/velocity-hint"},{url:"/shared/gravity/page/10/step/velocity-hint",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. What was the change in the velocity of the ball, in m/s?</p>\n\n\n<p>Hint: Look at the table and the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"],highlightedAnnotations:["light-ball-rise-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-velocity"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/time-velocity-correct"}],defaultBranch:"/shared/gravity/page/10/step/velocity-giveaway"},{url:"/shared/gravity/page/10/step/velocity-giveaway",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. The change in the velocity of the ball was %@ m/s - %@ m/s, or %@ m/s</p>",substitutedExpressions:["final-velocity-as-string","initial-velocity-as-string","delta-velocity-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket"]}},submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/10/step/time-velocity-incorrect"},{url:"/shared/gravity/page/10/step/time-velocity-correct",activityPage:"/shared/gravity/page/10",beforeText:"<p>Correct! What is the change in time between the points you selected, in seconds?</p>\n\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow"],highlightedAnnotations:["light-ball-run-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-time"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/slope-final-time-correct"}],defaultBranch:"/shared/gravity/page/10/step/time-hint"},{url:"/shared/gravity/page/10/step/time-velocity-incorrect",activityPage:"/shared/gravity/page/10",beforeText:"<p>What is the change in time between the points you selected, in seconds?</p>\n\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow"],highlightedAnnotations:["light-ball-run-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-time"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/slope-final-time-correct"}],defaultBranch:"/shared/gravity/page/10/step/time-hint"},{url:"/shared/gravity/page/10/step/time-hint",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. What is the change in time between the points you selected, in seconds?</p>\n\n<p>Hint: Look at the table and the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow","light-ball-run-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket"],highlightedAnnotations:["light-ball-run-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-time"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/slope-final-time-correct"}],defaultBranch:"/shared/gravity/page/10/step/time-giveaway"},{url:"/shared/gravity/page/10/step/time-giveaway",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. The change in time between the points is %@ s - %@ s, or %@ s.</p>",substitutedExpressions:["final-time-as-string","initial-time-as-string","delta-time-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow","light-ball-run-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket","light-ball-run-bracket"]}},submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/10/step/slope-final-time-incorrect"},{url:"/shared/gravity/page/10/step/slope-final-time-correct",activityPage:"/shared/gravity/page/10",beforeText:"<p>Correct! If the change in velocity is %@ m/s during a change in time of %@ s, then what is the slope of the velocity-time graph, in m/s<sup>2</sup>?</p>",substitutedExpressions:["delta-velocity-as-string","delta-time-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow","light-ball-run-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket","light-ball-run-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/slope-correct"}],defaultBranch:"/shared/gravity/page/10/step/slope-final-giveaway"},{url:"/shared/gravity/page/10/step/slope-final-time-incorrect",activityPage:"/shared/gravity/page/10",beforeText:"<p>If the change in velocity is %@ m/s during a change in time of %@ s, then what is the slope of the velocity-time graph, in m/s<sup>2</sup>?</p>",substitutedExpressions:["delta-velocity-as-string","delta-time-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow","light-ball-run-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket","light-ball-run-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/10/step/slope-correct"}],defaultBranch:"/shared/gravity/page/10/step/slope-final-giveaway"},{url:"/shared/gravity/page/10/step/slope-final-giveaway",activityPage:"/shared/gravity/page/10",beforeText:"<p>Incorrect. If the change in velocity is %@ m/s during a change in time of %@ s, then the slope is %@ m/s<sup>2</sup></p>",substitutedExpressions:["delta-velocity-as-string","delta-time-as-string","slope-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-slope-line","light-ball-rise-arrow","light-ball-run-arrow"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2","light-ball-rise-bracket","light-ball-run-bracket"]}},isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/10/step/slope-correct",activityPage:"/shared/gravity/page/10",beforeText:"<p>Correct! The slope of the velocity-time graph between the points you selected is %@ m/s<sup>2</sup>.</p>",substitutedExpressions:["slope-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]},bottom:{type:"table",data:["light-ball-velocity"],annotations:["light-ball-point-1","light-ball-point-2"]}},isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/11/step/p1",activityPage:"/shared/gravity/page/11",beforeText:"<p>Click the earliest point at which the ball was in motion.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-label","heavy-ball-point-1"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-1",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/11/step/p2"},{criterion:[">",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/11/step/p1-incorrect-right"}],defaultBranch:"/shared/gravity/page/11/step/p1-incorrect-left"},{url:"/shared/gravity/page/11/step/p1-incorrect-left",activityPage:"/shared/gravity/page/11",beforeText:"<p>Incorrect. At this point, the ball's velocity was (approximately) 0. Therefore, the ball was not moving. Try\nagain.</p>\n\n<p>Click the earliest point at which the ball was in motion.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-label","heavy-ball-point-1"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-1",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/11/step/p2"},{criterion:[">",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/11/step/p1-incorrect-right"}],defaultBranch:"/shared/gravity/page/11/step/p1-incorrect-left"},{url:"/shared/gravity/page/11/step/p1-incorrect-right",activityPage:"/shared/gravity/page/11",beforeText:"<p>Incorrect. This point does not represent the beginning of the ball's motion. Try again.</p>\n\n<p>Click the earliest point at which the ball was in motion.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-label","heavy-ball-point-1"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-1",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/11/step/p2"},{criterion:[">",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/11/step/p1-incorrect-right"}],defaultBranch:"/shared/gravity/page/11/step/p1-incorrect-left"},{url:"/shared/gravity/page/11/step/p2",activityPage:"/shared/gravity/page/11",beforeText:"<p>Correct!</p>\n\n<p>Now, click the point that best represents the ball's velocity when it was closest to the ground.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-label","heavy-ball-point-1","heavy-ball-point-2"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-2",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-2"],0.9],step:"/shared/gravity/page/11/step/done"},{criterion:[">=",["coord","x","heavy-ball-point-2"],0.45],step:"/shared/gravity/page/11/step/p2-incorrect-right"}],defaultBranch:"/shared/gravity/page/11/step/p2-incorrect-left"},{url:"/shared/gravity/page/11/step/p2-incorrect-left",activityPage:"/shared/gravity/page/11",beforeText:"<p>Incorrect. The ball had not yet started to fall at this point. Try again.</p>\n<p>Click the point that best represents the ball's velocity when it was closest to the ground.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-label","heavy-ball-point-1","heavy-ball-point-2"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-2",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-2"],0.9],step:"/shared/gravity/page/11/step/done"},{criterion:[">=",["coord","x","heavy-ball-point-2"],0.45],step:"/shared/gravity/page/11/step/p2-incorrect-right"}],defaultBranch:"/shared/gravity/page/11/step/p2-incorrect-left"},{url:"/shared/gravity/page/11/step/p2-incorrect-right",activityPage:"/shared/gravity/page/11",beforeText:"<p>Incorrect. The ball continued to move closer the ground after this point. Try again.</p>\n\n<p>Click the point that best represents the ball's velocity when it was closest to the ground.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-label","heavy-ball-point-1","heavy-ball-point-2"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-2",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-2"],0.9],step:"/shared/gravity/page/11/step/done"},{criterion:[">=",["coord","x","heavy-ball-point-2"],0.45],step:"/shared/gravity/page/11/step/p2-incorrect-right"}],defaultBranch:"/shared/gravity/page/11/step/p2-incorrect-left"},{url:"/shared/gravity/page/11/step/done",activityPage:"/shared/gravity/page/11",beforeText:"<p>Correct! Here is the interval defined by the points you selected. The ball was falling in this interval.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-label","heavy-ball-motion-segment","heavy-ball-point-1","heavy-ball-point-2"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/12/step/p1",activityPage:"/shared/gravity/page/12",beforeText:"<p>Select a representative point in the highlighted interval. Then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-motion-segment"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-1",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:[">=",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/12/step/p2"}],defaultBranch:"/shared/gravity/page/12/step/p1-incorrect"},{url:"/shared/gravity/page/12/step/p1-incorrect",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. Select a point when the ball was falling (between 0.45 and 0.9 seconds). Then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-motion-segment"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-1",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:[">=",["coord","x","heavy-ball-point-1"],0.45],step:"/shared/gravity/page/12/step/p2"}],defaultBranch:"/shared/gravity/page/12/step/p1-incorrect"},{url:"/shared/gravity/page/12/step/p2",activityPage:"/shared/gravity/page/12",beforeText:"<p>Select another point in the highlighted interval and then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-motion-segment"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-2",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-2"],["coord","x","heavy-ball-point-1"]],step:"/shared/gravity/page/12/step/p2-same-as-p1"},{criterion:[">=",["coord","x","heavy-ball-point-2"],0.45],step:"/shared/gravity/page/12/step/slope-initial"}],defaultBranch:"/shared/gravity/page/12/step/p2-incorrect"},{url:"/shared/gravity/page/12/step/p2-incorrect",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. Select a point when the ball was falling (between 0.45 and 0.9 seconds). Then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-motion-segment"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-2",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-2"],["coord","x","heavy-ball-point-1"]],step:"/shared/gravity/page/12/step/p2-same-as-p1"},{criterion:[">=",["coord","x","heavy-ball-point-2"],0.45],step:"/shared/gravity/page/12/step/slope-initial"}],defaultBranch:"/shared/gravity/page/12/step/p2-incorrect"},{url:"/shared/gravity/page/12/step/p2-same-as-p1",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. The point you selected is the same as the first point you selected. You need two different points\nin order to calculate the slope of the line between them. Try again.</p>\n\n<p>Select another point in the highlighted interval and then click OK.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-motion-segment"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},tools:[{name:"tagging",setup:{tag:"heavy-ball-point-2",data:"heavy-ball-velocity"}}],hideSubmitButton:false,submitButtonTitle:"OK",responseBranches:[{criterion:["=",["coord","x","heavy-ball-point-2"],["coord","x","heavy-ball-point-1"]],step:"/shared/gravity/page/12/step/p2-same-as-p1"},{criterion:[">=",["coord","x","heavy-ball-point-2"],0.45],step:"/shared/gravity/page/12/step/slope-initial"}],defaultBranch:"/shared/gravity/page/12/step/p2-incorrect"},{url:"/shared/gravity/page/12/step/slope-initial",activityPage:"/shared/gravity/page/12",beforeText:"<p>To the right, a line has been drawn between the points you selected.</p>\n\n<p>What is the slope of the line between the points you selected, in m/s<sup>2</sup>?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",variableAssignments:[{name:"heavy-ball-slope-as-string",value:["get","slope-as-string"]}],responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/slope-correct"}],defaultBranch:"/shared/gravity/page/12/step/slope-initial-hint"},{url:"/shared/gravity/page/12/step/slope-initial-hint",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. Hint: Recall that the slope is the change in the velocity at the two points, divided by the\nchange in the time.</p>\n\n<p>What is the slope of the line between the points you selected, in m/s<sup>2</sup>?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/slope-correct"}],defaultBranch:"/shared/gravity/page/12/step/velocity"},{url:"/shared/gravity/page/12/step/velocity",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. What was the change in the velocity of the ball, in m/s?</p>\n\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line"],highlightedAnnotations:["heavy-ball-rise-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-velocity"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/time-velocity-correct"}],defaultBranch:"/shared/gravity/page/12/step/velocity-hint"},{url:"/shared/gravity/page/12/step/velocity-hint",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. What was the change in the velocity of the ball, in m/s?</p>\n\n\n<p>Hint: Look at the table and the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"],highlightedAnnotations:["heavy-ball-rise-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-velocity"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/time-velocity-correct"}],defaultBranch:"/shared/gravity/page/12/step/velocity-giveaway"},{url:"/shared/gravity/page/12/step/velocity-giveaway",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. The change in the velocity of the ball was %@ m/s - %@ m/s, or %@ m/s</p>",substitutedExpressions:["final-velocity-as-string","initial-velocity-as-string","delta-velocity-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket"]}},submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/12/step/time-velocity-incorrect"},{url:"/shared/gravity/page/12/step/time-velocity-correct",activityPage:"/shared/gravity/page/12",beforeText:"<p>Correct! What is the change in time between the points you selected, in seconds?</p>\n\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow"],highlightedAnnotations:["heavy-ball-run-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-time"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/slope-final-time-correct"}],defaultBranch:"/shared/gravity/page/12/step/time-hint"},{url:"/shared/gravity/page/12/step/time-velocity-incorrect",activityPage:"/shared/gravity/page/12",beforeText:"<p>What is the change in time between the points you selected, in seconds?</p>\n\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow"],highlightedAnnotations:["heavy-ball-run-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-time"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/slope-final-time-correct"}],defaultBranch:"/shared/gravity/page/12/step/time-hint"},{url:"/shared/gravity/page/12/step/time-hint",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. What is the change in time between the points you selected, in seconds?</p>\n\n<p>Hint: Look at the table and the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow","heavy-ball-run-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket"],highlightedAnnotations:["heavy-ball-run-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","delta-time"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/slope-final-time-correct"}],defaultBranch:"/shared/gravity/page/12/step/time-giveaway"},{url:"/shared/gravity/page/12/step/time-giveaway",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. The change in time between the points is %@ s - %@ s, or %@ s.</p>",substitutedExpressions:["final-time-as-string","initial-time-as-string","delta-time-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow","heavy-ball-run-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket","heavy-ball-run-bracket"]}},submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/12/step/slope-final-time-incorrect"},{url:"/shared/gravity/page/12/step/slope-final-time-correct",activityPage:"/shared/gravity/page/12",beforeText:"<p>Correct! If the change in velocity is %@ m/s during a change in time of %@ s, then what is the slope of the velocity-time graph, in m/s<sup>2</sup>?</p>",substitutedExpressions:["delta-velocity-as-string","delta-time-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow","heavy-ball-run-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket","heavy-ball-run-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/slope-correct"}],defaultBranch:"/shared/gravity/page/12/step/slope-final-giveaway"},{url:"/shared/gravity/page/12/step/slope-final-time-incorrect",activityPage:"/shared/gravity/page/12",beforeText:"<p>If the change in velocity is %@ m/s during a change in time of %@ s, then what is the slope of the velocity-time graph, in m/s<sup>2</sup>?</p>",substitutedExpressions:["delta-velocity-as-string","delta-time-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow","heavy-ball-run-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket","heavy-ball-run-bracket"]}},responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],submitButtonTitle:"Check My Answer",responseBranches:[{criterion:["withinAbsTolerance",["get","slope"],["responseField",1],0.1],step:"/shared/gravity/page/12/step/slope-correct"}],defaultBranch:"/shared/gravity/page/12/step/slope-final-giveaway"},{url:"/shared/gravity/page/12/step/slope-final-giveaway",activityPage:"/shared/gravity/page/12",beforeText:"<p>Incorrect. If the change in velocity is %@ m/s during a change in time of %@ s, then the slope is %@ m/s<sup>2</sup></p>",substitutedExpressions:["delta-velocity-as-string","delta-time-as-string","slope-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-slope-line","heavy-ball-rise-arrow","heavy-ball-run-arrow"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2","heavy-ball-rise-bracket","heavy-ball-run-bracket"]}},isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/12/step/slope-correct",activityPage:"/shared/gravity/page/12",beforeText:"<p>Correct! The slope of the velocity-time graph between the points you selected is %@ m/s<sup>2</sup>.</p>",substitutedExpressions:["slope-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]},bottom:{type:"table",data:["heavy-ball-velocity"],annotations:["heavy-ball-point-1","heavy-ball-point-2"]}},isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/13/step/1",activityPage:"/shared/gravity/page/13",beforeText:"<p>Here is the value of <i>g</i> that you found for the light ball: <b>%@ m/s<sup>2</sup></p></b>\n\n<p>Here is the value of <i>g</i> that you found for the heavy ball: <b>%@ m/s<sup>2</sup></p></b>\n\n<p>How does your value compare with the accepted value?</p>",substitutedExpressions:["light-ball-slope-as-string","heavy-ball-slope-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Actual Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:[]},bottom:{type:"graph",title:"Actual Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:[]}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/13/step/2"},{url:"/shared/gravity/page/13/step/2",activityPage:"/shared/gravity/page/13",beforeText:"<p>Here is the value of <i>g</i> that you found for the light ball: <b>%@ m/s<sup>2</sup></p></b>\n\n<p>Here is the value of <i>g</i> that you found for the heavy ball: <b>%@ m/s<sup>2</sup></p></b>\n\n<p>What factors might have caused errors in your measurements?</p>",substitutedExpressions:["light-ball-slope-as-string","heavy-ball-slope-as-string"],paneConfig:"split",panes:{top:{type:"graph",title:"Actual Velocity vs. Time (Light Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["light-ball-velocity"],annotations:[]},bottom:{type:"graph",title:"Actual Velocity vs. Time (Heavy Ball)",xAxis:"/shared/gravity/axes/time",yAxis:"/shared/gravity/axes/velocity",data:["heavy-ball-velocity"],annotations:[]}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/gravity/page/14/step/1",activityPage:"/shared/gravity/page/14",beforeText:"<p>What did you discover about the velocity of a light ball versus a heavy ball as each falls to the\nground?</p>",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/leaning-tower-of-pisa-wide.jpg",caption:'Creative Commons BY-NC-SA 2.0 photo courtesy flickr user **Mary** (<a href="http://www.flickr.com/photos/virgomerry/315412804/">link</a>)'}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],submitButtonTitle:"OK",defaultBranch:"/shared/gravity/page/14/step/2"},{url:"/shared/gravity/page/14/step/2",activityPage:"/shared/gravity/page/14",beforeText:"<p>This is the conclusion of the activity</p>",paneConfig:"single",panes:{single:{type:"image",path:"/static/smartgraphs/en/current/source/resources/images/leaning-tower-of-pisa-wide.jpg",caption:'Creative Commons BY-NC-SA 2.0 photo courtesy flickr user **Mary** (<a href="http://www.flickr.com/photos/virgomerry/315412804/">link</a>)'}},isFinalStep:true,hideSubmitButton:true}],responseTemplates:[{url:"/components/response-template/open",templateString:"",fieldTypes:["textarea"],fieldChoicesList:[null],initialValues:[""]},{url:"/components/response-template/numeric",templateString:"",fieldTypes:["numeric"],fieldChoicesList:[null],initialValues:[""]}],axes:[{url:"/shared/gravity/axes/time",units:"/builtins/units/seconds",min:0,max:1,nSteps:10,label:"Time"},{url:"/shared/gravity/axes/position",units:"/builtins/units/meters",min:0,max:2.4,nSteps:12,label:"Position"},{url:"/shared/gravity/axes/velocity",units:"/builtins/units/meters-per-second",min:-6,max:2,nSteps:8,label:"Velocity"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/gravity/datadefs/light-ball-position",name:"light-ball-position",activity:"/shared/gravity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0.05,1.867],[0.1,1.84],[0.15,1.84],[0.2,1.84],[0.25,1.84],[0.3,1.84],[0.35,1.84],[0.4,1.819],[0.45,1.745],[0.5,1.651],[0.55,1.531],[0.6,1.394],[0.65,1.229],[0.7,1.042],[0.75,0.837],[0.8,0.607],[0.85,0.359]]},{url:"/shared/gravity/datadefs/heavy-ball-position",name:"heavy-ball-position",activity:"/shared/gravity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0.05,1.83],[0.1,1.832],[0.15,1.829],[0.2,1.829],[0.25,1.829],[0.3,1.823],[0.35,1.815],[0.4,1.815],[0.45,1.761],[0.5,1.682],[0.55,1.58],[0.6,1.455],[0.65,1.312],[0.7,1.139],[0.75,0.942],[0.8,0.726],[0.85,0.487],[0.9,0.244]]}]},{type:"FirstOrderDifference",records:[{url:"/shared/gravity/datadefs/light-ball-velocity",name:"light-ball-velocity",activity:"/shared/gravity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters-per-second",yLabel:"Velocity",yShortLabel:"Vel",source:"/shared/gravity/datadefs/light-ball-position",windowLength:4},{url:"/shared/gravity/datadefs/heavy-ball-velocity",name:"heavy-ball-velocity",activity:"/shared/gravity",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters-per-second",yLabel:"Velocity",yShortLabel:"Vel",source:"/shared/gravity/datadefs/heavy-ball-position",windowLength:4}]}],tags:[{url:"/shared/gravity/tag/light-ball-point-1",activity:"/shared/gravity",name:"light-ball-point-1"},{url:"/shared/gravity/tag/light-ball-point-2",activity:"/shared/gravity",name:"light-ball-point-2"},{url:"/shared/gravity/tag/heavy-ball-point-1",activity:"/shared/gravity",name:"heavy-ball-point-1"},{url:"/shared/gravity/tag/heavy-ball-point-2",activity:"/shared/gravity",name:"heavy-ball-point-2"}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/gravity/anotation/light-ball-point-1",name:"light-ball-point-1",activity:"/shared/gravity",datadefName:"light-ball-velocity",tag:"/shared/gravity/tag/light-ball-point-1",color:"#1f77b4"},{url:"/shared/gravity/annotation/light-ball-point-2",name:"light-ball-point-2",activity:"/shared/gravity",datadefName:"light-ball-velocity",tag:"/shared/gravity/tag/light-ball-point-2",color:"#ff7f0e"},{url:"/shared/gravity/annotation/heavy-ball-point-1",name:"heavy-ball-point-1",activity:"/shared/gravity",datadefName:"heavy-ball-velocity",tag:"/shared/gravity/tag/heavy-ball-point-1",color:"#1f77b4"},{url:"/shared/gravity/annotation/heavy-ball-point-2",name:"heavy-ball-point-2",activity:"/shared/gravity",datadefName:"heavy-ball-velocity",tag:"/shared/gravity/tag/heavy-ball-point-2",color:"#ff7f0e"}]},{type:"SegmentOverlay",records:[{url:"/shared/gravity/annotation/light-ball-motion-segment",name:"light-ball-motion-segment",activity:"/shared/gravity",datadefName:"light-ball-velocity",x1Record:0.45,x2Record:0.85},{url:"/shared/gravity/annotation/heavy-ball-motion-segment",name:"heavy-ball-motion-segment",activity:"/shared/gravity",datadefName:"heavy-ball-velocity",x1Record:0.45,x2Record:0.9}]},{type:"LineThroughPoints",records:[{url:"/shared/gravity/annotation/light-ball-slope-line",name:"light-ball-slope-line",activity:"/shared/gravity",p1Tag:"/shared/gravity/tag/light-ball-point-1",p2Tag:"/shared/gravity/tag/light-ball-point-2",color:"#1f77b4"},{url:"/shared/gravity/annotation/heavy-ball-slope-line",name:"heavy-ball-slope-line",activity:"/shared/gravity",p1Tag:"/shared/gravity/tag/heavy-ball-point-1",p2Tag:"/shared/gravity/tag/heavy-ball-point-2",color:"#1f77b4"}]},{type:"RiseArrow",records:[{url:"/shared/gravity/annotation/light-ball-rise-arrow",name:"light-ball-rise-arrow",activity:"/shared/gravity",color:"#cccccc",p1Tag:"/shared/gravity/tag/light-ball-point-1",p2Tag:"/shared/gravity/tag/light-ball-point-2"},{url:"/shared/gravity/annotation/heavy-ball-rise-arrow",name:"heavy-ball-rise-arrow",activity:"/shared/gravity",color:"#cccccc",p1Tag:"/shared/gravity/tag/heavy-ball-point-1",p2Tag:"/shared/gravity/tag/heavy-ball-point-2"}]},{type:"RunArrow",records:[{url:"/shared/gravity/annotation/light-ball-run-arrow",name:"light-ball-run-arrow",activity:"/shared/gravity",color:"#cccccc",p1Tag:"/shared/gravity/tag/light-ball-point-1",p2Tag:"/shared/gravity/tag/light-ball-point-2"},{url:"/shared/gravity/annotation/heavy-ball-run-arrow",name:"heavy-ball-run-arrow",activity:"/shared/gravity",color:"#cccccc",p1Tag:"/shared/gravity/tag/heavy-ball-point-1",p2Tag:"/shared/gravity/tag/heavy-ball-point-2"}]},{type:"RiseBracket",records:[{url:"/shared/gravity/annotation/light-ball-rise-bracket",name:"light-ball-rise-bracket",activity:"/shared/gravity",color:"#cccccc",datadefName:"light-ball-velocity",p1Tag:"/shared/gravity/tag/light-ball-point-1",p2Tag:"/shared/gravity/tag/light-ball-point-2"},{url:"/shared/gravity/annotation/heavy-ball-rise-bracket",name:"heavy-ball-rise-bracket",activity:"/shared/gravity",color:"#cccccc",datadefName:"heavy-ball-velocity",p1Tag:"/shared/gravity/tag/heavy-ball-point-1",p2Tag:"/shared/gravity/tag/heavy-ball-point-2"}]},{type:"RunBracket",records:[{url:"/shared/gravity/annotation/light-ball-run-bracket",name:"light-ball-run-bracket",activity:"/shared/gravity",color:"#cccccc",datadefName:"light-ball-velocity",p1Tag:"/shared/gravity/tag/light-ball-point-1",p2Tag:"/shared/gravity/tag/light-ball-point-2"},{url:"/shared/gravity/annotation/heavy-ball-run-bracket",name:"heavy-ball-run-bracket",activity:"/shared/gravity",color:"#cccccc",datadefName:"heavy-ball-velocity",p1Tag:"/shared/gravity/tag/heavy-ball-point-1",p2Tag:"/shared/gravity/tag/heavy-ball-point-2"}]},{type:"FreehandSketch",records:[{url:"/shared/gravity/annotation/light-ball-position",name:"light-ball-position",activity:"/shared/gravity",color:"#CC0000",points:[]},{url:"/shared/gravity/annotation/light-ball-velocity",name:"light-ball-velocity",activity:"/shared/gravity",color:"#CC0000",points:[]},{url:"/shared/gravity/annotation/heavy-ball-position",name:"heavy-ball-position",activity:"/shared/gravity",color:"#CC0000",points:[]},{url:"/shared/gravity/annotation/heavy-ball-velocity",name:"heavy-ball-velocity",activity:"/shared/gravity",color:"#CC0000",points:[]}]},{type:"Label",records:[{url:"/shared/gravity/annotation/light-ball-label",name:"light-ball-label",activity:"/shared/gravity",text:"Fastest point"},{url:"/shared/gravity/annotation/heavy-ball-label",name:"heavy-ball-label",activity:"/shared/gravity",text:"Fastest point"}]}],variables:[],units:[]}}).call(this);Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/instantaneous-speed"]={_id:"instantanous-speed.df6",_rev:"0",data_format_version:6,activity:{title:"Instantaneous Speed (Slope Tool)",url:"/shared/instantaneous-speed",owner:"shared",pages:["/shared/instantaneous-speed/page/1","/shared/instantaneous-speed/page/2","/shared/instantaneous-speed/page/3"],datasets:["/shared/instantaneous-speed/dataset/slope-data"],units:[],axes:["/shared/instantaneous-speed/axes/10s","/shared/instantaneous-speed/axes/16m"],graphs:[],responseTemplates:["/components/response-template/open","/components/response-template/numeric"]},pages:[{name:"Instantaneous Speed I",url:"/shared/instantaneous-speed/page/1",activity:"/shared/instantaneous-speed",index:1,introText:"<h1>Analysis</h1><p>Suppose you collected some actual position-time data while walking from 0 to 15 meters and displayed your data to the right. Let's find out how fast you walked during different time intervals.</p><p>First you will pick two points that are next to each other and find the velocity between those points. This calculation will be close to your <b>instantaneous</b> velocity. </p>",steps:["/shared/instantaneous-speed/page/1/step/1","/shared/instantaneous-speed/page/1/step/2","/shared/instantaneous-speed/page/1/step/3","/shared/instantaneous-speed/page/1/step/4","/shared/instantaneous-speed/page/1/step/5","/shared/instantaneous-speed/page/1/step/6","/shared/instantaneous-speed/page/1/step/7","/shared/instantaneous-speed/page/1/step/8","/shared/instantaneous-speed/page/1/step/9","/shared/instantaneous-speed/page/1/step/10","/shared/instantaneous-speed/page/1/step/11","/shared/instantaneous-speed/page/1/step/12","/shared/instantaneous-speed/page/1/step/13","/shared/instantaneous-speed/page/1/step/14","/shared/instantaneous-speed/page/1/step/15","/shared/instantaneous-speed/page/1/step/16"],firstStep:"/shared/instantaneous-speed/page/1/step/1",contextVars:[{name:"start-position",value:["coord","y",["listItem",1,["slopeToolOrder","first-point-A","second-point-A"]]]},{name:"end-position",value:["coord","y",["listItem",2,["slopeToolOrder","first-point-A","second-point-A"]]]},{name:"change-position",value:["-",["get","end-position"],["get","start-position"]]},{name:"change-position-units",value:["pluralizeUnits","/builtins/units/meters",["get","change-position"]]},{name:"start-time",value:["coord","x",["listItem",1,["slopeToolOrder","first-point-A","second-point-A"]]]},{name:"end-time",value:["coord","x",["listItem",2,["slopeToolOrder","first-point-A","second-point-A"]]]},{name:"change-time",value:["-",["get","end-time"],["get","start-time"]]},{name:"change-time-units",value:["pluralizeUnits","/builtins/units/seconds",["get","change-time"]]},{name:"velocity",value:["/",["get","change-position"],["get","change-time"]]},{name:"velocity-units",value:["pluralizeUnits","/builtins/units/meters-per-second",["get","velocity"]]}]},{name:"Instantaneous Speed II",url:"/shared/instantaneous-speed/page/2",activity:"/shared/instantaneous-speed",index:2,introText:"<h1>Analysis</h1><p>Now you will pick another set of points that are next to each other and find the velocity between those points.</p>",steps:["/shared/instantaneous-speed/page/2/step/1","/shared/instantaneous-speed/page/2/step/1a","/shared/instantaneous-speed/page/2/step/2","/shared/instantaneous-speed/page/2/step/3","/shared/instantaneous-speed/page/2/step/4","/shared/instantaneous-speed/page/2/step/5","/shared/instantaneous-speed/page/2/step/6","/shared/instantaneous-speed/page/2/step/7","/shared/instantaneous-speed/page/2/step/8","/shared/instantaneous-speed/page/2/step/9","/shared/instantaneous-speed/page/2/step/10","/shared/instantaneous-speed/page/2/step/11","/shared/instantaneous-speed/page/2/step/12","/shared/instantaneous-speed/page/2/step/13","/shared/instantaneous-speed/page/2/step/14","/shared/instantaneous-speed/page/2/step/15","/shared/instantaneous-speed/page/2/step/16"],firstStep:"/shared/instantaneous-speed/page/2/step/1",contextVars:[{name:"start-position",value:["coord","y",["listItem",1,["slopeToolOrder","first-point-B","second-point-B"]]]},{name:"end-position",value:["coord","y",["listItem",2,["slopeToolOrder","first-point-B","second-point-B"]]]},{name:"change-position",value:["-",["get","end-position"],["get","start-position"]]},{name:"change-position-units",value:["pluralizeUnits","/builtins/units/meters",["get","change-position"]]},{name:"start-time",value:["coord","x",["listItem",1,["slopeToolOrder","first-point-B","second-point-B"]]]},{name:"end-time",value:["coord","x",["listItem",2,["slopeToolOrder","first-point-B","second-point-B"]]]},{name:"change-time",value:["-",["get","end-time"],["get","start-time"]]},{name:"change-time-units",value:["pluralizeUnits","/builtins/units/seconds",["get","change-time"]]},{name:"velocity",value:["/",["get","change-position"],["get","change-time"]]},{name:"velocity-units",value:["pluralizeUnits","/builtins/units/meters-per-second",["get","velocity"]]}]},{name:"Instantaneous Speed III",url:"/shared/instantaneous-speed/page/3",activity:"/shared/instantaneous-speed",index:3,steps:["/shared/instantaneous-speed/page/3/step/1"],firstStep:"/shared/instantaneous-speed/page/3/step/1",introText:"<h1>Analysis</h1><p>Was your velocity the same during the two different time intervals? If not, during which interval were you going faster? Explain how you know.</p>"}],steps:[{url:"/shared/instantaneous-speed/page/1/step/1",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Select a point and then click <b>OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"first-point-A",data:"slope-data"}}],defaultBranch:"/shared/instantaneous-speed/page/1/step/2",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/2",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Select a point next to to the first point. Then click <b>OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point-A",data:"slope-data"}}],responseBranches:[{criterion:["=",1,["absDiff",["indexInDataset","first-point-A"],["indexInDataset","second-point-A"]]],step:"/shared/instantaneous-speed/page/1/step/4"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/3",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/3",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>To calculate velocity in a small time interval, select a point that is next to the first point. Then click <b>OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point-A",data:"slope-data"}}],responseBranches:[{criterion:["=",1,["absDiff",["indexInDataset","first-point-A"],["indexInDataset","second-point-A"]]],step:"/shared/instantaneous-speed/page/1/step/4"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/3",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/4",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Here is the line connecting the two points you selected. The velocity during this interval is the slope of this line.</p><p>What is the <b>velocity</b> between the two points, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-A","second-point-A"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/5",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/5",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the <b>velocity</b> between the two points, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-A","second-point-A"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/6",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/6",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],highlightedAnnotations:["rise-arrow-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the change in position?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point-A","second-point-A"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/10"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/7",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/7",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],highlightedAnnotations:["rise-arrow-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],highlightedAnnotations:["rise-bracket-A"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the change in position?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Look at the table and the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point-A","second-point-A"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/10"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/8",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/8",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],highlightedAnnotations:["rise-arrow-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],highlightedAnnotations:["rise-bracket-A"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect. The change in position is <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-position","start-position","change-position","change-position-units"],defaultBranch:"/shared/instantaneous-speed/page/1/step/9",submitButtonTitle:"Continue"},{url:"/shared/instantaneous-speed/page/1/step/9",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A","rise-arrow-A"],highlightedAnnotations:["run-arrow-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["rise-bracket-A","p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>What is the change in time? </p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint:Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point-A","second-point-A"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/13"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/11",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/10",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A","rise-arrow-A"],highlightedAnnotations:["run-arrow-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["rise-bracket-A","p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Correct!</p><p>What is the change in time? </p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint:Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point-A","second-point-A"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/13"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/11",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/11",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A","rise-arrow-A"],highlightedAnnotations:["run-arrow-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["rise-bracket-A","p1A-highlight","p2A-highlight"],highlightedAnnotations:["run-bracket-A"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the change in time?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Look at the table and the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point-A","second-point-A"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/13"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/12",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/12",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A","rise-arrow-A"],highlightedAnnotations:["run-arrow-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["rise-bracket-A","p1A-highlight","p2A-highlight"],highlightedAnnotations:["run-bracket-A"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect. The change in time is <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-time","start-time","change-time","change-time-units"],defaultBranch:"/shared/instantaneous-speed/page/1/step/13",submitButtonTitle:"Continue"},{url:"/shared/instantaneous-speed/page/1/step/13",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>If the change in position is <b>%@</b> %@ and the change in time is <b>%@</b> %@, what is the velocity, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-A","second-point-A"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/14",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/14",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>If the change in position is <b>%@</b> %@ and the change in time is <b>%@</b> %@, what is the velocity, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-A","second-point-A"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/1/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/1/step/15",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/1/step/15",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>If the change in position is <b>%@</b> %@ and the change in time is <b>%@</b> %@, the velocity is <b>%@</b> divided by <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units","change-position","change-time","velocity","velocity-units"],shouldFinishImmediately:true,isFinalStep:true,hideSubmitButton:true},{url:"/shared/instantaneous-speed/page/1/step/16",activityPage:"/shared/instantaneous-speed/page/1",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-highlight","p2A-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Correct!</p><p>The position changed <b>%@</b> %@ in <b>%@</b> %@, so the velocity was <b>%@</b> %@.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units","velocity","velocity-units"],shouldFinishImmediately:true,isFinalStep:true,hideSubmitButton:true},{url:"/shared/instantaneous-speed/page/2/step/1",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Choose a point that is different from those you selected earlier. Then click <b>OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"first-point-B",data:"slope-data"}}],responseBranches:[{criterion:["or",["samePoint","first-point-B","first-point-A"],["samePoint","first-point-B","second-point-A"]],step:"/shared/instantaneous-speed/page/2/step/1a"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/2",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/1a",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Try again.</p><p>Choose a point that is <b>different</b> from those you selected earlier. Then click <b>OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"first-point-B",data:"slope-data"}}],responseBranches:[{criterion:["or",["samePoint","first-point-B","first-point-A"],["samePoint","first-point-B","second-point-A"]],step:"/shared/instantaneous-speed/page/2/step/1a"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/2",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/2",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Select a point next to to the first point. Then click <b>OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point-B",data:"slope-data"}}],responseBranches:[{criterion:["=",1,["absDiff",["indexInDataset","first-point-B"],["indexInDataset","second-point-B"]]],step:"/shared/instantaneous-speed/page/2/step/4"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/3",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/3",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>To calculate velocity in a small time interval, select a point that is next to the first point. Then click <b>OK</b>.</p>",tools:[{name:"tagging",setup:{tag:"second-point-B",data:"slope-data"}}],responseBranches:[{criterion:["=",1,["absDiff",["indexInDataset","first-point-B"],["indexInDataset","second-point-B"]]],step:"/shared/instantaneous-speed/page/2/step/4"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/3",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/4",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Here is the line connecting the two points you selected. The velocity during this interval is the slope of this line.</p><p>What is the <b>velocity</b> between the two points, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-B","second-point-B"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/5",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/5",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the <b>velocity</b> between the two points, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-B","second-point-B"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/6",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/6",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],highlightedAnnotations:["rise-arrow-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the change in position?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point-B","second-point-B"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/10"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/7",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/7",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],highlightedAnnotations:["rise-arrow-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],highlightedAnnotations:["rise-bracket-B"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the change in position?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Look at the table and the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","first-point-B","second-point-B"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/10"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/8",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/8",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],highlightedAnnotations:["rise-arrow-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],highlightedAnnotations:["rise-bracket-B"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect. The change in position is <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-position","start-position","change-position","change-position-units"],defaultBranch:"/shared/instantaneous-speed/page/2/step/9",submitButtonTitle:"Continue"},{url:"/shared/instantaneous-speed/page/2/step/9",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B","rise-arrow-B"],highlightedAnnotations:["run-arrow-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","rise-bracket-B"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>What is the change in time? </p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint:Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point-B","second-point-B"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/13"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/11",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/10",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B","rise-arrow-B"],highlightedAnnotations:["run-arrow-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","rise-bracket-B"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Correct!</p><p>What is the change in time? </p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint:Look at the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point-B","second-point-B"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/13"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/11",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/11",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B","rise-arrow-B"],highlightedAnnotations:["run-arrow-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","rise-bracket-B"],highlightedAnnotations:["run-bracket-B"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>What is the change in time?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Look at the table and the graph.</p>",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","first-point-B","second-point-B"]],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/13"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/12",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/12",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B","rise-arrow-B"],highlightedAnnotations:["run-arrow-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","rise-bracket-B"],highlightedAnnotations:["run-bracket-B"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect. The change in time is <b>%@</b> - <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["end-time","start-time","change-time","change-time-units"],defaultBranch:"/shared/instantaneous-speed/page/2/step/13",submitButtonTitle:"Continue"},{url:"/shared/instantaneous-speed/page/2/step/13",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>If the change in position is <b>%@</b> %@ and the change in time is <b>%@</b> %@, what is the velocity, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-B","second-point-B"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/14",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/14",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>If the change in position is <b>%@</b> %@ and the change in time is <b>%@</b> %@, what is the velocity, in meters per second?</p>",responseTemplate:"/components/response-template/numeric",afterText:"<p>Hint: Recall that velocity is the change in position divided by the change in time.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units"],submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["slope","first-point-B","second-point-B"],["responseField",1],0.1],step:"/shared/instantaneous-speed/page/2/step/16"}],defaultBranch:"/shared/instantaneous-speed/page/2/step/15",submitButtonTitle:"OK"},{url:"/shared/instantaneous-speed/page/2/step/15",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Incorrect.</p><p>If the change in position is <b>%@</b> %@ and the change in time is <b>%@</b> %@, the velocity is <b>%@</b> divided by <b>%@</b>, or <b>%@</b> %@.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units","change-position","change-time","velocity","velocity-units"],shouldFinishImmediately:true,isFinalStep:true,hideSubmitButton:true},{url:"/shared/instantaneous-speed/page/2/step/16",activityPage:"/shared/instantaneous-speed/page/2",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight","slope-line-B"],activeDatadefs:["slope-data"]},bottom:{type:"table",data:"slope-data",annotations:["p1A-blocker","p2A-blocker","p1B-highlight","p2B-highlight"],xLabel:"Time",yLabel:"Position"}},beforeText:"<p>Correct!</p><p>The position changed <b>%@</b> %@ in <b>%@</b> %@, so the velocity was <b>%@</b> %@.</p>",substitutedExpressions:["change-position","change-position-units","change-time","change-time-units","velocity","velocity-units"],shouldFinishImmediately:true,isFinalStep:true,hideSubmitButton:true},{url:"/shared/instantaneous-speed/page/3/step/1",activityPage:"/shared/instantaneous-speed/page/3",paneConfig:"split",panes:{top:{type:"graph",title:"Position vs. Time",xAxis:"/shared/instantaneous-speed/axes/10s",yAxis:"/shared/instantaneous-speed/axes/16m",data:["slope-data"],annotations:["p1A-highlight","p2A-highlight","slope-line-A","p1B-highlight","p2B-highlight","slope-line-B"],activeDatadefs:["slope-data"]}},responseTemplate:"/components/response-template/open",submissibilityCriterion:["textLengthIsAtLeast",1,["responseField",1]],isFinalStep:true,hideSubmitButton:true,nextButtonShouldSubmit:true}],units:[],axes:[{url:"/shared/instantaneous-speed/axes/10s",units:"/builtins/units/seconds",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/instantaneous-speed/axes/16m",units:"/builtins/units/meters",min:0,max:16,nSteps:8,label:"Position"}],variables:[],responseTemplates:[{url:"/components/response-template/open",templateString:"",fieldTypes:["textarea"],fieldChoicesList:[null],initialValues:[""]},{url:"/components/response-template/numeric",templateString:"",fieldTypes:["numeric"],fieldChoicesList:[null],initialValues:[]}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/instantaneous-speed/datadef/slope-data",name:"slope-data",activity:"/shared/instantaneous-speed",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,0],[1,2],[2,4],[3,5],[4,6],[5,4],[6,8],[7,10],[8,11],[9,12],[10,15]]}]}],tags:[{url:"/shared/instantaneous-speed/tag/first-point-A",activity:"/shared/instantaneous-speed",name:"first-point-A"},{url:"/shared/instantaneous-speed/tag/second-point-A",activity:"/shared/instantaneous-speed",name:"second-point-A"},{url:"/shared/instantaneous-speed/tag/first-point-B",activity:"/shared/instantaneous-speed",name:"first-point-B"},{url:"/shared/instantaneous-speed/tag/second-point-B",activity:"/shared/instantaneous-speed",name:"second-point-B"}],annotations:[{type:"LineThroughPoints",records:[{url:"/shared/instantaneous-speed/annotation/slope-line-A",name:"slope-line-A",activity:"/shared/instantaneous-speed",p1Tag:"/shared/instantaneous-speed/tag/first-point-A",p2Tag:"/shared/instantaneous-speed/tag/second-point-A",color:"#1f77b4"},{url:"/shared/instantaneous-speed/annotation/slope-line-B",name:"slope-line-B",activity:"/shared/instantaneous-speed",p1Tag:"/shared/instantaneous-speed/tag/first-point-B",p2Tag:"/shared/instantaneous-speed/tag/second-point-B",color:"#ff7f0d"}]},{type:"RiseArrow",records:[{url:"/shared/instantaneous-speed/annotation/rise-arrow-A",name:"rise-arrow-A",activity:"/shared/instantaneous-speed",color:"#cccccc",p1Tag:"/shared/instantaneous-speed/tag/first-point-A",p2Tag:"/shared/instantaneous-speed/tag/second-point-A"},{url:"/shared/instantaneous-speed/annotation/rise-arrow-B",name:"rise-arrow-B",activity:"/shared/instantaneous-speed",color:"#cccccc",p1Tag:"/shared/instantaneous-speed/tag/first-point-B",p2Tag:"/shared/instantaneous-speed/tag/second-point-B"}]},{type:"RunArrow",records:[{url:"/shared/instantaneous-speed/annotation/run-arrow-A",name:"run-arrow-A",activity:"/shared/instantaneous-speed",color:"#cccccc",p1Tag:"/shared/instantaneous-speed/tag/first-point-A",p2Tag:"/shared/instantaneous-speed/tag/second-point-A"},{url:"/shared/instantaneous-speed/annotation/run-arrow-B",name:"run-arrow-B",activity:"/shared/instantaneous-speed",color:"#cccccc",p1Tag:"/shared/instantaneous-speed/tag/first-point-B",p2Tag:"/shared/instantaneous-speed/tag/second-point-B"}]},{type:"RiseBracket",records:[{url:"/shared/instantaneous-speed/annotation/rise-bracket-A",name:"rise-bracket-A",activity:"/shared/instantaneous-speed",color:"#cccccc",datadefName:"slope-data",p1Tag:"/shared/instantaneous-speed/tag/first-point-A",p2Tag:"/shared/instantaneous-speed/tag/second-point-A"},{url:"/shared/instantaneous-speed/annotation/rise-bracket-B",name:"rise-bracket-B",activity:"/shared/instantaneous-speed",color:"#cccccc",datadefName:"slope-data",p1Tag:"/shared/instantaneous-speed/tag/first-point-B",p2Tag:"/shared/instantaneous-speed/tag/second-point-B"}]},{type:"RunBracket",records:[{url:"/shared/instantaneous-speed/annotation/run-bracket-A",name:"run-bracket-A",activity:"/shared/instantaneous-speed",color:"#cccccc",datadefName:"slope-data",p1Tag:"/shared/instantaneous-speed/tag/first-point-A",p2Tag:"/shared/instantaneous-speed/tag/second-point-A"},{url:"/shared/instantaneous-speed/annotation/run-bracket-B",name:"run-bracket-B",activity:"/shared/instantaneous-speed",color:"#cccccc",datadefName:"slope-data",p1Tag:"/shared/instantaneous-speed/tag/first-point-B",p2Tag:"/shared/instantaneous-speed/tag/second-point-B"}]},{type:"HighlightedPoint",records:[{url:"/shared/instantaneous-speed/annotation/p1A-highlight",name:"p1A-highlight",activity:"/shared/instantaneous-speed",datadefName:"slope-data",tag:"/shared/instantaneous-speed/tag/first-point-A",color:"#1f77b4"},{url:"/shared/instantaneous-speed/annotation/p2A-highlight",name:"p2A-highlight",activity:"/shared/instantaneous-speed",datadefName:"slope-data",tag:"/shared/instantaneous-speed/tag/second-point-A",color:"#ff7f0e"},{url:"/shared/instantaneous-speed/annotation/p1B-highlight",name:"p1B-highlight",activity:"/shared/instantaneous-speed",datadefName:"slope-data",tag:"/shared/instantaneous-speed/tag/first-point-B",color:"#1f77b4"},{url:"/shared/instantaneous-speed/annotation/p2B-highlight",name:"p2B-highlight",activity:"/shared/instantaneous-speed",datadefName:"slope-data",tag:"/shared/instantaneous-speed/tag/second-point-B",color:"#ff7f0e"},{url:"/shared/instantaneous-speed/annotation/p1A-blocker",name:"p1A-blocker",activity:"/shared/instantaneous-speed",datadefName:"slope-data",tag:"/shared/instantaneous-speed/tag/first-point-A",color:"#f2b3b3"},{url:"/shared/instantaneous-speed/annotation/p2A-blocker",name:"p2A-blocker",activity:"/shared/instantaneous-speed",datadefName:"slope-data",tag:"/shared/instantaneous-speed/tag/second-point-A",color:"#f2b3b3"}]}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/label-stories-label-a-point"]={_id:"label-stories-label-a-point.df6",_rev:1,data_format_version:6,activity:{title:"Label Stories Label A Point",url:"/shared/label-stories-label-a-point",owner:"shared",pages:["/shared/label-stories-label-a-point/page/1-1-first-page","/shared/label-stories-label-a-point/page/2-2-second-page"],axes:["/shared/label-stories-label-a-point/axes/1","/shared/label-stories-label-a-point/axes/2","/shared/label-stories-label-a-point/axes/3","/shared/label-stories-label-a-point/axes/4"],authorName:"Richard Klancer"},pages:[{name:"1 First Page",url:"/shared/label-stories-label-a-point/page/1-1-first-page",activity:"/shared/label-stories-label-a-point",index:1,introText:"The following is a graph of <em>0.8 sin(x)</em>.",steps:["/shared/label-stories-label-a-point/page/1-1-first-page/step/1","/shared/label-stories-label-a-point/page/1-1-first-page/step/2","/shared/label-stories-label-a-point/page/1-1-first-page/step/3","/shared/label-stories-label-a-point/page/1-1-first-page/step/4"],firstStep:"/shared/label-stories-label-a-point/page/1-1-first-page/step/1",contextVars:[]},{name:"2 Second Page",url:"/shared/label-stories-label-a-point/page/2-2-second-page",activity:"/shared/label-stories-label-a-point",index:2,introText:"The following is a graph of <em>0.8 sin(x)</em>, with the point you labeled.",steps:["/shared/label-stories-label-a-point/page/2-2-second-page/step/1"],firstStep:"/shared/label-stories-label-a-point/page/2-2-second-page/step/1",contextVars:[]}],steps:[{url:"/shared/label-stories-label-a-point/page/1-1-first-page/step/1",activityPage:"/shared/label-stories-label-a-point/page/1-1-first-page",beforeText:"Label the <em>maximum</em> of the function",paneConfig:"split",panes:{top:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-a-point/axes/1",yAxis:"/shared/label-stories-label-a-point/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["highlighted-point-1"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]},bottom:{type:"table",data:"0.8 sin(x)",xLabel:"Time (s)",yLabel:"Distance (m)",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"label",setup:{pane:"top",labelName:"labeled-point",markOnDataPoints:true,datadefName:"0.8 sin(x)",allowCoordinatesChange:true}},{name:"tagging",setup:{tag:"tag-1",data:"0.8 sin(x)",labelName:"labeled-point"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/label-stories-label-a-point/page/1-1-first-page/step/2",responseBranches:[{criterion:["coordinatesInRange","tag-1",1.51,0.75,1.69,0.85],step:"/shared/label-stories-label-a-point/page/1-1-first-page/step/4"}],isFinalStep:false},{url:"/shared/label-stories-label-a-point/page/1-1-first-page/step/2",activityPage:"/shared/label-stories-label-a-point/page/1-1-first-page",beforeText:"Remember that the maximum point of a function is the point on the function's graph at which the <em>y-value</em> of the function is larger than it is anywhere else.",paneConfig:"split",panes:{top:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-a-point/axes/1",yAxis:"/shared/label-stories-label-a-point/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["highlighted-point-1","labeled-point"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]},bottom:{type:"table",data:"0.8 sin(x)",xLabel:"Time (s)",yLabel:"Distance (m)",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"label",setup:{pane:"top",labelName:"labeled-point",markOnDataPoints:true,datadefName:"0.8 sin(x)",allowCoordinatesChange:true}},{name:"tagging",setup:{tag:"tag-1",data:"0.8 sin(x)",labelName:"labeled-point"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/label-stories-label-a-point/page/1-1-first-page/step/3",responseBranches:[{criterion:["coordinatesInRange","tag-1",1.51,0.75,1.69,0.85],step:"/shared/label-stories-label-a-point/page/1-1-first-page/step/4"}],isFinalStep:false},{url:"/shared/label-stories-label-a-point/page/1-1-first-page/step/3",activityPage:"/shared/label-stories-label-a-point/page/1-1-first-page",beforeText:"The maximum point of the sine function is at π/2, or 1.57, where it attains the value 1. Since we're multiplying it by 0.8, the y-value of the maximum point is 0.8.",paneConfig:"split",panes:{top:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-a-point/axes/1",yAxis:"/shared/label-stories-label-a-point/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["line-to-axis-1","labeled-point"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]},bottom:{type:"table",data:"0.8 sin(x)",xLabel:"Time (s)",yLabel:"Distance (m)",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/label-stories-label-a-point/page/1-1-first-page/step/4",activityPage:"/shared/label-stories-label-a-point/page/1-1-first-page",beforeText:"That's correct.",paneConfig:"split",panes:{top:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-a-point/axes/1",yAxis:"/shared/label-stories-label-a-point/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["labeled-point"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]},bottom:{type:"table",data:"0.8 sin(x)",xLabel:"Time (s)",yLabel:"Distance (m)",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/label-stories-label-a-point/page/2-2-second-page/step/1",activityPage:"/shared/label-stories-label-a-point/page/2-2-second-page",paneConfig:"single",panes:{single:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-a-point/axes/3",yAxis:"/shared/label-stories-label-a-point/axes/4",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["labeled-point"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/label-stories-label-a-point/axes/1",units:"/shared/label-stories-label-a-point/units/seconds",min:-4,max:4,nSteps:16,label:"Time"},{url:"/shared/label-stories-label-a-point/axes/2",units:"/shared/label-stories-label-a-point/units/meters",min:-1,max:1,nSteps:10,label:"Distance"},{url:"/shared/label-stories-label-a-point/axes/3",units:"/shared/label-stories-label-a-point/units/seconds",min:-4,max:4,nSteps:16,label:"Time"},{url:"/shared/label-stories-label-a-point/axes/4",units:"/shared/label-stories-label-a-point/units/meters",min:-1,max:1,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/label-stories-label-a-point/datadefs/0.8 sin(x)",name:"0.8 sin(x)",activity:"/shared/label-stories-label-a-point",xUnits:"/shared/label-stories-label-a-point/units/seconds",yUnits:"/shared/label-stories-label-a-point/units/meters",points:[],pointType:"dot",lineType:"connected",lineSnapDistance:0.1}]}],datarefs:[{type:"SinusoidalEquation",records:[{url:"/shared/label-stories-label-a-point/datarefs/dataref-1",name:"dataref-1",activity:"/shared/label-stories-label-a-point",datadefName:"0.8 sin(x)",expressionForm:"sine-cosine",angularFunction:"sine",xInterval:0.1,params:{amplitude:0.8,frequency:1,phase:0,centerAmplitude:0}}]}],tags:[{url:"/shared/label-stories-label-a-point/tags/tag-1",activity:"/shared/label-stories-label-a-point",name:"tag-1"}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/label-stories-label-a-point/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/label-stories-label-a-point",datadefName:"0.8 sin(x)",tag:"/shared/label-stories-label-a-point/tags/tag-1",color:"#1f77b4"}]},{type:"LineToAxis",records:[{url:"/shared/label-stories-label-a-point/annotations/line-to-axis-1",name:"line-to-axis-1",activity:"/shared/label-stories-label-a-point",datadefName:"0.8 sin(x)",color:"red",xRecord:1.5708,yRecord:0.8,axis:"y"}]},{type:"Label",records:[{url:"/shared/label-stories-label-a-point/annotations/labeled-point",name:"labeled-point",activity:"/shared/label-stories-label-a-point",text:"New Label"}]}],variables:[],units:[{url:"/shared/label-stories-label-a-point/units/Time",activity:"/shared/label-stories-label-a-point",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/label-stories-label-a-point/units/Distance",activity:"/shared/label-stories-label-a-point",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/label-stories-label-a-point/units/degrees Celsius",activity:"/shared/label-stories-label-a-point",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/label-stories-label-a-point/units/minutes",activity:"/shared/label-stories-label-a-point",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/label-stories-label-a-point/units/meters",activity:"/shared/label-stories-label-a-point",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/label-stories-label-a-point/units/seconds",activity:"/shared/label-stories-label-a-point",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/label-stories-label-a-point/units/centimeters",activity:"/shared/label-stories-label-a-point",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/label-stories-label-a-point/units/grams",activity:"/shared/label-stories-label-a-point",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/label-stories-label-a-point/units/miles",activity:"/shared/label-stories-label-a-point",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/label-stories-label-a-point/units/hours",activity:"/shared/label-stories-label-a-point",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/label-stories-label-a-point/units/Celsius",activity:"/shared/label-stories-label-a-point",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/label-stories-label-a-point/units/dollars",activity:"/shared/label-stories-label-a-point",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/label-stories-label-a-point/units/inches",activity:"/shared/label-stories-label-a-point",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/label-stories-label-a-point/units/years",activity:"/shared/label-stories-label-a-point",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/label-stories-label-a-point/units/millimeters",activity:"/shared/label-stories-label-a-point",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/label-stories-label-a-point/units/parts per million",activity:"/shared/label-stories-label-a-point",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"},{url:"/shared/label-stories-label-a-point/units/meters per second",activity:"/shared/label-stories-label-a-point",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/label-stories-label-sequence"]={_id:"label-stories-label-sequence.df6",_rev:1,data_format_version:6,activity:{title:"Label Stories Label Sequence",url:"/shared/label-stories-label-sequence",owner:"shared",pages:["/shared/label-stories-label-sequence/page/1-1-first-page","/shared/label-stories-label-sequence/page/2-2-second-page"],axes:["/shared/label-stories-label-sequence/axes/1","/shared/label-stories-label-sequence/axes/2","/shared/label-stories-label-sequence/axes/3","/shared/label-stories-label-sequence/axes/4"],authorName:"Richard Klancer"},pages:[{name:"1 First Page",url:"/shared/label-stories-label-sequence/page/1-1-first-page",activity:"/shared/label-stories-label-sequence",index:1,introText:"The following is a graph of <em>0.8 sin(x)</em>.",steps:["/shared/label-stories-label-sequence/page/1-1-first-page/step/1"],firstStep:"/shared/label-stories-label-sequence/page/1-1-first-page/step/1",contextVars:[]},{name:"2 Second Page",url:"/shared/label-stories-label-sequence/page/2-2-second-page",activity:"/shared/label-stories-label-sequence",index:2,introText:"The following is a graph of <em>0.8 sin(x)</em>, with the zero crossings you labeled.",steps:["/shared/label-stories-label-sequence/page/2-2-second-page/step/1"],firstStep:"/shared/label-stories-label-sequence/page/2-2-second-page/step/1",contextVars:[]}],steps:[{url:"/shared/label-stories-label-sequence/page/1-1-first-page/step/1",activityPage:"/shared/label-stories-label-sequence/page/1-1-first-page",beforeText:"<p>Label the zero crossings</p>",paneConfig:"single",panes:{single:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-sequence/axes/1",yAxis:"/shared/label-stories-label-sequence/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["student-labels"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]}},tools:[{name:"label",setup:{pane:"single",labelSetName:"student-labels",markOnDataPoints:false,allowCoordinatesChange:true,maxNoOfLabels:3}}],submissibilityCriterion:["=",["numberOfLabels","student-labels"],3],submissibilityDependsOn:["annotation","student-labels"],isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/label-stories-label-sequence/page/2-2-second-page/step/1",activityPage:"/shared/label-stories-label-sequence/page/2-2-second-page",paneConfig:"single",panes:{single:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-sequence/axes/3",yAxis:"/shared/label-stories-label-sequence/axes/4",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["student-labels"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/label-stories-label-sequence/axes/1",units:"/shared/label-stories-label-sequence/units/Time",min:-4,max:4,nSteps:16,label:"Time"},{url:"/shared/label-stories-label-sequence/axes/2",units:"/shared/label-stories-label-sequence/units/meters",min:-1,max:1,nSteps:10,label:"Distance"},{url:"/shared/label-stories-label-sequence/axes/3",units:"/shared/label-stories-label-sequence/units/Time",min:-4,max:4,nSteps:16,label:"Time"},{url:"/shared/label-stories-label-sequence/axes/4",units:"/shared/label-stories-label-sequence/units/meters",min:-1,max:1,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/label-stories-label-sequence/datadefs/0.8 sin(x)",name:"0.8 sin(x)",activity:"/shared/label-stories-label-sequence",xUnits:"/shared/label-stories-label-sequence/units/Time",yUnits:"/shared/label-stories-label-sequence/units/meters",points:[],pointType:"dot",lineType:"connected",lineSnapDistance:0.1}]}],datarefs:[{type:"SinusoidalEquation",records:[{url:"/shared/label-stories-label-sequence/datarefs/dataref-1",name:"dataref-1",activity:"/shared/label-stories-label-sequence",datadefName:"0.8 sin(x)",expressionForm:"sine-cosine",angularFunction:"sine",xInterval:0.1,params:{amplitude:0.8,frequency:1,phase:0,centerAmplitude:0}}]}],tags:[],annotations:[{type:"LabelSet",records:[{url:"/shared/label-stories-label-sequence/annotations/student-labels",name:"student-labels",activity:"/shared/label-stories-label-sequence"}]}],variables:[],units:[{url:"/shared/label-stories-label-sequence/units/Time",activity:"/shared/label-stories-label-sequence",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/label-stories-label-sequence/units/Distance",activity:"/shared/label-stories-label-sequence",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/label-stories-label-sequence/units/degrees Celsius",activity:"/shared/label-stories-label-sequence",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/label-stories-label-sequence/units/minutes",activity:"/shared/label-stories-label-sequence",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/label-stories-label-sequence/units/meters",activity:"/shared/label-stories-label-sequence",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/label-stories-label-sequence/units/seconds",activity:"/shared/label-stories-label-sequence",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/label-stories-label-sequence/units/centimeters",activity:"/shared/label-stories-label-sequence",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/label-stories-label-sequence/units/grams",activity:"/shared/label-stories-label-sequence",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/label-stories-label-sequence/units/miles",activity:"/shared/label-stories-label-sequence",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/label-stories-label-sequence/units/hours",activity:"/shared/label-stories-label-sequence",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/label-stories-label-sequence/units/Celsius",activity:"/shared/label-stories-label-sequence",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/label-stories-label-sequence/units/dollars",activity:"/shared/label-stories-label-sequence",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/label-stories-label-sequence/units/inches",activity:"/shared/label-stories-label-sequence",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/label-stories-label-sequence/units/years",activity:"/shared/label-stories-label-sequence",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/label-stories-label-sequence/units/millimeters",activity:"/shared/label-stories-label-sequence",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/label-stories-label-sequence/units/parts per million",activity:"/shared/label-stories-label-sequence",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"},{url:"/shared/label-stories-label-sequence/units/meters per second",activity:"/shared/label-stories-label-sequence",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/label-stories-label-set"]={_id:"label-stories-label-set.df6",_rev:1,data_format_version:6,activity:{title:"Label Stories Label Set",url:"/shared/label-stories-label-set",owner:"shared",pages:["/shared/label-stories-label-set/page/1-1-first-page"],axes:["/shared/label-stories-label-set/axes/1","/shared/label-stories-label-set/axes/2"],authorName:"Richard Klancer"},pages:[{name:"1 First Page",url:"/shared/label-stories-label-set/page/1-1-first-page",activity:"/shared/label-stories-label-set",index:1,introText:"The following is a graph of <em>0.8 sin(x)</em>.",steps:["/shared/label-stories-label-set/page/1-1-first-page/step/1"],firstStep:"/shared/label-stories-label-set/page/1-1-first-page/step/1",contextVars:[]}],steps:[{url:"/shared/label-stories-label-set/page/1-1-first-page/step/1",activityPage:"/shared/label-stories-label-set/page/1-1-first-page",paneConfig:"single",panes:{single:{type:"graph",title:"Sinusoidal motion",xAxis:"/shared/label-stories-label-set/axes/1",yAxis:"/shared/label-stories-label-set/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["my-labels"],highlightedAnnotations:[],data:["0.8 sin(x)"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:[]},activeDatadefs:["0.8 sin(x)"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/label-stories-label-set/axes/1",units:"/shared/label-stories-label-set/units/Time",min:-4,max:4,nSteps:16,label:"Time"},{url:"/shared/label-stories-label-set/axes/2",units:"/shared/label-stories-label-set/units/meters",min:-1,max:1,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/label-stories-label-set/datadefs/0.8 sin(x)",name:"0.8 sin(x)",activity:"/shared/label-stories-label-set",xUnits:"/shared/label-stories-label-set/units/Time",yUnits:"/shared/label-stories-label-set/units/meters",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.1}]}],datarefs:[{type:"SinusoidalEquation",records:[{url:"/shared/label-stories-label-set/datarefs/dataref-1",name:"dataref-1",activity:"/shared/label-stories-label-set",datadefName:"0.8 sin(x)",expressionForm:"sine-cosine",angularFunction:"sine",xInterval:0.1,params:{amplitude:0.8,frequency:1,phase:0,centerAmplitude:0}}]}],tags:[],annotations:[{type:"Label",records:[{url:"/shared/label-stories-label-set/annotations/my-labels-1",name:"my-labels-1",activity:"/shared/label-stories-label-set",text:"This is the zero crossing.",x:0,y:0,xOffset:100,yOffset:-40},{url:"/shared/label-stories-label-set/annotations/my-labels-2",name:"my-labels-2",activity:"/shared/label-stories-label-set",text:"This is the maximum.",x:1.5707,y:0.8,xOffset:100,yOffset:-40},{url:"/shared/label-stories-label-set/annotations/my-labels-3",name:"my-labels-3",activity:"/shared/label-stories-label-set",text:"This is the minimum.",x:-1.5707,y:-0.8,xOffset:100,yOffset:-40}]},{type:"LabelSet",records:[{url:"/shared/label-stories-label-set/annotations/my-labels",name:"my-labels",activity:"/shared/label-stories-label-set",labels:["/shared/label-stories-label-set/annotations/my-labels-1","/shared/label-stories-label-set/annotations/my-labels-2","/shared/label-stories-label-set/annotations/my-labels-3"]}]}],variables:[],units:[{url:"/shared/label-stories-label-set/units/Time",activity:"/shared/label-stories-label-set",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/label-stories-label-set/units/Distance",activity:"/shared/label-stories-label-set",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/label-stories-label-set/units/degrees Celsius",activity:"/shared/label-stories-label-set",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/label-stories-label-set/units/minutes",activity:"/shared/label-stories-label-set",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/label-stories-label-set/units/meters",activity:"/shared/label-stories-label-set",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/label-stories-label-set/units/seconds",activity:"/shared/label-stories-label-set",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/label-stories-label-set/units/centimeters",activity:"/shared/label-stories-label-set",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/label-stories-label-set/units/grams",activity:"/shared/label-stories-label-set",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/label-stories-label-set/units/miles",activity:"/shared/label-stories-label-set",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/label-stories-label-set/units/hours",activity:"/shared/label-stories-label-set",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/label-stories-label-set/units/Celsius",activity:"/shared/label-stories-label-set",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/label-stories-label-set/units/dollars",activity:"/shared/label-stories-label-set",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/label-stories-label-set/units/inches",activity:"/shared/label-stories-label-set",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/label-stories-label-set/units/years",activity:"/shared/label-stories-label-set",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/label-stories-label-set/units/millimeters",activity:"/shared/label-stories-label-set",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/label-stories-label-set/units/parts per million",activity:"/shared/label-stories-label-set",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"},{url:"/shared/label-stories-label-set/units/meters per second",activity:"/shared/label-stories-label-set",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/line-construction-sequence-multiple-dataset"]={_id:"line-construction-sequence-multiple-dataset.df6",_rev:1,data_format_version:6,activity:{title:"line construction sequence multiple dataset",url:"/shared/line-construction-sequence-multiple-dataset",owner:"shared",pages:["/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1"],axes:["/shared/line-construction-sequence-multiple-dataset/axes/1","/shared/line-construction-sequence-multiple-dataset/axes/2"],authorName:"Noah"},pages:[{name:"Construct a Line: Page 1",url:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1",activity:"/shared/line-construction-sequence-multiple-dataset",index:1,introText:"On this page, students will be asked to construct a line.",steps:["/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/1","/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/2","/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/3","/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/4","/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/5"],firstStep:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/1",contextVars:[]}],steps:[{url:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/1",activityPage:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1",beforeText:"Construct a line with y-interept 0.0, with slope 1.0",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-sequence-multiple-dataset/axes/1",yAxis:"/shared/line-construction-sequence-multiple-dataset/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1","dataSetA"],datarefs:["dataref-1"],legends:["datadef-1","dataSetA"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/2",activityPage:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect. Try again.</b><p>Construct a line with y-interept 0.0, with slope 1.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-sequence-multiple-dataset/axes/1",yAxis:"/shared/line-construction-sequence-multiple-dataset/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1","dataSetA"],datarefs:["dataref-1"],legends:["datadef-1","dataSetA"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/3",activityPage:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your slope is wrong.</b><p>Construct a line with y-interept 0.0, with slope 1.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-sequence-multiple-dataset/axes/1",yAxis:"/shared/line-construction-sequence-multiple-dataset/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1","dataSetA"],datarefs:["dataref-1"],legends:["datadef-1","dataSetA"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/4",activityPage:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your y-intercept is wrong.</b><p>Construct a line with y-interept 0.0, with slope 1.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-sequence-multiple-dataset/axes/1",yAxis:"/shared/line-construction-sequence-multiple-dataset/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1","dataSetA"],datarefs:["dataref-1"],legends:["datadef-1","dataSetA"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1/step/5",activityPage:"/shared/line-construction-sequence-multiple-dataset/page/1-construct-a-line-page-1",beforeText:"<b>Thats Correct</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-sequence-multiple-dataset/axes/1",yAxis:"/shared/line-construction-sequence-multiple-dataset/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1","dataSetA"],datarefs:["dataref-1"],legends:["datadef-1","dataSetA"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/line-construction-sequence-multiple-dataset/axes/1",min:0,max:10,nSteps:10,label:"x"},{url:"/shared/line-construction-sequence-multiple-dataset/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/line-construction-sequence-multiple-dataset/datadefs/datadef-1",name:"datadef-1",activity:"/shared/line-construction-sequence-multiple-dataset",points:[],lineSnapDistance:0},{url:"/shared/line-construction-sequence-multiple-dataset/datadefs/dataSetA",name:"dataSetA",activity:"/shared/line-construction-sequence-multiple-dataset",points:[],pointType:"dot",lineType:"connected",lineSnapDistance:0.5}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/line-construction-sequence-multiple-dataset/datarefs/dataref-1",name:"dataref-1",activity:"/shared/line-construction-sequence-multiple-dataset",datadefName:"dataSetA",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:0.5,yIntercept:5}}]}],tags:[],annotations:[{type:"FreehandSketch",records:[{url:"/shared/line-construction-sequence-multiple-dataset/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/line-construction-sequence-multiple-dataset",color:"#CC0000",points:[]}]}],variables:[],units:[]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/line-construction-activity-sample-3"]={_id:"line-construction-activity-sample-3.df6",_rev:1,data_format_version:6,activity:{title:"Line construction activity Sample 3",url:"/shared/line-construction-activity-sample-3",owner:"shared",pages:["/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1"],axes:["/shared/line-construction-activity-sample-3/axes/1","/shared/line-construction-activity-sample-3/axes/2"],authorName:"Noah"},pages:[{name:"Construct a Line: Page 1",url:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1",activity:"/shared/line-construction-activity-sample-3",index:1,introText:"On this page, students will be asked to construct a line.",steps:["/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/1","/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/2","/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/3","/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/4","/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/5"],firstStep:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/1",contextVars:[]}],steps:[{url:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/1",activityPage:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1",beforeText:"Construct a line with y-interept 7.0, with slope 3.0",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-3/axes/1",yAxis:"/shared/line-construction-activity-sample-3/axes/2",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["and",["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/2",activityPage:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect. Try again.</b><p>Construct a line with y-interept 7.0, with slope 3.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-3/axes/1",yAxis:"/shared/line-construction-activity-sample-3/axes/2",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/3",activityPage:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your slope is wrong.</b><p>Construct a line with y-interept 7.0, with slope 3.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-3/axes/1",yAxis:"/shared/line-construction-activity-sample-3/axes/2",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/4",activityPage:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your y-intercept is wrong.</b><p>Construct a line with y-interept 7.0, with slope 3.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-3/axes/1",yAxis:"/shared/line-construction-activity-sample-3/axes/2",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",3,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",7,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1/step/5",activityPage:"/shared/line-construction-activity-sample-3/page/1-construct-a-line-page-1",beforeText:"<b>Thats Correct</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-3/axes/1",yAxis:"/shared/line-construction-activity-sample-3/axes/2",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/line-construction-activity-sample-3/axes/1",min:0,max:10,nSteps:10,label:"x"},{url:"/shared/line-construction-activity-sample-3/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/line-construction-activity-sample-3/datadefs/datadef-1",name:"datadef-1",activity:"/shared/line-construction-activity-sample-3",xLabel:"x",xShortLabel:"x",yLabel:"y",yShortLabel:"y",points:[]}]}],tags:[],annotations:[{type:"FreehandSketch",records:[{url:"/shared/line-construction-activity-sample-3/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/line-construction-activity-sample-3",color:"#CC0000",points:[]}]}],variables:[],units:[{url:"/shared/line-construction-activity-sample-3/units/meters",activity:"/shared/line-construction-activity-sample-3",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/line-construction-activity-sample-3/units/minutes",activity:"/shared/line-construction-activity-sample-3",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/line-construction-activity-sample-3/units/meters per second",activity:"/shared/line-construction-activity-sample-3",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"},{url:"/shared/line-construction-activity-sample-3/units/seconds",activity:"/shared/line-construction-activity-sample-3",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/line-construction-activity-sample-1"]={_id:"line-construction-activity-sample-1.df6",_rev:1,data_format_version:6,activity:{title:"Line construction activity Sample 1",url:"/shared/line-construction-activity-sample-1",owner:"shared",pages:["/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1"],axes:["/shared/line-construction-activity-sample-1/axes/1","/shared/line-construction-activity-sample-1/axes/2"],authorName:"Noah"},pages:[{name:"Construct a Line: Page 1",url:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1",activity:"/shared/line-construction-activity-sample-1",index:1,introText:"On this page, students will be asked to construct a line.",steps:["/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/1","/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/2","/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/3","/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/4","/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/5"],firstStep:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/1",contextVars:[]}],steps:[{url:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/1",activityPage:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1",beforeText:"Construct a line with y-interept 1.0, with slope 0",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-1/axes/1",yAxis:"/shared/line-construction-activity-sample-1/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["and",["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/2",activityPage:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect. Try again.</b><p>Construct a line with y-interept 1.0, with slope 0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-1/axes/1",yAxis:"/shared/line-construction-activity-sample-1/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/3",activityPage:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your slope is wrong.</b><p>Construct a line with y-interept 1.0, with slope 0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-1/axes/1",yAxis:"/shared/line-construction-activity-sample-1/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/4",activityPage:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your y-intercept is wrong.</b><p>Construct a line with y-interept 1.0, with slope 0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-1/axes/1",yAxis:"/shared/line-construction-activity-sample-1/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",0,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1/step/5",activityPage:"/shared/line-construction-activity-sample-1/page/1-construct-a-line-page-1",beforeText:"<b>Thats Correct</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-1/axes/1",yAxis:"/shared/line-construction-activity-sample-1/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/line-construction-activity-sample-1/axes/1",min:0,max:10,nSteps:10,label:"x"},{url:"/shared/line-construction-activity-sample-1/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/line-construction-activity-sample-1/datadefs/datadef-1",name:"datadef-1",activity:"/shared/line-construction-activity-sample-1",xLabel:"x",xShortLabel:"x",yLabel:"y",yShortLabel:"y",points:[]}]}],tags:[],annotations:[{type:"FreehandSketch",records:[{url:"/shared/line-construction-activity-sample-1/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/line-construction-activity-sample-1",color:"#CC0000",points:[]}]}],variables:[],units:[{url:"/shared/line-construction-activity-sample-1/units/meters",activity:"/shared/line-construction-activity-sample-1",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/line-construction-activity-sample-1/units/minutes",activity:"/shared/line-construction-activity-sample-1",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/line-construction-activity-sample-1/units/meters per second",activity:"/shared/line-construction-activity-sample-1",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"},{url:"/shared/line-construction-activity-sample-1/units/seconds",activity:"/shared/line-construction-activity-sample-1",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/line-construction-activity-sample-2"]={_id:"line-construction-activity-sample-2.df6",_rev:1,data_format_version:6,activity:{title:"Line construction activity Sample 2",url:"/shared/line-construction-activity-sample-2",owner:"shared",pages:["/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1"],axes:["/shared/line-construction-activity-sample-2/axes/1","/shared/line-construction-activity-sample-2/axes/2"],authorName:"Noah"},pages:[{name:"Construct a Line: Page 1",url:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1",activity:"/shared/line-construction-activity-sample-2",index:1,introText:"On this page, students will be asked to construct a line.",steps:["/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/1","/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/2","/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/3","/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/4","/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/5"],firstStep:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/1",contextVars:[]}],steps:[{url:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/1",activityPage:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1",beforeText:"Construct a line with y-interept -1.0, with slope -2.0",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-2/axes/1",yAxis:"/shared/line-construction-activity-sample-2/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["and",["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/2",activityPage:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect. Try again.</b><p>Construct a line with y-interept -1.0, with slope -2.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-2/axes/1",yAxis:"/shared/line-construction-activity-sample-2/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/3",activityPage:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your slope is wrong.</b><p>Construct a line with y-interept -1.0, with slope -2.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-2/axes/1",yAxis:"/shared/line-construction-activity-sample-2/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/4",activityPage:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your y-intercept is wrong.</b><p>Construct a line with y-interept -1.0, with slope -2.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-2/axes/1",yAxis:"/shared/line-construction-activity-sample-2/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",-2,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",-1,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1/step/5",activityPage:"/shared/line-construction-activity-sample-2/page/1-construct-a-line-page-1",beforeText:"<b>Thats Correct</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/line-construction-activity-sample-2/axes/1",yAxis:"/shared/line-construction-activity-sample-2/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/line-construction-activity-sample-2/axes/1",min:-5,max:5,nSteps:10,label:"x"},{url:"/shared/line-construction-activity-sample-2/axes/2",min:-5,max:5,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/line-construction-activity-sample-2/datadefs/datadef-1",name:"datadef-1",activity:"/shared/line-construction-activity-sample-2",xLabel:"x",xShortLabel:"x",yLabel:"y",yShortLabel:"y",points:[]}]}],tags:[],annotations:[{type:"FreehandSketch",records:[{url:"/shared/line-construction-activity-sample-2/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/line-construction-activity-sample-2",color:"#CC0000",points:[]}]}],variables:[],units:[{url:"/shared/line-construction-activity-sample-2/units/meters",activity:"/shared/line-construction-activity-sample-2",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/line-construction-activity-sample-2/units/minutes",activity:"/shared/line-construction-activity-sample-2",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/line-construction-activity-sample-2/units/meters per second",activity:"/shared/line-construction-activity-sample-2",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"},{url:"/shared/line-construction-activity-sample-2/units/seconds",activity:"/shared/line-construction-activity-sample-2",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/activity-with-a-line-construction-tool"]={_id:"activity-with-a-line-construction-tool.df6",_rev:1,data_format_version:6,activity:{title:"Activity with a line construction tool",url:"/shared/activity-with-a-line-construction-tool",owner:"shared",pages:["/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1"],axes:["/shared/activity-with-a-line-construction-tool/axes/1","/shared/activity-with-a-line-construction-tool/axes/2"],authorName:"Noah"},pages:[{name:"Construct a Line: Page 1",url:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1",activity:"/shared/activity-with-a-line-construction-tool",index:1,introText:"On this page, students will be asked to construct a line.",steps:["/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/1","/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/2","/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/3","/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/4","/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/5"],firstStep:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/1",contextVars:[]}],steps:[{url:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/1",activityPage:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1",beforeText:"Construct a line with y-interept 0.0, with slope 1.0",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/activity-with-a-line-construction-tool/axes/1",yAxis:"/shared/activity-with-a-line-construction-tool/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/2",activityPage:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect. Try again.</b><p>Construct a line with y-interept 0.0, with slope 1.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/activity-with-a-line-construction-tool/axes/1",yAxis:"/shared/activity-with-a-line-construction-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/3",activityPage:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your slope is wrong.</b><p>Construct a line with y-interept 0.0, with slope 1.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/activity-with-a-line-construction-tool/axes/1",yAxis:"/shared/activity-with-a-line-construction-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/4",activityPage:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1",beforeText:"<b>Incorrect, your y-intercept is wrong.</b><p>Construct a line with y-interept 0.0, with slope 1.0</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/activity-with-a-line-construction-tool/axes/1",yAxis:"/shared/activity-with-a-line-construction-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/2",submissibilityCriterion:["or",["pointMoved","datadef-1",1],["pointMoved","datadef-1",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/5"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/4"},{criterion:["withinAbsTolerance",0,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1/step/5",activityPage:"/shared/activity-with-a-line-construction-tool/page/1-construct-a-line-page-1",beforeText:"<b>Thats Correct</b>",paneConfig:"split",panes:{top:{type:"graph",title:"Line Construction Graph Pane",xAxis:"/shared/activity-with-a-line-construction-tool/axes/1",yAxis:"/shared/activity-with-a-line-construction-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["datadef-1"],activeDatadefs:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/activity-with-a-line-construction-tool/axes/1",min:0,max:10,nSteps:10,label:"x"},{url:"/shared/activity-with-a-line-construction-tool/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/activity-with-a-line-construction-tool/datadefs/datadef-1",name:"datadef-1",activity:"/shared/activity-with-a-line-construction-tool",xLabel:"x",xShortLabel:"x",yLabel:"y",yShortLabel:"y",points:[]}]}],tags:[],annotations:[{type:"FreehandSketch",records:[{url:"/shared/activity-with-a-line-construction-tool/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/activity-with-a-line-construction-tool",color:"#CC0000",points:[]}]}],variables:[],units:[{url:"/shared/activity-with-a-line-construction-tool/units/meters",activity:"/shared/activity-with-a-line-construction-tool",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/activity-with-a-line-construction-tool/units/minutes",activity:"/shared/activity-with-a-line-construction-tool",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/activity-with-a-line-construction-tool/units/meters per second",activity:"/shared/activity-with-a-line-construction-tool",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"},{url:"/shared/activity-with-a-line-construction-tool/units/seconds",activity:"/shared/activity-with-a-line-construction-tool",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/multiple-choice-2"]={_id:"multiple-choice-2.df6",_rev:1,data_format_version:6,activity:{title:"Multiple Choice 2",url:"/shared/multiple-choice-2",owner:"shared",pages:["/shared/multiple-choice-2/page/1-first-page"],axes:["/shared/multiple-choice-2/axes/1","/shared/multiple-choice-2/axes/2"]},pages:[{name:"First Page",url:"/shared/multiple-choice-2/page/1-first-page",activity:"/shared/multiple-choice-2",index:1,introText:"<p>This is an example page.</p>",steps:["/shared/multiple-choice-2/page/1-first-page/step/1","/shared/multiple-choice-2/page/1-first-page/step/2","/shared/multiple-choice-2/page/1-first-page/step/3","/shared/multiple-choice-2/page/1-first-page/step/4"],firstStep:"/shared/multiple-choice-2/page/1-first-page/step/1"}],steps:[{url:"/shared/multiple-choice-2/page/1-first-page/step/1",activityPage:"/shared/multiple-choice-2/page/1-first-page",beforeText:'<p>Which of the following choices is choice "B"?</p>',responseTemplate:"/shared/multiple-choice-2/response-templates/multiple-choice-1",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-2/axes/1",yAxis:"/shared/multiple-choice-2/axes/2",annotations:[],data:["datadef-1"]}},submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-2/page/1-first-page/step/4"},{criterion:["=",["responseField",1],1],step:"/shared/multiple-choice-2/page/1-first-page/step/2"},{criterion:["=",["responseField",1],3],step:"/shared/multiple-choice-2/page/1-first-page/step/3"}],defaultBranch:"/shared/multiple-choice-2/page/1-first-page/step/1",isFinalStep:false},{url:"/shared/multiple-choice-2/page/1-first-page/step/2",activityPage:"/shared/multiple-choice-2/page/1-first-page",beforeText:"<p>Try to think! What is the difference between the letters A and B. Which would win in a fair fight, if Optimus Prime and Grimlock helped B? Try again.</p>",responseTemplate:"/shared/multiple-choice-2/response-templates/multiple-choice-1",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-2/axes/1",yAxis:"/shared/multiple-choice-2/axes/2",annotations:[],data:["datadef-1"]}},submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-2/page/1-first-page/step/4"},{criterion:["=",["responseField",1],1],step:"/shared/multiple-choice-2/page/1-first-page/step/2"},{criterion:["=",["responseField",1],3],step:"/shared/multiple-choice-2/page/1-first-page/step/3"}],defaultBranch:"/shared/multiple-choice-2/page/1-first-page/step/1",isFinalStep:false},{url:"/shared/multiple-choice-2/page/1-first-page/step/3",activityPage:"/shared/multiple-choice-2/page/1-first-page",beforeText:"<p>Now, really. What do you think makes C like B? Ask yourself, does C have B envy? Then try again.</p>",responseTemplate:"/shared/multiple-choice-2/response-templates/multiple-choice-1",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-2/axes/1",yAxis:"/shared/multiple-choice-2/axes/2",annotations:[],data:["datadef-1"]}},submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-2/page/1-first-page/step/4"},{criterion:["=",["responseField",1],1],step:"/shared/multiple-choice-2/page/1-first-page/step/2"},{criterion:["=",["responseField",1],3],step:"/shared/multiple-choice-2/page/1-first-page/step/3"}],defaultBranch:"/shared/multiple-choice-2/page/1-first-page/step/1",isFinalStep:false},{url:"/shared/multiple-choice-2/page/1-first-page/step/4",activityPage:"/shared/multiple-choice-2/page/1-first-page",beforeText:"<p>That's right. I wanted choice B, you gave it to me.</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-2/axes/1",yAxis:"/shared/multiple-choice-2/axes/2",annotations:[],data:["datadef-1"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[{url:"/shared/multiple-choice-2/response-templates/multiple-choice-1",templateString:"",fieldTypes:["multiplechoice"],fieldChoicesList:[["Choice A","Choice B","Choice C"]],initialValues:[""]}],axes:[{url:"/shared/multiple-choice-2/axes/1",units:"/shared/multiple-choice-2/units/seconds",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/multiple-choice-2/axes/2",units:"/shared/multiple-choice-2/units/meters",min:0,max:100,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/multiple-choice-2/datadefs/datadef-1",name:"datadef-1",activity:"/shared/multiple-choice-2",xUnits:"/shared/multiple-choice-2/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/shared/multiple-choice-2/units/meters",yLabel:"Distance",yShortLabel:"Distance",points:[[0,0],[1,10],[2,20],[3,30],[4,40]]}]}],tags:[],annotations:[],variables:[],units:[{url:"/shared/multiple-choice-2/units/seconds",activity:"/shared/multiple-choice-2",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/multiple-choice-2/units/meters",activity:"/shared/multiple-choice-2",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/multiple-choice-2/units/minutes",activity:"/shared/multiple-choice-2",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/multiple-choice-2/units/meters per second",activity:"/shared/multiple-choice-2",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/multiple-choice-1"]={_id:"multiple-choice-1.df6",_rev:1,data_format_version:6,activity:{title:"Multiple Choice 1",url:"/shared/multiple-choice-1",owner:"shared",pages:["/shared/multiple-choice-1/page/1-first-page"],axes:["/shared/multiple-choice-1/axes/1","/shared/multiple-choice-1/axes/2"]},pages:[{name:"First Page",url:"/shared/multiple-choice-1/page/1-first-page",activity:"/shared/multiple-choice-1",index:1,introText:"<p>This is an example page.</p>",steps:["/shared/multiple-choice-1/page/1-first-page/step/1","/shared/multiple-choice-1/page/1-first-page/step/2","/shared/multiple-choice-1/page/1-first-page/step/3","/shared/multiple-choice-1/page/1-first-page/step/4","/shared/multiple-choice-1/page/1-first-page/step/5","/shared/multiple-choice-1/page/1-first-page/step/6"],firstStep:"/shared/multiple-choice-1/page/1-first-page/step/1"}],steps:[{url:"/shared/multiple-choice-1/page/1-first-page/step/1",activityPage:"/shared/multiple-choice-1/page/1-first-page",beforeText:'<p>Which of the following choices is choice "B"?</p>',responseTemplate:"/shared/multiple-choice-1/response-templates/multiple-choice-1",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-1/axes/1",yAxis:"/shared/multiple-choice-1/axes/2",annotations:[],data:["datadef-1"]}},submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-1/page/1-first-page/step/6"}],defaultBranch:"/shared/multiple-choice-1/page/1-first-page/step/2",isFinalStep:false},{url:"/shared/multiple-choice-1/page/1-first-page/step/2",activityPage:"/shared/multiple-choice-1/page/1-first-page",beforeText:"<p>You can try harder than that.</p>",responseTemplate:"/shared/multiple-choice-1/response-templates/multiple-choice-1",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-1/axes/1",yAxis:"/shared/multiple-choice-1/axes/2",annotations:[],data:["datadef-1"]}},submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-1/page/1-first-page/step/6"}],defaultBranch:"/shared/multiple-choice-1/page/1-first-page/step/3",isFinalStep:false},{url:"/shared/multiple-choice-1/page/1-first-page/step/3",activityPage:"/shared/multiple-choice-1/page/1-first-page",beforeText:"<p>I'm starting to worry about you.</p>",responseTemplate:"/shared/multiple-choice-1/response-templates/multiple-choice-1",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-1/axes/1",yAxis:"/shared/multiple-choice-1/axes/2",annotations:[],data:["datadef-1"]}},submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-1/page/1-first-page/step/6"}],defaultBranch:"/shared/multiple-choice-1/page/1-first-page/step/4",isFinalStep:false},{url:"/shared/multiple-choice-1/page/1-first-page/step/4",activityPage:"/shared/multiple-choice-1/page/1-first-page",beforeText:"<p>C'mon, you can do it. Or so I used to think.</p>",responseTemplate:"/shared/multiple-choice-1/response-templates/multiple-choice-1",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-1/axes/1",yAxis:"/shared/multiple-choice-1/axes/2",annotations:[],data:["datadef-1"]}},submitButtonTitle:"Check My Answer",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-1/page/1-first-page/step/6"}],defaultBranch:"/shared/multiple-choice-1/page/1-first-page/step/5",isFinalStep:false},{url:"/shared/multiple-choice-1/page/1-first-page/step/5",activityPage:"/shared/multiple-choice-1/page/1-first-page",beforeText:"<p>Incorrect. The correct choice B is choice B.</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-1/axes/1",yAxis:"/shared/multiple-choice-1/axes/2",annotations:[],data:["datadef-1"]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/multiple-choice-1/page/1-first-page/step/6",activityPage:"/shared/multiple-choice-1/page/1-first-page",beforeText:"<p>That's right. I wanted choice B, you gave it to me.</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-1/axes/1",yAxis:"/shared/multiple-choice-1/axes/2",annotations:[],data:["datadef-1"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[{url:"/shared/multiple-choice-1/response-templates/multiple-choice-1",templateString:"",fieldTypes:["multiplechoice"],fieldChoicesList:[["Choice A","Choice B","Choice C"]],initialValues:[""]}],axes:[{url:"/shared/multiple-choice-1/axes/1",units:"/shared/multiple-choice-1/units/seconds",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/multiple-choice-1/axes/2",units:"/shared/multiple-choice-1/units/meters",min:0,max:100,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/multiple-choice-1/datadefs/datadef-1",name:"datadef-1",activity:"/shared/multiple-choice-1",xUnits:"/shared/multiple-choice-1/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/shared/multiple-choice-1/units/meters",yLabel:"Distance",yShortLabel:"Distance",points:[[0,0],[1,10],[2,20],[3,30],[4,40]]}]}],tags:[],annotations:[],variables:[],units:[{url:"/shared/multiple-choice-1/units/seconds",activity:"/shared/multiple-choice-1",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/multiple-choice-1/units/meters",activity:"/shared/multiple-choice-1",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/multiple-choice-1/units/minutes",activity:"/shared/multiple-choice-1",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/multiple-choice-1/units/meters per second",activity:"/shared/multiple-choice-1",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/multiple-choice-with-three-datasets"]={_id:"multiple-choice-with-three-datasets.df6",_rev:1,data_format_version:6,activity:{title:"Multiple Choice with three datasets",url:"/shared/multiple-choice-with-three-datasets",owner:"shared",pages:["/shared/multiple-choice-with-three-datasets/page/1-first-page"],axes:["/shared/multiple-choice-with-three-datasets/axes/1","/shared/multiple-choice-with-three-datasets/axes/2"]},pages:[{name:"First Page",url:"/shared/multiple-choice-with-three-datasets/page/1-first-page",activity:"/shared/multiple-choice-with-three-datasets",index:1,introText:"<p>Three cars are moving with constant speeds.</p>",steps:["/shared/multiple-choice-with-three-datasets/page/1-first-page/step/1","/shared/multiple-choice-with-three-datasets/page/1-first-page/step/2","/shared/multiple-choice-with-three-datasets/page/1-first-page/step/3","/shared/multiple-choice-with-three-datasets/page/1-first-page/step/4","/shared/multiple-choice-with-three-datasets/page/1-first-page/step/5"],firstStep:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/1",contextVars:[]}],steps:[{url:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/1",activityPage:"/shared/multiple-choice-with-three-datasets/page/1-first-page",beforeText:"<p>Which of the following three cars is moving with greater velocity?</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-with-three-datasets/axes/1",yAxis:"/shared/multiple-choice-with-three-datasets/axes/2",annotations:[],highlightedAnnotations:[],data:["Blue","Green","Orange"],datarefs:["dataref-1","dataref-2","dataref-3"],legends:["Blue","Green","Orange"],activeDatadefs:["Green"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/2",responseTemplate:"/shared/multiple-choice-with-three-datasets/response-templates/multiple-choice-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/5"}],isFinalStep:false},{url:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/2",activityPage:"/shared/multiple-choice-with-three-datasets/page/1-first-page",beforeText:"<p>Hint: Think again!</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-with-three-datasets/axes/1",yAxis:"/shared/multiple-choice-with-three-datasets/axes/2",annotations:["segment-overlay-1"],highlightedAnnotations:[],data:["Blue","Green","Orange"],datarefs:["dataref-1","dataref-2","dataref-3"],legends:["Blue","Green","Orange"],activeDatadefs:["Green"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/3",responseTemplate:"/shared/multiple-choice-with-three-datasets/response-templates/multiple-choice-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/5"}],isFinalStep:false},{url:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/3",activityPage:"/shared/multiple-choice-with-three-datasets/page/1-first-page",beforeText:"<p>Hint: C'mon you can do it</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-with-three-datasets/axes/1",yAxis:"/shared/multiple-choice-with-three-datasets/axes/2",annotations:["segment-overlay-2","segment-overlay-3"],highlightedAnnotations:[],data:["Blue","Green","Orange"],datarefs:["dataref-1","dataref-2","dataref-3"],legends:["Blue","Green","Orange"],activeDatadefs:["Green"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/4",responseTemplate:"/shared/multiple-choice-with-three-datasets/response-templates/multiple-choice-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["=",["responseField",1],2],step:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/5"}],isFinalStep:false},{url:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/4",activityPage:"/shared/multiple-choice-with-three-datasets/page/1-first-page",beforeText:"<p>Incorrect. Correct answer is 'Green'</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-with-three-datasets/axes/1",yAxis:"/shared/multiple-choice-with-three-datasets/axes/2",annotations:["segment-overlay-4"],highlightedAnnotations:[],data:["Blue","Green","Orange"],datarefs:["dataref-1","dataref-2","dataref-3"],legends:["Blue","Green","Orange"],activeDatadefs:["Green"]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/multiple-choice-with-three-datasets/page/1-first-page/step/5",activityPage:"/shared/multiple-choice-with-three-datasets/page/1-first-page",beforeText:"<p>That's correct.</p>",paneConfig:"single",panes:{single:{type:"graph",title:"The Graph",xAxis:"/shared/multiple-choice-with-three-datasets/axes/1",yAxis:"/shared/multiple-choice-with-three-datasets/axes/2",annotations:["segment-overlay-5"],highlightedAnnotations:[],data:["Blue","Green","Orange"],datarefs:["dataref-1","dataref-2","dataref-3"],legends:["Blue","Green","Orange"],activeDatadefs:["Green"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[{url:"/shared/multiple-choice-with-three-datasets/response-templates/multiple-choice-1",templateString:"",fieldChoicesList:[["Blue","Green","Orange"]],initialValues:[""],fieldTypes:["multiplechoice"]}],axes:[{url:"/shared/multiple-choice-with-three-datasets/axes/1",units:"/shared/multiple-choice-with-three-datasets/units/seconds",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/multiple-choice-with-three-datasets/axes/2",units:"/shared/multiple-choice-with-three-datasets/units/meters",min:0,max:100,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/multiple-choice-with-three-datasets/datadefs/Blue",name:"Blue",activity:"/shared/multiple-choice-with-three-datasets",xUnits:"/shared/multiple-choice-with-three-datasets/units/seconds",yUnits:"/shared/multiple-choice-with-three-datasets/units/meters",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5},{url:"/shared/multiple-choice-with-three-datasets/datadefs/Green",name:"Green",activity:"/shared/multiple-choice-with-three-datasets",xUnits:"/shared/multiple-choice-with-three-datasets/units/seconds",yUnits:"/shared/multiple-choice-with-three-datasets/units/meters",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5},{url:"/shared/multiple-choice-with-three-datasets/datadefs/Orange",name:"Orange",activity:"/shared/multiple-choice-with-three-datasets",xUnits:"/shared/multiple-choice-with-three-datasets/units/seconds",yUnits:"/shared/multiple-choice-with-three-datasets/units/meters",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/multiple-choice-with-three-datasets/datarefs/dataref-1",name:"dataref-1",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Blue",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:5,yIntercept:0}},{url:"/shared/multiple-choice-with-three-datasets/datarefs/dataref-2",name:"dataref-2",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Green",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:10,yIntercept:-5}},{url:"/shared/multiple-choice-with-three-datasets/datarefs/dataref-3",name:"dataref-3",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Orange",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:6,yIntercept:2}}]}],tags:[],annotations:[{type:"SegmentOverlay",records:[{url:"/shared/multiple-choice-with-three-datasets/annotations/segment-overlay-1",name:"segment-overlay-1",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Green",color:"#ff0000",x1Record:1,x2Record:3},{url:"/shared/multiple-choice-with-three-datasets/annotations/segment-overlay-2",name:"segment-overlay-2",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Green",color:"#00ff00",x1Record:3,isUnboundedLeft:true},{url:"/shared/multiple-choice-with-three-datasets/annotations/segment-overlay-3",name:"segment-overlay-3",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Green",color:"#0000ff",x1Record:4,isUnboundedRight:true},{url:"/shared/multiple-choice-with-three-datasets/annotations/segment-overlay-4",name:"segment-overlay-4",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Green",color:"#000000",x1Record:1,x2Record:2},{url:"/shared/multiple-choice-with-three-datasets/annotations/segment-overlay-5",name:"segment-overlay-5",activity:"/shared/multiple-choice-with-three-datasets",datadefName:"Green",color:"#000000",x1Record:1,x2Record:4}]}],variables:[],units:[{url:"/shared/multiple-choice-with-three-datasets/units/meters",activity:"/shared/multiple-choice-with-three-datasets",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/multiple-choice-with-three-datasets/units/minutes",activity:"/shared/multiple-choice-with-three-datasets",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/multiple-choice-with-three-datasets/units/meters per second",activity:"/shared/multiple-choice-with-three-datasets",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"},{url:"/shared/multiple-choice-with-three-datasets/units/seconds",activity:"/shared/multiple-choice-with-three-datasets",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/numeric-sequence-multiple-dataset"]={_id:"numeric-sequence-multiple-dataset.df6",_rev:1,data_format_version:6,activity:{title:"numeric sequence multiple dataset",url:"/shared/numeric-sequence-multiple-dataset",owner:"shared",pages:["/shared/numeric-sequence-multiple-dataset/page/1-introduction"],axes:["/shared/numeric-sequence-multiple-dataset/axes/1","/shared/numeric-sequence-multiple-dataset/axes/2"]},pages:[{name:"Introduction",url:"/shared/numeric-sequence-multiple-dataset/page/1-introduction",activity:"/shared/numeric-sequence-multiple-dataset",index:1,introText:"Three cars are moving with constant speed....",steps:["/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/1","/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/2","/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/3","/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/4","/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/5"],firstStep:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/1",contextVars:[]}],steps:[{url:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/1",activityPage:"/shared/numeric-sequence-multiple-dataset/page/1-introduction",beforeText:"<p>How much distance green car covers in 5 seconds?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Distance vs. Time",xAxis:"/shared/numeric-sequence-multiple-dataset/axes/1",yAxis:"/shared/numeric-sequence-multiple-dataset/axes/2",annotations:["segment-overlay-1"],highlightedAnnotations:[],data:["mercedez","bmw","bently"],datarefs:["dataref-1","dataref-2"],legends:["mercedez","bmw","bently"],activeDatadefs:["bmw"]},bottom:{type:"table",data:"bmw",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/2",responseTemplate:"/shared/numeric-sequence-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],100,0.01],step:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/2",activityPage:"/shared/numeric-sequence-multiple-dataset/page/1-introduction",beforeText:"<p>Hint: ask yourself, which is the y-axis and which is the x-axis?</p> <p>What is the y-coordinate of the point at the 5 second mark?</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Distance vs. Time",xAxis:"/shared/numeric-sequence-multiple-dataset/axes/1",yAxis:"/shared/numeric-sequence-multiple-dataset/axes/2",annotations:["segment-overlay-2"],highlightedAnnotations:[],data:["mercedez","bmw","bently"],datarefs:["dataref-1","dataref-2"],legends:["mercedez","bmw","bently"],activeDatadefs:["bmw"]},bottom:{type:"table",data:"bmw",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/3",responseTemplate:"/shared/numeric-sequence-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],100,0.01],step:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/3",activityPage:"/shared/numeric-sequence-multiple-dataset/page/1-introduction",beforeText:"<p>Hint: check the y-Coordinate of Green line at 5 seconds mark</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Distance vs. Time",xAxis:"/shared/numeric-sequence-multiple-dataset/axes/1",yAxis:"/shared/numeric-sequence-multiple-dataset/axes/2",annotations:["segment-overlay-3","segment-overlay-4"],highlightedAnnotations:[],data:["mercedez","bmw","bently"],datarefs:["dataref-1","dataref-2"],legends:["mercedez","bmw","bently"],activeDatadefs:["bmw"]},bottom:{type:"table",data:"bmw",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/4",responseTemplate:"/shared/numeric-sequence-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],100,0.01],step:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/4",activityPage:"/shared/numeric-sequence-multiple-dataset/page/1-introduction",beforeText:"<p>Take a closer look, it's 100 meters of distance.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Distance vs. Time",xAxis:"/shared/numeric-sequence-multiple-dataset/axes/1",yAxis:"/shared/numeric-sequence-multiple-dataset/axes/2",annotations:["segment-overlay-5"],highlightedAnnotations:[],data:["mercedez","bmw","bently"],datarefs:["dataref-1","dataref-2"],legends:["mercedez","bmw","bently"],activeDatadefs:["bmw"]},bottom:{type:"table",data:"bmw",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/numeric-sequence-multiple-dataset/page/1-introduction/step/5",activityPage:"/shared/numeric-sequence-multiple-dataset/page/1-introduction",beforeText:"<p>That's right. It is 100 meters of distance.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Distance vs. Time",xAxis:"/shared/numeric-sequence-multiple-dataset/axes/1",yAxis:"/shared/numeric-sequence-multiple-dataset/axes/2",annotations:["segment-overlay-6"],highlightedAnnotations:[],data:["mercedez","bmw","bently"],datarefs:["dataref-1","dataref-2"],legends:["mercedez","bmw","bently"],activeDatadefs:["bmw"]},bottom:{type:"table",data:"bmw",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[{url:"/shared/numeric-sequence-multiple-dataset/response-templates/numeric-1",templateString:"",fieldChoicesList:[null],initialValues:[""],fieldTypes:["numeric"]}],axes:[{url:"/shared/numeric-sequence-multiple-dataset/axes/1",units:"/shared/numeric-sequence-multiple-dataset/units/seconds",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/numeric-sequence-multiple-dataset/axes/2",units:"/shared/numeric-sequence-multiple-dataset/units/meters",min:0,max:200,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/numeric-sequence-multiple-dataset/datadefs/mercedez",name:"mercedez",activity:"/shared/numeric-sequence-multiple-dataset",xUnits:"/shared/numeric-sequence-multiple-dataset/units/seconds",yUnits:"/shared/numeric-sequence-multiple-dataset/units/meters",points:[],pointType:"dot",lineType:"connected",lineSnapDistance:0.5},{url:"/shared/numeric-sequence-multiple-dataset/datadefs/bmw",name:"bmw",activity:"/shared/numeric-sequence-multiple-dataset",xUnits:"/shared/numeric-sequence-multiple-dataset/units/seconds",yUnits:"/shared/numeric-sequence-multiple-dataset/units/meters",points:[[0,0],[1,20],[2,40],[3,60],[4,80],[5,100],[6,120],[7,140]],pointType:"dot",lineType:"connected",lineSnapDistance:0},{url:"/shared/numeric-sequence-multiple-dataset/datadefs/bently",name:"bently",activity:"/shared/numeric-sequence-multiple-dataset",xUnits:"/shared/numeric-sequence-multiple-dataset/units/seconds",yUnits:"/shared/numeric-sequence-multiple-dataset/units/meters",points:[],pointType:"dot",lineType:"connected",lineSnapDistance:0.5}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/numeric-sequence-multiple-dataset/datarefs/dataref-1",name:"dataref-1",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"mercedez",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:50,yIntercept:5}},{url:"/shared/numeric-sequence-multiple-dataset/datarefs/dataref-2",name:"dataref-2",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"bently",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:100,yIntercept:2}}]}],tags:[],annotations:[{type:"SegmentOverlay",records:[{url:"/shared/numeric-sequence-multiple-dataset/annotations/segment-overlay-1",name:"segment-overlay-1",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"bmw",color:"#000000",x1Record:1,x2Record:2},{url:"/shared/numeric-sequence-multiple-dataset/annotations/segment-overlay-2",name:"segment-overlay-2",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"bmw",color:"#ff0000",x1Record:1,x2Record:3},{url:"/shared/numeric-sequence-multiple-dataset/annotations/segment-overlay-3",name:"segment-overlay-3",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"bmw",color:"#00ff00",x1Record:3,isUnboundedLeft:true},{url:"/shared/numeric-sequence-multiple-dataset/annotations/segment-overlay-4",name:"segment-overlay-4",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"bmw",color:"#0000ff",x1Record:4,isUnboundedRight:true},{url:"/shared/numeric-sequence-multiple-dataset/annotations/segment-overlay-5",name:"segment-overlay-5",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"bmw",color:"#000000",x1Record:1,x2Record:2},{url:"/shared/numeric-sequence-multiple-dataset/annotations/segment-overlay-6",name:"segment-overlay-6",activity:"/shared/numeric-sequence-multiple-dataset",datadefName:"bmw",color:"#ffffff",x1Record:1,x2Record:2}]}],variables:[],units:[{url:"/shared/numeric-sequence-multiple-dataset/units/meters",activity:"/shared/numeric-sequence-multiple-dataset",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/numeric-sequence-multiple-dataset/units/seconds",activity:"/shared/numeric-sequence-multiple-dataset",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/pick-a-point-on-a-line-sequence-with-two-datasets"]={_id:"pick-a-point-on-a-line-sequence-with-two-datasets.df6",_rev:1,data_format_version:6,activity:{title:"Pick a point on a line sequence with two datasets",url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",owner:"shared",pages:["/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page"],axes:["/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/1","/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/2"]},pages:[{name:"First Page",url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",index:1,introText:"<p>This is an example of an accelerating car and a ball rolling on a slope.</p>",steps:["/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/1","/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/2","/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/3","/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/4","/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/5"],firstStep:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/1",contextVars:[]}],steps:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/1",activityPage:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page",beforeText:"Click on the point where distance covered by the car is between 22 and 42",paneConfig:"split",panes:{top:{type:"graph",title:"The Graph",xAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/2",annotations:["segment-overlay-1","highlighted-point-1"],highlightedAnnotations:[],data:["RollingBall","SmallCar"],datarefs:["dataref-1"],legends:["RollingBall","SmallCar"],activeDatadefs:["SmallCar"]},bottom:{type:"table",data:"SmallCar",xLabel:"Seconds",yLabel:"Meters",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"SmallCar"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/2",responseBranches:[{criterion:["coordinatesInRange","tag-1",6,null,8,null],step:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/2",activityPage:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page",beforeText:"Look at the graph...",paneConfig:"split",panes:{top:{type:"graph",title:"The Graph",xAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/2",annotations:["segment-overlay-2","highlighted-point-1"],highlightedAnnotations:[],data:["RollingBall","SmallCar"],datarefs:["dataref-1"],legends:["RollingBall","SmallCar"],activeDatadefs:["SmallCar"]},bottom:{type:"table",data:"SmallCar",xLabel:"Seconds",yLabel:"Meters",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"SmallCar"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/3",responseBranches:[{criterion:["coordinatesInRange","tag-1",6,null,8,null],step:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/3",activityPage:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page",beforeText:"In these two intervals....",paneConfig:"split",panes:{top:{type:"graph",title:"The Graph",xAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/2",annotations:["segment-overlay-3","highlighted-point-1"],highlightedAnnotations:[],data:["RollingBall","SmallCar"],datarefs:["dataref-1"],legends:["RollingBall","SmallCar"],activeDatadefs:["SmallCar"]},bottom:{type:"table",data:"SmallCar",xLabel:"Seconds",yLabel:"Meters",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"SmallCar"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/4",responseBranches:[{criterion:["coordinatesInRange","tag-1",6,null,8,null],step:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/4",activityPage:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page",beforeText:"If you look carefully, ....",paneConfig:"split",panes:{top:{type:"graph",title:"The Graph",xAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/2",annotations:["segment-overlay-4"],highlightedAnnotations:[],data:["RollingBall","SmallCar"],datarefs:["dataref-1"],legends:["RollingBall","SmallCar"],activeDatadefs:["SmallCar"]},bottom:{type:"table",data:"SmallCar",xLabel:"Seconds",yLabel:"Meters",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page/step/5",activityPage:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/page/1-first-page",beforeText:"Four minutes into her run ....",paneConfig:"split",panes:{top:{type:"graph",title:"The Graph",xAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/2",annotations:["segment-overlay-5"],highlightedAnnotations:[],data:["RollingBall","SmallCar"],datarefs:["dataref-1"],legends:["RollingBall","SmallCar"],activeDatadefs:["SmallCar"]},bottom:{type:"table",data:"SmallCar",xLabel:"Seconds",yLabel:"Meters",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/1",units:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/seconds",min:0,max:10,nSteps:10,label:"Time elapsed"},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/axes/2",units:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/meters",min:0,max:100,nSteps:10,label:"Distance covered"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/datadefs/RollingBall",name:"RollingBall",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",xUnits:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/seconds",yUnits:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/meters",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/datadefs/SmallCar",name:"SmallCar",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",xUnits:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/seconds",yUnits:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/meters",points:[[0,0],[1,0.5],[2,2],[3,5],[4,9],[5,15],[6,22],[7,30],[8,42],[9,58],[10,78]],pointType:"dot",lineType:"none",lineSnapDistance:0}]}],datarefs:[{type:"CompositeEquation",records:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/datarefs/dataref-1",name:"dataref-1",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",datadefName:"RollingBall",expression:"y = 2.5 * x + x",xInterval:0.01,params:{}}]}],tags:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/tags/tag-1",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",name:"tag-1"}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",datadefName:"SmallCar",tag:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/tags/tag-1",color:"#1f77b4"}]},{type:"SegmentOverlay",records:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/annotations/segment-overlay-1",name:"segment-overlay-1",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",datadefName:"SmallCar",color:"#000000",x1Record:6,x2Record:8},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/annotations/segment-overlay-2",name:"segment-overlay-2",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",datadefName:"SmallCar",color:"#ff0000",x1Record:6,x2Record:8},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/annotations/segment-overlay-3",name:"segment-overlay-3",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",datadefName:"SmallCar",color:"#00ff00",x1Record:6,x2Record:8},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/annotations/segment-overlay-4",name:"segment-overlay-4",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",datadefName:"SmallCar",color:"#000000",x1Record:6,x2Record:8},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/annotations/segment-overlay-5",name:"segment-overlay-5",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",datadefName:"SmallCar",color:"#000000",x1Record:6,x2Record:8}]}],variables:[],units:[{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/meters",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/minutes",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/meters per second",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"},{url:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets/units/seconds",activity:"/shared/pick-a-point-on-a-line-sequence-with-two-datasets",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/pick-a-point-on-a-line-sequence"]={_id:"pick-a-point-on-a-line-sequence.df6",_rev:1,data_format_version:6,activity:{title:"Pick A Point On A Line Sequence",url:"/shared/pick-a-point-on-a-line-sequence",owner:"shared",pages:["/shared/pick-a-point-on-a-line-sequence/page/1-introduction"],axes:["/shared/pick-a-point-on-a-line-sequence/axes/1","/shared/pick-a-point-on-a-line-sequence/axes/2"]},pages:[{name:"Introduction",url:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction",activity:"/shared/pick-a-point-on-a-line-sequence",index:1,introText:"In this activity....",steps:["/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/1","/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/2","/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/3","/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/4","/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/5"],firstStep:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/1",contextVars:[]}],steps:[{url:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/1",activityPage:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction",beforeText:"Click on the line where x is between 1 and 2",paneConfig:"split",panes:{top:{type:"graph",title:"y = 0.5x + 5",xAxis:"/shared/pick-a-point-on-a-line-sequence/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-1","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/2",responseBranches:[{criterion:["coordinatesInRange","tag-1",1,null,2,null],step:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/2",activityPage:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction",beforeText:"Look at the graph...",paneConfig:"split",panes:{top:{type:"graph",title:"y = 0.5x + 5",xAxis:"/shared/pick-a-point-on-a-line-sequence/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-2","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/3",responseBranches:[{criterion:["coordinatesInRange","tag-1",1,null,2,null],step:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/3",activityPage:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction",beforeText:"In these two intervals....",paneConfig:"split",panes:{top:{type:"graph",title:"y = 0.5x + 5",xAxis:"/shared/pick-a-point-on-a-line-sequence/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-3","segment-overlay-4","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/4",responseBranches:[{criterion:["coordinatesInRange","tag-1",1,null,2,null],step:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/4",activityPage:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction",beforeText:"If you look carefully, ....",paneConfig:"split",panes:{top:{type:"graph",title:"y = 0.5x + 5",xAxis:"/shared/pick-a-point-on-a-line-sequence/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-5"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction/step/5",activityPage:"/shared/pick-a-point-on-a-line-sequence/page/1-introduction",beforeText:"Four minutes into her run ....",paneConfig:"split",panes:{top:{type:"graph",title:"y = 0.5x + 5",xAxis:"/shared/pick-a-point-on-a-line-sequence/axes/1",yAxis:"/shared/pick-a-point-on-a-line-sequence/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-6"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/pick-a-point-on-a-line-sequence/axes/1",min:0,max:10,nSteps:10,label:"x"},{url:"/shared/pick-a-point-on-a-line-sequence/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/pick-a-point-on-a-line-sequence/datadefs/datadef-1",name:"datadef-1",activity:"/shared/pick-a-point-on-a-line-sequence",xLabel:"x",xShortLabel:"x",yLabel:"y",yShortLabel:"y",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/pick-a-point-on-a-line-sequence/datarefs/dataref-1",name:"dataref-1",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:0.5,yIntercept:5}}]}],tags:[{url:"/shared/pick-a-point-on-a-line-sequence/tags/tag-1",activity:"/shared/pick-a-point-on-a-line-sequence",name:"tag-1"}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/pick-a-point-on-a-line-sequence/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",tag:"/shared/pick-a-point-on-a-line-sequence/tags/tag-1",color:"#1f77b4"}]},{type:"SegmentOverlay",records:[{url:"/shared/pick-a-point-on-a-line-sequence/annotations/segment-overlay-1",name:"segment-overlay-1",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",color:"#000000",x1Record:1,x2Record:2},{url:"/shared/pick-a-point-on-a-line-sequence/annotations/segment-overlay-2",name:"segment-overlay-2",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",color:"#ff0000",x1Record:1,x2Record:2},{url:"/shared/pick-a-point-on-a-line-sequence/annotations/segment-overlay-3",name:"segment-overlay-3",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",color:"#00ff00",x1Record:3,isUnboundedLeft:true},{url:"/shared/pick-a-point-on-a-line-sequence/annotations/segment-overlay-4",name:"segment-overlay-4",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",color:"#0000ff",x1Record:4,isUnboundedRight:true},{url:"/shared/pick-a-point-on-a-line-sequence/annotations/segment-overlay-5",name:"segment-overlay-5",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",color:"#000000",x1Record:1,x2Record:2},{url:"/shared/pick-a-point-on-a-line-sequence/annotations/segment-overlay-6",name:"segment-overlay-6",activity:"/shared/pick-a-point-on-a-line-sequence",datadefName:"datadef-1",color:"#ffffff",x1Record:1,x2Record:2}]}],variables:[],units:[]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/pick-a-point-with-composite-expression"]={_id:"pick-a-point-with-composite-expression.df6",_rev:1,data_format_version:6,activity:{title:"Pick A Point With Composite Expression",url:"/shared/pick-a-point-with-composite-expression",owner:"shared",pages:["/shared/pick-a-point-with-composite-expression/page/1-introduction"],axes:["/shared/pick-a-point-with-composite-expression/axes/1","/shared/pick-a-point-with-composite-expression/axes/2"]},pages:[{name:"Introduction",url:"/shared/pick-a-point-with-composite-expression/page/1-introduction",activity:"/shared/pick-a-point-with-composite-expression",index:1,introText:"In this activity....",steps:["/shared/pick-a-point-with-composite-expression/page/1-introduction/step/1","/shared/pick-a-point-with-composite-expression/page/1-introduction/step/2","/shared/pick-a-point-with-composite-expression/page/1-introduction/step/3","/shared/pick-a-point-with-composite-expression/page/1-introduction/step/4","/shared/pick-a-point-with-composite-expression/page/1-introduction/step/5"],firstStep:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/1",contextVars:[]}],steps:[{url:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/1",activityPage:"/shared/pick-a-point-with-composite-expression/page/1-introduction",beforeText:"Click on the line where x is between 10 and 20",paneConfig:"split",panes:{top:{type:"graph",title:"y = log(x) + sin(x)",xAxis:"/shared/pick-a-point-with-composite-expression/axes/1",yAxis:"/shared/pick-a-point-with-composite-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-1","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/2",responseBranches:[{criterion:["coordinatesInRange","tag-1",10,null,20,null],step:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/2",activityPage:"/shared/pick-a-point-with-composite-expression/page/1-introduction",beforeText:"Look at the graph...",paneConfig:"split",panes:{top:{type:"graph",title:"y = log(x) + sin(x)",xAxis:"/shared/pick-a-point-with-composite-expression/axes/1",yAxis:"/shared/pick-a-point-with-composite-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-2","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/3",responseBranches:[{criterion:["coordinatesInRange","tag-1",10,null,20,null],step:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/3",activityPage:"/shared/pick-a-point-with-composite-expression/page/1-introduction",beforeText:"In these two intervals....",paneConfig:"split",panes:{top:{type:"graph",title:"y = log(x) + sin(x)",xAxis:"/shared/pick-a-point-with-composite-expression/axes/1",yAxis:"/shared/pick-a-point-with-composite-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-3","segment-overlay-4","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/4",responseBranches:[{criterion:["coordinatesInRange","tag-1",10,null,20,null],step:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/4",activityPage:"/shared/pick-a-point-with-composite-expression/page/1-introduction",beforeText:"If you look carefully, ....",paneConfig:"split",panes:{top:{type:"graph",title:"y = log(x) + sin(x)",xAxis:"/shared/pick-a-point-with-composite-expression/axes/1",yAxis:"/shared/pick-a-point-with-composite-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-5"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/pick-a-point-with-composite-expression/page/1-introduction/step/5",activityPage:"/shared/pick-a-point-with-composite-expression/page/1-introduction",beforeText:"Four minutes into her run ....",paneConfig:"split",panes:{top:{type:"graph",title:"y = log(x) + sin(x)",xAxis:"/shared/pick-a-point-with-composite-expression/axes/1",yAxis:"/shared/pick-a-point-with-composite-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-6"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/pick-a-point-with-composite-expression/axes/1",min:0,max:100,nSteps:10,label:"x"},{url:"/shared/pick-a-point-with-composite-expression/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/pick-a-point-with-composite-expression/datadefs/datadef-1",name:"datadef-1",activity:"/shared/pick-a-point-with-composite-expression",xLabel:"x",xShortLabel:"x",yLabel:"y",yShortLabel:"y",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5}]}],datarefs:[{type:"CompositeEquation",records:[{url:"/shared/pick-a-point-with-composite-expression/datarefs/dataref-1",name:"dataref-1",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",expression:"y = log(x) + sin(x)",xInterval:0.1,params:{}}]}],tags:[{url:"/shared/pick-a-point-with-composite-expression/tags/tag-1",activity:"/shared/pick-a-point-with-composite-expression",name:"tag-1"}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/pick-a-point-with-composite-expression/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",tag:"/shared/pick-a-point-with-composite-expression/tags/tag-1",color:"#1f77b4"}]},{type:"SegmentOverlay",records:[{url:"/shared/pick-a-point-with-composite-expression/annotations/segment-overlay-1",name:"segment-overlay-1",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",color:"#000000",x1Record:10,x2Record:20},{url:"/shared/pick-a-point-with-composite-expression/annotations/segment-overlay-2",name:"segment-overlay-2",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",color:"#ff0000",x1Record:10,x2Record:20},{url:"/shared/pick-a-point-with-composite-expression/annotations/segment-overlay-3",name:"segment-overlay-3",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",color:"#00ff00",x1Record:30,isUnboundedLeft:true},{url:"/shared/pick-a-point-with-composite-expression/annotations/segment-overlay-4",name:"segment-overlay-4",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",color:"#0000ff",x1Record:40,isUnboundedRight:true},{url:"/shared/pick-a-point-with-composite-expression/annotations/segment-overlay-5",name:"segment-overlay-5",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",color:"#000000",x1Record:10,x2Record:20},{url:"/shared/pick-a-point-with-composite-expression/annotations/segment-overlay-6",name:"segment-overlay-6",activity:"/shared/pick-a-point-with-composite-expression",datadefName:"datadef-1",color:"#ffffff",x1Record:10,x2Record:20}]}],variables:[],units:[]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/pick-a-point-with-sinusoidal-expression"]={_id:"pick-a-point-with-sinusoidal-expression.df6",_rev:1,data_format_version:6,activity:{title:"Pick A Point With Sinusoidal Expression",url:"/shared/pick-a-point-with-sinusoidal-expression",owner:"shared",pages:["/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction"],axes:["/shared/pick-a-point-with-sinusoidal-expression/axes/1","/shared/pick-a-point-with-sinusoidal-expression/axes/2"]},pages:[{name:"Introduction",url:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction",activity:"/shared/pick-a-point-with-sinusoidal-expression",index:1,introText:"In this activity....",steps:["/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/1","/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/2","/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/3","/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/4","/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/5"],firstStep:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/1",contextVars:[]}],steps:[{url:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/1",activityPage:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction",beforeText:"Click on the line where x is between 1 and 2",paneConfig:"split",panes:{top:{type:"graph",title:"y = sin(2*x) + 5",xAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/1",yAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-1","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/2",responseBranches:[{criterion:["coordinatesInRange","tag-1",1,null,2,null],step:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/2",activityPage:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction",beforeText:"Look at the graph...",paneConfig:"split",panes:{top:{type:"graph",title:"y = sin(2*x) + 5",xAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/1",yAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-2","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/3",responseBranches:[{criterion:["coordinatesInRange","tag-1",1,null,2,null],step:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/3",activityPage:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction",beforeText:"In these two intervals....",paneConfig:"split",panes:{top:{type:"graph",title:"y = sin(2*x) + 5",xAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/1",yAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-3","segment-overlay-4","highlighted-point-1"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"datadef-1"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/4",responseBranches:[{criterion:["coordinatesInRange","tag-1",1,null,2,null],step:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/5"}],isFinalStep:false},{url:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/4",activityPage:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction",beforeText:"If you look carefully, ....",paneConfig:"split",panes:{top:{type:"graph",title:"y = sin(2*x) + 5",xAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/1",yAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-5"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction/step/5",activityPage:"/shared/pick-a-point-with-sinusoidal-expression/page/1-introduction",beforeText:"Four minutes into her run ....",paneConfig:"split",panes:{top:{type:"graph",title:"y = sin(2*x) + 5",xAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/1",yAxis:"/shared/pick-a-point-with-sinusoidal-expression/axes/2",showCrossHairs:true,showGraphGrid:true,showToolTipCoords:false,annotations:["segment-overlay-6"],highlightedAnnotations:[],data:["datadef-1"],datarefs:["dataref-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/pick-a-point-with-sinusoidal-expression/axes/1",min:0,max:10,nSteps:10,label:"x"},{url:"/shared/pick-a-point-with-sinusoidal-expression/axes/2",min:0,max:10,nSteps:10,label:"y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/pick-a-point-with-sinusoidal-expression/datadefs/datadef-1",name:"datadef-1",activity:"/shared/pick-a-point-with-sinusoidal-expression",xLabel:"x",xShortLabel:"x",yLabel:"y",yShortLabel:"y",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5}]}],datarefs:[{type:"SinusoidalEquation",records:[{url:"/shared/pick-a-point-with-sinusoidal-expression/datarefs/dataref-1",name:"dataref-1",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",expressionForm:"sine-cosine",angularFunction:"sine",xInterval:0.01,params:{amplitude:1,frequency:2,phase:0,centerAmplitude:5}}]}],tags:[{url:"/shared/pick-a-point-with-sinusoidal-expression/tags/tag-1",activity:"/shared/pick-a-point-with-sinusoidal-expression",name:"tag-1"}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/pick-a-point-with-sinusoidal-expression/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",tag:"/shared/pick-a-point-with-sinusoidal-expression/tags/tag-1",color:"#1f77b4"}]},{type:"SegmentOverlay",records:[{url:"/shared/pick-a-point-with-sinusoidal-expression/annotations/segment-overlay-1",name:"segment-overlay-1",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",color:"#000000",x1Record:1,x2Record:2},{url:"/shared/pick-a-point-with-sinusoidal-expression/annotations/segment-overlay-2",name:"segment-overlay-2",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",color:"#ff0000",x1Record:1,x2Record:2},{url:"/shared/pick-a-point-with-sinusoidal-expression/annotations/segment-overlay-3",name:"segment-overlay-3",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",color:"#00ff00",x1Record:3,isUnboundedLeft:true},{url:"/shared/pick-a-point-with-sinusoidal-expression/annotations/segment-overlay-4",name:"segment-overlay-4",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",color:"#0000ff",x1Record:4,isUnboundedRight:true},{url:"/shared/pick-a-point-with-sinusoidal-expression/annotations/segment-overlay-5",name:"segment-overlay-5",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",color:"#000000",x1Record:1,x2Record:2},{url:"/shared/pick-a-point-with-sinusoidal-expression/annotations/segment-overlay-6",name:"segment-overlay-6",activity:"/shared/pick-a-point-with-sinusoidal-expression",datadefName:"datadef-1",color:"#ffffff",x1Record:1,x2Record:2}]}],variables:[],units:[]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/really-long-text"]={_id:"really-long-text.df6",_rev:1,data_format_version:6,activity:{title:"Really long text",url:"/shared/really-long-text",owner:"shared",pages:["/shared/really-long-text/page/1-1-the-page-with-lots-of-text"],axes:[],authorName:"Parker Morse"},pages:[{name:"1 The page with lots of text",url:"/shared/really-long-text/page/1-1-the-page-with-lots-of-text",activity:"/shared/really-long-text",index:1,introText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus dui augue, sagittis sed elit tristique, ultrices sagittis lorem. Suspendisse lacus orci, dignissim a porttitor nec, aliquam venenatis orci. In fermentum fermentum diam sit amet aliquam. Donec sed adipiscing mi, id posuere tortor. Interdum et malesuada fames ac ante ipsum primis in faucibus. Cras non massa egestas felis lacinia pellentesque et in turpis. Maecenas et volutpat tellus.\r\nDonec venenatis ultrices enim at congue. Fusce iaculis bibendum magna, ac pellentesque enim mollis sed. Donec eleifend est nec sollicitudin ornare. Quisque ac mi ac augue blandit eleifend. Aliquam luctus eros et dolor fringilla, vel fermentum augue blandit. Donec varius, erat vel lobortis aliquet, neque arcu aliquam enim, sit amet venenatis justo justo non diam. Nunc sit amet augue dolor.\r\nPellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam aliquet, lorem non sagittis accumsan, turpis quam malesuada nulla, et porta turpis dolor eget massa. Nunc et tristique eros. Ut vitae lacinia tellus. Nam mattis et diam id ultrices. Integer varius urna lectus, a feugiat mauris aliquam quis. Integer lobortis orci ornare, dapibus massa in, sodales sapien. Vivamus sem quam, tincidunt quis venenatis at, faucibus at dui. Maecenas sed metus laoreet, varius leo at, vehicula dolor.\r\nNulla congue elit dictum, eleifend massa eu, convallis odio. Etiam est ligula, dapibus ac laoreet non, mattis fermentum lorem. Nulla cursus rhoncus dignissim. Nullam pretium faucibus ligula, in interdum purus tempus ut. Fusce interdum aliquet elit. Praesent ac placerat lacus. Duis in volutpat sapien, non faucibus lacus. Curabitur a risus non eros hendrerit feugiat quis vel dolor. Morbi sed fermentum arcu. Mauris non sapien pretium, imperdiet mauris quis, dignissim felis. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque gravida arcu in vulputate hendrerit.\r\nMaecenas tortor mauris, euismod sed elit a, viverra venenatis magna. Quisque lacinia tempor facilisis. Nulla facilisi. Aliquam et urna metus. In ut metus sollicitudin velit tempus facilisis non at dui. Nullam pulvinar vel ipsum ac dignissim. Proin ullamcorper magna id velit lobortis consectetur. Aenean tristique a nibh scelerisque tempor. Vestibulum vitae libero dui. Donec non mattis massa. Aenean faucibus iaculis tempor. Nam egestas laoreet mollis. Nunc nec facilisis mi. Sed ac neque fringilla, tincidunt dolor id, euismod libero. Sed scelerisque egestas aliquet. Etiam sed suscipit nunc, ac feugiat nibh.\r\nNulla at molestie lacus, ac ullamcorper sapien. Donec sollicitudin arcu sed diam adipiscing ultrices. Morbi eget blandit lacus, nec viverra sem. Aenean bibendum non nulla sit amet hendrerit. Cras interdum lacinia condimentum. Praesent pretium, sapien sed eleifend vestibulum, quam lacus auctor lorem, vitae elementum lorem tortor at lectus. Etiam malesuada felis et dui ultricies, vel accumsan lorem tincidunt.\r\nQuisque luctus, quam vitae tristique dapibus, nibh tortor porta metus, vitae placerat ante sapien quis libero. Nulla egestas velit sed enim porta, vel commodo sapien volutpat. Aliquam bibendum eget orci quis euismod. Praesent lectus dui, luctus quis elit vitae, interdum commodo nulla. Integer feugiat orci quis facilisis commodo. Nulla ut magna at velit rhoncus commodo vitae et orci. Nam sed nulla risus. Proin bibendum nisl nec vestibulum vulputate. Nam convallis cursus lorem eget luctus.\r\nPhasellus at purus eget massa mattis malesuada in vel quam. Mauris hendrerit diam dignissim erat euismod, ut malesuada mi pulvinar. Praesent convallis quam leo, vel mollis tellus eleifend non. Integer feugiat vitae massa id luctus. Vestibulum auctor egestas interdum. Nam faucibus enim massa, ut consectetur ligula congue id. Nullam justo enim, pellentesque sit amet urna feugiat, commodo mollis leo. Nullam sit amet pulvinar metus. Proin porta tincidunt turpis, ac egestas velit lacinia in.\r\n",steps:["/shared/really-long-text/page/1-1-the-page-with-lots-of-text/step/1"],firstStep:"/shared/really-long-text/page/1-1-the-page-with-lots-of-text/step/1",contextVars:[]}],steps:[{url:"/shared/really-long-text/page/1-1-the-page-with-lots-of-text/step/1",activityPage:"/shared/really-long-text/page/1-1-the-page-with-lots-of-text",beforeText:"<p>This is instruction text which is supposed to appear under the page text.</p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eget urna tincidunt turpis venenatis bibendum a a diam. Sed dui sem, tristique eget viverra eu, dignissim eget elit. Aenean fringilla tellus a justo condimentum consequat. Nunc euismod tempus vestibulum. Pellentesque iaculis posuere ante in sollicitudin. Nullam malesuada risus eget nibh dictum imperdiet. Donec risus ante, semper vel blandit vitae, luctus sed risus. Quisque ut nunc nisi. Maecenas dignissim, sapien convallis vestibulum pellentesque, tellus metus venenatis magna, eget faucibus odio risus eget quam. Cras hendrerit iaculis nisl eu pellentesque. Duis convallis viverra ligula, at convallis nisi porttitor id. Cras nec nibh sagittis, consequat justo et, viverra tortor. Aliquam facilisis mollis nisl nec scelerisque. Quisque a diam tellus.</p> <p>Maecenas rhoncus vitae nisi sed lacinia. Cras eu viverra diam. Ut laoreet porta tortor, vitae aliquam felis vehicula sed. Proin elementum mi at orci posuere facilisis. Curabitur sit amet sodales purus. Morbi eu gravida lorem. Proin sed sodales leo, ac tincidunt nunc. Duis id tincidunt metus. Suspendisse sit amet urna vestibulum, lacinia ante vel, fringilla purus. Phasellus quis consequat leo, facilisis pharetra libero. Sed felis est, ornare sed porta non, pretium eget purus. Fusce posuere ipsum nunc, eu varius mi euismod quis. Nunc vel velit sit amet odio tristique blandit.</p>",paneConfig:"single",panes:null,isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[],datadefs:[],tags:[],annotations:[],variables:[],units:[{url:"/shared/really-long-text/units/Time",activity:"/shared/really-long-text",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/really-long-text/units/Distance",activity:"/shared/really-long-text",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/really-long-text/units/degrees Celsius",activity:"/shared/really-long-text",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/really-long-text/units/minutes",activity:"/shared/really-long-text",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/really-long-text/units/meters",activity:"/shared/really-long-text",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/really-long-text/units/seconds",activity:"/shared/really-long-text",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/really-long-text/units/centimeters",activity:"/shared/really-long-text",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/really-long-text/units/grams",activity:"/shared/really-long-text",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/really-long-text/units/miles",activity:"/shared/really-long-text",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/really-long-text/units/hours",activity:"/shared/really-long-text",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/really-long-text/units/Celsius",activity:"/shared/really-long-text",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/really-long-text/units/dollars",activity:"/shared/really-long-text",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/really-long-text/units/inches",activity:"/shared/really-long-text",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/really-long-text/units/years",activity:"/shared/really-long-text",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/really-long-text/units/millimeters",activity:"/shared/really-long-text",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/really-long-text/units/parts per million",activity:"/shared/really-long-text",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"},{url:"/shared/really-long-text/units/meters per second",activity:"/shared/really-long-text",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/reflect-a-line"]={_id:"reflect-a-line.df6",_rev:1,data_format_version:6,activity:{title:"Reflect a line",url:"/shared/reflect-a-line",owner:"shared",pages:["/shared/reflect-a-line/page/1-1-reflect-a-line"],axes:["/shared/reflect-a-line/axes/1","/shared/reflect-a-line/axes/2"],authorName:"Andy Zucker"},pages:[{name:"1 Reflect a line",url:"/shared/reflect-a-line/page/1-1-reflect-a-line",activity:"/shared/reflect-a-line",index:1,introText:"Here is a one-page draft of reflecting a line.",steps:["/shared/reflect-a-line/page/1-1-reflect-a-line/step/1","/shared/reflect-a-line/page/1-1-reflect-a-line/step/2","/shared/reflect-a-line/page/1-1-reflect-a-line/step/3","/shared/reflect-a-line/page/1-1-reflect-a-line/step/4","/shared/reflect-a-line/page/1-1-reflect-a-line/step/5","/shared/reflect-a-line/page/1-1-reflect-a-line/step/6","/shared/reflect-a-line/page/1-1-reflect-a-line/step/7","/shared/reflect-a-line/page/1-1-reflect-a-line/step/8","/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"],firstStep:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/1",contextVars:[]}],steps:[{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/1",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"Construct a line that is a reflection across the X-axis of Y=3-X.",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"Empty dataset"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/2",submissibilityCriterion:["=",["lineCount"],1],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/4"},{criterion:["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/3"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/2",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>No, please try again.</b><p>Construct a line that is a reflection across the X-axis of Y=3-X.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"Empty dataset"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/5",submissibilityCriterion:["or",["pointMoved","Empty dataset",1],["pointMoved","Empty dataset",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/7"},{criterion:["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/6"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/3",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>Your slope is not correct. Try again.</b><p>Construct a line that is a reflection across the X-axis of Y=3-X.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"Empty dataset"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/5",submissibilityCriterion:["or",["pointMoved","Empty dataset",1],["pointMoved","Empty dataset",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/7"},{criterion:["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/6"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/4",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>Your y-intercept is not correct. Try again.</b><p>Construct a line that is a reflection across the X-axis of Y=3-X.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"Empty dataset"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/5",submissibilityCriterion:["or",["pointMoved","Empty dataset",1],["pointMoved","Empty dataset",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"},{criterion:["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/7"},{criterion:["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/6"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/5",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>No, please try again.</b><p>Construct a line that is a reflection across the X-axis of Y=3-X.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"Empty dataset"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/8",submissibilityCriterion:["or",["pointMoved","Empty dataset",1],["pointMoved","Empty dataset",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/6",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>Your slope is not correct. Try again.</b><p>Construct a line that is a reflection across the X-axis of Y=3-X.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"Empty dataset"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/8",submissibilityCriterion:["or",["pointMoved","Empty dataset",1],["pointMoved","Empty dataset",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/7",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>Your y-intercept is not correct. Try again.</b><p>Construct a line that is a reflection across the X-axis of Y=3-X.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},tools:[{name:"graphing",setup:{pane:"top",shape:"singleLine",annotationName:"freehand-sketch-1",data:"Empty dataset"}}],submitButtonTitle:"Check My Answer",defaultBranch:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/8",submissibilityCriterion:["or",["pointMoved","Empty dataset",1],["pointMoved","Empty dataset",2]],responseBranches:[{criterion:["and",["withinAbsTolerance",1,["lineSlope","freehand-sketch-1",1],0.1],["withinAbsTolerance",-3,["yIntercept","freehand-sketch-1",1],0.1]],step:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9"}],isFinalStep:false,substitutedExpressions:[]},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/8",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>Here is the correct line.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x","Correct Line (Page 1)"],datarefs:["dataref-1","dataref-2"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x","Correct Line (Page 1)"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/reflect-a-line/page/1-1-reflect-a-line/step/9",activityPage:"/shared/reflect-a-line/page/1-1-reflect-a-line",beforeText:"<b>Yes, that is correct.</b>",paneConfig:"split",panes:{top:{type:"graph",title:"y=3-X",xAxis:"/shared/reflect-a-line/axes/1",yAxis:"/shared/reflect-a-line/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:false,annotations:["freehand-sketch-1"],highlightedAnnotations:[],data:["Empty dataset","y=3-x","Correct Line (Page 1)"],datarefs:["dataref-1","dataref-2"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["y=3-x","Correct Line (Page 1)"]},activeDatadefs:["Empty dataset"]},bottom:{type:"table",data:"Empty dataset",xLabel:"X",yLabel:"Y",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/reflect-a-line/axes/1",min:-5,max:5,nSteps:10,label:"X"},{url:"/shared/reflect-a-line/axes/2",min:-5,max:5,nSteps:10,label:"Y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/reflect-a-line/datadefs/Empty dataset",name:"Empty dataset",activity:"/shared/reflect-a-line",points:[],pointType:"dot",lineType:"none",lineSnapDistance:0.1},{url:"/shared/reflect-a-line/datadefs/y=3-x",name:"y=3-x",activity:"/shared/reflect-a-line",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.1},{url:"/shared/reflect-a-line/datadefs/Correct Line (Page 1)",name:"Correct Line (Page 1)",activity:"/shared/reflect-a-line",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.1,color:"#17becf"}]}],datarefs:[{type:"CompositeEquation",records:[{url:"/shared/reflect-a-line/datarefs/dataref-1",name:"dataref-1",activity:"/shared/reflect-a-line",datadefName:"y=3-x",expression:"y = 3-x",xInterval:0.1,params:{}}]},{type:"LinearEquation",records:[{url:"/shared/reflect-a-line/datarefs/dataref-2",name:"dataref-2",activity:"/shared/reflect-a-line",datadefName:"Correct Line (Page 1)",expressionForm:"slope-intercept",xInterval:0.1,params:{slope:1,yIntercept:-3}}]}],tags:[],annotations:[{type:"FreehandSketch",records:[{url:"/shared/reflect-a-line/annotations/freehand-sketch-1",name:"freehand-sketch-1",activity:"/shared/reflect-a-line",color:"#CC0000",points:[]}]}],variables:[],units:[{url:"/shared/reflect-a-line/units/Time",activity:"/shared/reflect-a-line",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/reflect-a-line/units/Distance",activity:"/shared/reflect-a-line",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/reflect-a-line/units/degrees Celsius",activity:"/shared/reflect-a-line",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/reflect-a-line/units/minutes",activity:"/shared/reflect-a-line",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/reflect-a-line/units/meters",activity:"/shared/reflect-a-line",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/reflect-a-line/units/seconds",activity:"/shared/reflect-a-line",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/reflect-a-line/units/centimeters",activity:"/shared/reflect-a-line",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/reflect-a-line/units/grams",activity:"/shared/reflect-a-line",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/reflect-a-line/units/miles",activity:"/shared/reflect-a-line",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/reflect-a-line/units/hours",activity:"/shared/reflect-a-line",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/reflect-a-line/units/Celsius",activity:"/shared/reflect-a-line",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/reflect-a-line/units/dollars",activity:"/shared/reflect-a-line",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/reflect-a-line/units/inches",activity:"/shared/reflect-a-line",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/reflect-a-line/units/years",activity:"/shared/reflect-a-line",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/reflect-a-line/units/millimeters",activity:"/shared/reflect-a-line",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/reflect-a-line/units/parts per million",activity:"/shared/reflect-a-line",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"},{url:"/shared/reflect-a-line/units/meters per second",activity:"/shared/reflect-a-line",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/sensor-graph-activity"]={_id:"sensor-graph-activity.df6",_rev:1,data_format_version:6,activity:{title:"Sensor Graph Activity",url:"/shared/sensor-graph-activity",owner:"shared",pages:["/shared/sensor-graph-activity/page/1-sensor-graph-page"],axes:["/shared/sensor-graph-activity/axes/1","/shared/sensor-graph-activity/axes/2"]},pages:[{name:"Sensor graph page",url:"/shared/sensor-graph-activity/page/1-sensor-graph-page",activity:"/shared/sensor-graph-activity",index:1,introText:"In this activity, you'll walk back and forth in front of the sensor.",steps:["/shared/sensor-graph-activity/page/1-sensor-graph-page/step/1"],firstStep:"/shared/sensor-graph-activity/page/1-sensor-graph-page/step/1"}],steps:[{url:"/shared/sensor-graph-activity/page/1-sensor-graph-page/step/1",activityPage:"/shared/sensor-graph-activity/page/1-sensor-graph-page",paneConfig:"split",panes:{top:{type:"graph",title:"Back and Forth",xAxis:"/shared/sensor-graph-activity/axes/1",yAxis:"/shared/sensor-graph-activity/axes/2",annotations:[],data:["datadef-1"]},bottom:{type:"table",data:"datadef-1",annotations:[],xLabel:"Time",yLabel:"Position"}},tools:[{name:"sensor",setup:{controlsPane:"top",data:"datadef-1"}}],isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/sensor-graph-activity/axes/1",units:"/shared/sensor-graph-activity/units/Time",min:0,max:20,nSteps:10,label:"Time"},{url:"/shared/sensor-graph-activity/axes/2",units:"/shared/sensor-graph-activity/units/Distance",min:0,max:5,nSteps:10,label:"Position"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/sensor-graph-activity/datadefs/datadef-1",name:"datadef-1",activity:"/shared/sensor-graph-activity",xUnits:"/shared/sensor-graph-activity/units/Time",xLabel:"Time",xShortLabel:"Time",yUnits:"/shared/sensor-graph-activity/units/Distance",yLabel:"Position",yShortLabel:"Position",points:[]}]}],tags:[],annotations:[],variables:[],units:[{url:"/shared/sensor-graph-activity/units/Time",activity:"/shared/sensor-graph-activity",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/sensor-graph-activity/units/Distance",activity:"/shared/sensor-graph-activity",name:"Distance",abbreviation:"m",pluralName:"Distance"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/simple-graph-with-three-author-created-labels"]={_id:"simple-graph-with-three-author-created-labels.df6",_rev:1,data_format_version:6,activity:{title:"Simple Graph with Three Author Created Labels",url:"/shared/simple-graph-with-three-author-created-labels",owner:"shared",pages:["/shared/simple-graph-with-three-author-created-labels/page/1-graph"],axes:["/shared/simple-graph-with-three-author-created-labels/axes/1","/shared/simple-graph-with-three-author-created-labels/axes/2"]},pages:[{name:"Graph",url:"/shared/simple-graph-with-three-author-created-labels/page/1-graph",activity:"/shared/simple-graph-with-three-author-created-labels",index:1,introText:"in this activity....",steps:["/shared/simple-graph-with-three-author-created-labels/page/1-graph/step/1"],firstStep:"/shared/simple-graph-with-three-author-created-labels/page/1-graph/step/1",contextVars:[]}],steps:[{url:"/shared/simple-graph-with-three-author-created-labels/page/1-graph/step/1",activityPage:"/shared/simple-graph-with-three-author-created-labels/page/1-graph",paneConfig:"single",panes:{single:{type:"graph",title:"Position vs. Time",xAxis:"/shared/simple-graph-with-three-author-created-labels/axes/1",yAxis:"/shared/simple-graph-with-three-author-created-labels/axes/2",annotations:["my-labels"],highlightedAnnotations:[],data:["datadef-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["datadef-1"]},activeDatadefs:["datadef-1"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/simple-graph-with-three-author-created-labels/axes/1",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/simple-graph-with-three-author-created-labels/axes/2",min:0,max:2000,nSteps:10,label:"Position"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/simple-graph-with-three-author-created-labels/datadefs/datadef-1",name:"datadef-1",activity:"/shared/simple-graph-with-three-author-created-labels",points:[[1,200],[2,400],[3,600]],lineSnapDistance:0}]}],tags:[],annotations:[{type:"Label",records:[{url:"/shared/simple-graph-with-three-author-created-labels/annotations/my-labels-1",name:"my-labels-1",activity:"/shared/simple-graph-with-three-author-created-labels",text:"This is the first point.",x:1,y:200},{url:"/shared/simple-graph-with-three-author-created-labels/annotations/my-labels-2",name:"my-labels-2",activity:"/shared/simple-graph-with-three-author-created-labels",text:"This is a second label; does it overlap?.",x:1.2,y:210},{url:"/shared/simple-graph-with-three-author-created-labels/annotations/my-labels-3",name:"my-labels-3",activity:"/shared/simple-graph-with-three-author-created-labels",text:"This is a second label; does it overlap?.",x:1.3,y:220}]},{type:"LabelSet",records:[{url:"/shared/simple-graph-with-three-author-created-labels/annotations/my-labels",name:"my-labels",activity:"/shared/simple-graph-with-three-author-created-labels",labels:["/shared/simple-graph-with-three-author-created-labels/annotations/my-labels-1","/shared/simple-graph-with-three-author-created-labels/annotations/my-labels-2","/shared/simple-graph-with-three-author-created-labels/annotations/my-labels-3"]}]}],variables:[],units:[]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/simple-graph"]={_id:"simple-graph.df6",_rev:"1",data_format_version:6,activity:{title:"Animation Tool Example",url:"/shared/simple-graph",owner:"shared",pages:["/shared/simple-graph/page/1"],axes:["/shared/simple-graph/axes/12s","/shared/simple-graph/axes/10m"]},pages:[{name:"Position and Velocity Graphs",url:"/shared/simple-graph/page/1",activity:"/shared/simple-graph",index:1,introText:"<h1>A Simple Graph</h1>",steps:["/shared/simple-graph/page/1/step/1"],firstStep:"/shared/simple-graph/page/1/step/1"}],steps:[{url:"/shared/simple-graph/page/1/step/1",activityPage:"/shared/simple-graph/page/1",paneConfig:"single",panes:{single:{type:"graph",title:"Position vs. Time",xAxis:"/shared/simple-graph/axes/12s",yAxis:"/shared/simple-graph/axes/10m",data:["position-data"],annotations:["circled-point-2"],activeDatadefs:["position-data"]}},beforeText:"<p>Check out this data!</p>",hideSubmitButton:true,tools:[]}],units:[],axes:[{url:"/shared/simple-graph/axes/12s",units:"/builtins/units/seconds",min:0,max:12,nSteps:12,label:"Time"},{url:"/shared/simple-graph/axes/10m",units:"/builtins/units/meters",min:0,max:10,nSteps:10,label:"Position"},{url:"/shared/simple-graph/axes/2mps",units:"/builtins/units/meters-per-second",min:0,max:2,nSteps:10,label:"Velocity"}],responseTemplates:[],tags:[],variables:[],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/simple-graph/datadefs/position-data",name:"position-data",activity:"/shared/simple-graph",xUnits:"/builtins/units/seconds",xLabel:"Time",xShortLabel:"Time",yUnits:"/builtins/units/meters",yLabel:"Position",yShortLabel:"Position",points:[[0,0],[0.25,0.025],[0.5,0.05],[0.75,0.075],[1,0.1],[1.25,0.125],[1.5,0.15],[1.75,0.175],[2,0.2],[2.25,0.225],[2.5,0.25],[2.75,0.276],[3,0.303],[3.25,0.34],[3.5,0.404],[3.75,0.515],[4,0.653],[4.25,0.801],[4.5,0.95],[4.75,1.1],[5,1.25],[5.25,1.4],[5.5,1.55],[5.75,1.7],[6,1.85],[6.25,2],[6.5,2.15],[6.75,2.3],[7,2.45],[7.25,2.6],[7.5,2.75],[7.75,2.901],[8,3.057],[8.25,3.23],[8.5,3.459],[8.75,3.78],[9,4.157],[9.25,4.551],[9.5,4.95],[9.75,5.35],[10,5.75],[10.25,6.15],[10.5,6.55],[10.75,6.95],[11,7.35],[11.25,7.75],[11.5,8.15],[11.75,8.55],[12,8.95]]}]}],annotations:[{type:"LineToAxis",records:[{url:"/shared/pick-a-point-sequence/annotations/circled-point-2",name:"circled-point-2",activity:"/shared/simple-graph",datadefName:"position-data",color:"#00ff00",axis:"x",xRecord:3.25,yRecord:0.34}]}],};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/simple-dataset-activity"]={_id:"simple-dataset-activity.df6",_rev:1,data_format_version:6,activity:{title:"XXXXXcopy of Simple Dataset Activity",url:"/shared/simple-dataset-activity",owner:"shared",pages:["/shared/simple-dataset-activity/page/1-1-simple-page-1"],axes:["/shared/simple-dataset-activity/axes/1","/shared/simple-dataset-activity/axes/2"],authorName:"admin"},pages:[{name:"1 Simple Page 1",url:"/shared/simple-dataset-activity/page/1-1-simple-page-1",activity:"/shared/simple-dataset-activity",index:1,introText:"Txxxxxjhis is a test",steps:["/shared/simple-dataset-activity/page/1-1-simple-page-1/step/1"],firstStep:"/shared/simple-dataset-activity/page/1-1-simple-page-1/step/1",contextVars:[{name:"start-y",value:["coord","y",["listItem",1,["slopeToolOrder","tag-1","tag-2"]]]},{name:"start-y_str",value:["toFixedString",["get","start-y"],2]},{name:"end-y",value:["coord","y",["listItem",2,["slopeToolOrder","tag-1","tag-2"]]]},{name:"end-y_str",value:["toFixedString",["get","end-y"],2]},{name:"change-y",value:["-",["get","end-y"],["get","start-y"]]},{name:"change-y_str",value:["toFixedString",["get","change-y"],2]},{name:"start-x",value:["coord","x",["listItem",1,["slopeToolOrder","tag-1","tag-2"]]]},{name:"start-x_str",value:["toFixedString",["get","start-x"],2]},{name:"end-x",value:["coord","x",["listItem",2,["slopeToolOrder","tag-1","tag-2"]]]},{name:"end-x_str",value:["toFixedString",["get","end-x"],2]},{name:"change-x",value:["-",["get","end-x"],["get","start-x"]]},{name:"change-x_str",value:["toFixedString",["get","change-x"],2]},{name:"slope",value:["/",["get","change-y"],["get","change-x"]]},{name:"slope_str",value:["toFixedString",["get","slope"],2]}]}],steps:[{url:"/shared/simple-dataset-activity/page/1-1-simple-page-1/step/1",activityPage:"/shared/simple-dataset-activity/page/1-1-simple-page-1",beforeText:"Some Question",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function pane",xAxis:"/shared/simple-dataset-activity/axes/1",yAxis:"/shared/simple-dataset-activity/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Piecewise linear function"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"xstuff",yLabel:"ystuff",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/simple-dataset-activity/page/1-1-simple-page-1/step/2",responseTemplate:"/shared/simple-dataset-activity/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],2,0.2],step:"/shared/simple-dataset-activity/page/1-1-simple-page-1/step/19"}],isFinalStep:true,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},],responseTemplates:[{url:"/shared/simple-dataset-activity/response-templates/numeric-1",templateString:"",fieldChoicesList:[null],initialValues:[""],fieldTypes:["numeric"]}],axes:[{url:"/shared/simple-dataset-activity/axes/1",units:"/shared/simple-dataset-activity/units/minutes",min:-10,max:10,nSteps:1,label:"X-axis"},{url:"/shared/simple-dataset-activity/axes/2",units:"/shared/simple-dataset-activity/units/meters",min:-10,max:10,nSteps:1,label:"Y-axis"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/simple-dataset-activity/datadefs/Piecewise linear function",name:"Piecewise linear function",activity:"/shared/simple-dataset-activity",xUnits:"/shared/simple-dataset-activity/units/minutes",yUnits:"/shared/simple-dataset-activity/units/meters",points:[[0,0],[2,0],[4,4],[7,7]],pointType:"none",lineType:"none",lineSnapDistance:0.1}]}],tags:[{url:"/shared/simple-dataset-activity/tags/tag-1",activity:"/shared/simple-dataset-activity",name:"tag-1",x:2,y:0},{url:"/shared/simple-dataset-activity/tags/tag-2",activity:"/shared/simple-dataset-activity",name:"tag-2",x:4,y:4}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/simple-dataset-activity/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/simple-dataset-activity",datadefName:"Piecewise linear function",tag:"/shared/simple-dataset-activity/tags/tag-1",color:"#1f77b4"},{url:"/shared/simple-dataset-activity/annotations/highlighted-point-2",name:"highlighted-point-2",activity:"/shared/simple-dataset-activity",datadefName:"Piecewise linear function",tag:"/shared/simple-dataset-activity/tags/tag-2",color:"#ff7f0e"}]},{type:"RunArrow",records:[{url:"/shared/simple-dataset-activity/annotations/run-arrow1",name:"run-arrow1",activity:"/shared/simple-dataset-activity",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/simple-dataset-activity/tags/tag-1",p2Tag:"/shared/simple-dataset-activity/tags/tag-2"}]},{type:"RiseArrow",records:[{url:"/shared/simple-dataset-activity/annotations/rise-arrow1",name:"rise-arrow1",activity:"/shared/simple-dataset-activity",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/simple-dataset-activity/tags/tag-1",p2Tag:"/shared/simple-dataset-activity/tags/tag-2"}]},{type:"RunBracket",records:[{url:"/shared/simple-dataset-activity/annotations/run-bracket1",name:"run-bracket1",activity:"/shared/simple-dataset-activity",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/simple-dataset-activity/tags/tag-1",p2Tag:"/shared/simple-dataset-activity/tags/tag-2"}]},{type:"RiseBracket",records:[{url:"/shared/simple-dataset-activity/annotations/rise-bracket1",name:"rise-bracket1",activity:"/shared/simple-dataset-activity",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/simple-dataset-activity/tags/tag-1",p2Tag:"/shared/simple-dataset-activity/tags/tag-2"}]},{type:"LineThroughPoints",records:[{url:"/shared/simple-dataset-activity/annotations/line-throughpoints1",name:"line-throughpoints1",activity:"/shared/simple-dataset-activity",color:"#1f77b4",datadefName:"Piecewise linear function",p1Tag:"/shared/simple-dataset-activity/tags/tag-1",p2Tag:"/shared/simple-dataset-activity/tags/tag-2"}]}],variables:[],units:[{url:"/shared/simple-dataset-activity/units/Time",activity:"/shared/simple-dataset-activity",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/simple-dataset-activity/units/Distance",activity:"/shared/simple-dataset-activity",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/simple-dataset-activity/units/degrees Celsius",activity:"/shared/simple-dataset-activity",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/simple-dataset-activity/units/minutes",activity:"/shared/simple-dataset-activity",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/simple-dataset-activity/units/meters",activity:"/shared/simple-dataset-activity",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/simple-dataset-activity/units/seconds",activity:"/shared/simple-dataset-activity",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/simple-dataset-activity/units/centimeters",activity:"/shared/simple-dataset-activity",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/simple-dataset-activity/units/grams",activity:"/shared/simple-dataset-activity",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/simple-dataset-activity/units/miles",activity:"/shared/simple-dataset-activity",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/simple-dataset-activity/units/hours",activity:"/shared/simple-dataset-activity",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/simple-dataset-activity/units/Celsius",activity:"/shared/simple-dataset-activity",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/simple-dataset-activity/units/dollars",activity:"/shared/simple-dataset-activity",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/simple-dataset-activity/units/inches",activity:"/shared/simple-dataset-activity",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/simple-dataset-activity/units/years",activity:"/shared/simple-dataset-activity",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/simple-dataset-activity/units/millimeters",activity:"/shared/simple-dataset-activity",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/simple-dataset-activity/units/parts per million",activity:"/shared/simple-dataset-activity",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/slope-tool-with-multiple-dataset"]={_id:"slope-tool-with-multiple-dataset.df6",_rev:1,data_format_version:6,activity:{title:"slope tool with multiple dataset",url:"/shared/slope-tool-with-multiple-dataset",owner:"shared",pages:["/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points"],axes:["/shared/slope-tool-with-multiple-dataset/axes/1","/shared/slope-tool-with-multiple-dataset/axes/2"],authorName:"Noah Paessel"},pages:[{name:"Velocity 1 (no picking points)",url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",activity:"/shared/slope-tool-with-multiple-dataset",index:1,introText:"A car is moving on a road as shown with variable speeds.What is the car's velocity between 2 and 8 seconds?",steps:["/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/1","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/2","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/3","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/4","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/5","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/6","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/7","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/8","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/9","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/10","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/11","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/12","/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/13"],firstStep:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/1",contextVars:[{name:"start-y",value:["coord","y",["listItem",1,["slopeToolOrder","tag-1","tag-2"]]]},{name:"start-y_str",value:["toFixedString",["get","start-y"],2]},{name:"end-y",value:["coord","y",["listItem",2,["slopeToolOrder","tag-1","tag-2"]]]},{name:"end-y_str",value:["toFixedString",["get","end-y"],2]},{name:"change-y",value:["-",["get","end-y"],["get","start-y"]]},{name:"change-y_str",value:["toFixedString",["get","change-y"],2]},{name:"start-x",value:["coord","x",["listItem",1,["slopeToolOrder","tag-1","tag-2"]]]},{name:"start-x_str",value:["toFixedString",["get","start-x"],2]},{name:"end-x",value:["coord","x",["listItem",2,["slopeToolOrder","tag-1","tag-2"]]]},{name:"end-x_str",value:["toFixedString",["get","end-x"],2]},{name:"change-x",value:["-",["get","end-x"],["get","start-x"]]},{name:"change-x_str",value:["toFixedString",["get","change-x"],2]},{name:"slope",value:["/",["get","change-y"],["get","change-x"]]},{name:"slope_str",value:["toFixedString",["get","slope"],2]}]}],steps:[{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/1",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"What is the average velocity of the car between 2 and 8 seconds?",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:[],highlightedAnnotations:[],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/2",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],1,0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/2",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p> Here is the line connecting the two points. </p>\n<p> What is the average velocity of the car between 2 and 8 seconds? </p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/3",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/3",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p> What is the average velocity of the car between 2 and 8 seconds? </p>\n<p>Hint: Recall that the velocity is \nthe change in  distance\ndivided by the change in time.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/4",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/4",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ndistance between the two points?</p>\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/5",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/7"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/5",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ndistance between the two points?</p>\n<p>Hint: Look at the table and the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["rise-bracket1"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/6",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/7"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/6",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>The change is\n<b>%@</b> - <b>%@</b>, \nor <b>%@</b>.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["rise-bracket1"]}},submitButtonTitle:"Continue",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/7",isFinalStep:false,substitutedExpressions:["end-y","start-y","change-y"]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/7",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p>What was the change in\ntime between the two points?</p>\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/8",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/10"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/8",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ntime between the two points?</p>\n<p>Hint: Look at the graph and the table.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["run-bracket1"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/9",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/10"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/9",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>The change \nbetween the points is <b>%@</b> - <b>%@</b>, \nor <b>%@</b>.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["run-bracket1"]}},submitButtonTitle:"Continue",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/10",isFinalStep:false,substitutedExpressions:["end-x","start-x","change-x"]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/10",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p>\n  If the change in distance is %@\n  and the change in time is %@\n  then what is the velocity in m/s?\n</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/11",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:["change-y","change-x"]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/11",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>\n  If the change in distance is %@\n  and the change in time is %@\n  then what is the velocity in m/s?\n</p>\n<p>\n  Hint: Remember that it is \n  the change in distance \n  <b>divided by</b> \n  the change in time.\n</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/12",responseTemplate:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.1],step:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:["change-y","change-x"]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/12",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>\nIf the change in distance is %@\nand the change in time is %@,\nthe velocity is \n<b>%@</b> divided by <b>%@</b>, \nor <b>%@</b> m/s.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true,substitutedExpressions:["change-y","change-x","change-y","change-x","slope_str"]},{url:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points/step/13",activityPage:"/shared/slope-tool-with-multiple-dataset/page/1-velocity-1-no-picking-points",beforeText:"<p><b>Correct!</b></p>\n<p>The velocity is <b>1.00</b> m/s.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Velocity",xAxis:"/shared/slope-tool-with-multiple-dataset/axes/1",yAxis:"/shared/slope-tool-with-multiple-dataset/axes/2",annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["averageVelocity","SmallCar"],datarefs:["dataref-1"],legends:["averageVelocity","SmallCar"],activeDatadefs:["averageVelocity"]},bottom:{type:"table",data:"averageVelocity",xLabel:"Time",yLabel:"Distance",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true,substitutedExpressions:[]}],responseTemplates:[{url:"/shared/slope-tool-with-multiple-dataset/response-templates/numeric-1",templateString:"",fieldChoicesList:[null],initialValues:[""],fieldTypes:["numeric"]}],axes:[{url:"/shared/slope-tool-with-multiple-dataset/axes/1",units:"/shared/slope-tool-with-multiple-dataset/units/seconds",min:0,max:10,nSteps:10,label:"Time"},{url:"/shared/slope-tool-with-multiple-dataset/axes/2",units:"/shared/slope-tool-with-multiple-dataset/units/meters",min:0,max:10,nSteps:10,label:"Distance"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/slope-tool-with-multiple-dataset/datadefs/averageVelocity",name:"averageVelocity",activity:"/shared/slope-tool-with-multiple-dataset",xUnits:"/shared/slope-tool-with-multiple-dataset/units/seconds",yUnits:"/shared/slope-tool-with-multiple-dataset/units/meters",points:[[0,0],[1,0],[2,1],[3,2],[4,3],[5,4],[6,5],[7,6],[8,7],[9,7],[10,7]],lineSnapDistance:0},{url:"/shared/slope-tool-with-multiple-dataset/datadefs/SmallCar",name:"SmallCar",activity:"/shared/slope-tool-with-multiple-dataset",xUnits:"/shared/slope-tool-with-multiple-dataset/units/seconds",yUnits:"/shared/slope-tool-with-multiple-dataset/units/meters",points:[],pointType:"none",lineType:"connected",lineSnapDistance:0.5}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/slope-tool-with-multiple-dataset/datarefs/dataref-1",name:"dataref-1",activity:"/shared/slope-tool-with-multiple-dataset",datadefName:"SmallCar",expressionForm:"slope-intercept",xInterval:0.5,params:{slope:1,yIntercept:0}}]}],tags:[{url:"/shared/slope-tool-with-multiple-dataset/tags/tag-1",activity:"/shared/slope-tool-with-multiple-dataset",name:"tag-1",x:2,y:1},{url:"/shared/slope-tool-with-multiple-dataset/tags/tag-2",activity:"/shared/slope-tool-with-multiple-dataset",name:"tag-2",x:8,y:7}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/slope-tool-with-multiple-dataset/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/slope-tool-with-multiple-dataset",datadefName:"averageVelocity",tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-1",color:"#1f77b4"},{url:"/shared/slope-tool-with-multiple-dataset/annotations/highlighted-point-2",name:"highlighted-point-2",activity:"/shared/slope-tool-with-multiple-dataset",datadefName:"averageVelocity",tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-2",color:"#ff7f0e"}]},{type:"RunArrow",records:[{url:"/shared/slope-tool-with-multiple-dataset/annotations/run-arrow1",name:"run-arrow1",activity:"/shared/slope-tool-with-multiple-dataset",color:"#cccccc",datadefName:"averageVelocity",p1Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-1",p2Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-2"}]},{type:"RiseArrow",records:[{url:"/shared/slope-tool-with-multiple-dataset/annotations/rise-arrow1",name:"rise-arrow1",activity:"/shared/slope-tool-with-multiple-dataset",color:"#cccccc",datadefName:"averageVelocity",p1Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-1",p2Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-2"}]},{type:"RunBracket",records:[{url:"/shared/slope-tool-with-multiple-dataset/annotations/run-bracket1",name:"run-bracket1",activity:"/shared/slope-tool-with-multiple-dataset",color:"#cccccc",datadefName:"averageVelocity",p1Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-1",p2Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-2"}]},{type:"RiseBracket",records:[{url:"/shared/slope-tool-with-multiple-dataset/annotations/rise-bracket1",name:"rise-bracket1",activity:"/shared/slope-tool-with-multiple-dataset",color:"#cccccc",datadefName:"averageVelocity",p1Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-1",p2Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-2"}]},{type:"LineThroughPoints",records:[{url:"/shared/slope-tool-with-multiple-dataset/annotations/line-throughpoints1",name:"line-throughpoints1",activity:"/shared/slope-tool-with-multiple-dataset",color:"#1f77b4",datadefName:"averageVelocity",p1Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-1",p2Tag:"/shared/slope-tool-with-multiple-dataset/tags/tag-2"}]}],variables:[],units:[{url:"/shared/slope-tool-with-multiple-dataset/units/meters",activity:"/shared/slope-tool-with-multiple-dataset",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/slope-tool-with-multiple-dataset/units/minutes",activity:"/shared/slope-tool-with-multiple-dataset",name:"minute",abbreviation:"m",pluralName:"minutes"},{url:"/shared/slope-tool-with-multiple-dataset/units/meters per second",activity:"/shared/slope-tool-with-multiple-dataset",name:"meters per second",abbreviation:"m/s",pluralName:"meters per second"},{url:"/shared/slope-tool-with-multiple-dataset/units/seconds",activity:"/shared/slope-tool-with-multiple-dataset",name:"second",abbreviation:"s",pluralName:"seconds"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/testing-slope-tool"]={_id:"testing-slope-tool.df6",_rev:1,data_format_version:6,activity:{title:"Testing Slope Tool",url:"/shared/testing-slope-tool",owner:"shared",pages:["/shared/testing-slope-tool/page/1-1-testing-slope-tool","/shared/testing-slope-tool/page/2-2-just-to-show-gridlines"],axes:["/shared/testing-slope-tool/axes/1","/shared/testing-slope-tool/axes/2","/shared/testing-slope-tool/axes/3","/shared/testing-slope-tool/axes/4"],authorName:"Aaron"},pages:[{name:"1 Testing slope tool",url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",activity:"/shared/testing-slope-tool",index:1,introText:"This is a test of the slope tool.",steps:["/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/1","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/2","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/3","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/4","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/5","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/6","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/7","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/8","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/9","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/10","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/11","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/12","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/13","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/14","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/15","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/16","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/17","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/18","/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/19"],firstStep:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/1",contextVars:[{name:"start-y",value:["coord","y",["listItem",1,["slopeToolOrder","tag-1","tag-2"]]]},{name:"start-y_str",value:["toFixedString",["get","start-y"],2]},{name:"end-y",value:["coord","y",["listItem",2,["slopeToolOrder","tag-1","tag-2"]]]},{name:"end-y_str",value:["toFixedString",["get","end-y"],2]},{name:"change-y",value:["-",["get","end-y"],["get","start-y"]]},{name:"change-y_str",value:["toFixedString",["get","change-y"],2]},{name:"start-x",value:["coord","x",["listItem",1,["slopeToolOrder","tag-1","tag-2"]]]},{name:"start-x_str",value:["toFixedString",["get","start-x"],2]},{name:"end-x",value:["coord","x",["listItem",2,["slopeToolOrder","tag-1","tag-2"]]]},{name:"end-x_str",value:["toFixedString",["get","end-x"],2]},{name:"change-x",value:["-",["get","end-x"],["get","start-x"]]},{name:"change-x_str",value:["toFixedString",["get","change-x"],2]},{name:"slope",value:["/",["get","change-y"],["get","change-x"]]},{name:"slope_str",value:["toFixedString",["get","slope"],2]}]},{name:"2 Just to show gridlines",url:"/shared/testing-slope-tool/page/2-2-just-to-show-gridlines",activity:"/shared/testing-slope-tool",index:2,introText:"This graph should have gridlines",steps:["/shared/testing-slope-tool/page/2-2-just-to-show-gridlines/step/1"],firstStep:"/shared/testing-slope-tool/page/2-2-just-to-show-gridlines/step/1",contextVars:[]}],steps:[{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/1",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"What is the slope of the straight line between x values of 2 and 4?",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/2",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],2,0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/19"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/2",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:'<p><strong>Incorrect.</strong></p>\n<p> Click on a point at \n<strong><em>one end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis. </p>\n<p>Then click "OK". </p>',paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"Piecewise linear function"}}],submitButtonTitle:"OK",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/3",responseBranches:[{criterion:["or",["=",["coord","x","tag-1"],2],["=",["coord","x","tag-1"],4]],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/4"}],isFinalStep:false},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/3",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:'<p><strong>Incorrect.</strong></p>\n<p>The point you have selected is not \na point at \n<strong><em>one end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis.\nTry again.</p>\n<p> Click on a point at \n<strong><em>one end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis. </p>\n<p>Then click "OK". </p>',paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-1",data:"Piecewise linear function"}}],submitButtonTitle:"OK",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/3",responseBranches:[{criterion:["or",["=",["coord","x","tag-1"],2],["=",["coord","x","tag-1"],4]],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/4"}],isFinalStep:false},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/4",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:'<p>Now click on\nthe point at \n<strong><em>the other end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis.</p>\n<p>Then click "OK". </p>',paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-2",data:"Piecewise linear function"}}],submitButtonTitle:"OK",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/8",responseBranches:[{criterion:["samePoint","tag-1","tag-2"],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/6"},{criterion:["and",["!=",["coord","x","tag-2"],2],["!=",["coord","x","tag-2"],4]],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/7"}],isFinalStep:false},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/5",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:'<p><strong>Incorrect.</strong></p>\n<p> Your points should be adjacent.</p>\n<p>Now click on\nthe point at \n<strong><em>the other end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis.</p>\n<p>Then click "OK". </p>',paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-2",data:"Piecewise linear function"}}],submitButtonTitle:"OK",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/8",responseBranches:[{criterion:["samePoint","tag-1","tag-2"],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/6"},{criterion:["and",["!=",["coord","x","tag-2"],2],["!=",["coord","x","tag-2"],4]],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/7"}],isFinalStep:false},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/6",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:'<p><strong>Incorrect.</strong></p>\n<p> You have selected the same point twice.</p>\n<p>Now click on\nthe point at \n<strong><em>the other end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis.</p>\n<p>Then click "OK". </p>',paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-2",data:"Piecewise linear function"}}],submitButtonTitle:"OK",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/8",responseBranches:[{criterion:["samePoint","tag-1","tag-2"],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/6"},{criterion:["and",["!=",["coord","x","tag-2"],2],["!=",["coord","x","tag-2"],4]],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/7"}],isFinalStep:false},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/7",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:'<p><strong>Incorrect.</strong></p>\n<p> The point you have selected is not \na point at \n<strong><em>one end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis.  \nTry again.</p>\n<p>Now click on\nthe point at \n<strong><em>the other end</em></strong>  \nof the interval from\n2undefined to 4 for x-axis.</p>\n<p>Then click "OK". </p>',paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},tools:[{name:"tagging",setup:{tag:"tag-2",data:"Piecewise linear function"}}],submitButtonTitle:"OK",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/8",responseBranches:[{criterion:["samePoint","tag-1","tag-2"],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/6"},{criterion:["and",["!=",["coord","x","tag-2"],2],["!=",["coord","x","tag-2"],4]],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/7"}],isFinalStep:false},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/8",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p> Here is the line connecting the two points. </p>\n<p> What is the slope of the straight line between x values of 2 and 4? </p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/9",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/19"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/9",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p> What is the slope of the straight line between x values of 2 and 4? </p>\n<p>Hint: Recall that the slope is \nthe change in  y-axis\ndivided by the change in x-axis.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/10",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/19"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/10",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ny-axis between the two points?</p>\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/11",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/11",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\ny-axis between the two points?</p>\n<p>Hint: Look at the table and the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["rise-bracket1"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/12",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","y",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/13"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:[]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/12",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>The change is\n<b>%@</b> - <b>%@</b>, \nor <b>%@</b>.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:["rise-arrow1"],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["rise-bracket1"]}},submitButtonTitle:"Continue",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/13",isFinalStep:false,substitutedExpressions:["end-y","start-y","change-y"]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/13",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p>What was the change in\nx-axis between the two points?</p>\n<p>Hint: Look at the graph.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/14",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/16"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/14",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>What was the change in\nx-axis between the two points?</p>\n<p>Hint: Look at the graph and the table.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["run-bracket1"]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/15",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["delta","x",["slopeToolOrder","tag-1","tag-2"]],["responseField",1],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/16"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/15",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>The change \nbetween the points is <b>%@</b> - <b>%@</b>, \nor <b>%@</b>.</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1","rise-arrow1"],highlightedAnnotations:["run-arrow1"],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:["run-bracket1"]}},submitButtonTitle:"Continue",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/16",isFinalStep:false,substitutedExpressions:["end-x","start-x","change-x"]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/16",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p>\n  If the change in y-axis is %@\n  and the change in x-axis is %@\n  then what is the slope in m/min.?\n</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/17",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/19"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:["change-y","change-x"]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/17",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>\n  If the change in y-axis is %@\n  and the change in x-axis is %@\n  then what is the slope in m/min.?\n</p>\n<p>\n  Hint: Remember that it is \n  the change in y-axis \n  <b>divided by</b> \n  the change in x-axis.\n</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},submitButtonTitle:"Check My Answer",defaultBranch:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/18",responseTemplate:"/shared/testing-slope-tool/response-templates/numeric-1",submissibilityCriterion:["isNumeric",["responseField",1]],responseBranches:[{criterion:["withinAbsTolerance",["responseField",1],["slope","tag-1","tag-2"],0.2],step:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/19"}],isFinalStep:false,variableAssignments:[{name:"student-response-field",value:["responseField",1]}],substitutedExpressions:["change-y","change-x"]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/18",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><strong>Incorrect.</strong></p>\n<p>\nIf the change in y-axis is %@\nand the change in x-axis is %@,\nthe slope is \n<b>%@</b> divided by <b>%@</b>, \nor <b>%@</b> m/min..</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:["highlighted-point-1","highlighted-point-2"],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true,substitutedExpressions:["change-y","change-x","change-y","change-x","slope_str"]},{url:"/shared/testing-slope-tool/page/1-1-testing-slope-tool/step/19",activityPage:"/shared/testing-slope-tool/page/1-1-testing-slope-tool",beforeText:"<p><b>Correct!</b></p>\n<p>The slope is <b>2.00</b> m/min..</p>",paneConfig:"split",panes:{top:{type:"graph",title:"Piecewise linear function",xAxis:"/shared/testing-slope-tool/axes/1",yAxis:"/shared/testing-slope-tool/axes/2",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:["highlighted-point-1","highlighted-point-2","line-throughpoints1"],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"x",yLabel:"y",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true,substitutedExpressions:[]},{url:"/shared/testing-slope-tool/page/2-2-just-to-show-gridlines/step/1",activityPage:"/shared/testing-slope-tool/page/2-2-just-to-show-gridlines",paneConfig:"split",panes:{top:{type:"graph",title:"Graph with Gridlines",xAxis:"/shared/testing-slope-tool/axes/3",yAxis:"/shared/testing-slope-tool/axes/4",showCrossHairs:false,showGraphGrid:true,showToolTipCoords:true,annotations:[],highlightedAnnotations:[],data:["Piecewise linear function","Straight line"],datarefs:["dataref-1"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Piecewise linear function","Straight line"]},activeDatadefs:["Piecewise linear function"]},bottom:{type:"table",data:"Piecewise linear function",xLabel:"",yLabel:"",annotations:[],highlightedAnnotations:[]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[{url:"/shared/testing-slope-tool/response-templates/numeric-1",templateString:"",fieldChoicesList:[null],initialValues:[""],fieldTypes:["numeric"]}],axes:[{url:"/shared/testing-slope-tool/axes/1",units:"/shared/testing-slope-tool/units/minutes",min:-10,max:10,nSteps:20,label:"X-axis"},{url:"/shared/testing-slope-tool/axes/2",units:"/shared/testing-slope-tool/units/meters",min:-10,max:10,nSteps:20,label:"Y-axis"},{url:"/shared/testing-slope-tool/axes/3",units:"/shared/testing-slope-tool/units/minutes",min:-10,max:10,nSteps:20,label:"X"},{url:"/shared/testing-slope-tool/axes/4",units:"/shared/testing-slope-tool/units/meters",min:-10,max:10,nSteps:20,label:"Y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/testing-slope-tool/datadefs/Piecewise linear function",name:"Piecewise linear function",activity:"/shared/testing-slope-tool",xUnits:"/shared/testing-slope-tool/units/minutes",yUnits:"/shared/testing-slope-tool/units/meters",points:[[0,0],[2,0],[4,4],[7,7]],pointType:"dot",lineType:"connected",lineSnapDistance:0.1},{url:"/shared/testing-slope-tool/datadefs/Straight line",name:"Straight line",activity:"/shared/testing-slope-tool",xUnits:"/shared/testing-slope-tool/units/minutes",yUnits:"/shared/testing-slope-tool/units/meters",points:[],pointType:"dot",lineType:"connected",lineSnapDistance:0.1}]}],datarefs:[{type:"LinearEquation",records:[{url:"/shared/testing-slope-tool/datarefs/dataref-1",name:"dataref-1",activity:"/shared/testing-slope-tool",datadefName:"Straight line",expressionForm:"slope-intercept",xInterval:0.1,params:{slope:2,yIntercept:0}}]}],tags:[{url:"/shared/testing-slope-tool/tags/tag-1",activity:"/shared/testing-slope-tool",name:"tag-1",x:2,y:0},{url:"/shared/testing-slope-tool/tags/tag-2",activity:"/shared/testing-slope-tool",name:"tag-2",x:4,y:4}],annotations:[{type:"HighlightedPoint",records:[{url:"/shared/testing-slope-tool/annotations/highlighted-point-1",name:"highlighted-point-1",activity:"/shared/testing-slope-tool",datadefName:"Piecewise linear function",tag:"/shared/testing-slope-tool/tags/tag-1",color:"#1f77b4"},{url:"/shared/testing-slope-tool/annotations/highlighted-point-2",name:"highlighted-point-2",activity:"/shared/testing-slope-tool",datadefName:"Piecewise linear function",tag:"/shared/testing-slope-tool/tags/tag-2",color:"#ff7f0e"}]},{type:"RunArrow",records:[{url:"/shared/testing-slope-tool/annotations/run-arrow1",name:"run-arrow1",activity:"/shared/testing-slope-tool",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/testing-slope-tool/tags/tag-1",p2Tag:"/shared/testing-slope-tool/tags/tag-2"}]},{type:"RiseArrow",records:[{url:"/shared/testing-slope-tool/annotations/rise-arrow1",name:"rise-arrow1",activity:"/shared/testing-slope-tool",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/testing-slope-tool/tags/tag-1",p2Tag:"/shared/testing-slope-tool/tags/tag-2"}]},{type:"RunBracket",records:[{url:"/shared/testing-slope-tool/annotations/run-bracket1",name:"run-bracket1",activity:"/shared/testing-slope-tool",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/testing-slope-tool/tags/tag-1",p2Tag:"/shared/testing-slope-tool/tags/tag-2"}]},{type:"RiseBracket",records:[{url:"/shared/testing-slope-tool/annotations/rise-bracket1",name:"rise-bracket1",activity:"/shared/testing-slope-tool",color:"#cccccc",datadefName:"Piecewise linear function",p1Tag:"/shared/testing-slope-tool/tags/tag-1",p2Tag:"/shared/testing-slope-tool/tags/tag-2"}]},{type:"LineThroughPoints",records:[{url:"/shared/testing-slope-tool/annotations/line-throughpoints1",name:"line-throughpoints1",activity:"/shared/testing-slope-tool",color:"#1f77b4",datadefName:"Piecewise linear function",p1Tag:"/shared/testing-slope-tool/tags/tag-1",p2Tag:"/shared/testing-slope-tool/tags/tag-2"}]}],variables:[],units:[{url:"/shared/testing-slope-tool/units/Time",activity:"/shared/testing-slope-tool",name:"Time",abbreviation:"s",pluralName:"Time"},{url:"/shared/testing-slope-tool/units/Distance",activity:"/shared/testing-slope-tool",name:"Distance",abbreviation:"m",pluralName:"Distance"},{url:"/shared/testing-slope-tool/units/degrees Celsius",activity:"/shared/testing-slope-tool",name:"degrees Celsiu",abbreviation:"deg C",pluralName:"degrees Celsius"},{url:"/shared/testing-slope-tool/units/minutes",activity:"/shared/testing-slope-tool",name:"minute",abbreviation:"min.",pluralName:"minutes"},{url:"/shared/testing-slope-tool/units/meters",activity:"/shared/testing-slope-tool",name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/shared/testing-slope-tool/units/seconds",activity:"/shared/testing-slope-tool",name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/shared/testing-slope-tool/units/centimeters",activity:"/shared/testing-slope-tool",name:"centimeter",abbreviation:"cm",pluralName:"centimeters"},{url:"/shared/testing-slope-tool/units/grams",activity:"/shared/testing-slope-tool",name:"gram",abbreviation:"gr",pluralName:"grams"},{url:"/shared/testing-slope-tool/units/miles",activity:"/shared/testing-slope-tool",name:"mile",abbreviation:"mi",pluralName:"miles"},{url:"/shared/testing-slope-tool/units/hours",activity:"/shared/testing-slope-tool",name:"hour",abbreviation:"hr",pluralName:"hours"},{url:"/shared/testing-slope-tool/units/Celsius",activity:"/shared/testing-slope-tool",name:"Celsiu",abbreviation:"° C.",pluralName:"Celsius"},{url:"/shared/testing-slope-tool/units/dollars",activity:"/shared/testing-slope-tool",name:"dollar",abbreviation:"$",pluralName:"dollars"},{url:"/shared/testing-slope-tool/units/inches",activity:"/shared/testing-slope-tool",name:"inche",abbreviation:"in",pluralName:"inches"},{url:"/shared/testing-slope-tool/units/years",activity:"/shared/testing-slope-tool",name:"year",abbreviation:"yr",pluralName:"years"},{url:"/shared/testing-slope-tool/units/millimeters",activity:"/shared/testing-slope-tool",name:"millimeter",abbreviation:"mm",pluralName:"millimeters"},{url:"/shared/testing-slope-tool/units/parts per million",activity:"/shared/testing-slope-tool",name:"parts per million",abbreviation:"ppm",pluralName:"parts per million"}]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/tick-label-width-in-vertical-axis"]={_id:"tick-label-width-in-vertical-axis.df6",_rev:1,data_format_version:6,activity:{title:"Tick label width in vertical axis",url:"/shared/tick-label-width-in-vertical-axis",owner:"shared",pages:["/shared/tick-label-width-in-vertical-axis/page/1-1-with-a-graph","/shared/tick-label-width-in-vertical-axis/page/2-2-with-a-graph","/shared/tick-label-width-in-vertical-axis/page/3-3-with-a-graph"],axes:["/shared/tick-label-width-in-vertical-axis/axes/1","/shared/tick-label-width-in-vertical-axis/axes/2","/shared/tick-label-width-in-vertical-axis/axes/3","/shared/tick-label-width-in-vertical-axis/axes/4","/shared/tick-label-width-in-vertical-axis/axes/5","/shared/tick-label-width-in-vertical-axis/axes/6"],authorName:"Parker Morse"},pages:[{name:"1 with a graph",url:"/shared/tick-label-width-in-vertical-axis/page/1-1-with-a-graph",activity:"/shared/tick-label-width-in-vertical-axis",index:1,introText:"This should have a graph with relatively small numbers.",steps:["/shared/tick-label-width-in-vertical-axis/page/1-1-with-a-graph/step/1"],firstStep:"/shared/tick-label-width-in-vertical-axis/page/1-1-with-a-graph/step/1",contextVars:[]},{name:"2 with a graph",url:"/shared/tick-label-width-in-vertical-axis/page/2-2-with-a-graph",activity:"/shared/tick-label-width-in-vertical-axis",index:1,introText:"This should have a graph with larger numbers.",steps:["/shared/tick-label-width-in-vertical-axis/page/2-2-with-a-graph/step/2"],firstStep:"/shared/tick-label-width-in-vertical-axis/page/2-2-with-a-graph/step/2",contextVars:[]},{name:"3 with a graph",url:"/shared/tick-label-width-in-vertical-axis/page/3-3-with-a-graph",activity:"/shared/tick-label-width-in-vertical-axis",index:1,introText:"This should have a graph with big numbers.",steps:["/shared/tick-label-width-in-vertical-axis/page/3-3-with-a-graph/step/3"],firstStep:"/shared/tick-label-width-in-vertical-axis/page/3-3-with-a-graph/step/3",contextVars:[]}],steps:[{url:"/shared/tick-label-width-in-vertical-axis/page/1-1-with-a-graph/step/1",activityPage:"/shared/tick-label-width-in-vertical-axis/page/1-1-with-a-graph",paneConfig:"single",panes:{single:{type:"graph",title:"Straight Line",xAxis:"/shared/tick-label-width-in-vertical-axis/axes/1",yAxis:"/shared/tick-label-width-in-vertical-axis/axes/2",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:[],highlightedAnnotations:[],data:["Values"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["Values"]},activeDatadefs:["Values"]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/tick-label-width-in-vertical-axis/page/2-2-with-a-graph/step/2",activityPage:"/shared/tick-label-width-in-vertical-axis/page/2-2-with-a-graph",paneConfig:"single",panes:{single:{type:"graph",title:"Straight Line",xAxis:"/shared/tick-label-width-in-vertical-axis/axes/3",yAxis:"/shared/tick-label-width-in-vertical-axis/axes/4",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:[],highlightedAnnotations:[],data:["BigValues"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["BigValues"]},activeDatadefs:["BigValues"]}},isFinalStep:true,nextButtonShouldSubmit:true},{url:"/shared/tick-label-width-in-vertical-axis/page/3-3-with-a-graph/step/3",activityPage:"/shared/tick-label-width-in-vertical-axis/page/3-3-with-a-graph",paneConfig:"single",panes:{single:{type:"graph",title:"Straight Line",xAxis:"/shared/tick-label-width-in-vertical-axis/axes/5",yAxis:"/shared/tick-label-width-in-vertical-axis/axes/6",showCrossHairs:false,showGraphGrid:false,showToolTipCoords:false,annotations:[],highlightedAnnotations:[],data:["VeryBigValues"],legends:{title:"legend",type:"name",referenceDatadef:"",datadefs:["VeryBigValues"]},activeDatadefs:["VeryBigValues"]}},isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[{url:"/shared/tick-label-width-in-vertical-axis/axes/1",min:0,max:100,nSteps:10,label:"X"},{url:"/shared/tick-label-width-in-vertical-axis/axes/2",min:0,max:100,nSteps:10,label:"Y"},{url:"/shared/tick-label-width-in-vertical-axis/axes/3",min:1000,max:100000,nSteps:10,label:"X"},{url:"/shared/tick-label-width-in-vertical-axis/axes/4",min:1000,max:100000,nSteps:10,label:"Y"},{url:"/shared/tick-label-width-in-vertical-axis/axes/5",min:1000000,max:100000000,nSteps:10,label:"X"},{url:"/shared/tick-label-width-in-vertical-axis/axes/6",min:1000000,max:100000000,nSteps:10,label:"Y"}],datadefs:[{type:"UnorderedDataPoints",records:[{url:"/shared/tick-label-width-in-vertical-axis/datadefs/Values",name:"Values",activity:"/shared/tick-label-width-in-vertical-axis",points:[[0,0],[100,100]],pointType:"none",lineType:"connected",lineSnapDistance:0.1}]},{type:"UnorderedDataPoints",records:[{url:"/shared/tick-label-width-in-vertical-axis/datadefs/BigValues",name:"BigValues",activity:"/shared/tick-label-width-in-vertical-axis",points:[[1000,1000],[100000,100000]],pointType:"none",lineType:"connected",lineSnapDistance:0.1}]},{type:"UnorderedDataPoints",records:[{url:"/shared/tick-label-width-in-vertical-axis/datadefs/VeryBigValues",name:"VeryBigValues",activity:"/shared/tick-label-width-in-vertical-axis",points:[[1000000,1000000],[100000000,100000000]],pointType:"none",lineType:"connected",lineSnapDistance:0.1}]}],tags:[],annotations:[],variables:[],units:[]};Smartgraphs.activityDocs=Smartgraphs.activityDocs||{};Smartgraphs.activityDocs["/shared/video-js-demo"]={_id:"video-js-demo.df6",_rev:1,data_format_version:6,activity:{title:"Really long text",url:"/shared/video-js-demo",owner:"shared",pages:["/shared/video-js-demo/page/1-1-the-page-with-the-video"],axes:[],authorName:"Parker Morse"},pages:[{name:"1 The page with the video",url:"/shared/video-js-demo/page/1-1-the-page-with-the-video",activity:"/shared/video-js-demo",index:1,introText:"The step below is going to embed a video using <a href='http://www.videojs.com/'>VideoJS</a>.\r\n",steps:["/shared/video-js-demo/page/1-1-the-page-with-the-video/step/1","/shared/video-js-demo/page/1-1-the-page-with-the-video/step/2"],firstStep:"/shared/video-js-demo/page/1-1-the-page-with-the-video/step/1",contextVars:[]}],steps:[{url:"/shared/video-js-demo/page/1-1-the-page-with-the-video/step/1",activityPage:"/shared/video-js-demo/page/1-1-the-page-with-the-video",beforeText:"<p>This is instruction text which is supposed to appear under the page text.</p><video id='example_video_1' class='video-js vjs-default-skin' controls preload='auto' width='640' height='264' poster='http://video-js.zencoder.com/oceans-clip.png'><source src='http://video-js.zencoder.com/oceans-clip.mp4' type='video/mp4' /><source src='http://video-js.zencoder.com/oceans-clip.webm' type='video/webm' /><source src='http://video-js.zencoder.com/oceans-clip.ogv' type='video/ogg' /></video>",paneConfig:"single",panes:null,isFinalStep:false,submitButtonTitle:"Next",defaultBranch:"/shared/video-js-demo/page/1-1-the-page-with-the-video/step/2",nextButtonShouldSubmit:false},{url:"/shared/video-js-demo/page/1-1-the-page-with-the-video/step/2",activityPage:"/shared/video-js-demo/page/1-1-the-page-with-the-video",beforeText:"<p>The tag still works on a later step.</p><video id='example_video_1' class='video-js vjs-default-skin' controls preload='auto' width='640' height='264' poster='http://video-js.zencoder.com/oceans-clip.png'><source src='http://video-js.zencoder.com/oceans-clip.mp4' type='video/mp4' /><source src='http://video-js.zencoder.com/oceans-clip.webm' type='video/webm' /><source src='http://video-js.zencoder.com/oceans-clip.ogv' type='video/ogg' /></video>",paneConfig:"single",panes:null,isFinalStep:true,nextButtonShouldSubmit:true}],responseTemplates:[],axes:[],datadefs:[],tags:[],annotations:[],variables:[],units:[]};Smartgraphs.activityController=SC.ObjectController.create({canGotoNextPage:NO,isSaving:NO,cleanup:function(){Smartgraphs.activityPageController.cleanup();Smartgraphs.activityStepController.cleanup()},isDirty:function(){return !!(this.get("status")&SC.Record.DIRTY)}.property("status"),isError:function(){return !!(this.get("status")&SC.Record.ERROR)}.property("status"),isReady:function(){return !!(this.get("status")&SC.Record.READY)}.property("status"),save:function(){this.get("content").commitRecord();this.set("isSaving",YES)},_clearIsSaving:function(){if(this.get("isReady")){this.set("isSaving",NO)}}.observes("isReady"),_sendErrorSavingActivity:function(){if(this.get("isSaving")&&this.get("isError")){Smartgraphs.statechart.sendAction("errorSavingActivity")}}.observes("isSaving","isError"),_sendAnalytics:function(){var a=this.getPath("title");Smartgraphs.sendGaEvent("Launch",a)}.observes("title")});Smartgraphs.activityObjectsController=SC.Controller.create({_annotations:{},_datadefs:{},_datarefs:{},_variables:{},_tags:{},loadPredefinedObjects:function(){var c,b,a=this;this._datadefs={};this._datarefs={};this._annotations={};this._variables={};this._tags={};b=function(f,e,j){var h=SC.Query.local(f,"activity={activity}",{activity:c}),g=Smartgraphs.store.find(h);if(!(g.get("status")&SC.Record.READY)){throw"predefined %@ records are not READY!".fmt(e)}g.forEach(function(l){var k=l.get("name");if(SC.none(k)){return}if(j[k]){throw"The activity contains multiple %@ records named '%@'".fmt(e,k)}j[k]=l})};c=Smartgraphs.activityController.get("content");if(c){b(Smartgraphs.Datadef,"datadef",this._datadefs);b(Smartgraphs.Dataref,"dataref",this._datarefs);b(Smartgraphs.Annotation,"annotation",this._annotations);b(Smartgraphs.Variable,"variable",this._variables);b(Smartgraphs.Tag,"tag",this._tags)}this.notifyPropertyChange("datadefNames");this.notifyPropertyChange("datarefNames");this.notifyPropertyChange("annotationNames");this.notifyPropertyChange("variableNames")},findDatadef:function(a){return this._datadefs[a]},findDataref:function(a){return this._datarefs[a]},findAnnotation:function(a){return this._annotations[a]},findVariable:function(a){return this._variables[a]},setVariable:function(b,c){var a=this._variables[b];if(!a){a=Smartgraphs.store.createRecord(Smartgraphs.Variable,{activity:Smartgraphs.activityController.get("id"),name:b,value:null});a.set("id",Smartgraphs.getNextGuid());this.notifyPropertyChange("variableNames")}a.set("value",c);this._variables[b]=a;return a},getVariable:function(a){return this._variables[a]},findTag:function(a){return this._tags[a]},datadefNames:function(){var b=[];for(var a in this._datadefs){if(this._datadefs.hasOwnProperty(a)){b.push(a)}}return b}.property(),datarefNames:function(){var b=[];for(var a in this._datarefs){if(this._datarefs.hasOwnProperty(a)){b.push(a)}}return b}.property(),annotationNames:function(){var b=[];for(var a in this._annotations){if(this._annotations.hasOwnProperty(a)){b.push(a)}}return b}.property(),variableNames:function(){var b=[];for(var a in this._variables){if(this._variables.hasOwnProperty(a)){b.push(a)}}return b}.property()});Smartgraphs.activityOutlineController=SC.TreeController.create({allowsMultipleSelection:NO,allowsEmptySelection:YES,contentBinding:SC.Binding.oneWay("Smartgraphs.activityPagesController.outline"),isSelectable:NO,currentStepBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.content"),currentPageBinding:SC.Binding.oneWay("Smartgraphs.activityPageController.content"),updateSelection:function(){var e=this.get("content");if(!e){return}var b=e.get("pages");if(!b){return}var h=Smartgraphs.activityPageController.get("content");var a=b.indexOf(h);if(a<0){return}var c=e.get("treeItemChildren").objectAt(a);var f=Smartgraphs.activityStepController.get("content");var g=c.get("steps").indexOf(f);if(g<0){return}this.selectObject(c.get("treeItemChildren").objectAt(g))}.observes("currentStep","currentPage"),selectionDidChange:function(){var a=this.get("selection").firstObject(),b=a&&a.get("step"),c=a&&a.get("page");if(c){Smartgraphs.activityPageController.set("content",c);Smartgraphs.activityStepController.set("content",null);Smartgraphs.statechart.sendAction("outlineControllerDidNavigate")}else{if(b){Smartgraphs.activityPageController.set("content",b.get("activityPage"));Smartgraphs.activityStepController.set("content",b);Smartgraphs.statechart.sendAction("outlineControllerDidNavigate")}}}.observes("selection")});Smartgraphs.activityPageController=SC.ObjectController.create({pageSelectionDidChange:function(){this.setIfChanged("content",Smartgraphs.activityPagesController.get("selection").firstObject())}.observes("Smartgraphs.activityPagesController.selection"),cleanup:function(){Smartgraphs.firstGraphController.clear();Smartgraphs.secondGraphController.clear();Smartgraphs.firstTableController.clear();Smartgraphs.secondTableController.clear();Smartgraphs.activityViewController.clear()},getFromContext:function(b){var c=this.get("context"),e=c.hasOwnProperty(b)&&c[b],a;if(SC.typeOf(b)!==SC.T_STRING){return}if(e){return Smartgraphs.evaluator.evaluate(e)}else{a=Smartgraphs.activityObjectsController.findVariable(b);if(a){return a.get("value")}}},context:function(){var b=this.get("contextVars")||[],a={};b.forEach(function(c){a[c.name]=c.value});return a}.property("content")});Smartgraphs.activityPagesController=SC.ArrayController.create({allowsMultipleSelection:NO,currentPageDidChange:function(){var a=this.get("content");var b=Smartgraphs.activityPageController.get("content");if(a&&a.indexOf(b)>=0){this.selectObject(b)}if(!!b){Smartgraphs.sendGaEvent("Page Change","("+b.get("index")+") "+b.get("name"))}}.observes("Smartgraphs.activityPageController.content"),currentPageNumber:function(){var a=this.get("selection").indexSetForSource(this);return a&&a.firstObject()}.property("selection","[]").cacheable(),selectFirstPage:function(){if(this.get("length")>0){this.selectObject(this.objectAt(0))}},selectNextPage:function(){var a=this.get("currentPageNumber");if(a+1<this.get("length")){this.selectObject(this.objectAt(a+1))}},selectPreviousPage:function(){var a=this.get("currentPageNumber");if(a>0){this.selectObject(this.objectAt(a-1))}},selectPageId:function(a){var b=Smartgraphs.store.find(Smartgraphs.ActivityPage,a);if(b){this.selectObject(b)}},isLastPage:function(){return(this.get("currentPageNumber")>=(this.get("length")-1))}.property("currentPageNumber","length").cacheable(),isFirstPage:function(){return(this.get("currentPageNumber")===0)}.property("currentPageNumber").cacheable(),contentsDidChange:function(){var a=0;this.forEach(function(b){b.set("pageNumber",a++)})}.observes("[]"),outline:function(){var a=this.getPath("content.length")||0;return a===0?null:SC.Object.create({title:"toplevel",treeItemIsExpanded:YES,pages:this.map(function(b){return b}),treeItemChildren:this.map(function(b){var c=1;return SC.Object.create({title:b.get("name")||"Page %@".fmt(b.get("pageNumber")+1),treeItemIsExpanded:YES,treeItemIsGrouped:NO,page:b,steps:b.get("steps"),treeItemChildren:b.get("steps").map(function(e){return SC.Object.create({title:"Step %@".fmt(c++),step:e,treeItemIsExpanded:YES,treeItemChildren:null})})})})})}.property("[]").cacheable()});Smartgraphs.activityStepController=SC.ObjectController.create({canSubmit:NO,showSubmitButton:NO,submissibilitySubject:null,dialogTextHasContent:function(){return this.get("beforeText")||this.get("responseTemplate")||this.get("afterText")}.property("beforeText","responseTemplate","afterText").cacheable(),cleanup:function(){if(this._liveExpression){this._liveExpression.die()}this.set("submissibilitySubject",null)},begin:function(){this.setupPanes();Smartgraphs.responseTemplateController.setTemplate(this.get("responseTemplate"));Smartgraphs.statechart.sendAction("enableSubmission");this.startTools();this.executeCommands(this.get("startCommands"));this.processSubstitutions(this.get("substitutedExpressions"));Smartgraphs.sendGaEvent("Step Change","("+this.get("url")+")");if(Smartgraphs.activityPagesController.isLastPage()&&this.get("isTerminalStep")){Smartgraphs.sendGaEvent("Activity Completed",Smartgraphs.activityController.get("title"));window.onbeforeunload=function(){return null}}if(this.get("shouldFinishImmediately")){Smartgraphs.statechart.sendAction("submitStep")}else{this.waitForResponse()}},setupPanes:function(){Smartgraphs.activityViewController.setPaneConfig(this.get("paneConfig"));var b=this.get("panes");for(var a in b){if(!b.hasOwnProperty(a)){continue}this.setupPane(a,b[a])}},setupPane:function(c,a){var b=(a.annotations||[]).concat(a.highlightedAnnotations||[]);this._setAnnotationHighlights(a.annotations,a.highlightedAnnotations);c=Smartgraphs.activityViewController.validPaneFor(c);if(!c){return}if(a===null){Smartgraphs.activityViewController.hidePane(c);return}switch(a.type){case"graph":Smartgraphs.activityViewController.showGraph(c,{title:a.title,xAxis:a.xAxis,yAxis:a.yAxis,data:a.data,datarefs:(a.datarefs===undefined)?false:a.datarefs,annotations:b,showCrossHairs:(a.showCrossHairs===undefined)?false:a.showCrossHairs,showGraphGrid:(a.showGraphGrid===undefined)?false:a.showGraphGrid,showToolTipCoords:(a.showToolTipCoords===undefined)?false:a.showToolTipCoords,activeDatadefs:(a.activeDatadefs===undefined)?[]:a.activeDatadefs,legends:a.legends});return;case"table":Smartgraphs.activityViewController.showTable(c,{data:a.data,annotations:b,xLabel:a.xLabel,yLabel:a.yLabel});return;case"image":Smartgraphs.activityViewController.showImage(c,a.path,a.caption);return}},_setAnnotationHighlights:function(b,a){b=b||[];a=a||[];b.forEach(function(e){var c=Smartgraphs.activityObjectsController.findAnnotation(e);if(c){c.set("isHighlighted",NO)}});a.forEach(function(e){var c=Smartgraphs.activityObjectsController.findAnnotation(e);if(c){c.set("isHighlighted",YES)}})},startTools:function(){var a=this.get("tools")||[];a.forEach(function(b){Smartgraphs.Tool.start(b.name,b.setup)})},executeCommands:function(a){if(!a){return}a.forEach(function(b){Smartgraphs.executor.execute(b.name,b.args)})},setVariables:function(a){a=a||[];a.forEach(function(c){var b=Smartgraphs.activityPageController.getFromContext(c.value);if(b===undefined){b=Smartgraphs.evaluator.evaluate(c.value)}Smartgraphs.activityObjectsController.setVariable(c.name,b)})},processSubstitutions:function(c){var f=[],b=this;if(!c){return}c.forEach(function(g){f.push(Smartgraphs.activityPageController.getFromContext(g))});var e=this.get("beforeText");if(e){this.set("beforeText",e.fmt.apply(e,f))}var a=this.get("afterText");if(a){this.set("afterText",a.fmt.apply(a,f))}},enableSubmission:function(){this.set("canSubmit",YES)},disableSubmission:function(){this.set("canSubmit",NO)},waitForResponse:function(){var c=this.get("submissibilityDependsOn"),b=this.get("submissibilityCriterion");Smartgraphs.responseTemplateController.set("editingShouldBeEnabled",YES);if(c){this.set("submissibilitySubject",Smartgraphs.evaluator.evaluate(c))}if(b){var a=this;this._liveExpression=Smartgraphs.evaluator.evaluateLive(b,function(f){var e=a.get("canSubmit");if(f&&!e){Smartgraphs.statechart.sendAction("enableSubmission")}else{if(e&&!f){Smartgraphs.statechart.sendAction("disableSubmission")}}}).evaluate()}},handleSubmission:function(){if(!this.get("canSubmit")){return NO}var b=this.get("responseBranches"),e,c;this.executeCommands(this.get("afterSubmissionCommands"));this.setVariables(this.get("variableAssignments"));if(b&&b.length>0){for(c=0;c<b.length;c++){e=b[c];if(Smartgraphs.evaluator.evaluate(e.criterion)){Smartgraphs.statechart.sendAction("gotoStep",this,{stepId:e.step});return}}}var a=this.get("defaultBranch");if(a){Smartgraphs.statechart.sendAction("gotoStep",this,{stepId:a.get("id")})}},isTerminalStep:function(){if((!this.get("submissibilityCriterion")||this.get("isFinalStep"))&&!this.get("defaultBranch")&&!this.get("responseBranches")){return true}else{return false}}.property("submissibilityCriterion","defaultBranch","responseBranches").cacheable()});Smartgraphs.activityViewController=SC.Object.create({dataViewNowShowing:null,topPaneNowShowing:null,bottomPaneNowShowing:null,singlePaneNowShowing:null,firstImageValue:null,firstImageCaption:null,secondImageValue:null,secondImageCaption:null,paneIsSplit:null,canSubmitBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.canSubmit"),isFinalStepBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.isFinalStep"),hideSubmitButtonBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.hideSubmitButton"),nextButtonShouldSubmitBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.nextButtonShouldSubmit"),canGotoNextPageBinding:SC.Binding.oneWay("Smartgraphs.activityController.canGotoNextPage"),isFirstPageBinding:SC.Binding.oneWay("Smartgraphs.activityPagesController.isFirstPage"),isLastPageBinding:SC.Binding.oneWay("Smartgraphs.activityPagesController.isLastPage"),enableBackAndForward:NO,showSubmitButton:function(){return !(this.get("hideSubmitButton")||this.get("nextButtonShouldSubmit"))}.property("hideSubmitButton","nextButtonShouldSubmit").cacheable(),enableSubmitButtonBinding:SC.Binding.oneWay("Smartgraphs.activityStepController.canSubmit"),showNextPageButtonBinding:SC.Binding.not("Smartgraphs.activityPagesController.isLastPage"),highlightNextPageButton:function(){return this.get("canGotoNextPage")||(this.get("isFinalStep")&&this.get("nextButtonShouldSubmit")&&this.get("canSubmit"))}.property("canGotoNextPage","isFinalStep","nextButtonShouldSubmit","canSubmit").cacheable(),enableNextPageButton:function(){return(this.get("enableBackAndForward")&&!this.get("isLastPage"))||this.get("highlightNextPageButton")}.property("enableBackAndForward","isLastPage","highlightNextPageButton").cacheable(),enableBackPageButton:function(){return(this.get("enableBackAndForward")&&!this.get("isFirstPage"))}.property("enableBackAndForward","isFirstPage"),firstOrSecondFor:function(b){var a=this.get("paneIsSplit");if((!a&&b==="single")||(a&&b==="top")){return"first"}if(a&&b==="bottom"){return"second"}return NO},validPaneFor:function(b){var a=this.get("paneIsSplit");if((!a&&b==="single")||(a&&(b==="top"||b==="bottom"))){return b}else{console.error('invalid pane "'+b+'"');return NO}},otherPaneFor:function(a){a=this.validPaneFor(a);if(a==="bottom"){return"top"}if(a==="top"){return"bottom"}return NO},graphControllerForPane:function(b){b=this.validPaneFor(b);var a=this.firstOrSecondFor(b);if(a){return Smartgraphs.get(a+"GraphController")}return NO},tableControllerForPane:function(b){b=this.validPaneFor(b);var a=this.firstOrSecondFor(b);if(a){return Smartgraphs.get(a+"TableController")}return NO},setPaneConfig:function(a){if(a==="single"){this.set("paneIsSplit",false);this.set("dataViewNowShowing","Smartgraphs.activityPage.singlePaneDataView")}else{if(a==="split"){this.set("paneIsSplit",true);this.set("dataViewNowShowing","Smartgraphs.activityPage.splitPaneDataView")}}},showImage:function(e,b,a){e=this.validPaneFor(e);var c=this.firstOrSecondFor(e);if(!c){return NO}this.set(c+"ImageValue",b);this.set(c+"ImageCaption",a||null);this.set(e+"PaneNowShowing","Smartgraphs.activityPage."+c+"ImageView");return YES},showGraph:function(c,a){c=this.validPaneFor(c);var b=this.firstOrSecondFor(c);if(!b){return NO}Smartgraphs.get(b+"GraphController").setupGraph(a);this.set(c+"PaneNowShowing","Smartgraphs.activityPage."+b+"GraphPane");return YES},showTable:function(c,a){c=this.validPaneFor(c);var b=this.firstOrSecondFor(c);if(!b){return NO}Smartgraphs.get(b+"TableController").setupTable(a);this.set(c+"PaneNowShowing","Smartgraphs.activityPage."+b+"TableView");return YES},hidePane:function(a){a=this.validPaneFor(a);if(!a){return NO}this.set(a+"PaneNowShowing",null);return YES},paneForController:function(a){if(this.get("paneIsSplit")){if(a===Smartgraphs.firstGraphController){return"top"}else{if(a===Smartgraphs.secondGraphController){return"bottom"}}}else{if(a===Smartgraphs.firstGraphController){return"single"}}return NO},clear:function(){if(this.get("paneIsSplit")){this.hidePane("top");this.hidePane("bottom")}else{this.hidePane("single")}}});Smartgraphs.appWindowController=SC.Object.create({viewToShow:null,loadingMessage:null,shouldShowOutline:Smartgraphs.showOutline,shouldShowOutlineBindingDefault:SC.Binding.oneWay(),showActivityView:function(){this.set("viewToShow","Smartgraphs.activityPage.activityView")},showActivityLoadingView:function(){this.set("viewToShow","Smartgraphs.mainPage.loadingView");this.set("loadingMessage",Smartgraphs.activityPage.getPath("activityView.loadingMessage"))},showErrorLoadingActivityView:function(){this.set("viewToShow","Smartgraphs.activityPage.errorLoadingActivityView")},showAuthorView:function(){this.set("viewToShow","Smartgraphs.authorPage.authorView")},showOutline:function(){this.set("shouldShowOutline",YES)},hideOutline:function(){this.set("shouldShowOutline",NO)}});Smartgraphs.creditsController=SC.ObjectController.create({showCredits:function(){Smartgraphs.CreditsPane.show()}});Smartgraphs.AnnotationSupport={supportsAnnotations:YES,annotationList:null,modifiers:null,getAnnotation:function(a){return Smartgraphs.activityObjectsController.findAnnotation(a)},addAnnotation:function(a){if(this.findAnnotationByName(a.get("name"))){return}this.get("annotationList").pushObject(a);if(a.get("isModifierAnnotation")){this.didAddModifierAnnotation(a)}},clearAnnotations:function(){var a=this;var b=(this.get("annotationList")||[]).getEach("name");b.forEach(function(c){a.removeAnnotation(c)});this.set("annotationList",[])},removeAnnotation:function(b){var a=(SC.typeOf(b)===SC.T_STRING)?this.findAnnotationByName(b):b;if(a){this.get("annotationList").removeObject(a);if(a.get("isModifierAnnotation")){this.didRemoveModifierAnnotation(a)}}},findAnnotationByName:function(a){var b=this.get("annotationList");return b?b.findProperty("name",a):null},addAnnotationsByName:function(b){var a=this;if(!b){return}b.forEach(function(c){a.addAnnotation(a.getAnnotation(c))})},didAddModifierAnnotation:function(a){a.addObserver("x",this,this.updateModifiers);a.addObserver("y",this,this.updateModifiers);this.updateModifiers()},didRemoveModifierAnnotation:function(a){a.removeObserver("x",this,this.updateModifiers);a.removeObserver("y",this,this.updateModifiers);this.updateModifiers()},updateModifiers:function(){var j,f={},g,c,b,a,h,e;j=this.get("annotationList");if(this.unDimRepresentations){this.unDimRepresentations()}for(g=0,c=j.get("length");g<c;g++){b=j.objectAt(g);if(!b.get("isModifierAnnotation")){continue}a=b.get("x");h=b.get("y");e=b.get("datadefName");f[[a,h,e]]=b;if(!SC.none(a)&&!SC.none(h)){if(this.dimRepresentation){this.dimRepresentation(e)}}}this.set("modifiers",f)}};Smartgraphs.LABEL_TOOL=SC.State.extend({annotationName:null,markOnDataPoints:false,maxNoOfLabels:null,datadefName:null,annotation:null,pane:null,allowCoordinatesChange:NO,initialSubstate:"OFF",closeLabelIfInEditing:function(){var a=Smartgraphs.labelTool.graphViewForPane(this.get("pane"));var c=a.getPath("topAnnotationsHolder");var b=c.getLabelInEditMode();if(b){b.commitEditing();return YES}return NO},OFF:SC.State.design({labelToolStartTool:function(b,a){var c=this.get("parentState");c.set("annotationName",a.annotationName);c.set("markOnDataPoints",a.markOnDataPoints);c.set("maxNoOfLabels",a.maxNoOfLabels);c.set("datadefName",a.datadefName);c.set("pane",a.pane);if(a.allowCoordinatesChange){c.set("allowCoordinatesChange",a.allowCoordinatesChange)}this.gotoState(c.get("name")+".ON")}}),ON:SC.State.design({toolRoot:SC.outlet("parentState"),initialSubstate:"START",stopTool:function(){var a=this.get("parentState");this.gotoState(a.get("name")+".OFF")},enterState:function(){var c=this.get("parentState"),b=c.get("annotationName"),a=Smartgraphs.labelTool.getAnnotation(b);c.set("annotation",a)},exitState:function(){var a=this.get("parentState");a.get("annotation").disableRemoval();a.set("annotation",null);a.set("annotationName",null)},mouseDownAtPoint:function(f,c){var e=this.get("toolRoot");e.closeLabelIfInEditing();if(!this.parentState.markOnDataPoints){this.get("statechart").sendAction("addLabel",this,{x:c.x,y:c.y,shouldMarkTargetPoint:YES})}else{var b=this.getPath("toolRoot.datadefName");var g=f.getDataRepresentation(b);var a=g.getNearestPoint(c);if(a!==null){this.get("statechart").sendAction("addLabel",this,{x:a.x,y:a.y,shouldMarkTargetPoint:NO})}}return YES},dataPointSelected:function(c,a){var b=this.get("toolRoot");b.closeLabelIfInEditing();this.get("statechart").sendAction("addLabel",this,{x:a.x,y:a.y,shouldMarkTargetPoint:NO});return YES},START:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),enterState:function(){var a=this.getPath("toolRoot.annotation");if(SC.kindOf(a,Smartgraphs.Label)){this.gotoState("LABEL_ONE")}else{if(SC.kindOf(a,Smartgraphs.LabelSet)){this.gotoState("LABEL_MANY")}}}}),LABEL_ONE:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),initialSubstate:"NOT_ADDED",NOT_ADDED:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),enterState:function(){Smartgraphs.labelTool.addLabelsStarting(this)},exitState:function(){Smartgraphs.labelTool.addLabelsFinished(this)},addLabel:function(c,b){var a=this.getPath("toolRoot.annotation");var e=this.getPath("toolRoot.allowCoordinatesChange");a.set("x",b.x);a.set("y",b.y);a.set("shouldMarkTargetPoint",b.shouldMarkTargetPoint);a.set("createdByLabelTool",YES);a.set("allowCoordinatesChange",e);a.set("isPositionUpdateRequired",null);Smartgraphs.labelTool.appendLabel(this,a);this.gotoState("ADDED");return YES}}),ADDED:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),enterState:function(){var a=this.getPath("toolRoot.annotation");a.enableRemoval();a.set("isEditable",YES)},exitState:function(){},dataPointSelected:function(e,b){var c=this.get("toolRoot");c.closeLabelIfInEditing();var f=this.getPath("toolRoot.allowCoordinatesChange");if(!f){return}if(this.getPath("toolRoot.markOnDataPoints")===true){var a=this.getPath("toolRoot.annotation");var g=a.get("view");g.commitEditing();a.set("x",b.x);a.set("y",b.y);a.set("isPositionUpdateRequired",YES)}},mouseDownAtPoint:function(b,g){var c=this.get("toolRoot");c.closeLabelIfInEditing();var h=this.getPath("toolRoot.allowCoordinatesChange");if(!h){return}var j=this.getPath("toolRoot.annotation");var a=j.get("view");a.commitEditing();var e=this.getPath("toolRoot.datadefName");var f=b.getDataRepresentation(e);var k=f.getNearestPoint(g);if(k){j.set("x",k.x);j.set("y",k.y);j.set("isPositionUpdateRequired",YES)}},removeLabel:function(c,b){var a=this.getPath("toolRoot.annotation");if(b.label===a){Smartgraphs.labelTool.removeLabel(this,a);this.gotoState("NOT_ADDED")}return YES}})}),LABEL_MANY:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),initialSubstate:"ADDING",enterState:function(){var e=this.getPath("toolRoot.annotation");e.enableRemoval();var a=e.get("labels");var c=this.getPath("toolRoot.allowCoordinatesChange");for(var b=0;b<a.length();b++){a.objectAt(b).set("allowCoordinatesChange",c)}Smartgraphs.labelTool.appendLabelSet(this,e)},exitState:function(){var c=this.getPath("toolRoot.annotation");c.disableRemoval();var a=c.get("labels");for(var b=0;b<a.length();b++){a.objectAt(b).set("allowCoordinatesChange",NO)}Smartgraphs.labelTool.addLabelsFinished(this)},ADDING:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),enterState:function(){Smartgraphs.labelTool.addLabelsStarting(this)},addLabel:function(f,c){var e=this.get("toolRoot");e.closeLabelIfInEditing();var g=this.getPath("toolRoot.allowCoordinatesChange");var j=this.getPath("toolRoot.annotation");var b=j.createChildLabel();b.set("x",c.x);b.set("y",c.y);b.set("createdByLabelTool",YES);b.set("shouldMarkTargetPoint",c.shouldMarkTargetPoint);b.set("isEditable",YES);b.set("allowCoordinatesChange",g);var a=this.getPath("toolRoot.maxNoOfLabels");if(a){var h=j.getPath("labels.length");if(h===a){this.gotoState("MAX_LABELS_ADDED")}}return YES}}),MAX_LABELS_ADDED:SC.State.design({enterState:function(){Smartgraphs.labelTool.addLabelsFinished(this)}}),removeLabel:function(c,b){var e=this.getPath("toolRoot.annotation");e.removeLabel(b.label);var a=this.getSubstate("ADDING");if(!a.get("isCurrentState")){this.gotoState("ADDING")}return YES}})})});Smartgraphs.ANIMATION_TOOL=SC.State.extend({initialSubstate:"OFF",OFF:SC.State.design({animationToolStartTool:function(){var a=this.get("parentState");this.gotoState(a.get("name")+".ON")}}),ON:SC.State.design({initialSubstate:"ANIMATION_CLEARED",owner:SC.outlet("statechart.owner"),stopTool:function(){var a=this.get("parentState");this.gotoState(a.get("name")+".OFF")},enterState:function(){this.get("owner").revealAllControls();this.get("owner").showControls();Smartgraphs.animationTool.setupGraphControllers()},exitState:function(){Smartgraphs.animationTool.stopAnimating();Smartgraphs.animationTool.clearGraphControllers();Smartgraphs.animationTool.clearSetup();this.get("owner").hideControls()},ANIMATION_CLEARED:SC.State.design({owner:SC.outlet("statechart.owner"),enterState:function(){Smartgraphs.animationTool.stopAnimating();Smartgraphs.animationTool.clearAnimation();this.get("owner").highlightStartControl()},startControlWasClicked:function(){this.gotoState("ANIMATION_RUNNING")}}),ANIMATION_RUNNING:SC.State.design({owner:SC.outlet("statechart.owner"),enterState:function(){Smartgraphs.animationTool.startAnimating();this.get("owner").highlightStopControl()},stopControlWasClicked:function(){this.gotoState("ANIMATION_STOPPED")},animationFinished:function(){this.gotoState("ANIMATION_FINISHED")},graphViewDidResize:function(){this.gotoState("ANIMATION_CLEARED")}}),ANIMATION_STOPPED:SC.State.design({owner:SC.outlet("statechart.owner"),enterState:function(){Smartgraphs.animationTool.stopAnimating();this.get("owner").highlightStartControl();this.get("owner").enableClearControl()},startControlWasClicked:function(){this.gotoState("ANIMATION_RUNNING")},clearControlWasClicked:function(){this.gotoState("ANIMATION_CLEARED")},graphViewDidResize:function(){this.gotoState("ANIMATION_CLEARED")}}),ANIMATION_FINISHED:SC.State.design({owner:SC.outlet("statechart.owner"),enterState:function(){this.get("owner").highlightClearControl();Smartgraphs.animationTool.incrementProperty("playCount");Smartgraphs.animationTool.markAnimationFinished()},clearControlWasClicked:function(){this.gotoState("ANIMATION_CLEARED")}})})});Smartgraphs.PREDICTION_TOOL=SC.State.extend({initialSubstate:"OFF",uiBehavior:"extend",OFF:SC.State.design({toolRoot:SC.outlet("parentState"),predictionToolStartTool:function(c,a){var b=this.get("toolRoot");b.set("annotationName",a.annotationName);if(a.uiBehavior==="freehand"){b.set("uiBehavior",a.uiBehavior)}this.gotoState(this.getPath("parentState.ON"))}}),ON:SC.State.design({toolRoot:SC.outlet("parentState"),owner:SC.outlet("statechart.owner"),initialSubstate:"CHOOSE_BEHAVIOR",enterState:function(){var b=this.get("toolRoot"),c=b.get("annotationName"),a=Smartgraphs.predictionTool.getAnnotation(c);if(!a){throw SC.Error.desc("Prediction tool was started with a bogus annotation name '%@'".fmt(c))}if(!SC.kindOf(a,Smartgraphs.FreehandSketch)){throw SC.Error.desc("Prediction tool was started with a non-FreehandSketch annotation name '%@'".fmt(c))}this.get("owner").showControls();this.get("owner").revealOnlyClearControl();a.clear();Smartgraphs.predictionTool.appendSketch(this,a);Smartgraphs.predictionTool.predictionStarting(this);b.set("annotation",a)},exitState:function(){var a=this.get("toolRoot");this.get("owner").hideControls();Smartgraphs.predictionTool.predictionFinished(this);a.set("annotation",null);a.set("annotationName",null)},stopTool:function(){this.gotoState(this.getPath("toolRoot.OFF"))},CHOOSE_BEHAVIOR:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),enterState:function(){var a=this.getPath("toolRoot.uiBehavior");if(a==="extend"){this.gotoState(this.getPath("parentState.EXTEND"))}else{if(a==="freehand"){this.gotoState(this.getPath("parentState.FREEHAND"))}else{throw SC.Error.desc("Prediction behavior was started with unknown UI behavior argument '%@'".fmt(a))}}}}),EXTEND:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),initialSubstate:"START",START:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),owner:SC.outlet("statechart.owner"),enterState:function(){this.getPath("toolRoot.annotation").clear();this.get("owner").disableAllControls()},mouseDownAtPoint:function(b,a){this.getPath("toolRoot.annotation").addPoint(a.x,a.y)},mouseDraggedToPoint:function(b,a){this.getPath("toolRoot.annotation").addPoint(a.x,a.y);this.getPath("parentState.CONTINUE")},mouseUpAtPoint:function(b,a){this.getPath("toolRoot.annotation").addPoint(a.x,a.y);this.gotoState(this.getPath("parentState.CONTINUE"))}}),CONTINUE:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),owner:SC.outlet("statechart.owner"),enterState:function(){this.get("owner").highlightClearControl()},mouseDownAtPoint:function(b,a){this.getPath("toolRoot.annotation").addPoint(a.x,a.y)},mouseDraggedToPoint:function(b,a){this.getPath("toolRoot.annotation").updateLatestPoint(a.x,a.y)},mouseUpAtPoint:function(b,a){this.getPath("toolRoot.annotation").updateLatestPoint(a.x,a.y)},clearControlWasClicked:function(){this.gotoState(this.getPath("parentState.START"))}})}),FREEHAND:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),initialSubstate:"START",START:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),owner:SC.outlet("statechart.owner"),enterState:function(){this.getPath("toolRoot.annotation").clear();this.get("owner").disableAllControls();Smartgraphs.predictionTool.predictionStarting(this.get("toolRoot"))},mouseDownAtPoint:function(b,a){this.getPath("toolRoot.annotation").addPoint(a.x,a.y);this.gotoState(this.getPath("parentState.DRAWING"))}}),DRAWING:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),owner:SC.outlet("statechart.owner"),addPoint:function(a,b){this.getPath("toolRoot.annotation").addPoint(a,b)},mouseDraggedToPoint:function(b,a){this.addPoint(a.x,a.y)},mouseUpAtPoint:function(b,a){this.addPoint(a.x,a.y);this.gotoState(this.getPath("parentState.DONE"))}}),DONE:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),owner:SC.outlet("statechart.owner"),enterState:function(){Smartgraphs.predictionTool.predictionFinished(this.get("toolRoot"));this.get("owner").highlightClearControl()},clearControlWasClicked:function(){this.gotoState(this.getPath("parentState.START"))}})})})});Smartgraphs.GRAPHING_TOOL=SC.State.extend({initialSubstate:"OFF",OFF:SC.State.design({toolRoot:SC.outlet("parentState"),graphingToolStartTool:function(c,a){var b=this.get("toolRoot");b.set("annotationName",a.annotationName);b.set("datadefName",a.datadefName);if(a.shape==="singleLine"){b.set("shape",a.shape)}this.gotoState(this.getPath("parentState.ON"))}}),ON:SC.State.design({toolRoot:SC.outlet("parentState"),owner:SC.outlet("statechart.owner"),initialSubstate:"CHOOSE_SHAPE",enterState:function(){var b=Smartgraphs.graphingTool;var e=this.get("toolRoot"),g=e.get("annotationName"),a=b.getAnnotation(g),c=e.get("datadefName"),f=b.getDatadef(c);if(!a){throw SC.Error.desc("Graphing tool was started with a bogus annotation name '%@'".fmt(g))}if(!SC.kindOf(a,Smartgraphs.FreehandSketch)){throw SC.Error.desc("Graphing tool was started with a non-FreehandSketch annotation name '%@'".fmt(g))}if(!f){throw SC.Error.desc("Graphing tool was started with a bogus datadef name '%@'".fmt(c))}b.hideGraphTitle();b.graphingStarting(this);b.updateGraphLogicalBounds();e.set("annotation",a);e.set("datadef",f);b.appendSketch(this,a);b.appendRepresentation(this,f)},exitState:function(){this.get("owner").hideControls();var a=Smartgraphs.graphingTool;a.set("pointMovedNumber",null);a.set("pointMoved",false);a.graphingFinished(this);a.set("lineCount",0);var b=this.get("toolRoot");b.set("annotation",null);b.set("annotationName",null);b.set("datadef",null);b.set("datadefName",null)},stopTool:function(){this.gotoState(this.getPath("toolRoot.OFF"))},CHOOSE_SHAPE:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),enterState:function(){var a=this.getPath("toolRoot.shape");if(a==="singleLine"){this.gotoState(this.getPath("parentState.SINGLE_LINE"))}else{throw SC.Error.desc("Graphing tool was started with unknown 'shape' argument '%@'".fmt(a))}}}),SINGLE_LINE:SC.State.design({toolRoot:SC.outlet("parentState.toolRoot"),initialSubstate:"START",START:SC.State.design({pointDraggedInfo:{datadef:null,annotation:null,initialPoint:null},toolRoot:SC.outlet("parentState.toolRoot"),owner:SC.outlet("statechart.owner"),enterState:function(){this.get("owner").disableAllControls();Smartgraphs.graphingTool.showToolTip(true)},mouseMoveAtPoint:function(e,c){var b=Smartgraphs.graphingTool;var a=b.get("pointRadius");if(a===null){b.setPointRadius()}if(b.isPointOverlap(c)){b.showToolTip(false)}else{var f=this.getPath("toolRoot.datadef");var g=f.get("points");if(g.length<2){b.showToolTip(true)}else{b.showToolTip(false)}}},mouseDownAtPoint:function(c,b){var a=Smartgraphs.graphingTool;var e=this.getPath("toolRoot.datadef");var f=e.get("points");if(f.length<2){a.plotPoint({x:b.x,y:b.y});if(f.length>=2){a.drawLineThroughPoints(f[0],f[1],this);a.graphingFinished(this);a.showToolTip(false)}}},dataPointSelected:function(a,j){var h=Smartgraphs.graphingTool;var k=this.getPath("toolRoot.datadef");if(!k){return}var c=k.get("name"),l=j.dataRepresentation;if(l&&l.getPath("datadef.name")===c){var b=k.get("points");var e=this.getPath("toolRoot.annotation");var g=e.get("points");for(var f=0;f<b.length;f++){if((j.x===b[f][0])&&(j.y===b[f][1])){h.set("pointMovedNumber",f);break}}k.set("dragValueX",j.x);k.set("dragValueY",j.y);this.pointDraggedInfo.datadef=k;this.pointDraggedInfo.annotation=e;this.pointDraggedInfo.initialPoint=Smartgraphs.Point.create({x:j.x,y:j.y})}},dataPointDragged:function(a,l){var j=Smartgraphs.graphingTool;if(j.isPointOverlap(l)){j.showToolTip(false);return}var c=this.pointDraggedInfo;var m=c.datadef;if(!m){return}var f=m.get("name"),n=l.dataRepresentation;if(n&&n.getPath("datadef.name")===f){var b=m.get("points");var e=c.annotation;var h=e.get("points");var k=j.get("pointMovedNumber");m.replacePoint(k,l.x,l.y);m.set("dragValueX",l.x);m.set("dragValueY",l.y);if(b.length>=2){var g=j.getLineEndPointsArray(b[0],b[1]);h.replace(0,2,g)}}},dataPointUp:function(a,j){var g=Smartgraphs.graphingTool;var c=this.pointDraggedInfo;var k=c.datadef;if(!k){return}var e=k.get("name"),l=j.dataRepresentation;if(l&&l.getPath("datadef.name")===e){var b=c.datadef.get("points");var h=g.get("pointMovedNumber");var f=b[h];var m=Smartgraphs.Point.create({x:f[0],y:f[1]});var n=c.initialPoint;if(n.xFixed()!==m.xFixed()||n.yFixed()!==m.yFixed()){g.set("pointMoved",true)}g.set("pointMovedNumber",null);c.datadef.set("dragValueX",null);c.datadef.set("dragValueY",null)}}})})})});sc_require("mixins/annotation_support");sc_require("tools/label/label_state");sc_require("tools/animation/animation_state");sc_require("tools/prediction/prediction_state");sc_require("tools/graphing/graphing_state");Smartgraphs.GraphController=SC.Object.extend(Smartgraphs.AnnotationSupport,{init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("statechartDef").create();a.initStatechart();a.set("owner",this);this.set("statechart",a)},statechartDef:SC.Statechart.design({trace:Smartgraphs.trace,rootState:SC.State.design({substatesAreConcurrent:YES,LABEL_TOOL:Smartgraphs.LABEL_TOOL.design(),ANIMATION_TOOL:Smartgraphs.ANIMATION_TOOL.design(),PREDICTION_TOOL:Smartgraphs.PREDICTION_TOOL.design(),GRAPHING_TOOL:Smartgraphs.GRAPHING_TOOL.design(),startControlWasClicked:function(){Smartgraphs.statechart.sendAction("startControlWasClicked");return NO},clearControlWasClicked:function(){Smartgraphs.statechart.sendAction("clearControlWasClicked");return NO},stopControlWasClicked:function(){Smartgraphs.statechart.sendAction("stopControlWasClicked");return NO}})}),statechart:null,colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],dataRepresentations:null,graphableDataObjects:null,arrLegends:null,datadefList:null,datarefList:null,xUnits:null,yUnits:null,title:null,showGraphGrid:null,showToolTipCoords:null,toolTipVisibilityOverrideFromToolState:true,toolTipVisibilityOverrideOnPointHover:true,toolTipPoint:null,tooltipCoords:{x:0,y:0,top:0,left:0,coordOffset:5,width:100},animationInfo:null,requestedCursorStyle:"default",startControlIsVisible:NO,startControlIsEnabled:NO,startControlIsDefault:NO,stopControlIsVisible:NO,stopControlIsEnabled:NO,stopControlIsDefault:NO,clearControlIsVisible:NO,clearControlIsEnabled:NO,clearControlIsDefault:NO,showInControlsPanel:null,addDatadef:function(a){if(this.findDatadefByName(a.get("name"))){return}this.get("datadefList").pushObject(a)},addDataref:function(a){if(this.findDatarefByName(a.get("name"))){return}this.get("datarefList").pushObject(a)},toolTipPointDidChange:function(){var a=this.get("toolTipPoint");if(a!==null){this.updateToolTip(a,null)}}.observes("toolTipPoint"),clearDatadefs:function(){var b=this;var a=(this.get("datadefList")||[]).getEach("name");a.forEach(function(c){b.removeDatadef(c)});this.set("datadefList",[])},clearDatarefs:function(){var a=this;var b=(this.get("datarefList")||[]).getEach("name");b.forEach(function(c){a.removeDataref(c)});this.set("datarefList",[])},removeDatadef:function(b){var a=(SC.typeOf(b)===SC.T_STRING)?this.findDatadefByName(b):b;if(a){this.get("datadefList").removeObject(a)}},removeDataref:function(b){var a=(SC.typeOf(b)===SC.T_STRING)?this.findDatarefByName(b):b;if(dataref){this.get("datarefList").removeObject(dataref)}},findDatadefByName:function(a){var b=this.get("datadefList");return b?b.findProperty("name",a):null},findDatarefByName:function(a){var b=this.get("datarefList");return b?b.findProperty("name",a):null},addDatadefsByName:function(a){var b=this;if(!a){return}a.forEach(function(c){b.addDatadef(b.getDatadef(c))})},showControls:function(){this.disableAllControls();this.set("showInControlsPanel",Smartgraphs.GraphController.CONTROLS)},showSensorLoadingView:function(){this.set("showInControlsPanel",Smartgraphs.GraphController.SENSOR_LOADING)},hideControls:function(a){this.set("showInControlsPanel",null)},revealAllControls:function(){this.set("startControlIsVisible",YES);this.set("stopControlIsVisible",YES);this.set("clearControlIsVisible",YES)},revealOnlyClearControl:function(){this.set("startControlIsVisible",NO);this.set("stopControlIsVisible",NO);this.set("clearControlIsVisible",YES)},disableAllControls:function(){this.set("startControlIsEnabled",NO);this.set("startControlIsDefault",NO);this.set("stopControlIsEnabled",NO);this.set("stopControlIsDefault",NO);this.set("clearControlIsEnabled",NO);this.set("clearControlIsDefault",NO)},highlightStartControl:function(){this.set("startControlIsEnabled",YES);this.set("startControlIsDefault",YES);this.set("stopControlIsEnabled",NO);this.set("stopControlIsDefault",NO);this.set("clearControlIsEnabled",NO);this.set("clearControlIsDefault",NO)},highlightStopControl:function(){this.set("startControlIsEnabled",NO);this.set("startControlIsDefault",NO);this.set("stopControlIsEnabled",YES);this.set("stopControlIsDefault",YES);this.set("clearControlIsEnabled",NO);this.set("clearControlIsDefault",NO)},highlightClearControl:function(){this.set("startControlIsEnabled",NO);this.set("startControlIsDefault",NO);this.set("stopControlIsEnabled",NO);this.set("stopControlIsDefault",NO);this.set("clearControlIsEnabled",YES);this.set("clearControlIsDefault",YES)},enableClearControl:function(){this.set("clearControlIsEnabled",YES);this.set("clearControlIsDefault",NO)},getAxis:function(a){return Smartgraphs.store.find(Smartgraphs.Axis,a)},getDatadef:function(a){return Smartgraphs.activityObjectsController.findDatadef(a)},getDataref:function(a){return Smartgraphs.activityObjectsController.findDataref(a)},clear:function(){this.sendAction("stopTool");this.hideControls();this.set("title",null);this.set("xAxis",null);this.set("yAxis",null);this.set("showGraphGrid",null);this.set("showCrossHairs",null);this.set("showToolTipCoords",null);this.set("graphableDataObjects",[]);this.set("arrLegends",[]);this.set("dataRepresentations",[]);this.clearAnnotations();this.clearDatadefs()},setupGraph:function(F){var g=F.data?F.data.concat([]):[],p=this,w=F.datarefs||[],D=F.legends||undefined,n=F.activeDatadefs||[];if(g.length===1&&n.length===1){this.getDatadef(n[0]).set("isActive",true)}else{var f=n.length;var o=[];if(f>0){for(var z=0;z<g.length;z++){var y="";if(SC.typeOf(g[z])===SC.T_STRING){y=g[z]}else{y=g[z][0]}this.getDatadef(y).set("isActive",false);for(var x=0;x<n.length;x++){if(y===n[x]){this.getDatadef(y).set("isActive",true);g.splice(z,1);z--;break}}}g=g.concat(n)}}this.clear();this.set("title",F.title);this.set("xAxis",this.getAxis(F.xAxis));this.set("yAxis",this.getAxis(F.yAxis));this.set("showGraphGrid",F.showGraphGrid);this.set("showCrossHairs",F.showCrossHairs);this.set("showToolTipCoords",F.showToolTipCoords);var E=this.getAxis(F.xAxis).get("max");var e=this.getAxis(F.yAxis).get("max");var C=this.getAxis(F.xAxis).get("min");var a=this.getAxis(F.yAxis).get("min");var q=15;var t=[];if(parseInt(a,10)<0||parseInt(C,10)<0){q=21}var s=(E+","+e).length*q;var B=this.get("tooltipCoords");this.set("tooltipCoords",{x:0,y:0,top:0,left:0,coordOffset:5,width:s});g.forEach(function(H){var k,j={},m,G;if(SC.typeOf(H)===SC.T_STRING){k=H}else{k=H[0];j=H[1]}j.xMin=C;j.xMax=E;m=p.getDatadef(k);if(j===undefined){j=[]}if(j["point-type"]===undefined){j["point-type"]=m.get("pointType")}if(j["line-type"]===undefined){j["line-type"]=m.get("lineType")}G=m.getNewRepresentation(j);p.addDataRepresentation(G)});var c=this.get("dataRepresentations")||[];for(var v=0;v<c.length;v++){var b=c[v];b.addObserver("graphableObjects",this,this.graphableObjectsDidChange)}if(D!==undefined){var l=D.referenceDatadef;if(l!==undefined){var A=D.datadefs.length;for(var u=0;u<A;u++){var h=D.datadefs[u];if(h!==l){this.getDatadef(h).set("referenceDatadefName",l)}}}this.set("arrLegends",D)}if(w){w.forEach(function(k){var j=p.getDataref(k);j.populateDatadef(C,E,a,e)})}this.addAnnotationsByName(F.annotations)},graphableObjectsDidChange:function(b){var c=[];for(var a=0;a<this.graphableDataObjects.length;a++){var f=this.graphableDataObjects[a];c.push(f);for(var g=0;g<b.graphableObjects.length;g++){var e=b.graphableObjects[g];if(e!==f){c.push(e)}}}this.set("graphableDataObjects",c)},addDataRepresentation:function(f){var c=this.getPath("xAxis.units"),e=this.getPath("yAxis.units"),b=f.get("xUnits"),a=f.get("yUnits");if(c!==b){throw"x units of data %@ do not match x axis units (%@)".fmt(f.get("name"),c.get("pluralName"))}if(e!==a){throw"y units of data %@ do not match y axis units (%@)".fmt(f.get("name"),e.get("pluralName"))}if(!f.get("color")){f.set("color",this.getColorForDataRepresentation(f))}this.get("dataRepresentations").push(f);this.get("graphableDataObjects").pushObjects(f.get("graphableObjects"))},getColorForDataRepresentation:function(j){var g=this.getDatadef(j.get("name")),f=this.get("dataRepresentations").getEach("color");if(g){var e=g.get("color");if(e&&!f.contains(e)){return e}}var h=j.get("defaultColor"),b,c,a;if(h&&!f.contains(h)){if(g){g.set("color",h)}return h}b=this.get("colors");for(c=0,a=b.get("length");c<a;c++){if(!f.contains(b.objectAt(c))){if(g){g.set("color",b.objectAt(c))}return b.objectAt(c)}}if(g){g.set("color",b.objectAt(0))}return b.objectAt(0)},dimRepresentation:function(a){var b=this.get("dataRepresentations").findProperty("name",a);if(b){b.set("isDimmed",YES)}},unDimRepresentations:function(){this.get("dataRepresentations").setEach("isDimmed",NO)},updateToolTip:function(a,g){var b=Smartgraphs.Point.create();b.set("x",a.x);b.set("y",a.y);var f=b.xRounded().toFixed(2);var e=b.yRounded().toFixed(2);var c=this.get("tooltipCoords");if(g===null||g===undefined){c={x:f,y:e,top:c.top,left:c.left,coordOffset:c.coordOffset,width:c.width}}else{c={x:f,y:e,top:g.y,left:g.x,coordOffset:c.coordOffset,width:c.width}}this.set("tooltipCoords",c)},getDataRepresentation:function(b){var a=this.get("dataRepresentations");for(var c=a.get("length")-1;c>=0;c--){if(a[c].get("name")===b){return a[c]}}return null},sendAction:function(e,c,b){var a=this.get("statechart");return a.sendAction.apply(a,arguments)},graphingToolStartTool:function(a){this.sendAction("graphingToolStartTool",this,a)},graphingToolGraphingStarting:function(){if(this.showCrossHairs===true){this.set("requestedCursorStyle","crosshair")}},graphingToolGraphingFinished:function(){this.set("requestedCursorStyle","default")},predictionToolStartTool:function(a){this.sendAction("predictionToolStartTool",this,a)},predictionToolPredictionStarting:function(){this.set("requestedCursorStyle","crosshair")},predictionToolPredictionFinished:function(){this.set("requestedCursorStyle","default")},labelToolStartTool:function(a){this.sendAction("labelToolStartTool",this,a)},labelToolAddLabelsStarting:function(){this.set("requestedCursorStyle","pointer")},labelToolAddLabelsFinished:function(){this.set("requestedCursorStyle","default")},labelViewRemoveLabel:function(a){if(Smartgraphs.statechart&&Smartgraphs.statechart.get("statechartIsInitialized")){Smartgraphs.statechart.sendAction("removeLabel",this,{label:a})}return !!this.sendAction("removeLabel",this,{label:a})},inputAreaMouseDown:function(a,b){if(Smartgraphs.statechart&&Smartgraphs.statechart.get("statechartIsInitialized")){Smartgraphs.statechart.sendAction("mouseDownAtPoint",this,{x:a,y:b})}return !!this.sendAction("mouseDownAtPoint",this,{x:a,y:b})},inputAreaMouseDragged:function(a,b){return !!this.sendAction("mouseDraggedToPoint",this,{x:a,y:b})},inputAreaMouseUp:function(a,b){return !!this.sendAction("mouseUpAtPoint",this,{x:a,y:b})},inputAreaMouseMove:function(a,b){return !!this.sendAction("mouseMoveAtPoint",this,{x:a,y:b})},dataPointSelected:function(b,a,c){if(Smartgraphs.statechart&&Smartgraphs.statechart.get("statechartIsInitialized")){Smartgraphs.statechart.sendAction("dataPointSelected",this,{dataRepresentation:b,x:a,y:c})}this.sendAction("dataPointSelected",this,{dataRepresentation:b,x:a,y:c})},dataPointDown:function(b,a,c){if(Smartgraphs.statechart&&Smartgraphs.statechart.get("statechartIsInitialized")){Smartgraphs.statechart.sendAction("dataPointDown",this,{dataRepresentation:b,x:a,y:c})}this.sendAction("dataPointDown",this,{dataRepresentation:b,x:a,y:c})},dataPointDragged:function(b,a,c){if(Smartgraphs.statechart&&Smartgraphs.statechart.get("statechartIsInitialized")){Smartgraphs.statechart.sendAction("dataPointDragged",this,{dataRepresentation:b,x:a,y:c})}this.sendAction("dataPointDragged",this,{dataRepresentation:b,x:a,y:c})},dataPointUp:function(b,a,c){if(Smartgraphs.statechart&&Smartgraphs.statechart.get("statechartIsInitialized")){Smartgraphs.statechart.sendAction("dataPointUp",this,{dataRepresentation:b,x:a,y:c})}this.sendAction("dataPointUp",this,{dataRepresentation:b,x:a,y:c})}});Smartgraphs.GraphController.CONTROLS="controls";Smartgraphs.GraphController.SENSOR_LOADING="sensor-loading";sc_require("controllers/graph");Smartgraphs.firstGraphController=Smartgraphs.GraphController.create({});sc_require("mixins/annotation_support");Smartgraphs.TableController=SC.ArrayController.extend(Smartgraphs.AnnotationSupport,{init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("statechartDef").create();a.initStatechart();a.set("owner",this);this.set("statechart",a)},statechartDef:SC.Statechart.design({trace:Smartgraphs.trace,rootState:SC.State.design({substatesAreConcurrent:YES,DEFAULT:SC.State.design({owner:SC.outlet("statechart.owner"),taggingToolDidUpdateTag:function(b,a){this.get("owner").updateRecentTagIndexStack(a);return YES}})})}),statechart:null,datadef:null,dataRepresentation:null,pointset:null,xLabel:null,yLabel:null,recentTagIndexStack:null,isSelectable:NO,selectionBinding:"*pointset.selection",selectionBindingDefault:SC.Binding.oneWay(),isStreamingBinding:"*datadef.isStreaming",isStreamingBindingDefault:SC.Binding.oneWay(),latestXBinding:"*datadef.latestX",latestXBindingDefault:SC.Binding.oneWay(),latestYBinding:"*datadef.latestY",latestYBindingDefault:SC.Binding.oneWay(),xUnitsBinding:"*datadef.xUnits",xUnitsBindingDefault:SC.Binding.oneWay(),yUnitsBinding:"*datadef.yUnits",yUnitsBindingDefault:SC.Binding.oneWay(),xRoundingFunc:"xFixed",yRoundingFunc:"yFixed",showTable:function(){return !this.get("isStreaming")}.property("isStreaming").cacheable(),clear:function(){this.clearAnnotations();this.set("datadef",null);this.set("dataRepresentation",null);this.set("pointset",null);this.set("content",[])},setupTable:function(c){var e,b,a={},f;SC.RunLoop.begin();this.clear();SC.RunLoop.end();if(SC.typeOf(c.data)===SC.T_STRING){b=c.data}else{b=c.data[0];a=c.data[1]}e=Smartgraphs.activityObjectsController.findDatadef(b);if(a===undefined){a=[]}if(a["point-type"]===undefined){a["point-type"]=e.get("pointType")}if(a["line-type"]===undefined){a["line-type"]=e.get("lineType")}f=e.getNewRepresentation(a);if(c.xLabel!==undefined){this.set("xLabel",c.xLabel)}else{this.set("xLabel",e.get("xLabel"))}if(c.yLabel!==undefined){this.set("yLabel",c.yLabel)}else{this.set("yLabel",e.get("yLabel"))}this.set("datadef",e);this.set("dataRepresentation",f);this.set("pointset",f.get("pointset"));this.bind("content",".pointset.points");this.addAnnotationsByName(c.annotations)},updateRecentTagIndexStack:function(n){var f=this.getPath("datadef.name"),c=n.get("datadefName"),h=SC.guidFor(n),j=this.get("recentTagIndexStack"),l,b=n.get("x"),a=n.get("y"),m,e,g;if(SC.none(j)){j=[];this.set("recentTagIndexStack",[]);this._stackIndicesOfTagsByGuid={}}if(c===null){l=this._stackIndicesOfTagsByGuid[h];if(!SC.none(l)){j.removeAt(l,1);delete this._stackIndicesOfTagsByGuid[h]}}else{if(c===f){if(f!==this._datadefNameForTagStack){j.set("length",0);this._stackIndicesOfTagsByGuid={};this._datadefNameForTagStack=f}l=this._stackIndicesOfTagsByGuid[h];if(!SC.none(l)){j.removeAt(l,1);delete this._stackIndicesOfTagsByGuid[h]}var k=this.get("dataRepresentation");if(k&&k.getPath("datadef.lineType")==="connected"&&k.getPath("datadef.pointType")==="none"){k.showSinglePoint(b,a)}for(e=0,g=this.get("length");e<g;e++){m=this.objectAt(e);if(m.get("x")===b&&m.get("y")===a){j.pushObject(e);l=j.get("length")-1;this._stackIndicesOfTagsByGuid[h]=l;break}}}}},setRoundingFunc:function(a){this.set("xRoundingFunc","x"+a);this.set("yRoundingFunc","y"+a)},sendAction:function(e,c,b){var a=this.get("statechart");return a.sendAction.apply(a,arguments)},dataPointSelected:function(c,a,f){var b=Smartgraphs.activityViewController;var e=b.graphControllerForPane("top")||b.graphControllerForPane("bottom");if(e){e.dataPointSelected(c,a,f)}else{Smartgraphs.statechart.sendAction("dataPointSelected",this,{dataRepresentation:c,x:a,y:f})}}});sc_require("controllers/table");Smartgraphs.firstTableController=Smartgraphs.TableController.create({});Smartgraphs.loadingActivityController=SC.Object.create({openAuthorViewAfterLoading:NO});Smartgraphs.responseTemplateController=SC.ObjectController.create({editingShouldBeEnabled:NO,viewShouldReset:NO,setTemplate:function(b){this.set("content",b);var a=this.get("initialValues");if(a){this.set("values",a.copy())}this.set("viewShouldReset",YES)}});sc_require("controllers/graph");Smartgraphs.secondGraphController=Smartgraphs.GraphController.create({});sc_require("controllers/table");Smartgraphs.secondTableController=Smartgraphs.TableController.create({});Smartgraphs.sensorAppletController=SC.Object.create({sensorState:"not loaded",isAppended:false,listenerPath:"Smartgraphs.sensorAppletController",appletId:"sg-applet",classNames:"applet sensor-applet",jarUrls:["org/concord/sensor-native/sensor-native.jar","org/concord/otrunk/otrunk.jar","org/concord/framework/framework.jar","org/concord/frameworkview/frameworkview.jar","jug/jug/jug.jar","jdom/jdom/jdom.jar","org/concord/sensor/sensor.jar","org/concord/data/data.jar","org/concord/sensor/sensor-applets/sensor-applets.jar"],code:"org.concord.sensor.applet.OTSensorApplet",codebase:"/jnlp",resourcePath:"/distance.otml",html:function(){return["<applet ",'id="',this.get("appletId"),'" ','class="',this.get("classNames"),'" ','archive="',this.get("jarUrls").join(", "),'" ','code="',this.get("code"),'" ','codebase="',this.get("codebase"),'" ','width="1px" ','height="1px" ','MAYSCRIPT="true" ',">",'<param name="resource" value="',this.get("resourcePath"),'" />','<param name="listenerPath" value="',this.get("listenerPath"),'" />','<param name="name" value="',this.get("appletId"),'" />',"</applet>"].join("")}.property(),appletInstance:function(){return $("#"+this.get("appletId"))[0]}.property(),_sensorAppletTimer:null,append:function(a){if(this.get("isAppended")){return}if(a&&a.listenerPath){this.set("listenerPath",a.listenerPath)}$("body").append(this.get("html"));this.startSensorAppletInitialization();this.set("isAppended",true)},startSensorAppletInitialization:function(){var a=this;window.setTimeout(function(){a.initializeSensorInterface()},250)},initializeSensorInterface:function(){var a=this.get("listenerPath"),c=this.get("appletInstance"),f=false,b=this;try{f=c.initSensorInterface(a)}catch(g){}if(f){if(this._sensorAppletTimer){window.clearInterval(this._sensorAppletTimer);this._sensorAppletTimer=null}this.set("sensorState","ready")}else{if(!this._sensorAppletTimer){this._sensorAppletTimer=window.setInterval(function(){b.initializeSensorInterface()},250)}}},start:function(){var a=this.get("appletInstance");try{a.startCollecting();this.set("sensorState","running")}catch(b){}},stop:function(){var a=this.get("appletInstance");try{a.stopCollecting();this.set("sensorState","stopped")}catch(b){}},reset:function(){var a=this.get("appletInstance");try{a.stopCollecting();this.set("sensorState","ready")}catch(b){}},sensorsReady:function(){this.throwListenerPathError()},dataReceived:function(b,a,c){this.throwListenerPathError()},dataStreamEvent:function(){this.throwListenerPathError()},throwListenerPathError:function(){throw new Error("The sensor applet was appended without setting listenerPath to point to the object that will receive applet callbacks.")}});Smartgraphs.sessionController=SC.ObjectController.create({beginSession:function(){if(this.get("content")){throw"beginSession was called when a session is already open!"}Smartgraphs.set("store",Smartgraphs.store.chain());var a=Smartgraphs.store.createRecord(Smartgraphs.Session,{user:Smartgraphs.userController.get("id")});a.set("id",Smartgraphs.getNextGuid());this.set("content",a);if(Smartgraphs.activityController.get("content")){Smartgraphs.activityController.set("content",Smartgraphs.store.find(Smartgraphs.activityController.get("content")))}Smartgraphs.activityObjectsController.loadPredefinedObjects()},endSession:function(){if(!this.get("content")){throw"endSession was called when no session is open!"}var h=Smartgraphs.store.get("parentStore"),a=Smartgraphs.activityController.get("id"),e=Smartgraphs.activityPageController.get("id"),f=Smartgraphs.activityStepController.get("id"),c,j,k,b,g;if(!h){throw"Tried to end session, but there is no parent store to restore"}SC.RunLoop.begin().end();g=Smartgraphs.store.get("changelog")||[];g.forEach(function(l){var m=Smartgraphs.store.materializeRecord(l);if(m){m.storeDidChangeProperties=function(){};m._notifyPropertyObservers=function(){}}});Smartgraphs.store.discardChanges().destroy();Smartgraphs.set("store",h);Smartgraphs.activityOutlineController.set("selection",SC.SelectionSet.create());Smartgraphs.activityController.set("content",Smartgraphs.store.find(Smartgraphs.Activity,a));c=Smartgraphs.activityController.get("pages");j=c&&c.findProperty("id",e)||null;k=j&&j.get("steps")||null;b=k&&k.findProperty("id",f)||null;Smartgraphs.activityPagesController.set("content",c);Smartgraphs.activityPageController.set("content",j);Smartgraphs.activityStepController.set("content",b);this.set("content",null)}});Smartgraphs.toolbarController=SC.Object.create({shouldShowEditButton:NO,shouldShowRunButton:NO,shouldShowCreditsButton:YES,showRunButton:function(){this.set("shouldShowEditButton",NO);this.set("shouldShowRunButton",YES)},showEditButton:function(){this.set("shouldShowEditButton",YES);this.set("shouldShowRunButton",NO)}});Smartgraphs.userController=SC.ObjectController.create({});Smartgraphs.CouchDataSource=SC.DataSource.extend({_ids:{},_revs:{},fetch:function(a,b){this.log("CouchDataSource.fetch()");return NO},retrieveRecord:function(c,f){var h=c.recordTypeFor(f);var g=c.idFor(f);this.log("CouchDataSource.retrieveRecord()");this.log("  Record type requested = %s",h.toString());this.log("  id requested = %s",g);if(h===Smartgraphs.Activity){var b=g;var e='/db/smartgraphs/_design/app/_view/activities-by-url-and-version?key=["'+b+'",'+Smartgraphs.DATA_FORMAT_VERSION+"]";var a=Smartgraphs.activityDocs[g]?SC.Object.create({body:{rows:[{value:Smartgraphs.activityDocs[g]}]}}):SC.Error.create();this.didRetrieveActivity(a,c,f);return YES}this.log("returning NO from retrieveRecord");return NO},didRetrieveActivity:function(e,c,f){if(SC.ok(e)){var a=e.get("body");this.log("retrieved response.body = ",a);if(a&&a.rows&&a.rows.length===1&&a.rows[0].value){var g=a.rows[0].value;this.log("doc = ",g);this.log("doc.activity = ",g.activity);this._ids[f]=g._id;this._revs[f]=g._rev;var b=this;[["ActivityPage","pages"],["ActivityStep","steps"],["Unit","units"],["Axis","axes"],["Variable","variables"],["ResponseTemplate","responseTemplates"],["Tag","tags"]].forEach(function(h){b.loadRecordsFromArray(c,Smartgraphs[h[0]],g[h[1]])});g.datadefs.forEach(function(h){b.loadRecordsFromArray(c,Smartgraphs[h.type],h.records)});if(g.datarefs){g.datarefs.forEach(function(h){b.loadRecordsFromArray(c,Smartgraphs[h.type],h.records)})}g.annotations.forEach(function(h){b.loadRecordsFromArray(c,Smartgraphs[h.type],h.records)});c.dataSourceDidComplete(f,g.activity);return}}c.dataSourceDidError(f,e)},loadRecordsFromArray:function(a,c,b){b.forEach(function(e){a.loadRecord(c,e,e.url)})},createRecord:function(a,b){return NO},markRecordBusy:function(f,c){if(c.get("store")!==f){throw"WHOOPS. Trying to mark a record busy that's from the wrong store"}var g=c.get("storeKey");var b=f.readStatus(c.get("storeKey"));var e;var a=SC.Record;switch(b){case a.EMPTY:case a.ERROR:throw a.NOT_FOUND_ERROR;case a.READY_NEW:e=a.BUSY_CREATING;break;case a.READY_DIRTY:case a.READY_CLEAN:e=a.BUSY_COMMITTING;break;case a.DESTROYED_DIRTY:e=a.BUSY_DESTROYING;break}if(e){f.writeStatus(g,e);f.dataHashDidChange(g,null,YES)}},markRecordCommitted:function(e,c){var b=SC.Record;var f=c.get("storeKey");var a=e.readStatus(f);if(a===b.BUSY_DESTROYING){e.dataSourceDidDestroy(f)}else{if(a&b.BUSY){e.dataSourceDidComplete(f)}}},applyToChildRecords:function(e,b,g){var c=this;g.call(this,e,b);for(var j in b){if(SC.kindOf(b[j],SC.SingleAttribute)||SC.kindOf(b[j],SC.ManyAttribute)){var f=b[j].type;var a=b[j].inverse;if(f&&a&&SC.objectForPropertyPath(f).prototype[a].aggregate){var h=b.get(j);if(!h.get("isSCArray")){h=[h]}h.forEach(function(k){c.applyToChildRecords(e,k,g)})}}}if(SC.kindOf(b,Smartgraphs.Activity)){b.get("annotations").forEach(function(k){c.applyToChildRecords(e,k,g)})}},updateRecord:function(b,c){if(this._ids[c]){var a=b.find(b.recordTypeFor(c),b.idFor(c));if(a&&a.serialize){var e=a.serialize();e._rev=this._revs[c];e.data_format_version=Smartgraphs.DATA_FORMAT_VERSION;this.applyToChildRecords(b,a,this.markRecordBusy);SC.Request.putUrl("/db/smartgraphs/"+this._ids[c]).json().header("Accept","application/json").notify(this,"didUpdateActivity",b,c).send(e);return YES}}return NO},didUpdateActivity:function(e,c,f){var b=SC.Record;var a=c.find(c.recordTypeFor(f),c.idFor(f));if(SC.ok(e)){this.applyToChildRecords(c,a,this.markRecordCommitted);this._revs[f]=e.get("body").rev}else{c.dataSourceDidError(f)}},destroyRecord:function(a,b){return NO},camelizeKeys:function(c){var a={};for(var b in c){if(c.hasOwnProperty(b)){a[b.camelize()]=c[b]}}return a},log:function(){if(Smartgraphs.get("logDataSource")){Function.prototype.apply.call(console.log,console,arguments)}}});Smartgraphs.Unit=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activity:SC.Record.toOne("Smartgraphs.Activity",{inverse:"units",isMaster:YES,aggregate:YES}),name:SC.Record.attr(String),pluralName:SC.Record.attr(String),abbreviation:SC.Record.attr(String),pluralizeFor:function(a){return Math.abs(a)===1?this.get("name"):this.get("pluralName")}});sc_require("models/unit");Smartgraphs.Unit.FIXTURES=[{url:"/builtins/units/meters",activity:null,name:"meter",abbreviation:"m",pluralName:"meters"},{url:"/builtins/units/degrees-celsius",activity:null,name:"°C",abbreviation:"°C",pluralName:"°C"},{url:"/builtins/units/seconds",activity:null,name:"second",abbreviation:"s",pluralName:"seconds"},{url:"/builtins/units/minutes",activity:null,name:"minute",abbreviation:"min",pluralName:"minutes"},{url:"/builtins/units/meters-per-second",activity:null,name:"meter per second",abbreviation:"m/s",pluralName:"meters per second"}];Smartgraphs.Session=SC.Record.extend({user:SC.Record.toOne("Smartgraphs.User",{inverse:"session",isMaster:YES})});sc_require("models/session");Smartgraphs.User=SC.Record.extend({userId:SC.Record.attr(String),primaryKey:"userId",name:SC.Record.attr(String),sessions:SC.Record.toMany(Smartgraphs.Session,{inverse:"user"})});sc_require("models/user");Smartgraphs.User.FIXTURES=[{guid:"default",userId:"default",name:"Default Smartgraphs User",sessions:[]}];Smartgraphs.executor={commands:{},def:function(b,a){var c;if(!this.commands[b]){this.commands[b]={}}c=this.commands[b];c.impl=a;return c},defineCommands:function(b){var c,a=this;c=function(){return a.def.apply(a,arguments)};b(c)},execute:function(b,a){var e=this.commands[b],c;if(!e){throw"No such command: "+b}c=e.impl(a||{});if(c){throw"command '"+b+"' returned error message: "+c}}};sc_require("lib/executor");Smartgraphs.executor.defineCommands(function(a){a("setAnnotationAttribute",function(c){var b=Smartgraphs.activityObjectsController.findAnnotation(c.name);if(!b){return"could not find annotation '"+c.name+"'"}for(var e in c){if(!c.hasOwnProperty(e)||e==="name"){continue}b.set(e,c[e])}});a("disableSubmission",function(){Smartgraphs.statechart.sendAction("disableSubmission")})});Smartgraphs.DataRepresentation=SC.Object.extend({init:function(){var c=this.get("options")||{},a=[],e,b,f;this.set("pointStyle",c["point-type"]);this.set("lineStyle",c["line-type"]);if(c["line-type"]==="connected"){b=Smartgraphs.ConnectedLine.create({dataRepresentation:this});this.set("line",b);a.push(b);e=Smartgraphs.Pointset.create({dataRepresentation:this});this.set("pointset",e);if(c["point-type"]!=="none"){a.push(e)}}else{e=Smartgraphs.Pointset.create({dataRepresentation:this});this.set("pointset",e);if(c["point-type"]!=="none"){a.push(e)}}if(c.color){this.set("color",c.color)}this.set("graphableObjects",a);this._getSampleset=function(){return f};this._setSampleset=function(g){if(f!==undefined){throw"Attempt to redefine a DataRepresentations's sampleset"}f=g}},pointset:null,line:null,graphableObjects:null,datadef:SC.outlet("sampleset.datadef"),xUnits:SC.outlet("sampleset.datadef.xUnits"),yUnits:SC.outlet("sampleset.datadef.yUnits"),name:SC.outlet("sampleset.datadef.name"),points:SC.outlet("sampleset.points"),color:null,isDimmed:NO,pointStyle:null,lineStyle:null,sampleset:function(a,b){if(b!==undefined){this._setSampleset(b);if(this.didSetSampleset){this.didSetSampleset()}}return this._getSampleset()}.property(),didSetSampleset:function(){var a=this.get("sampleset");a.addObserver("points.[]",this,this._pointsDidChange);this._pointsDidChange()},_pointsDidChange:function(){var b=this.getPath("sampleset.points")||[],c=this.get("pointset"),a=this.get("line");if(c){c.set("points",b.map(function(e){return Smartgraphs.Point.create({x:e[0],y:e[1]})}))}if(a){a.set("points",b)}},showSinglePoint:function(b,g){if(this.get("graphableObjects")){if(!this.get("graphableObjects").contains(this.get("pointset"))){var c=[];c.push.apply(c,this.get("graphableObjects"));c.push(this.get("pointset"));this.set("graphableObjects",c)}}var f=this.getPath("pointset.points");var a=Smartgraphs.Point.create({x:b,y:g});if(f){f.replace(0,1,[a])}else{var e=this.get("pointset");e.set("points",[a])}},getNearestPoint:function(b){if(this.get("lineStyle")==="connected"&&this.get("pointStyle")==="none"){var j=this.getPath("line.points");if(j){var a=null;var g=this.getPath("datadef.lineSnapDistance");var f=g;for(var c=j.get("length")-1;c>=0;c--){var e={x:j[c][0],y:j[c][1]};var h=Math.sqrt(Math.pow(e.x-b.x,2)+Math.pow(e.y-b.y,2));if(h<g){if(h<f){f=h;a=e}}}return a}}return null}});Smartgraphs.evaluator={operators:{},def:function(b,a){if(!this.operators[b]){this.operators[b]={}}var c=this.operators[b];if(!c.argSpec){c.argSpec={}}if(!c.deps){c.deps=[]}c.impl=a;c.args=this._args;c.minArgs=this._minArgs;c.maxArgs=this._maxArgs;c.dependsOn=this._dependsOn;return c},defineOperators:function(b){var c,a=this;c=function(){return a.def.apply(a,arguments)};b(c)},_args:function(a){this.argSpec.n=a;return this},_minArgs:function(a){this.argSpec.min=a;return this},_maxArgs:function(a){this.argSpec.max=a;return this},_dependsOn:function(){this.deps=Array.prototype.slice.call(arguments,0);return this},evaluate:function(e){if((typeof e==="object")&&e!==null&&e.splice===[].splice){if(e.length<1){throw"Evaluator was asked to evaluate an empty expression"}if(e[0]==="'"||e[0]==="quote"){return e[1]}var f=this.operators[e[0]];var a=e.length-1;if(f.argSpec.n&&a!==f.argSpec.n){throw"Evaluator expected "+f.argSpec.n+" arguments, but got "+a+" arguments"}if(f.argSpec.min&&a<f.argSpec.min){throw"Evaluator expected at least "+f.argSpec.min+" arguments, but got "+a+" arguments"}if(f.argSpec.max&&a>f.argSpec.max){throw"Evaluator expected at most "+f.argSpec.max+" arguments, but got "+a+" arguments"}var b=[];for(var c=1;c<e.length;c++){b[c-1]=this.evaluate(e[c])}return f.impl.apply(null,b)}return e},evaluateLive:function(h,j){var e=[],b,g,c,a,f;g=this.collectDeps(h);f=function(){var k=Smartgraphs.evaluator.evaluate(h);j(k)};for(c=0;c<g.length;c++){a=g[c].indexOf(".[]");if(a>0){g[c]=g[c].substr(0,a);if(g[c].indexOf("*")<0){b=[SC.objectForPropertyPath(g[c]),"[]"]}else{b=SC.tupleForPropertyPath(g[c]);b[1]=b[1]+".[]"}}else{b=SC.tupleForPropertyPath(g[c])}b[0].addObserver(b[1],null,f);e.push(b)}return{die:function(){for(var k=0;k<e.length;k++){e[k][0].removeObserver(e[k][1],null,f)}},evaluate:function(){f();return this}}},collectDeps:function(c){var a;if((typeof c==="object")&&(c.splice===[].splice)){if(c[0]==="'"||c[0]==="quote"){return[]}var e=this.operators[c[0]];a=e.deps.concat();for(var b=1;b<c.length;b++){a=a.concat(this.collectDeps(c[b]))}return a}return[]}};Smartgraphs.GraphableObject=SC.Object.extend({dataRepresentation:null,colorBinding:"*dataRepresentation.color"});sc_require("lib/graphable_object");Smartgraphs.ConnectedLine=Smartgraphs.GraphableObject.extend({points:null,viewClass:function(){return Smartgraphs.ConnectedLineView}.property().cacheable()});sc_require("lib/graphable_object");Smartgraphs.Pointset=Smartgraphs.GraphableObject.extend({isSelectable:NO,points:null,datadef:SC.outlet("dataRepresentation.sampleset.datadef"),selectedXBinding:".datadef.selectedX",selectedYBinding:".datadef.selectedY",selection:function(j,f){var g,a,e,c,h,k,b;if(f!==undefined){g=f.toArray().get("firstObject");this.set("selectedX",g?g.get("x"):null);this.set("selectedY",g?g.get("y"):null);this._selection=f;return this}else{e=this.get("selectedX");c=this.get("selectedY");if(e===null&&c===null&&this._selection&&this._selection.get("length")===0){return this._selection}a=this._selection&&this._selection.toArray().get("firstObject");if(a&&this._selection.get("length")===1&&a.get("x")===e&&a.get("y")===c){return this._selection}this._selection=SC.SelectionSet.create();h=this.get("points")||[];k=h.find(function(l){return l.get("x")===e&&l.get("y")===c});if(k){this._selection.addObject(k)}return this._selection}}.property("selectedX","selectedY","points"),viewClass:function(){return Smartgraphs.PointsetView}.property().cacheable()});Smartgraphs.Mark=SC.Object.extend({dataRepresentation:null});sc_require("lib/mark");Smartgraphs.Point=Smartgraphs.Mark.extend({x:null,xRounded:function(){return Math.round(this.get("x")*100)/100}.property("x").cacheable(),xFixed:function(){return(this.xRounded().toFixed(2))}.property("x").cacheable(),y:null,yRounded:function(){return Math.round(this.get("y")*100)/100}.property("y").cacheable(),yFixed:function(){return(this.yRounded().toFixed(2))}.property("y").cacheable()});sc_require("lib/evaluator");Smartgraphs.evaluator.defineOperators(function(e){function c(f){return !isNaN(parseFloat(f))&&isFinite(f)}function b(){for(var f=0;f<arguments.length;f++){if(typeof arguments[f]!=="number"||isNaN(arguments[f])){throw"Non-numeric argument!"}}}function a(g,f,j){var h;if(j==null){j=7}h=1/Math.pow(10,j);return Math.abs(g-f)<h}e("+",function(){var f=0;for(var g=0;g<arguments.length;g++){f+=arguments[g]}return f}).minArgs(2);e("-",function(){var f=arguments[0];for(var g=1;g<arguments.length;g++){f-=arguments[g]}return f}).minArgs(2);e("absDiff",function(f,g){return Math.abs(f-g)}).args(2);e("=",function(f,g){if(c(f)&&c(g)&&!(typeof f==="string"&&typeof g==="string")){return parseFloat(f,10)===parseFloat(g,10)}else{return f===g}}).args(2);e("!=",function(f,g){if(c(f)&&c(g)&&!(typeof f==="string"&&typeof g==="string")){return parseFloat(f,10)!==parseFloat(g,10)}return f!==g}).args(2);e(">",function(f,g){b(f,g);return f>g}).args(2);e(">=",function(f,g){b(f,g);return f>=g}).args(2);e("<",function(f,g){b(f,g);return f<g}).args(2);e("<=",function(f,g){b(f,g);return f<=g}).args(2);e("indexInDataset",function(f){var o=Smartgraphs.activityObjectsController.findTag(f),k,n,l,j,g,h,m;if(!o){throw"Tag "+f+" not found."}k=Smartgraphs.activityObjectsController.findDatadef(o.get("datadefName"));if(!k){throw"Tag "+f+"'s datadef not found"}n=k.get("points");if(!n){throw"Tag "+f+"'s datadef does not have a 'points' array."}n=n.map(function(p){return p.copy()}).sort(function(q,p){return q[0]-p[0]});l=o.get("x");j=o.get("y");for(g=0,h=n.get("length");g<h;g++){m=n.objectAt(g);if(m[0]===l&&m[1]===j){return g+1}}return -1}).args(1);e("isNumeric",c).args(1);e("responseField",function(g){var f=Smartgraphs.responseTemplateController.get("values");return f[g-1]}).args(1).dependsOn("Smartgraphs.responseTemplateController*values.[]");e("coord",function(h,g){var f=Smartgraphs.activityObjectsController.findTag(g);if(h!=="x"&&h!=="y"){throw"x or y coordinates only!"}if(!f){throw"Tag "+g+" not found."}return f.get(h)}).args(2);e("slope",function(n,m){var j=Smartgraphs.activityObjectsController.findTag(n),g=Smartgraphs.activityObjectsController.findTag(m),h=j.get("x"),l=j.get("y"),f=g.get("x"),k=g.get("y");return(l-k)/(h-f)}).args(2);e("withinAbsTolerance",function(h,g,f){return Math.abs(h-g)<f}).args(3);e("slopeToolOrder",function(l,k){var j=Smartgraphs.activityObjectsController.findTag(l),g=Smartgraphs.activityObjectsController.findTag(k),h=j.get("x"),f=g.get("x");return h<f?[l,k]:[k,l]}).args(2);e("delta",function(j,f){var h=Smartgraphs.activityObjectsController.findTag(f[0]),g=Smartgraphs.activityObjectsController.findTag(f[1]);return g.get(j)-h.get(j)}).args(2);e("and",function(){for(var f=0;f<arguments.length;f++){if(!arguments[f]){return false}}return true}).minArgs(1);e("or",function(){for(var f=0;f<arguments.length;f++){if(arguments[f]){return true}}return false}).minArgs(1);e("not",function(f){return !f}).args(1);e("samePoint",function(j,h){var g=Smartgraphs.activityObjectsController.findTag(j),f=Smartgraphs.activityObjectsController.findTag(h);return g&&f&&g.get("x")===f.get("x")&&g.get("y")===f.get("y")}).args(2);e("coordinates=",function(h,g,j){var f=Smartgraphs.activityObjectsController.findTag(h);return f&&a(f.get("x"),g)&&a(f.get("y"),j)}).args(3);e("coordinatesInRange",function(k,j,g,m,l){var f=Smartgraphs.activityObjectsController.findTag(k);var h=true;if(!f){h=false}if(h&&!!j){h=f.get("x")>=j}if(h&&!!g){h=f.get("y")>=g}if(h&&!!m){h=f.get("x")<=m}if(h&&!!l){h=f.get("y")<=l}return h}).args(5);e("pointInSegment",function(m,h){var f=Smartgraphs.activityObjectsController.findTag(m),l=Smartgraphs.activityObjectsController.findAnnotation(h),n=f&&f.get("x"),j=l&&l.get("x1"),g=l&&l.get("x2"),k;if(typeof f==="undefined"||f===null){return false}if(typeof l==="undefined"||l===null){return false}if(g<j){k=j;j=g;g=k}return j<=n&&n<=g}).args(2);e("textLengthIsAtLeast",function(f,g){return $.trim(g||"").length>=f}).args(2);e("coord",function(h,g){var f=Smartgraphs.activityObjectsController.findTag(g);return f.get(h)}).args(2);e("max",function(){return Math.max.apply(Math,arguments)}).minArgs(1);e("min",function(){return Math.min.apply(Math,arguments)}).minArgs(1);e("abs",function(f){return Math.abs(f)}).args(1);e("pluralizeUnits",function(h,g){var f=Smartgraphs.store.find(Smartgraphs.Unit,h);if(!f){throw"Couldn't find units '%@'".fmt(h)}return f.pluralizeFor(g)}).args(2);e("get",function(f){return Smartgraphs.activityPageController.getFromContext(f)}).args(1);e("annotation",function(f){return Smartgraphs.activityObjectsController.findAnnotation(f)}).args(1);e("numberOfLabels",function(f){var g=Smartgraphs.activityObjectsController.findAnnotation(f);if(!SC.kindOf(g,Smartgraphs.LabelSet)){throw"operator 'numberOfLabels' was not passed the name of a LabelSet"}return g.getPath("labels.length")}).args(1).dependsOn("Smartgraphs.activityStepController*submissibilitySubject.labels.length");e("/",function(f,g){return f/g}).args(2);e("listItem",function(f,g){return g[f-1]}).args(2);e("toFixedString",function(g,f){return g.toFixed(f)}).args(2);e("sketchLength",function(h,l){var m=Smartgraphs.activityObjectsController.findAnnotation(h),k,g,j,f;if(!SC.kindOf(m,Smartgraphs.FreehandSketch)){throw"operator 'sketchLengthIsAtLeast' was not passed the name of a FreehandSketch"}k=m.get("points")||[];if(k.get("length")<2){return -Infinity}g=k.map(function(n){return n[0]});j=Math.min.apply(null,g);f=Math.max.apply(null,g);return f-j}).args(1).dependsOn("Smartgraphs.activityStepController*submissibilitySubject.points.[]");e("playCount",function(){return Smartgraphs.animationTool.get("playCount")}).args(0).dependsOn("Smartgraphs.animationTool.playCount");e("lineCount",function(){return Smartgraphs.graphingTool.get("lineCount")}).dependsOn("Smartgraphs.graphingTool.lineCount");e("lineSlope",function(l,h){var g=Smartgraphs.activityObjectsController.findAnnotation(l);var n=g.get("points");var k=n[h-1];var j=n[h];var f=(j[1]-k[1])/(j[0]-k[0]);return f}).args(2);e("yIntercept",function(n,j){var h=Smartgraphs.activityObjectsController.findAnnotation(n);var o=h.get("points");var l=o[j-1];var k=o[j];var g=(k[1]-l[1])/(k[0]-l[0]);var f=l[1]-(g*l[0]);return f}).args(2);e("deviationValue",function(f){var g=Smartgraphs.activityObjectsController.findDatadef(f);var h=g.get("deviationValue");return h}).args(1);e("pointMoved",function(j,g){var f=Smartgraphs.graphingTool;if(f.get("pointMoved")){var k=f.get("pointMovedNumber");var h=f.get("datadefName");if(k===(g-1)&&h===j){return true}}return false}).dependsOn("Smartgraphs.graphingTool.pointMoved")});Smartgraphs.Sampleset=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);var a;this._getDatadef=function(){return a};this._setDatadef=function(b){if(a!==undefined){throw"Attempt to redefine a Sampleset's datadef"}a=b}},datadef:function(a,b){if(b!==undefined){this._setDatadef(b);if(this.didSetDatadef){this.didSetDatadef()}}return this._getDatadef()}.property(),getNewRepresentation:function(a){var b=Smartgraphs.DataRepresentation.create({options:a});b.set("sampleset",this);return b}});sc_require("lib/sampleset");Smartgraphs.TrivialSampleset=Smartgraphs.Sampleset.extend({xMin:-Infinity,xMax:Infinity,didSetDatadef:function(){var a=this.get("datadef");a.addObserver("points.[]",this,this._pointsDidChange);this._pointsDidChange()},_pointsDidChange:function(){var a=this.getPath("datadef.points")||[],b=a.filter(function(c){return this.get("xMin")<=c[0]&&c[0]<=this.get("xMax")},this).map(function(c){return c.copy()});b.sort(function(e,c){return e[0]-c[0]});this.set("points",b)}});(function(b){function a(c){c=c.replace(/[^-a-zA-Z0-9,&\s]+/ig,"");c=c.replace(/-/gi,"_");c=c.replace(/\s/gi,"-");return c.toLowerCase()}Smartgraphs.slugify=a}());Smartgraphs.ArrowDrawing={arrowPath:function(c,b,f,e,a,g){return Smartgraphs.ArrowDrawing.arrowPathArray(c,b,f,e,a,g).join(" ")},arrowPathArray:function(b,a,l,k,m,g){var f=Math.atan2((k-a),(l-b)),j=f+g*Math.PI/180,h=f-g*Math.PI/180,p=l,n=k,e=l-m*Math.cos(j),c=k-m*Math.sin(j),s=l-m*Math.cos(h),o=k-m*Math.sin(h),q=[];b=Math.round(b*1000)/1000;a=Math.round(a*1000)/1000;p=Math.round(p*1000)/1000;n=Math.round(n*1000)/1000;c=Math.round(c*1000)/1000;s=Math.round(s*1000)/1000;o=Math.round(o*1000)/1000;q.push("M",b,a);q.push("L",p,n);q.push("L",e,c);q.push("L",s,o);q.push("L",p,n);return q}};Smartgraphs.DefocusingButtonBehavior={hasDefocusingButtonBehavior:YES,_action:function(){var a=this.getPath("pane.firstResponder");if(a){a.resignFirstResponder()}arguments.callee.base.apply(this,arguments)}};Smartgraphs.PointerEventsSupport={hasPointerEventsSupport:YES,pointerEvents:"auto",_pes_mouseEventsList:"mousedown.pointerEvents mousemove.pointerEvents mouseup.pointerEvents",_pes_pointerEventsDidChange:function(){this.$().css("pointerEvents",this.get("pointerEvents"))}.observes("pointerEvents"),didCreateLayerMixin:function(){this.$().css("pointerEvents",this.get("pointerEvents"));this.$().bind(Smartgraphs.PointerEventsSupport._pes_mouseEventsList,$.proxy(this._pes_handleEvent,this))},willDestroyLayerMixin:function(){this.$().unbind(Smartgraphs.PointerEventsSupport._pes_mouseEventsList)},_pes_handleEvent:function(a){if(this.get("pointerEvents")!=="none"){return}a.stopPropagation();this.$().hide();var b=document.elementFromPoint(a.clientX,a.clientY);this.$().show();a.target=b;SC.Event.handle.call(document,a)}};Smartgraphs.RearrangeableParentView={isRearrangeableParentView:YES,moveViewToFront:function(a){if(a.$().parent().is(this.$())){this.$().append(a.$())}}};Smartgraphs.Activity=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",title:SC.Record.attr(String),owner:SC.Record.attr(String),pages:SC.Record.toMany("Smartgraphs.ActivityPage",{inverse:"activity",orderBy:"index"}),axes:SC.Record.toMany("Smartgraphs.Axis",{inverse:"activity"}),units:SC.Record.toMany("Smartgraphs.Unit",{inverse:"activity"}),datadefs:function(){this._datadefsQuery=this._datadefsQuery||SC.Query.local(Smartgraphs.Datadef,"activity={activity}",{activity:this});return this.get("store").find(this._datadefsQuery)}.property(),datarefs:function(){this._datarefsQuery=this._datarefsQuery||SC.Query.local(Smartgraphs.Dataref,"activity={activity}",{activity:this});return this.get("store").find(this._datarefsQuery)}.property(),annotations:function(){this._annotationsQuery=this._annotationsQuery||SC.Query.local(Smartgraphs.Annotation,"activity={activity}",{activity:this});return this.get("store").find(this._annotationsQuery)}.property(),variables:SC.Record.toMany("Smartgraphs.Variable",{inverse:"activity"}),responseTemplates:SC.Record.toMany("Smartgraphs.ResponseTemplate",{inverse:"activity"}),serialize:function(){var b={};var j=this.get("store");b.activity=j.readDataHash(this.get("storeKey"));var a=this.get("pages");b.pages=a.map(function(m){return m.serialize()});var h=a.map(function(m){return m.get("steps").map(function(n){return n.serialize()})});b.steps=Array.prototype.concat.apply([],h);var c=this.get("units");b.units=c.map(function(m){return m.serialize()});var g=this.get("axes");b.axes=g.map(function(m){return m.serialize()});var f=this.get("responseTemplates");b.responseTemplates=f.map(function(m){return m.serialize()});var k=this.get("variables");b.variables=k.map(function(m){return m.serialize()});var l=this;var e=function(n){var m=[];n.typeNames().forEach(function(o){var p=Smartgraphs[o],s=SC.Query.local(p,"activity={activity}",{activity:l}),q=j.find(s).filter(function(t){return t.constructor===p});if(q.get("length")>0){m.push({type:o,records:q.map(function(t){return t.serialize()})})}});return m};b.datadefs=e(Smartgraphs.Datadef);b.datarefs=e(Smartgraphs.Dataref);b.annotations=e(Smartgraphs.Annotation);return b}});Smartgraphs.ActivityPage=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activity:SC.Record.toOne("Smartgraphs.Activity",{inverse:"pages",isMaster:YES,aggregate:YES}),_statusDidChange:function(){if(this.get("status")&SC.Record.DIRTY){this.invokeLast(this.propagateToAggregates)}}.observes("status"),name:SC.Record.attr(String),index:SC.Record.attr(Number),introText:SC.Record.attr(String),steps:SC.Record.toMany("Smartgraphs.ActivityStep",{inverse:"activityPage"}),firstStep:SC.Record.toOne("Smartgraphs.ActivityStep"),contextVars:SC.Record.attr(Array),isSelectable:NO,pageNumber:null,pageNumberAsString:function(){return(this.get("pageNumber")+1)+""}.property("pageNumber"),context:null,init:function(){arguments.callee.base.apply(this,arguments);this.set("context",{})}});Smartgraphs.ActivityStep=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activityPage:SC.Record.toOne("Smartgraphs.ActivityPage",{inverse:"steps",isMaster:YES,aggregate:YES}),paneConfig:SC.Record.toOne(String),panes:SC.Record.attr(Object),beforeText:SC.Record.attr(String),responseTemplate:SC.Record.toOne("Smartgraphs.ResponseTemplate"),afterText:SC.Record.attr(String),substitutedExpressions:SC.Record.attr(Array),tools:SC.Record.attr(Array,{defaultValue:[]}),startCommands:SC.Record.attr(Array),shouldFinishImmediately:SC.Record.attr(Boolean),submissibilityDependsOn:SC.Record.attr(Array),submissibilityCriterion:SC.Record.attr(Array),afterSubmissionCommands:SC.Record.attr(Array),variableAssignments:SC.Record.attr(Array),responseBranches:SC.Record.attr(Array),defaultBranch:SC.Record.toOne("Smartgraphs.ActivityStep"),isFinalStep:SC.Record.attr(Boolean),hideSubmitButton:SC.Record.attr(Boolean),submitButtonTitle:SC.Record.attr(String),nextButtonShouldSubmit:SC.Record.attr(Boolean)});Smartgraphs.Annotation=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",isAnnotation:YES,name:SC.Record.attr(String),activity:SC.Record.toOne("Smartgraphs.Activity",{aggregate:YES}),color:SC.Record.attr(String,{defaultValue:"#cc0000"}),isHighlighted:SC.Record.attr(Boolean,{defaultValue:false}),viewClass:function(){return this.constructor.viewClass}.property()});(function(){var b=null;var c=null;function a(){b=[];c=[];for(var e in Smartgraphs){if(Smartgraphs.hasOwnProperty(e)&&Smartgraphs[e]&&Smartgraphs[e].isClass&&e!=="Annotation"&&SC.kindOf(Smartgraphs[e],Smartgraphs.Annotation)){b.push(Smartgraphs[e]);c.push(e)}}}Smartgraphs.Annotation.types=function(){if(!b){a()}return b};Smartgraphs.Annotation.typeNames=function(){if(!c){a()}return c}}());Smartgraphs.Tag=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activity:SC.Record.toOne("Smartgraphs.Activity"),name:SC.Record.attr(String),datadefName:SC.Record.attr(String),x:SC.Record.attr(Number),y:SC.Record.attr(Number)});(function(){var a=0;Smartgraphs.Tag.valueFrom=function(f,b,c){var e="_sgtag_"+(a++),g=f+"."+b;return function(){var h;if(arguments.length>3){this.notifyPropertyChange(e);return}h=this.get(c);if(SC.none(h)){return this.getPath(g)}return h}.property(e).cacheable().observes(c,"*"+g)}}());sc_require("mixins/arrow_drawing");Smartgraphs.ArrowView=RaphaelViews.RaphaelView.extend(Smartgraphs.ArrowDrawing,{canShowInTable:NO,itemColorBinding:".item.color",isHighlightedBinding:".item.isHighlighted",strokeWidth:2,strokeOpacity:0.9,stroke:function(){return this.get("isHighlighted")?"#ff0000":this.get("itemColor")}.property("isHighlighted","itemColor"),displayProperties:"item.x1 item.y1 item.x2 item.y2 label stroke isHighlighted strokeWidth strokeOpacity".w(),renderCallback:function(h,a,e,g,c){var f=g&&g.x||0;var b=g&&g.y||0;return h.set().push(h.path(a.d).attr(a),h.text(f,b,e||"").attr({fill:a.stroke,"font-size":15,"stroke-width":1}).rotate(c||0,true))},render:function(c,j){var h=this.get("graphView"),e=this.get("item"),k=e&&e.get("label")||"",s=e&&e.get("x1")||0,f=e&&e.get("y1")||0,p=e&&e.get("x2")||0,b=e&&e.get("y2")||0,q=h.coordinatesForPoint(s,f),o=h.coordinatesForPoint(p,b),m=(s===p)&&(f===b),u={d:m?"":this.arrowPath(q.x,q.y,o.x,o.y,10,15),stroke:this.get("stroke"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("strokeOpacity")},g,n,a,l,t;if(s===p){g=h.coordinatesForPoint(s,(f+b)/2);g.x-=12;n=-90}else{g=h.coordinatesForPoint((s+p)/2,f);g.y-=12;n=0}if(j){c.callback(this,this.renderCallback,u,k,g,n)}else{a=c.raphael();l=a.items[0];t=a.items[1];l.attr(u);t.attr({fill:this.get("stroke")})}}});sc_require("models/tag");sc_require("models/annotation");sc_require("views/arrow");Smartgraphs.Arrow=Smartgraphs.Annotation.extend({x1:null,y1:null,x2:null,y2:null,x1Record:SC.Record.attr(Number),y1Record:SC.Record.attr(Number),x2Record:SC.Record.attr(Number),y2Record:SC.Record.attr(Number),p1Tag:SC.Record.toOne("Smartgraphs.Tag"),p2Tag:SC.Record.toOne("Smartgraphs.Tag"),p1x:Smartgraphs.Tag.valueFrom("p1Tag","x","x1Record"),p1y:Smartgraphs.Tag.valueFrom("p1Tag","y","y1Record"),p2x:Smartgraphs.Tag.valueFrom("p2Tag","x","x2Record"),p2y:Smartgraphs.Tag.valueFrom("p2Tag","y","y2Record"),label:SC.Record.attr(String),init:function(){arguments.callee.base.apply(this,arguments);this._startAndEndDidChange()},_startAndEndDidChange:function(){var b=this.get("p1x"),a=this.get("p1y"),e=this.get("p2x"),c=this.get("p2y"),f;if(SC.none(b)||SC.none(a)||SC.none(e)||SC.none(c)){return}f=this.calculateCoordinatesFromPoints(b,a,e,c);this.setIfChanged("x1",f.x1);this.setIfChanged("y1",f.y1);this.setIfChanged("x2",f.x2);this.setIfChanged("y2",f.y2)}.observes("p1x","p1y","p2x","p2y"),calculateCoordinatesFromPoints:function(b,a,e,c){return{x1:b,y1:a,x2:e,y2:c}}});Smartgraphs.Arrow.viewClass=Smartgraphs.ArrowView;Smartgraphs.Arrow.NO_ARROW_HEADS=0;Smartgraphs.Arrow.ARROW_HEAD_AT_START=1;Smartgraphs.Arrow.ARROW_HEAD_AT_END=2;Smartgraphs.Arrow.ARROW_HEAD_AT_START_AND_END=3;sc_require("mixins/arrow_drawing");Smartgraphs.BracketArcView=RaphaelViews.RaphaelView.extend({canShowInTable:YES,itemColorBinding:".item.color",isHighlightedBinding:".item.isHighlighted",strokeWidth:2,strokeOpacity:0.9,stroke:function(){return this.get("isHighlighted")?"#ff0000":this.get("itemColor")}.property("isHighlighted","itemColor"),displayProperties:"bracket.item1Index bracket.item2Index label stroke isHighlighted strokeWidth strokeOpacity".w(),renderCallback:function(g,e,c,f,b,a){return g.set().push(g.path(e.d).attr(e),g.text(f||0,b||0,c||"").attr({fill:e.stroke,"font-size":15}).rotate(a||0,true))},render:function(e,f){var x=this.get("item"),p=x.get("item1Index"),o=x.get("item2Index"),t=x.get("isLeftOfColumn"),n=this.get("tableView"),u=n.coordinatesForIndex(p),s=n.coordinatesForIndex(o),w=t?u.left-10:u.right+10,v=(u.top+u.bottom)/2,c=w,b=(s.top+s.bottom)/2,g=x.get("label")||"",q=t?-90:90,j=t?w-10:w+10,h=(v+b)/2,l=this.figurePath(w,v,c,b,t),m={d:l,stroke:this.get("stroke"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("strokeOpacity")},a,k,y;if(f){e.callback(this,this.renderCallback,m,g,j,h,q)}else{a=e.raphael();k=a.items[0];y=a.items[1];k.attr(m);y.attr({fill:this.get("stroke")})}},figurePath:function(y,x,e,a,w){var z=25,h=6,s,q,m,o,l,k,j,f,b,p,n,v,u,g,c,t;if(w){m=Math.atan2((a-x),(e-y))-(Math.PI/2);s={x:y-40,y:x};q={x:e-40,y:a};if(x<a){o=m+(0.5*z)*Math.PI/180;l=m-(1.5*z)*Math.PI/180;k=m+(1.5*z)*Math.PI/180;j=m-(0.5*z)*Math.PI/180}else{o=m+(1.5*z)*Math.PI/180;l=m-(0.5*z)*Math.PI/180;k=m+(0.5*z)*Math.PI/180;j=m-(1.5*z)*Math.PI/180}}else{m=Math.atan2((a-x),(e-y))+(Math.PI/2);s={x:y+40,y:x};q={x:e+40,y:a};if(x<a){o=m+(1.5*z)*Math.PI/180;l=m-(0.5*z)*Math.PI/180;k=m+(0.5*z)*Math.PI/180;j=m-(1.5*z)*Math.PI/180}else{o=m+(0.5*z)*Math.PI/180;l=m-(1.5*z)*Math.PI/180;k=m+(1.5*z)*Math.PI/180;j=m-(0.5*z)*Math.PI/180}}if(x<a){f=y-h*Math.cos(o);b=x-h*Math.sin(o);p=y-h*Math.cos(l);n=x-h*Math.sin(l);v=e-h*Math.cos(k);u=a-h*Math.sin(k);g=e-h*Math.cos(j);c=a-h*Math.sin(j)}else{f=y+h*Math.cos(o);b=x+h*Math.sin(o);p=y+h*Math.cos(l);n=x+h*Math.sin(l);v=e+h*Math.cos(k);u=a+h*Math.sin(k);g=e+h*Math.cos(j);c=a+h*Math.sin(j)}t="M "+y+" "+x+"C "+s.x+" "+s.y+" "+q.x+" "+q.y+" "+e+" "+a+"L "+v+" "+u+"L "+g+" "+c+"L "+e+" "+a;return t}});sc_require("models/tag");sc_require("models/annotation");sc_require("views/bracket_arc");Smartgraphs.BracketArc=Smartgraphs.Annotation.extend({datadefName:SC.Record.attr(String),datadef:function(){return Smartgraphs.activityObjectsController.findDatadef(this.get("datadefName"))}.property("datadefName").cacheable(),item1Index:SC.Record.attr(Number),item2Index:SC.Record.attr(Number),isLeftOfColumn:SC.Record.attr(Boolean),x1Record:SC.Record.attr(Number),y1Record:SC.Record.attr(Number),x2Record:SC.Record.attr(Number),y2Record:SC.Record.attr(Number),p1Tag:SC.Record.toOne("Smartgraphs.Tag"),p2Tag:SC.Record.toOne("Smartgraphs.Tag"),p1x:Smartgraphs.Tag.valueFrom("p1Tag","x","x1Record"),p1y:Smartgraphs.Tag.valueFrom("p1Tag","y","y1Record"),p2x:Smartgraphs.Tag.valueFrom("p2Tag","x","x2Record"),p2y:Smartgraphs.Tag.valueFrom("p2Tag","y","y2Record"),init:function(){arguments.callee.base.apply(this,arguments);this._pointIndicesDidChange()},_pointIndicesDidChange:function(){var b=this.get("p1x"),a=this.get("p1y"),e=this.get("p2x"),c=this.get("p2y"),f;if(SC.none(this.get("datadef"))){return}if(SC.none(b)||SC.none(a)||SC.none(e)||SC.none(c)){return}f=this.calculateIndicesFromPoints(b,a,e,c);this.setIfChanged("item1Index",f.item1Index);this.setIfChanged("item2Index",f.item2Index)}.observes("*datadef.points.[]","p1x","p1y","p2x","p2y"),calculateIndicesFromPoints:function(b,a,h,g){var k=this.getPath("datadef.points")||[],c,e,j,f=-1,l=-1;k=k.map(function(m){return m.copy()}).sort(function(n,m){return n[0]-m[0]});for(c=0,e=k.get("length");c<e;c++){j=k.objectAt(c);if(j[0]===b&&j[1]===a){f=c}if(j[0]===h&&j[1]===g){l=c}}return{item1Index:f,item2Index:l}}});Smartgraphs.BracketArc.viewClass=Smartgraphs.BracketArcView;Smartgraphs.CircledPointView=RaphaelViews.RaphaelView.extend({radius:6,strokeBinding:".item.color",strokeWidth:2,strokeOpacity:1,displayProperties:"item.x item.y radius stroke strokeWidth strokeOpacity".w(),renderCallback:function(b,a){return b.circle().attr(a)},render:function(c,a){var e=this.get("graphView"),f=this.get("item"),j=f.get("x")||0,g=f.get("y")||0,h=e.coordinatesForPoint(j,g),k={cx:h.x,cy:h.y,r:this.get("radius"),fill:"none",stroke:this.get("stroke"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("strokeOpacity")},b;if(a){c.callback(this,this.renderCallback,k)}else{b=c.raphael();b.attr(k)}}});sc_require("models/annotation");sc_require("views/circled_point");Smartgraphs.CircledPoint=Smartgraphs.Annotation.extend({x:Smartgraphs.Tag.valueFrom("tag","x","xRecord"),y:Smartgraphs.Tag.valueFrom("tag","y","yRecord"),tag:SC.Record.toOne("Smartgraphs.Tag"),xRecord:SC.Record.attr(Number),yRecord:SC.Record.attr(Number),color:SC.Record.attr(String)});Smartgraphs.CircledPoint.viewClass=Smartgraphs.CircledPointView;Smartgraphs.FreehandSketchView=RaphaelViews.RaphaelView.extend({colorBinding:".item.color",strokeWidth:3,strokeOpacity:0.4,displayProperties:"item.points.[] color".w(),renderCallback:function(b,a){return b.path(a.path).attr(a)},render:function(b,a){var c=this.get("graphView"),n=this.get("item"),o=n&&n.get("points")||[],j=[],l,k,g,h,e,m,f;for(g=0,h=o.get("length");g<h;g++){l=o.objectAt(g);k=c.coordinatesForPoint(l[0],l[1]);j.push(g===0?"M":"L");j.push(Math.round(k.x));j.push(" ");j.push(Math.round(k.y))}e=j.join("")||"M0 0";m={path:e,stroke:this.get("color"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("strokeOpacity"),"stroke-linecap":"round","stroke-linejoin":"round"};if(a){b.callback(this,this.renderCallback,m)}else{f=b.raphael();f.attr(m)}}});sc_require("models/annotation");sc_require("views/freehand_sketch");Smartgraphs.FreehandSketch=Smartgraphs.Annotation.extend({points:SC.Record.attr(Array),color:SC.Record.attr(String),clear:function(){this.set("points",[])},addPoint:function(a,b){this.get("points").pushObject([a,b])},updateLatestPoint:function(a,e){var b=this.get("points"),c=b.get("length")-1;if(c>=0){b.beginPropertyChanges();b.popObject();b.pushObject([a,e]);b.endPropertyChanges()}}});Smartgraphs.FreehandSketch.viewClass=Smartgraphs.FreehandSketchView;sc_require("models/annotation");sc_require("views/circled_point");Smartgraphs.HighlightedPoint=Smartgraphs.Annotation.extend({isModifierAnnotation:YES,datadefName:SC.Record.attr(String),x:Smartgraphs.Tag.valueFrom("tag","x","xRecord"),y:Smartgraphs.Tag.valueFrom("tag","y","yRecord"),tag:SC.Record.toOne("Smartgraphs.Tag"),xRecord:SC.Record.attr(Number),yRecord:SC.Record.attr(Number),color:SC.Record.attr(String)});sc_require("mixins/arrow_drawing");Smartgraphs.IndicatingArrowView=RaphaelViews.RaphaelView.extend(Smartgraphs.ArrowDrawing,{canShowInTable:YES,strokeBinding:".item.color",isHighlightedBinding:".item.isHighlighted",strokeWidth:function(){return this.get("isHighlighted")?3:2}.property("isHighlighted"),strokeOpacity:function(){return this.get("isHighlighted")?0.9:0.5}.property("isHighlighted"),displayProperties:"point1 point2 label stroke isHighlighted strokeWidth strokeOpacity".w(),renderCallback:function(c,a){var b=c.path(a.d).attr(a);return b},render:function(c,a){var e=this.get("graphView");var f=this.getStartAndEnd(this.get("item"));var h=e?e.coordinatesForPoint(f.start.x,f.start.y):{x:f.start.x,y:f.start.y};var b=e?e.coordinatesForPoint(f.end.x,f.end.y):{x:f.end.x,y:f.end.y};var g=this.arrowPath(h.x,h.y,b.x,b.y,10,15);var j={d:g,stroke:this.get("stroke"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("strokeOpacity")};if(a){c.callback(this,this.renderCallback,j)}else{var k=c.raphael();k.attr(j)}},getStartAndEnd:function(g){var a=g.get("x"),k=g.get("y"),j=g.get("length"),f=g.get("pointAngle");var c,l,b,h;if(f===0){c=a;l=k+j}else{if(f==180){c=a;l=k-j}else{if(f==90){l=k;c=a+j}else{if(f==270){l=k;c=a-j}else{var e=f*Math.PI/180;c=a-j*Math.cos(e);l=k-j*Math.sin(e)}}}}b={x:c,y:l};h={x:a,y:k};return{start:b,end:h}}});sc_require("models/annotation");sc_require("views/indicating_arrow");Smartgraphs.IndicatingArrow=Smartgraphs.Annotation.extend({specificX:SC.Record.attr(Number),specificY:SC.Record.attr(Number),annotation:SC.Record.toOne("Smartgraphs.HighlightedPoint"),dataPoint:SC.Record.toOne("Smartgraphs.DataPoint"),pointAngle:SC.Record.attr(Number,{default_value:335}),length:SC.Record.attr(Number,{default_value:25}),x:function(){if(this.get("specificX")){return this.get("specificX")}else{if(this.get("dataPoint")){return this.get("dataPoint").get("x")}else{if(this.get("annotation")){if(this.get("annotation").get("point")){return this.get("annotation").get("point").get("x")}else{if(this.get("annotation").get("point1")){return this.get("annotation").get("point1").get("x")}else{return null}}}else{return null}}}}.property("annotation","dataPoint","specificX").cacheable(),y:function(){if(this.get("specificY")){return this.get("specificY")}else{if(this.get("dataPoint")){return this.get("dataPoint").get("y")}else{if(this.get("annotation")){if(this.get("annotation").get("point")){return this.get("annotation").get("point").get("y")}else{if(this.get("annotation").get("point1")){return this.get("annotation").get("point1").get("y")}else{return null}}}else{return null}}}}.property("annotation","dataPoint","specificY").cacheable()});Smartgraphs.IndicatingArrow.viewClass=Smartgraphs.IndicatingArrowView;Smartgraphs.EditableLabelView=RaphaelViews.RaphaelView.extend({isEditing:NO,textFieldView:null,fontSize:12,prevLayer:null,createFreshLayer:NO,displayProperties:"displayText textColor x y raphTextY isEditing width height".w(),labelBodyView:SC.outlet("parentView"),labelView:SC.outlet("labelBodyView.parentLabelView"),graphView:SC.outlet("labelView.graphView"),graphCanvasView:SC.outlet("graphView.graphCanvasView"),textBinding:".labelBodyView.text",textColorBinding:".labelBodyView.textColor",itemBinding:".labelBodyView.item",parentXBinding:".labelBodyView.bodyXCoord",parentYBinding:".labelBodyView.bodyYCoord",leftMarginBinding:".labelBodyView.leftMargin",topMarginBinding:".labelBodyView.topMargin",maxTextFieldWidthBinding:".labelView.maxTextFieldWidth",maxCharactersBinding:".labelView.maxCharacters",calculatedTextHeightBinding:".labelView.calculatedTextHeight",calculatedTextWidthBinding:".labelView.calculatedTextWidth",minHeight:function(){return this.get("isEditing")?this.get("fontSize")*1.2*3:18}.property("isEditing").cacheable(),minWidth:function(){return this.get("isEditing")?this.get("maxTextFieldWidth"):80}.property("isEditing").cacheable(),x:function(){var a=this.get("parentX")||0;return a+this.get("leftMargin")||0}.property("parentX","leftMargin").cacheable(),y:function(){var a=this.get("parentY")||0;return a+this.get("topMargin")||0}.property("parentY","topMargin").cacheable(),raphTextY:function(){var a=this.get("height")||0;return this.get("y")+(a/2)}.property("y","height").cacheable(),displayText:function(){if(this.get("isEditing")){return" "}var m=this.get("text");var h=[];var n=0;var c=this.get("raphaelObject");if(m&&c){var b=0,f=0;while(f<m.length){if(m.charAt(f)==="\n"){m=m.replace("\n"," ")}c.attr("text",m.substring(0,f+1));var a=c.getBBox();var g=a.width;var k=a.height;if(g>(this.get("maxTextFieldWidth"))){n=f;var l=this.getTextPartsOnLineBreak(m,n);h[b]=l.beforeText;m=l.afterText;b++;f=0}else{h[b]=m}f++}m="";for(var e=0;e<h.length;e++){if(e===h.length-1){m+=h[e]}else{m+=h[e]+"\n"}}}return m}.property("text","isEditing").cacheable(),getTextPartsOnLineBreak:function(e,b){var a=b;for(var f=b,c=0;e.charAt(f)!=" ";f--,c++){b=f;if(c===a){b=a-1;break}}return{beforeText:e.substring(0,b),afterText:e.substring(b,e.length)}},didCreateLayer:function(){var b=this.get("prevLayer");if(b){var a=this.get("layer");if(a===b){this.set("createFreshLayer",YES)}}else{this.set("prevLayer",this.get("layer"))}},destroyLayer:function(){arguments.callee.base.apply(this,arguments);this.set("prevLayer",null)},updateLayer:function(){if(this.get("createFreshLayer")){this.set("createFreshLayer",NO);var a=RaphaelViews.RaphaelContext();a.isTopLevel=NO;this.prepareRaphaelContext(a,YES);this.set("layer",a.populateCanvas(this.get("raphaelCanvas")));this._notifyDidCreateLayer()}else{arguments.callee.base.apply(this,arguments)}},init:function(){var b=this;arguments.callee.base.apply(this,arguments);var a=b.getPath("labelView.item.maxCharacters");this.textFieldView=SC.TextFieldView.create({isTextArea:YES,maxLength:a,applyImmediately:YES,init:function(){arguments.callee.base.apply(this,arguments);this.set("maxLength",a)},touchStart:function(c){arguments.callee.base.apply(this,arguments);this.mouseDown(c)},touchEnd:function(c){arguments.callee.base.apply(this,arguments);this.mouseUp(c)},keyDown:function(c){arguments.callee.base.apply(this,arguments);if(c.keyCode===13){if(b.get("isEditing")){b.commitEditing()}}},getTextLayout:function(g){var e=0,c=0;var j=document.createElement("div");document.body.appendChild(j);$(j).css({position:"absolute",display:"none",height:"auto",width:"auto"});$(j).html(this.get("value"));var f=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];$(f).each(function(){var h=this.toString();$(j).css(h,$(g).css(h))});e=$(j).outerHeight();c=$(j).outerWidth();$(j).remove();return{width:c,height:e}},updateText:function(c){if(!b.get("isEditing")){return}b.set("text","");var l=this.get("value");var f=b.get("maxTextFieldWidth");var k=c.$input()[0];$(k).css("overflow","hidden");var j=c.getTextLayout(k);var h=0;var g;if(j.width>(f)){h=f}else{h=j.width}var e=Math.ceil(k.scrollHeight/(b.get("fontSize")*1.2));g=e*j.height;b.beginPropertyChanges();b.set("calculatedTextHeight",g);b.set("calculatedTextWidth",h);b.endPropertyChanges()},fieldValueDidChange:function(){arguments.callee.base.apply(this,arguments);this.updateText(this)},willLoseFirstResponder:function(){b.textFieldViewLostFocus()}})},destroy:function(){this.set("isEditing",NO);arguments.callee.base.apply(this,arguments)},renderCallback:function(e,b,c){if(!$.contains(document.documentElement,e.canvas)){this._raphaelTextLastUpdatedWhileFragment=YES;b.text=" ";this.invokeLater(this.forceLayerUpdate)}var a=e.text().attr(b);c(true);return a},forceLayerUpdate:function(){this.set("layerNeedsUpdate",this.get("layerNeedsUpdate")||this._raphaelTextLastUpdatedWhileFragment)},render:function(c,a){var n=this.get("x"),l=this.get("y"),m=this.get("raphTextY"),b=this.get("width"),q=this.get("height"),p=this.get("displayText"),s=this,o={x:n,y:m,fill:this.get("textColor"),text:p?p:" ","font-size":this.get("fontSize"),"text-anchor":"start"},j=this.get("isEditing"),h=this.get("graphCanvasView"),k=this.get("textFieldView"),e=this.get("pane"),g=function(u){var t;if(!e){return}if(j){t=h.$().offset();if(!u||t.left!==0){k.set("layout",{top:t.top+l,left:t.left+n,width:b,height:q,zIndex:3})}SC.run();e.appendChild(k);k.set("focused",true);k.becomeFirstResponder()}else{if(e.get("childViews").contains(k)){e.removeChild(k)}}},f;if(a){c.callback(this,this.renderCallback,o,g)}else{f=this.get("raphaelObject");if($.contains(document.documentElement,f.node)){this._raphaelTextLastUpdatedWhileFragment=NO}f.attr(o);g(false)}},didRemoveFromGraphView:function(){var a=this.get("pane");if(a.get("childViews").contains(this.textFieldView)){a.removeChild(this.textFieldView);$("body").unbind("mousedown",this.mousedownHandler).unbind("touchstart",this.mousedownHandler);this.textFieldView.resignFirstResponder()}this.destroy()},adjustMetrics:function(){var f=this.get("raphaelObject"),c=this.get("minWidth"),g=this.get("minHeight"),e,b,a;if(f){var h=this.get("displayText");f.attr("text",h?h:" ");e=f.getBBox();if(this.get("isEditing")){b=this.get("calculatedTextWidth")<c?c:this.get("calculatedTextWidth");a=this.get("calculatedTextHeight")<g?g:this.get("calculatedTextHeight")}else{b=e.width<c?c:e.width;a=e.height<g?g:e.height}this.beginPropertyChanges();this.set("width",b);this.set("height",a);this.endPropertyChanges()}}.observes("displayText","minWidth","minHeight","calculatedTextWidth","calculatedTextHeight"),beginEditing:function(){var a=this;this.mousedownHandler=this.mousedownHandler||function(b){a._mousedownHandler(b)};if(this.get("isEditable")){this.set("isEditing",YES);this.setPath("textFieldView.value",a.get("text"));$("body").bind("mousedown",this.mousedownHandler).bind("touchstart",this.mousedownHandler);return YES}return NO},_mousedownHandler:function(b){var g=this.getPath("labelView.layer");if(b.target!==this.textFieldView.$().find("textarea")[0]&&b.target!==g&&!$.contains(g,b.target)){this.commitEditing();var e=this.getPath("graphView.topAnnotationsHolder");var c=e.get("childViews");var h=true;for(var f=0;f<c.length;f++){var j=c[f];if(j.kindOf(Smartgraphs.LabelSetView)||j.kindOf(Smartgraphs.LabelView)){var a=j.get("layer");if(a===b.target||a.contains(b.target)){h=false}}}if(h){if(b.originalEvent.stopPropagation){b.originalEvent.stopPropagation()}else{b.stopPropagation()}}}},textFieldViewLostFocus:function(){if(this.get("isEditing")){this.commitEditing()}},commitEditing:function(){$("body").unbind("mousedown",this.mousedownHandler).unbind("touchstart",this.mousedownHandler);this.set("isEditing",NO);this.set("text",this.textFieldView.get("value"));this.textFieldView.resignFirstResponder()}});sc_require("views/editable_label");Smartgraphs.LabelView=RaphaelViews.RaphaelView.extend({item:function(){return this.get("content")}.property().cacheable(),graphView:function(){return this.getPath("parentView.graphView")}.property().cacheable(),controller:function(){return this.getPath("parentView.controller")}.property().cacheable(),textBinding:"*item.text",textColor:"#333333",stroke:"#000000",highlightedStroke:"#6699ff",fill:"#ffffff",shouldMarkTargetPointBinding:"*item.shouldMarkTargetPoint",shouldMarkTargetPointBindingDefault:SC.Binding.oneWay(),isBodyDragging:NO,isArrowDragging:NO,isHighlighted:function(){return this.get("isBodyDragging")||this.get("isArrowDragging")}.property("isBodyDragging","isArrowDragging"),markerStyle:"arrow",markerSize:10,xBinding:"*item.x",yBinding:"*item.y",xOffsetBinding:"*item.xOffset",yOffsetBinding:"*item.yOffset",minDistanceFromPointBinding:"*item.minDistanceFromPoint",isPositionUpdateRequiredBinding:"*item.isPositionUpdateRequired",allowCoordinatesChangeBinding:"*item.allowCoordinatesChange",isRemovalEnabledBinding:"*item.isRemovalEnabled",isEditableBinding:"*item.isEditable",calculatedTextWidthBinding:"*item.calculatedTextWidth",calculatedTextHeightBinding:"*item.calculatedTextHeight",maxTextFieldWidthBinding:"*item.maxTextFieldWidth",maxCharactersBinding:"*item.maxCharacters",xCoord:function(){return this.get("graphView").coordinatesForPoint(this.get("x"),0).x}.property("x","graphScale"),yCoord:function(){return this.get("graphView").coordinatesForPoint(0,this.get("y")).y}.property("y","graphScale"),labelBodyWidthBinding:".labelBodyView.width",labelBodyHeightBinding:".labelBodyView.height",cornerRadius:4,bodyXCoord:null,bodyYCoord:null,anchorXCoord:null,anchorYCoord:null,LEFT:1,RIGHT:2,TOP:4,TOP_LEFT:5,TOP_RIGHT:6,BOTTOM:8,BOTTOM_LEFT:9,BOTTOM_RIGHT:10,priorityPositionList:[2,8,10,9,6,1,4,5],labelTextView:SC.outlet("labelBodyView.labelTextView"),isEditingBinding:".labelTextView.isEditing",didRemoveFromGraphView:function(){this.get("labelTextView").didRemoveFromGraphView()},coordsDidChange:function(){var n=this.get("xCoord"),q=this.get("yCoord"),u=this.get("xOffset"),g=this.get("yOffset"),k=this.get("labelBodyHeight"),l=this.get("labelBodyWidth");if((l&&l===100)&&(k&&k===30)){return}var o=n+u;var t=q+g-k;this.set("bodyXCoord",o);this.set("bodyYCoord",t);var m={x:n,y:q},p={x:o+l/2,y:t+k/2};var b=this.getAnchorPosition(m,p);var j=this.getAnchorCoords(b,p,l,k);this.set("anchorXCoord",j.x);this.set("anchorYCoord",j.y);var e=this.get("graphView");if(e){var f=this.get("bodyXCoord");var c=this.get("bodyYCoord");var s=this.get("item");var a=e.get("arrLabelsLayout");var h=this.checkLabelInArray(s);if(!h){h={};a.push(h)}h.item=s;h.right=f+l;h.bottom=c+k;h.left=f;h.top=c;h.width=l;h.height=k;if(!(n&&isNaN(n)&&q&&isNaN(q)&&u&&isNaN(u)&&g&&isNaN(g))){if(this.get("isPositionUpdateRequired")===null||this.get("isPositionUpdateRequired")===undefined){this.set("isPositionUpdateRequired",YES)}}}}.observes("xCoord","yCoord","xOffset","yOffset","labelBodyWidth","labelBodyHeight"),getAnchorCoords:function(f,e,c,a){var b={};switch(f){case"left":b.x=e.x-c/2;b.y=e.y;break;case"right":b.x=e.x+c/2;b.y=e.y;break;case"top":b.x=e.x;b.y=e.y-a/2;break;case"bottom":b.x=e.x;b.y=e.y+a/2;break}return b},getAnchorPosition:function(c,f){var b=this.get("labelBodyHeight"),e=this.get("labelBodyWidth");var a=(c.y-f.y)/(c.x-f.x);var g=a*e/2;var h=(b/2)/a;if((-b/2)<=g&&g<=(b/2)){if(c.x>f.x){return"right"}if(c.x<f.x){return"left"}}if((-e/2)<=h&&h<=(e/2)){if(c.y<f.y){return"top"}if(c.y>f.y){return"bottom"}}console.error("Cannot find label anchor position");return"bottom"},updateLabelPosition:function(){var a=this.get("isPositionUpdateRequired");if(a){this.beginPropertyChanges();this.updatePosition();this.endPropertyChanges();this.set("isPositionUpdateRequired",NO)}}.observes("isPositionUpdateRequired"),updatePosition:function(){this.beginPropertyChanges();var b=this.get("graphView");if(b){var h=this.get("xCoord");var f=this.get("yCoord");var e=this.get("item");var a=b.get("arrLabelsLayout");var g=this.checkLabelInArray(e);a=this.fetchSortedOtherPositions(a,h,f);var c=this.checkConstraintsAndGiveNewPosition(a,g);if(c){this.set("xOffset",c.left-h);this.set("yOffset",c.bottom-f)}}this.endPropertyChanges()},fetchSortedOtherPositions:function(l,b,e){var n=this.get("item");var k=[];var h={};for(var f=0;f<l.length;f++){var g=l[f];if(n===g.item){continue}var o=b-(g.left+g.width/2);var m=e-(g.top+g.height/2);var a=Math.sqrt(o*o+m*m);h[g]=a;for(var c=0;c<k.length;c++){if(h[k]>a){k=k.splice(c,0,g);break}}if(c===k.length){k.push(g)}}return k},checkConstraintsAndGiveNewPosition:function(o,n){var k,h;var q=this.get("priorityPositionList");this.getLabelBodyWithinGraphBounds(n);var m=jQuery.extend({},n);this.checkConnectingLineLength(n);this.getLabelBodyWithinGraphBounds(n);if(!this.checkOverlapWithOtherLabels(o,n)&&this.giveScore(o,n)===0){return n}var e=m;for(k=-1;k<o.length;k++){if(k>-1){e=o[k]}for(h=0;h<q.length;h++){n=this.getNewPostionLayout(e,n,q[h]);this.checkConnectingLineLength(n);this.getLabelBodyWithinGraphBounds(n);if(!this.checkOverlapWithOtherLabels(o,n)&&this.giveScore(o,n)===0){return n}}}var f=this.giveScore(o,m,true);var b=jQuery.extend({},m);if(f>0){n=jQuery.extend({},m);this.getLabelBodyWithinGraphBounds(n);if(!this.checkOverlapWithOtherLabels(o,n)){return n}var l=6;var g=0;var t=f;var c=3;var s=c;var p=c;while(f>l){var a=false;if(f>t){g++;n=jQuery.extend({},b);switch(g){case 1:s=-c;p=c;break;case 2:s=-c;p=-c;break;case 3:s=c;p=-c;break;case 4:s=0;p=c;break;case 5:s=0;p=-c;break;case 6:s=c;p=0;break;case 7:s=0;p=-c;break;default:a=true}}if(a){break}n.left+=s;n.right+=s;n.top+=p;n.bottom+=p;f=this.giveScore(o,n,true);if(t>f){b=jQuery.extend({},n);t=f}}}return b},giveScore:function(b,a,e){var h=0;var g=this.get("minDistanceFromPoint");if(!this.isLabelWithinGraph(a)){h+=64}if(e){var f=this.getOverlapArea(b,a);var c=a.width*a.height;if(f>c*3/4){h+=32}else{if(f>c/2){h+=16}else{if(f>c/4){h+=8}else{if(f>0){h+=4}}}}}else{if(this.checkOverlapWithOtherLabels(b,a)){h+=4}}if(Math.round(this.getConnectingLineLength(a))<g){h+=2}return h},checkOverlapWithOtherLabels:function(a,c){for(var b=0;b<a.length;b++){if(this.checkOverlap(a[b],c)){return true}}return false},getOverlapArea:function(a,c){var e=0;for(var b=0;b<a.length;b++){e+=this.intersectRect(a[b],c)}return e},checkConnectingLineLength:function(p){var b=this.get("xCoord"),k=this.get("yCoord"),l=p.left-b,f=p.bottom-k,t={x:p.left+p.width/2,y:p.top+p.height/2};var q=this.getAnchorPosition({x:b,y:k},t);var a=this.getAnchorCoords(q,t,p.width,p.height);var j=a.x-b,h=a.y-k;var o=a.x-l;var m=a.y-f;var c=Math.sqrt(j*j+h*h);var s=this.get("minDistanceFromPoint");if(c<s){var e=s/c;var n=(e*j)+b-o;var g=(h*e)+k-m;p.left=n+b;p.right=p.left+p.width;p.bottom=g+k;p.top=p.bottom-p.height}},getConnectingLineLength:function(e){var j=this.get("xCoord"),h=this.get("yCoord"),g={x:e.left+e.width/2,y:e.top+e.height/2};var b=this.getAnchorPosition({x:j,y:h},g);var a=this.getAnchorCoords(b,g,e.width,e.height),f=a.x-j,c=a.y-h;return Math.sqrt(f*f+c*c)},getLabelBodyWithinGraphBounds:function(g){var b=this.get("graphView");var h=b.get("xAxis");var a=b.get("yAxis");var e=b.coordinatesForPoint(h.get("min"),a.get("max"));var c=b.coordinatesForPoint(h.get("max"),a.get("min"));var f={};f.left=e.x;f.right=c.x;f.top=e.y;f.bottom=c.y;if(g.left<f.left){g.left=f.left;g.right=g.left+g.width}else{if(g.right>f.right){g.right=f.right;g.left=g.right-g.width}}if(g.top<f.top){g.top=f.top;g.bottom=g.top+g.height}else{if(g.bottom>f.bottom){g.bottom=f.bottom;g.top=g.bottom-g.height}}},limitWithinBounds:function(){var f=this.get("bodyXCoord"),e=this.get("bodyYCoord"),c=this.get("labelBodyWidth"),a=this.get("labelBodyHeight"),b={left:f,right:f+c,top:e,bottom:e+a,width:c,height:a};if(f&&e&&c&&a){if(!this.isLabelWithinGraph(b)){this.getLabelBodyWithinGraphBounds(b);this.beginPropertyChanges();this.set("xOffset",b.left-this.get("xCoord"));this.set("yOffset",b.bottom-this.get("yCoord"));this.endPropertyChanges()}}}.observes("labelBodyWidth","labelBodyHeight"),isLabelWithinGraph:function(g){var b=this.get("graphView");var h=b.get("xAxis");var a=b.get("yAxis");var e=b.coordinatesForPoint(h.get("min"),a.get("max"));var c=b.coordinatesForPoint(h.get("max"),a.get("min"));var f={};f.left=e.x;f.right=c.x;f.top=e.y;f.bottom=c.y;if((g.left<f.left)||(g.right>f.right)||(g.top<f.top)||(g.bottom>f.bottom)){return false}return true},checkLabelInArray:function(e){var a=this.get("graphView");var c=a.get("arrLabelsLayout");for(var b=0;b<c.length;b++){if(c[b].item===e){return c[b]}}return null},getNewPostionLayout:function(e,c,a){var b={top:c.top,bottom:c.bottom,left:c.left,right:c.right,width:c.width,height:c.height};var g=this.get("labelBodyView").strokeWidth();var f=5;if(a&this.get("RIGHT")){b.left=e.right+f+2*g;b.right=b.left+c.width}else{if(a&this.get("LEFT")){b.left=e.left-c.width-f-2*g;b.right=b.left+c.width}}if(a&this.get("BOTTOM")){b.top=e.bottom+f+2*g;b.bottom=b.top+c.height}else{if(a&this.get("TOP")){b.top=e.top-c.height-f-2*g;b.bottom=b.top+c.height}}return b},checkOverlap:function(c,b){var a=this.intersectRect(c,b);return a>0},intersectRect:function(b,a){if(!(a.left>b.right||a.right<b.left||a.top>b.bottom||a.bottom<b.top)){var c=(Math.max(b.left,a.left)-Math.min(b.right,a.right))*(Math.max(b.top,a.top)-Math.min(b.bottom,a.bottom));return c}return 0},didCreateLayer:function(){this.$().css("cursor","default");this.get("item").set("view",this);var a=this.get("layer");if(a.getAttribute("class")){a.setAttribute("class",a.getAttribute("class")+" labelView")}else{a.setAttribute("class","labelView")}},viewDidResize:function(){this.invokeLast(this.notifyGraphScaleChange)},notifyGraphScaleChange:function(){this.notifyPropertyChange("graphScale")},moveToFront:function(){this.get("parentView").moveViewToFront(this)},mouseEntered:function(){var b=false;if(this.get("isArrowDragging")){b=true}else{var a=this.getPath("graphView.topAnnotationsHolder").getLabelInArrowDragMode();if(a){b=true}}if(b){this.$().css("cursor","move")}else{this.$().css("cursor","default")}},childViews:"targetPointView connectingLineView labelBodyView".w(),targetPointView:RaphaelViews.RaphaelView.design(Smartgraphs.ArrowDrawing,{labelView:SC.outlet("parentView"),xCoordBinding:".labelView.xCoord",yCoordBinding:".labelView.yCoord",anchorXCoordBinding:".labelView.anchorXCoord",anchorYCoordBinding:".labelView.anchorYCoord",strokeBinding:".labelView.stroke",markerStyleBinding:".labelView.markerStyle",markerSizeBinding:".labelView.markerSize",didCreateLayer:function(){var a=this.getPath("labelView.allowCoordinatesChange");if(a){this.$().css("cursor","move")}else{this.$().css("cursor","default")}},shouldMarkTargetPointBinding:".labelView.shouldMarkTargetPoint",defaultFillBinding:".labelView.stroke",highlightedFillBinding:".labelView.highlightedStroke",isHighlightedBinding:".labelView.isHighlighted",fill:function(){return this.get("isHighlighted")?this.get("highlightedFill"):this.get("defaultFill")}.property("isHighlighted","highlightedFill","defaultFill").cacheable(),strokeWidth:function(){return this.get("isHighlighted")?this.get("highlightedStrokeWidth"):this.get("defaultStrokeWidth")}.property("isHighlighted","highlightedStrokeWidth","defaultStrokeWidth").cacheable(),displayProperties:"xCoord yCoord anchorXCoord isHighlighted anchorYCoord stroke startRadius".w(),isVisible:function(){return this.get("shouldMarkTargetPoint")}.property("shouldMarkTargetPoint").cacheable(),renderCallback:function(c,a,b){return c.path(a).attr({stroke:b})},render:function(b,f){var e=this.get("fill"),a,c;a=this.markPath();if(f){b.callback(this,this.renderCallback,a,e);this.renderChildViews(b,f)}else{c=this.get("raphaelObject");c.attr({path:a,fill:e,stroke:e})}},markPath:function(){if(this.get("markerStyle")==="arrow"){return this.arrowMark()}if(this.get("markerStyle")==="x"){return this.xMark()}return this.emptyPath()},emptyPath:function(){return"M 0 0"},arrowMark:function(){var c=this.get("anchorXCoord"),b=this.get("anchorYCoord"),f=this.get("xCoord"),e=this.get("yCoord"),a=this.get("markerSize"),g=20;if(SC.none(c)||SC.none(b)||SC.none(f)||SC.none(e)||SC.none(g)){return this.emptyPath()}return this.arrowPath(c,b,f,e,a,g)},xMark:function(){var f=[],g=this.get("xCoord"),e=this.get("yCoord"),c=this.get("markerSize"),b=c/2,a=g-b,h=e+b;if(SC.none(g)||SC.none(e)){return this.emptyPath()}f.push("M",a,h);f.push("L",a+c,h-c);a=g-b;h=e-b;f.push("M",a,h);f.push("L",a+c,h+c);return f.join(" ")},mouseDown:function(a){this.startDrag(a);return YES},touchStart:function(a){this.startDrag(a);return YES},mouseUp:function(a){return this._mouseUpOrTouchEnd(a)},touchEnd:function(a){return this._mouseUpOrTouchEnd(a)},_mouseUpOrTouchEnd:function(a){var b=this.getPath("labelView.allowCoordinatesChange");if(b===undefined||!b){return YES}this.endDrag(a);return NO},mouseDragged:function(a){this.drag(a);return YES},touchesDragged:function(a){this.drag(a);return YES},startDrag:function(){var a=this.getPath("labelView.allowCoordinatesChange");if(a===undefined||!a){return YES}this.setPath("labelView.isArrowDragging",YES);var b=this.get("labelView");b.moveToFront();this._initialLabelPosition={offsetPointX:b.get("bodyXCoord"),offsetPointY:b.get("bodyYCoord")+b.get("labelBodyHeight")};return YES},setCursorStyle:function(a){var b=this.getPath("labelView.graphView.requestedCursorStyle");if(b!==a){this.setPath("labelView.graphView.requestedCursorStyle",a)}},drag:function(p){var m=this.getPath("labelView.allowCoordinatesChange");if(m===undefined||!m){return YES}var k=this.getPath("labelView.graphView.requestedCursorStyle");if(k!=="move"){this.set("previousCursorStyle",k)}this.setCursorStyle("move");this.setPath("labelView.isArrowDragging",YES);var e=this.getPath("labelView.graphView");var j=e.$().offset(),f=e.get("xAxis"),c=e.get("yAxis"),h=e.coordinatesForPoint(f.get("min"),c.get("max")),q=e.coordinatesForPoint(f.get("max"),c.get("min")),a={xLeft:h.x,yTop:h.y,xRight:q.x,yBottom:q.y},n=p.pageX-j.left,l=p.pageY-j.top;n=(n<a.xLeft)?a.xLeft:(n>a.xRight)?a.xRight:n;l=(l<a.yTop)?a.yTop:(l>a.yBottom)?a.yBottom:l;var o=e.pointForCoordinates(n,l);var b=this.get("labelView");var g=this._initialLabelPosition;b.beginPropertyChanges();b.set("x",o.x);b.set("y",o.y);b.set("xOffset",g.offsetPointX-b.get("xCoord"));b.set("yOffset",g.offsetPointY-b.get("yCoord"));b.endPropertyChanges()},mouseEntered:function(){var b=this.getPath("labelView.allowCoordinatesChange");if(b===undefined||!b){return YES}var a=this.getPath("labelView.graphView.requestedCursorStyle");if(!this.getPath("labelView.isArrowDragging")&&a!=="move"){this.set("previousCursorStyle",a)}this.setCursorStyle("move")},mouseExited:function(){var b=this.getPath("labelView.allowCoordinatesChange");if(b===undefined||!b){return YES}if(!this.getPath("labelView.isArrowDragging")){var a=this.get("previousCursorStyle");if(a){this.setCursorStyle(this.get("previousCursorStyle"))}}},endDrag:function(){if(this.getPath("labelView.isArrowDragging")){var a=this.get("previousCursorStyle");if(a){this.setCursorStyle(this.get("previousCursorStyle"))}}this.setPath("labelView.isArrowDragging",NO);return YES}}),connectingLineView:RaphaelViews.RaphaelView.design({displayProperties:"xCoord yCoord anchorXCoord anchorYCoord stroke startRadius".w(),labelView:SC.outlet("parentView"),defaultStrokeWidth:1,highlightedStrokeWidth:2,defaultStrokeBinding:".labelView.stroke",highlightedStrokeBinding:".labelView.highlightedStroke",isHighlightedBinding:".labelView.isHighlighted",xCoordBinding:".labelView.xCoord",yCoordBinding:".labelView.yCoord",anchorXCoordBinding:".labelView.anchorXCoord",anchorYCoordBinding:".labelView.anchorYCoord",stroke:function(){return this.get("isHighlighted")?this.get("highlightedStroke"):this.get("defaultStroke")}.property("isHighlighted","highlightedStroke","defaultStroke").cacheable(),strokeWidth:function(){return this.get("isHighlighted")?this.get("highlightedStrokeWidth"):this.get("defaultStrokeWidth")}.property("isHighlighted","highlightedStrokeWidth","defaultStrokeWidth").cacheable(),startRadius:9,renderCallback:function(e,a,b,c){return e.path(a).attr({stroke:b,"stroke-width":c})},render:function(c,a){var b=this.get("xCoord"),k=this.get("yCoord"),q=this.get("anchorXCoord"),f=this.get("anchorYCoord"),p=this.get("stroke"),m=this.get("strokeWidth"),n=this.get("startRadius"),s=q-b,o=f-k,e=Math.sqrt(s*s+o*o),l,j,g,h;if(e<n||SC.none(b)||SC.none(k)||SC.none(q)||SC.none(f)){g="M 0 0"}else{l=b+(n/e)*s;j=k+(n/e)*o;g=["M",l,j,"L",q,f].join(" ")}if(a){c.callback(this,this.renderCallback,g,p,m);this.renderChildViews(c,a)}else{h=this.get("raphaelObject");h.attr({path:g,stroke:p,"stroke-width":m})}}}),labelBodyView:RaphaelViews.RaphaelView.design({childViews:"labelTextView touchShieldView removeButtonView".w(),parentLabelView:SC.outlet("parentView"),labelView:SC.outlet("parentLabelView"),graphView:SC.outlet("labelView.graphView"),topAnnotationHolder:SC.outlet("graphView.topAnnotationHolder"),displayProperties:"bodyXCoord bodyYCoord width height stroke strokeWidth fill cornerRadius".w(),itemBinding:".parentLabelView.item",textBinding:".parentLabelView.text",textColorBinding:".parentLabelView.textColor",bodyXCoordBinding:".parentLabelView.bodyXCoord",bodyYCoordBinding:".parentLabelView.bodyYCoord",xOffsetBinding:".parentLabelView.xOffset",yOffsetBinding:".parentLabelView.yOffset",textWidthBinding:".labelTextView.width",textHeightBinding:".labelTextView.height",fillBinding:".parentLabelView.fill",cornerRadiusBinding:".parentLabelView.cornerRadius",defaultStrokeBinding:".parentLabelView.stroke",highlightedStrokeBinding:".parentLabelView.highlightedStroke",defaultStrokeWidth:1,highlightedStrokeWidth:2,leftMargin:12,topMargin:12,rightMargin:SC.platform.touch?30:20,bottomMargin:12,isHighlightedBinding:".parentLabelView.isHighlighted",width:function(){var a=this.get("textWidth");if(a){return this.get("textWidth")+this.get("leftMargin")+this.get("rightMargin")}return 100}.property("textWidth").cacheable(),height:function(){var a=this.get("textHeight");if(a){return this.get("textHeight")+this.get("bottomMargin")+this.get("topMargin")}return 30}.property("textHeight").cacheable(),stroke:function(){return this.get("isHighlighted")?this.get("highlightedStroke"):this.get("defaultStroke")}.property("isHighlighted","highlightedStroke","defaultStroke").cacheable(),strokeWidth:function(){return this.get("isHighlighted")?this.get("highlightedStrokeWidth"):this.get("defaultStrokeWidth")}.property("isHighlighted","highlightedStrokeWidth","defaultStrokeWidth").cacheable(),renderCallback:function(b,a){return b.rect().attr(a)},render:function(c,e){var b={x:this.get("bodyXCoord")||0,y:this.get("bodyYCoord")||0,width:this.get("width")||0,height:this.get("height")||0,r:this.get("cornerRadius")||0,stroke:this.get("stroke"),"stroke-width":this.get("strokeWidth")||1,fill:this.get("fill"),"fill-opacity":1},a;if(e){c.callback(this,this.renderCallback,b);this.renderChildViews(c,e)}else{a=this.get("raphaelObject");a.attr(b)}},mouseDown:function(a){this.startDrag(a);return YES},touchStart:function(a){this.startDrag(a);return YES},mouseUp:function(a){return this._mouseUpOrTouchEnd(a)},touchEnd:function(a){return this._mouseUpOrTouchEnd(a)},_mouseUpOrTouchEnd:function(a){this.endDrag(a);var e=new Date().getTime(),b=202,c=200;if(typeof this.lastUp!=="undefined"&&this.lastUp){b=e-this.lastUp;if(b<c){this.lastUp=0;return this.doubleClick(a)}}this.lastUp=e;return NO},doubleClick:function(){if(!this.getPath("labelTextView.isEditing")){this.labelTextView.beginEditing()}return YES},mouseDragged:function(a){this.drag(a);return YES},touchesDragged:function(a){this.drag(a);return YES},startDrag:function(s){var a=this.get("labelView");a.moveToFront();this.setPath("parentLabelView.isBodyDragging",YES);this._isDragging=YES;this._dragX=s.pageX;this._dragY=s.pageY;var c=this.getPath("graphView");var e=c.get("xAxis");var b=c.get("yAxis");var m=c.coordinatesForPoint(e.get("min"),b.get("max"));var t=c.coordinatesForPoint(e.get("max"),b.get("min"));var q=t.x-m.x;var h=t.y-m.y;var f=this.get("bodyYCoord")-m.y;var o=this.get("bodyXCoord")-m.x;var p=this.width();var l=this.height();var n=this.get("xOffset");var g=this.get("yOffset");var k=q-p;var j=h-l;this._mouseDownInfo={minXOffset:n-o,maxXOffset:k-o+n,minYOffset:g-f,maxYOffset:j-f+g,xMIN:s.pageX-o,xMAX:s.pageX-o+k,yMIN:s.pageY-f,yMAX:s.pageY-f+j};this.$().css("cursor","move");return YES},drag:function(b){var c=this.get("xOffset"),f=this.get("yOffset");if(!this._isDragging){return}var e=this._mouseDownInfo,g,a;g=c+b.pageX-this._dragX;if(b.pageX<e.xMIN||g<e.minXOffset){g=e.minXOffset}if(b.pageX>e.xMAX||g>e.maxXOffset){g=e.maxXOffset}a=f+b.pageY-this._dragY;if(b.pageY<e.yMIN||a<e.minYOffset){a=e.minYOffset}if(b.pageY>e.yMAX||a>e.maxYOffset){a=e.maxYOffset}this._dragX=b.pageX;this._dragY=b.pageY;this.parentLabelView.beginPropertyChanges();this.set("xOffset",g);this.set("yOffset",a);this.parentLabelView.endPropertyChanges()},endDrag:function(a){this.drag(a);this.setPath("parentLabelView.isBodyDragging",NO);this._isDragging=NO;this.$().css("cursor","");return YES},labelTextView:Smartgraphs.EditableLabelView.design({labelView:SC.outlet("parentView.parentLabelView"),isEditableBinding:".labelView.isEditable",fontSize:14}),touchShieldView:RaphaelViews.RaphaelView.design({bodyXCoordBinding:".parentView.bodyXCoord",bodyYCoordBinding:".parentView.bodyYCoord",widthBinding:".parentView.width",heightBinding:".parentView.height",cornerRadiusBinding:".parentView.cornerRadius",strokeWidthBinding:".parentView.strokeWidth",displayProperties:"bodyXCoord bodyYCoord width height cornerRadius strokeWidth".w(),renderCallback:function(b,a){return b.rect().attr(a)},render:function(c,e){var b={x:this.get("bodyXCoord")||0,y:this.get("bodyYCoord")||0,width:this.get("width")||0,height:this.get("height")||0,r:this.get("cornerRadius")||0,stroke:this.get("stroke"),"stroke-width":this.get("strokeWidth")||1,fill:this.get("fill"),"stroke-opacity":0,"fill-opacity":0},a;if(e){c.callback(this,this.renderCallback,b)}else{a=this.get("raphaelObject");a.attr(b)}}}),removeButtonView:RaphaelViews.RaphaelView.design({displayProperties:"bodyXCoord bodyYCoord width isHighlighted".w(),labelBodyView:SC.outlet("parentView"),labelView:SC.outlet("parentView.parentLabelView"),graphView:SC.outlet("labelView.graphView"),graphCanvasView:SC.outlet("graphView.graphCanvasView"),widthBinding:".labelBodyView.width",bodyXCoordBinding:".labelBodyView.bodyXCoord",bodyYCoordBinding:".labelBodyView.bodyYCoord",isRemovalEnabledBinding:".labelView.isRemovalEnabled",radius:function(){return SC.platform.touch?10:6}.property(),centerX:function(){return this.get("bodyXCoord")+this.get("width")-4-this.get("radius")||0}.property(),centerY:function(){return this.get("bodyYCoord")+4+this.get("radius")||0}.property(),isVisible:function(){return this.get("isRemovalEnabled")}.property("isRemovalEnabled"),isHighlighted:NO,highlightedCircleColor:"#999999",notHighlightedCircleColor:"#ffffff",highlightedXStroke:"#ffffff",notHighlightedXStroke:"#999999",circleColor:function(){return this.get("isHighlighted")?this.get("highlightedCircleColor"):this.get("notHighlightedCircleColor")}.property("isHighlighted","highlightedCircleColor","notHighlightedCircleColor").cacheable(),xStroke:function(){return this.get("isHighlighted")?this.get("highlightedXStroke"):this.get("notHighlightedXStroke")}.property("isHighlighted","highlightedXStroke","notHighlightedXStroke").cacheable(),xStrokeWidth:SC.platform.touch?3:2,renderCallback:function(c,b,a){return c.set().push(c.circle().attr(b),c.path().attr(a))},render:function(b,a){var j=this.get("radius"),n=j/2,f=this.get("centerX"),e=this.get("centerY"),l={r:j,cx:f,cy:e,stroke:this.get("circleColor"),fill:this.get("circleColor")},m=["M",f-n,e-n,"L",f+n,e+n,"M",f-n,e+n,"L",f+n,e-n].join(" "),g={path:m,"stroke-width":this.get("xStrokeWidth"),stroke:this.get("xStroke")},h,c,k;this.set("centerX",f);this.set("centerY",e);if(a){b.callback(this,this.renderCallback,l,g)}else{h=this.get("raphaelObject");c=h.items[0];k=h.items[1];c.attr(l);k.attr(g)}},touchStart:function(){this.set("isHighlighted",YES);return YES},touchEnd:function(a){var b=this.get("graphCanvasView").$().offset();this.set("isHighlighted",NO);if(Math.abs(a.pageX-this.get("centerX")-b.left)<50&&Math.abs(a.pageY-this.get("centerY")-b.top)<50){this.get("labelView").remove()}return YES},mouseDown:function(){this.get("labelView").remove()},mouseEntered:function(){this.set("isHighlighted",YES)},mouseExited:function(){this.set("isHighlighted",NO)}})}),remove:function(){this.removeLabelFromArray();if(this.get("isRemovalEnabled")){this.get("controller").labelViewRemoveLabel(this.get("item"))}},removeLabelFromArray:function(){var b=this.get("graphView");var e=this.get("item");if(b){var f=b.get("arrLabelsLayout");var a=[];for(var c=0;c<f.length;c++){if(f[c].item!==e){a.push(f[c])}}b.set("arrLabelsLayout",a)}},commitEditing:function(){var a=this.get("labelTextView");if(this.get("isEditing")){a.commitEditing()}}});sc_require("models/annotation");sc_require("views/label");Smartgraphs.Label=Smartgraphs.Annotation.extend({x:SC.Record.attr(Number),y:SC.Record.attr(Number),text:SC.Record.attr(String),xOffset:SC.Record.attr(Number,{defaultValue:30}),yOffset:SC.Record.attr(Number,{defaultValue:30}),shouldMarkTargetPoint:SC.Record.attr(Boolean,{defaultValue:YES}),createdByLabelTool:NO,hasEditedFirstTime:NO,isEditable:YES,isTopAnnotation:true,labelSet:null,minDistanceFromPoint:50,maxCharacters:80,maxTextFieldWidth:140,calculatedTextWidth:0,calculatedTextHeight:0,isPositionUpdateRequired:null,view:null,allowCoordinatesChange:NO,isRemovalEnabled:function(){if(this.get("labelSet")){return this.getPath("labelSet.isRemovalEnabled")}else{return this._isRemovalEnabled||NO}}.property(),enableRemoval:function(){this._isRemovalEnabled=YES;this.notifyPropertyChange("isRemovalEnabled")},disableRemoval:function(){this._isRemovalEnabled=NO;this.notifyPropertyChange("isRemovalEnabled")}});Smartgraphs.Label.viewClass=Smartgraphs.LabelView;sc_require("mixins/rearrangeable_parent_view");Smartgraphs.LabelSetView=RaphaelViews.RaphaelCollectionView.extend(Smartgraphs.RearrangeableParentView,{exampleView:Smartgraphs.LabelView,useFastPath:NO,contentBinding:".item.labels",didCreateLayer:function(){this.get("item").set("view",this)},didRemoveFromGraphView:function(){this.get("childViews").forEach(function(a){if(a.didRemoveFromGraphView){a.didRemoveFromGraphView()}})},labelInEditMode:function(){var e=this.get("childViews");var c=e.length;for(var b=0;b<c;b++){var a=e[b];if(a.get("isEditing")){return a}}return null}.property(),labelInArrowDragMode:function(){var e=this.get("childViews");var c=e.length;for(var b=0;b<c;b++){var a=e[b];if(a.get("isArrowDragging")){return a}}return null}.property(),touchStart:function(){return NO}});sc_require("models/annotation");sc_require("views/label_set");Smartgraphs.LabelSet=Smartgraphs.Annotation.extend({labels:SC.Record.toMany("Smartgraphs.Label"),isTopAnnotation:true,isRemovalEnabled:NO,view:null,createChildLabel:function(){var a=this.get("store").createRecord(Smartgraphs.Label,{activity:this.getPath("activity.id"),url:Smartgraphs.getNextGuid(),name:null,text:"New Label"});a.set("labelSet",this);this.get("labels").pushObject(a);return a},removeLabel:function(a){this.get("labels").removeObject(a);var b=a.get("view");b.didRemoveFromGraphView()},enableRemoval:function(){this.set("isRemovalEnabled",YES);this.get("labels").invoke("notifyPropertyChange","isRemovalEnabled")},disableRemoval:function(){this.set("isRemovalEnabled",NO);this.get("labels").invoke("notifyPropertyChange","isRemovalEnabled")}});Smartgraphs.LabelSet.viewClass=Smartgraphs.LabelSetView;Smartgraphs.LineThroughPointsView=RaphaelViews.RaphaelView.extend({canShowInTable:NO,strokeBinding:".item.color",strokeWidth:2,strokeOpacity:0.7,displayProperties:"x1 y1 x2 y2 stroke strokeWidth strokeOpacity".w(),renderCallback:function(c,a){var b=c.path(a.d).attr(a);return b},render:function(c,j){var h=this.get("graphView"),g=this.get("item"),t=g.get("x1"),e=g.get("y1"),s=g.get("x2"),b=g.get("y2"),k=h.get("xAxis"),a=h.get("yAxis"),o=this.getEndPoints(t,e,s,b,k,a),q,p,n,f=[],l,m,u;for(q=0;q<o.length;q++){f.push(q===0?"M":"L");n=o[q];p=h.coordinatesForPoint(n.x,n.y);f.push(p.x);f.push(p.y)}l=f.join(" ");m={d:l,stroke:this.get("stroke"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("strokeOpacity")};if(j){c.callback(this,this.renderCallback,m)}else{u=c.raphael();u.attr(m)}},_y:function(e,c,a){return(c*e)+a},_x:function(e,c,a){if(c===0){return a}else{return(e-a)/c}},getEndPoints:function(e,o,a,n,g,c){var k=g.get("max");var f=g.get("min");var h=c.get("max");var q=c.get("min");var p=[];if(e===a){p.push({x:e,y:q});p.push({x:e,y:h});return p}var j=(n-o)/(a-e);var l=n-(j*a);if(this._y(f,j,l)<q){p.push({y:q,x:this._x(q,j,l)});if(this._y(k,j,l)>h){p.push({y:h,x:this._x(h,j,l)})}else{p.push({x:k,y:this._y(k,j,l)})}return p}if((q<=this._y(f,j,l))&&(this._y(f,j,l)<=h)){p.push({x:f,y:this._y(f,j,l)});if(this._y(k,j,l)<q){p.push({y:q,x:this._x(q,j,l)})}else{if(this._y(k,j,l)<=h){p.push({x:k,y:this._y(k,j,l)})}else{p.push({y:h,x:this._x(h,j,l)})}}return p}if(h<this._y(f,j,l)){p.push({y:h,x:this._x(h,j,l)});if(this._y(k,j,l)<q){p.push({y:q,x:this._x(q,j,l)})}else{p.push({x:k,y:this._y(k,j,l)})}return p}return null}});sc_require("models/tag");sc_require("models/annotation");sc_require("views/line_through_points");Smartgraphs.LineThroughPoints=Smartgraphs.Annotation.extend({x1:Smartgraphs.Tag.valueFrom("p1Tag","x","x1Record"),y1:Smartgraphs.Tag.valueFrom("p1Tag","y","y1Record"),x2:Smartgraphs.Tag.valueFrom("p2Tag","x","x2Record"),y2:Smartgraphs.Tag.valueFrom("p2Tag","y","y2Record"),x1Record:SC.Record.attr(Number),y1Record:SC.Record.attr(Number),x2Record:SC.Record.attr(Number),y2Record:SC.Record.attr(Number),p1Tag:SC.Record.toOne("Smartgraphs.Tag"),p2Tag:SC.Record.toOne("Smartgraphs.Tag")});Smartgraphs.LineThroughPoints.viewClass=Smartgraphs.LineThroughPointsView;Smartgraphs.LineToAxisView=RaphaelViews.RaphaelView.extend({canShowInTable:NO,radius:8,defaultStroke:"#aa0000",strokeBinding:".item.color",defaultStrokeWidth:2,defaultStrokeOpacity:0.7,fill:"#ffffff",fillOpacity:0,displayProperties:"item.x item.y stroke".w(),renderCallback:function(e,c){var a;if(c.shouldHideLinePath){a=e.path("M 0 0 L 0 0");a.hide()}else{var b="M "+c.linePathStartingCoords.x+" "+c.linePathStartingCoords.y+" L "+c.linePathEndingCoords.x+" "+c.linePathEndingCoords.y;a=e.path(b)}a.attr({"stroke-width":this.defaultStrokeWidth,stroke:(stroke=this.get("stroke"))!=null?stroke:this.defaultStroke,"stroke-opacity":this.defaultStrokeOpacity});return a},render:function(b,a){var c=this.get("graphView");var f=this.get("item");var l;var g={x:f.get("x"),y:f.get("y")};if(g.x!=null&&g.y!=null){var h=c.coordinatesForPoint(g.x,g.y);if(h){var j;var e=f.get("axis");if(e=="x"){if(g.y>0){j=c.coordinatesForPoint(g.x,Math.max(0,c.yAxis.get("min")))}else{j=c.coordinatesForPoint(g.x,Math.min(0,c.yAxis.get("max")))}}else{if(g.x>0){j=c.coordinatesForPoint(Math.max(0,c.xAxis.get("min")),g.y)}else{j=c.coordinatesForPoint(Math.min(0,c.xAxis.get("max")),g.y)}}if(j){l={linePathStartingCoords:h,linePathEndingCoords:j,shouldHideLinePath:f.get("shouldHideLinePath")}}}}if(!l){l={shouldHideLinePath:YES}}if(a){b.callback(this,this.renderCallback,l)}else{var k=b.raphael();k.attr(l)}}});sc_require("models/annotation");sc_require("views/line_to_axis");Smartgraphs.LineToAxis=Smartgraphs.Annotation.extend({x:Smartgraphs.Tag.valueFrom("pTag","x","xRecord"),y:Smartgraphs.Tag.valueFrom("pTag","y","yRecord"),xRecord:SC.Record.attr(Number),yRecord:SC.Record.attr(Number),pTag:SC.Record.toOne("Smartgraphs.Tag"),shouldHideLinePath:SC.Record.attr(Boolean,{defaultValue:NO}),axis:SC.Record.attr(String,{defaultValue:"y"})});Smartgraphs.LineToAxis.viewClass=Smartgraphs.LineToAxisView;sc_require("models/annotations/arrow");Smartgraphs.RiseArrow=Smartgraphs.Arrow.extend({calculateCoordinatesFromPoints:function(b,a,e,c){var f=(b<e)?{left:[b,a],right:[e,c]}:{left:[e,c],right:[b,a]};return{x1:f.left[0],y1:f.left[1],x2:f.left[0],y2:f.right[1]}}});Smartgraphs.RiseBracket=Smartgraphs.BracketArc.extend({isLeftOfColumn:NO,calculateIndicesFromPoints:function(c,a,f,e){var b=arguments.callee.base.apply(this,arguments);return{item1Index:Math.min(b.item1Index,b.item2Index),item2Index:Math.max(b.item1Index,b.item2Index)}}});sc_require("models/annotations/arrow");Smartgraphs.RunArrow=Smartgraphs.Arrow.extend({calculateCoordinatesFromPoints:function(b,a,e,c){var f=(b<e)?{left:[b,a],right:[e,c]}:{left:[e,c],right:[b,a]};return{x1:f.left[0],y1:f.right[1],x2:f.right[0],y2:f.right[1]}}});Smartgraphs.RunBracket=Smartgraphs.BracketArc.extend({isLeftOfColumn:YES,calculateIndicesFromPoints:function(c,b){var a=arguments.callee.base.apply(this,arguments);return{item1Index:Math.min(a.item1Index,a.item2Index),item2Index:Math.max(a.item1Index,a.item2Index)}}});Smartgraphs.SegmentOverlayView=RaphaelViews.RaphaelView.extend({canShowInTable:NO,points:null,datadefName:"",xMin:null,xMax:null,itemColorBinding:".item.color",defaultColor:"#ffff00",color:function(){return this.get("itemColor")||this.get("defaultColor")}.property("itemColor","defaultColor"),strokeWidth:14,strokeOpacity:0.3,displayProperties:"points.[] item.datadefName item.xMin item.xMax color strokeWidth strokeOpacity".w(),renderCallback:function(b,a){return b.path(a.path).attr(a)},render:function(a,j){var h=this.get("graphView"),f=this.get("item"),t=this.get("points"),q=this.get("datadefName"),b=f.get("datadefName"),w=this.get("xMin"),x=this.get("xMax"),e=f.get("xMin"),g=f.get("xMax"),c=[],m,k,o,l,u,p,s,v;if(!t||q!==b||w!==e||x!==g){q=b;this.set("datadefName",q);w=e;this.set("xMin",w);x=g;this.set("xMax",x);k=Smartgraphs.activityObjectsController.findDatadef(q);o=k.getNewRepresentation({xMin:w,xMax:x,"point-type":"none"});t=o.get("points");this.set("points",t)}for(s=0,v=t.get("length");s<v;s++){c.push(s===0?"M":"L");p=t.objectAt(s);u=h.coordinatesForPoint(p[0],p[1]);c.push(u.x);c.push(u.y)}m=c.join(" ");var n={path:m,stroke:this.get("color"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("strokeOpacity"),"stroke-linecap":"round","stroke-linejoin":"round"};if(j){a.callback(this,this.renderCallback,n)}else{l=a.raphael();l.attr(n)}}});sc_require("models/annotation");sc_require("models/tag");sc_require("views/segment_overlay");Smartgraphs.SegmentOverlay=Smartgraphs.Annotation.extend({isOverlayAnnotation:true,datadefName:SC.Record.attr(String),x1:Smartgraphs.Tag.valueFrom("tag1","x","x1Record"),x2:Smartgraphs.Tag.valueFrom("tag2","x","x2Record"),tag1:SC.Record.toOne("Smartgraphs.Tag"),tag2:SC.Record.toOne("Smartgraphs.Tag"),x1Record:SC.Record.attr(Number),x2Record:SC.Record.attr(Number),isUnboundedLeft:SC.Record.attr(Boolean,{defaultValue:false}),isUnboundedRight:SC.Record.attr(Boolean,{defaultValue:false}),color:SC.Record.attr(String),xMin:function(){var b=this.get("x1"),a=this.get("x2");if(this.get("isUnboundedLeft")){return -Infinity}if(this.get("isUnboundedRight")){return b}if(SC.none(b)||SC.none(a)){return Infinity}return Math.min(b,a)}.property("x1","x2","isUnboundedLeft","isUnboundedRight"),xMax:function(){var b=this.get("x1"),a=this.get("x2");if(this.get("isUnboundedLeft")){return b}if(this.get("isUnboundedRight")){return Infinity}if(SC.none(b)||SC.none(a)){return Infinity}return Math.max(b,a)}.property("x1","x2","isUnboundedLeft","isUnboundedRight")});Smartgraphs.SegmentOverlay.viewClass=Smartgraphs.SegmentOverlayView;Smartgraphs.Axis=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activity:SC.Record.toOne("Smartgraphs.Activity",{inverse:"axes",isMaster:YES,aggregate:YES}),units:SC.Record.toOne("Smartgraphs.Unit"),min:SC.Record.attr(Number),max:SC.Record.attr(Number),nSteps:SC.Record.attr(Number),label:SC.Record.attr(String)});Smartgraphs.Datadef=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",name:SC.Record.attr(String),deviationValue:null,activity:SC.Record.toOne("Smartgraphs.Activity",{aggregate:YES}),xUnits:SC.Record.toOne("Smartgraphs.Unit"),yUnits:SC.Record.toOne("Smartgraphs.Unit"),color:SC.Record.attr(String),selectedX:null,selectedY:null,isStreaming:false,latestX:null,latestY:null,dragValueX:null,dragValueY:null,isActive:false,getNewSampleset:function(){throw new Error("This is an abstract method that should be overridden.")},getNewRepresentation:function(a){var b=this.getNewSampleset(a);return b.getNewRepresentation(a)}});(function(){var b=null;var c=null;function a(){b=[];c=[];for(var e in Smartgraphs){if(Smartgraphs.hasOwnProperty(e)&&Smartgraphs[e]&&Smartgraphs[e].isClass&&e!=="Datadef"&&SC.kindOf(Smartgraphs[e],Smartgraphs.Datadef)){b.push(Smartgraphs[e]);c.push(e)}}}Smartgraphs.Datadef.types=function(){if(!b){a()}return b};Smartgraphs.Datadef.typeNames=function(){if(!c){a()}return c}}());sc_require("models/datadef");sc_require("lib/sampleset");Smartgraphs.FirstDerivative=Smartgraphs.Datadef.extend({sourceType:SC.Record.attr(String),source:SC.Record.attr(String),sourceIsPiecewiseLinear:SC.Record.attr(Boolean),sourceRecord:function(){var a=this.get("sourceType");if(a==="dataref"){return Smartgraphs.activityObjectsController.findDataref(this.get("source"))}else{if(a==="datadef"){return Smartgraphs.activityObjectsController.findDatadef(this.get("source"))}}}.property().cacheable(),getNewSampleset:function(a){var b=this._getSourcePoints(a.xMin,a.xMax),c;if(this.get("sourceIsPiecewiseLinear")){c=this.computePiecewiseLinearDerivative(b)}else{c=this.computeMidpointDifferences(b)}return Smartgraphs.Sampleset.create({datadef:this,points:c})},_getSourcePoints:function(a,e){var b=this.get("sourceType"),c=this.get("sourceRecord");if(b==="dataref"){return c.getPoints(a,e)}else{if(b==="datadef"){return c.getNewSampleset({xMin:a,xMax:e}).get("points")}}},computeMidpointDifferences:function(e){var g=[],f,h,b;for(var c=1,a=e.length;c<a;c++){f=e[c];h=e[c-1];b=f[0]-h[0];g.push([0.5*[h[0]+f[0]],(f[1]-h[1])/b])}return g},computePiecewiseLinearDerivative:function(j){var e=[],k,b,a,c,g;function l(){return(a[1]-b[1])/(a[0]-b[0])}if(j.length>=2){b=j[0];a=j[1];c=l();e.push([b[0],c]);for(var f=1,h=j.length-1;f<h;f++){k=b;b=a;a=j[f+1];g=c;c=l();e.push([b[0],g]);if(c!==g){e.push([b[0],c])}}b=a;g=c;e.push([b[0],g])}return e}});sc_require("models/datadef");Smartgraphs.UnorderedDataPoints=Smartgraphs.Datadef.extend({points:SC.Record.attr(Array,{defaultValue:[]}),getNewSampleset:function(a){var b=Smartgraphs.TrivialSampleset.create({xMin:!a||SC.none(a.xMin)?-Infinity:a.xMin,xMax:!a||SC.none(a.xMax)?Infinity:a.xMax});b.set("datadef",this);return b},addPoint:function(a,b){this.get("points").pushObject([a,b]);this.set("latestX",a);this.set("latestY",b)},replacePoint:function(b,a,e){var c=this.get("points");c.replace(b,1,[[a,e]]);this.set("latestX",a);this.set("latestY",e)},clearPoints:function(){this.set("points",[])},calculateDeviationValue:function(){var h;var a=this.get("referenceDatadefName");if(a!==undefined&&a!==""){var t=Smartgraphs.activityObjectsController.findDatadef(a);h=t.get("points")}else{return}var q=this.get("points");if(q.length>=2){var f=0,e=0,m=0;var o=q[1][1];var p=q[0][1];var b=q[1][0];var c=q[0][0];var l=(o-p)/(b-c);var k=h.length;for(var g=0;g<k;g++){var s=h[g][0];var n=h[g][1];if(l===0){e=n}else{if(l===Infinity||l===(-Infinity)){e=Infinity}else{m=o-l*b;e=(s*l+m)-n}}f+=Math.pow(e,2)}f=(Math.round(f*100)/100).toFixed(2);this.set("deviationValue",f)}}.observes("*points.[]")});sc_require("models/datadefs/unordered_data_points");Smartgraphs.FirstOrderDifference=Smartgraphs.UnorderedDataPoints.extend({init:function(){this._sourcePointsDidChange()},source:SC.Record.toOne("Smartgraphs.UnorderedDataPoints"),windowLength:SC.Record.attr(Number,{defaultValue:1}),points:null,sourcePointsBinding:"*source.points",sourcePointsBindingDefault:SC.Binding.oneWay(),_sourcePointsDidChange:function(){var a=(this.get("sourcePoints")||[]).copy(),f,c,b=this.get("windowLength"),e=0;a.sort(function(h,g){return h[0]-g[0]});f=a.map(function(j,g,h){e+=j[1];if(0<=g&&g<b){return[j[0],e/(g+1)]}else{e-=a[g-b][1];return[j[0],e/b]}});c=f.map(function(j,g,h){return g>0?[j[0],(j[1]-h[g-1][1])/(j[0]-h[g-1][0])]:null});c.shift();this.set("points",c)}.observes("*sourcePoints.[]")});Smartgraphs.Dataref=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",name:SC.Record.attr(String),activity:SC.Record.toOne("Smartgraphs.Activity",{aggregate:YES}),datadefName:SC.Record.attr(String),expressionForm:SC.Record.attr(String),xInterval:SC.Record.attr(Number),points:SC.Record.attr(Array),populateDatadef:function(b,e,a,c){this.setDatadefPoints(this.getPoints(b,e,a,c))},setDatadefPoints:function(b){var a=this.getDatadef();a.set("points",b)},getDatadef:function(){var a=this.get("datadefName");return Smartgraphs.activityObjectsController.findDatadef(a)},getPoints:function(){throw"This method must be inherited as it is an abstract method."},getExpressionFunction:function(){throw"This method must be inherited as it is an abstract method."},getInverseExpressionFunction:function(){throw"This method must be inherited as it is an abstract method."}});(function(){var b=null;var c=null;function a(){b=[];c=[];for(var e in Smartgraphs){if(Smartgraphs.hasOwnProperty(e)&&Smartgraphs[e]&&Smartgraphs[e].isClass&&e!=="Dataref"&&SC.kindOf(Smartgraphs[e],Smartgraphs.Dataref)){b.push(Smartgraphs[e]);c.push(e)}}}Smartgraphs.Dataref.types=function(){if(!b){a()}return b};Smartgraphs.Dataref.typeNames=function(){if(!c){a()}return c}}());sc_require("models/dataref");Smartgraphs.CompositeEquation=Smartgraphs.Dataref.extend({getPoints:function(a,c){var k=[],j=this.get("xInterval"),h,f,e=this.get("expression"),g=new Function("x","with (Math) { "+e+"; } return y;"),b;for(h=a,b=0;h<=c;h=a+j*++b){f=g(h);if(isFinite(f)&&!isNaN(f)){k.push([h,f])}}return k}});sc_require("models/dataref");Smartgraphs.ContinuousEquation=Smartgraphs.Dataref.extend({initialise:function(){arguments.callee.base.apply(this,arguments);this.set("xInterval",this.get("xInterval"));this.setDatadefPoints(this.getPoints())},getExpressionFunction:function(){throw"This method must be inherited as it is an abstract method."},getInverseExpressionFunction:function(){throw"This method must be inherited as it is an abstract method."},getPoints:function(b,g,o,f){if(o==null){o=-Infinity}if(f==null){f=Infinity}var k=this.getExpressionFunction();var n=[];if(k){var m=this.get("xInterval");var e=true;var h=this.getInverseExpressionFunction();var l,j,c,a;for(l=b;l<=g;l+=m){j=k(l);if(j<o||j>f){a=j>f?f:o;c=h(a);if(e){continue}break}else{if(e&&l!==b&&c!==l){n.push([c,a])}e=false}n.push([l,j])}if(l-m!==g){if(l>g){l=g;j=k(l);n.push([l,j])}else{n.push([c,a])}}return n}}});sc_require("models/dataref");sc_require("models/datarefs/continuous_equation");Smartgraphs.LinearEquation=Smartgraphs.ContinuousEquation.extend({initialise:function(){arguments.callee.base.apply(this,arguments)},getExpressionFunction:function(){var a=this.get("expressionForm");var b=this.get("params");switch(a){case"slope-intercept":return function(c){var e=b.slope*c+b.yIntercept;return e};case"general":return null;default:return null}},getInverseExpressionFunction:function(){var a=this.get("expressionForm");var b=this.get("params");switch(a){case"slope-intercept":return function(e){var c=(e-b.yIntercept)/b.slope;return c};case"general":return null;default:return null}}});sc_require("models/dataref");sc_require("models/datarefs/continuous_equation");Smartgraphs.SinusoidalEquation=Smartgraphs.ContinuousEquation.extend({initialise:function(){arguments.callee.base.apply(this,arguments)},getExpressionFunction:function(){var b=this.get("expressionForm");var a=this.get("angularFunction");var c=this.get("params");switch(b){case"sine-cosine":if(a==="sine"){return function(e){var f=c.amplitude*Math.sin(c.frequency*e+c.phase)+c.centerAmplitude;return f}}break;case"general":return null;default:return null}},getInverseExpressionFunction:function(){var b=this.get("expressionForm");var a=this.get("angularFunction");var c=this.get("params");switch(b){case"sine-cosine":if(a==="sine"){return function(f){var e=((Math.asin((f-c.centerAmplitude)/c.amplitude))-c.phase)/c.frequency;return e}}break;case"general":return null;default:return null}}});SC.Record.prototype.serialize=function(){return this.get("store").readDataHash(this.get("storeKey"))};Smartgraphs.ResponseTemplate=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",activity:SC.Record.toOne("Smartgraphs.Activity",{inverse:"pages",isMaster:YES,aggregate:YES}),templateString:SC.Record.attr(String),fieldTypes:SC.Record.attr(Array),fieldChoicesList:SC.Record.attr(Array),intialValues:SC.Record.attr(Array),values:[]});Smartgraphs.Variable=SC.Record.extend({url:SC.Record.attr(String),primaryKey:"url",name:SC.Record.attr(String),activity:SC.Record.toOne("Smartgraphs.Activity",{inverse:"variables",isMaster:YES,aggregate:YES}),value:SC.Record.attr(String)});Smartgraphs.ResourceLoader={loadResources:function(){var b=this.get("subordinateResources");for(var a=0,c=b.get("length");a<c;a++){b[a].record=null}var e=this.get("masterResource");e.record=e.load(this);this._watchedRecords=[];this.watch(e.record);return this.checkResourceStatuses()},watch:function(a){this._watchedRecords.push(a);a.addObserver("status",this,this.checkResourceStatuses)},checkResourceStatuses:function(){var a=this.get("masterResource").record.get("status");if(a&SC.Record.READY){return this.checkSubordinateResources()}else{if(a&SC.Record.ERROR){this.cleanupLoading();if(this.resourceLoadingError){this.resourceLoadingError()}return YES}return NO}},checkSubordinateResources:function(){var e,b=this.get("subordinateResources");for(var a=0,c=b.get("length");a<c;a++){e=b[a];if(e.record===null){e.record=e.load(this);this.watch(e.record)}}if(this.subordinateResourcesAreReady()){this.cleanupLoading();this.resourcesDidLoad();return YES}if(this.subordinateResourcesHaveErrors()){this.cleanupLoading();if(this.resourceLoadingError){this.resourceLoadingError()}return YES}return NO},cleanupLoading:function(){this._watchedRecords.forEach(function(a){a.removeObserver("status",this,this.checkResourceStatuses)},this);this._watchedRecords=[]},subordinateResourcesAreReady:function(){var c=this.get("subordinateResources");for(var a=0,b=c.get("length");a<b;a++){if(c[a].record===null||!(c[a].record.get("status")&SC.Record.READY)){return NO}}return YES},subordinateResourcesHaveErrors:function(){var c=this.get("subordinateResources");for(var a=0,b=c.get("length");a<b;a++){if(c[a].record&&(c[a].record.get("status")&SC.Record.ERROR)){return YES}}return NO},cancelLoading:function(){this.cleanupLoading()}};sc_require("states/mixins/resource_loader");Smartgraphs.statechartDef=SC.Statechart.extend({trace:Smartgraphs.trace,init:function(){arguments.callee.base.apply(this,arguments);this.invokeLast(function(){this.sendAction=function(c,b,a){var e=this.get("trace");if(e){console.log("BEGIN sendAction %s",c)}this.sendEvent(c,b,a);if(e){console.log("END sendAction %s",c)}};if(this.get("trace")){console.log("BEGIN LOGGING ACTIONS:")}})},shouldEnterSubstatesAfterInit:YES,rootState:SC.State.design({initialSubstate:"START",START:SC.State.design({enterState:function(){if(this.getPath("statechart.shouldEnterSubstatesAfterInit")){this.gotoState("LOGIN")}}}),LOGIN:SC.State.design({enterState:function(){Smartgraphs.userController.set("content",Smartgraphs.store.find(Smartgraphs.User,"default"));this.gotoState("READY")}}),READY:SC.State.design({initialSubstate:"READY_DEFAULT",READY_DEFAULT:SC.State.design({enterState:function(){SC.routes.add("*activityId",this,"route")},route:function(a){if(a.activityId){Smartgraphs.statechart.sendAction("openActivity",this,{id:a.activityId})}else{Smartgraphs.statechart.sendAction("loadWindowsAuthoredActivityJSON",this)}}}),openActivity:function(b,a){var c=Smartgraphs.activityController.get("content");if(c&&c.get("id")===a.id){return YES}Smartgraphs.activityController.set("content",Smartgraphs.get("rootStore").find(Smartgraphs.Activity,a.id));this.gotoState("LOADING_ACTIVITY");return YES},loadWindowsAuthoredActivityJSON:function(a){var b=window.authoredActivityJSON,c=b.activity.url;Smartgraphs.activityDocs[c]=b;Smartgraphs.activityController.set("content",Smartgraphs.get("rootStore").find(Smartgraphs.Activity,c));this.gotoState("LOADING_ACTIVITY");return YES},LOADING_ACTIVITY:SC.State.design(Smartgraphs.ResourceLoader,{masterResource:{load:function(){return Smartgraphs.activityController.get("content")}},subordinateResources:[],enterState:function(){if(Smartgraphs.loadingActivityController.get("openAuthorViewAfterLoading")){Smartgraphs.toolbarController.showRunButton()}else{Smartgraphs.toolbarController.showEditButton()}if(this.loadResources()){return}else{Smartgraphs.appWindowController.showActivityLoadingView()}},exitState:function(){this.cancelLoading()},resourcesDidLoad:function(){this.gotoState("ACTIVITY_LOADED")},resourceLoadingError:function(){this.gotoState("ERROR_LOADING_ACTIVITY")},openActivity:function(b,a){return(a.id===Smartgraphs.activityController.getPath("content.id"))?YES:NO},openAuthorView:function(){Smartgraphs.loadingActivityController.set("openAuthorViewAfterLoading",YES);return YES},runActivity:function(){Smartgraphs.loadingActivityController.set("openAuthorViewAfterLoading",NO);return YES}}),ERROR_LOADING_ACTIVITY:SC.State.design({enterState:function(){Smartgraphs.appWindowController.showErrorLoadingActivityView()}}),ACTIVITY_LOADED:SC.State.design({initialSubstate:"DEFAULT",enterState:function(){if(Smartgraphs.loadingActivityController.get("openAuthorViewAfterLoading")){Smartgraphs.activityPagesController.set("content",Smartgraphs.activityController.get("pages"));Smartgraphs.activityPagesController.selectFirstPage();this.gotoState("AUTHOR")}else{this.gotoState("ACTIVITY")}},DEFAULT:SC.State.design(),ACTIVITY:SC.State.plugin("Smartgraphs.ACTIVITY"),ACTIVITY_DONE:SC.State.design(),AUTHOR:SC.State.plugin("Smartgraphs.AUTHOR"),showCredits:function(){Smartgraphs.creditsController.showCredits()}})})})});Smartgraphs.statechart=Smartgraphs.statechartDef.create();Smartgraphs.ACTIVITY=SC.State.extend({initialSubstate:"ACTIVITY_PAGE_START",enterState:function(){Smartgraphs.sessionController.beginSession();var a=Smartgraphs.activityController.get("pages"),b;Smartgraphs.activityPagesController.set("content",a);if(Smartgraphs.navigatedLocation&&Smartgraphs.navigatedLocation.activityId===Smartgraphs.activityController.get("id")){Smartgraphs.activityPagesController.selectPageId(Smartgraphs.navigatedLocation.pageId);b=Smartgraphs.activityPageController.get("content");if(b&&Smartgraphs.navigatedLocation.stepId){b.set("firstStep",Smartgraphs.store.find(Smartgraphs.ActivityStep,Smartgraphs.navigatedLocation.stepId))}}else{Smartgraphs.activityPagesController.selectFirstPage()}Smartgraphs.appWindowController.showActivityView()},exitState:function(){Smartgraphs.activityController.cleanup();Smartgraphs.sessionController.endSession()},ACTIVITY_PAGE_START:SC.State.design({enterState:function(){Smartgraphs.activityStepController.set("content",Smartgraphs.activityPageController.get("firstStep"));this.gotoState("ACTIVITY_STEP")}}),ACTIVITY_STEP:SC.State.plugin("Smartgraphs.ACTIVITY_STEP"),ACTIVITY_STEP_SUBMITTED:SC.State.plugin("Smartgraphs.ACTIVITY_STEP_SUBMITTED"),ACTIVITY_PAGE_DONE:SC.State.design({enterState:function(){if(Smartgraphs.activityPagesController.get("isLastPage")){this.gotoState("ACTIVITY_DONE")}else{Smartgraphs.activityController.set("canGotoNextPage",YES)}},exitState:function(){Smartgraphs.activityController.set("canGotoNextPage",NO);Smartgraphs.activityPageController.cleanup()},gotoNextPage:function(){Smartgraphs.activityPagesController.selectNextPage();this.gotoState("ACTIVITY_PAGE_START")}}),openAuthorView:function(){this.gotoState("AUTHOR");return YES},openActivity:function(){Smartgraphs.loadingActivityController.set("openAuthorViewAfterLoading",NO);return NO}});Smartgraphs.ACTIVITY_STEP=SC.State.extend({enterState:function(){this.invokeLast(this.didEnterState)},didEnterState:function(){Smartgraphs.activityStepController.begin()},exitState:function(){Smartgraphs.responseTemplateController.set("editingShouldBeEnabled",NO)},initialSubstate:"ACTIVITY_STEP_DEFAULT",ACTIVITY_STEP_DEFAULT:SC.State.design(),SENSOR_TOOL:SC.State.plugin("Smartgraphs.SENSOR_TOOL"),TAGGING_TOOL:SC.State.plugin("Smartgraphs.TAGGING_TOOL"),disableSubmission:function(){Smartgraphs.activityStepController.disableSubmission();return YES},enableSubmission:function(){Smartgraphs.activityStepController.enableSubmission();return YES},submitStep:function(){if(Smartgraphs.activityStepController.get("canSubmit")){this.gotoState("ACTIVITY_STEP_SUBMITTED")}return YES},gotoNextPage:function(){this.submitStep();this.invokeLast(function(){Smartgraphs.statechart.sendAction("gotoNextPage")})},taggingToolDidUpdateTag:function(b,a){Smartgraphs.sendActionToTableControllers("taggingToolDidUpdateTag",b,a);return YES}});Smartgraphs.ACTIVITY_STEP_SUBMITTED=SC.State.extend({enterState:function(){var c=Smartgraphs.activityStepController.get("content");Smartgraphs.activityStepController.handleSubmission();var b=Smartgraphs.activityStepController.get("content");if(b===c&&c&&c.get("isFinalStep")){var a=this;this.invokeLast(function(){a.gotoState("ACTIVITY_PAGE_DONE")})}},exitState:function(){Smartgraphs.activityStepController.cleanup()},gotoStep:function(b,a){var c=Smartgraphs.store.find(Smartgraphs.ActivityStep,a.stepId);Smartgraphs.activityStepController.set("content",c);this.gotoState("ACTIVITY_STEP");return YES}});Smartgraphs.AUTHOR=SC.State.extend({initialSubstate:"AUTHOR_DEFAULT",enterState:function(){Smartgraphs.appWindowController.showAuthorView();Smartgraphs.toolbarController.showRunButton();Smartgraphs.activityOutlineController.set("isSelectable",YES);Smartgraphs.activityViewController.set("enableBackAndForward",YES)},exitState:function(){Smartgraphs.activityOutlineController.set("isSelectable",NO);Smartgraphs.activityViewController.set("enableBackAndForward",NO)},AUTHOR_DEFAULT:SC.State.design({}),ERROR_SAVING_ACTIVITY:SC.State.design({enterState:function(){SC.AlertPane.error("Could not save activity","Could not save the activity. Someone else may have edited the activity you were working on. Try reloading the page and redoing your edits.")}}),openActivity:function(){Smartgraphs.loadingActivityController.set("openAuthorViewAfterLoading",YES);return NO},runActivity:function(){Smartgraphs.loadingActivityController.set("openAuthorViewAfterLoading",NO);this.gotoState("LOADING_ACTIVITY");return YES},gotoNextPage:function(){Smartgraphs.activityPagesController.selectNextPage();return YES},gotoPreviousPage:function(){Smartgraphs.activityPagesController.selectPreviousPage();return YES},saveActivity:function(){Smartgraphs.activityController.save();return YES},errorSavingActivity:function(){this.gotoState("ERROR_SAVING_ACTIVITY");return YES},outlineControllerDidNavigate:function(){Smartgraphs.navigatedLocation={activityId:Smartgraphs.activityController.get("id"),pageId:Smartgraphs.activityPageController.get("id"),stepId:Smartgraphs.activityStepController.get("id")}}});Smartgraphs.Tool=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);Smartgraphs.Tool.register(this.get("name"),this,this.get("setup"),this.get("state"))},graphControllerForPane:function(a){return Smartgraphs.activityViewController.graphControllerForPane(a)},tableControllerForPane:function(a){return Smartgraphs.activityViewController.tableControllerForPane(a)},otherPaneFor:function(a){return Smartgraphs.activityViewController.otherPaneFor(a)},getAnnotation:function(a){return Smartgraphs.activityObjectsController.findAnnotation(a)},getDatadef:function(a){return Smartgraphs.activityObjectsController.findDatadef(a)},graphControllerForState:function(a){return a.getPath("statechart.owner")},paneForState:function(a){return Smartgraphs.activityViewController.paneForController(a.getPath("statechart.owner"))}});Smartgraphs.Tool.tools={};Smartgraphs.Tool.register=function(b,c,a,e){Smartgraphs.Tool.tools[b]={context:c,setup:a,state:e}};Smartgraphs.Tool.start=function(b,c){var a=Smartgraphs.Tool.tools[b];if(!a){throw"Could not start tool '"+b+"' (tool is not defined)."}a.setup.call(a.context,c)};sc_require("tools/tool");Smartgraphs.animationTool=Smartgraphs.Tool.create({name:"animation",state:"ANIMATION_TOOL",graphViewForPane:function(a){return Smartgraphs.activityPage.getPath(Smartgraphs.activityViewController.firstOrSecondFor(a)+"GraphPane.graphView")},defaultDuration:3000,defaultChannelWidth:70,defaultLoop:false,defaultBackgroundImageURL:"",duration:3000,channelWidth:70,loop:false,backgroundImageURL:"",staticImages:[],animations:[],linkedAnimationsByPane:{},playCount:0,_mainPane:null,mainPane:function(){return this._mainPane}.property(),_linkedPanes:[],linkedPanes:function(){return this._linkedPanes}.property(),_isAnimating:NO,isAnimating:function(){return this._isAnimating}.property(),linkedGraphs:function(){var c,b=this.get("linkedAnimationsByPane"),a=[];for(c in b){if(!b.hasOwnProperty(c)){continue}a.push(this.graphViewForPane(c))}return a}.property(),allAnimatedGraphs:function(){var a=this.get("linkedGraphs");a.insertAt(0,this.graphViewForPane(this.get("mainPane")));return a}.property(),getImageURL:function(b){if(b.charAt(0)==="/"){return b}var c="/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/finish.png",a=c.match(/^(.*)finish.png(.*)$/);return a.length>1?a[1]+b+a[2]:null},setup:function(c){c=c||{},self=this;var j=Smartgraphs.activityViewController.validPaneFor(c.pane),f=c.animations||[],a=c.linkedAnimations||[],e=c.staticImages||[],g={},h=[],b;if(!j){return}this.set("loop",c.loop===undefined?this.get("defaultLoop"):c.loop);this.set("backgroundImageURL",this.getImageURL(c.backgroundImage||this.get("defaultBackgroundImageURL")));this.set("duration",c.duration||this.get("defaultDuration"));this.set("channelWidth",c.channelWidth||this.get("defaultChannelWidth"));this.set("playCount",0);this.set("hideGraph",c.hideGraph||NO);e.forEach(function(n){var m=n.instances||[],k=null,l;for(l=0;l<m.length;l++){k=m[l];k.image=self.getImageURL(n.image||"");k.xOffset=n.xOffset||0;k.yOffset=n.yOffset||0;k.width=n.width||70;k.height=n.height||30;h.push(k)}});this.set("staticImages",h);this.set("animations",f.map(function(k){return{datadefName:k.data,foregroundImageURL:self.getImageURL(k.image||""),xOffset:k.xOffset||0,yOffset:k.yOffset||0,width:k.width||70,height:k.height||30}}));a.forEach(function(k){var m=Smartgraphs.activityViewController.validPaneFor(k.pane),l=k.animations||[];if(!m){throw"bad pane argument '@%' in linkedAnimations".fmt(m)}if(g[m]){throw"repeated set of linkedAnimations for pane '%@'".fmt(m)}g[m]=l.map(function(n){return{datadefName:n.data}})});this.set("linkedAnimationsByPane",g);this._mainPane=j;this._isAnimating=NO;this.notifyPropertyChange("isAnimating");b=this.graphControllerForPane(c.pane);b.sendAction("animationToolStartTool")},clearSetup:function(){this._mainPane=null;this.set("animations",[]);this.set("linkedAnimationsByPane",{});this.set("staticImages",[]);this.set("playCount",0)},makeAnimationInfoObject:function(){return SC.Object.create({hasAnimation:YES,isFinished:NO,duration:null,loop:null,channelWidth:null,animations:[],staticImages:[],backgroundImageURL:"",linkedAnimations:[]})},setupGraphControllers:function(){var b=this.get("linkedAnimationsByPane"),e,a,c;e=this.get("mainPane");a=this.graphControllerForPane(e);c=this.makeAnimationInfoObject();this.copyPropertiesTo(c,["channelWidth","backgroundImageURL","duration","loop","animations","staticImages","hideGraph"]);this.set("animationInfo",c);a.set("animationInfo",c);for(e in b){if(!b.hasOwnProperty(e)){continue}a=this.graphControllerForPane(e);c=this.makeAnimationInfoObject();this.copyPropertiesTo(c,["duration","loop","channelWidth"]);c.set("linkedAnimations",b[e]);a.set("animationInfo",c)}},clearGraphControllers:function(){var b=this.get("linkedAnimationsByPane"),c,a;c=this.get("mainPane");a=this.graphControllerForPane(c);a.set("animationInfo",null);for(c in b){if(!b.hasOwnProperty(c)){continue}a=this.graphControllerForPane(c);a.set("animationInfo",null)}},copyPropertiesTo:function(b,c){var a=this;b.beginPropertyChanges();c.forEach(function(e){b.set(e,a.get(e))});b.endPropertyChanges()},startAnimating:function(){if(!this._mainPane||this._isAnimating){return NO}this._isAnimating=YES;this.notifyPropertyChange("isAnimating");this.setPath("animationInfo.isFinished",NO);this.get("allAnimatedGraphs").invoke("animate")},stopAnimating:function(){if(!this._mainPane||!this._isAnimating){return NO}this._isAnimating=NO;this.notifyPropertyChange("isAnimating");this.setPath("animationInfo.isFinished",NO);this.get("allAnimatedGraphs").invoke("stop")},clearAnimation:function(){this._isAnimating=NO;this.notifyPropertyChange("isAnimating");this.setPath("animationInfo.isFinished",NO);this.get("allAnimatedGraphs").invoke("reset")},markAnimationFinished:function(){this.setPath("animationInfo.isFinished",YES)}});sc_require("tools/tool");Smartgraphs.graphingTool=Smartgraphs.Tool.create({name:"graphing",state:"GRAPHING_TOOL",lineCount:0,pointMovedNumber:null,pointMoved:false,annotationName:null,datadefName:null,requestedCursorStyle:"default",graphLogicalBounds:{xmin:0,xmax:0,ymin:0,ymax:0},graphPane:null,pointRadius:null,setup:function(b){this.set("graphPane",b.pane);var f=this.graphControllerForPane(b.pane);var e=this.otherPaneFor(b.pane);var c=this.tableControllerForPane(e);c.setRoundingFunc("Fixed");f.graphingToolStartTool({annotationName:b.annotationName,shape:b.shape,datadefName:b.data});this.set("annotationName",b.annotationName);this.set("datadefName",b.data);this.getAnnotation(b.annotationName).set("isOverlayAnnotation",true);var a=this.graphViewForPane(b.pane);a._updateAllViews()},appendSketch:function(a,b){this.graphControllerForState(a).addAnnotation(b)},appendRepresentation:function(b,a){this.graphControllerForState(b).addDatadef(a)},hideGraphTitle:function(){var a=this.graphViewForPane(this.get("graphPane"));a.get("titleView").set("isVisible",false)},showGraphTitle:function(){var a=this.graphViewForPane(this.get("graphPane"));a.get("titleView").set("isVisible",true)},graphingStarting:function(a){var b=this.graphControllerForState(a);if(b&&b.graphingToolGraphingStarting){b.graphingToolGraphingStarting()}},graphingFinished:function(a){var b=this.graphControllerForState(a);if(b&&b.graphingToolGraphingFinished){b.graphingToolGraphingFinished()}},graphViewForPane:function(a){return Smartgraphs.activityPage.getPath(Smartgraphs.activityViewController.firstOrSecondFor(a)+"GraphPane.graphView")},showToolTip:function(a){var b=this.graphControllerForPane(this.get("graphPane"));b.set("toolTipVisibilityOverrideFromToolState",a)},coordinatesForPoint:function(a,c){var b=this.graphViewForPane(this.get("graphPane"));return b.coordinatesForPoint(a,c)},updateGraphLogicalBounds:function(){var a=this.graphViewForPane(this.get("graphPane"));this.set("graphLogicalBounds",a.graphCanvasView._getLogicalBounds())},plotPoint:function(a){if(!this.isPointOverlap(a)){var b=this.getDatadef(this.get("datadefName"));b.addPoint(a.x,a.y)}},isPointOverlap:function(k){var c=this.coordinatesForPoint(k.x,k.y);var g=this.getPointRadius();var j=this.getDatadef(this.get("datadefName"));var b=j.get("points");var h=this.get("pointMovedNumber");for(var f=0;f<b.length;f++){if(f===h){continue}var e=this.coordinatesForPoint(b[f][0],b[f][1]);var a=Math.sqrt(Math.pow(e.x-c.x,2)+Math.pow(e.y-c.y,2));if(a<g+g){return true}}return false},getPointRadius:function(){var a=this.get("pointRadius");if(a===null){this.setPointRadius();a=this.get("pointRadius")}return a},setPointRadius:function(){var b=this.graphViewForPane(this.graphPane);var e=b.dataHolder.childViews;for(var c=0;c<e.length;c++){if(e[c].childViews.length>0){var a=e[c].childViews[0].get("notHoveredRadius");this.set("pointRadius",a);return}}},drawLineThroughPoints:function(f,c){if(f[0]>c[0]){var b=c;c=f;f=b}var e=this.getLineEndPointsArray(f,c);var a=this.getAnnotation(this.get("annotationName"));a.addPoint(e[0][0],e[0][1]);a.addPoint(e[1][0],e[1][1]);this.set("lineCount",this.get("lineCount")+1)},getLinePointWithinLogicalBounds:function(e,b,h){var a,g;var f=this.get("graphLogicalBounds");a=e[0];g=e[1];if(a<f.xMin){a=f.xMin;g=b*a+h}else{if(a>f.xMax){a=f.xMax;g=b*a+h}}if(g<f.yMin){g=f.yMin;a=(g-h)/b}else{if(g>f.yMax){g=f.yMax;a=(g-h)/b}}return[a,g]},getLineEndPointsArray:function(l,h){var k,f,g,e,n,b,j;k=this.get("graphLogicalBounds");if(h[0]===l[0]){e=l[0];n=k.yMin;b=e;j=k.yMax;return[[e,n],[b,j]]}f=(h[1]-l[1])/(h[0]-l[0]);g=h[1]-f*h[0];if(f===0){e=k.xMin;n=l[1];b=k.xMax;j=n;return[[e,n],[b,j]]}var a;e=k.xMin;n=f*e+g;a=this.getLinePointWithinLogicalBounds([e,n],f,g);e=a[0];n=a[1];j=f>0?k.yMax:k.yMin;b=(j-g)/f;a=this.getLinePointWithinLogicalBounds([b,j],f,g);b=a[0];j=a[1];return[[e,n],[b,j]]}});sc_require("tools/tool");Smartgraphs.labelTool=Smartgraphs.Tool.create({name:"label",state:"LABEL_TOOL",graphControllerForState:function(a){return a.getPath("statechart.owner")},setup:function(e){var a=this.graphControllerForPane(e.pane),g=e.labelName||e.labelSetName,c=e.datadefName,b=e.markOnDataPoints,f=e.maxNoOfLabels,h=e.allowCoordinatesChange;a.labelToolStartTool({annotationName:g,markOnDataPoints:b,datadefName:c,maxNoOfLabels:f,allowCoordinatesChange:h,pane:e.pane})},appendLabel:function(b,a){this.graphControllerForState(b).addAnnotation(a)},appendLabelSet:function(a,b){this.graphControllerForState(a).addAnnotation(b)},removeLabel:function(b,a){this.graphControllerForState(b).removeAnnotation(a)},addLabelsStarting:function(b){var a=this.graphControllerForState(b);if(a&&a.labelToolAddLabelsStarting){a.labelToolAddLabelsStarting()}},addLabelsFinished:function(b){var a=this.graphControllerForState(b);if(a&&a.labelToolAddLabelsFinished){a.labelToolAddLabelsFinished()}},graphViewForPane:function(a){return Smartgraphs.activityPage.getPath(Smartgraphs.activityViewController.firstOrSecondFor(a)+"GraphPane.graphView")}});sc_require("tools/tool");Smartgraphs.predictionTool=Smartgraphs.Tool.create({name:"prediction",state:"PREDICTION_TOOL",setup:function(b){var a=this.graphControllerForPane(b.pane);a.predictionToolStartTool({annotationName:b.annotationName,uiBehavior:b.uiBehavior})},appendSketch:function(a,b){this.graphControllerForState(a).addAnnotation(b)},predictionStarting:function(b){var a=this.graphControllerForState(b);if(a&&a.predictionToolPredictionStarting){a.predictionToolPredictionStarting()}},predictionFinished:function(b){var a=this.graphControllerForState(b);if(a&&a.predictionToolPredictionFinished){a.predictionToolPredictionFinished()}}});Smartgraphs.SENSOR_TOOL=SC.State.extend({initialSubstate:"SENSOR_START",exitState:function(){Smartgraphs.sensorTool.stopRecording();Smartgraphs.sensorTool.get("graphController").hideControls()},sensorHasLoaded:function(){this.gotoState("SENSOR_LOADED");return YES},waitForSensorToLoad:function(){this.gotoState("SENSOR_LOADING");return YES},SENSOR_START:SC.State.design({enterState:function(){Smartgraphs.sensorAppletController.append({listenerPath:"Smartgraphs.sensorTool"});if(Smartgraphs.sensorTool.get("sensorIsReady")){Smartgraphs.statechart.sendAction("sensorHasLoaded")}else{Smartgraphs.statechart.sendAction("waitForSensorToLoad")}}}),SENSOR_LOADING:SC.State.design({enterState:function(){Smartgraphs.sensorTool.get("graphController").showSensorLoadingView()}}),SENSOR_LOADED:SC.State.design({enterState:function(){Smartgraphs.sensorTool.get("graphController").revealAllControls();Smartgraphs.sensorTool.get("graphController").showControls()},initialSubstate:"SENSOR_READY",SENSOR_READY:SC.State.design({enterState:function(){Smartgraphs.sensorTool.get("graphController").highlightStartControl()},startControlWasClicked:function(){return this.startSensor()},startSensor:function(){this.gotoState("SENSOR_RECORDING");return YES}}),SENSOR_RECORDING:SC.State.design({enterState:function(){Smartgraphs.sensorTool.startRecording();Smartgraphs.sensorTool.get("graphController").highlightStopControl()},exitState:function(){Smartgraphs.sensorTool.stopRecording()},stopControlWasClicked:function(){return this.stopSensor()},stopSensor:function(){this.gotoState("SENSOR_STOPPED");return YES}}),SENSOR_STOPPED:SC.State.design({enterState:function(){Smartgraphs.sensorTool.get("graphController").highlightClearControl()},clearControlWasClicked:function(){return this.clearSensor()},clearSensor:function(){Smartgraphs.sensorTool.clearRecordedData();this.gotoState("SENSOR_READY");return YES}})})});sc_require("tools/tool");Smartgraphs.sensorTool=Smartgraphs.Tool.create({name:"sensor",state:"SENSOR_TOOL",datadefName:null,datadef:null,controlsPane:null,graphController:null,xMin:null,xMax:null,sensorIsReady:NO,nSamples:0,downsampleRatio:2,dt:0.1,setup:function(b){var c=this.getDatadef(b.data),h=Smartgraphs.activityViewController.validPaneFor(b.controlsPane),g=this.graphControllerForPane(h),e,a,f;if(!c||!h){console.error("invalid setup for sensorTool");return}if(!g){console.error("sensorTool setup couldn't find correct graph controller");return}this.set("datadef",c);this.set("datadefName",c.get("name"));this.set("controlsPane",h);this.set("graphController",g);e=g.get("xAxis");this.set("xMin",SC.none(b.xMin)?e&&e.get("min"):b.xMin);this.set("xMax",SC.none(b.xMax)?e&&e.get("max"):b.xMax);Smartgraphs.statechart.gotoState(this.get("state"))},clearSetup:function(){this.set("datadefName",null);this.set("datdef",null);this.set("controlsPane",null);this.set("graphController",null)},startRecording:function(){this.setPath("datadef.isStreaming",YES);this._nSamples=0;Smartgraphs.sensorAppletController.start()},stopRecording:function(){this.setPath("datadef.isStreaming",NO);Smartgraphs.sensorAppletController.stop()},clearRecordedData:function(){this.get("datadef").clearPoints()},sensorsReady:function(){SC.RunLoop.begin();this.set("sensorIsReady",YES);Smartgraphs.statechart.sendAction("sensorHasLoaded");SC.RunLoop.end()},dataReceived:function(e,c,h){var f=this.get("dt"),g=this.get("downsampleRatio"),a,j,b;for(b=0;b<c;b++){a=this._nSamples*f;j=h[b];if(a>this.get("xMax")){setTimeout(function(){SC.RunLoop.begin();Smartgraphs.statechart.sendAction("stopSensor");SC.RunLoop.end()},10);return}if(this._nSamples%g===0){SC.RunLoop.begin();this.get("datadef").addPoint(a,j);SC.RunLoop.end()}this._nSamples++}},dataStreamEvent:function(){}});Smartgraphs.TAGGING_TOOL=SC.State.extend({enterState:function(){Smartgraphs.statechart.sendAction("disableSubmission");Smartgraphs.taggingTool.clearPoint()},exitState:function(){Smartgraphs.taggingTool.clearSetup()},dataPointSelected:function(c,b){var a=Smartgraphs.taggingTool.get("datadefName"),e=b.dataRepresentation;if(e&&e.getPath("datadef.name")===a){Smartgraphs.taggingTool.setPoint(b.x,b.y);Smartgraphs.statechart.sendAction("enableSubmission")}},removeLabel:function(c,b){var a=Smartgraphs.taggingTool.labelName;if(a===b.label.get("name")){Smartgraphs.statechart.sendAction("disableSubmission")}},mouseDownAtPoint:function(e,c){var b=Smartgraphs.taggingTool.get("datadefName");var g=e.getDataRepresentation(b);var a=g.getNearestPoint(c);if(a){var f=e.getDataRepresentation(b);f.showSinglePoint(a.x,a.y);Smartgraphs.taggingTool.setPoint(a.x,a.y);Smartgraphs.statechart.sendAction("enableSubmission")}}});sc_require("tools/tool");Smartgraphs.taggingTool=Smartgraphs.Tool.create({name:"tagging",state:"TAGGING_TOOL",datadefName:null,tagName:null,tag:function(){return Smartgraphs.activityObjectsController.findTag(this.get("tagName"))||null}.property("tagName"),setup:function(a){this.set("datadefName",a.data);this.set("tagName",a.tag);this.set("labelName",a.labelName);var b=Smartgraphs.activityObjectsController.findDatadef(this.get("datadefName"));if(b){b.set("isActive",YES)}Smartgraphs.statechart.gotoState(this.get("state"))},clearSetup:function(){this.set("tagName",null);this.set("datadefName",null)},setPoint:function(b,c){var a=this.get("tag");if(!a){return}a.beginPropertyChanges();a.set("datadefName",this.get("datadefName"));a.set("x",b);a.set("y",c);a.endPropertyChanges();Smartgraphs.statechart.sendAction("taggingToolDidUpdateTag",this,a)},clearPoint:function(){var a=this.get("tag");if(!a){return}a.beginPropertyChanges();a.set("datadefName",null);a.set("x",null);a.set("y",null);a.endPropertyChanges();Smartgraphs.statechart.sendAction("taggingToolDidUpdateTag",this,a)}});Smartgraphs.AxisView=RaphaelViews.RaphaelView.extend({displayProperties:"axis otherAxis graphView.graphCanvasView.frame".w(),render:function(a,b){if(!b){this.drawAxis();this.drawLabel()}},didCreateLayer:function(){this._label=null;this.invokeLast(this.drawLabel);this.invokeLast(this.drawAxis)},drawAxis:function(){if(this._axis){this._axis.remove()}var c=this.get("axis"),f=c&&c.get("min"),k=c&&c.get("max"),b=c&&c.get("nSteps"),g=this.get("otherAxis"),a=this.get("graphView"),h=a.get("graphCanvasView"),m=h._getScreenBounds(),e=this.get("raphaelCanvas"),l,j;if(!c){return}if(e.canvas.style.display!=="block"){e.canvas.style.display="block"}if(this.get("type")==="y"){l=g.get("min")<0&&0<g.get("max")?a.coordinatesForPoint(0,0).x:m.xLeft;this._axis=e.g.axis(l,m.yBottom,m.plotHeight,f,k,b,1)}else{if(this.get("type")==="x"){j=g.get("min")<0&&0<g.get("max")?a.coordinatesForPoint(0,0).y:m.yBottom;this._axis=e.g.axis(m.xLeft,j,m.plotWidth,f,k,b,0)}}this._axis.all[0].attr({stroke:"#aaa"});this._axis.all[1].attr({fill:"#333"})},drawLabel:function(){var a=this.get("graphView"),l=a.get("padding"),c=a.getPath("graphCanvasView.frame"),g=this.get("axis"),e=g&&g.get("label"),b=g&&g.getPath("units.pluralName"),f="← "+(b?"%@ (%@)".fmt(e,b):e)+" →",h,k,j,m;if(!g){return}if(this.get("type")==="x"){k=(l.left+c.width-l.right)/2;j=c.height-l.bottom+25;m=0}else{k=l.left-30;j=(l.top+c.height-l.bottom)/2;m=270}if(this._label){this._label.attr({text:f,x:k,y:j})}else{h=this.get("raphaelCanvas");if(h.canvas.style.display!=="block"){h.canvas.style.display="block"}this._label=h.text(k,j,f).attr({font:"14px Arial, sans-serif",fill:"#333333"}).rotate(m)}}});Smartgraphs.ConnectedLineView=RaphaelViews.RaphaelView.extend({isAnimatable:YES,strokeOpacity:0.7,notDimmedColorBinding:"*item.color",dimmedColor:"#cccccc",notDimmedStrokeWidth:3,dimmedStrokeWidth:2,dataRepresentation:SC.outlet("item.dataRepresentation"),isDimmedBinding:".dataRepresentation.isDimmed",isDimmedBindingDefault:SC.Binding.oneWay(),isHiddenForAnimation:NO,strokeWidth:function(){return this.get("isDimmed")?this.get("dimmedStrokeWidth"):this.get("notDimmedStrokeWidth")}.property("isDimmed","dimmedStrokeWidth","notDimmedStrokeWidth"),color:function(){return this.get("isDimmed")?this.get("dimmedColor"):this.get("notDimmedColor")}.property("isDimmed","dimmedColor","notDimmedColor"),displayProperties:"item.points.[] color strokeWidth isHiddenForAnimation".w(),renderCallback:function(c,b,a){return c.path(b).attr(a)},render:function(b,a){var c=this.get("graphView"),o=this.get("item"),m=(o?o.get("points"):null)||[{x:0,y:0}],g=[],k,j,e,f,n,l,h;for(e=0,f=m.get("length");e<f;e++){k=m.objectAt(e);j=c.coordinatesForPoint(k[0],k[1])||{x:0,y:0};g.push(e===0?"M":"L");g.push(j.x);g.push(" ");g.push(j.y)}n=g.join("")||"M0 0";l={"clip-rect":c.get("clipRect"),stroke:this.get("color"),"stroke-width":this.get("strokeWidth"),"stroke-opacity":this.get("isHiddenForAnimation")?0:this.get("strokeOpacity")};if(a){b.callback(this,this.renderCallback,n,l)}else{h=b.raphael();h.attr({d:n}).attr(l)}}});Smartgraphs.CreditsPane=SC.View.extend({classNames:"creditsBox".w(),projectInfo:"This software is based upon work supported by the National Science Foundation under Grant No. DRL-0918522. Any opinions, findings, conclusions, or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation. The software is copyrighted by the <a target='_blank' href='http://www.concord.org/software-license' title='The Concord Consortium Software License'>Concord Consortium under the GNU Lesser General Public License</a>, which allows you to use and to distribute this software. ",authorName:"The SmartGraphs team at the Concord Consortium. ",licenseInfo:"The activity is available under the Creative Commons <a target='_blank' href='http://creativecommons.org/licenses/by-sa/3.0/' title='Creative Commons Attribution-ShareAlike 3.0 Unported License'>Attribution-Share Alike 3.0 Unported license</a>, which allows you to use and to distribute this activity.",render:function(a,b){a.push("<div id='credits-container'>","<h2>SmartGraphs is a project of The Concord Consortium</h2>","<div id='credits-logos'>","  <img id='credits-sg-logo' src='","/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/smartgraphs.png","' alt='SmartGraphs' title='SmartGraphs' />","  <img id='credits-cc-logo' src='","/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/concord.png","'alt='The Concord Consortium' title='The Concord Consortium' />","</div>","<p id='credits-projectInfo'>",this.get("projectInfo"),"</p>","<hr />","<h2>This SmartGraphs activity was developed by:</h2>","<p id='credits-authorName'>",this.get("authorName"),"</p>","<p id='credits-licenseInfo'>",this.get("licenseInfo"),"</p>","</div>");arguments.callee.base.apply(this,arguments)}});Smartgraphs.CreditsPane.show=function(f){var e,c,b,a;e={layout:{right:0,left:0,top:0,bottom:0},childViews:"closeButton".w(),closeButton:SC.ButtonView.design({layout:{centerX:0,bottom:5,height:24,width:80},title:"close",isVisible:YES,isEnabled:YES,action:function(){c.remove()}})};if(f){e.licenseInfo=f}a=Smartgraphs.activityController.get("authorName");if(a){e.authorName=a}c=SC.PanelPane.create({layout:{centerX:0,centerY:0,height:450,width:580},contentView:Smartgraphs.CreditsPane.design(e)});b=c.append();return b};sc_require("mixins/rearrangeable_parent_view");sc_require("mixins/pointer_events_support");Smartgraphs.GraphView=SC.View.extend({xAxisBinding:"*graphController.xAxis",yAxisBinding:"*graphController.yAxis",graphableDataObjectsBinding:"*graphController.graphableDataObjects",annotationListBinding:"*graphController.annotationList",requestedCursorStyleBinding:"*graphController.requestedCursorStyle",arrLegendsBinding:"*graphController.arrLegends",animationInfoBinding:"*graphController.animationInfo",showAnimationBinding:"*animationInfo.hasAnimation",channelWidthBinding:"*animationInfo.channelWidth",hideGraphBinding:"*animationInfo.hideGraph",inputAreaView:SC.outlet("graphCanvasView.axesView.inputAreaView"),xAxisView:SC.outlet("graphCanvasView.axesView.xAxisView"),yAxisView:SC.outlet("graphCanvasView.axesView.yAxisView"),dataHolder:SC.outlet("graphCanvasView.dataHolder"),annotationsHolder:SC.outlet("graphCanvasView.annotationsHolder"),overlayAnnotationsHolder:SC.outlet("graphCanvasView.overlayAnnotationsHolder"),arrLabelsLayout:[],mouseOverInputArea:false,padding:{top:15,right:15,bottom:45,left:50},childViews:"titleView tooltipView graphCanvasView topAnnotationsHolder legendView".w(),init:function(){arguments.callee.base.apply(this,arguments);this.padding=SC.copy(this.padding);this._viewsByClassAndItem={};this.set("arrLabelsLayout",[])},animate:function(){this.get("graphCanvasView").animate()},stop:function(){this.get("graphCanvasView").stop()},reset:function(){this.get("graphCanvasView").reset()},render:function(a,c){var b=this.renderer;if(this.get("hideGraph")){a.setClass("hideGraph",YES)}else{a.setClass("hideGraph",NO)}if(this.createRenderer&&b){if(c){b.render(a)}else{b.update()}}else{if(c){this.renderChildViews(a,c)}}},showAnimationDidChange:function(){var b=this.get("showAnimation"),a=this.get("channelWidth");this.padding.left=this.padding.left+(b?a:0);this.replaceLayer()}.observes("showAnimation"),viewDidResize:function(){arguments.callee.base.apply(this,arguments);var a=this.get("graphController");if(a){a.sendAction("graphViewDidResize")}this.replaceLayer()},annotationListDidChange:function(){this._itemListsDidChange()}.observes("*annotationList.[]"),graphableDataObjectsDidChange:function(){this._itemListsDidChange()}.observes("*graphableDataObjects.[]"),arrLegendElementsDidChange:function(){this.legendView.initialize(this.get("arrLegends"))}.observes("*arrLegends.[]"),_itemListsDidChange:function(){var k,n,f,b,m={},h,a=["data","annotation"],e,c,g;for(c=0;c<a.length;c++){h=a[c];k=this.get(h==="data"?"graphableDataObjects":"annotationList");for(e=0,g=k.get("length");e<g;e++){n=k.objectAt(e);if(n.get("isModifierAnnotation")){continue}f=SC.guidFor(n.constructor);b=SC.guidFor(n);if(m[f]===undefined){m[f]={}}m[f][b]=n;if(!this._viewsByClassAndItem[f]||!this._viewsByClassAndItem[f][b]){this._addViewForItem(n,h)}}}var l;for(f in this._viewsByClassAndItem){if(this._viewsByClassAndItem.hasOwnProperty(f)){for(b in this._viewsByClassAndItem[f]){if(this._viewsByClassAndItem[f].hasOwnProperty(b)){l=this._viewsByClassAndItem[f][b];if(!m[f]||!m[f][b]){this._removeView(l)}}}}}},_addViewForItem:function(e,f){var b=SC.guidFor(e.constructor),g=SC.guidFor(e),a=e.get("viewClass").create({graphView:this,controller:this.get("graphController"),item:e,itemType:f}),c=(this.getPath("animationInfo.animations")||[]).concat(this.getPath("animationInfo.linkedAnimations")).getEach("datadefName");if(f==="data"){a.set("isHiddenForAnimation",c.indexOf(e.getPath("dataRepresentation.datadef.name"))>=0);this.get("dataHolder").appendChild(a)}else{if(f==="annotation"){if(e.get("isOverlayAnnotation")){this.get("overlayAnnotationsHolder").appendChild(a)}else{if(e.get("isTopAnnotation")){this.get("topAnnotationsHolder").appendChild(a)}else{this.get("annotationsHolder").appendChild(a)}}}}if(this._viewsByClassAndItem[b]===undefined){this._viewsByClassAndItem[b]={}}this._viewsByClassAndItem[b][g]=a},_updateAllViews:function(){var k,n,f,b,h,a=["data","annotation"],e,c,g;for(c=0;c<a.length;c++){h=a[c];k=this.get(h==="data"?"graphableDataObjects":"annotationList");for(e=0,g=k.get("length");e<g;e++){n=k.objectAt(e);if(n.get("isModifierAnnotation")){continue}f=SC.guidFor(n.constructor);b=SC.guidFor(n);if(this._viewsByClassAndItem[f]&&this._viewsByClassAndItem[f][b]){var l=this._viewsByClassAndItem[f][b];var m=(this.getPath("animationInfo.animations")||[]).concat(this.getPath("animationInfo.linkedAnimations")).getEach("datadefName");l.removeFromParent();if(h==="data"){l.set("isHiddenForAnimation",m.indexOf(n.getPath("dataRepresentation.datadef.name"))>=0);this.get("dataHolder").appendChild(l)}else{if(h==="annotation"){if(n.get("isOverlayAnnotation")){this.get("overlayAnnotationsHolder").appendChild(l)}else{if(n.get("isTopAnnotation")){this.get("topAnnotationsHolder").appendChild(l)}else{this.get("annotationsHolder").appendChild(l)}}}}}}}},_removeView:function(b){var c=b.get("item"),a=SC.guidFor(c.constructor),e=SC.guidFor(c);delete this._viewsByClassAndItem[a][e];if(b.didRemoveFromGraphView){b.didRemoveFromGraphView()}b.removeFromParent()},coordinatesForPoint:function(o,m){var g=this.get("xAxis");var a=this.get("yAxis");if(!g||!a){return{x:-9999,y:-9999}}var c=g.get("min"),j=g.get("max"),q=a.get("min"),h=a.get("max");var f=this.get("frame");var s=f.height,b=f.width;var n=this.get("padding");var l=b-n.left-n.right;var k=s-n.top-n.bottom;var p=l/(j-c);var e=k/(h-q);return{x:n.left+(o-c)*p,y:n.top+k-(m-q)*e}},clipRect:function(){var g=this.get("frame"),f=this.get("padding"),a=g.height,e=g.width,c=e-f.left-f.right,b=a-f.top-f.bottom;return[f.left,f.top,c,b]}.property(),pointForCoordinates:function(o,m){var g=this.get("xAxis");var a=this.get("yAxis");if(!g||!a){return undefined}var c=g.get("min"),j=g.get("max"),q=a.get("min"),h=a.get("max");var f=this.get("frame");var s=f.height,b=f.width;var n=this.get("padding");var l=b-n.left-n.right;var k=s-n.top-n.bottom;var p=l/(j-c);var e=k/(h-q);return{x:c+(o-n.left)/p,y:q+(n.top+k-m)/e}},titleView:SC.LabelView.design(Smartgraphs.PointerEventsSupport,{pointerEvents:"none",hideGraphBinding:".parentView.hideGraph",valueBinding:".parentView*graphController.title",classNames:"pane-label",layout:{width:400,centerX:0,height:20,top:20,zIndex:1},textAlign:SC.ALIGN_CENTER,isVisible:function(){return !this.get("hideGraph")}.property("hideGraph").cacheable()}),tooltipView:SC.View.extend({displayProperties:["coords","mouseOverInputArea"],coordsBinding:".parentView*graphController.tooltipCoords",mouseOverInputAreaBinding:".parentView.mouseOverInputArea",pointOverrideBinding:".parentView*graphController.toolTipVisibilityOverrideOnPointHover",render:function(b,j){var h=this.get("owner").graphController||null;var e=this.get("mouseOverInputArea");var a=this.get("pointOverride");var g=false;if(!h||!h.get("showToolTipCoords")){return}if(!e){b.push("<div></div>");return}if(a){g=true}else{if(!h.get("toolTipVisibilityOverrideFromToolState")){b.push("<div></div>");return}else{g=true}}if(g){var f=this.get("coords");var c="";c+="<div class='toolTipLabel' style='width:"+f.width+"px; text-align:center; padding: 5px; position: absolute; top:"+(f.top+f.coordOffset)+"px; left: "+(f.left+f.coordOffset)+"px; z-index: 10000;'>"+f.x+",&nbsp;"+f.y+"</div>";b.push(c)}else{b.push("<div></div>");return}},mouseMoved:function(b){var e=this.parentView.graphCanvasView;var h=this.parentView.graphController;var f=e.axesView.inputAreaView.coordsForEvent(b),a=this.parentView.pointForCoordinates(f.x,f.y);var c=e._getScreenBounds();var g=this.parentView.get("padding");if((h.tooltipCoords.width+f.x)>=(c.xRight-g.right)){f.x=c.xRight-h.tooltipCoords.width-g.right}h.updateToolTip(a,f);return}}),topAnnotationsHolder:RaphaelViews.RaphaelCanvasView.extend(Smartgraphs.RearrangeableParentView,{layout:{zIndex:2},graphView:SC.outlet("parentView"),requestedCursorStyleBinding:".graphView.requestedCursorStyle",init:function(){arguments.callee.base.apply(this,arguments);var a=SC.Cursor.create();a.bind("cursorStyle",this,"requestedCursorStyle");this.set("cursor",a)},viewDidResize:function(){arguments.callee.base.apply(this,arguments);var c=this.get("childViews");for(var e=0;e<c.length;e++){var h=c[e];if(h.kindOf(Smartgraphs.LabelSetView)){var g=h.get("childViews");var f=g.length;for(var b=0;b<f;b++){var a=g[b];a.get("labelTextView").updateLayer()}}else{if(h.kindOf(Smartgraphs.LabelView)){if(h.get("isEditing")){h.get("labelTextView").updateLayer()}}}}},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);var b=this;var a=this.$();if(a.attr("class")){a.attr("class",a.attr("class")+" topAnnotationsHolder")}else{a.attr("class","topAnnotationsHolder")}this.$().mousemove(function(c){if(b.checkDescendent(c.target,this)){return YES}else{b.handleEvent(c)}});this.$().mousedown(function(c){if(b.checkDescendent(c.target,this)){var e=b.getLabelInEditMode();if(e){var f=e.get("layer");if(!b.checkDescendent(c.target,f)){e.commitEditing()}}return YES}else{b.handleEvent(c)}});this.$().mouseup(function(c){if(b.checkDescendent(c.target,this)){return YES}else{b.handleEvent(c)}})},checkDescendent:function(c,a){var f=$(c).parentsUntil("#"+a.id);var b=f.length;var e=f[b-1];if(e&&e.tagName!=="HTML"){return true}return false},getLabelInArrowDragMode:function(){var b=this;var a=b.get("childViews");for(var c=0;c<a.length;c++){var e=a[c];if(e.kindOf(Smartgraphs.LabelSetView)){return e.get("labelInArrowDragMode")}else{if(e.kindOf(Smartgraphs.LabelView)){if(e.get("isArrowDragging")){return e}}}}},getLabelInEditMode:function(){var b=this;var a=b.get("childViews");for(var c=0;c<a.length;c++){var e=a[c];if(e.kindOf(Smartgraphs.LabelSetView)){return e.get("labelInEditMode")}else{if(e.kindOf(Smartgraphs.LabelView)){if(e.get("isEditing")){return e}}}}},handleEvent:function(a){a.stopPropagation();this.$().hide();var c=document.elementFromPoint(a.clientX,a.clientY);if(SC.View.views[c.parentNode.id]===this.get("graphView").overlayAnnotationsHolder){$(c).hide();var b=document.elementFromPoint(a.clientX,a.clientY);$(c).show();c=b}this.$().show();a.target=c;SC.Event.handle.call(document,a)}}),graphCanvasView:RaphaelViews.RaphaelCanvasView.design({init:function(){arguments.callee.base.apply(this,arguments);var a=SC.Cursor.create();a.bind("cursorStyle",this,"requestedCursorStyle");this.set("cursor",a)},layout:{zIndex:0},graphView:SC.outlet("parentView"),xAxisBinding:".graphView.xAxis",yAxisBinding:".graphView.yAxis",requestedCursorStyleBinding:".graphView.requestedCursorStyle",animationInfoBinding:".graphView.animationInfo",displayProperties:"xAxis.min xAxis.max yAxis.min yAxis.max".w(),childViews:"axesView dataHolder annotationsHolder overlayAnnotationsHolder animationView".w(),_checkInputAreaScreenBounds:function(a,f){var b=this.get("graphView").$().offset();var e=this.get("graphView").get("padding");var c=this._getScreenBounds();if((a>=b.left+e.left&&a<=b.left+c.plotWidth+e.left)&&(f>=b.top+e.top&&f<=b.top+c.plotHeight+e.top)){return true}else{return false}},mouseMoved:function(a){this._mouseMoved(a)},_mouseMoved:function(a){var b=this.get("graphView");var c=b.get("graphController");if(this._checkInputAreaScreenBounds(a.pageX,a.pageY)){b.set("mouseOverInputArea",true);this.get("axesView").get("inputAreaView").mouseMoved(a)}else{b.set("mouseOverInputArea",false)}},mouseExited:function(a){var b=this.get("graphView");b.set("mouseOverInputArea",false)},touchStart:function(a){this._mouseDownOrTouchStart(a)},mouseDown:function(a){this._mouseDownOrTouchStart(a)},_mouseDownOrTouchStart:function(a){if(this._checkInputAreaScreenBounds(a.pageX,a.pageY)){this.get("axesView").get("inputAreaView").mouseDown(a)}},_animationIsPaused:NO,_getScreenBounds:function(){var b=this.get("frame"),a=this.getPath("graphView.padding");if(!a){return null}return{xLeft:b.x+a.left,xRight:b.x+b.width-a.right,yTop:b.y+a.top,yBottom:b.y+b.height-a.bottom,plotWidth:b.width-a.left-a.right,plotHeight:b.height-a.top-a.bottom}},_getLogicalBounds:function(){var b=this.getPath("graphView.xAxis"),a=this.getPath("graphView.yAxis");if(!b||!a){return null}return{xMin:b.get("min"),xMax:b.get("max"),yMin:a.get("min"),yMax:a.get("max")}},_startAnimationLoop:function(l,p,a,n){console.log("**** _startAnimationLoop()");var q=a.objectAt(0).getPath("item.points")||[],f=this._getLogicalBounds(),c=this._getScreenBounds(),m=this.getPath("animationInfo.duration"),u=this.getPath("animationView.animationSpecsByDatadefName")[p],g=u.yOffset,e,b,s,t,o,j,k,h;for(s=0,t=a.get("length");s<t;s++){e=a.objectAt(s).get("layer").raphael;e.stop()}n.stop();console.log("**** in startAnimationLoop: regenerateKeyframes = %s",l.regenerateKeyframes?"YES":"NO");console.log("**** in startAnimationLoop: animationIsRestarting = %s",l.animationIsRestarting?"YES":"NO");if(l.regenerateKeyframes){l.keyframes={};this._calculateKeyframes(l.keyframes,q,f,c,g,0,l.callback);l.regenerateKeyframes=NO}if(l.animationIsRestarting){l.regenerateKeyframes=YES;l.animationIsRestarting=NO;o=parseInt(m-(e.attrs["clip-rect"][2]/c.plotWidth)*m,10)}else{for(s=0,t=a.get("length");s<t;s++){e=a.objectAt(s).get("layer").raphael;e.attr({"clip-rect":[c.xLeft,c.yTop,0,c.plotHeight].join(",")})}j=q[0];h=(j[1]-f.yMin)/(f.yMax-f.yMin);n.attr({y:c.yTop+(c.plotHeight*(1-h))+g});o=m}b=a.objectAt(0).get("layer").raphael;b.animate({"clip-rect":[c.xLeft,c.yTop,c.plotWidth,c.plotHeight].join(",")},o);for(s=1,t=a.get("length");s<t;s++){e=a.objectAt(s).get("layer").raphael;e.animateWith(b,{"clip-rect":[c.xLeft,c.yTop,c.plotWidth,c.plotHeight].join(",")},o)}n.animateWith(b,l.keyframes,o)},_calculateKeyframes:function(g,p,k,t,f,m,h){var o=1/(k.xMax-k.xMin),c=1/(k.yMax-k.yMin),e=m*100,n,l,s,j,b,a,q;for(n=0,l=p.length;n<l;++n){s=p[n];a=(s[0]-k.xMin)*o;j=a*100;if(j>=e){b=(j-e)/(1-m);if(b>=100){b=100}q=(s[1]-k.yMin)*c;g[parseInt(b,10)+"%"]={y:t.yTop+(t.plotHeight*(1-q))+f};if(n+1===l){g[parseInt(b,10)+"%"].callback=h}}}},_startAnimationForDatadef:function(e){console.log("**** graphCanvasView._startAnimationForDatadef(%s)",e);var s=this._getScreenBounds(),h=this._getLogicalBounds(),m=this.getPath("animationView.animationSpecsByDatadefName")||{},j=this.getPath("animationView.dataViewsByDatadefName"),a=j[e]||[],c=a.objectAt(0),f=c.get("layer")&&c.get("layer").raphael,n=c.getPath("item.points")||[],b=m[e].yOffset,g=this.getPath("animationView.imagesByDatadefName"),q=g[e],p=this,l;function k(){SC.RunLoop.begin();p.getPath("parentView.graphController").sendAction("animationFinished");SC.RunLoop.end()}function o(){p._startAnimationLoop(l,e,a,q)}l={animationIsRestarting:this._animationIsPaused,regenerateKeyframes:NO,keyframes:{},callback:this.getPath("animationInfo.loop")?o:k};if(a[0].get("currentXFrac")==null){a[0].set("currentXFrac",0)}this._calculateKeyframes(l.keyframes,n,h,s,b,a[0].get("currentXFrac"),l.callback);a.setEach("isHiddenForAnimation",NO);o()},_dataViewsForDatadefName:function(c){var b=[],a=this.getPath("parentView.dataHolder.childViews")||[];a.forEach(function(e){if(e.getPath("item.dataRepresentation.datadef.name")===c){b.push(e)}});return b},_startLinkedAnimationForDatadef:function(e,h,j){console.log("**** _startLinkedAnimationForDatadef('%s')",e);var s=this._getScreenBounds(),b=this._dataViewsForDatadefName(e),c=b.objectAt(0),n=c.get("layer")&&c.get("layer").raphael,o=c.getPath("item.points")||[],a=this.getPath("animationInfo.duration"),g=this.getPath("animationInfo.loop"),q=this,p,f,l,m,k;for(f=0,l=b.get("length");f<l;f++){k=b.objectAt(f).get("layer").raphael;k.stop()}if(h){m=(1-b[0].get("currentXFrac"))*a;h=NO}else{k.attr({"clip-rect":[s.xLeft,s.yTop,0,s.plotHeight].join(",")});m=a}if(g){p=j||function(){q._startLinkedAnimationForDatadef(e,h,p)}}else{p=null}b.setEach("isHiddenForAnimation",NO);n.animate({"clip-rect":[s.xLeft,s.yTop,s.plotWidth,s.plotHeight].join(",")},m,p);for(f=1,l=b.get("length");f<l;f++){k=b.objectAt(f).get("layer").raphael;k.animateWith(n,{"clip-rect":[s.xLeft,s.yTop,s.plotWidth,s.plotHeight].join(",")},m)}},animate:function(){console.log("**** graphCanvasView.animate()");var c=this.getPath("animationInfo.animations")||[],b=this.getPath("animationInfo.linkedAnimations")||[],a=this;c.forEach(function(e){a._startAnimationForDatadef(e.datadefName)});b.forEach(function(e){a._startLinkedAnimationForDatadef(e.datadefName,a._animationIsPaused)})},stop:function(){console.log("**** graphCanvasView.stop()");var f=this.getPath("animationInfo.animations")||[],c=this.getPath("animationInfo.linkedAnimations")||[],a=this.getPath("animationView.dataViewsByDatadefName"),e=this.getPath("animationView.imagesByDatadefName"),b=this;f.forEach(function(j){var h=j.datadefName,g=a[h],k=e[h];g.forEach(function(l){l.get("layer").raphael.stop()});g[0].set("currentXFrac",g[0].get("layer").raphael.attrs["clip-rect"][2]/b._getScreenBounds().plotWidth);k.stop()});c.forEach(function(g){b._dataViewsForDatadefName(g.datadefName).forEach(function(h){h.get("layer").raphael.stop()})});this._animationIsPaused=YES},reset:function(){console.log("**** graphCanvasView.reset()");var e=this._getScreenBounds(),c=this._getLogicalBounds(),j=this.getPath("animationInfo.animations")||[],f=this.getPath("animationInfo.linkedAnimations")||[],a=this.getPath("animationView.dataViewsByDatadefName"),g=this.getPath("animationView.imagesByDatadefName"),h={"clip-rect":[e.xLeft,e.yTop,e.plotWidth,e.plotHeight].join(",")},b=this;j.forEach(function(m){var l=m.datadefName,k=a[l],p=g[l],o=k.objectAt(0),n=o.getPath("item.points"),s=(n[0][1]-c.yMin)/(c.yMax-c.yMin),q=m.yOffset||0;k.forEach(function(u){u.set("isHiddenForAnimation",YES);var t=u.get("layer").raphael;t.attr(h)});k[0].set("currentXFrac",0);if(p){p.attr({y:e.yTop+e.plotHeight*(1-s)+q})}});f.forEach(function(k){b._dataViewsForDatadefName(k.datadefName).forEach(function(l){l.set("isHiddenForAnimation",YES);l.get("layer").raphael.attr(h)})});this._animationIsPaused=NO},axesView:RaphaelViews.RaphaelView.design({graphCanvasView:SC.outlet("parentView"),graphView:SC.outlet("graphCanvasView.graphView"),classNames:"axes-view",xAxisBinding:".graphView.xAxis",yAxisBinding:".graphView.yAxis",paddingBinding:".graphView.padding",childViews:"inputAreaView xAxisView yAxisView gridView".w(),touchStart:function(a){this._mouseDownOrTouchStart(a)},mouseDown:function(a){this._mouseDownOrTouchStart(a)},_mouseDownOrTouchStart:function(a){this.get("inputAreaView").mouseDown(a)},gridView:RaphaelViews.RaphaelView.design({gridStroke:"#C2CCE0",gridStrokeWidth:1,gridStrokeOpacity:0.7,graphCanvasView:SC.outlet("parentView.graphCanvasView"),graphView:SC.outlet("parentView.graphView"),renderCallback:function(c,b){for(var a=0;a<b.length;a++){c.path(b[a].d).attr(b[a])}return},render:function(b,n){var m=this.get("graphView");var o=m.get("xAxis");var a=m.get("yAxis");if(!o||!a){return}if(!(this.get("graphView").get("graphController").showGraphGrid)){return}var l=m.graphCanvasView._getLogicalBounds();var c=o.get("nSteps");var j=a.get("nSteps");var s=[];var h=Math.abs((l.xMax-l.xMin)/c);var g=Math.abs((l.yMax-l.yMin)/j);var k=l.xMin;var u,w,v,t,e=[],q;for(var p=0;p<c;p++,k+=h){if(h+k===0){continue}u=[];u.push({y:l.yMin,x:(h+k)});u.push({y:l.yMax,x:(h+k)});e=[];for(w=0;w<u.length;w++){e.push(w===0?"M":"L");t=u[w];v=m.coordinatesForPoint(t.x,t.y);e.push(v.x);e.push(v.y)}q=e.join(" ");s.push({d:q,stroke:this.get("gridStroke"),"stroke-width":this.get("gridStrokeWidth"),"stroke-opacity":this.get("gridStrokeOpacity")})}var f=l.yMin;for(p=0;p<j;p++,f=f+g){if(g+f===0){continue}u=[];u.push({y:(g+f),x:l.xMin});u.push({y:(g+f),x:l.xMax});e=[];for(w=0;w<u.length;w++){e.push(w===0?"M":"L");t=u[w];v=m.coordinatesForPoint(t.x,t.y);e.push(v.x);e.push(v.y)}q=e.join(" ");s.push({d:q,stroke:this.get("gridStroke"),"stroke-width":this.get("gridStrokeWidth"),"stroke-opacity":this.get("gridStrokeOpacity")})}b.callback(this,this.renderCallback,s)}}),inputAreaView:RaphaelViews.RaphaelView.design({graphCanvasView:SC.outlet("parentView.graphCanvasView"),graphView:SC.outlet("parentView.graphView"),topAnnotationsHolder:SC.outlet("graphView.topAnnotationsHolder"),didCreateLayer:function(){this._graphView=this.get("graphView");this._$graphView=this._graphView.$()},renderCallback:function(f,e,b,c,a){return f.rect(e,b,c,a).attr({fill:"#f7f8fa",stroke:"#f7f8fa",opacity:1})},render:function(b,e){var c=this.get("graphCanvasView")._getScreenBounds(),a;this._screenBounds=c;if(e){b.callback(this,this.renderCallback,c.xLeft,c.yTop,c.plotWidth,c.plotHeight)}else{a=b.raphael();a.attr({x:c.xLeft,y:c.yTop,width:c.plotWidth,height:c.plotHeight})}},coordsForEvent:function(c){var b=this._$graphView.offset(),f=this._screenBounds,a=c.pageX-b.left,g=c.pageY-b.top,e;a=(a<f.xLeft)?f.xLeft:(a>f.xRight)?f.xRight:a;g=(g<f.yTop)?f.yTop:(g>f.yBottom)?f.yBottom:g;return{x:a,y:g}},touchStart:function(a){this._mouseDownOrTouchStart(a)},mouseDown:function(a){this._mouseDownOrTouchStart(a)},_mouseDownOrTouchStart:function(b){this._graphController=this._graphView.get("graphController");var e=this.getPath("topAnnotationsHolder");var c=e.getLabelInEditMode();if(c){c.commitEditing();return}var f=this.coordsForEvent(b),a=this._graphView.pointForCoordinates(f.x,f.y);return this._graphController.inputAreaMouseDown(a.x,a.y)},touchesDragged:function(a){this._mouseOrTouchesDragged(a)},mouseDragged:function(a){this._mouseOrTouchesDragged(a)},_mouseOrTouchesDragged:function(b){var c=this.coordsForEvent(b),a=this._graphView.pointForCoordinates(c.x,c.y);return this._graphController.inputAreaMouseDragged(a.x,a.y)},mouseMoved:function(a){this._mouseMoved(a)},_mouseMoved:function(b){var g=this.coordsForEvent(b),a=this._graphView.pointForCoordinates(g.x,g.y);var f=this.get("graphView").get("graphCanvasView")._getScreenBounds();var j=this._graphView.get("graphController");var h=this.get("graphView").get("padding");if(j.tooltipCoords.width+g.x>=f.xRight-h.right){g.x=f.xRight-j.tooltipCoords.width-h.right}var e=j.get("toolTipPoint");var c=j.get("toolTipVisibilityOverrideOnPointHover");if(c&&e!==null){j.updateToolTip(e,g)}else{j.updateToolTip(a,g)}return j.inputAreaMouseMove(a.x,a.y)},touchEnd:function(a){this._mouseUpOrTouchEnd(a)},mouseUp:function(a){this._mouseUpOrTouchEnd(a)},_mouseUpOrTouchEnd:function(b){var c=this.coordsForEvent(b),a=this._graphView.pointForCoordinates(c.x,c.y);var e=this._graphView.get("graphController");return e.inputAreaMouseUp(a.x,a.y)},mouseExited:function(){var a=this._graphView.get("graphController");this._graphView.set("mouseOverInputArea",false)}}),xAxisView:Smartgraphs.AxisView.design({graphView:SC.outlet("parentView.graphView"),axisBinding:".graphView.xAxis",otherAxisBinding:".graphView.yAxis",type:"x"}),yAxisView:Smartgraphs.AxisView.design({graphView:SC.outlet("parentView.graphView"),axisBinding:".graphView.yAxis",otherAxisBinding:".graphView.xAxis",type:"y"})}),dataHolder:RaphaelViews.RaphaelView.design({}),annotationsHolder:RaphaelViews.RaphaelView.design({}),overlayAnnotationsHolder:RaphaelViews.RaphaelView.design(Smartgraphs.PointerEventsSupport,{pointerEvents:"none"}),animationView:RaphaelViews.RaphaelView.design({animationInfoBinding:".parentView.animationInfo",isVisibleBinding:"*animationInfo.hasAnimation",animationsBinding:"*animationInfo.animations",staticImagesBinding:"*animationInfo.staticImages",dataViewsBinding:".parentView.dataHolder.childViews",dataViewsByDatadefName:null,imagesByDatadefName:null,animationSpecsByDatadefName:null,staticImagesByURL:null,displayProperties:["animations.[]","staticImages.[]","dataViews.[]"],_normalizeImageURL:function(a){if(a.indexOf(".")===-1){var b={circle:"/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/circle.png",box:"/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/box.png",cross:"/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/cross.png"}[a];a=b||"/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/cross.png"}return a},_clearImageReferences:function(){this.set("imagesByDatadefName",{});this.set("staticImagesByURL",{})},_renderStaticImages:function(f){var b=this.get("staticImages")||[],l=this.get("staticImagesByURL"),n={},h=this.get("parentView")._getLogicalBounds(),o=this.get("parentView")._getScreenBounds(),a,k,j,g,e,c,m;if(!h){console.warn("logicalBounds is not defined.");return}b.forEach(function(p){a=p.image;if(!a){console.log("no image url for static image");return null}if(!n[a]){n[a]=[]}n[a].push(p)});for(a in l){if(!l.hasOwnProperty(a)){continue}if(!n[a]){console.log("deleting all images for static image url '%s'",a);l[a].forEach(function(p){p.remove()});delete l[a];continue}}for(a in n){if(!n.hasOwnProperty(a)){continue}if(!l[a]){l[a]=[]}k=n[a].length;j=l[a].length;if(k<j){console.log("deleting %d excess images for static image url '%s'",j-k,a);for(g=k;g<j;g++){l[a][g].remove()}l[a].removeAt(k,j-k)}if(j<k){console.log("creating %d new images for static image url '%s'",k-j,a);for(g=j;g<k;g++){l[a].push(f.image(a))}}for(g=0;g<k;g++){console.log("adjusting image %d for static image url '%s'",g,a);e=n[a][g];c=l[a][g];m=(e.y-h.yMin)/(h.yMax-h.yMin);c.attr({x:this.get("frame").x+10+e.xOffset,y:o.yTop+(o.plotHeight*(1-m))-e.yOffset,width:e.width,height:e.height})}}},_renderDataImages:function(e){var k=this.get("animations")||[],m=this.getPath("animationInfo.isFinished"),b=this.getPath("parentView.dataHolder.childViews")||[],n=this.get("imagesByDatadefName")||{},g={},q={},o={},f=this.get("parentView")._getLogicalBounds(),c=this.get("parentView")._getScreenBounds(),s,u,l,v,w,h,a,p,t,j;k.forEach(function(y){var x=y.datadefName;g[x]=[];o[x]=y.foregroundImageURL;q[x]=y});b.forEach(function(y){var x=y.getPath("item.dataRepresentation.datadef.name");if(g[x]&&y.get("isAnimatable")){g[x].push(y)}});for(s in o){if(!o.hasOwnProperty(s)){continue}if(!n[s]){console.log("creating new image");n[s]=e.image(this._normalizeImageURL(o[s]))}}for(s in n){if(!n.hasOwnProperty(s)){continue}if(!o[s]){console.log("removing data image");n[s].remove()}else{a=g[s][0];if(a){t=a.getPath("item.points");p=m?t[t.length-1]:t[0];j=(p[1]-f.yMin)/(f.yMax-f.yMin);u=q[s];l=u.width||70;v=u.height||30;w=u.xOffset||0;h=u.yOffset||0;console.log("adjusting data image");n[s].attr({src:this._normalizeImageURL(o[s]),x:this.get("frame").x+10+w,y:c.yTop+(c.plotHeight*(1-j))+h,width:l,height:v}).toFront()}}}this.set("dataViewsByDatadefName",g);this.setIfChanged("imagesByDatadefName",n);this.set("animationSpecsByDatadefName",q);return null},render:function(b,c){var a=this;console.log("animationView.render(firstTime = %s)",c?"YES":"NO");if(c){this._clearImageReferences();b.callback(this,function(e){a._renderStaticImages(e);a._renderDataImages(e)})}else{this._renderStaticImages(this.get("raphaelCanvas"));this._renderDataImages(this.get("raphaelCanvas"))}}})}),legendView:SC.View.extend({defaultValue:false,classNames:["legendView"],tagName:"div",layout:{top:0,left:0,width:0,height:0,zIndex:4},verticalElementSpacing:5,topPadding:8,bottomPadding:8,rightPadding:8,leftPadding:8,backgroundColor:"#CFECBC",maxWidth:0,maxHeight:0,initialTopPos:0,initialLeftPos:0,arrObservers:[],graphController:SC.outlet("parentView.graphController"),childViews:"legendHeadingView".w(),init:function(){arguments.callee.base.apply(this,arguments);var a=this.parentView.layout;this.set("defaultValue",false);this.set("initialTopPos",a.top);this.set("initialLeftPos",a.left)},initialize:function(j){var e=this.get("graphController");var B,h;if(!(j instanceof Array)){B=j.title;h=j.type;j=j.datadefs}var o=j.length;var t=[];var k,x="";for(var y=0;y<o;y++){var A=null;k=e.getDatadef(j[y]);x=j[y];var C=k.get("color");if(h==="name"||h===undefined){A={color:C,text:j[y]}}else{if(h==="AvgSumOfDeviation"){var f=k.get("deviationValue");if(f===null){this.set("isVisible",false)}A={color:C,text:f};this.set("defaultValue",false)}}t.push(A)}j=t;var n=this.childViews.length;var g=1;while(g>0&&n!==1){this.childViews[g].removeFromParent();n--}if(h==="AvgSumOfDeviation"){for(var q=this.arrObservers.length-1;q>=0;q--){k=this.arrObservers[q].datadef;var w=this.arrObservers[q].textViewObject;k.removeObserver("deviationValue",w,w.updateText);this.arrObservers.pop()}}var c=this.legendHeadingView.layout.height;var z=j.length;if(z===0){this.set("maxHeight",0);this.set("defaultValue",false);this.set("isVisible",NO);return}else{if(h!=="AvgSumOfDeviation"){this.set("isVisible",YES)}}if(B!==undefined){this.legendHeadingView.set("value",B)}var v=c+this.topPadding;var a=null;for(var u=0;u<z;u++){a=this.legendElement.create({color:j[u].color,text:j[u].text});a.set("layout",{left:this.leftPadding});a.updatePosition(v);this.appendChild(a);v+=a.layout.height+this.verticalElementSpacing;if(h==="AvgSumOfDeviation"){k=e.getDatadef(x);var l=a.textView;k.addObserver("deviationValue",l,l.updateText);var b={datadef:k,textViewObject:l};this.arrObservers.push(b)}}if(z>0){var s=v-this.verticalElementSpacing+this.bottomPadding;this.set("maxHeight",s)}},updateInitialPosition:function(){if(this.maxHeight===0){var a=this.getLegendPosition();this.set("initialTopPos",a.top);this.set("initialLeftPos",a.left)}}.observes("maxHeight"),didLayoutChange:function(){var b={top:this.initialTopPos,left:this.initialLeftPos,width:this.maxWidth,height:this.maxHeight,zIndex:200};this.set("layout",b);if(!this.defaultValue){var a=this.getLegendPosition();this.set("initialTopPos",a.top);this.set("initialLeftPos",a.left);if(b.top>a.top){this.adjust("top",a.top)}if(b.left>a.left){this.adjust("left",a.left)}}}.observes("maxWidth","maxHeight"),getLegendPosition:function(){var e=this.getPath("parentView.frame");var b=e.height-this.maxHeight;var c=e.width-this.maxWidth;var a={top:b,left:c};return a},parentViewDidResize:function(){var a=this.getLegendPosition();var b=this.layout;if(b.top>a.top){this.adjust("top",a.top)}if(b.left>a.left){this.adjust("left",a.left)}},layoutDidChangeFor:function(){arguments.callee.base.apply(this,arguments);var a=this.childViews.length;if(a<=1){return}var c=this.legendHeadingView;var g=c?c.layout.width:0;if(isNaN(g)){g=0}for(var e=0;e<a;e++){var b=this.childViews[e];if(b!==c){if(g<b.layout.width){g=b.layout.width}}}g+=this.leftPadding+this.rightPadding;if(c){var f=c.layout;var h=(g-f.width)/2;if(!isNaN(h)&&h!==f.left){f.left=(g-f.width)/2;c.set("layout",f)}}this.set("maxWidth",g)},mouseDragged:function(a){return this._mouseDraggedOrTouchesDragged(a)},touchesDragged:function(a){return this._mouseDraggedOrTouchesDragged(a)},_mouseDraggedOrTouchesDragged:function(c){this.set("defaultValue",true);var e=this._mouseDownInfo,b,a;b=e.curX+c.pageX;if(b<0){b=0}if(b>e.widthBound){b=e.widthBound}this.adjust("left",b);this.set("initialLeftPos",b);a=e.curY+c.pageY;if(a<0){a=0}if(a>e.heightBound){a=e.heightBound}this.adjust("top",a);this.set("initialTopPos",a);return YES},mouseDown:function(a){return this._mouseDownOrTouchStart(a)},touchStart:function(a){return this._mouseDownOrTouchStart(a)},_mouseDownOrTouchStart:function(a){var b=this.get("layout");var c=this.getPath("parentView.frame");this._mouseDownInfo={curY:b.top-a.pageY,curX:b.left-a.pageX,widthBound:c.width-b.width,heightBound:c.height-b.height};return YES},mouseUp:function(a){return this._mouseUpOrTouchEnd(a)},touchEnd:function(a){return this._mouseUpOrTouchEnd(a)},_mouseUpOrTouchEnd:function(a){this.mouseDragged(a);this._mouseDownInfo=null;return YES},legendHeadingView:SC.LabelView.design(SC.AutoResize,{supportsAutoResize:YES,shouldResizeWidth:YES,layout:{top:0,height:16},textAlign:SC.ALIGN_CENTER,value:"Legend",fontWeight:SC.BOLD_WEIGHT,classNames:["legendTitle"]}),legendElement:SC.View.extend({color:null,text:null,iTop:0,colorBoxWidth:20,childElementHeight:18,colorTextSpacing:2,childViews:"colorView textView".w(),init:function(){arguments.callee.base.apply(this,arguments);this.colorView.set("layout",{left:0,width:this.colorBoxWidth,height:this.childElementHeight});this.textView.set("layout",{left:this.colorBoxWidth+this.colorTextSpacing,height:this.childElementHeight})},updatePosition:function(a){if(!isNaN(a)&&a!==null){this.iTop=a}this.set("layout",{left:this.layout.left,top:this.iTop,width:this.textView.layout.width+this.colorBoxWidth+this.colorTextSpacing,height:this.childElementHeight})},layoutDidChangeFor:function(){arguments.callee.base.apply(this,arguments);if(this.textView){this.updatePosition()}},colorView:SC.View.extend({classNames:["legendColorBoxView"],backgroundColor:SC.outlet("parentView.color")}),textView:SC.LabelView.design(SC.AutoResize,{supportsAutoResize:YES,shouldResizeWidth:YES,textAlign:SC.ALIGN_CENTER,value:SC.outlet("parentView.text"),autoResizeText:SC.outlet("value"),updateText:function(a){this.set("value",a.get("deviationValue"));var b=this.parentView.parentView;if(a.get("deviationValue")!==null&&a.get("deviationValue")>=0){if(!b.get("isVisible")){b.set("isVisible",true)}}}})})})});sc_require("mixins/defocusing_button_behavior");Smartgraphs.GraphPane=SC.View.extend({childViews:"animationChannelView graphView controlsContainer".w(),animationChannelView:SC.View.design({animationInfoBinding:".parentView*graphController.animationInfo",isVisibleBinding:"*animationInfo.hasAnimation",backgroundImageURLBinding:"*animationInfo.backgroundImageURL",channelWidthBinding:"*animationInfo.channelWidth",layout:{left:10,top:15,width:0,bottom:0},displayProperties:["backgroundImageURL","channelWidth"],didCreateLayer:function(){this._updateChannelStyle()},didUpdateLayer:function(){this._updateChannelStyle()},_updateChannelStyle:function(){this._setBackgroundImage(this.get("backgroundImageURL"));this.adjust("width",this.get("channelWidth"))},_setBackgroundImage:function(a){var b=a?["url(",a,")"].join(""):"";this.$().css("backgroundImage",b)}}),graphView:Smartgraphs.GraphView.design({graphControllerBinding:".parentView.graphController"}),controlsContainerNowShowing:null,controlsContainer:SC.ContainerView.design({layout:{bottom:0,height:0},graphControllerBinding:".parentView.graphController",nowShowingBinding:".parentView.controlsContainerNowShowing"}),showInControlsPanelBinding:"*graphController.showInControlsPanel",showInControlsPanelDidChange:function(){var c=this.get("showInControlsPanel"),b=0,a=0;if(c){b=35;a=35;if(c===Smartgraphs.GraphController.CONTROLS){this.set("controlsContainerNowShowing",this.get("graphControlsView"))}if(c===Smartgraphs.GraphController.SENSOR_LOADING){this.set("controlsContainerNowShowing",Smartgraphs.activityPage.sensorLoadingView)}}this.get("animationChannelView").adjust("bottom",b);this.get("graphView").adjust("bottom",b);this.get("controlsContainer").adjust("height",a)}.observes("showInControlsPanel"),graphControlsView:SC.View.design({layout:{height:35},graphControllerBinding:"*parentView.graphController",childViews:"startControl stopControl clearControl".w(),startControl:SC.ButtonView.design(Smartgraphs.DefocusingButtonBehavior,{layout:{centerX:-110,bottom:10,width:80,height:24},isVisibleBinding:".parentView*graphController.startControlIsVisible",isEnabledBinding:".parentView*graphController.startControlIsEnabled",isDefaultBinding:".parentView*graphController.startControlIsDefault",title:"Start",action:"startControlWasClicked",target:SC.outlet("parentView.graphController.statechart"),init:function(){arguments.callee.base.apply(this,arguments);if(SC.platform.touch){this.set("touchBoundary",{left:50,right:50,top:50,bottom:50})}}}),stopControl:SC.ButtonView.design(Smartgraphs.DefocusingButtonBehavior,{layout:{centerX:0,bottom:10,width:80,height:24},isVisibleBinding:".parentView*graphController.stopControlIsVisible",isEnabledBinding:".parentView*graphController.stopControlIsEnabled",isDefaultBinding:".parentView*graphController.stopControlIsDefault",title:"Stop",action:"stopControlWasClicked",target:SC.outlet("parentView.graphController.statechart"),init:function(){arguments.callee.base.apply(this,arguments);if(SC.platform.touch){this.set("touchBoundary",{left:50,right:50,top:50,bottom:50})}}}),clearControl:SC.ButtonView.design(Smartgraphs.DefocusingButtonBehavior,{layout:{centerX:110,bottom:10,width:80,height:24},isVisibleBinding:".parentView*graphController.clearControlIsVisible",isEnabledBinding:".parentView*graphController.clearControlIsEnabled",isDefaultBinding:".parentView*graphController.clearControlIsDefault",title:"Reset",action:"clearControlWasClicked",target:SC.outlet("parentView.graphController.statechart"),init:function(){arguments.callee.base.apply(this,arguments);if(SC.platform.touch){this.set("touchBoundary",{left:50,right:50,top:50,bottom:50})}}})})});Smartgraphs.ImageView=SC.View.extend({imageURL:null,imageURLBindingDefault:SC.Binding.oneWay(),caption:null,captionBindingDefault:SC.Binding.oneWay(),childViews:["imageView","captionView"],captionView:SC.LabelView.design({escapeHTML:false,valueBinding:".parentView.caption",valueBindingDefault:SC.Binding.oneWay(),isVisible:function(){return !!this.get("value")}.property("value"),classNames:"floating-caption",layout:{top:10,left:10,right:10,height:20}}),imageView:SC.ImageView.design({valueBinding:".parentView.imageURL",valueBindingDefault:SC.Binding.oneWay(),useCanvas:false,scale:SC.FILL_PROPORTIONALLY,align:SC.ALIGN_CENTER})});Smartgraphs.PointView=RaphaelViews.RaphaelView.extend({displayProperties:"content.x content.y isEnabled color radius".w(),controllerPath:"parentView.graphView.graphController",controller:SC.outlet("parentView.graphView.graphController"),dataRepresentation:SC.outlet("parentView.dataRepresentation"),datadef:SC.outlet("dataRepresentation.datadef"),datadefName:SC.outlet("datadef.name"),modifiersBinding:".controller.modifiers",modifiersBindingDefault:SC.Binding.oneWay(),datasetColorBinding:".parentView.color",overrideColor:null,isDimmedBinding:".dataRepresentation.isDimmed",isDimmedBindingDefault:SC.Binding.oneWay(),dimmedColor:"#cccccc",hoveredRadius:6,notHoveredRadius:4,targetRadius:function(){return SC.platform.touch?20:10}.property(),isEnabled:YES,isHovered:NO,isMouseDown:false,layerIsCacheable:YES,isPoolable:YES,color:function(){return this.get("overrideColor")?this.get("overrideColor"):(this.get("isDimmed")?this.get("dimmedColor"):this.get("datasetColor"))}.property("overrideColor","isDimmed","dimmedColor","datasetColor").cacheable(),radius:function(){return(this.get("isHovered")?this.get("hoveredRadius"):this.get("notHoveredRadius"))}.property("isHovered","hoveredRadius","notHoveredRadius").cacheable(),modifiersDidChange:function(){var e=this.get("modifiers")||{},b=this.getPath("content.x"),f=this.getPath("content.y"),c=this.get("datadefName"),a;a=e[[b,f,c]];if(a){this.set("overrideColor",a.get("color"))}else{this.set("overrideColor",null)}}.observes("modifiers"),mouseEntered:function(){if(!this.dataRepresentation.datadef.isActive){return}this.set("isHovered",YES);var b=this.get("controller");var a=Smartgraphs.Point.create({x:this.getPath("content.x"),y:this.getPath("content.y")});b.set("toolTipPoint",a);b.set("toolTipVisibilityOverrideOnPointHover",true)},mouseExited:function(){if(!this.dataRepresentation.datadef.isActive){return}this.set("isHovered",NO);var b=this.get("controller");var a=this.get("isMouseDown");if(!a){b.set("toolTipPoint",null);b.set("toolTipVisibilityOverrideOnPointHover",false)}},mouseDown:function(a){return this._mouseDownOrTouchStart(a)},touchStart:function(a){return this._mouseDownOrTouchStart(a)},_mouseDownOrTouchStart:function(b){if(!this.dataRepresentation.datadef.isActive){return}this.set("isMouseDown",true);this.get("controller").dataPointSelected(this.get("dataRepresentation"),this.getPath("content.x"),this.getPath("content.y"));var c=this.getPath("parentView.graphView");var e=c.graphCanvasView.axesView.inputAreaView.coordsForEvent(b);var a=c.pointForCoordinates(e.x,e.y);this.get("datadef").set("dragValueX",this.getPath("content.x"));this.get("datadef").set("dragValueY",this.getPath("content.y"));this.get("controller").dataPointDown(this.get("dataRepresentation"),a.x,a.y);return YES},mouseDragged:function(a){return this._mouseDragged(a)},touchesDragged:function(a){return this._mouseDragged(a)},_mouseDragged:function(b){if(!this.dataRepresentation.datadef.isActive){return}var c=this.getPath("parentView.graphView");var f=c.graphCanvasView.axesView.inputAreaView.coordsForEvent(b);var a=c.pointForCoordinates(f.x,f.y);this.get("controller").dataPointDragged(this.get("dataRepresentation"),a.x,a.y);var h=this.get("datadef").get("dragValueX");var g=this.get("datadef").get("dragValueY");var e=Smartgraphs.Point.create({x:h,y:g});var j=this.get("controller");j.set("toolTipPoint",e);j.set("toolTipVisibilityOverrideOnPointHover",true);return YES},mouseUp:function(a){return this._mouseUp(a)},touchEnd:function(a){return this._mouseUp(a)},_mouseUp:function(p){if(!this.dataRepresentation.datadef.isActive){return}var b=this.getPath("parentView.graphView");var m=b.graphCanvasView.axesView.inputAreaView.coordsForEvent(p);var o=b.pointForCoordinates(m.x,m.y);var c=this.get("controller");var e=this.get("dataRepresentation");var k=this.get("datadef");var n=k.get("dragValueX");var j=k.get("dragValueY");this.set("isMouseDown",false);var g=this.get("isHovered");var h=b.graphCanvasView._checkInputAreaScreenBounds(p.pageX,p.pageY);c.dataPointUp(e,o.x,o.y);var l=b.coordinatesForPoint(n,j);var f=this.get("strokeWidth");var a=Math.sqrt(Math.pow(m.x-l.x,2)+Math.pow(m.y-l.y,2));if(f<a||!g||!h){c.set("toolTipPoint",null);c.set("toolTipVisibilityOverrideOnPointHover",false)}return YES},renderCallback:function(h,c,g,b,e,a,f){return h.set().push(h.circle(c,g,b).attr({fill:e,"stroke-width":0,"clip-rect":f}),h.circle(c,g,a).attr({fill:"black","fill-opacity":0,"stroke-width":0}))},render:function(b,a){var c=this.getPath("parentView.graphView");if(!c){this.displayDidChange();return}var g=this.get("color"),j=this.get("radius"),e=this.get("targetRadius"),m=this.getPath("content.x"),k=this.getPath("content.y"),l=c.coordinatesForPoint(m,k),h=c.get("clipRect"),f;if(a){b.callback(this,this.renderCallback,l.x,l.y,j,g,e,h)}else{raphaelObject=this.get("raphaelObject");raphaelObject.attr({cx:l.x,cy:l.y});f=b.raphael().items[0];f.attr({r:j,fill:g,"clip-rect":h})}}});sc_require("mixins/pointer_events_support");Smartgraphs.PointsetView=RaphaelViews.RaphaelCollectionView.extend(Smartgraphs.PointerEventsSupport,{isAnimatable:NO,exampleView:Smartgraphs.PointView,useFastPath:YES,modelColorBinding:".item.color",modelColorBindingDefault:SC.Binding.oneWay(),dataRepresentation:SC.outlet("item.dataRepresentation"),datadefIsActiveBinding:".dataRepresentation.datadef.isActive",pointerEvents:function(){return this.get("datadefIsActive")?"auto":"none"}.property("datadefIsActive"),color:function(){return this.get("overrideColor")||this.get("modelColor")}.property("overrideColor","modelColor"),selectionBinding:".item.selection",isSelectableBinding:".item.isSelectable",contentBinding:".item.points"});Smartgraphs.ResponseTemplateView=SC.StaticContentView.extend({fieldTypes:[],fieldChoicesList:[],values:[],editingShouldBeEnabled:null,viewShouldReset:NO,isVisibleBinding:SC.Binding.bool(".fieldTypes"),viewShouldResetDidChange:function(){if(this.get("viewShouldReset")){this.invokeOnce(this.resetView)}}.observes("viewShouldReset"),resetView:function(){this.clearChildViews();this.addChildViews();this.set("viewShouldReset",NO)},clearChildViews:function(){this._firstInputFieldView=null;this.get("childViews").invoke("destroy")},addChildViews:function(){var f=this.get("fieldTypes");if(!f){return}var c=this.get("fieldChoicesList");var b=this.get("values");var a;for(var e=0,g=f.get("length");e<g;e++){a=f.objectAt(e);this.addChildView(a,c.objectAt(e),b.objectAt(e),e);if(e===0&&(a==="numeric"||a==="textarea")){this._firstInputFieldView=this.get("childViews").objectAt(0).get("childViews").objectAt(0);this.invokeLater(this._beginEditingFirstView)}}},addChildView:function(e,b,a,f){var c;switch(e){case"textarea":c=this.wrap(this.makeTextAreaDesign(a,f),{height:97});break;case"numeric":c=this.wrap(this.makeNumericFieldDesign(a,f),{height:22,width:100});break;case"multiplechoice":c=this.makeMultipleChoiceView(b,a,f);break;default:throw"ResponseTemplateView received unexpected field type string '"+e+"'."}this.appendChild(c)},wrap:function(b,a){return SC.View.design({useStaticLayout:YES,layout:a,classNames:"text-field-view-wrapper".w(),childViews:[b]}).create()},makeTextAreaDesign:function(a,b){return SC.TextFieldView.design({isTextArea:YES,hint:"Enter your answer here...",fieldIndex:b,value:a,isEnabledBinding:".parentView.parentView.editingShouldBeEnabled",valueDidChange:function(){var c=this.getPath("parentView.parentView.values");if(c){c.replace(this.get("fieldIndex"),1,this.get("value"))}}.observes("value")})},makeNumericFieldDesign:function(a,b){return SC.TextFieldView.design({isTextArea:NO,fieldIndex:b,value:a,isEnabledBinding:".parentView.parentView.editingShouldBeEnabled",valueDidChange:function(){var c=this.getPath("parentView.parentView.values");if(c){c.replace(this.get("fieldIndex"),1,this.get("value"))}}.observes("value")})},makeMultipleChoiceView:function(b,a,e){var c=[];c=b.reduce(function(h,g,f){return h.concat({title:g,index:f+1})},[]);return SC.RadioView.design({items:c,itemTitleKey:"title",itemValueKey:"index",fieldIndex:e,value:a,isEnabledBinding:".parentView.editingShouldBeEnabled",useStaticLayout:YES,valueDidChange:function(){var f=this.getPath("parentView.values");if(f){f.replace(this.get("fieldIndex"),1,this.get("value"))}}.observes("value")}).create()},_beginEditingFirstView:function(){if(this._firstInputFieldView){this._firstInputFieldView.beginEditing()}}});Smartgraphs.TableItemView=SC.ListItemView.extend({displayProperties:["backgroundColor"],classNames:["table-item"],controller:SC.outlet("parentView.parentView.tableController"),dataRepresentation:SC.outlet("controller.dataRepresentation"),datadefName:SC.outlet("dataRepresentation.datadef.name"),modifiersBinding:".controller.modifiers",modifiersBindingDefault:SC.Binding.oneWay(),modifiersDidChange:function(){var e=this.get("modifiers")||{},a=this.getPath("content.x"),f=this.getPath("content.y"),c=this.get("datadefName"),b;if(e[[a,f,c]]){this.set("overrideColor",e[[a,f,c]].get("color"))}else{this.set("overrideColor",null)}}.observes("modifiers"),backgroundColor:function(){return this.get("overrideColor")||""}.property("overrideColor").cacheable(),mouseDown:function(){this.get("controller").dataPointSelected(this.get("dataRepresentation"),this.getPath("content.x"),this.getPath("content.y"));return NO},updateLayerLocation:function(){if(!this.get("parentView")){return}arguments.callee.base.apply(this,arguments)}});sc_require("views/table_item");Smartgraphs.TableView=SC.View.extend({showTableBinding:"*tableController.showTable",annotationListBinding:"*tableController.annotationList",datadefBinding:"*tableController.datadef",latestXBinding:"*tableController.latestX",latestYBinding:"*tableController.latestY",xUnitsAbbreviatedBinding:"*tableController.xUnits.abbreviation",yUnitsAbbreviatedBinding:"*tableController.yUnits.abbreviation",xPaneLabelBinding:"*tableController.xLabel",yPaneLabelBinding:"*tableController.yLabel",recentTagIndexStackBinding:"*tableController.recentTagIndexStack",scrollView:SC.outlet("tableColumnView.scrollView"),columnsView:SC.outlet("tableColumnView.scrollView.contentView"),xsView:SC.outlet("columnsView.xsView"),ysView:SC.outlet("columnsView.ysView"),backdropView:SC.outlet("columnsView.backdropView"),xLabel:function(){var a=this.get("xUnitsAbbreviated");return a?"%@ (%@)".fmt(this.get("xPaneLabel"),a):this.get("xPaneLabel")}.property("xUnitsAbbreviated","xPaneLabel").cacheable(),yLabel:function(){var a=this.get("yUnitsAbbreviated");return a?"%@ (%@)".fmt(this.get("yPaneLabel"),a):this.get("yPaneLabel")}.property("yUnitsAbbreviated","yPaneLabel").cacheable(),init:function(){this._viewsByClassAndId={};arguments.callee.base.apply(this,arguments)},fix:function(a,b){return(a===undefined||a===null)?null:a.toFixed(b)},numericX:function(){return this.fix(this.get("latestX"),1)}.property("latestX").cacheable(),numericY:function(){return this.fix(this.get("latestY"),2)}.property("latestY").cacheable(),layout:{top:10,bottom:10},childViews:["numericView","tableColumnView"],numericView:SC.View.design({layout:{width:300,centerX:-10,height:90,centerY:-10},childViews:["xs","ys"],xs:SC.View.design({layout:{left:0,width:100},childViews:["xLabel","xValue"],xLabel:SC.LabelView.design({classNames:["smartgraph-numeric-view-label"],layout:{top:0,height:50},textAlign:SC.ALIGN_RIGHT,valueBinding:".parentView.parentView.parentView.xLabel"}),xValue:SC.LabelView.design({classNames:["smartgraph-numeric-view-value"],layout:{top:40},textAlign:SC.ALIGN_RIGHT,valueBinding:".parentView.parentView.parentView.numericX"})}),ys:SC.View.design({layout:{right:0,width:120},childViews:["yLabel","yValue"],yLabel:SC.LabelView.design({classNames:["smartgraph-numeric-view-label"],layout:{top:0,height:50},textAlign:SC.ALIGN_RIGHT,valueBinding:".parentView.parentView.parentView.yLabel"}),yValue:SC.LabelView.design({classNames:["smartgraph-numeric-view-value"],layout:{top:40},textAlign:SC.ALIGN_RIGHT,valueBinding:".parentView.parentView.parentView.numericY"})})}),tableColumnView:SC.View.design({layout:{width:350,left:45},classNames:["smartgraph-table"],childViews:["labelsView","scrollView"],labelsView:SC.View.design({classNames:["table-background","table-background-top"],layout:{left:40,top:0,width:250,height:50},childViews:["xsLabel","ysLabel"],xsLabel:SC.LabelView.design({layout:{left:15,top:7,width:90,height:50},valueBinding:".parentView.parentView.parentView.xLabel"}),ysLabel:SC.LabelView.design({layout:{left:105,top:7,width:90,height:50},valueBinding:".parentView.parentView.parentView.yLabel"})}),scrollView:SC.ScrollView.design({layout:{left:0,top:50,width:290},classNames:["table-background"],borderStyle:SC.BORDER_NONE,contentView:SC.View.design({rowHeight:15,tableControllerBinding:".parentView.parentView.parentView.parentView*tableController",contentBinding:"*tableController.arrangedObjects",selectionBinding:"*tableController.selection",isSelectableBinding:"*tableController.isSelectable",annotationsListBinding:"*tableController.annotationsList",contentLengthBinding:"*content.length",contentLengthDidChange:function(){this.adjustHeightForContentLength()}.observes("contentLength"),adjustHeightForContentLength:function(){var a=this.getPath("content.length");this.adjust("height",a===0?0:a*this.get("rowHeight")+15)},childViews:["backdropView","xsView","ysView"],backdropView:RaphaelViews.RaphaelCanvasView.design({layout:{zIndex:0,width:290},childViews:"annotationsHolder".w(),annotationsHolder:RaphaelViews.RaphaelView.design({})}),xsView:SC.ListView.design({layout:{left:50,top:10,bottom:3,width:80},classNames:"table-column",rowHeightBinding:".parentView.rowHeight",canEditContent:NO,tableControllerBinding:".parentView*tableController",contentValueKeyBinding:"*tableController.xRoundingFunc",contentBinding:".parentView.content",isSelectableBinding:".parentView.isSelectable",selectionBinding:".parentView.selection",exampleView:Smartgraphs.TableItemView}),ysView:SC.ListView.design({layout:{left:140,top:10,bottom:3,width:80},classNames:"table-column",rowHeightBinding:".parentView.rowHeight",canEditContent:NO,tableControllerBinding:".parentView*tableController",contentValueKeyBinding:"*tableController.yRoundingFunc",contentBinding:".parentView.content",isSelectableBinding:".parentView.isSelectable",selectionBinding:".parentView.selection",exampleView:Smartgraphs.TableItemView})})})}),datadefDidChange:function(){this.invokeOnce("adjustViews")}.observes("datadef"),showTableDidChange:function(){this.invokeOnce("adjustViews")}.observes("showTable"),annotationListDidChange:function(){var h=this.get("annotationList");var g,b,j;var a={};for(var e=0,f=h.get("length");e<f;e++){g=h.objectAt(e);if(g.get("isModifierAnnotation")){continue}b=SC.guidFor(g.constructor);j=g.get("id");if(a[b]===undefined){a[b]={}}a[b][j]=g;if(!this._viewsByClassAndId[b]||!this._viewsByClassAndId[b][j]){this._addViewForItemToBackdrop(g,"annotation")}}var c;for(b in this._viewsByClassAndId){if(this._viewsByClassAndId.hasOwnProperty(b)){for(j in this._viewsByClassAndId[b]){if(this._viewsByClassAndId[b].hasOwnProperty(j)){c=this._viewsByClassAndId[b][j];if(!a[b]||!a[b][j]){this._removeViewFromBackdrop(c)}}}}}}.observes("*annotationList.[]"),adjustViews:function(){var b=this.get("tableColumnView");var a=b.get("scrollView");var e=a.get("contentView");var c=this.get("numericView");if(this.get("showTable")){c.set("isVisible",NO);e.bindings.forEach(function(f){f.connect()});b.set("isVisible",YES);this.invokeLast(function(){e.adjustHeightForContentLength();a.displayDidChange()})}else{c.set("isVisible",YES);e.bindings.forEach(function(f){f.disconnect()});b.set("isVisible",NO)}},_addViewForItemToBackdrop:function(c,e){var b=SC.guidFor(c.constructor);var a=c.constructor.viewClass.design({tableView:this,item:c,itemType:e}).create();if(a.get("canShowInTable")){this.getPath("tableColumnView.scrollView.contentView.backdropView.annotationsHolder").appendChild(a);if(this._viewsByClassAndId[b]===undefined){this._viewsByClassAndId[b]={}}this._viewsByClassAndId[b][c.get("id")]=a}},_removeViewFromBackdrop:function(b){var c=b.get("item"),a=SC.guidFor(c.constructor),e=c.get("id");delete this._viewsByClassAndId[a][e];b.removeFromParent()},coordinatesForIndex:function(c){if(SC.none(c)){return{top:-9999,left:-9999,bottom:-9999,right:-9999}}var a=this.getPath("columnsView.rowHeight"),m=this.get("backdropView").$(),h=m.width(),b=m.offset(),g=this.get("xsView").$().offset(),k=this.get("ysView").$(),e=k.offset(),l=k.width(),j=g.top-b.top+c*a,f=g.left-b.left,n=e.left+l-b.left;return{top:j,left:f,bottom:j+a,right:n}},recentTagIndexStackDidChange:function(){this.invokeOnce(this.scrollToRecentTags)}.observes(".recentTagIndexStack.[]"),_scoreScrollPositions:function(a,b,f){var e=0,c;for(c=a.length-1;c>=0;c--){e=(e*2)+((b<=a[c]&&a[c]<=f)?1:0)}return e},scrollToRecentTags:function(g){var j=this.get("recentTagIndexStack"),h=j.get("length"),b=this.getPath("tableController.length"),a,e,y,w,v,p,l,k,u,n,q,x,t,o,m,s,c,f;if(!b||!h){return}if(h>=this._previousTagIndexStackLength||!this._previousTagIndexStackLength){a=this.get("scrollView");e=this.getPath("columnsView.rowHeight");y=a.$().height();w=this.getPath("xsView.layout").top;v=a.get("verticalScrollOffset");p=Math.floor(y/e);l=Math.ceil((v-w)/e);k=Math.floor((y+v-w)/e)-1;u=this._scoreScrollPositions;n=u(j,l,k);q=j.map(function(z){return u(j,z,z+p-1)});x=q.max();if(x>n){o=j[q.indexOf(x)];m=Math.min(b-1,o+p-1);t=j.filter(function(z){return o<=z&&z<=m});s=t.min();c=t.max();if(Math.abs(s-l)<Math.abs(c-k)){f=s}else{f=Math.max(0,c-p+1)}this.get("scrollView").scrollTo(0,f*e+w)}}this._previousTagIndexStackLength=h}});Smartgraphs.mainPage=SC.Page.design({mainPane:SC.MainPane.design({theme:"ace",defaultResponder:"Smartgraphs.statechart",childViews:"topToolbar container bottomToolbar".w(),touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();return YES},topToolbar:SC.ToolbarView.design({anchorLocation:SC.ANCHOR_TOP,childViews:["title","editButton","runButton","creditsButton"],title:SC.LabelView.design({layout:{centerY:0,height:24,left:8,width:400},controlSize:SC.LARGE_CONTROL_SIZE,fontWeight:SC.BOLD_WEIGHT,valueBinding:"Smartgraphs.activityController.title"}),creditsButton:SC.ButtonView.design({layout:{right:20,centerY:0,height:24,width:80},isVisibleBinding:"Smartgraphs.toolbarController.shouldShowCreditsButton",title:"Credits",action:"showCredits"}),editButton:SC.ButtonView.design({layout:{right:120,centerY:0,height:24,width:80},shouldShowEditButtonBinding:"Smartgraphs.toolbarController.shouldShowEditButton",isVisible:function(){return Smartgraphs.toolbarController.get("shouldShowEditButton")&&Smartgraphs.get("showEditButton")}.property("shouldShowEditButton"),title:"Edit",action:"openAuthorView"}),runButton:SC.ButtonView.design({layout:{right:120,centerY:0,height:24,width:80},isVisibleBinding:"Smartgraphs.toolbarController.shouldShowRunButton",title:"Run",action:"runActivity"})}),container:SC.SplitView.design({layout:{top:32,bottom:33,minWidth:768,minHeight:502},classNames:["sg-overflow-fix"],defaultThickness:200,topLeftMaxThickness:300,layoutDirection:SC.LAYOUT_HORIZONTAL,topLeftView:SC.ScrollView.design({contentView:SC.SourceListView.design({classNames:["outline"],contentBinding:"Smartgraphs.activityOutlineController.arrangedObjects",contentValueKey:"title",selectionBinding:"Smartgraphs.activityOutlineController.selection",isSelectableBinding:"Smartgraphs.activityOutlineController.isSelectable",exampleView:SC.ListItemView.extend({classNames:["rk-test"]})})}),dividerView:SC.SplitDividerView,bottomRightView:SC.ContainerView.design({nowShowingBinding:"Smartgraphs.appWindowController.viewToShow"}),shouldShowOutlineBinding:"Smartgraphs.appWindowController.shouldShowOutline",shouldShowOutlineDidChange:function(){if(this.get("shouldShowOutline")){this.setPath("topLeftView.isVisible",YES);this.setPath("dividerView.isVisible",YES);this.updateChildLayout()}else{this.setPath("topLeftView.isVisible",NO);this.setPath("dividerView.isVisible",NO);this.get("bottomRightView").adjust("left",0)}}.observes("shouldShowOutline")}),bottomToolbar:SC.ToolbarView.design({anchorLocation:SC.ANCHOR_BOTTOM,classNames:"bottom-toolbar".w(),childViews:["backButton","pageButtons","nextButton"],backButton:SC.ButtonView.design({layout:{left:20,centerY:0,height:24,width:80},title:"Back",theme:"capsule",action:"gotoPreviousPage",isSwipeLeft:YES,isEnabledBinding:"Smartgraphs.activityViewController.enableBackPageButton"}),pageButtons:SC.SegmentedView.design({layout:{left:120,right:120,height:24,centerY:0},classNames:["sc-regular-size"],itemsBinding:"Smartgraphs.activityPagesController",itemTitleKey:"pageNumberAsString",itemValueKey:"pageNumber",valueBinding:"Smartgraphs.activityPagesController.currentPageNumber"}),nextButton:SC.ButtonView.design({layout:{right:20,centerY:0,height:24,width:80},title:"Next",theme:"capsule",action:"gotoNextPage",isSwipeRight:YES,isVisibleBinding:"Smartgraphs.activityViewController.showNextPageButton",isEnabledBinding:"Smartgraphs.activityViewController.enableNextPageButton",isDefaultBinding:"Smartgraphs.activityViewController.highlightNextPageButton"})})}),loadingView:SC.View.design({classNames:"smartgraph-pane".w(),childViews:"loadingIconView loadingMessageView".w(),loadingIconView:SC.ImageView.design({layout:{width:48,height:48,centerX:0,centerY:-39},value:"/static/smartgraphs/en/11d909440e1356c4ad1fc342724899d7044d07ef/source/resources/images/pane_loading.gif"}),loadingMessageView:SC.LabelView.design({classNames:"loading".w(),layout:{width:200,height:24,centerX:0,centerY:15},textAlign:SC.ALIGN_CENTER,valueBinding:"Smartgraphs.appWindowController.loadingMessage"})})});sc_require("resources/pages/main_page");Smartgraphs.activityPageDef=SC.Page.extend({activityView:SC.View.design({childViews:"instructionsWrapper dataWrapper".w(),theme:"sc-ace",loadingMessage:"Loading Activity...",instructionsWrapper:SC.View.design({layout:{left:0,width:0.45},childViews:"instructionsView".w(),instructionsView:SC.View.design({classNames:"smartgraph-pane",childViews:"textWrapper".w(),textWrapper:SC.View.design({layout:{top:20,right:20,left:20},classNames:"text-wrapper".w(),childViews:"introText activityStepWrapper".w(),introText:SC.StaticContentView.design({contentBinding:"Smartgraphs.activityPageController.introText",isVisibleBinding:SC.Binding.bool("Smartgraphs.activityPageController.introText")}),activityStepWrapper:SC.View.design({useStaticLayout:YES,childViews:"activityStepDialog buttonsView".w(),activityStepDialog:SC.View.design({useStaticLayout:YES,isVisibleBinding:"Smartgraphs.activityStepController.dialogTextHasContent",childViews:"beforeText responseTemplate afterText".w(),classNames:"dialog-text".w(),beforeText:SC.StaticContentView.design({contentBinding:"Smartgraphs.activityStepController.beforeText",isVisibleBinding:SC.Binding.bool("Smartgraphs.activityStepController.beforeText")}),responseTemplate:Smartgraphs.ResponseTemplateView.design({fieldTypesBinding:"Smartgraphs.responseTemplateController.fieldTypes",fieldChoicesListBinding:"Smartgraphs.responseTemplateController.fieldChoicesList",valuesBinding:"Smartgraphs.responseTemplateController.values",editingShouldBeEnabledBinding:"Smartgraphs.responseTemplateController.editingShouldBeEnabled",viewShouldResetBinding:"Smartgraphs.responseTemplateController.viewShouldReset"}),afterText:SC.StaticContentView.design({contentBinding:"Smartgraphs.activityStepController.afterText",isVisibleBinding:SC.Binding.bool("Smartgraphs.activityStepController.afterText")})}),buttonsView:SC.View.design({useStaticLayout:YES,layout:{height:24},childViews:"submitButton".w(),submitButton:SC.ButtonView.design({layout:{width:180,right:0},action:"submitStep",titleBinding:"Smartgraphs.activityStepController.submitButtonTitle",isVisibleBinding:"Smartgraphs.activityViewController.showSubmitButton",isEnabledBinding:"Smartgraphs.activityViewController.enableSubmitButton",isDefaultBinding:"Smartgraphs.activityViewController.enableSubmitButton",titleDidChange:function(){var a=SC.metricsForString(this.get("title"),this.getPath("parentView.layer"),["sc-button-label","text-wrapper"]);this.adjust("width",a.width+48)}.observes("title"),_touchBoundaryFrame:function(){var b=this.get("frame"),a=this.$().offset();b.x=a.left;b.y=a.top;return b}.property()})})})})})}),dataWrapper:SC.View.design({layout:{right:0,width:0.55},childViews:"dataView".w(),dataView:SC.ContainerView.design({layout:{top:4,right:4,bottom:4,left:4},nowShowingBinding:"Smartgraphs.activityViewController.dataViewNowShowing"})})}),singlePaneDataView:SC.ContainerView.design({classNames:"smartgraph-pane",nowShowingBinding:"Smartgraphs.activityViewController.singlePaneNowShowing"}),splitPaneDataView:SC.View.design({childViews:"topPaneWrapper bottomPaneWrapper".w(),topPaneWrapper:SC.View.design({layout:{top:0,height:0.5},childViews:"topPane".w(),topPane:SC.ContainerView.design({layout:{bottom:2},classNames:"smartgraph-pane",nowShowingBinding:"Smartgraphs.activityViewController.topPaneNowShowing"})}),bottomPaneWrapper:SC.View.design({layout:{bottom:0,height:0.5},childViews:"bottomPane".w(),bottomPane:SC.ContainerView.design({layout:{top:2},classNames:"smartgraph-pane",nowShowingBinding:"Smartgraphs.activityViewController.bottomPaneNowShowing"})})}),firstImageView:Smartgraphs.ImageView.design({imageURLBinding:"Smartgraphs.activityViewController.firstImageValue",captionBinding:"Smartgraphs.activityViewController.firstImageCaption"}),secondImageView:Smartgraphs.ImageView.design({imageURLBinding:"Smartgraphs.activityViewController.secondImageValue",captionBinding:"Smartgraphs.activityViewController.secondImageCaption"}),firstGraphPane:Smartgraphs.GraphPane.design({graphControllerBinding:"Smartgraphs.firstGraphController"}),secondGraphPane:Smartgraphs.GraphPane.design({graphControllerBinding:"Smartgraphs.secondGraphController"}),firstTableView:Smartgraphs.TableView.design({tableControllerBinding:"Smartgraphs.firstTableController"}),secondTableView:Smartgraphs.TableView.design({tableControllerBinding:"Smartgraphs.secondTableController"}),errorLoadingActivityView:SC.View.design({classNames:"smartgraph-pane",childViews:"errorMessage".w(),errorMessage:SC.LabelView.design({layout:{height:32,width:500,centerX:0,centerY:0},classNames:"error",textAlign:SC.ALIGN_CENTER,value:"There was an error loading that Activity."})}),sensorLoadingView:SC.LabelView.design({layout:{height:35,width:250,centerX:0},classNames:"sensor-message".w(),textAlign:SC.ALIGN_CENTER,value:"Loading sensor..."})});Smartgraphs.activityPage=Smartgraphs.activityPageDef.design();sc_require("resources/pages/main_page");Smartgraphs.authorPageDef=SC.Page.extend({authorView:SC.View.design({childViews:["instructionsWrapper","jsonEditor"],theme:"sc-ace",instructionsWrapper:SC.View.design({layout:{left:0,width:0.45},childViews:"instructionsView".w(),instructionsView:SC.View.design({classNames:"smartgraph-pane",childViews:"textWrapper".w(),textWrapper:SC.View.design({layout:{top:20,right:20,left:20},classNames:"text-wrapper".w(),childViews:"introTextView introTextHintView activityStepView".w(),minEditorHeight:100,introTextView:SC.LabelView.design({valueBinding:"Smartgraphs.activityPageController.introText",useStaticLayout:YES,escapeHTML:NO,isEditable:YES,isInlineEditorMultiline:YES,minEditorHeightBinding:".parentView.minEditorHeight",showEditor:NO,showEditorDidChange:function(){if(this.get("showEditor")){this.beginEditing()}}.observes("showEditor"),beginEditing:function(){if(this.get("frame").height<this.get("minEditorHeight")){SC.RunLoop.begin();this.adjust("height",this.get("minEditorHeight"));SC.RunLoop.end()}arguments.callee.base.apply(this,arguments)},inlineEditorDidEndEditing:function(){arguments.callee.base.apply(this,arguments);this.set("showEditor",NO);this.set("layout",{})},mouseEntered:function(){if(this.get("frame").height<this.get("minEditorHeight")){this.adjust("height",this.get("minEditorHeight"))}this.$().addClass("hovered")},mouseExited:function(){this.$().removeClass("hovered");this.set("layout",{})},mouseDown:function(){this.beginEditing()}}),introTextHintView:SC.LabelView.design({value:"<p>Introduce Page Here...</p>",classNames:"hint".w(),escapeHTML:NO,showEditorBinding:SC.Binding.oneWay(".parentView.introTextView.showEditor"),introTextIsEmptyBinding:SC.Binding.not("Smartgraphs.activityPageController.introText"),isVisible:function(){return this.get("introTextIsEmpty")&&!this.get("showEditor")}.property("introTextIsEmpty","showEditor").cacheable(),minEditorHeightBinding:".parentView.minEditorHeight",didUpdateLayer:function(){this.invokeLast(function(){this.set("originalHeight",this.$("p").outerHeight(true));this.adjust("height",this.get("originalHeight"))})},mouseDown:function(){this.adjust("height",this.get("originalHeight"));this.setPath("parentView.introTextView.showEditor",YES)},mouseEntered:function(){this.adjust("height",this.get("minEditorHeight"));this.$().addClass("hovered")},mouseExited:function(){this.$().removeClass("hovered");this.adjust("height",this.get("originalHeight"))}}),activityStepView:SC.View.design({useStaticLayout:YES,isVisibleBinding:"Smartgraphs.activityStepController.dialogTextHasContent",childViews:"beforeTextView afterTextView".w(),classNames:"dialog-text".w(),beforeTextView:SC.StaticContentView.design({contentBinding:"Smartgraphs.activityStepController.beforeText",isVisibleBinding:SC.Binding.bool("Smartgraphs.activityStepController.beforeText")}),afterTextView:SC.StaticContentView.design({contentBinding:"Smartgraphs.activityStepController.afterText",isVisibleBinding:SC.Binding.bool("Smartgraphs.activityStepController.afterText")})})})})}),jsonEditor:SC.View.design({layout:{right:0,width:0.55}})})});Smartgraphs.authorPage=Smartgraphs.authorPageDef.design();Smartgraphs.main=function main(){Smartgraphs.dataSource=SC.CascadeDataSource.create({dataSources:"couch fixtures".w(),couch:Smartgraphs.CouchDataSource.create(),fixtures:SC.FixturesDataSource.create()});Smartgraphs.store=SC.Store.create().from(Smartgraphs.dataSource);Smartgraphs.preloadFixtures();Smartgraphs.getPath("mainPage.mainPane").append();if(!window.location.hash){}window.onbeforeunload=function(){return"You will lose your place in the activity if you leave this page."};Smartgraphs.statechart.initStatechart()};Smartgraphs.preloadFixtures=function(){for(var a in Smartgraphs){if(Smartgraphs.hasOwnProperty(a)&&Smartgraphs[a]&&Smartgraphs[a].isClass&&Smartgraphs[a].FIXTURES){Smartgraphs.store.find(Smartgraphs[a])}}};Smartgraphs.sendGaEvent=function(b,c){var a=""+b+" = "+c;if(typeof Smartgraphs.sendGAEvent_last_hash_key==="undefined"){Smartgraphs.sendGAEvent_last_hash_key=""}if(Smartgraphs.sendGAEvent_last_hash_key===a){return}Smartgraphs.sendGAEvent_last_hash_key=a;if(typeof _gaq!=="undefined"&&window.location.hostname!=="localhost"){_gaq.push(["_trackEvent","SmartGraphs Activities",b,c]);console.log("sent analytics %s",a)}else{if(window.location.hostname==="localhost"){console.log("Didn't send analytics: running on localhost. Would have sent %s",a)}else{if(!_gaq){console.log("Didn't send analytics: _gaq not defined. Would have sent %s",a)}else{console.log("Couldn't send analytics: unsure why. Would have sent %s",a)}}}};function main(){Smartgraphs.main()};